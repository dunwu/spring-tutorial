<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring MVC ä¹‹ DispatcherServlet | SPRING TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/spring-tutorial/img/favicon.ico">
    <script src="https://cdn.wwads.cn/js/makemoney.js" type="text/javascript"></script>
    <meta name="description" content="ğŸ’§ spring-tutorial æ˜¯ä¸€ä¸ª Spring æ•™ç¨‹ã€‚">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    <meta name="wwads-cn-verify" content="mxqWx62nfQQ9ocT4e5DzISHzOWyF4s">
    
    <link rel="preload" href="/spring-tutorial/assets/css/0.styles.c3bb4e6a.css" as="style"><link rel="preload" href="/spring-tutorial/assets/js/app.411aa74d.js" as="script"><link rel="preload" href="/spring-tutorial/assets/js/2.c83e292c.js" as="script"><link rel="preload" href="/spring-tutorial/assets/js/46.74cf9cd1.js" as="script"><link rel="prefetch" href="/spring-tutorial/assets/js/10.b7601455.js"><link rel="prefetch" href="/spring-tutorial/assets/js/11.03948980.js"><link rel="prefetch" href="/spring-tutorial/assets/js/12.ecf38bf0.js"><link rel="prefetch" href="/spring-tutorial/assets/js/13.e75cd6c0.js"><link rel="prefetch" href="/spring-tutorial/assets/js/14.5998fd7f.js"><link rel="prefetch" href="/spring-tutorial/assets/js/15.bed79774.js"><link rel="prefetch" href="/spring-tutorial/assets/js/16.82055b07.js"><link rel="prefetch" href="/spring-tutorial/assets/js/17.f6042cab.js"><link rel="prefetch" href="/spring-tutorial/assets/js/18.d08028c1.js"><link rel="prefetch" href="/spring-tutorial/assets/js/19.ab5a7a0c.js"><link rel="prefetch" href="/spring-tutorial/assets/js/20.21031ee6.js"><link rel="prefetch" href="/spring-tutorial/assets/js/21.f301cc59.js"><link rel="prefetch" href="/spring-tutorial/assets/js/22.e81d3a52.js"><link rel="prefetch" href="/spring-tutorial/assets/js/23.ac570f2d.js"><link rel="prefetch" href="/spring-tutorial/assets/js/24.2a9ff969.js"><link rel="prefetch" href="/spring-tutorial/assets/js/25.dce5186a.js"><link rel="prefetch" href="/spring-tutorial/assets/js/26.30d77b82.js"><link rel="prefetch" href="/spring-tutorial/assets/js/27.bc02dd9d.js"><link rel="prefetch" href="/spring-tutorial/assets/js/28.57c0657d.js"><link rel="prefetch" href="/spring-tutorial/assets/js/29.759b5117.js"><link rel="prefetch" href="/spring-tutorial/assets/js/3.73be09f2.js"><link rel="prefetch" href="/spring-tutorial/assets/js/30.a58bf8be.js"><link rel="prefetch" href="/spring-tutorial/assets/js/31.b0bbb91f.js"><link rel="prefetch" href="/spring-tutorial/assets/js/32.af4a0d23.js"><link rel="prefetch" href="/spring-tutorial/assets/js/33.cda8ce76.js"><link rel="prefetch" href="/spring-tutorial/assets/js/34.d8c61183.js"><link rel="prefetch" href="/spring-tutorial/assets/js/35.07911c10.js"><link rel="prefetch" href="/spring-tutorial/assets/js/36.fea80826.js"><link rel="prefetch" href="/spring-tutorial/assets/js/37.26d11b84.js"><link rel="prefetch" href="/spring-tutorial/assets/js/38.cf23f3c8.js"><link rel="prefetch" href="/spring-tutorial/assets/js/39.6b871216.js"><link rel="prefetch" href="/spring-tutorial/assets/js/4.a5cae8aa.js"><link rel="prefetch" href="/spring-tutorial/assets/js/40.bdcf602f.js"><link rel="prefetch" href="/spring-tutorial/assets/js/41.92ddddfd.js"><link rel="prefetch" href="/spring-tutorial/assets/js/42.afb2f83f.js"><link rel="prefetch" href="/spring-tutorial/assets/js/43.87c61e7a.js"><link rel="prefetch" href="/spring-tutorial/assets/js/44.6ebbb44c.js"><link rel="prefetch" href="/spring-tutorial/assets/js/45.3c340e17.js"><link rel="prefetch" href="/spring-tutorial/assets/js/47.6b88e592.js"><link rel="prefetch" href="/spring-tutorial/assets/js/48.3f4c8dde.js"><link rel="prefetch" href="/spring-tutorial/assets/js/49.7a8efab0.js"><link rel="prefetch" href="/spring-tutorial/assets/js/5.8dc0a646.js"><link rel="prefetch" href="/spring-tutorial/assets/js/50.c9e00468.js"><link rel="prefetch" href="/spring-tutorial/assets/js/51.f749b4b1.js"><link rel="prefetch" href="/spring-tutorial/assets/js/52.211e3e93.js"><link rel="prefetch" href="/spring-tutorial/assets/js/53.fa74dd36.js"><link rel="prefetch" href="/spring-tutorial/assets/js/54.712ed5d2.js"><link rel="prefetch" href="/spring-tutorial/assets/js/55.e5907eba.js"><link rel="prefetch" href="/spring-tutorial/assets/js/56.fb6c932f.js"><link rel="prefetch" href="/spring-tutorial/assets/js/57.6d1f0260.js"><link rel="prefetch" href="/spring-tutorial/assets/js/58.e1a3dfc7.js"><link rel="prefetch" href="/spring-tutorial/assets/js/59.b3267c14.js"><link rel="prefetch" href="/spring-tutorial/assets/js/6.aaa74b22.js"><link rel="prefetch" href="/spring-tutorial/assets/js/60.9bf75b52.js"><link rel="prefetch" href="/spring-tutorial/assets/js/61.4ac19364.js"><link rel="prefetch" href="/spring-tutorial/assets/js/62.41f2ac41.js"><link rel="prefetch" href="/spring-tutorial/assets/js/63.e6a603db.js"><link rel="prefetch" href="/spring-tutorial/assets/js/64.cf0d866f.js"><link rel="prefetch" href="/spring-tutorial/assets/js/65.7b49e268.js"><link rel="prefetch" href="/spring-tutorial/assets/js/66.6cc7cfa1.js"><link rel="prefetch" href="/spring-tutorial/assets/js/67.a41f2515.js"><link rel="prefetch" href="/spring-tutorial/assets/js/68.27ed265a.js"><link rel="prefetch" href="/spring-tutorial/assets/js/69.47dbdb01.js"><link rel="prefetch" href="/spring-tutorial/assets/js/7.6df75efc.js"><link rel="prefetch" href="/spring-tutorial/assets/js/70.5f3ecd44.js"><link rel="prefetch" href="/spring-tutorial/assets/js/71.58845d95.js"><link rel="prefetch" href="/spring-tutorial/assets/js/72.3a6afab8.js"><link rel="prefetch" href="/spring-tutorial/assets/js/8.e65c95d4.js"><link rel="prefetch" href="/spring-tutorial/assets/js/9.d144d69e.js">
    <link rel="stylesheet" href="/spring-tutorial/assets/css/0.styles.c3bb4e6a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/spring-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/master/common/dunwu-logo.png" alt="SPRING TUTORIAL" class="logo"> <span class="site-name can-hide">SPRING TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/00.Springç»¼åˆ/" class="nav-link">ç»¼åˆç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/01.Springæ ¸å¿ƒ/" class="nav-link">æ ¸å¿ƒç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/02.Springæ•°æ®/" class="nav-link">æ•°æ®ç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/03.SpringWeb/" class="nav-link">Webç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/04.SpringIO/" class="nav-link">IOç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/05.Springé›†æˆ/" class="nav-link">é›†æˆç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/99.Springå…¶ä»–/" class="nav-link">å…¶ä»–</a></div> <a href="https://github.com/dunwu/spring-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/00.Springç»¼åˆ/" class="nav-link">ç»¼åˆç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/01.Springæ ¸å¿ƒ/" class="nav-link">æ ¸å¿ƒç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/02.Springæ•°æ®/" class="nav-link">æ•°æ®ç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/03.SpringWeb/" class="nav-link">Webç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/04.SpringIO/" class="nav-link">IOç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/05.Springé›†æˆ/" class="nav-link">é›†æˆç¯‡</a></div><div class="nav-item"><a href="/spring-tutorial/01.Java/13.æ¡†æ¶/01.Spring/99.Springå…¶ä»–/" class="nav-link">å…¶ä»–</a></div> <a href="https://github.com/dunwu/spring-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>æ¡†æ¶</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Springç»¼åˆ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Springæ ¸å¿ƒ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Springæ•°æ®</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>SpringWeb</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/spring-tutorial/pages/65351b/" class="sidebar-link">Spring Web ç»¼è¿°</a></li><li><a href="/spring-tutorial/pages/5d002f/" class="sidebar-link">Spring Web åº”ç”¨</a></li><li><a href="/spring-tutorial/pages/20287b/" aria-current="page" class="active sidebar-link">Spring MVC ä¹‹ DispatcherServlet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/spring-tutorial/pages/20287b/#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/spring-tutorial/pages/20287b/#dispatcherservlet-å·¥ä½œåŸç†" class="sidebar-link">DispatcherServlet å·¥ä½œåŸç†</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#dispatcherservlet-å·¥ä½œæµç¨‹" class="sidebar-link">DispatcherServlet å·¥ä½œæµç¨‹</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#dispatcherservlet-æºç è§£è¯»" class="sidebar-link">DispatcherServlet æºç è§£è¯»</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#ä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„" class="sidebar-link">ä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/spring-tutorial/pages/20287b/#é…ç½®" class="sidebar-link">é…ç½®</a></li><li class="sidebar-sub-header level2"><a href="/spring-tutorial/pages/20287b/#è·¯å¾„åŒ¹é…" class="sidebar-link">è·¯å¾„åŒ¹é…</a></li><li class="sidebar-sub-header level2"><a href="/spring-tutorial/pages/20287b/#æ‹¦æˆªå™¨" class="sidebar-link">æ‹¦æˆªå™¨</a></li><li class="sidebar-sub-header level2"><a href="/spring-tutorial/pages/20287b/#è§£æå™¨" class="sidebar-link">è§£æå™¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/spring-tutorial/pages/20287b/#handlerexceptionresolver" class="sidebar-link">HandlerExceptionResolver</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#è§£æå™¨é“¾" class="sidebar-link">è§£æå™¨é“¾</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#é”™è¯¯é¡µé¢" class="sidebar-link">é”™è¯¯é¡µé¢</a></li><li class="sidebar-sub-header level3"><a href="/spring-tutorial/pages/20287b/#viewresolver" class="sidebar-link">ViewResolver</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#å¤„ç†" class="sidebar-link">å¤„ç†</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#é‡å®šå‘" class="sidebar-link">é‡å®šå‘</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#è½¬å‘" class="sidebar-link">è½¬å‘</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#å†…å®¹åå•†" class="sidebar-link">å†…å®¹åå•†</a></li><li class="sidebar-sub-header level3"><a href="/spring-tutorial/pages/20287b/#localeresolver" class="sidebar-link">LocaleResolver</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#localeresolver-2" class="sidebar-link">LocaleResolver</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#æ ‡å¤´è§£æå™¨" class="sidebar-link">æ ‡å¤´è§£æå™¨</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#cookielocaleresolver" class="sidebar-link">CookieLocaleResolver</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#sessionlocaleresolver" class="sidebar-link">SessionLocaleResolver</a></li><li class="sidebar-sub-header level4"><a href="/spring-tutorial/pages/20287b/#localechangeinterceptor" class="sidebar-link">LocaleChangeInterceptor</a></li><li class="sidebar-sub-header level3"><a href="/spring-tutorial/pages/20287b/#themeresolver" class="sidebar-link">ThemeResolver</a></li><li class="sidebar-sub-header level3"><a href="/spring-tutorial/pages/20287b/#multipartresolver" class="sidebar-link">MultipartResolver</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/spring-tutorial/pages/20287b/#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a></li></ul></li><li><a href="/spring-tutorial/pages/4a164d/" class="sidebar-link">Spring MVC ä¹‹è¿‡æ»¤å™¨</a></li><li><a href="/spring-tutorial/pages/1d2954/" class="sidebar-link">Spring MVC ä¹‹è·¨åŸŸ</a></li><li><a href="/spring-tutorial/pages/251e31/" class="sidebar-link">Spring MVC ä¹‹è§†å›¾æŠ€æœ¯</a></li><li><a href="/spring-tutorial/pages/ad0516/" class="sidebar-link">SpringBoot ä¹‹åº”ç”¨ EasyUI</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>SpringIO</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Springé›†æˆ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Springå®‰å…¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Springå…¶ä»–</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/spring-tutorial/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/spring-tutorial/categories/?category=Java" title="åˆ†ç±»" data-v-06225672>Java</a></li><li data-v-06225672><a href="/spring-tutorial/categories/?category=%E6%A1%86%E6%9E%B6" title="åˆ†ç±»" data-v-06225672>æ¡†æ¶</a></li><li data-v-06225672><a href="/spring-tutorial/categories/?category=Spring" title="åˆ†ç±»" data-v-06225672>Spring</a></li><li data-v-06225672><a href="/spring-tutorial/categories/?category=SpringWeb" title="åˆ†ç±»" data-v-06225672>SpringWeb</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/dunwu" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>dunwu</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-02-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Spring MVC ä¹‹ DispatcherServlet<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="spring-mvc-ä¹‹-dispatcherservlet"><a href="#spring-mvc-ä¹‹-dispatcherservlet" class="header-anchor">#</a> Spring MVC ä¹‹ DispatcherServlet</h1> <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <p><code>DispatcherServlet</code> æ˜¯ Spring MVC æ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£å°†<strong>å®¢æˆ·ç«¯è¯·æ±‚æ˜ å°„åˆ°ç›¸åº”çš„æ§åˆ¶å™¨ï¼Œç„¶åè°ƒç”¨æ§åˆ¶å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”ç»“æœ</strong>ã€‚</p> <h3 id="dispatcherservlet-å·¥ä½œåŸç†"><a href="#dispatcherservlet-å·¥ä½œåŸç†" class="header-anchor">#</a> DispatcherServlet å·¥ä½œåŸç†</h3> <h4 id="dispatcherservlet-å·¥ä½œæµç¨‹"><a href="#dispatcherservlet-å·¥ä½œæµç¨‹" class="header-anchor">#</a> DispatcherServlet å·¥ä½œæµç¨‹</h4> <p><code>DispatcherServlet</code> çš„å·¥ä½œæµç¨‹å¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/master/cs/java/spring/web/spring-dispatcher-servlet.png" alt="img"></p> <ol><li><strong>æ¥æ”¶ Http è¯·æ±‚</strong>ï¼šå½“å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚æ—¶ï¼Œ<code>DispatcherServlet</code> æ¥æ”¶è¯¥è¯·æ±‚å¹¶å°†å…¶ä¼ é€’ç»™ Spring MVC æ¡†æ¶ã€‚</li> <li><strong>é€‰æ‹© <code>Handler</code></strong>ï¼š<code>DispatcherServlet</code> ä¼šæ ¹æ®è¯·æ±‚çš„ URL æ‰¾åˆ°å¯¹åº”çš„å¤„ç†å™¨æ˜ å°„å™¨ <code>HandlerMapping</code>ï¼Œè¯¥æ˜ å°„å™¨ä¼šæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„ URL æ˜ å°„è§„åˆ™æ‰¾åˆ°åˆé€‚çš„å¤„ç†å™¨ <code>Handler</code>ã€‚
<ul><li><strong>ç»‘å®šå±æ€§</strong>ï¼š<code>DispatcherServlet</code> ä¼šæ ¹æ®ç¨‹åºçš„ web åˆå§‹åŒ–ç­–ç•¥å…³è”å„ç§ <code>Resolver</code>ï¼Œå¦‚ï¼š<code>LocaleResolver</code>ã€<code>ThemeResolver</code> ç­‰ã€‚</li> <li><code>DispatcherServlet</code> æ ¹æ® <code>&lt;servlet-name&gt;-servlet.xml</code> ä¸­çš„é…ç½®å¯¹è¯·æ±‚çš„ URL è¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ã€‚ç„¶åæ ¹æ®è¯¥ URIï¼Œè°ƒç”¨ <code>HandlerMapping</code> è·å¾—è¯¥ <code>Handler</code> é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ <code>Handler</code> å¯¹è±¡ä»¥åŠ <code>Handler</code> å¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥<code>HandlerExecutionChain</code> å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚
<ul><li>å°†è¯·æ±‚æ˜ å°„åˆ°å¤„ç†ç¨‹åºä»¥åŠç”¨äºé¢„å¤„ç†å’Œåå¤„ç†çš„æ‹¦æˆªå™¨åˆ—è¡¨ã€‚æ˜ å°„åŸºäºä¸€äº›æ ‡å‡†ï¼Œå…¶ç»†èŠ‚å›  <code>HandlerMapping</code> å®ç°è€Œå¼‚ã€‚</li> <li>ä¸¤ä¸ªä¸»è¦çš„ <code>HandlerMapping</code> å®ç°æ˜¯ <code>RequestMappingHandlerMapping</code>ï¼ˆæ”¯æŒ <code>@RequestMapping</code> æ³¨é‡Šæ–¹æ³•ï¼‰å’Œ <code>SimpleUrlHandlerMapping</code>ï¼ˆç»´æŠ¤ URI è·¯å¾„æ¨¡å¼åˆ°å¤„ç†ç¨‹åºçš„æ˜¾å¼æ³¨å†Œï¼‰ã€‚</li></ul></li></ul></li> <li><strong>é€‰æ‹© <code>HandlerAdapter</code></strong>ï¼š <code>DispatcherServlet</code> æ ¹æ®è·å¾—çš„ <code>Handler</code>ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ <code>HandlerAdapter</code>ã€‚
<ul><li><code>HandlerAdapter</code> å¸®åŠ© <code>DispatcherServlet</code> è°ƒç”¨æ˜ å°„åˆ°è¯·æ±‚çš„ <code>Handler</code>ï¼Œè€Œä¸ç®¡å®é™…è°ƒç”¨ <code>Handler</code> çš„æ–¹å¼å¦‚ä½•ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨å¸¦æ³¨è§£çš„æ§åˆ¶å™¨éœ€è¦è§£ææ³¨è§£ã€‚<code>HandlerAdapter</code> çš„ä¸»è¦ç›®çš„æ˜¯ä¿æŠ¤ <code>DispatcherServlet</code> å…å—æ­¤ç±»ç»†èŠ‚çš„å½±å“ã€‚</li></ul></li> <li><strong><code>Handler</code> å¤„ç†è¯·æ±‚</strong>ï¼š<code>DispatcherServlet</code> æå– <code>Request</code> ä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å…… <code>Handler</code> å…¥å‚ï¼Œç”± <code>HandlerAdapter</code> è´Ÿè´£è°ƒç”¨ <code>Handler</code>ï¼ˆ<code>Controller</code>)ã€‚ åœ¨å¡«å…… <code>Handler</code> çš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpring å°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š
<ul><li><code>HttpMessageConverter</code>ï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚ Jsonã€xml ç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯ã€‚</li> <li>æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚ <code>String</code> è½¬æ¢æˆ <code>Integer</code>ã€<code>Double</code>ç­‰ã€‚</li> <li>æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰ã€‚</li> <li>æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ° <code>BindingResult</code> æˆ– <code>Error</code> ä¸­ã€‚</li></ul></li> <li><strong>è¿”å› <code>ModelAndView</code> å¯¹è±¡</strong>ï¼š<code>Handler</code> å¤„ç†å®Œè¯·æ±‚åï¼Œä¼šè¿”å›ä¸€ä¸ª <code>ModelAndView</code> å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†å¤„ç†ç»“æœï¼ˆ<code>Model</code>ï¼‰å’Œè§†å›¾ï¼ˆ<code>View</code>ï¼‰ä¿¡æ¯ã€‚</li> <li><strong>é€‰æ‹© <code>ViewResolver</code> æ¸²æŸ“ <code>ModelAndView</code></strong>ï¼šæ ¹æ®è¿”å›çš„ <code>ModelAndView</code>ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ <code>ViewResolver</code>ï¼Œå¹¶å°† <code>ModelAndView</code> ä¼ é€’ç»™ <code>ViewResolver</code> è¿›è¡Œæ¸²æŸ“ï¼Œæœ€åå°†æ¸²æŸ“åçš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol> <h4 id="dispatcherservlet-æºç è§£è¯»"><a href="#dispatcherservlet-æºç è§£è¯»" class="header-anchor">#</a> DispatcherServlet æºç è§£è¯»</h4> <p>å‰é¢ä»‹ç»äº† <code>DispatcherServlet</code> çš„å·¥ä½œæµç¨‹ï¼Œä¸‹é¢é€šè¿‡æ ¸å¿ƒæºç è§£è¯»ï¼Œæ¥åŠ æ·±å¯¹ <code>DispatcherServlet</code> å·¥ä½œåŸç†çš„ç†è§£</p> <p>ï¼ˆ1ï¼‰<code>onRefresh</code> æ–¹æ³•</p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">initStrategies</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * åˆå§‹åŒ–æ­¤ servlet ä½¿ç”¨çš„ç­–ç•¥å¯¹è±¡
	 * å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™ä»¥åˆå§‹åŒ–æ›´å¤šç­–ç•¥å¯¹è±¡
	 */</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initStrategies</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">initMultipartResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initLocaleResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initThemeResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initHandlerMappings</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initHandlerAdapters</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initHandlerExceptionResolvers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initRequestToViewNameTranslator</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initViewResolvers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">initFlashMapManager</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>ï¼ˆ2ï¼‰<code>doService</code> æ–¹æ³•</p> <p><code>DispatcherServlet</code> çš„æ ¸å¿ƒæ–¹æ³• <code>doService</code> æºç å¦‚ä¸‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doService</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token function">logRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// åœ¨åŒ…å«çš„æƒ…å†µä¸‹ä¿ç•™è¯·æ±‚å±æ€§çš„å¿«ç…§ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨åŒ…å«åæ¢å¤åŸå§‹å±æ€§</span>
		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> attributesSnapshot <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">WebUtils</span><span class="token punctuation">.</span><span class="token function">isIncludeRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			attributesSnapshot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> attrNames <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getAttributeNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>attrNames<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">String</span> attrName <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> attrNames<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cleanupAfterInclude <span class="token operator">||</span> attrName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_STRATEGIES_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					attributesSnapshot<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>attrName<span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>attrName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// è®¾ç½®è¯·æ±‚å±æ€§ï¼ˆç»‘å®šå„ç§ Resolverï¼‰ï¼Œä½¿æ¡†æ¶å¯¹è±¡å¯ç”¨äºå¤„ç†ç¨‹åºå’Œè§†å›¾å¯¹è±¡</span>
		request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">WEB_APPLICATION_CONTEXT_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token function">getWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">LOCALE_RESOLVER_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>localeResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
		request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">THEME_RESOLVER_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>themeResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
		request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">THEME_SOURCE_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token function">getThemeSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flashMapManager <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">FlashMap</span> inputFlashMap <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flashMapManager<span class="token punctuation">.</span><span class="token function">retrieveAndUpdate</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>inputFlashMap <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">INPUT_FLASH_MAP_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span>inputFlashMap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">OUTPUT_FLASH_MAP_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FlashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">FLASH_MAP_MANAGER_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flashMapManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">RequestPath</span> previousRequestPath <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parseRequestPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			previousRequestPath <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RequestPath</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestPathUtils</span><span class="token punctuation">.</span><span class="token constant">PATH_ATTRIBUTE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">ServletRequestPathUtils</span><span class="token punctuation">.</span><span class="token function">parseAndCache</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¯·æ±‚åˆ†å‘</span>
			<span class="token function">doDispatch</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">finally</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// æ¢å¤åŸå§‹å±æ€§å¿«ç…§ï¼Œä»¥é˜²åŒ…å«</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>attributesSnapshot <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">restoreAttributesAfterInclude</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> attributesSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parseRequestPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">ServletRequestPathUtils</span><span class="token punctuation">.</span><span class="token function">setParsedRequestPath</span><span class="token punctuation">(</span>previousRequestPath<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>ï¼ˆ3ï¼‰<code>doDispatch</code> æ–¹æ³•</p> <p><code>doService</code> ä¸­çš„æ ¸å¿ƒæ–¹æ³•æ˜¯ <code>doDispatch</code>ï¼Œè´Ÿè´£åˆ†å‘è¯·æ±‚ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
   <span class="token class-name">HttpServletRequest</span> processedRequest <span class="token operator">=</span> request<span class="token punctuation">;</span>
   <span class="token class-name">HandlerExecutionChain</span> mappedHandler <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
   <span class="token keyword">boolean</span> multipartRequestParsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

   <span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token class-name">Exception</span> dispatchException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token comment">// æ£€æŸ¥æ˜¯å¦ä¸ºmultipartè¯·æ±‚ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è§£æå‚æ•°</span>
         processedRequest <span class="token operator">=</span> <span class="token function">checkMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
         multipartRequestParsed <span class="token operator">=</span> <span class="token punctuation">(</span>processedRequest <span class="token operator">!=</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">// ç¡®å®šé€‚é…å½“å‰è¯·æ±‚çš„ Handler</span>
         mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">noHandlerFound</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>

         <span class="token comment">// ç¡®å®šé€‚é…å½“å‰è¯·æ±‚çš„ HandlerAdapter</span>
         <span class="token class-name">HandlerAdapter</span> ha <span class="token operator">=</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">// å¦‚æœ Handler æ”¯æŒï¼Œåˆ™å¤„ç† last-modified å¤´</span>
         <span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">boolean</span> isGet <span class="token operator">=</span> <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>isGet <span class="token operator">||</span> <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">HEAD</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span> lastModified <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">getLastModified</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletWebRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkNotModified</span><span class="token punctuation">(</span>lastModified<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> isGet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>

         <span class="token comment">// è¯·æ±‚çš„å‰ç½®å¤„ç†</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPreHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>

         <span class="token comment">// è°ƒç”¨å®é™…çš„ Handler å¤„ç†è¯·æ±‚å¹¶è¿”å› ModelAndViewï¼ˆæœ‰å¯èƒ½ä¸º nullï¼‰</span>
         mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>

         <span class="token function">applyDefaultViewName</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">// è¯·æ±‚çš„åç½®å¤„ç†</span>
         mappedHandler<span class="token punctuation">.</span><span class="token function">applyPostHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         dispatchException <span class="token operator">=</span> ex<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// As of 4.3, we're processing Errors thrown from handler methods as well,</span>
         <span class="token comment">// making them available for @ExceptionHandler methods and other scenarios.</span>
         dispatchException <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NestedServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Handler dispatch failed&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
       <span class="token comment">// å¤„ç†å“åº”ç»“æœ</span>
      <span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">NestedServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Handler processing failed&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// æ›¿ä»£ postHandle å’Œ afterCompletion</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mappedHandler<span class="token punctuation">.</span><span class="token function">applyAfterConcurrentHandlingStarted</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
         <span class="token comment">// æ¸…ç† multipart è¯·æ±‚æ‰€ä½¿ç”¨çš„èµ„æº</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>multipartRequestParsed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">cleanupMultipart</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„"><a href="#ä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„" class="header-anchor">#</a> ä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„</h4> <p><code>DispatcherServlet</code> éœ€è¦ä¸€ä¸ª <code>WebApplicationContext</code>ï¼ˆ<code>ApplicationContext</code> çš„æ‰©å±•ç±»ï¼‰ç”¨äºå®ƒè‡ªå·±çš„é…ç½®ã€‚<code>WebApplicationContext</code> æœ‰ä¸€ä¸ªæŒ‡å‘ <code>ServletContext</code> å’Œä¸ä¹‹å…³è”çš„ <code>Servlet</code> çš„é“¾æ¥ã€‚å®ƒè¿˜ç»‘å®šåˆ° <code>ServletContext</code>ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ <code>RequestContextUtils</code> ä¸Šä½¿ç”¨é™æ€æ–¹æ³•æ¥æŸ¥æ‰¾ <code>WebApplicationContext</code>ã€‚</p> <p>å¯¹äºå¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ‹¥æœ‰ä¸€ä¸ª <code>WebApplicationContext</code> å•ä¾‹å°±è¶³å¤Ÿã€‚ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ ¹ <code>WebApplicationContext</code> åœ¨å¤šä¸ª <code>DispatcherServlet</code>ï¼ˆæˆ–å…¶ä»– <code>Servlet</code>ï¼‰å®ä¾‹ä¹‹é—´å…±äº«ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„å­ <code>WebApplicationContext</code> é…ç½®ã€‚</p> <p>æ ¹ <code>WebApplicationContext</code> é€šå¸¸åŒ…å«åŸºç¡€ç»“æ„ beanï¼Œä¾‹å¦‚éœ€è¦è·¨å¤šä¸ª Servlet å®ä¾‹å…±äº«çš„æ•°æ®å­˜å‚¨å’Œä¸šåŠ¡æœåŠ¡ã€‚è¿™äº› bean æ˜¯æœ‰æ•ˆç»§æ‰¿çš„ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç‰¹å®š <code>Servlet</code> çš„å­ <code>WebApplicationContext</code> ä¸­è¢«è¦†ç›–ï¼ˆå³é‡æ–°å£°æ˜ï¼‰ï¼Œå®ƒé€šå¸¸åŒ…å«æŒ‡å®š <code>Servlet</code> çš„æœ¬åœ° beanã€‚ä¸‹å›¾æ˜¾ç¤ºäº†è¿™ç§å…³ç³»ï¼š</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20230213103223.png" alt=""></p> <p>ã€ç¤ºä¾‹ã€‘é…ç½® <code>WebApplicationContext</code> å±‚æ¬¡ç»“æ„ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyWebAppInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getRootConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">RootConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">App1Config</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;/app1/*&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ã€ç¤ºä¾‹ã€‘<code>web.xml</code> æ–¹å¼é…ç½® <code>WebApplicationContext</code> å±‚æ¬¡ç»“æ„ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>/WEB-INF/root-context.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>app1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>/WEB-INF/app1-context.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>app1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/app1/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="é…ç½®"><a href="#é…ç½®" class="header-anchor">#</a> é…ç½®</h2> <p><code>DispatcherServlet</code> ä¸å…¶ä»– Servlet ä¸€æ ·ï¼Œéœ€è¦ä½¿ç”¨ Java é…ç½®æˆ–åœ¨ <code>web.xml</code> ä¸­æ ¹æ® Servlet è§„èŒƒè¿›è¡Œå£°æ˜å’Œæ˜ å°„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>DispatcherServlet</code> ä½¿ç”¨ Spring é…ç½®æ¥å‘ç°è¯·æ±‚æ˜ å°„ã€è§†å›¾è§£æã€å¼‚å¸¸å¤„ç†ç­‰æ‰€éœ€çš„å§”æ‰˜ç»„ä»¶ã€‚</p> <p>å¯ä»¥é€šè¿‡å°† Servlet åˆå§‹åŒ–å‚æ•°ï¼ˆ<code>init-param</code> å…ƒç´ ï¼‰æ·»åŠ åˆ° <code>web.xml</code> æ–‡ä»¶ä¸­çš„ Servlet å£°æ˜æ¥è‡ªå®šä¹‰å„ä¸ª <code>DispatcherServlet</code> å®ä¾‹ã€‚ä¸‹è¡¨åˆ—å‡ºäº†æ”¯æŒçš„å‚æ•°ï¼š</p> <table><thead><tr><th style="text-align:left;">å‚æ•°</th> <th style="text-align:left;">è¯´æ˜</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>contextClass</code></td> <td style="text-align:left;">å®ç° <code>ConfigurableWebApplicationContext</code> çš„ç±»ï¼Œå°†ç”±æ­¤ Servlet å®ä¾‹åŒ–å’Œæœ¬åœ°é…ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>XmlWebApplicationContext</code>ã€‚</td></tr> <tr><td style="text-align:left;"><code>contextConfigLocation</code></td> <td style="text-align:left;">ä¼ é€’ç»™ä¸Šä¸‹æ–‡å®ä¾‹ï¼ˆç”± <code>contextClass</code> æŒ‡å®šï¼‰ä»¥æŒ‡ç¤ºå¯ä»¥åœ¨ä½•å¤„æ‰¾åˆ°ä¸Šä¸‹æ–‡çš„å­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²å¯èƒ½åŒ…å«å¤šä¸ªå­—ç¬¦ä¸²ï¼ˆä½¿ç”¨é€—å·ä½œä¸ºåˆ†éš”ç¬¦ï¼‰ä»¥æ”¯æŒå¤šä¸ªä¸Šä¸‹æ–‡ã€‚åœ¨å…·æœ‰ä¸¤æ¬¡å®šä¹‰çš„ bean çš„å¤šä¸ªä¸Šä¸‹æ–‡ä½ç½®çš„æƒ…å†µä¸‹ï¼Œæœ€æ–°çš„ä½ç½®ä¼˜å…ˆã€‚</td></tr> <tr><td style="text-align:left;"><code>namespace</code></td> <td style="text-align:left;"><code>WebApplicationContext</code> çš„å‘½åç©ºé—´ã€‚é»˜è®¤ä¸º <code>[servlet-name]-servlet</code>ã€‚</td></tr> <tr><td style="text-align:left;"><code>throwExceptionIfNoHandlerFound</code></td> <td style="text-align:left;">å½“æ‰¾ä¸åˆ°è¯·æ±‚çš„å¤„ç†ç¨‹åºæ—¶æ˜¯å¦æŠ›å‡º <code>NoHandlerFoundException</code>ã€‚ç„¶åå¯ä»¥ä½¿ç”¨ <code>HandlerExceptionResolver</code>ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ä½¿ç”¨ <code>@ExceptionHandler</code> æ§åˆ¶å™¨æ–¹æ³•ï¼‰æ•è·å¼‚å¸¸å¹¶åƒå…¶ä»–ä»»ä½•æ–¹æ³•ä¸€æ ·å¤„ç†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè®¾ç½®ä¸º <code>false</code>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>DispatcherServlet</code> è®¾ç½®å“åº”çŠ¶æ€ä¸º 404 (NOT_FOUND) è€Œä¸ä¼šå¼•å‘å¼‚å¸¸ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœ [é»˜è®¤ servlet å¤„ç†](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc -default-servlet-handler) ä¹Ÿè¢«é…ç½®ï¼Œæœªè§£å†³çš„è¯·æ±‚æ€»æ˜¯è½¬å‘åˆ°é»˜è®¤çš„ servlet å¹¶ä¸”æ°¸è¿œä¸ä¼šå¼•å‘ 404ã€‚</td></tr></tbody></table> <p>åº”ç”¨ç¨‹åºå¯ä»¥å£°æ˜å¤„ç†è¯·æ±‚æ‰€éœ€çš„ç‰¹æ®Š Bean ç±»å‹ä¸­åˆ—å‡ºçš„åŸºç¡€ç»“æ„ beanã€‚<code>DispatcherServlet</code> æ£€æŸ¥æ¯ä¸ªç‰¹æ®Š bean çš„ <code>WebApplicationContext</code>ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…çš„ bean ç±»å‹ï¼Œå®ƒå°†å›é€€åˆ° <code>DispatcherServlet.properties</code> ä¸­åˆ—å‡ºçš„é»˜è®¤ç±»å‹ã€‚</p> <p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒMVC é…ç½®æ˜¯æœ€å¥½çš„èµ·ç‚¹ã€‚å®ƒä»¥ Java æˆ– XML å£°æ˜æ‰€éœ€çš„ beanï¼Œå¹¶æä¾›æ›´é«˜çº§åˆ«çš„é…ç½®å›è°ƒ API æ¥å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ã€‚</p> <blockquote><p>æ³¨æ„ï¼šSpring Boot ä¾èµ–äº MVC Java é…ç½®æ¥é…ç½® Spring MVCï¼Œå¹¶æä¾›äº†è®¸å¤šé¢å¤–çš„æ–¹ä¾¿é€‰é¡¹ã€‚</p></blockquote> <p>åœ¨ Servlet ç¯å¢ƒä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä»¥ç¼–ç¨‹æ–¹å¼é…ç½® Servlet å®¹å™¨ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆæˆ–ä¸ web.xml æ–‡ä»¶ç»“åˆä½¿ç”¨ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">WebApplicationInitializer</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyWebApplicationInitializer</span> <span class="token keyword">implements</span> <span class="token class-name">WebApplicationInitializer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> container<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">XmlWebApplicationContext</span> appContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        appContext<span class="token punctuation">.</span><span class="token function">setConfigLocation</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/spring/dispatcher-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ServletRegistration<span class="token punctuation">.</span>Dynamic</span> registration <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">&quot;dispatcher&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">(</span>appContext<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registration<span class="token punctuation">.</span><span class="token function">setLoadOnStartup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registration<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>WebApplicationInitializer</code> æ˜¯ Spring MVC æä¾›çš„æ¥å£ï¼Œå¯ç¡®ä¿æ£€æµ‹åˆ°è‡ªå®šä¹‰çš„å®ç°å¹¶è‡ªåŠ¨ç”¨äºåˆå§‹åŒ–ä»»ä½• Servlet 3 å®¹å™¨ã€‚åä¸º <code>AbstractDispatcherServletInitializer</code> çš„ <code>WebApplicationInitializer</code> çš„æŠ½è±¡åŸºç±»å®ç°é€šè¿‡è¦†ç›–æ–¹æ³•æ¥æŒ‡å®š servlet æ˜ å°„å’Œ <code>DispatcherServlet</code> é…ç½®çš„ä½ç½®ï¼Œä½¿å¾—æ³¨å†Œ <code>DispatcherServlet</code> å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p> <p>å¯¹äºä½¿ç”¨åŸºäº Java çš„ Spring é…ç½®çš„åº”ç”¨ç¨‹åºï¼Œå»ºè®®è¿™æ ·åšï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyWebAppInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getRootConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">MyWebConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä½¿ç”¨åŸºäº XML çš„ Spring é…ç½®ï¼Œåˆ™åº”ç›´æ¥ä» AbstractDispatcherServletInitializer æ‰©å±•ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyWebAppInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractDispatcherServletInitializer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">WebApplicationContext</span> <span class="token function">createRootApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">WebApplicationContext</span> <span class="token function">createServletApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">XmlWebApplicationContext</span> cxt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cxt<span class="token punctuation">.</span><span class="token function">setConfigLocation</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/spring/dispatcher-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> cxt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>AbstractDispatcherServletInitializer</code> è¿˜æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥æ·»åŠ  Filter å®ä¾‹å¹¶å°†å®ƒä»¬è‡ªåŠ¨æ˜ å°„åˆ° <code>DispatcherServlet</code>ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyWebAppInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractDispatcherServletInitializer</span> <span class="token punctuation">{</span>

    <span class="token comment">// ...</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Filter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Filter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CharacterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¯ä¸ªè¿‡æ»¤å™¨éƒ½æ ¹æ®å…¶å…·ä½“ç±»å‹æ·»åŠ ä¸€ä¸ªé»˜è®¤åç§°ï¼Œå¹¶è‡ªåŠ¨æ˜ å°„åˆ° <code>DispatcherServlet</code>ã€‚</p> <p><code>AbstractDispatcherServletInitializer</code> çš„ <code>isAsyncSupported</code> ä¿æŠ¤æ–¹æ³•æä¾›äº†ä¸€ä¸ªå•ç‹¬çš„ä½ç½®æ¥å¯ç”¨ <code>DispatcherServlet</code> å’Œæ˜ å°„åˆ°å®ƒçš„æ‰€æœ‰è¿‡æ»¤å™¨çš„å¼‚æ­¥æ”¯æŒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ ‡å¿—è®¾ç½®ä¸º trueã€‚</p> <p>æœ€åï¼Œå¦‚æœéœ€è¦è¿›ä¸€æ­¥è‡ªå®šä¹‰ <code>DispatcherServlet</code> æœ¬èº«ï¼Œå¯ä»¥é‡å†™ <code>createDispatcherServlet</code> æ–¹æ³•ã€‚</p> <p>ã€ç¤ºä¾‹ã€‘Java æ–¹å¼æ³¨å†Œå¹¶åˆå§‹åŒ– <code>DispatcherServlet</code>ï¼Œå®ƒç”± Servlet å®¹å™¨è‡ªåŠ¨æ£€æµ‹ï¼ˆè¯·å‚é˜… Servlet Configï¼‰ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyWebApplicationInitializer</span> <span class="token keyword">implements</span> <span class="token class-name">WebApplicationInitializer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// Load Spring web application configuration</span>
        <span class="token class-name">AnnotationConfigWebApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">AppConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Create and register the DispatcherServlet</span>
        <span class="token class-name">DispatcherServlet</span> servlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ServletRegistration<span class="token punctuation">.</span>Dynamic</span> registration <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">addServlet</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">,</span> servlet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        registration<span class="token punctuation">.</span><span class="token function">setLoadOnStartup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registration<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/app/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ã€ç¤ºä¾‹ã€‘web.xml æ–¹å¼æ³¨å†Œå¹¶åˆå§‹åŒ– <code>DispatcherServlet</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>/WEB-INF/app-context.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/app/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="è·¯å¾„åŒ¹é…"><a href="#è·¯å¾„åŒ¹é…" class="header-anchor">#</a> è·¯å¾„åŒ¹é…</h2> <p>Servlet API å°†å®Œæ•´çš„è¯·æ±‚è·¯å¾„å…¬å¼€ä¸º <code>requestURI</code>ï¼Œå¹¶å°†å…¶è¿›ä¸€æ­¥ç»†åˆ†ä¸º <code>contextPath</code>ã€<code>servletPath</code> å’Œ <code>pathInfo</code>ï¼Œå®ƒä»¬çš„å€¼å›  Servlet çš„æ˜ å°„æ–¹å¼è€Œå¼‚ã€‚ä»è¿™äº›è¾“å…¥ä¸­ï¼ŒSpring MVC éœ€è¦ç¡®å®šç”¨äºæ˜ å°„å¤„ç†ç¨‹åºçš„æŸ¥æ‰¾è·¯å¾„ï¼Œå¦‚æœé€‚ç”¨ï¼Œå®ƒåº”è¯¥æ’é™¤ <code>contextPath</code> å’Œä»»ä½• <code>servletMapping</code> å‰ç¼€ã€‚</p> <p><code>servletPath</code> å’Œ <code>pathInfo</code> å·²è§£ç ï¼Œè¿™ä½¿å¾—å®ƒä»¬æ— æ³•ç›´æ¥ä¸å®Œæ•´çš„ <code>requestURI</code> è¿›è¡Œæ¯”è¾ƒä»¥æ´¾ç”Ÿ <code>lookupPath</code>ï¼Œå› æ­¤æœ‰å¿…è¦å¯¹ <code>requestURI</code> è¿›è¡Œè§£ç ã€‚ç„¶è€Œï¼Œè¿™å¼•å…¥äº†å®ƒè‡ªå·±çš„é—®é¢˜ï¼Œå› ä¸ºè·¯å¾„å¯èƒ½åŒ…å«ç¼–ç çš„ä¿ç•™å­—ç¬¦ï¼Œä¾‹å¦‚ <code>&quot;/&quot;</code> æˆ– <code>&quot;;&quot;</code> è¿™åè¿‡æ¥åˆä¼šåœ¨è§£ç åæ”¹å˜è·¯å¾„çš„ç»“æ„ï¼Œè¿™ä¹Ÿå¯èƒ½å¯¼è‡´å®‰å…¨é—®é¢˜ã€‚æ­¤å¤–ï¼ŒServlet å®¹å™¨å¯èƒ½ä¼šåœ¨ä¸åŒç¨‹åº¦ä¸Šè§„èŒƒåŒ– <code>servletPath</code>ï¼Œè¿™ä½¿å¾—è¿›ä¸€æ­¥æ— æ³•å¯¹ <code>requestURI</code> æ‰§è¡Œ <code>startsWith</code> æ¯”è¾ƒã€‚</p> <p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ€å¥½é¿å…ä¾èµ–åŸºäºå‰ç¼€çš„ <code>servletPath</code> æ˜ å°„ç±»å‹é™„å¸¦çš„ <code>servletPath</code>ã€‚å¦‚æœ <code>DispatcherServlet</code> è¢«æ˜ å°„ä¸ºå¸¦æœ‰ <code>&quot;/&quot;</code> çš„é»˜è®¤ Servletï¼Œæˆ–è€…æ²¡æœ‰å¸¦ <code>&quot;/*&quot;</code> çš„å‰ç¼€ï¼Œå¹¶ä¸” Servlet å®¹å™¨æ˜¯ 4.0+ï¼Œåˆ™ Spring MVC èƒ½å¤Ÿæ£€æµ‹ Servlet æ˜ å°„ç±»å‹ï¼Œå¹¶é¿å…ä½¿ç”¨ <code>servletPath</code> å’Œ <code>pathInfo</code>ã€‚åœ¨ 3.1 Servlet å®¹å™¨ä¸Šï¼Œå‡è®¾ç›¸åŒçš„ Servlet æ˜ å°„ç±»å‹ï¼Œå¯ä»¥é€šè¿‡åœ¨ MVC é…ç½®ä¸­é€šè¿‡è·¯å¾„åŒ¹é…æä¾›ä¸€ä¸ªå¸¦æœ‰ <code>alwaysUseFullPath=true</code> çš„ <code>UrlPathHelper</code> æ¥å®ç°ç­‰æ•ˆã€‚</p> <p>å¹¸è¿çš„æ˜¯ï¼Œé»˜è®¤çš„ Servlet æ˜ å°„ <code>&quot;/&quot;</code> æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œä»ç„¶å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³éœ€è¦å¯¹ <code>requestURI</code> è¿›è¡Œè§£ç æ‰èƒ½ä¸æ§åˆ¶å™¨æ˜ å°„è¿›è¡Œæ¯”è¾ƒã€‚è¿™ä¹Ÿæ˜¯ä¸å¯å–çš„ï¼Œå› ä¸ºå¯èƒ½ä¼šè§£ç æ”¹å˜è·¯å¾„ç»“æ„çš„ä¿ç•™å­—ã€‚å¦‚æœä¸éœ€è¦è¿™æ ·çš„å­—ç¬¦ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥æ‹’ç»å®ƒä»¬ï¼ˆå¦‚ Spring Security HTTP é˜²ç«å¢™ï¼‰ï¼Œæˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨ <code>urlDecode=false</code> é…ç½® <code>UrlPathHelper</code>ï¼Œä½†æ§åˆ¶å™¨æ˜ å°„éœ€è¦ä¸ç¼–ç è·¯å¾„åŒ¹é…ï¼Œè¿™å¯èƒ½å¹¶ä¸æ€»æ˜¯æœ‰æ•ˆã€‚æ­¤å¤–ï¼Œæœ‰æ—¶ <code>DispatcherServlet</code> éœ€è¦ä¸å¦ä¸€ä¸ª Servlet å…±äº« URL ç©ºé—´ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦é€šè¿‡å‰ç¼€è¿›è¡Œæ˜ å°„ã€‚</p> <p>åœ¨ä½¿ç”¨ <code>PathPatternParser</code> å’Œè§£ææ¨¡å¼æ—¶è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œä½œä¸ºä½¿ç”¨ <code>AntPathMatcher</code> è¿›è¡Œå­—ç¬¦ä¸²è·¯å¾„åŒ¹é…çš„æ›¿ä»£æ–¹æ³•ã€‚<code>PathPatternParser</code> ä» 5.3 ç‰ˆæœ¬å¼€å§‹å°±å¯ä»¥åœ¨ Spring MVC ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”ä» 6.0 ç‰ˆæœ¬å¼€å§‹é»˜è®¤å¯ç”¨ã€‚ä¸éœ€è¦è§£ç æŸ¥æ‰¾è·¯å¾„æˆ–ç¼–ç æ§åˆ¶å™¨æ˜ å°„çš„ <code>AntPathMatcher</code> ä¸åŒï¼Œè§£æçš„ <code>PathPattern</code> ä¸ç§°ä¸º <code>RequestPath</code> çš„è·¯å¾„çš„è§£æè¡¨ç¤ºåŒ¹é…ï¼Œä¸€æ¬¡ä¸€ä¸ªè·¯å¾„æ®µã€‚è¿™å…è®¸å•ç‹¬è§£ç å’Œæ¸…ç†è·¯å¾„æ®µå€¼ï¼Œè€Œæ²¡æœ‰æ”¹å˜è·¯å¾„ç»“æ„çš„é£é™©ã€‚è§£æçš„ <code>PathPattern</code> ä¹Ÿæ”¯æŒä½¿ç”¨ <code>servletPath</code> å‰ç¼€æ˜ å°„ï¼Œåªè¦ä½¿ç”¨ Servlet è·¯å¾„æ˜ å°„å¹¶ä¸”å‰ç¼€ä¿æŒç®€å•ï¼Œå³å®ƒæ²¡æœ‰ç¼–ç å­—ç¬¦ã€‚</p> <h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="header-anchor">#</a> æ‹¦æˆªå™¨</h2> <p>æ‰€æœ‰ <code>HandlerMapping</code> å®ç°éƒ½æ”¯æŒå¤„ç†æ‹¦æˆªå™¨ï¼Œå½“æƒ³è¦å°†ç‰¹å®šåŠŸèƒ½åº”ç”¨äºæŸäº›è¯·æ±‚æ—¶ï¼Œè¿™äº›æ‹¦æˆªå™¨å¾ˆæœ‰ç”¨â€”â€”ä¾‹å¦‚ï¼Œæ£€æŸ¥ä¸»ä½“ã€‚æ‹¦æˆªå™¨å¿…é¡»ä½¿ç”¨ <code>org.springframework.web.servlet</code> åŒ…ä¸­çš„ä¸‰ä¸ªæ–¹æ³•å®ç° <code>HandlerInterceptor</code>ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•åº”è¯¥æä¾›è¶³å¤Ÿçš„çµæ´»æ€§æ¥è¿›è¡Œå„ç§é¢„å¤„ç†å’Œåå¤„ç†ï¼š</p> <ul><li><code>preHandle(..)</code>ï¼šåœ¨å®é™… handler ä¹‹å‰æ‰§è¡Œ</li> <li><code>postHandle(..)</code>ï¼šhandler ä¹‹åæ‰§è¡Œ</li> <li><code>afterCompletion(..)</code>ï¼šå®Œæˆè¯·æ±‚åæ‰§è¡Œ</li></ul> <p><code>preHandle(..)</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ä¸­æ–­æˆ–ç»§ç»­æ‰§è¡Œé“¾çš„å¤„ç†ã€‚å½“æ­¤æ–¹æ³•è¿”å› true æ—¶ï¼Œå¤„ç†ç¨‹åºæ‰§è¡Œé“¾å°†ç»§ç»­ã€‚å½“å®ƒè¿”å› false æ—¶ï¼Œ<code>DispatcherServlet</code> å‡å®šæ‹¦æˆªå™¨æœ¬èº«å·²ç»å¤„ç†è¯·æ±‚ï¼ˆå¹¶ä¸”ï¼Œä¾‹å¦‚ï¼Œå‘ˆç°é€‚å½“çš„è§†å›¾ï¼‰å¹¶ä¸”ä¸ä¼šç»§ç»­æ‰§è¡Œå…¶ä»–æ‹¦æˆªå™¨å’Œæ‰§è¡Œé“¾ä¸­çš„å®é™…å¤„ç†ç¨‹åºã€‚</p> <p>æœ‰å…³å¦‚ä½•é…ç½®æ‹¦æˆªå™¨çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜… MVC é…ç½®éƒ¨åˆ†ä¸­çš„<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-interceptors" target="_blank" rel="noopener noreferrer">æ‹¦æˆªå™¨<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚è¿˜å¯ä»¥é€šè¿‡åœ¨å„ä¸ª <code>HandlerMapping</code> å®ç°ä¸Šä½¿ç”¨ setter æ¥ç›´æ¥æ³¨å†Œå®ƒä»¬ã€‚</p> <p><code>postHandle</code> æ–¹æ³•å¯¹äº <code>@ResponseBody</code> å’Œ <code>ResponseEntity</code> çš„æ–¹æ³•ä¸å¤ªæœ‰ç”¨ï¼Œå®ƒä»¬çš„å“åº”æ˜¯åœ¨ <code>HandlerAdapter</code> ä¸­å’Œ <code>postHandle</code> ä¹‹å‰ç¼–å†™å’Œæäº¤çš„ã€‚è¿™æ„å‘³ç€å¯¹å“åº”è¿›è¡Œä»»ä½•æ›´æ”¹éƒ½ä¸ºæ—¶å·²æ™šï¼Œä¾‹å¦‚æ·»åŠ é¢å¤–çš„æ ‡å¤´ã€‚å¯¹äºæ­¤ç±»åœºæ™¯ï¼Œæ‚¨å¯ä»¥å®ç° <code>ResponseBodyAdvice</code> å¹¶å°†å…¶å£°æ˜ä¸º <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-controller-advice" target="_blank" rel="noopener noreferrer">Controller Advice<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> bean æˆ–ç›´æ¥åœ¨ <code>RequestMappingHandlerAdapter</code> ä¸Šè¿›è¡Œé…ç½®ã€‚</p> <h2 id="è§£æå™¨"><a href="#è§£æå™¨" class="header-anchor">#</a> è§£æå™¨</h2> <p>DispatcherServlet ä¼šåŠ è½½å¤šç§è§£æå™¨æ¥å¤„ç†è¯·æ±‚ï¼Œæ¯”è¾ƒå¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p> <ul><li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-exceptionhandlers" target="_blank" rel="noopener noreferrer"><code>HandlerExceptionResolver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - è§£å†³å¼‚å¸¸çš„ç­–ç•¥ï¼Œå¯èƒ½å°†å®ƒä»¬æ˜ å°„åˆ°å¤„ç†ç¨‹åºã€HTML é”™è¯¯è§†å›¾æˆ–å…¶ä»–ç›®æ ‡ã€‚</li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-viewresolver" target="_blank" rel="noopener noreferrer"><code>ViewResolver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - å°†ä»å¤„ç†ç¨‹åºè¿”å›çš„åŸºäºå­—ç¬¦ä¸²çš„é€»è¾‘è§†å›¾åç§°è§£æä¸ºç”¨äºå‘ˆç°å“åº”çš„å®é™…è§†å›¾ã€‚</li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-localeresolver" target="_blank" rel="noopener noreferrer"><code>LocaleResolver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-timezone" target="_blank" rel="noopener noreferrer">LocaleContextResolver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - è§£æç”¨æˆ·æ­£åœ¨ä½¿ç”¨çš„æœ¬åœ°åŒ–è®¾ç½®ï¼Œå¯èƒ½è¿˜æœ‰ä»–ä»¬çš„æ—¶åŒºï¼Œä»¥ä¾¿èƒ½å¤Ÿæä¾›å›½é™…åŒ–çš„è§†å›¾ã€‚</li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-themeresolver" target="_blank" rel="noopener noreferrer"><code>ThemeResolver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - è§£æ Web åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨çš„ä¸»é¢˜â€”â€”ä¾‹å¦‚ï¼Œæä¾›ä¸ªæ€§åŒ–å¸ƒå±€ã€‚</li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-multipart" target="_blank" rel="noopener noreferrer"><code>MultipartResolver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - é€šè¿‡ä¸€äº› multipart è§£æåº“çš„å¸®åŠ©è§£æ multipart è¯·æ±‚ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡æµè§ˆå™¨ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚</li></ul> <h3 id="handlerexceptionresolver"><a href="#handlerexceptionresolver" class="header-anchor">#</a> HandlerExceptionResolver</h3> <p>åœ¨ <code>WebApplicationContext</code> ä¸­å£°æ˜çš„ <code>HandlerExceptionResolver</code> ç”¨äºè§£å†³è¯·æ±‚å¤„ç†æœŸé—´æŠ›å‡ºçš„å¼‚å¸¸ã€‚è¿™äº›å¼‚å¸¸è§£æå™¨å…è®¸è‡ªå®šä¹‰é€»è¾‘æ¥è§£å†³å¼‚å¸¸ã€‚</p> <p>å¯¹äº HTTP ç¼“å­˜æ”¯æŒï¼Œå¤„ç†ç¨‹åºå¯ä»¥ä½¿ç”¨ <code>WebRequest</code> çš„ <code>checkNotModified</code> æ–¹æ³•ï¼Œä»¥åŠç”¨äºæ§åˆ¶å™¨çš„ HTTP ç¼“å­˜ä¸­æ‰€è¿°çš„å¸¦æ³¨é‡Šæ§åˆ¶å™¨çš„æ›´å¤šé€‰é¡¹ã€‚</p> <p>å¦‚æœåœ¨è¯·æ±‚æ˜ å°„æœŸé—´å‘ç”Ÿå¼‚å¸¸æˆ–ä»è¯·æ±‚å¤„ç†ç¨‹åºï¼ˆä¾‹å¦‚ <code>@Controller</code>ï¼‰æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™ <code>DispatcherServlet</code> å§”æ‰˜ <code>HandlerExceptionResolver</code> é“¾æ¥è§£å†³å¼‚å¸¸å¹¶æä¾›æ›¿ä»£å¤„ç†ï¼Œè¿™é€šå¸¸æ˜¯é”™è¯¯å“åº”ã€‚</p> <p>ä¸‹è¡¨åˆ—å‡ºäº†å¯ç”¨çš„ <code>HandlerExceptionResolver</code> å®ç°ï¼š</p> <table><thead><tr><th style="text-align:left;"><code>HandlerExceptionResolver</code></th> <th style="text-align:left;">è¯´æ˜</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>SimpleMappingExceptionResolver</code></td> <td style="text-align:left;">å¼‚å¸¸ç±»åç§°å’Œé”™è¯¯è§†å›¾åç§°ä¹‹é—´çš„æ˜ å°„ã€‚ç”¨äºåœ¨æµè§ˆå™¨åº”ç”¨ç¨‹åºä¸­å‘ˆç°é”™è¯¯é¡µé¢ã€‚</td></tr> <tr><td style="text-align:left;"><a href="https://docs.spring.io/spring-framework/docs/6.0.4/javadoc-api/org/springframework/web/servlet/mvc/support/DefaultHandlerExceptionResolver.html" target="_blank" rel="noopener noreferrer"><code>DefaultHandlerExceptionResolver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td style="text-align:left;">è§£å†³ç”± Spring MVC å¼•å‘çš„å¼‚å¸¸å¹¶å°†å®ƒä»¬æ˜ å°„åˆ° HTTP çŠ¶æ€ä»£ç ã€‚</td></tr> <tr><td style="text-align:left;"><code>ResponseStatusExceptionResolver</code></td> <td style="text-align:left;">ä½¿ç”¨ <code>@ResponseStatus</code> æ³¨è§£è§£å†³å¼‚å¸¸ï¼Œå¹¶æ ¹æ®æ³¨è§£ä¸­çš„å€¼å°†å®ƒä»¬æ˜ å°„åˆ° HTTP çŠ¶æ€ä»£ç ã€‚</td></tr> <tr><td style="text-align:left;"><code>ExceptionHandlerExceptionResolver</code></td> <td style="text-align:left;">é€šè¿‡åœ¨ <code>@Controller</code> æˆ– <code>@ControllerAdvice</code> ç±»ä¸­è°ƒç”¨ <code>@ExceptionHandler</code> æ–¹æ³•æ¥è§£å†³å¼‚å¸¸ã€‚</td></tr></tbody></table> <h4 id="è§£æå™¨é“¾"><a href="#è§£æå™¨é“¾" class="header-anchor">#</a> è§£æå™¨é“¾</h4> <p>æ‚¨å¯ä»¥é€šè¿‡åœ¨ Spring é…ç½®ä¸­å£°æ˜å¤šä¸ª <code>HandlerExceptionResolver</code> bean å¹¶æ ¹æ®éœ€è¦è®¾ç½®å®ƒä»¬çš„é¡ºåºå±æ€§æ¥æ„æˆå¼‚å¸¸è§£æå™¨é“¾ã€‚order å±æ€§è¶Šé«˜ï¼Œå¼‚å¸¸è§£æå™¨çš„ä½ç½®å°±è¶Šé åã€‚</p> <p><code>HandlerExceptionResolver</code> çš„çº¦å®šä½¿å®ƒå¯ä»¥è¿”å›ä»¥ä¸‹å†…å®¹ï¼š</p> <ul><li><p>æŒ‡å‘é”™è¯¯è§†å›¾çš„ <code>ModelAndView</code>ã€‚</p></li> <li><p>å¦‚æœå¼‚å¸¸æ˜¯åœ¨è§£æå™¨ä¸­å¤„ç†çš„ï¼Œåˆ™ä¸ºç©ºçš„ <code>ModelAndView</code>ã€‚</p></li> <li><p>å¦‚æœå¼‚å¸¸ä»æœªè§£å†³ï¼Œåˆ™ä¸º nullï¼Œä¾›åç»­è§£æå™¨å°è¯•ï¼Œå¦‚æœå¼‚å¸¸ä»ç„¶å­˜åœ¨ï¼Œåˆ™å…è®¸å‘ä¸Šå†’æ³¡åˆ° Servlet å®¹å™¨ã€‚</p></li></ul> <p>MVC Config è‡ªåŠ¨ä¸ºé»˜è®¤çš„ Spring MVC å¼‚å¸¸ã€<code>@ResponseStatus</code> æ³¨é‡Šçš„å¼‚å¸¸å’Œå¯¹ <code>@ExceptionHandler</code> æ–¹æ³•çš„æ”¯æŒå£°æ˜å†…ç½®è§£æå™¨ã€‚æ‚¨å¯ä»¥è‡ªå®šä¹‰è¯¥åˆ—è¡¨æˆ–æ›¿æ¢å®ƒã€‚</p> <h4 id="é”™è¯¯é¡µé¢"><a href="#é”™è¯¯é¡µé¢" class="header-anchor">#</a> é”™è¯¯é¡µé¢</h4> <p>å¦‚æœå¼‚å¸¸ä»æœªè¢«ä»»ä½• <code>HandlerExceptionResolver</code> å¤„ç†å¹¶å› æ­¤ç»§ç»­ä¼ æ’­ï¼Œæˆ–è€…å¦‚æœå“åº”çŠ¶æ€è®¾ç½®ä¸ºé”™è¯¯çŠ¶æ€ï¼ˆå³ 4xxã€5xxï¼‰ï¼ŒServlet å®¹å™¨å¯ä»¥åœ¨ HTML ä¸­å‘ˆç°é»˜è®¤é”™è¯¯é¡µé¢ã€‚è¦è‡ªå®šä¹‰å®¹å™¨çš„é»˜è®¤é”™è¯¯é¡µé¢ï¼Œæ‚¨å¯ä»¥åœ¨ <code>web.xml</code> ä¸­å£°æ˜ä¸€ä¸ªé”™è¯¯é¡µé¢æ˜ å°„ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">&gt;</span></span>/error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼Œå½“å‡ºç°å¼‚å¸¸æˆ–å“åº”å…·æœ‰é”™è¯¯çŠ¶æ€æ—¶ï¼ŒServlet å®¹å™¨ä¼šåœ¨å®¹å™¨å†…å°† ERROR åˆ†æ´¾åˆ°é…ç½®çš„ URLï¼ˆä¾‹å¦‚ï¼Œ<code>/error</code>ï¼‰ã€‚ç„¶åç”± <code>DispatcherServlet</code> å¤„ç†ï¼Œå¯èƒ½å°†å…¶æ˜ å°„åˆ° <code>@Controller</code>ï¼Œåè€…å¯ä»¥è¿”å›å¸¦æœ‰æ¨¡å‹çš„é”™è¯¯è§†å›¾åç§°æˆ–å‘ˆç° JSON å“åº”ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ErrorController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;/error&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;jakarta.servlet.error.status_code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;reason&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;jakarta.servlet.error.message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>æç¤ºï¼šServlet API ä¸æä¾›åœ¨ Java ä¸­åˆ›å»ºé”™è¯¯é¡µé¢æ˜ å°„çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥åŒæ—¶ä½¿ç”¨ <code>WebApplicationInitializer</code> å’Œæœ€å°çš„ <code>web.xml</code>ã€‚</p></blockquote> <h3 id="viewresolver"><a href="#viewresolver" class="header-anchor">#</a> ViewResolver</h3> <p>Spring MVC å®šä¹‰äº† <code>ViewResolver</code> å’Œ <code>View</code> æ¥å£ï¼Œè®©ç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“æ¨¡å‹ï¼Œè€Œæ— éœ€é™å®šäºç‰¹å®šçš„è§†å›¾æŠ€æœ¯ã€‚<code>ViewResolver</code> æä¾›è§†å›¾åç§°å’Œå®é™…è§†å›¾ä¹‹é—´çš„æ˜ å°„ã€‚<code>View</code> è§£å†³äº†åœ¨ç§»äº¤ç»™ç‰¹å®šè§†å›¾æŠ€æœ¯ä¹‹å‰å‡†å¤‡æ•°æ®çš„é—®é¢˜ã€‚</p> <p>ä¸‹è¡¨æä¾›äº†æœ‰å…³ ViewResolver ä¸€äº›å­ç±»ï¼š</p> <table><thead><tr><th style="text-align:left;">ViewResolver</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>AbstractCachingViewResolver</code></td> <td style="text-align:left;"><code>AbstractCachingViewResolver</code> çš„å­ç±»ç¼“å­˜å®ƒä»¬è§£æçš„è§†å›¾å®ä¾‹ã€‚ç¼“å­˜æé«˜äº†æŸäº›è§†å›¾æŠ€æœ¯çš„æ€§èƒ½ã€‚æ‚¨å¯ä»¥é€šè¿‡å°† <code>cache</code> å±æ€§è®¾ç½®ä¸º <code>false</code> æ¥å…³é—­ç¼“å­˜ã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨å¿…é¡»åœ¨è¿è¡Œæ—¶åˆ·æ–°æŸä¸ªè§†å›¾ï¼ˆä¾‹å¦‚ï¼Œä¿®æ”¹ FreeMarker æ¨¡æ¿æ—¶ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ removeFromCache(String viewName, Locale loc) æ–¹æ³•ã€‚</td></tr> <tr><td style="text-align:left;"><code>UrlBasedViewResolver</code></td> <td style="text-align:left;"><code>ViewResolver</code> æ¥å£çš„ç®€å•å®ç°ï¼Œæ— éœ€æ˜¾å¼æ˜ å°„å®šä¹‰å³å¯å°†é€»è¾‘è§†å›¾åç§°ç›´æ¥è§£æä¸º URLã€‚å¦‚æœæ‚¨çš„é€»è¾‘åç§°ä»¥ç›´æ¥çš„æ–¹å¼åŒ¹é…æ‚¨çš„è§†å›¾èµ„æºçš„åç§°ï¼Œè€Œä¸éœ€è¦ä»»æ„æ˜ å°„ï¼Œé‚£ä¹ˆè¿™æ˜¯åˆé€‚çš„ã€‚</td></tr> <tr><td style="text-align:left;"><code>InternalResourceViewResolver</code></td> <td style="text-align:left;"><code>UrlBasedViewResolver</code> çš„å­ç±»ï¼Œæ”¯æŒ <code>InternalResourceView</code>ï¼ˆå®é™…ä¸Šæ˜¯ Servlet å’Œ JSPï¼‰ä»¥åŠ <code>JstlView</code> å’Œ <code>TilesView</code> ç­‰å­ç±»ã€‚å¯ä»¥ä½¿ç”¨ <code>setViewClass(..)</code> ä¸ºè¯¥è§£æå™¨ç”Ÿæˆçš„æ‰€æœ‰è§†å›¾æŒ‡å®šè§†å›¾ç±»ã€‚</td></tr> <tr><td style="text-align:left;"><code>FreeMarkerViewResolver</code></td> <td style="text-align:left;"><code>UrlBasedViewResolver</code> çš„å­ç±»ï¼Œæ”¯æŒ <code>FreeMarkerView</code> å’Œå®ƒä»¬çš„è‡ªå®šä¹‰å­ç±»ã€‚</td></tr> <tr><td style="text-align:left;"><code>ContentNegotiatingViewResolver</code></td> <td style="text-align:left;"><code>ViewResolver</code> æ¥å£çš„å®ç°ï¼Œè¯¥æ¥å£æ ¹æ®è¯·æ±‚æ–‡ä»¶åæˆ– <code>Accept</code> æ ‡å¤´è§£æè§†å›¾ã€‚</td></tr> <tr><td style="text-align:left;"><code>BeanNameViewResolver</code></td> <td style="text-align:left;">å°†è§†å›¾åç§°è§£é‡Šä¸ºå½“å‰åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­çš„ bean åç§°çš„ ViewResolver æ¥å£çš„å®ç°ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„å˜ä½“ï¼Œå…è®¸æ ¹æ®ä¸åŒçš„è§†å›¾åç§°æ··åˆå’ŒåŒ¹é…ä¸åŒçš„è§†å›¾ç±»å‹ã€‚æ¯ä¸ªè¿™æ ·çš„â€œè§†å›¾â€éƒ½å¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ª beanï¼Œä¾‹å¦‚ åœ¨ XML æˆ–é…ç½®ç±»ä¸­ã€‚</td></tr></tbody></table> <h4 id="å¤„ç†"><a href="#å¤„ç†" class="header-anchor">#</a> å¤„ç†</h4> <p>å¯ä»¥é€šè¿‡å£°æ˜å¤šä¸ªè§£æå™¨æ¥æ„æˆè§†å›¾è§£æå™¨é“¾ï¼Œå¦‚æœéœ€è¦ï¼Œè¿˜å¯ä»¥é€šè¿‡è®¾ç½® order å±æ€§æ¥æŒ‡å®šé¡ºåºã€‚é¡ºåºå±æ€§è¶Šé«˜ï¼Œè§†å›¾è§£æå™¨åœ¨é“¾ä¸­çš„ä½ç½®å°±è¶Šé åã€‚</p> <p><code>ViewResolver</code> çš„çº¦å®šæŒ‡å®šå®ƒå¯ä»¥è¿”å› null ä»¥æŒ‡ç¤ºæ‰¾ä¸åˆ°è§†å›¾ã€‚ä½†æ˜¯ï¼Œå¯¹äº JSP å’Œ <code>InternalResourceViewResolver</code>ï¼Œç¡®å®š JSP æ˜¯å¦å­˜åœ¨çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡ <code>RequestDispatcher</code> æ‰§è¡Œåˆ†æ´¾ã€‚å› æ­¤ï¼Œæ‚¨å¿…é¡»å§‹ç»ˆå°† <code>InternalResourceViewResolver</code> é…ç½®ä¸ºåœ¨è§†å›¾è§£æå™¨çš„æ•´ä½“é¡ºåºä¸­æ’åœ¨æœ€åã€‚</p> <p>é…ç½®è§†å›¾è§£æå°±åƒå°† <code>ViewResolver</code> æ·»åŠ åˆ° Spring é…ç½®ä¸­ä¸€æ ·ç®€å•ã€‚MVC Config ä¸ºè§†å›¾è§£æå™¨å’Œæ·»åŠ æ— é€»è¾‘è§†å›¾æ§åˆ¶å™¨æä¾›äº†ä¸“ç”¨çš„é…ç½® APIï¼Œè¿™å¯¹äºæ²¡æœ‰æ§åˆ¶å™¨é€»è¾‘çš„ HTML æ¨¡æ¿æ¸²æŸ“å¾ˆæœ‰ç”¨ã€‚</p> <h4 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="header-anchor">#</a> é‡å®šå‘</h4> <p>è§†å›¾åç§°ä¸­çš„ç‰¹æ®Šå‰ç¼€ <code>redirect:</code> å¯ä»¥å®ç°ä¸€ä¸ªé‡å®šå‘ã€‚<code>UrlBasedViewResolver</code>ï¼ˆåŠå…¶å­ç±»ï¼‰å°†æ­¤è¯†åˆ«ä¸ºéœ€è¦é‡å®šå‘çš„æŒ‡ä»¤ã€‚è§†å›¾åç§°çš„å…¶ä½™éƒ¨åˆ†æ˜¯é‡å®šå‘ URLã€‚</p> <p>æœ€ç»ˆæ•ˆæœä¸æ§åˆ¶å™¨è¿”å› <code>RedirectView</code> ç›¸åŒï¼Œä½†ç°åœ¨æ§åˆ¶å™¨æœ¬èº«å¯ä»¥æ ¹æ®é€»è¾‘è§†å›¾åç§°è¿›è¡Œæ“ä½œã€‚é€»è¾‘è§†å›¾åç§°ï¼ˆä¾‹å¦‚ <code>redirect:/myapp/some/resource</code>ï¼‰ç›¸å¯¹äºå½“å‰ Servlet ä¸Šä¸‹æ–‡é‡å®šå‘ï¼Œè€Œåç§°ï¼ˆä¾‹å¦‚ <code>redirect:https://myhost.com/some/arbitrary/path</code>ï¼‰é‡å®šå‘åˆ°ç»å¯¹ URLã€‚</p> <p>è¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ <code>@ResponseStatus</code> æ³¨è§£æ ‡è®°æ§åˆ¶å™¨æ–¹æ³•ï¼Œåˆ™æ³¨è§£å€¼ä¼˜å…ˆäº <code>RedirectView</code> è®¾ç½®çš„å“åº”çŠ¶æ€ã€‚</p> <h4 id="è½¬å‘"><a href="#è½¬å‘" class="header-anchor">#</a> è½¬å‘</h4> <p>è§†å›¾åç§°ä¸­çš„ç‰¹æ®Šå‰ç¼€ <code>forward:</code> å¯ä»¥å®ç°ä¸€ä¸ªè½¬å‘ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ª <code>InternalResourceView</code>ï¼Œå®ƒæ‰§è¡Œ <code>RequestDispatcher.forward()</code>ã€‚å› æ­¤ï¼Œæ­¤å‰ç¼€å¯¹ <code>InternalResourceViewResolver</code> å’Œ <code>InternalResourceView</code>ï¼ˆå¯¹äº JSPï¼‰æ²¡æœ‰ç”¨ï¼Œä½†å¦‚æœæ‚¨ä½¿ç”¨å¦ä¸€ç§è§†å›¾æŠ€æœ¯ä½†ä»æƒ³å¼ºåˆ¶è½¬å‘ç”± Servlet/JSP å¼•æ“å¤„ç†çš„èµ„æºï¼Œå®ƒå¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p> <h4 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="header-anchor">#</a> å†…å®¹åå•†</h4> <p><code>ContentNegotiatingViewResolver</code> æœ¬èº«ä¸è§£æè§†å›¾ï¼Œè€Œæ˜¯å§”æ‰˜ç»™å…¶ä»–è§†å›¾è§£æå™¨å¹¶é€‰æ‹©ç±»ä¼¼äºå®¢æˆ·ç«¯è¯·æ±‚çš„è¡¨ç¤ºçš„è§†å›¾ã€‚å¯ä»¥ä» <code>Accept</code> å¤´æˆ–æŸ¥è¯¢å‚æ•°ï¼ˆä¾‹å¦‚ï¼Œ<code>&quot;/path?format=pdf&quot;</code>ï¼‰ç¡®å®šè¡¨ç¤ºå½¢å¼ã€‚</p> <p><code>ContentNegotiatingViewResolver</code> é€šè¿‡å°†è¯·æ±‚åª’ä½“ç±»å‹ä¸å…¶æ¯ä¸ª <code>ViewResolver</code> å…³è”çš„ <code>View</code> æ”¯æŒçš„åª’ä½“ç±»å‹ï¼ˆä¹Ÿç§°ä¸º <code>Content-Type</code>ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œæ¥é€‰æ‹©åˆé€‚çš„ <code>View</code> æ¥å¤„ç†è¯·æ±‚ã€‚åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå…·æœ‰å…¼å®¹ <code>Content-Type</code> çš„è§†å›¾å°†å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚å¦‚æœ <code>ViewResolver</code> é“¾æ— æ³•æä¾›å…¼å®¹çš„è§†å›¾ï¼Œåˆ™ä¼šæŸ¥é˜…é€šè¿‡ <code>DefaultViews</code> å±æ€§æŒ‡å®šçš„è§†å›¾åˆ—è¡¨ã€‚åä¸€ä¸ªé€‰é¡¹é€‚ç”¨äºå•ä¾‹è§†å›¾ï¼Œå®ƒå¯ä»¥å‘ˆç°å½“å‰èµ„æºçš„é€‚å½“è¡¨ç¤ºï¼Œè€Œä¸ç®¡é€»è¾‘è§†å›¾åç§°å¦‚ä½•ã€‚<code>Accept</code> æ ‡å¤´å¯ä»¥åŒ…å«é€šé…ç¬¦ï¼ˆä¾‹å¦‚ <code>text/*</code>ï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>Content-Type</code> ä¸º <code>text/xml</code> çš„ View æ˜¯å…¼å®¹çš„åŒ¹é…é¡¹ã€‚</p> <h3 id="localeresolver"><a href="#localeresolver" class="header-anchor">#</a> LocaleResolver</h3> <p>å¤§éƒ¨åˆ†çš„ Spring æ¶æ„éƒ½æ”¯æŒå›½é™…åŒ–ï¼Œå°±åƒ Spring web MVC æ¡†æ¶æ‰€åšçš„é‚£æ ·ã€‚<code>DispatcherServlet</code> å…è®¸æ‚¨ä½¿ç”¨å®¢æˆ·ç«¯çš„è¯­è¨€ç¯å¢ƒè‡ªåŠ¨è§£ææ¶ˆæ¯ã€‚è¿™æ˜¯é€šè¿‡ <code>LocaleResolver</code> å¯¹è±¡å®Œæˆçš„ã€‚</p> <p>å½“æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œ<code>DispatcherServlet</code> ä¼šå¯»æ‰¾è¯­è¨€ç¯å¢ƒè§£æå™¨ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå®ƒä¼šå°è¯•ä½¿ç”¨å®ƒæ¥è®¾ç½® Locale ç¯å¢ƒã€‚é€šè¿‡ä½¿ç”¨ <code>RequestContext.getLocale()</code> æ–¹æ³•ï¼Œæ‚¨å§‹ç»ˆå¯ä»¥æ£€ç´¢ç”± Locale è§£æå™¨è§£æçš„è¯­è¨€ç¯å¢ƒã€‚</p> <p>é™¤äº†è‡ªåŠ¨è¯†åˆ« Locale ç¯å¢ƒä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä¸º handle æ˜ å°„é™„åŠ æ‹¦æˆªå™¨ï¼Œåœ¨ç‰¹å®šæƒ…å†µä¸‹æ›´æ”¹ Locale ç¯å¢ƒè®¾ç½®ï¼ˆä¾‹å¦‚ï¼ŒåŸºäºè¯·æ±‚ä¸­çš„å‚æ•°ï¼‰ã€‚</p> <p>Locale è§£æå™¨å’Œæ‹¦æˆªå™¨åœ¨ <code>org.springframework.web.servlet.i18n</code> åŒ…ä¸­å®šä¹‰ï¼Œå¹¶ä»¥æ­£å¸¸æ–¹å¼åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­é…ç½®ã€‚Spring ä¸­æœ‰ä»¥ä¸‹ Locale è§£æå™¨å¯ä¾›é€‰æ‹©ã€‚</p> <ul><li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-timezone" target="_blank" rel="noopener noreferrer">Time Zone<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-localeresolver-acceptheader" target="_blank" rel="noopener noreferrer">Header Resolver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-localeresolver-cookie" target="_blank" rel="noopener noreferrer">Cookie Resolver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-localeresolver-session" target="_blank" rel="noopener noreferrer">Session Resolver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-localeresolver-interceptor" target="_blank" rel="noopener noreferrer">Locale Interceptor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="localeresolver-2"><a href="#localeresolver-2" class="header-anchor">#</a> LocaleResolver</h4> <p>é™¤äº†è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®å¤–ï¼Œäº†è§£å…¶æ—¶åŒºé€šå¸¸ä¹Ÿå¾ˆæœ‰ç”¨ã€‚<code>LocaleContextResolver</code> æ¥å£æä¾›äº† <code>LocaleResolver</code> çš„æ‰©å±•ï¼Œè®©è§£æå™¨æä¾›æ›´ä¸°å¯Œçš„ <code>LocaleContext</code>ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬æ—¶åŒºä¿¡æ¯ã€‚</p> <p>å¦‚æœå¯ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>RequestContext.getTimeZone()</code> æ–¹æ³•è·å–ç”¨æˆ·çš„ <code>TimeZone</code>ã€‚åœ¨ Spring çš„ <code>ConversionService</code> ä¸­æ³¨å†Œçš„ä»»ä½•æ—¥æœŸ/æ—¶é—´ <code>Converter</code> å’Œ <code>Formatter</code> å¯¹è±¡ä¼šè‡ªåŠ¨ä½¿ç”¨æ—¶åŒºä¿¡æ¯ã€‚</p> <h4 id="æ ‡å¤´è§£æå™¨"><a href="#æ ‡å¤´è§£æå™¨" class="header-anchor">#</a> æ ‡å¤´è§£æå™¨</h4> <p>æ­¤ Locale è§£æå™¨æ£€æŸ¥å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ç½‘ç»œæµè§ˆå™¨ï¼‰å‘é€çš„è¯·æ±‚ä¸­çš„ <code>accept-language</code> å¤´ã€‚é€šå¸¸ï¼Œæ­¤å¤´å­—æ®µåŒ…å«å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿçš„åŒºåŸŸä¿¡æ¯ã€‚è¯·æ³¨æ„ï¼Œæ­¤è§£æå™¨ä¸æ”¯æŒæ—¶åŒºä¿¡æ¯ã€‚</p> <h4 id="cookielocaleresolver"><a href="#cookielocaleresolver" class="header-anchor">#</a> CookieLocaleResolver</h4> <p>This locale resolver inspects a <code>Cookie</code> that might exist on the client to see if a <code>Locale</code> or <code>TimeZone</code> is specified. If so, it uses the specified details. By using the properties of this locale resolver, you can specify the name of the cookie as well as the maximum age. The following example defines a <code>CookieLocaleResolver</code>:</p> <p>æ­¤ Locale è§£æå™¨æ£€æŸ¥å®¢æˆ·ç«¯ä¸Šæ˜¯å¦å­˜åœ¨ <code>Cookie</code>ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦æŒ‡å®šäº† <code>Locale</code> æˆ– <code>TimeZone</code>ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šä½¿ç”¨æŒ‡å®šçš„è¯¦ç»†ä¿¡æ¯ã€‚é€šè¿‡ä½¿ç”¨æ­¤ Locale è§£æå™¨çš„å±æ€§ï¼Œå¯ä»¥æŒ‡å®š cookie çš„åç§°ä»¥åŠæœ€é•¿æœŸé™ã€‚ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº† <code>CookieLocaleResolver</code>ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localeResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.CookieLocaleResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cookieName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clientlanguage<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- in seconds. If set to -1, the cookie is not persisted (deleted when browser shuts down) --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cookieMaxAge<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100000<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸‹è¡¨æè¿°äº† <code>CookieLocaleResolver</code> çš„å±æ€§ï¼š</p> <table><thead><tr><th style="text-align:left;">å±æ€§</th> <th style="text-align:left;">é»˜è®¤å€¼</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>cookieName</code></td> <td style="text-align:left;">ç±»å + LOCALE</td> <td style="text-align:left;">cookie å</td></tr> <tr><td style="text-align:left;"><code>cookieMaxAge</code></td> <td style="text-align:left;">Servlet container default</td> <td style="text-align:left;">cookie åœ¨å®¢æˆ·ç«¯ä¸Šä¿ç•™çš„æœ€é•¿æ—¶é—´ã€‚å¦‚æœæŒ‡å®šäº†â€œ-1â€ï¼Œåˆ™ä¸ä¼šä¿ç•™ cookieã€‚å®ƒä»…åœ¨å®¢æˆ·ç«¯å…³é—­æµè§ˆå™¨ä¹‹å‰å¯ç”¨ã€‚</td></tr> <tr><td style="text-align:left;"><code>cookiePath</code></td> <td style="text-align:left;">/</td> <td style="text-align:left;">å°† cookie çš„å¯è§æ€§é™åˆ¶åœ¨æ‚¨ç½‘ç«™çš„ç‰¹å®šéƒ¨åˆ†ã€‚å½“æŒ‡å®š <code>cookiePath</code> æ—¶ï¼Œcookie ä»…å¯¹è¯¥è·¯å¾„åŠå…¶ä¸‹æ–¹çš„è·¯å¾„å¯è§ã€‚</td></tr></tbody></table> <h4 id="sessionlocaleresolver"><a href="#sessionlocaleresolver" class="header-anchor">#</a> SessionLocaleResolver</h4> <p><code>SessionLocaleResolver</code> å…è®¸æ‚¨ä»å¯èƒ½ä¸ç”¨æˆ·è¯·æ±‚ç›¸å…³è”çš„ä¼šè¯ä¸­æ£€ç´¢ <code>Locale</code> å’Œ <code>TimeZone</code>ã€‚ä¸ <code>CookieLocaleResolver</code> ç›¸æ¯”ï¼Œæ­¤ç­–ç•¥å°†æœ¬åœ°é€‰æ‹©çš„ locale è®¾ç½®å­˜å‚¨åœ¨ Servlet å®¹å™¨çš„ <code>HttpSession</code> ä¸­ã€‚å› æ­¤ï¼Œè¿™äº›è®¾ç½®å¯¹äºæ¯ä¸ªä¼šè¯éƒ½æ˜¯ä¸´æ—¶çš„ï¼Œå› æ­¤ä¼šåœ¨æ¯ä¸ªä¼šè¯ç»“æŸæ—¶ä¸¢å¤±ã€‚</p> <p>æ³¨æ„ï¼Œè¿™ä¸å¤–éƒ¨ä¼šè¯ç®¡ç†æœºåˆ¶ï¼ˆä¾‹å¦‚ Spring Session é¡¹ç›®ï¼‰æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚æ­¤ <code>SessionLocaleResolver</code> æ ¹æ®å½“å‰ <code>HttpServletRequest</code> è¯„ä¼°å’Œä¿®æ”¹ç›¸åº”çš„ <code>HttpSession</code> å±æ€§ã€‚</p> <h4 id="localechangeinterceptor"><a href="#localechangeinterceptor" class="header-anchor">#</a> LocaleChangeInterceptor</h4> <p>å¯ä»¥é€šè¿‡å°† <code>LocaleChangeInterceptor</code> æ·»åŠ åˆ°ä¸€ä¸ª <code>HandlerMapping</code> å®šä¹‰æ¥å¯ç”¨åŒºåŸŸè®¾ç½®æ›´æ”¹ã€‚å®ƒæ£€æµ‹è¯·æ±‚ä¸­çš„å‚æ•°å¹¶ç›¸åº”åœ°æ›´æ”¹ Locale ç¯å¢ƒï¼Œåœ¨è°ƒåº¦ç¨‹åºçš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ <code>LocaleResolver</code> ä¸Šçš„ <code>setLocale</code> æ–¹æ³•ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºè°ƒç”¨æ‰€æœ‰åŒ…å«åä¸º <code>siteLanguage</code> çš„å‚æ•°çš„ <code>*.view</code> èµ„æºï¼Œä»¥æ›´æ”¹è¯­è¨€ç¯å¢ƒã€‚å› æ­¤ï¼Œä¾‹å¦‚ï¼Œå¯¹ URL <code>https://www.sf.net/home.view?siteLanguage=nl</code> çš„è¯·æ±‚å°†ç«™ç‚¹è¯­è¨€æ›´æ”¹ä¸ºè·å…°è¯­ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•æ‹¦æˆªè¯­è¨€ç¯å¢ƒï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localeChangeInterceptor<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.LocaleChangeInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>paramName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>siteLanguage<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localeResolver<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.CookieLocaleResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>urlMapping<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.handler.SimpleUrlHandlerMapping<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>interceptors<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localeChangeInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mappings<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/**/*.view=someController<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="themeresolver"><a href="#themeresolver" class="header-anchor">#</a> ThemeResolver</h3> <p>æ‚¨å¯ä»¥åº”ç”¨ Spring Web MVC æ¡†æ¶ä¸»é¢˜æ¥è®¾ç½®åº”ç”¨ç¨‹åºçš„æ•´ä½“å¤–è§‚ï¼Œä»è€Œå¢å¼ºç”¨æˆ·ä½“éªŒã€‚ä¸»é¢˜æ˜¯é™æ€èµ„æºçš„é›†åˆï¼Œé€šå¸¸æ˜¯æ ·å¼è¡¨å’Œå›¾åƒï¼Œå®ƒä»¬ä¼šå½±å“åº”ç”¨ç¨‹åºçš„è§†è§‰é£æ ¼ã€‚</p> <p>è¦åœ¨ Web åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ä¸»é¢˜ï¼Œå¿…é¡»è®¾ç½® <code>org.springframework.ui.context.ThemeSource</code> æ¥å£çš„å®ç°ã€‚<code>WebApplicationContext</code> æ¥å£æ‰©å±•äº† <code>ThemeSource</code> ä½†å°†å…¶èŒè´£å§”æ‰˜ç»™äº†ä¸“é—¨çš„å®ç°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå§”æ‰˜æ˜¯ <code>org.springframework.ui.context.support.ResourceBundleThemeSource</code> ï¼Œå®ƒä»ç±»çš„æ ¹è·¯å¾„åŠ è½½å±æ€§æ–‡ä»¶ã€‚è¦ä½¿ç”¨è‡ªå®šä¹‰çš„ <code>ThemeSource</code> å®ç°æˆ–é…ç½® <code>ResourceBundleThemeSource</code> çš„åŸºæœ¬åç§°å‰ç¼€ï¼Œæ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ä¿ç•™åç§° <code>themeSource</code> æ³¨å†Œä¸€ä¸ª beanã€‚Web åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡è‡ªåŠ¨æ£€æµ‹å…·æœ‰è¯¥åç§°çš„ bean å¹¶ä½¿ç”¨å®ƒã€‚</p> <p>å½“ä½¿ç”¨ <code>ResourceBundleThemeSource</code> æ—¶ï¼Œä¸»é¢˜æ˜¯åœ¨ä¸€ä¸ªç®€å•çš„å±æ€§æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚å±æ€§æ–‡ä»¶åˆ—å‡ºäº†æ„æˆä¸»é¢˜çš„èµ„æºï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">styleSheet</span><span class="token punctuation">=</span><span class="token value attr-value">/themes/cool/style.css</span>
<span class="token key attr-name">background</span><span class="token punctuation">=</span><span class="token value attr-value">/themes/cool/img/coolBg.jpg</span>
</code></pre></div><p>å±æ€§çš„é”®æ˜¯ä»è§†å›¾ä»£ç ä¸­å¼•ç”¨ä¸»é¢˜å…ƒç´ çš„åç§°ã€‚å¯¹äº JSPï¼Œé€šå¸¸ä½¿ç”¨ <code>spring:theme</code> è‡ªå®šä¹‰æ ‡ç­¾æ¥æ‰§è¡Œæ­¤æ“ä½œï¼Œå®ƒä¸ <code>spring:message</code> æ ‡ç­¾éå¸¸ç›¸ä¼¼ã€‚ä»¥ä¸‹ JSP ç‰‡æ®µä½¿ç”¨å‰é¢ç¤ºä¾‹ä¸­å®šä¹‰çš„ä¸»é¢˜æ¥è‡ªå®šä¹‰å¤–è§‚ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code>&lt;%@ taglib prefix=&quot;spring&quot; uri=&quot;http://www.springframework.org/tags&quot;%&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;spring:theme code='styleSheet'/&gt;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background=&lt;spring:theme code='background'/&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ <code>ResourceBundleThemeSource</code> ä½¿ç”¨ç©ºçš„åŸºæœ¬åç§°å‰ç¼€ã€‚å› æ­¤ï¼Œå±æ€§æ–‡ä»¶æ˜¯ä»ç±»è·¯å¾„çš„æ ¹åŠ è½½çš„ã€‚å› æ­¤ï¼Œå¯ä»¥å°† <code>cool.properties</code> ä¸»é¢˜å®šä¹‰æ”¾åœ¨ç±»è·¯å¾„æ ¹ç›®å½•ä¸­ï¼ˆä¾‹å¦‚ï¼Œåœ¨ <code>/WEB-INF/classes</code> ä¸­ï¼‰ã€‚<code>ResourceBundleThemeSource</code> ä½¿ç”¨æ ‡å‡†çš„ Java èµ„æºåŒ…åŠ è½½æœºåˆ¶ï¼Œå…è®¸ä¸»é¢˜å®Œå…¨å›½é™…åŒ–ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ª <code>/WEB-INF/classes/cool_nl.properties</code>ï¼Œå®ƒå¼•ç”¨ä¸€ä¸ªå¸¦æœ‰è·å…°è¯­æ–‡æœ¬çš„ç‰¹æ®ŠèƒŒæ™¯å›¾åƒã€‚</p> <p>å®šä¹‰ä¸»é¢˜åï¼Œå¯ä»¥å†³å®šä½¿ç”¨å“ªä¸ªè¦ä½¿ç”¨çš„ä¸»é¢˜ã€‚<code>DispatcherServlet</code> æŸ¥æ‰¾åä¸º <code>themeResolver</code> çš„ bean ä»¥æ‰¾å‡ºè¦ä½¿ç”¨çš„ <code>ThemeResolver</code> å®ç°ã€‚ä¸»é¢˜è§£æå™¨çš„å·¥ä½œæ–¹å¼ä¸ <code>LocaleResolver</code> å¤§è‡´ç›¸åŒã€‚å®ƒæ£€æµ‹ç”¨äºç‰¹å®šè¯·æ±‚çš„ä¸»é¢˜ï¼Œä¹Ÿå¯ä»¥æ›´æ”¹è¯·æ±‚çš„ä¸»é¢˜ã€‚ä¸‹è¡¨æè¿°äº† Spring æä¾›çš„ä¸»é¢˜è§£æå™¨ï¼š</p> <table><thead><tr><th style="text-align:left;">Class</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>FixedThemeResolver</code></td> <td style="text-align:left;">é€‰æ‹©ä¸€ä¸ªå›ºå®šçš„ä¸»é¢˜ï¼Œä½¿ç”¨ <code>defaultThemeName</code> å±æ€§è®¾ç½®ã€‚</td></tr> <tr><td style="text-align:left;"><code>SessionThemeResolver</code></td> <td style="text-align:left;">ä¸»é¢˜åœ¨ç”¨æˆ·çš„ HTTP ä¼šè¯ä¸­ç»´æŠ¤ã€‚ å®ƒåªéœ€è¦ä¸ºæ¯ä¸ªä¼šè¯è®¾ç½®ä¸€æ¬¡ï¼Œä½†ä¸ä¼šåœ¨ä¼šè¯ä¹‹é—´æŒç»­å­˜åœ¨ã€‚</td></tr> <tr><td style="text-align:left;"><code>CookieThemeResolver</code></td> <td style="text-align:left;">æ‰€é€‰ä¸»é¢˜å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ cookie ä¸­ã€‚</td></tr></tbody></table> <p>Spring è¿˜æä¾›äº†ä¸€ä¸ª <code>ThemeChangeInterceptor</code>ï¼Œå®ƒå…è®¸ä½¿ç”¨ä¸€ä¸ªç®€å•çš„è¯·æ±‚å‚æ•°åœ¨æ¯ä¸ªè¯·æ±‚ä¸Šæ›´æ”¹ä¸»é¢˜ã€‚</p> <h3 id="multipartresolver"><a href="#multipartresolver" class="header-anchor">#</a> MultipartResolver</h3> <p><code>org.springframework.web.multipart</code> åŒ…ä¸­çš„ <code>MultipartResolver</code> æ˜¯ä¸€ç§è§£æ multipart è¯·æ±‚ï¼ˆåŒ…æ‹¬æ–‡ä»¶ä¸Šä¼ ï¼‰çš„ç­–ç•¥ã€‚ æœ‰ä¸€ä¸ªåŸºäºå®¹å™¨çš„ <code>StandardServletMultipartResolver</code> å®ç°ï¼Œç”¨äº Servlet å¤šéƒ¨åˆ†è¯·æ±‚è§£æã€‚ è¯·æ³¨æ„ï¼Œä»å…·æœ‰æ–° Servlet 5.0+ åŸºçº¿çš„ Spring Framework 6.0 å¼€å§‹ï¼ŒåŸºäº Apache Commons FileUpload çš„è¿‡æ—¶çš„ <code>CommonsMultipartResolver</code> ä¸å†å¯ç”¨ã€‚</p> <p>è¦å¯ç”¨ multipart å¤„ç†ï¼Œéœ€è¦åœ¨ <code>DispatcherServlet</code> Spring é…ç½®ä¸­å£°æ˜ä¸€ä¸ªåä¸º <code>multipartResolver</code> çš„ <code>MultipartResolver</code>ã€‚ <code>DispatcherServlet</code> æ£€æµ‹åˆ°å®ƒå¹¶å°†å…¶åº”ç”¨äºä¼ å…¥è¯·æ±‚ã€‚ å½“æ¥æ”¶åˆ°å†…å®¹ç±»å‹ä¸º <code>multipart/form-data</code> çš„ POST æ—¶ï¼Œè§£æå™¨è§£æå°†å½“å‰ <code>HttpServletRequest</code> åŒ…è£…ä¸º <code>MultipartHttpServletRequest</code> çš„å†…å®¹ï¼Œä»¥æä¾›å¯¹å·²è§£ææ–‡ä»¶çš„è®¿é—®ä»¥åŠå°†éƒ¨åˆ†ä½œä¸ºè¯·æ±‚å‚æ•°å…¬å¼€ã€‚</p> <p>Servlet å¤šéƒ¨åˆ†è§£æéœ€è¦é€šè¿‡ Servlet å®¹å™¨é…ç½®å¯ç”¨ã€‚ ä¸ºæ­¤ï¼š</p> <ul><li><p>åœ¨ Java ä¸­ï¼Œåœ¨ Servlet æ³¨å†Œä¸Šè®¾ç½®ä¸€ä¸ª <code>MultipartConfigElement</code>ã€‚</p></li> <li><p>åœ¨ <code>web.xml</code> ä¸­ï¼Œå°† <code>&lt;multipart-config&gt;</code> éƒ¨åˆ†æ·»åŠ åˆ° servlet å£°æ˜ã€‚</p></li></ul> <p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•åœ¨ Servlet æ³¨å†Œä¸Šè®¾ç½® <code>MultipartConfigElement</code>ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="token punctuation">{</span>

    <span class="token comment">// ...</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">customizeRegistration</span><span class="token punctuation">(</span><span class="token class-name">ServletRegistration<span class="token punctuation">.</span>Dynamic</span> registration<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// Optionally also set maxFileSize, maxRequestSize, fileSizeThreshold</span>
        registration<span class="token punctuation">.</span><span class="token function">setMultipartConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MultipartConfigElement</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>ä¸€æ—¦ Servlet multipart é…ç½®å¥½ï¼Œå°±å¯ä»¥æ·»åŠ ä¸€ä¸ªåä¸º <code>multipartResolver</code> çš„ <code>StandardServletMultipartResolver</code> ç±»å‹çš„ beanã€‚</p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/index.html" target="_blank" rel="noopener noreferrer">Spring Framework å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html" target="_blank" rel="noopener noreferrer">Spring Framework å®˜æ–¹æ–‡æ¡£ä¹‹ Web<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/spring-tutorial/edit/master/docs/01.Java/13.æ¡†æ¶/01.Spring/03.SpringWeb/03.DispatcherServlet.md" target="_blank" rel="noopener noreferrer">ğŸ“ å¸®åŠ©æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/spring-tutorial/tags/?tag=Java" title="æ ‡ç­¾">#Java</a><a href="/spring-tutorial/tags/?tag=%E6%A1%86%E6%9E%B6" title="æ ‡ç­¾">#æ¡†æ¶</a><a href="/spring-tutorial/tags/?tag=Spring" title="æ ‡ç­¾">#Spring</a><a href="/spring-tutorial/tags/?tag=Web" title="æ ‡ç­¾">#Web</a><a href="/spring-tutorial/tags/?tag=DispatcherServlet" title="æ ‡ç­¾">#DispatcherServlet</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2024/04/24, 07:33:33</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/spring-tutorial/pages/5d002f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Spring Web åº”ç”¨</div></a> <a href="/spring-tutorial/pages/4a164d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Spring MVC ä¹‹è¿‡æ»¤å™¨</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/spring-tutorial/pages/5d002f/" class="prev">Spring Web åº”ç”¨</a></span> <span class="next"><a href="/spring-tutorial/pages/4a164d/">Spring MVC ä¹‹è¿‡æ»¤å™¨</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/spring-tutorial/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/spring-tutorial/pages/251e31/"><div>
            Spring MVC ä¹‹è§†å›¾æŠ€æœ¯
            <!----></div></a> <span class="date">02-17</span></dt></dl><dl><dd>02</dd> <dt><a href="/spring-tutorial/pages/1d2954/"><div>
            Spring MVC ä¹‹è·¨åŸŸ
            <!----></div></a> <span class="date">02-16</span></dt></dl><dl><dd>03</dd> <dt><a href="/spring-tutorial/pages/5d002f/"><div>
            Spring Web åº”ç”¨
            <!----></div></a> <span class="date">02-14</span></dt></dl> <dl><dd></dd> <dt><a href="/spring-tutorial/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2019-2024
    <span>é’æ‚Ÿï¼ˆdunwuï¼‰ | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">Ã—</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="261" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 40px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/spring-tutorial/assets/js/app.411aa74d.js" defer></script><script src="/spring-tutorial/assets/js/2.c83e292c.js" defer></script><script src="/spring-tutorial/assets/js/46.74cf9cd1.js" defer></script>
  </body>
</html>
