(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,o,s=e[0],l=e[1],p=e[2],d=0,g=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&g.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(n[r]=l[r]);for(c&&c(e);g.length;)g.shift()();return i.push.apply(i,p||[]),t()}function t(){for(var n,e=0;e<i.length;e++){for(var t=i[e],r=!0,s=1;s<t.length;s++){var l=t[s];0!==a[l]&&(r=!1)}r&&(i.splice(e--,1),n=o(o.s=t[0]))}return n}var r={},a={1:0},i=[];function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=a[n]=[e,r]}));e.push(t[2]=r);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(n){return o.p+"assets/js/"+({}[n]||n)+"."+{2:"c83e292c",3:"73be09f2",4:"a5cae8aa",5:"8dc0a646",6:"aaa74b22",7:"6df75efc",8:"e65c95d4",9:"d144d69e",10:"b7601455",11:"03948980",12:"ecf38bf0",13:"e75cd6c0",14:"5998fd7f",15:"bed79774",16:"82055b07",17:"f6042cab",18:"d08028c1",19:"ab5a7a0c",20:"21031ee6",21:"f301cc59",22:"e81d3a52",23:"ac570f2d",24:"2a9ff969",25:"dce5186a",26:"30d77b82",27:"bc02dd9d",28:"57c0657d",29:"759b5117",30:"a58bf8be",31:"b0bbb91f",32:"af4a0d23",33:"cda8ce76",34:"d8c61183",35:"07911c10",36:"fea80826",37:"26d11b84",38:"cf23f3c8",39:"6b871216",40:"bdcf602f",41:"92ddddfd",42:"afb2f83f",43:"87c61e7a",44:"6ebbb44c",45:"3c340e17",46:"74cf9cd1",47:"6b88e592",48:"3f4c8dde",49:"7a8efab0",50:"c9e00468",51:"f749b4b1",52:"211e3e93",53:"fa74dd36",54:"712ed5d2",55:"e5907eba",56:"fb6c932f",57:"6d1f0260",58:"e1a3dfc7",59:"b3267c14",60:"9bf75b52",61:"4ac19364",62:"41f2ac41",63:"e6a603db",64:"cf0d866f",65:"7b49e268",66:"6cc7cfa1",67:"a41f2515",68:"27ed265a",69:"47dbdb01",70:"5f3ecd44",71:"58845d95",72:"3a6afab8"}[n]+".js"}(n);var l=new Error;i=function(e){s.onerror=s.onload=null,clearTimeout(p);var t=a[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+n+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,t[1](l)}a[n]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(e)},o.m=n,o.c=r,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)o.d(t,r,function(e){return n[e]}.bind(null,r));return t},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="/spring-tutorial/",o.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var p=0;p<s.length;p++)e(s[p]);var c=l;i.push([106,0]),t()}([function(n,e,t){"use strict";var r=function(n){return n&&n.Math===Math&&n};n.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof global&&global)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},function(n,e,t){"use strict";var r="object"==typeof document&&document.all;n.exports=void 0===r&&void 0!==r?function(n){return"function"==typeof n||n===r}:function(n){return"function"==typeof n}},function(n,e,t){"use strict";var r=t(27),a=Function.prototype,i=a.call,o=r&&a.bind.bind(i,i);n.exports=r?o:function(n){return function(){return i.apply(n,arguments)}}},function(n,e,t){"use strict";n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e,t){"use strict";function r(n,e,t,r,a,i,o,s){var l,p="function"==typeof n?n.options:n;if(e&&(p.render=e,p.staticRenderFns=t,p._compiled=!0),r&&(p.functional=!0),i&&(p._scopeId="data-v-"+i),o?(l=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),a&&a.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(o)},p._ssrRegister=l):a&&(l=s?function(){a.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(p.functional){p._injectStyles=l;var c=p.render;p.render=function(n,e){return l.call(e),c(n,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,l):[l]}return{exports:n,options:p}}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(3);n.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){"use strict";var r=t(1);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(69),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();n.exports=i},function(n,e,t){"use strict";var r=t(2),a=t(32),i=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return i(a(n),e)}},function(n,e,t){var r=t(165),a=t(168);n.exports=function(n,e){var t=a(n,e);return r(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return i})),t.d(e,"j",(function(){return o})),t.d(e,"g",(function(){return l})),t.d(e,"h",(function(){return p})),t.d(e,"i",(function(){return c})),t.d(e,"c",(function(){return d})),t.d(e,"f",(function(){return g})),t.d(e,"l",(function(){return u})),t.d(e,"m",(function(){return m})),t.d(e,"d",(function(){return f})),t.d(e,"k",(function(){return h})),t.d(e,"n",(function(){return v})),t.d(e,"a",(function(){return x}));t(16);const r=/#.*$/,a=/\.(md|html)$/,i=/\/$/,o=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(a,"")}function l(n){return o.test(n)}function p(n){return/^mailto:/.test(n)}function c(n){return/^tel:/.test(n)}function d(n){if(l(n))return n;if(!n)return"404";const e=n.match(r),t=e?e[0]:"",a=s(n);return i.test(a)?n:a+".html"+t}function g(n,e){const t=n.hash,a=function(n){const e=n&&n.match(r);if(e)return e[0]}(e);if(a&&t!==a)return!1;return s(n.path)===s(e)}function u(n,e,t){if(l(e))return{type:"external",path:e};t&&(e=function(n,e,t){const r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;const a=e.split("/");t&&a[a.length-1]||a.pop();const i=n.replace(/^\//,"").split("/");for(let n=0;n<i.length;n++){const e=i[n];".."===e?a.pop():"."!==e&&a.push(e)}""!==a[0]&&a.unshift("");return a.join("/")}(e,t));const r=s(e);for(let e=0;e<n.length;e++)if(s(n[e].regularPath)===r)return Object.assign({},n[e],{type:"page",path:d(n[e].path)});return console.error(`[vuepress] No matching page found for sidebar item "${e}"`),{}}function m(n,e,t,r){const{pages:a,themeConfig:i}=t,o=r&&i.locales&&i.locales[r]||i;if("auto"===(n.frontmatter.sidebar||o.sidebar||i.sidebar))return b(n);const s=o.sidebar||i.sidebar;if(s){const{base:t,config:r}=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(const r in e)if(0===(t=n,/(\.html|\/)$/.test(t)?t:t+"/").indexOf(encodeURI(r)))return{base:r,config:e[r]};var t;return{}}(e,s);return"auto"===r?b(n):r?r.map(n=>function n(e,t,r,a=1){if("string"==typeof e)return u(t,e,r);if(Array.isArray(e))return Object.assign(u(t,e[0],r),{title:e[1]});{a>3&&console.error("[vuepress] detected a too deep nested sidebar group.");const i=e.children||[];return 0===i.length&&e.path?Object.assign(u(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:i.map(e=>n(e,t,r,a+1)),collapsable:!1!==e.collapsable}}}(n,a,t)):[]}return[]}function b(n){const e=f(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map(e=>({type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}))}]}function f(n){let e;return(n=n.map(n=>Object.assign({},n))).forEach(n=>{2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)}),n.filter(n=>2===n.level)}function h(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function v(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function y(n){let e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function x(n,e){return y(e)-y(n)}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r=t(15),a=t(150),i=t(151),o=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":o&&o in Object(n)?a(n):i(n)}},function(n,e,t){"use strict";var r=t(5),a=t(17),i=t(35);n.exports=r?function(n,e,t){return a.f(n,e,i(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){var r=t(8).Symbol;n.exports=r},function(n,e,t){"use strict";var r=t(26),a=t(32),i=t(33),o=t(144),s=t(146);r({target:"Array",proto:!0,arity:1,forced:t(3)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}}()},{push:function(n){var e=a(this),t=i(e),r=arguments.length;s(t+r);for(var l=0;l<r;l++)e[t]=arguments[l],t++;return o(e,t),t}})},function(n,e,t){"use strict";var r=t(5),a=t(64),i=t(101),o=t(48),s=t(55),l=TypeError,p=Object.defineProperty,c=Object.getOwnPropertyDescriptor;e.f=r?i?function(n,e,t){if(o(n),e=s(e),o(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=c(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return p(n,e,t)}:p:function(n,e,t){if(o(n),e=s(e),o(t),a)try{return p(n,e,t)}catch(n){}if("get"in t||"set"in t)throw new l("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){"use strict";var r=t(2),a=r({}.toString),i=r("".slice);n.exports=function(n){return i(a(n),8,-1)}},function(n,e,t){var r=t(155),a=t(156),i=t(157),o=t(158),s=t(159);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=s,n.exports=l},function(n,e,t){var r=t(71);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(10)(Object,"create");n.exports=r},function(n,e,t){var r=t(177);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(46);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var r,a;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(a="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function a(n,e,t){return n<e?e:n>t?t:n}function i(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=a(n,r.minimum,1),t.status=1===n?null:n;var l=t.render(!e),p=l.querySelector(r.barSelector),c=r.speed,d=r.easing;return l.offsetWidth,o((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(p,function(n,e,t){var a;return(a="translate3d"===r.positionUsing?{transform:"translate3d("+i(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+i(n)+"%,0)"}:{"margin-left":i(n)+"%"}).transition="all "+e+"ms "+t,a}(n,c,d)),1===n?(s(l,{transition:"none",opacity:1}),l.offsetWidth,setTimeout((function(){s(l,{transition:"all "+c+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),c)}),c)):setTimeout(e,c)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*a(Math.random()*e,.1,.95)),e=a(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");p(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var a,o=e.querySelector(r.barSelector),l=n?"-100":i(t.status||0),c=document.querySelector(r.parent);return s(o,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),r.showSpinner||(a=e.querySelector(r.spinnerSelector))&&g(a),c!=document.body&&p(c,"nprogress-custom-parent"),c.appendChild(e),e},t.remove=function(){c(document.documentElement,"nprogress-busy"),c(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&g(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var o=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,a=n.length,i=e.charAt(0).toUpperCase()+e.slice(1);a--;)if((r=n[a]+i)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,a,i=arguments;if(2==i.length)for(t in e)void 0!==(a=e[t])&&e.hasOwnProperty(t)&&r(n,t,a);else r(n,i[1],i[2])}}();function l(n,e){return("string"==typeof n?n:d(n)).indexOf(" "+e+" ")>=0}function p(n,e){var t=d(n),r=t+e;l(t,e)||(n.className=r.substring(1))}function c(n,e){var t,r=d(n);l(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function d(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=a)},function(n){n.exports=JSON.parse('{"name":"vuepress-plugin-comment","version":"0.7.3","description":"Comment plugin in vuepress, such as Gitalk, Valine...","main":"index.js","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1"},"repository":{"type":"git","url":"git+ssh://git@github.com/dongyuanxin/vuepress-plugin-comment.git"},"keywords":["vuepress","comment","plugin","vue","gitalk","valine"],"author":"dongyuanxin","license":"MIT","bugs":{"url":"https://github.com/dongyuanxin/vuepress-plugin-comment/issues"},"homepage":"https://github.com/dongyuanxin/vuepress-plugin-comment#readme","dependencies":{"ejs":"^2.6.1","gitalk":"^1.5.0","gitalk-fix":"^1.5.2","i":"^0.3.6","npm":"^6.9.0","valine":"^1.3.9"}}')},function(n,e,t){"use strict";var r=t(0),a=t(53).f,i=t(14),o=t(97),s=t(38),l=t(65),p=t(125);n.exports=function(n,e){var t,c,d,g,u,m=n.target,b=n.global,f=n.stat;if(t=b?r:f?r[m]||s(m,{}):r[m]&&r[m].prototype)for(c in e){if(g=e[c],d=n.dontCallGetSet?(u=a(t,c))&&u.value:t[c],!p(b?c:m+(f?".":"#")+c,n.forced)&&void 0!==d){if(typeof g==typeof d)continue;l(g,d)}(n.sham||d&&d.sham)&&i(g,"sham",!0),o(t,c,g,n)}}},function(n,e,t){"use strict";var r=t(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e,t){"use strict";var r=t(49),a=t(36);n.exports=function(n){return r(a(n))}},function(n,e,t){"use strict";var r=t(0),a=t(1),i=function(n){return a(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?i(r[n]):r[n]&&r[n][e]}},function(n,e,t){"use strict";var r=t(1),a=t(112),i=TypeError;n.exports=function(n){if(r(n))return n;throw new i(a(n)+" is not a function")}},function(n,e,t){"use strict";var r=t(0),a=t(61),i=t(9),o=t(63),s=t(59),l=t(58),p=r.Symbol,c=a("wks"),d=l?p.for||p:p&&p.withoutSetter||o;n.exports=function(n){return i(c,n)||(c[n]=s&&i(p,n)?p[n]:d("Symbol."+n)),c[n]}},function(n,e,t){"use strict";var r=t(36),a=Object;n.exports=function(n){return a(r(n))}},function(n,e,t){"use strict";var r=t(123);n.exports=function(n){return r(n.length)}},function(n,e,t){"use strict";var r=t(27),a=Function.prototype.call;n.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},function(n,e,t){"use strict";n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){"use strict";var r=t(54),a=TypeError;n.exports=function(n){if(r(n))throw new a("Can't call method on "+n);return n}},function(n,e,t){"use strict";var r=t(62),a=t(0),i=t(38),o=n.exports=a["__core-js_shared__"]||i("__core-js_shared__",{});(o.versions||(o.versions=[])).push({version:"3.37.0",mode:r?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.0/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){"use strict";var r=t(0),a=Object.defineProperty;n.exports=function(n,e){try{a(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(149),a=t(12),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(n){return a(n)&&o.call(n,"callee")&&!s.call(n,"callee")};n.exports=l},function(n,e,t){var r=t(10)(t(8),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(169),a=t(176),i=t(178),o=t(179),s=t(180);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=s,n.exports=l},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(6),a=t(46),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!a(n))||(o.test(n)||!i.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(13),a=t(12);n.exports=function(n){return"symbol"==typeof n||a(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){"use strict";var r=t(7),a=String,i=TypeError;n.exports=function(n){if(r(n))return n;throw new i(a(n)+" is not an object")}},function(n,e,t){"use strict";var r=t(2),a=t(3),i=t(18),o=Object,s=r("".split);n.exports=a((function(){return!o("z").propertyIsEnumerable(0)}))?function(n){return"String"===i(n)?s(n,""):o(n)}:o},function(n,e,t){"use strict";n.exports={}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,p=s||l||Function("return this")(),c=Object.prototype.toString,d=Math.max,g=Math.min,u=function(){return p.Date.now()};function m(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function b(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==c.call(n)}(n))return NaN;if(m(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=m(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=a.test(n);return s||i.test(n)?o(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,a,i,o,s,l,p=0,c=!1,f=!1,h=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function v(e){var t=r,i=a;return r=a=void 0,p=e,o=n.apply(i,t)}function y(n){return p=n,s=setTimeout(w,e),c?v(n):o}function x(n){var t=n-l;return void 0===l||t>=e||t<0||f&&n-p>=i}function w(){var n=u();if(x(n))return S(n);s=setTimeout(w,function(n){var t=e-(n-l);return f?g(t,i-(n-p)):t}(n))}function S(n){return s=void 0,h&&r?v(n):(r=a=void 0,o)}function k(){var n=u(),t=x(n);if(r=arguments,a=this,l=n,t){if(void 0===s)return y(l);if(f)return s=setTimeout(w,e),v(l)}return void 0===s&&(s=setTimeout(w,e)),o}return e=b(e)||0,m(t)&&(c=!!t.leading,i=(f="maxWait"in t)?d(b(t.maxWait)||0,e):i,h="trailing"in t?!!t.trailing:h),k.cancel=function(){void 0!==s&&clearTimeout(s),p=0,r=l=a=s=void 0},k.flush=function(){return void 0===s?o:S(u())},k}},function(n,e,t){"use strict";var r=t(5),a=t(34),i=t(108),o=t(35),s=t(28),l=t(55),p=t(9),c=t(64),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(n,e){if(n=s(n),e=l(e),c)try{return d(n,e)}catch(n){}if(p(n,e))return o(!a(i.f,n,e),n[e])}},function(n,e,t){"use strict";n.exports=function(n){return null==n}},function(n,e,t){"use strict";var r=t(109),a=t(56);n.exports=function(n){var e=r(n,"string");return a(e)?e:e+""}},function(n,e,t){"use strict";var r=t(29),a=t(1),i=t(57),o=t(58),s=Object;n.exports=o?function(n){return"symbol"==typeof n}:function(n){var e=r("Symbol");return a(e)&&i(e.prototype,s(n))}},function(n,e,t){"use strict";var r=t(2);n.exports=r({}.isPrototypeOf)},function(n,e,t){"use strict";var r=t(59);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){"use strict";var r=t(60),a=t(3),i=t(0).String;n.exports=!!Object.getOwnPropertySymbols&&!a((function(){var n=Symbol("symbol detection");return!i(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){"use strict";var r,a,i=t(0),o=t(110),s=i.process,l=i.Deno,p=s&&s.versions||l&&l.version,c=p&&p.v8;c&&(a=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(a=+r[1]),n.exports=a},function(n,e,t){"use strict";var r=t(37);n.exports=function(n,e){return r[n]||(r[n]=e||{})}},function(n,e,t){"use strict";n.exports=!1},function(n,e,t){"use strict";var r=t(2),a=0,i=Math.random(),o=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+o(++a+i,36)}},function(n,e,t){"use strict";var r=t(5),a=t(3),i=t(100);n.exports=!r&&!a((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){"use strict";var r=t(9),a=t(118),i=t(53),o=t(17);n.exports=function(n,e,t){for(var s=a(e),l=o.f,p=i.f,c=0;c<s.length;c++){var d=s[c];r(n,d)||t&&r(t,d)||l(n,d,p(e,d))}}},function(n,e,t){"use strict";var r=t(122);n.exports=function(n){var e=+n;return e!=e||0===e?0:r(e)}},function(n,e,t){"use strict";var r=t(132),a=t(7),i=t(36),o=t(133);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.prototype,"__proto__","set"))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return i(t),o(r),a(t)?(e?n(t,r):t.__proto__=r,t):t}}():void 0)},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(19),a=t(160),i=t(161),o=t(162),s=t(163),l=t(164);function p(n){var e=this.__data__=new r(n);this.size=e.size}p.prototype.clear=a,p.prototype.delete=i,p.prototype.get=o,p.prototype.has=s,p.prototype.set=l,n.exports=p},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(13),a=t(41);n.exports=function(n){if(!a(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(181),a=t(12);n.exports=function n(e,t,i,o,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!=e&&t!=t:r(e,t,i,o,n,s))}},function(n,e,t){var r=t(76),a=t(184),i=t(77);n.exports=function(n,e,t,o,s,l){var p=1&t,c=n.length,d=e.length;if(c!=d&&!(p&&d>c))return!1;var g=l.get(n),u=l.get(e);if(g&&u)return g==e&&u==n;var m=-1,b=!0,f=2&t?new r:void 0;for(l.set(n,e),l.set(e,n);++m<c;){var h=n[m],v=e[m];if(o)var y=p?o(v,h,m,e,n,l):o(h,v,m,n,e,l);if(void 0!==y){if(y)continue;b=!1;break}if(f){if(!a(e,(function(n,e){if(!i(f,e)&&(h===n||s(h,n,t,o,l)))return f.push(e)}))){b=!1;break}}else if(h!==v&&!s(h,v,t,o,l)){b=!1;break}}return l.delete(n),l.delete(e),b}},function(n,e,t){var r=t(42),a=t(182),i=t(183);function o(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,n.exports=o},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(194),a=t(200),i=t(82);n.exports=function(n){return i(n)?r(n):a(n)}},function(n,e,t){(function(n){var r=t(8),a=t(196),i=e&&!e.nodeType&&e,o=i&&"object"==typeof n&&n&&!n.nodeType&&n,s=o&&o.exports===i?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||a;n.exports=l}).call(this,t(51)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(197),a=t(198),i=t(199),o=i&&i.isTypedArray,s=o?a(o):r;n.exports=s},function(n,e,t){var r=t(72),a=t(44);n.exports=function(n){return null!=n&&a(n.length)&&!r(n)}},function(n,e,t){var r=t(10)(t(8),"Set");n.exports=r},function(n,e,t){var r=t(41);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(87),a=t(23);n.exports=function(n,e){for(var t=0,i=(e=r(e,n)).length;null!=n&&t<i;)n=n[a(e[t++])];return t&&t==i?n:void 0}},function(n,e,t){var r=t(6),a=t(45),i=t(211),o=t(214);n.exports=function(n,e){return r(n)?n:a(n,e)?[n]:i(o(n))}},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(147),a=t(152),i=t(223),o=t(231),s=t(240),l=t(105),p=i((function(n){var e=l(n);return s(e)&&(e=void 0),o(r(n,1,s,!0),a(e,2))}));n.exports=p},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,a=r.exec(t);if(!a)return t;var i="",o=0,s=0;for(o=a.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==o&&(i+=t.substring(s,o)),s=o+1,i+=e}return s!==o?i+t.substring(s,o):i}},function(n,e,t){"use strict";
/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var r=t(247),a=t(248),i=t(249),o=!1,s=t(250).version,l=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],p=l.concat("cache"),c=/^\uFEFF/;function d(n,t){var a,i,o=t.views,s=/^[A-Za-z]+:\\|^\//.exec(n);if(s&&s.length)a=e.resolveInclude(n.replace(/^\/*/,""),t.root||"/",!0);else if(t.filename&&(i=e.resolveInclude(n,t.filename),r.existsSync(i)&&(a=i)),a||Array.isArray(o)&&o.some((function(t){return i=e.resolveInclude(n,t,!0),r.existsSync(i)}))&&(a=i),!a)throw new Error('Could not find the include file "'+t.escapeFunction(n)+'"');return a}function g(n,t){var r,a=n.filename,i=arguments.length>1;if(n.cache){if(!a)throw new Error("cache option requires a filename");if(r=e.cache.get(a))return r;i||(t=m(a).toString().replace(c,""))}else if(!i){if(!a)throw new Error("Internal EJS error: no file name or template provided");t=m(a).toString().replace(c,"")}return r=e.compile(t,n),n.cache&&e.cache.set(a,r),r}function u(n,t,r){var a;if(!r){if("function"==typeof e.promiseImpl)return new e.promiseImpl((function(e,r){try{e(a=g(n)(t))}catch(n){r(n)}}));throw new Error("Please provide a callback function")}try{a=g(n)(t)}catch(n){return r(n)}r(null,a)}function m(n){return e.fileLoader(n)}function b(n,e,t,r,a){var i=e.split("\n"),o=Math.max(r-3,0),s=Math.min(i.length,r+3),l=a(t),p=i.slice(o,s).map((function(n,e){var t=e+o+1;return(t==r?" >> ":"    ")+t+"| "+n})).join("\n");throw n.path=l,n.message=(l||"ejs")+":"+r+"\n"+p+"\n\n"+n.message,n}function f(n){return n.replace(/;(\s*$)/,"$1")}function h(n,t){t=t||{};var r={};this.templateText=n,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],r.client=t.client||!1,r.escapeFunction=t.escape||t.escapeFunction||i.escapeXML,r.compileDebug=!1!==t.compileDebug,r.debug=!!t.debug,r.filename=t.filename,r.openDelimiter=t.openDelimiter||e.openDelimiter||"<",r.closeDelimiter=t.closeDelimiter||e.closeDelimiter||">",r.delimiter=t.delimiter||e.delimiter||"%",r.strict=t.strict||!1,r.context=t.context,r.cache=t.cache||!1,r.rmWhitespace=t.rmWhitespace,r.root=t.root,r.outputFunctionName=t.outputFunctionName,r.localsName=t.localsName||e.localsName||"locals",r.views=t.views,r.async=t.async,r.destructuredLocals=t.destructuredLocals,r.legacyInclude=void 0===t.legacyInclude||!!t.legacyInclude,r.strict?r._with=!1:r._with=void 0===t._with||t._with,this.opts=r,this.regex=this.createRegex()}e.cache=i.cache,e.fileLoader=r.readFileSync,e.localsName="locals",e.promiseImpl=new Function("return this;")().Promise,e.resolveInclude=function(n,e,t){var r=a.dirname,i=a.extname,o=(0,a.resolve)(t?e:r(e),n);return i(n)||(o+=".ejs"),o},e.compile=function(n,e){return e&&e.scope&&(o||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),o=!0),e.context||(e.context=e.scope),delete e.scope),new h(n,e).compile()},e.render=function(n,e,t){var r=e||{},a=t||{};return 2==arguments.length&&i.shallowCopyFromList(a,r,l),g(a,n)(r)},e.renderFile=function(){var n,e,t,r=Array.prototype.slice.call(arguments),a=r.shift(),o={filename:a};return"function"==typeof arguments[arguments.length-1]&&(n=r.pop()),r.length?(e=r.shift(),r.length?i.shallowCopy(o,r.pop()):(e.settings&&(e.settings.views&&(o.views=e.settings.views),e.settings["view cache"]&&(o.cache=!0),(t=e.settings["view options"])&&i.shallowCopy(o,t)),i.shallowCopyFromList(o,e,p)),o.filename=a):e={},u(o,e,n)},e.Template=h,e.clearCache=function(){e.cache.reset()},h.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},h.prototype={createRegex:function(){var n="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",e=i.escapeRegExpChars(this.opts.delimiter),t=i.escapeRegExpChars(this.opts.openDelimiter),r=i.escapeRegExpChars(this.opts.closeDelimiter);return n=n.replace(/%/g,e).replace(/</g,t).replace(/>/g,r),new RegExp(n)},compile:function(){var n,e,t,r=this.opts,o="",s="",l=r.escapeFunction;if(!this.source){if(this.generateSource(),o+='  var __output = "";\n  function __append(s) { if (s !== undefined && s !== null) __output += s }\n',r.outputFunctionName&&(o+="  var "+r.outputFunctionName+" = __append;\n"),r.destructuredLocals&&r.destructuredLocals.length){for(var p="  var __locals = ("+r.localsName+" || {}),\n",c=0;c<r.destructuredLocals.length;c++){var u=r.destructuredLocals[c];c>0&&(p+=",\n  "),p+=u+" = __locals."+u}o+=p+";\n"}!1!==r._with&&(o+="  with ("+r.localsName+" || {}) {\n",s+="  }\n"),s+="  return __output;\n",this.source=o+this.source+s}n=r.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(r.filename?JSON.stringify(r.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,r.client&&(n="escapeFn = escapeFn || "+l.toString()+";\n"+n,r.compileDebug&&(n="rethrow = rethrow || "+b.toString()+";\n"+n)),r.strict&&(n='"use strict";\n'+n),r.debug&&console.log(n),r.compileDebug&&r.filename&&(n=n+"\n//# sourceURL="+r.filename+"\n");try{if(r.async)try{t=new Function("return (async function(){}).constructor;")()}catch(n){throw n instanceof SyntaxError?new Error("This environment does not support async/await"):n}else t=Function;e=new t(r.localsName+", escapeFn, include, rethrow",n)}catch(n){throw n instanceof SyntaxError&&(r.filename&&(n.message+=" in "+r.filename),n.message+=" while compiling ejs\n\n",n.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",n.message+="https://github.com/RyanZim/EJS-Lint",r.async||(n.message+="\n",n.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),n}var m=r.client?e:function(n){return e.apply(r.context,[n||{},l,function(e,t){var a=i.shallowCopy({},n);return t&&(a=i.shallowCopy(a,t)),function(n,e){var t=i.shallowCopy({},e);return t.filename=d(n,t),g(t)}(e,r)(a)},b])};if(m.dependencies=this.dependencies,r.filename&&"function"==typeof Object.defineProperty){var f=r.filename,h=a.basename(f,a.extname(f));try{Object.defineProperty(m,"name",{value:h,writable:!1,enumerable:!1,configurable:!0})}catch(n){}}return m},generateSource:function(){var n=this.opts;n.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,r=this.parseTemplateText(),a=this.opts.delimiter,o=this.opts.openDelimiter,s=this.opts.closeDelimiter;r&&r.length&&r.forEach((function(l,p){var g,u,b,f,v,y;if(0===l.indexOf(o+a)&&0!==l.indexOf(o+a+a)&&(u=r[p+2])!=a+s&&u!="-"+a+s&&u!="_"+a+s)throw new Error('Could not find matching close tag for "'+l+'".');if(n.legacyInclude&&(b=l.match(/^\s*include\s+(\S+)/))&&(g=r[p-1])&&(g==o+a||g==o+a+"-"||g==o+a+"_"))return f=i.shallowCopy({},t.opts),v=function(n,e){var t,r,a=i.shallowCopy({},e);r=m(t=d(n,a)).toString().replace(c,""),a.filename=t;var o=new h(r,a);return o.generateSource(),{source:o.source,filename:t,template:r}}(b[1],f),y=t.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(v.template)+"\n      , __filename = "+JSON.stringify(v.filename)+";\n      try {\n"+v.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+v.source+"    ; }).call(this)\n",t.source+=y,void t.dependencies.push(e.resolveInclude(b[1],f.filename));t.scanLine(l)}))},parseTemplateText:function(){for(var n,e=this.templateText,t=this.regex,r=t.exec(e),a=[];r;)0!==(n=r.index)&&(a.push(e.substring(0,n)),e=e.slice(n)),a.push(r[0]),e=e.slice(r[0].length),r=t.exec(e);return e&&a.push(e),a},_addOutput:function(n){if(this.truncate&&(n=n.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!n)return n;n=(n=(n=(n=n.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+n+'")\n'},scanLine:function(n){var e,t=this.opts.delimiter,r=this.opts.openDelimiter,a=this.opts.closeDelimiter;switch(e=n.split("\n").length-1,n){case r+t:case r+t+"_":this.mode=h.modes.EVAL;break;case r+t+"=":this.mode=h.modes.ESCAPED;break;case r+t+"-":this.mode=h.modes.RAW;break;case r+t+"#":this.mode=h.modes.COMMENT;break;case r+t+t:this.mode=h.modes.LITERAL,this.source+='    ; __append("'+n.replace(r+t+t,r+t)+'")\n';break;case t+t+a:this.mode=h.modes.LITERAL,this.source+='    ; __append("'+n.replace(t+t+a,t+a)+'")\n';break;case t+a:case"-"+t+a:case"_"+t+a:this.mode==h.modes.LITERAL&&this._addOutput(n),this.mode=null,this.truncate=0===n.indexOf("-")||0===n.indexOf("_");break;default:if(this.mode){switch(this.mode){case h.modes.EVAL:case h.modes.ESCAPED:case h.modes.RAW:n.lastIndexOf("//")>n.lastIndexOf("\n")&&(n+="\n")}switch(this.mode){case h.modes.EVAL:this.source+="    ; "+n+"\n";break;case h.modes.ESCAPED:this.source+="    ; __append(escapeFn("+f(n)+"))\n";break;case h.modes.RAW:this.source+="    ; __append("+f(n)+")\n";break;case h.modes.COMMENT:break;case h.modes.LITERAL:this._addOutput(n)}}else this._addOutput(n)}this.opts.compileDebug&&e&&(this.currentLine+=e,this.source+="    ; __line = "+this.currentLine+"\n")}},e.escapeXML=i.escapeXML,e.__express=e.renderFile,e.VERSION=s,e.name="ejs","undefined"!=typeof window&&(window.ejs=e)},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},a=(t(243),t(4)),i=Object(a.a)(r,(function(){return(0,this._self._c)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=i.exports},function(n,e,t){"use strict";t.r(e);var r={name:"CodeGroup",data:()=>({codeTabs:[],activeCodeTabIndex:-1}),watch:{activeCodeTabIndex(n){this.codeTabs.forEach(n=>{n.elm.classList.remove("theme-code-block__active")}),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted(){this.codeTabs=(this.$slots.default||[]).filter(n=>Boolean(n.componentOptions)).map((n,e)=>(""===n.componentOptions.propsData.active&&(this.activeCodeTabIndex=e),{title:n.componentOptions.propsData.title,elm:n.elm})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab(n){this.activeCodeTabIndex=n}}},a=(t(244),t(4)),i=Object(a.a)(r,(function(){var n=this,e=n._self._c;return e("div",{staticClass:"theme-code-group"},[e("div",{staticClass:"theme-code-group__nav"},[e("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(t,r){return e("li",{key:t.title,staticClass:"theme-code-group__li"},[e("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(t.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?e("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=i.exports},function(n,e,t){"use strict";var r=t(1),a=t(17),i=t(102),o=t(38);n.exports=function(n,e,t,s){s||(s={});var l=s.enumerable,p=void 0!==s.name?s.name:e;if(r(t)&&i(t,p,s),s.global)l?n[e]=t:o(e,t);else{try{s.unsafe?n[e]&&(l=!0):delete n[e]}catch(n){}l?n[e]=t:a.f(n,e,{value:t,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n}},function(n,e,t){"use strict";n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r=t(138),a=String;n.exports=function(n){if("Symbol"===r(n))throw new TypeError("Cannot convert a Symbol value to a string");return a(n)}},function(n,e,t){"use strict";var r=t(0),a=t(7),i=r.document,o=a(i)&&a(i.createElement);n.exports=function(n){return o?i.createElement(n):{}}},function(n,e,t){"use strict";var r=t(5),a=t(3);n.exports=r&&a((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){"use strict";var r=t(2),a=t(3),i=t(1),o=t(9),s=t(5),l=t(114).CONFIGURABLE,p=t(115),c=t(116),d=c.enforce,g=c.get,u=String,m=Object.defineProperty,b=r("".slice),f=r("".replace),h=r([].join),v=s&&!a((function(){return 8!==m((function(){}),"length",{value:8}).length})),y=String(String).split("String"),x=n.exports=function(n,e,t){"Symbol("===b(u(e),0,7)&&(e="["+f(u(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!o(n,"name")||l&&n.name!==e)&&(s?m(n,"name",{value:e,configurable:!0}):n.name=e),v&&t&&o(t,"arity")&&n.length!==t.arity&&m(n,"length",{value:t.arity});try{t&&o(t,"constructor")&&t.constructor?s&&m(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch(n){}var r=d(n);return o(r,"source")||(r.source=h(y,"string"==typeof e?e:"")),n};Function.prototype.toString=x((function(){return i(this)&&g(this).source||p(this)}),"toString")},function(n,e,t){"use strict";var r=t(61),a=t(63),i=r("keys");n.exports=function(n){return i[n]||(i[n]=a(n))}},function(n,e,t){"use strict";var r=t(2),a=t(9),i=t(28),o=t(120).indexOf,s=t(50),l=r([].push);n.exports=function(n,e){var t,r=i(n),p=0,c=[];for(t in r)!a(s,t)&&a(r,t)&&l(c,t);for(;e.length>p;)a(r,t=e[p++])&&(~o(c,t)||l(c,t));return c}},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){n.exports=t(253)},function(n,e,t){"use strict";var r=t(26),a=t(126).left,i=t(127),o=t(60);r({target:"Array",proto:!0,forced:!t(128)&&o>79&&o<83||!i("reduce")},{reduce:function(n){var e=arguments.length;return a(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,i=a&&!r.call({1:2},1);e.f=i?function(n){var e=a(this,n);return!!e&&e.enumerable}:r},function(n,e,t){"use strict";var r=t(34),a=t(7),i=t(56),o=t(111),s=t(113),l=t(31),p=TypeError,c=l("toPrimitive");n.exports=function(n,e){if(!a(n)||i(n))return n;var t,l=o(n,c);if(l){if(void 0===e&&(e="default"),t=r(l,n,e),!a(t)||i(t))return t;throw new p("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(n,e)}},function(n,e,t){"use strict";n.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},function(n,e,t){"use strict";var r=t(30),a=t(54);n.exports=function(n,e){var t=n[e];return a(t)?void 0:r(t)}},function(n,e,t){"use strict";var r=String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){"use strict";var r=t(34),a=t(1),i=t(7),o=TypeError;n.exports=function(n,e){var t,s;if("string"===e&&a(t=n.toString)&&!i(s=r(t,n)))return s;if(a(t=n.valueOf)&&!i(s=r(t,n)))return s;if("string"!==e&&a(t=n.toString)&&!i(s=r(t,n)))return s;throw new o("Can't convert object to primitive value")}},function(n,e,t){"use strict";var r=t(5),a=t(9),i=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,s=a(i,"name"),l=s&&"something"===function(){}.name,p=s&&(!r||r&&o(i,"name").configurable);n.exports={EXISTS:s,PROPER:l,CONFIGURABLE:p}},function(n,e,t){"use strict";var r=t(2),a=t(1),i=t(37),o=r(Function.toString);a(i.inspectSource)||(i.inspectSource=function(n){return o(n)}),n.exports=i.inspectSource},function(n,e,t){"use strict";var r,a,i,o=t(117),s=t(0),l=t(7),p=t(14),c=t(9),d=t(37),g=t(103),u=t(50),m=s.TypeError,b=s.WeakMap;if(o||d.state){var f=d.state||(d.state=new b);f.get=f.get,f.has=f.has,f.set=f.set,r=function(n,e){if(f.has(n))throw new m("Object already initialized");return e.facade=n,f.set(n,e),e},a=function(n){return f.get(n)||{}},i=function(n){return f.has(n)}}else{var h=g("state");u[h]=!0,r=function(n,e){if(c(n,h))throw new m("Object already initialized");return e.facade=n,p(n,h,e),e},a=function(n){return c(n,h)?n[h]:{}},i=function(n){return c(n,h)}}n.exports={set:r,get:a,has:i,enforce:function(n){return i(n)?a(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=a(e)).type!==n)throw new m("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){"use strict";var r=t(0),a=t(1),i=r.WeakMap;n.exports=a(i)&&/native code/.test(String(i))},function(n,e,t){"use strict";var r=t(29),a=t(2),i=t(119),o=t(124),s=t(48),l=a([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=i.f(s(n)),t=o.f;return t?l(e,t(n)):e}},function(n,e,t){"use strict";var r=t(104),a=t(98).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,a)}},function(n,e,t){"use strict";var r=t(28),a=t(121),i=t(33),o=function(n){return function(e,t,o){var s=r(e),l=i(s);if(0===l)return!n&&-1;var p,c=a(o,l);if(n&&t!=t){for(;l>c;)if((p=s[c++])!=p)return!0}else for(;l>c;c++)if((n||c in s)&&s[c]===t)return n||c||0;return!n&&-1}};n.exports={includes:o(!0),indexOf:o(!1)}},function(n,e,t){"use strict";var r=t(66),a=Math.max,i=Math.min;n.exports=function(n,e){var t=r(n);return t<0?a(t+e,0):i(t,e)}},function(n,e,t){"use strict";var r=Math.ceil,a=Math.floor;n.exports=Math.trunc||function(n){var e=+n;return(e>0?a:r)(e)}},function(n,e,t){"use strict";var r=t(66),a=Math.min;n.exports=function(n){var e=r(n);return e>0?a(e,9007199254740991):0}},function(n,e,t){"use strict";e.f=Object.getOwnPropertySymbols},function(n,e,t){"use strict";var r=t(3),a=t(1),i=/#|\.prototype\./,o=function(n,e){var t=l[s(n)];return t===c||t!==p&&(a(e)?r(e):!!e)},s=o.normalize=function(n){return String(n).replace(i,".").toLowerCase()},l=o.data={},p=o.NATIVE="N",c=o.POLYFILL="P";n.exports=o},function(n,e,t){"use strict";var r=t(30),a=t(32),i=t(49),o=t(33),s=TypeError,l="Reduce of empty array with no initial value",p=function(n){return function(e,t,p,c){var d=a(e),g=i(d),u=o(d);if(r(t),0===u&&p<2)throw new s(l);var m=n?u-1:0,b=n?-1:1;if(p<2)for(;;){if(m in g){c=g[m],m+=b;break}if(m+=b,n?m<0:u<=m)throw new s(l)}for(;n?m>=0:u>m;m+=b)m in g&&(c=t(c,g[m],m,d));return c}};n.exports={left:p(!1),right:p(!0)}},function(n,e,t){"use strict";var r=t(3);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){"use strict";var r=t(0),a=t(18);n.exports="process"===a(r.process)},function(n,e,t){"use strict";var r=t(26),a=t(0),i=t(130),o=t(131),s=a.WebAssembly,l=7!==new Error("e",{cause:7}).cause,p=function(n,e){var t={};t[n]=o(n,e,l),r({global:!0,constructor:!0,arity:1,forced:l},t)},c=function(n,e){if(s&&s[n]){var t={};t[n]=o("WebAssembly."+n,e,l),r({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:l},t)}};p("Error",(function(n){return function(e){return i(n,this,arguments)}})),p("EvalError",(function(n){return function(e){return i(n,this,arguments)}})),p("RangeError",(function(n){return function(e){return i(n,this,arguments)}})),p("ReferenceError",(function(n){return function(e){return i(n,this,arguments)}})),p("SyntaxError",(function(n){return function(e){return i(n,this,arguments)}})),p("TypeError",(function(n){return function(e){return i(n,this,arguments)}})),p("URIError",(function(n){return function(e){return i(n,this,arguments)}})),c("CompileError",(function(n){return function(e){return i(n,this,arguments)}})),c("LinkError",(function(n){return function(e){return i(n,this,arguments)}})),c("RuntimeError",(function(n){return function(e){return i(n,this,arguments)}}))},function(n,e,t){"use strict";var r=t(27),a=Function.prototype,i=a.apply,o=a.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(i):function(){return o.apply(i,arguments)})},function(n,e,t){"use strict";var r=t(29),a=t(9),i=t(14),o=t(57),s=t(67),l=t(65),p=t(135),c=t(136),d=t(137),g=t(140),u=t(141),m=t(5),b=t(62);n.exports=function(n,e,t,f){var h=f?2:1,v=n.split("."),y=v[v.length-1],x=r.apply(null,v);if(x){var w=x.prototype;if(!b&&a(w,"cause")&&delete w.cause,!t)return x;var S=r("Error"),k=e((function(n,e){var t=d(f?e:n,void 0),r=f?new x(n):new x;return void 0!==t&&i(r,"message",t),u(r,k,r.stack,2),this&&o(w,this)&&c(r,this,k),arguments.length>h&&g(r,arguments[h]),r}));if(k.prototype=w,"Error"!==y?s?s(k,S):l(k,S,{name:!0}):m&&"stackTraceLimit"in x&&(p(k,x,"stackTraceLimit"),p(k,x,"prepareStackTrace")),l(k,x),!b)try{w.name!==y&&i(w,"name",y),w.constructor=k}catch(n){}return k}}},function(n,e,t){"use strict";var r=t(2),a=t(30);n.exports=function(n,e,t){try{return r(a(Object.getOwnPropertyDescriptor(n,e)[t]))}catch(n){}}},function(n,e,t){"use strict";var r=t(134),a=String,i=TypeError;n.exports=function(n){if(r(n))return n;throw new i("Can't set "+a(n)+" as a prototype")}},function(n,e,t){"use strict";var r=t(7);n.exports=function(n){return r(n)||null===n}},function(n,e,t){"use strict";var r=t(17).f;n.exports=function(n,e,t){t in n||r(n,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}},function(n,e,t){"use strict";var r=t(1),a=t(7),i=t(67);n.exports=function(n,e,t){var o,s;return i&&r(o=e.constructor)&&o!==t&&a(s=o.prototype)&&s!==t.prototype&&i(n,s),n}},function(n,e,t){"use strict";var r=t(99);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){"use strict";var r=t(139),a=t(1),i=t(18),o=t(31)("toStringTag"),s=Object,l="Arguments"===i(function(){return arguments}());n.exports=r?i:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=s(n),o))?t:l?i(e):"Object"===(r=i(e))&&a(e.callee)?"Arguments":r}},function(n,e,t){"use strict";var r={};r[t(31)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){"use strict";var r=t(7),a=t(14);n.exports=function(n,e){r(e)&&"cause"in e&&a(n,"cause",e.cause)}},function(n,e,t){"use strict";var r=t(14),a=t(142),i=t(143),o=Error.captureStackTrace;n.exports=function(n,e,t,s){i&&(o?o(n,e):r(n,"stack",a(t,s)))}},function(n,e,t){"use strict";var r=t(2),a=Error,i=r("".replace),o=String(new a("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,l=s.test(o);n.exports=function(n,e){if(l&&"string"==typeof n&&!a.prepareStackTrace)for(;e--;)n=i(n,s,"");return n}},function(n,e,t){"use strict";var r=t(3),a=t(35);n.exports=!r((function(){var n=new Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",a(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(5),a=t(145),i=TypeError,o=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}();n.exports=s?function(n,e){if(a(n)&&!o(n,"length").writable)throw new i("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e}},function(n,e,t){"use strict";var r=t(18);n.exports=Array.isArray||function(n){return"Array"===r(n)}},function(n,e,t){"use strict";var r=TypeError;n.exports=function(n){if(n>9007199254740991)throw r("Maximum allowed index exceeded");return n}},function(n,e,t){var r=t(68),a=t(148);n.exports=function n(e,t,i,o,s){var l=-1,p=e.length;for(i||(i=a),s||(s=[]);++l<p;){var c=e[l];t>0&&i(c)?t>1?n(c,t-1,i,o,s):r(s,c):o||(s[s.length]=c)}return s}},function(n,e,t){var r=t(15),a=t(39),i=t(6),o=r?r.isConcatSpreadable:void 0;n.exports=function(n){return i(n)||a(n)||!!(o&&n&&n[o])}},function(n,e,t){var r=t(13),a=t(12);n.exports=function(n){return a(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(15),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=i.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var a=o.call(n);return r&&(e?n[s]=t:delete n[s]),a}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(153),a=t(209),i=t(47),o=t(6),s=t(220);n.exports=function(n){return"function"==typeof n?n:null==n?i:"object"==typeof n?o(n)?a(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(154),a=t(208),i=t(85);n.exports=function(n){var e=a(n);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(70),a=t(74);n.exports=function(n,e,t,i){var o=t.length,s=o,l=!i;if(null==n)return!s;for(n=Object(n);o--;){var p=t[o];if(l&&p[2]?p[1]!==n[p[0]]:!(p[0]in n))return!1}for(;++o<s;){var c=(p=t[o])[0],d=n[c],g=p[1];if(l&&p[2]){if(void 0===d&&!(c in n))return!1}else{var u=new r;if(i)var m=i(d,g,c,n,e,u);if(!(void 0===m?a(g,d,3,i,u):m))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(20),a=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():a.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(20);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(20);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(20);n.exports=function(n,e){var t=this.__data__,a=r(t,n);return a<0?(++this.size,t.push([n,e])):t[a][1]=e,this}},function(n,e,t){var r=t(19);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(19),a=t(40),i=t(42);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var o=t.__data__;if(!a||o.length<199)return o.push([n,e]),this.size=++t.size,this;t=this.__data__=new i(o)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(72),a=t(166),i=t(41),o=t(73),s=/^\[object .+?Constructor\]$/,l=Function.prototype,p=Object.prototype,c=l.toString,d=p.hasOwnProperty,g=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!i(n)||a(n))&&(r(n)?g:s).test(o(n))}},function(n,e,t){var r,a=t(167),i=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!i&&i in n}},function(n,e,t){var r=t(8)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(170),a=t(19),i=t(40);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}},function(n,e,t){var r=t(171),a=t(172),i=t(173),o=t(174),s=t(175);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=o,l.prototype.set=s,n.exports=l},function(n,e,t){var r=t(21);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(21),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return a.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(21),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:a.call(e,n)}},function(n,e,t){var r=t(21);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(22);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(22);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(22);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(22);n.exports=function(n,e){var t=r(this,n),a=t.size;return t.set(n,e),this.size+=t.size==a?0:1,this}},function(n,e,t){var r=t(70),a=t(75),i=t(185),o=t(188),s=t(204),l=t(6),p=t(79),c=t(81),d="[object Object]",g=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,u,m,b){var f=l(n),h=l(e),v=f?"[object Array]":s(n),y=h?"[object Array]":s(e),x=(v="[object Arguments]"==v?d:v)==d,w=(y="[object Arguments]"==y?d:y)==d,S=v==y;if(S&&p(n)){if(!p(e))return!1;f=!0,x=!1}if(S&&!x)return b||(b=new r),f||c(n)?a(n,e,t,u,m,b):i(n,e,v,t,u,m,b);if(!(1&t)){var k=x&&g.call(n,"__wrapped__"),j=w&&g.call(e,"__wrapped__");if(k||j){var C=k?n.value():n,T=j?e.value():e;return b||(b=new r),m(C,T,t,u,b)}}return!!S&&(b||(b=new r),o(n,e,t,u,m,b))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(15),a=t(186),i=t(71),o=t(75),s=t(187),l=t(43),p=r?r.prototype:void 0,c=p?p.valueOf:void 0;n.exports=function(n,e,t,r,p,d,g){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!d(new a(n),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var u=s;case"[object Set]":var m=1&r;if(u||(u=l),n.size!=e.size&&!m)return!1;var b=g.get(n);if(b)return b==e;r|=2,g.set(n,e);var f=o(u(n),u(e),r,p,d,g);return g.delete(n),f;case"[object Symbol]":if(c)return c.call(n)==c.call(e)}return!1}},function(n,e,t){var r=t(8).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(189),a=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,i,o,s){var l=1&t,p=r(n),c=p.length;if(c!=r(e).length&&!l)return!1;for(var d=c;d--;){var g=p[d];if(!(l?g in e:a.call(e,g)))return!1}var u=s.get(n),m=s.get(e);if(u&&m)return u==e&&m==n;var b=!0;s.set(n,e),s.set(e,n);for(var f=l;++d<c;){var h=n[g=p[d]],v=e[g];if(i)var y=l?i(v,h,g,e,n,s):i(h,v,g,n,e,s);if(!(void 0===y?h===v||o(h,v,t,i,s):y)){b=!1;break}f||(f="constructor"==g)}if(b&&!f){var x=n.constructor,w=e.constructor;x==w||!("constructor"in n)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(b=!1)}return s.delete(n),s.delete(e),b}},function(n,e,t){var r=t(190),a=t(191),i=t(78);n.exports=function(n){return r(n,i,a)}},function(n,e,t){var r=t(68),a=t(6);n.exports=function(n,e,t){var i=e(n);return a(n)?i:r(i,t(n))}},function(n,e,t){var r=t(192),a=t(193),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(n){return null==n?[]:(n=Object(n),r(o(n),(function(e){return i.call(n,e)})))}:a;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=0,i=[];++t<r;){var o=n[t];e(o,t,n)&&(i[a++]=o)}return i}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(195),a=t(39),i=t(6),o=t(79),s=t(80),l=t(81),p=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=i(n),c=!t&&a(n),d=!t&&!c&&o(n),g=!t&&!c&&!d&&l(n),u=t||c||d||g,m=u?r(n.length,String):[],b=m.length;for(var f in n)!e&&!p.call(n,f)||u&&("length"==f||d&&("offset"==f||"parent"==f)||g&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||s(f,b))||m.push(f);return m}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(13),a=t(44),i=t(12),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,n.exports=function(n){return i(n)&&a(n.length)&&!!o[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(69),a=e&&!e.nodeType&&e,i=a&&"object"==typeof n&&n&&!n.nodeType&&n,o=i&&i.exports===a&&r.process,s=function(){try{var n=i&&i.require&&i.require("util").types;return n||o&&o.binding&&o.binding("util")}catch(n){}}();n.exports=s}).call(this,t(51)(n))},function(n,e,t){var r=t(201),a=t(202),i=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return a(n);var e=[];for(var t in Object(n))i.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(203)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(205),a=t(40),i=t(206),o=t(83),s=t(207),l=t(13),p=t(73),c=p(r),d=p(a),g=p(i),u=p(o),m=p(s),b=l;(r&&"[object DataView]"!=b(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=b(new a)||i&&"[object Promise]"!=b(i.resolve())||o&&"[object Set]"!=b(new o)||s&&"[object WeakMap]"!=b(new s))&&(b=function(n){var e=l(n),t="[object Object]"==e?n.constructor:void 0,r=t?p(t):"";if(r)switch(r){case c:return"[object DataView]";case d:return"[object Map]";case g:return"[object Promise]";case u:return"[object Set]";case m:return"[object WeakMap]"}return e}),n.exports=b},function(n,e,t){var r=t(10)(t(8),"DataView");n.exports=r},function(n,e,t){var r=t(10)(t(8),"Promise");n.exports=r},function(n,e,t){var r=t(10)(t(8),"WeakMap");n.exports=r},function(n,e,t){var r=t(84),a=t(78);n.exports=function(n){for(var e=a(n),t=e.length;t--;){var i=e[t],o=n[i];e[t]=[i,o,r(o)]}return e}},function(n,e,t){var r=t(74),a=t(210),i=t(217),o=t(45),s=t(84),l=t(85),p=t(23);n.exports=function(n,e){return o(n)&&s(e)?l(p(n),e):function(t){var o=a(t,n);return void 0===o&&o===e?i(t,n):r(e,o,3)}}},function(n,e,t){var r=t(86);n.exports=function(n,e,t){var a=null==n?void 0:r(n,e);return void 0===a?t:a}},function(n,e,t){var r=t(212),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(a,(function(n,t,r,a){e.push(r?a.replace(i,"$1"):t||n)})),e}));n.exports=o},function(n,e,t){var r=t(213);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(42);function a(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,a=e?e.apply(this,r):r[0],i=t.cache;if(i.has(a))return i.get(a);var o=n.apply(this,r);return t.cache=i.set(a,o)||i,o};return t.cache=new(a.Cache||r),t}a.Cache=r,n.exports=a},function(n,e,t){var r=t(215);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(15),a=t(216),i=t(6),o=t(46),s=r?r.prototype:void 0,l=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(i(e))return a(e,n)+"";if(o(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=Array(r);++t<r;)a[t]=e(n[t],t,n);return a}},function(n,e,t){var r=t(218),a=t(219);n.exports=function(n,e){return null!=n&&a(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(87),a=t(39),i=t(6),o=t(80),s=t(44),l=t(23);n.exports=function(n,e,t){for(var p=-1,c=(e=r(e,n)).length,d=!1;++p<c;){var g=l(e[p]);if(!(d=null!=n&&t(n,g)))break;n=n[g]}return d||++p!=c?d:!!(c=null==n?0:n.length)&&s(c)&&o(g,c)&&(i(n)||a(n))}},function(n,e,t){var r=t(221),a=t(222),i=t(45),o=t(23);n.exports=function(n){return i(n)?r(o(n)):a(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(86);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(47),a=t(224),i=t(226);n.exports=function(n,e){return i(a(n,e,r),n+"")}},function(n,e,t){var r=t(225),a=Math.max;n.exports=function(n,e,t){return e=a(void 0===e?n.length-1:e,0),function(){for(var i=arguments,o=-1,s=a(i.length-e,0),l=Array(s);++o<s;)l[o]=i[e+o];o=-1;for(var p=Array(e+1);++o<e;)p[o]=i[o];return p[e]=t(l),r(n,this,p)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(227),a=t(230)(r);n.exports=a},function(n,e,t){var r=t(228),a=t(229),i=t(47),o=a?function(n,e){return a(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;n.exports=o},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(10),a=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=a},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var a=t(),i=16-(a-r);if(r=a,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(76),a=t(232),i=t(237),o=t(77),s=t(238),l=t(43);n.exports=function(n,e,t){var p=-1,c=a,d=n.length,g=!0,u=[],m=u;if(t)g=!1,c=i;else if(d>=200){var b=e?null:s(n);if(b)return l(b);g=!1,c=o,m=new r}else m=e?[]:u;n:for(;++p<d;){var f=n[p],h=e?e(f):f;if(f=t||0!==f?f:0,g&&h==h){for(var v=m.length;v--;)if(m[v]===h)continue n;e&&m.push(h),u.push(f)}else c(m,h,t)||(m!==u&&m.push(h),u.push(f))}return u}},function(n,e,t){var r=t(233);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(234),a=t(235),i=t(236);n.exports=function(n,e,t){return e==e?i(n,e,t):r(n,a,t)}},function(n,e){n.exports=function(n,e,t,r){for(var a=n.length,i=t+(r?1:-1);r?i--:++i<a;)if(e(n[i],i,n))return i;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,a=n.length;++r<a;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,a=null==n?0:n.length;++r<a;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(83),a=t(239),i=t(43),o=r&&1/i(new r([,-0]))[1]==1/0?function(n){return new r(n)}:a;n.exports=o},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(82),a=t(12);n.exports=function(n){return a(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(88)},function(n,e,t){"use strict";t(89)},function(n,e,t){},function(n,e,t){},function(n,e){},function(n,e){function t(n,e){for(var t=0,r=n.length-1;r>=0;r--){var a=n[r];"."===a?n.splice(r,1):".."===a?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}function r(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}e.resolve=function(){for(var n="",e=!1,a=arguments.length-1;a>=-1&&!e;a--){var i=a>=0?arguments[a]:process.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,e="/"===i.charAt(0))}return(e?"/":"")+(n=t(r(n.split("/"),(function(n){return!!n})),!e).join("/"))||"."},e.normalize=function(n){var i=e.isAbsolute(n),o="/"===a(n,-1);return(n=t(r(n.split("/"),(function(n){return!!n})),!i).join("/"))||i||(n="."),n&&o&&(n+="/"),(i?"/":"")+n},e.isAbsolute=function(n){return"/"===n.charAt(0)},e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(r(n,(function(n,e){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n})).join("/"))},e.relative=function(n,t){function r(n){for(var e=0;e<n.length&&""===n[e];e++);for(var t=n.length-1;t>=0&&""===n[t];t--);return e>t?[]:n.slice(e,t-e+1)}n=e.resolve(n).substr(1),t=e.resolve(t).substr(1);for(var a=r(n.split("/")),i=r(t.split("/")),o=Math.min(a.length,i.length),s=o,l=0;l<o;l++)if(a[l]!==i[l]){s=l;break}var p=[];for(l=s;l<a.length;l++)p.push("..");return(p=p.concat(i.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(n){if("string"!=typeof n&&(n+=""),0===n.length)return".";for(var e=n.charCodeAt(0),t=47===e,r=-1,a=!0,i=n.length-1;i>=1;--i)if(47===(e=n.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return-1===r?t?"/":".":t&&1===r?"/":n.slice(0,r)},e.basename=function(n,e){var t=function(n){"string"!=typeof n&&(n+="");var e,t=0,r=-1,a=!0;for(e=n.length-1;e>=0;--e)if(47===n.charCodeAt(e)){if(!a){t=e+1;break}}else-1===r&&(a=!1,r=e+1);return-1===r?"":n.slice(t,r)}(n);return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},e.extname=function(n){"string"!=typeof n&&(n+="");for(var e=-1,t=0,r=-1,a=!0,i=0,o=n.length-1;o>=0;--o){var s=n.charCodeAt(o);if(47!==s)-1===r&&(a=!1,r=o+1),46===s?-1===e?e=o:1!==i&&(i=1):-1!==e&&(i=-1);else if(!a){t=o+1;break}}return-1===e||-1===r||0===i||1===i&&e===r-1&&e===t+1?"":n.slice(e,r)};var a="b"==="ab".substr(-1)?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)}},function(n,e,t){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.escapeRegExpChars=function(n){return n?String(n).replace(r,"\\$&"):""};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},i=/[&<>'"]/g;function o(n){return a[n]||n}e.escapeXML=function(n){return null==n?"":String(n).replace(i,o)},e.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},e.shallowCopy=function(n,e){for(var t in e=e||{})n[t]=e[t];return n},e.shallowCopyFromList=function(n,e,t){for(var r=0;r<t.length;r++){var a=t[r];void 0!==e[a]&&(n[a]=e[a])}return n},e.cache={_data:{},set:function(n,e){this._data[n]=e},get:function(n){return this._data[n]},remove:function(n){delete this._data[n]},reset:function(){this._data={}}}},function(n){n.exports=JSON.parse('{"name":"ejs","description":"Embedded JavaScript templates","keywords":["template","engine","ejs"],"version":"2.7.4","author":"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)","license":"Apache-2.0","main":"./lib/ejs.js","repository":{"type":"git","url":"git://github.com/mde/ejs.git"},"bugs":"https://github.com/mde/ejs/issues","homepage":"https://github.com/mde/ejs","dependencies":{},"devDependencies":{"browserify":"^13.1.1","eslint":"^4.14.0","git-directory-deploy":"^1.5.1","jake":"^10.3.1","jsdoc":"^3.4.0","lru-cache":"^4.0.1","mocha":"^5.0.5","uglify-js":"^3.3.16"},"engines":{"node":">=0.10.0"},"scripts":{"test":"mocha","postinstall":"node ./postinstall.js"}}')},function(n,e,t){"use strict";t(90)},function(n,e,t){"use strict";t(91)},function(n,e,t){"use strict";t.r(e);
/*!
 * Vue.js v2.7.16
 * (c) 2014-2023 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({}),a=Array.isArray;function i(n){return null==n}function o(n){return null!=n}function s(n){return!0===n}function l(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function p(n){return"function"==typeof n}function c(n){return null!==n&&"object"==typeof n}var d=Object.prototype.toString;function g(n){return"[object Object]"===d.call(n)}function u(n){return"[object RegExp]"===d.call(n)}function m(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function b(n){return o(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function f(n){return null==n?"":Array.isArray(n)||g(n)&&n.toString===d?JSON.stringify(n,h,2):String(n)}function h(n,e){return e&&e.__v_isRef?e.value:e}function v(n){var e=parseFloat(n);return isNaN(e)?n:e}function y(n,e){for(var t=Object.create(null),r=n.split(","),a=0;a<r.length;a++)t[r[a]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}y("slot,component",!0);var x=y("key,ref,slot,slot-scope,is");function w(n,e){var t=n.length;if(t){if(e===n[t-1])return void(n.length=t-1);var r=n.indexOf(e);if(r>-1)return n.splice(r,1)}}var S=Object.prototype.hasOwnProperty;function k(n,e){return S.call(n,e)}function j(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var C=/-(\w)/g,T=j((function(n){return n.replace(C,(function(n,e){return e?e.toUpperCase():""}))})),A=j((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),B=/\B([A-Z])/g,I=j((function(n){return n.replace(B,"-$1").toLowerCase()}));var E=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function P(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function _(n,e){for(var t in e)n[t]=e[t];return n}function M(n){for(var e={},t=0;t<n.length;t++)n[t]&&_(e,n[t]);return e}function R(n,e,t){}var D=function(n,e,t){return!1},z=function(n){return n};function O(n,e){if(n===e)return!0;var t=c(n),r=c(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var a=Array.isArray(n),i=Array.isArray(e);if(a&&i)return n.length===e.length&&n.every((function(n,t){return O(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(a||i)return!1;var o=Object.keys(n),s=Object.keys(e);return o.length===s.length&&o.every((function(t){return O(n[t],e[t])}))}catch(n){return!1}}function L(n,e){for(var t=0;t<n.length;t++)if(O(n[t],e))return t;return-1}function J(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}function q(n,e){return n===e?0===n&&1/n!=1/e:n==n||e==e}var F=["component","directive","filter"],U=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],N={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:R,parsePlatformTagName:z,mustUseProp:D,async:!0,_lifecycleHooks:U},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function V(n){var e=(n+"").charCodeAt(0);return 36===e||95===e}function $(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var W=new RegExp("[^".concat(H.source,".$_\\d]"));var X="__proto__"in{},G="undefined"!=typeof window,Q=G&&window.navigator.userAgent.toLowerCase(),Y=Q&&/msie|trident/.test(Q),Z=Q&&Q.indexOf("msie 9.0")>0,K=Q&&Q.indexOf("edge/")>0;Q&&Q.indexOf("android");var nn=Q&&/iphone|ipad|ipod|ios/.test(Q);Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q);var en,tn=Q&&Q.match(/firefox\/(\d+)/),rn={}.watch,an=!1;if(G)try{var on={};Object.defineProperty(on,"passive",{get:function(){an=!0}}),window.addEventListener("test-passive",null,on)}catch(n){}var sn=function(){return void 0===en&&(en=!G&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),en},ln=G&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function pn(n){return"function"==typeof n&&/native code/.test(n.toString())}var cn,dn="undefined"!=typeof Symbol&&pn(Symbol)&&"undefined"!=typeof Reflect&&pn(Reflect.ownKeys);cn="undefined"!=typeof Set&&pn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var gn=null;function un(n){void 0===n&&(n=null),n||gn&&gn._scope.off(),gn=n,n&&n._scope.on()}var mn=function(){function n(n,e,t,r,a,i,o,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=a,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(n.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),n}(),bn=function(n){void 0===n&&(n="");var e=new mn;return e.text=n,e.isComment=!0,e};function fn(n){return new mn(void 0,void 0,void 0,String(n))}function hn(n){var e=new mn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}"function"==typeof SuppressedError&&SuppressedError;var vn=0,yn=[],xn=function(){function n(){this._pending=!1,this.id=vn++,this.subs=[]}return n.prototype.addSub=function(n){this.subs.push(n)},n.prototype.removeSub=function(n){this.subs[this.subs.indexOf(n)]=null,this._pending||(this._pending=!0,yn.push(this))},n.prototype.depend=function(e){n.target&&n.target.addDep(this)},n.prototype.notify=function(n){var e=this.subs.filter((function(n){return n}));for(var t=0,r=e.length;t<r;t++){0,e[t].update()}},n}();xn.target=null;var wn=[];function Sn(n){wn.push(n),xn.target=n}function kn(){wn.pop(),xn.target=wn[wn.length-1]}var jn=Array.prototype,Cn=Object.create(jn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=jn[n];$(Cn,n,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a,i=e.apply(this,t),o=this.__ob__;switch(n){case"push":case"unshift":a=t;break;case"splice":a=t.slice(2)}return a&&o.observeArray(a),o.dep.notify(),i}))}));var Tn=Object.getOwnPropertyNames(Cn),An={},Bn=!0;function In(n){Bn=n}var En={notify:R,depend:R,addSub:R,removeSub:R},Pn=function(){function n(n,e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.value=n,this.shallow=e,this.mock=t,this.dep=t?En:new xn,this.vmCount=0,$(n,"__ob__",this),a(n)){if(!t)if(X)n.__proto__=Cn;else for(var r=0,i=Tn.length;r<i;r++){$(n,s=Tn[r],Cn[s])}e||this.observeArray(n)}else{var o=Object.keys(n);for(r=0;r<o.length;r++){var s;Mn(n,s=o[r],An,void 0,e,t)}}}return n.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)_n(n[e],!1,this.mock)},n}();function _n(n,e,t){return n&&k(n,"__ob__")&&n.__ob__ instanceof Pn?n.__ob__:!Bn||!t&&sn()||!a(n)&&!g(n)||!Object.isExtensible(n)||n.__v_skip||qn(n)||n instanceof mn?void 0:new Pn(n,e,t)}function Mn(n,e,t,r,i,o,s){void 0===s&&(s=!1);var l=new xn,p=Object.getOwnPropertyDescriptor(n,e);if(!p||!1!==p.configurable){var c=p&&p.get,d=p&&p.set;c&&!d||t!==An&&2!==arguments.length||(t=n[e]);var g=i?t&&t.__ob__:_n(t,!1,o);return Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=c?c.call(n):t;return xn.target&&(l.depend(),g&&(g.dep.depend(),a(e)&&zn(e))),qn(e)&&!i?e.value:e},set:function(e){var r=c?c.call(n):t;if(q(r,e)){if(d)d.call(n,e);else{if(c)return;if(!i&&qn(r)&&!qn(e))return void(r.value=e);t=e}g=i?e&&e.__ob__:_n(e,!1,o),l.notify()}}}),l}}function Rn(n,e,t){if(!Jn(n)){var r=n.__ob__;return a(n)&&m(e)?(n.length=Math.max(n.length,e),n.splice(e,1,t),r&&!r.shallow&&r.mock&&_n(t,!1,!0),t):e in n&&!(e in Object.prototype)?(n[e]=t,t):n._isVue||r&&r.vmCount?t:r?(Mn(r.value,e,t,void 0,r.shallow,r.mock),r.dep.notify(),t):(n[e]=t,t)}}function Dn(n,e){if(a(n)&&m(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||Jn(n)||k(n,e)&&(delete n[e],t&&t.dep.notify())}}function zn(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),a(e)&&zn(e)}function On(n){return Ln(n,!0),$(n,"__v_isShallow",!0),n}function Ln(n,e){if(!Jn(n)){_n(n,e,sn());0}}function Jn(n){return!(!n||!n.__v_isReadonly)}function qn(n){return!(!n||!0!==n.__v_isRef)}function Fn(n,e,t){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var n=e[t];if(qn(n))return n.value;var r=n&&n.__ob__;return r&&r.dep.depend(),n},set:function(n){var r=e[t];qn(r)&&!qn(n)?r.value=n:e[t]=n}})}"".concat("watcher"," callback"),"".concat("watcher"," getter"),"".concat("watcher"," cleanup");var Un;var Nn=function(){function n(n){void 0===n&&(n=!1),this.detached=n,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Un,!n&&Un&&(this.index=(Un.scopes||(Un.scopes=[])).push(this)-1)}return n.prototype.run=function(n){if(this.active){var e=Un;try{return Un=this,n()}finally{Un=e}}else 0},n.prototype.on=function(){Un=this},n.prototype.off=function(){Un=this.parent},n.prototype.stop=function(n){if(this.active){var e=void 0,t=void 0;for(e=0,t=this.effects.length;e<t;e++)this.effects[e].teardown();for(e=0,t=this.cleanups.length;e<t;e++)this.cleanups[e]();if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!n){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}},n}();function Hn(n){var e=n._provided,t=n.$parent&&n.$parent._provided;return t===e?n._provided=Object.create(t):e}var Vn=j((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function $n(n,e){function t(){var n=t.fns;if(!a(n))return Be(n,null,arguments,e,"v-on handler");for(var r=n.slice(),i=0;i<r.length;i++)Be(r[i],null,arguments,e,"v-on handler")}return t.fns=n,t}function Wn(n,e,t,r,a,o){var l,p,c,d;for(l in n)p=n[l],c=e[l],d=Vn(l),i(p)||(i(c)?(i(p.fns)&&(p=n[l]=$n(p,o)),s(d.once)&&(p=n[l]=a(d.name,p,d.capture)),t(d.name,p,d.capture,d.passive,d.params)):p!==c&&(c.fns=p,n[l]=c));for(l in e)i(n[l])&&r((d=Vn(l)).name,e[l],d.capture)}function Xn(n,e,t){var r;n instanceof mn&&(n=n.data.hook||(n.data.hook={}));var a=n[e];function l(){t.apply(this,arguments),w(r.fns,l)}i(a)?r=$n([l]):o(a.fns)&&s(a.merged)?(r=a).fns.push(l):r=$n([a,l]),r.merged=!0,n[e]=r}function Gn(n,e,t,r,a){if(o(e)){if(k(e,t))return n[t]=e[t],a||delete e[t],!0;if(k(e,r))return n[t]=e[r],a||delete e[r],!0}return!1}function Qn(n){return l(n)?[fn(n)]:a(n)?function n(e,t){var r,p,c,d,g=[];for(r=0;r<e.length;r++)i(p=e[r])||"boolean"==typeof p||(c=g.length-1,d=g[c],a(p)?p.length>0&&(Yn((p=n(p,"".concat(t||"","_").concat(r)))[0])&&Yn(d)&&(g[c]=fn(d.text+p[0].text),p.shift()),g.push.apply(g,p)):l(p)?Yn(d)?g[c]=fn(d.text+p):""!==p&&g.push(fn(p)):Yn(p)&&Yn(d)?g[c]=fn(d.text+p.text):(s(e._isVList)&&o(p.tag)&&i(p.key)&&o(t)&&(p.key="__vlist".concat(t,"_").concat(r,"__")),g.push(p)));return g}(n):void 0}function Yn(n){return o(n)&&o(n.text)&&!1===n.isComment}function Zn(n,e){var t,r,i,s,l=null;if(a(n)||"string"==typeof n)for(l=new Array(n.length),t=0,r=n.length;t<r;t++)l[t]=e(n[t],t);else if("number"==typeof n)for(l=new Array(n),t=0;t<n;t++)l[t]=e(t+1,t);else if(c(n))if(dn&&n[Symbol.iterator]){l=[];for(var p=n[Symbol.iterator](),d=p.next();!d.done;)l.push(e(d.value,l.length)),d=p.next()}else for(i=Object.keys(n),l=new Array(i.length),t=0,r=i.length;t<r;t++)s=i[t],l[t]=e(n[s],s,t);return o(l)||(l=[]),l._isVList=!0,l}function Kn(n,e,t,r){var a,i=this.$scopedSlots[n];i?(t=t||{},r&&(t=_(_({},r),t)),a=i(t)||(p(e)?e():e)):a=this.$slots[n]||(p(e)?e():e);var o=t&&t.slot;return o?this.$createElement("template",{slot:o},a):a}function ne(n){return Pt(this.$options,"filters",n,!0)||z}function ee(n,e){return a(n)?-1===n.indexOf(e):n!==e}function te(n,e,t,r,a){var i=N.keyCodes[e]||t;return a&&r&&!N.keyCodes[e]?ee(a,r):i?ee(i,n):r?I(r)!==e:void 0===n}function re(n,e,t,r,i){if(t)if(c(t)){a(t)&&(t=M(t));var o=void 0,s=function(a){if("class"===a||"style"===a||x(a))o=n;else{var s=n.attrs&&n.attrs.type;o=r||N.mustUseProp(e,s,a)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var l=T(a),p=I(a);l in o||p in o||(o[a]=t[a],i&&((n.on||(n.on={}))["update:".concat(a)]=function(n){t[a]=n}))};for(var l in t)s(l)}else;return n}function ae(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||oe(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,this._c,this),"__static__".concat(n),!1),r}function ie(n,e,t){return oe(n,"__once__".concat(e).concat(t?"_".concat(t):""),!0),n}function oe(n,e,t){if(a(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&se(n[r],"".concat(e,"_").concat(r),t);else se(n,e,t)}function se(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function le(n,e){if(e)if(g(e)){var t=n.on=n.on?_({},n.on):{};for(var r in e){var a=t[r],i=e[r];t[r]=a?[].concat(a,i):i}}else;return n}function pe(n,e,t,r){e=e||{$stable:!t};for(var i=0;i<n.length;i++){var o=n[i];a(o)?pe(o,e,t):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function ce(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function de(n,e){return"string"==typeof n?e+n:n}function ge(n){n._o=ie,n._n=v,n._s=f,n._l=Zn,n._t=Kn,n._q=O,n._i=L,n._m=ae,n._f=ne,n._k=te,n._b=re,n._v=fn,n._e=bn,n._u=pe,n._g=le,n._d=ce,n._p=de}function ue(n,e){if(!n||!n.length)return{};for(var t={},r=0,a=n.length;r<a;r++){var i=n[r],o=i.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,i.context!==e&&i.fnContext!==e||!o||null==o.slot)(t.default||(t.default=[])).push(i);else{var s=o.slot,l=t[s]||(t[s]=[]);"template"===i.tag?l.push.apply(l,i.children||[]):l.push(i)}}for(var p in t)t[p].every(me)&&delete t[p];return t}function me(n){return n.isComment&&!n.asyncFactory||" "===n.text}function be(n){return n.isComment&&n.asyncFactory}function fe(n,e,t,a){var i,o=Object.keys(t).length>0,s=e?!!e.$stable:!o,l=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&a&&a!==r&&l===a.$key&&!o&&!a.$hasNormal)return a;for(var p in i={},e)e[p]&&"$"!==p[0]&&(i[p]=he(n,t,p,e[p]))}else i={};for(var c in t)c in i||(i[c]=ve(t,c));return e&&Object.isExtensible(e)&&(e._normalized=i),$(i,"$stable",s),$(i,"$key",l),$(i,"$hasNormal",o),i}function he(n,e,t,r){var i=function(){var e=gn;un(n);var t=arguments.length?r.apply(null,arguments):r({}),i=(t=t&&"object"==typeof t&&!a(t)?[t]:Qn(t))&&t[0];return un(e),t&&(!i||1===t.length&&i.isComment&&!be(i))?void 0:t};return r.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function ve(n,e){return function(){return n[e]}}function ye(n){return{get attrs(){if(!n._attrsProxy){var e=n._attrsProxy={};$(e,"_v_attr_proxy",!0),xe(e,n.$attrs,r,n,"$attrs")}return n._attrsProxy},get listeners(){n._listenersProxy||xe(n._listenersProxy={},n.$listeners,r,n,"$listeners");return n._listenersProxy},get slots(){return function(n){n._slotsProxy||Se(n._slotsProxy={},n.$scopedSlots);return n._slotsProxy}(n)},emit:E(n.$emit,n),expose:function(e){e&&Object.keys(e).forEach((function(t){return Fn(n,e,t)}))}}}function xe(n,e,t,r,a){var i=!1;for(var o in e)o in n?e[o]!==t[o]&&(i=!0):(i=!0,we(n,o,r,a));for(var o in n)o in e||(i=!0,delete n[o]);return i}function we(n,e,t,r){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){return t[r][e]}})}function Se(n,e){for(var t in e)n[t]=e[t];for(var t in n)t in e||delete n[t]}var ke=null;function je(n,e){return(n.__esModule||dn&&"Module"===n[Symbol.toStringTag])&&(n=n.default),c(n)?e.extend(n):n}function Ce(n){if(a(n))for(var e=0;e<n.length;e++){var t=n[e];if(o(t)&&(o(t.componentOptions)||be(t)))return t}}function Te(n,e,t,r,d,g){return(a(t)||l(t))&&(d=r,r=t,t=void 0),s(g)&&(d=2),function(n,e,t,r,l){if(o(t)&&o(t.__ob__))return bn();o(t)&&o(t.is)&&(e=t.is);if(!e)return bn();0;a(r)&&p(r[0])&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===l?r=Qn(r):1===l&&(r=function(n){for(var e=0;e<n.length;e++)if(a(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var d,g;if("string"==typeof e){var u=void 0;g=n.$vnode&&n.$vnode.ns||N.getTagNamespace(e),d=N.isReservedTag(e)?new mn(N.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!o(u=Pt(n.$options,"components",e))?new mn(e,t,r,void 0,void 0,n):wt(u,t,n,r,e)}else d=wt(e,t,n,r);return a(d)?d:o(d)?(o(g)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(o(e.children))for(var a=0,l=e.children.length;a<l;a++){var p=e.children[a];o(p.tag)&&(i(p.ns)||s(r)&&"svg"!==p.tag)&&n(p,t,r)}}(d,g),o(t)&&function(n){c(n.style)&&Ne(n.style);c(n.class)&&Ne(n.class)}(t),d):bn()}(n,e,t,r,d)}function Ae(n,e,t){Sn();try{if(e)for(var r=e;r=r.$parent;){var a=r.$options.errorCaptured;if(a)for(var i=0;i<a.length;i++)try{if(!1===a[i].call(r,n,e,t))return}catch(n){Ie(n,r,"errorCaptured hook")}}Ie(n,e,t)}finally{kn()}}function Be(n,e,t,r,a){var i;try{(i=t?n.apply(e,t):n.call(e))&&!i._isVue&&b(i)&&!i._handled&&(i.catch((function(n){return Ae(n,r,a+" (Promise/async)")})),i._handled=!0)}catch(n){Ae(n,r,a)}return i}function Ie(n,e,t){if(N.errorHandler)try{return N.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Ee(e,null,"config.errorHandler")}Ee(n,e,t)}function Ee(n,e,t){if(!G||"undefined"==typeof console)throw n;console.error(n)}var Pe,_e=!1,Me=[],Re=!1;function De(){Re=!1;var n=Me.slice(0);Me.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&pn(Promise)){var ze=Promise.resolve();Pe=function(){ze.then(De),nn&&setTimeout(R)},_e=!0}else if(Y||"undefined"==typeof MutationObserver||!pn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Pe="undefined"!=typeof setImmediate&&pn(setImmediate)?function(){setImmediate(De)}:function(){setTimeout(De,0)};else{var Oe=1,Le=new MutationObserver(De),Je=document.createTextNode(String(Oe));Le.observe(Je,{characterData:!0}),Pe=function(){Oe=(Oe+1)%2,Je.data=String(Oe)},_e=!0}function qe(n,e){var t;if(Me.push((function(){if(n)try{n.call(e)}catch(n){Ae(n,e,"nextTick")}else t&&t(e)})),Re||(Re=!0,Pe()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}function Fe(n){return function(e,t){if(void 0===t&&(t=gn),t)return function(n,e,t){var r=n.$options;r[e]=At(r[e],t)}(t,n,e)}}Fe("beforeMount"),Fe("mounted"),Fe("beforeUpdate"),Fe("updated"),Fe("beforeDestroy"),Fe("destroyed"),Fe("activated"),Fe("deactivated"),Fe("serverPrefetch"),Fe("renderTracked"),Fe("renderTriggered"),Fe("errorCaptured");var Ue=new cn;function Ne(n){return function n(e,t){var r,i,o=a(e);if(!o&&!c(e)||e.__v_skip||Object.isFrozen(e)||e instanceof mn)return;if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(r=e.length;r--;)n(e[r],t);else if(qn(e))n(e.value,t);else for(i=Object.keys(e),r=i.length;r--;)n(e[i[r]],t)}(n,Ue),Ue.clear(),n}var He,Ve=0,$e=function(){function n(n,e,t,r,a){var i,o;i=this,void 0===(o=Un&&!Un._vm?Un:n?n._scope:void 0)&&(o=Un),o&&o.active&&o.effects.push(i),(this.vm=n)&&a&&(n._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++Ve,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cn,this.newDepIds=new cn,this.expression="",p(e)?this.getter=e:(this.getter=function(n){if(!W.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=R)),this.value=this.lazy?void 0:this.get()}return n.prototype.get=function(){var n;Sn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Ae(n,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Ne(n),kn(),this.cleanupDeps()}return n},n.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},n.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},n.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ut(this)},n.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||c(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'.concat(this.expression,'"');Be(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},n.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},n.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},n.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&w(this.vm._scope.effects,this),this.active){for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},n}();function We(n,e){He.$on(n,e)}function Xe(n,e){He.$off(n,e)}function Ge(n,e){var t=He;return function r(){var a=e.apply(null,arguments);null!==a&&t.$off(n,r)}}function Qe(n,e,t){He=n,Wn(e,t||{},We,Xe,Ge,n),He=void 0}var Ye=null;function Ze(n){var e=Ye;return Ye=n,function(){Ye=e}}function Ke(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function nt(n,e){if(e){if(n._directInactive=!1,Ke(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)nt(n.$children[t]);et(n,"activated")}}function et(n,e,t,r){void 0===r&&(r=!0),Sn();var a=gn,i=Un;r&&un(n);var o=n.$options[e],s="".concat(e," hook");if(o)for(var l=0,p=o.length;l<p;l++)Be(o[l],n,t||null,n,s);n._hasHookEvent&&n.$emit("hook:"+e),r&&(un(a),i&&i.on()),kn()}var tt=[],rt=[],at={},it=!1,ot=!1,st=0;var lt=0,pt=Date.now;if(G&&!Y){var ct=window.performance;ct&&"function"==typeof ct.now&&pt()>document.createEvent("Event").timeStamp&&(pt=function(){return ct.now()})}var dt=function(n,e){if(n.post){if(!e.post)return 1}else if(e.post)return-1;return n.id-e.id};function gt(){var n,e;for(lt=pt(),ot=!0,tt.sort(dt),st=0;st<tt.length;st++)(n=tt[st]).before&&n.before(),e=n.id,at[e]=null,n.run();var t=rt.slice(),r=tt.slice();st=tt.length=rt.length=0,at={},it=ot=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,nt(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r&&r._watcher===t&&r._isMounted&&!r._isDestroyed&&et(r,"updated")}}(r),function(){for(var n=0;n<yn.length;n++){var e=yn[n];e.subs=e.subs.filter((function(n){return n})),e._pending=!1}yn.length=0}(),ln&&N.devtools&&ln.emit("flush")}function ut(n){var e=n.id;if(null==at[e]&&(n!==xn.target||!n.noRecurse)){if(at[e]=!0,ot){for(var t=tt.length-1;t>st&&tt[t].id>n.id;)t--;tt.splice(t+1,0,n)}else tt.push(n);it||(it=!0,qe(gt))}}function mt(n,e){if(n){for(var t=Object.create(null),r=dn?Reflect.ownKeys(n):Object.keys(n),a=0;a<r.length;a++){var i=r[a];if("__ob__"!==i){var o=n[i].from;if(o in e._provided)t[i]=e._provided[o];else if("default"in n[i]){var s=n[i].default;t[i]=p(s)?s.call(e):s}else 0}}return t}}function bt(n,e,t,i,o){var l,p=this,c=o.options;k(i,"_uid")?(l=Object.create(i))._original=i:(l=i,i=i._original);var d=s(c._compiled),g=!d;this.data=n,this.props=e,this.children=t,this.parent=i,this.listeners=n.on||r,this.injections=mt(c.inject,i),this.slots=function(){return p.$slots||fe(i,n.scopedSlots,p.$slots=ue(t,i)),p.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return fe(i,n.scopedSlots,this.slots())}}),d&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=fe(i,n.scopedSlots,this.$slots)),c._scopeId?this._c=function(n,e,t,r){var o=Te(l,n,e,t,r,g);return o&&!a(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(n,e,t,r){return Te(l,n,e,t,r,g)}}function ft(n,e,t,r,a){var i=hn(n);return i.fnContext=t,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function ht(n,e){for(var t in e)n[T(t)]=e[t]}function vt(n){return n.name||n.__name||n._componentTag}ge(bt.prototype);var yt={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;yt.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;o(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Ye)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,a,i){var o=a.data.scopedSlots,s=n.$scopedSlots,l=!!(o&&!o.$stable||s!==r&&!s.$stable||o&&n.$scopedSlots.$key!==o.$key||!o&&n.$scopedSlots.$key),p=!!(i||n.$options._renderChildren||l),c=n.$vnode;n.$options._parentVnode=a,n.$vnode=a,n._vnode&&(n._vnode.parent=a),n.$options._renderChildren=i;var d=a.data.attrs||r;n._attrsProxy&&xe(n._attrsProxy,d,c.data&&c.data.attrs||r,n,"$attrs")&&(p=!0),n.$attrs=d,t=t||r;var g=n.$options._parentListeners;if(n._listenersProxy&&xe(n._listenersProxy,t,g||r,n,"$listeners"),n.$listeners=n.$options._parentListeners=t,Qe(n,t,g),e&&n.$options.props){In(!1);for(var u=n._props,m=n.$options._propKeys||[],b=0;b<m.length;b++){var f=m[b],h=n.$options.props;u[f]=_t(f,h,e,n)}In(!0),n.$options.propsData=e}p&&(n.$slots=ue(i,a.context),n.$forceUpdate())}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,et(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,rt.push(e)):nt(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(!(t&&(e._directInactive=!0,Ke(e))||e._inactive)){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);et(e,"deactivated")}}(e,!0):e.$destroy())}},xt=Object.keys(yt);function wt(n,e,t,l,p){if(!i(n)){var d=t.$options._base;if(c(n)&&(n=d.extend(n)),"function"==typeof n){var g;if(i(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&o(n.errorComp))return n.errorComp;if(o(n.resolved))return n.resolved;var t=ke;if(t&&o(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t),s(n.loading)&&o(n.loadingComp))return n.loadingComp;if(t&&!o(n.owners)){var r=n.owners=[t],a=!0,l=null,p=null;t.$on("hook:destroyed",(function(){return w(r,t)}));var d=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==l&&(clearTimeout(l),l=null),null!==p&&(clearTimeout(p),p=null))},g=J((function(t){n.resolved=je(t,e),a?r.length=0:d(!0)})),u=J((function(e){o(n.errorComp)&&(n.error=!0,d(!0))})),m=n(g,u);return c(m)&&(b(m)?i(n.resolved)&&m.then(g,u):b(m.component)&&(m.component.then(g,u),o(m.error)&&(n.errorComp=je(m.error,e)),o(m.loading)&&(n.loadingComp=je(m.loading,e),0===m.delay?n.loading=!0:l=setTimeout((function(){l=null,i(n.resolved)&&i(n.error)&&(n.loading=!0,d(!1))}),m.delay||200)),o(m.timeout)&&(p=setTimeout((function(){p=null,i(n.resolved)&&u(null)}),m.timeout)))),a=!1,n.loading?n.loadingComp:n.resolved}}(g=n,d)))return function(n,e,t,r,a){var i=bn();return i.asyncFactory=n,i.asyncMeta={data:e,context:t,children:r,tag:a},i}(g,e,t,l,p);e=e||{},$t(n),o(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var i=e.on||(e.on={}),s=i[r],l=e.model.callback;o(s)?(a(s)?-1===s.indexOf(l):s!==l)&&(i[r]=[l].concat(s)):i[r]=l}(n.options,e);var u=function(n,e,t){var r=e.options.props;if(!i(r)){var a={},s=n.attrs,l=n.props;if(o(s)||o(l))for(var p in r){var c=I(p);Gn(a,l,p,c,!0)||Gn(a,s,p,c,!1)}return a}}(e,n);if(s(n.options.functional))return function(n,e,t,i,s){var l=n.options,p={},c=l.props;if(o(c))for(var d in c)p[d]=_t(d,c,e||r);else o(t.attrs)&&ht(p,t.attrs),o(t.props)&&ht(p,t.props);var g=new bt(t,p,s,i,n),u=l.render.call(null,g._c,g);if(u instanceof mn)return ft(u,t,g.parent,l,g);if(a(u)){for(var m=Qn(u)||[],b=new Array(m.length),f=0;f<m.length;f++)b[f]=ft(m[f],t,g.parent,l,g);return b}}(n,u,e,t,l);var m=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<xt.length;t++){var r=xt[t],a=e[r],i=yt[r];a===i||a&&a._merged||(e[r]=a?St(i,a):i)}}(e);var h=vt(n.options)||p;return new mn("vue-component-".concat(n.cid).concat(h?"-".concat(h):""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:u,listeners:m,tag:p,children:l},g)}}}function St(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}var kt=R,jt=N.optionMergeStrategies;function Ct(n,e,t){if(void 0===t&&(t=!0),!e)return n;for(var r,a,i,o=dn?Reflect.ownKeys(e):Object.keys(e),s=0;s<o.length;s++)"__ob__"!==(r=o[s])&&(a=n[r],i=e[r],t&&k(n,r)?a!==i&&g(a)&&g(i)&&Ct(a,i):Rn(n,r,i));return n}function Tt(n,e,t){return t?function(){var r=p(e)?e.call(t,t):e,a=p(n)?n.call(t,t):n;return r?Ct(r,a):a}:e?n?function(){return Ct(p(e)?e.call(this,this):e,p(n)?n.call(this,this):n)}:e:n}function At(n,e){var t=e?n?n.concat(e):a(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Bt(n,e,t,r){var a=Object.create(n||null);return e?_(a,e):a}jt.data=function(n,e,t){return t?Tt(n,e,t):e&&"function"!=typeof e?n:Tt(n,e)},U.forEach((function(n){jt[n]=At})),F.forEach((function(n){jt[n+"s"]=Bt})),jt.watch=function(n,e,t,r){if(n===rn&&(n=void 0),e===rn&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var i={};for(var o in _(i,n),e){var s=i[o],l=e[o];s&&!a(s)&&(s=[s]),i[o]=s?s.concat(l):a(l)?l:[l]}return i},jt.props=jt.methods=jt.inject=jt.computed=function(n,e,t,r){if(!n)return e;var a=Object.create(null);return _(a,n),e&&_(a,e),a},jt.provide=function(n,e){return n?function(){var t=Object.create(null);return Ct(t,p(n)?n.call(this):n),e&&Ct(t,p(e)?e.call(this):e,!1),t}:e};var It=function(n,e){return void 0===e?n:e};function Et(n,e,t){if(p(e)&&(e=e.options),function(n,e){var t=n.props;if(t){var r,i,o={};if(a(t))for(r=t.length;r--;)"string"==typeof(i=t[r])&&(o[T(i)]={type:null});else if(g(t))for(var s in t)i=t[s],o[T(s)]=g(i)?i:{type:i};else 0;n.props=o}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(a(t))for(var i=0;i<t.length;i++)r[t[i]]={from:t[i]};else if(g(t))for(var o in t){var s=t[o];r[o]=g(s)?_({from:o},s):{from:s}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];p(r)&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=Et(n,e.extends,t)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)n=Et(n,e.mixins[r],t);var o,s={};for(o in n)l(o);for(o in e)k(n,o)||l(o);function l(r){var a=jt[r]||It;s[r]=a(n[r],e[r],t,r)}return s}function Pt(n,e,t,r){if("string"==typeof t){var a=n[e];if(k(a,t))return a[t];var i=T(t);if(k(a,i))return a[i];var o=A(i);return k(a,o)?a[o]:a[t]||a[i]||a[o]}}function _t(n,e,t,r){var a=e[n],i=!k(t,n),o=t[n],s=zt(Boolean,a.type);if(s>-1)if(i&&!k(a,"default"))o=!1;else if(""===o||o===I(n)){var l=zt(String,a.type);(l<0||s<l)&&(o=!0)}if(void 0===o){o=function(n,e,t){if(!k(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return p(r)&&"Function"!==Rt(e.type)?r.call(n):r}(r,a,n);var c=Bn;In(!0),_n(o),In(c)}return o}var Mt=/^\s*function (\w+)/;function Rt(n){var e=n&&n.toString().match(Mt);return e?e[1]:""}function Dt(n,e){return Rt(n)===Rt(e)}function zt(n,e){if(!a(e))return Dt(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Dt(e[t],n))return t;return-1}var Ot={enumerable:!0,configurable:!0,get:R,set:R};function Lt(n,e,t){Ot.get=function(){return this[e][t]},Ot.set=function(n){this[e][t]=n},Object.defineProperty(n,t,Ot)}function Jt(n){var e=n.$options;if(e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props=On({}),a=n.$options._propKeys=[];n.$parent&&In(!1);var i=function(i){a.push(i);var o=_t(i,e,t,n);Mn(r,i,o,void 0,!0),i in n||Lt(n,"_props",i)};for(var o in e)i(o);In(!0)}(n,e.props),function(n){var e=n.$options,t=e.setup;if(t){var r=n._setupContext=ye(n);un(n),Sn();var a=Be(t,null,[n._props||On({}),r],n,"setup");if(kn(),un(),p(a))e.render=a;else if(c(a))if(n._setupState=a,a.__sfc){var i=n._setupProxy={};for(var o in a)"__sfc"!==o&&Fn(i,a,o)}else for(var o in a)V(o)||Fn(n,a,o);else 0}}(n),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?R:E(e[t],n)}(n,e.methods),e.data)!function(n){var e=n.$options.data;g(e=n._data=p(e)?function(n,e){Sn();try{return n.call(e,e)}catch(n){return Ae(n,e,"data()"),{}}finally{kn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,a=(n.$options.methods,t.length);for(;a--;){var i=t[a];0,r&&k(r,i)||V(i)||Lt(n,"_data",i)}var o=_n(e);o&&o.vmCount++}(n);else{var t=_n(n._data={});t&&t.vmCount++}e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=sn();for(var a in e){var i=e[a],o=p(i)?i:i.get;0,r||(t[a]=new $e(n,o||R,R,qt)),a in n||Ft(n,a,i)}}(n,e.computed),e.watch&&e.watch!==rn&&function(n,e){for(var t in e){var r=e[t];if(a(r))for(var i=0;i<r.length;i++)Ht(n,t,r[i]);else Ht(n,t,r)}}(n,e.watch)}var qt={lazy:!0};function Ft(n,e,t){var r=!sn();p(t)?(Ot.get=r?Ut(e):Nt(t),Ot.set=R):(Ot.get=t.get?r&&!1!==t.cache?Ut(e):Nt(t.get):R,Ot.set=t.set||R),Object.defineProperty(n,e,Ot)}function Ut(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),xn.target&&e.depend(),e.value}}function Nt(n){return function(){return n.call(this,this)}}function Ht(n,e,t,r){return g(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var Vt=0;function $t(n){var e=n.options;if(n.super){var t=$t(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var a in t)t[a]!==r[a]&&(e||(e={}),e[a]=t[a]);return e}(n);r&&_(n.extendOptions,r),(e=n.options=Et(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Wt(n){this._init(n)}function Xt(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,a=n._Ctor||(n._Ctor={});if(a[r])return a[r];var i=vt(n)||vt(t.options);var o=function(n){this._init(n)};return(o.prototype=Object.create(t.prototype)).constructor=o,o.cid=e++,o.options=Et(t.options,n),o.super=t,o.options.props&&function(n){var e=n.options.props;for(var t in e)Lt(n.prototype,"_props",t)}(o),o.options.computed&&function(n){var e=n.options.computed;for(var t in e)Ft(n.prototype,t,e[t])}(o),o.extend=t.extend,o.mixin=t.mixin,o.use=t.use,F.forEach((function(n){o[n]=t[n]})),i&&(o.options.components[i]=o),o.superOptions=t.options,o.extendOptions=n,o.sealedOptions=_({},o.options),a[r]=o,o}}function Gt(n){return n&&(vt(n.Ctor.options)||n.tag)}function Qt(n,e){return a(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!u(n)&&n.test(e)}function Yt(n,e){var t=n.cache,r=n.keys,a=n._vnode,i=n.$vnode;for(var o in t){var s=t[o];if(s){var l=s.name;l&&!e(l)&&Zt(t,o,r,a)}}i.componentOptions.children=void 0}function Zt(n,e,t,r){var a=n[e];!a||r&&a.tag===r.tag||a.componentInstance.$destroy(),n[e]=null,w(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=Vt++,e._isVue=!0,e.__v_skip=!0,e._scope=new Nn(!0),e._scope.parent=void 0,e._scope._vm=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var a=r.componentOptions;t.propsData=a.propsData,t._parentListeners=a.listeners,t._renderChildren=a.children,t._componentTag=a.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=Et($t(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._provided=t?t._provided:Object.create(null),n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Qe(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,a=t&&t.context;n.$slots=ue(e._renderChildren,a),n.$scopedSlots=t?fe(n.$parent,t.data.scopedSlots,n.$slots):r,n._c=function(e,t,r,a){return Te(n,e,t,r,a,!1)},n.$createElement=function(e,t,r,a){return Te(n,e,t,r,a,!0)};var i=t&&t.data;Mn(n,"$attrs",i&&i.attrs||r,null,!0),Mn(n,"$listeners",e._parentListeners||r,null,!0)}(e),et(e,"beforeCreate",void 0,!1),function(n){var e=mt(n.$options.inject,n);e&&(In(!1),Object.keys(e).forEach((function(t){Mn(n,t,e[t])})),In(!0))}(e),Jt(e),function(n){var e=n.$options.provide;if(e){var t=p(e)?e.call(n):e;if(!c(t))return;for(var r=Hn(n),a=dn?Reflect.ownKeys(t):Object.keys(t),i=0;i<a.length;i++){var o=a[i];Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))}}}(e),et(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Wt),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=Rn,n.prototype.$delete=Dn,n.prototype.$watch=function(n,e,t){if(g(e))return Ht(this,n,e,t);(t=t||{}).user=!0;var r=new $e(this,n,e,t);if(t.immediate){var a='callback for immediate watcher "'.concat(r.expression,'"');Sn(),Be(e,this,[r.value],this,a),kn()}return function(){r.teardown()}}}(Wt),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(a(n))for(var i=0,o=n.length;i<o;i++)r.$on(n[i],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(a(n)){for(var r=0,i=n.length;r<i;r++)t.$off(n[r],e);return t}var o,s=t._events[n];if(!s)return t;if(!e)return t._events[n]=null,t;for(var l=s.length;l--;)if((o=s[l])===e||o.fn===e){s.splice(l,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?P(t):t;for(var r=P(arguments,1),a='event handler for "'.concat(n,'"'),i=0,o=t.length;i<o;i++)Be(t[i],e,r,e,a)}return e}}(Wt),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,a=t._vnode,i=Ze(t);t._vnode=n,t.$el=a?t.__patch__(a,n):t.__patch__(t.$el,n,e,!1),i(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t);for(var o=t;o&&o.$vnode&&o.$parent&&o.$vnode===o.$parent._vnode;)o.$parent.$el=o.$el,o=o.$parent},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){et(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||w(e.$children,n),n._scope.stop(),n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),et(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Wt),function(n){ge(n.prototype),n.prototype.$nextTick=function(n){return qe(n,this)},n.prototype._render=function(){var n=this,e=n.$options,t=e.render,r=e._parentVnode;r&&n._isMounted&&(n.$scopedSlots=fe(n.$parent,r.data.scopedSlots,n.$slots,n.$scopedSlots),n._slotsProxy&&Se(n._slotsProxy,n.$scopedSlots)),n.$vnode=r;var i,o=gn,s=ke;try{un(n),ke=n,i=t.call(n._renderProxy,n.$createElement)}catch(e){Ae(e,n,"render"),i=n._vnode}finally{ke=s,un(o)}return a(i)&&1===i.length&&(i=i[0]),i instanceof mn||(i=bn()),i.parent=r,i}}(Wt);var Kt=[String,RegExp,Array],nr={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Kt,exclude:Kt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var a=t.tag,i=t.componentInstance,o=t.componentOptions;n[r]={name:Gt(o),tag:a,componentInstance:i},e.push(r),this.max&&e.length>parseInt(this.max)&&Zt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Zt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Yt(n,(function(n){return Qt(e,n)}))})),this.$watch("exclude",(function(e){Yt(n,(function(n){return!Qt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=Ce(n),t=e&&e.componentOptions;if(t){var r=Gt(t),a=this.include,i=this.exclude;if(a&&(!r||!Qt(a,r))||i&&r&&Qt(i,r))return e;var o=this.cache,s=this.keys,l=null==e.key?t.Ctor.cid+(t.tag?"::".concat(t.tag):""):e.key;o[l]?(e.componentInstance=o[l].componentInstance,w(s,l),s.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return N}};Object.defineProperty(n,"config",e),n.util={warn:kt,extend:_,mergeOptions:Et,defineReactive:Mn},n.set=Rn,n.delete=Dn,n.nextTick=qe,n.observable=function(n){return _n(n),n},n.options=Object.create(null),F.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,_(n.options.components,nr),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=P(arguments,1);return t.unshift(this),p(n.install)?n.install.apply(n,t):p(n)&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Et(this.options,n),this}}(n),Xt(n),function(n){F.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&g(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&p(t)&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Wt),Object.defineProperty(Wt.prototype,"$isServer",{get:sn}),Object.defineProperty(Wt.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Wt,"FunctionalRenderContext",{value:bt}),Wt.version="2.7.16";var er=y("style,class"),tr=y("input,textarea,option,select,progress"),rr=y("contenteditable,draggable,spellcheck"),ar=y("events,caret,typing,plaintext-only"),ir=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),or="http://www.w3.org/1999/xlink",sr=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},lr=function(n){return sr(n)?n.slice(6,n.length):""},pr=function(n){return null==n||!1===n};function cr(n){for(var e=n.data,t=n,r=n;o(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=dr(r.data,e));for(;o(t=t.parent);)t&&t.data&&(e=dr(e,t.data));return function(n,e){if(o(n)||o(e))return gr(n,ur(e));return""}(e.staticClass,e.class)}function dr(n,e){return{staticClass:gr(n.staticClass,e.staticClass),class:o(n.class)?[n.class,e.class]:e.class}}function gr(n,e){return n?e?n+" "+e:n:e||""}function ur(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,a=n.length;r<a;r++)o(e=ur(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):c(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var mr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},br=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),fr=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),hr=function(n){return br(n)||fr(n)};var vr=Object.create(null);var yr=y("text,number,password,search,email,tel,url");var xr=Object.freeze({__proto__:null,createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(mr[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),wr={create:function(n,e){Sr(e)},update:function(n,e){n.data.ref!==e.data.ref&&(Sr(n,!0),Sr(e))},destroy:function(n){Sr(n,!0)}};function Sr(n,e){var t=n.data.ref;if(o(t)){var r=n.context,i=n.componentInstance||n.elm,s=e?null:i,l=e?void 0:i;if(p(t))Be(t,r,[s],r,"template ref function");else{var c=n.data.refInFor,d="string"==typeof t||"number"==typeof t,g=qn(t),u=r.$refs;if(d||g)if(c){var m=d?u[t]:t.value;e?a(m)&&w(m,i):a(m)?m.includes(i)||m.push(i):d?(u[t]=[i],kr(r,t,u[t])):t.value=[i]}else if(d){if(e&&u[t]!==i)return;u[t]=l,kr(r,t,s)}else if(g){if(e&&t.value!==i)return;t.value=s}else 0}}}function kr(n,e,t){var r=n._setupState;r&&k(r,e)&&(qn(r[e])?r[e].value=t:r[e]=t)}var jr=new mn("",{},[]),Cr=["create","activate","update","remove","destroy"];function Tr(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&o(n.data)===o(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=o(t=n.data)&&o(t=t.attrs)&&t.type,a=o(t=e.data)&&o(t=t.attrs)&&t.type;return r===a||yr(r)&&yr(a)}(n,e)||s(n.isAsyncPlaceholder)&&i(e.asyncFactory.error))}function Ar(n,e,t){var r,a,i={};for(r=e;r<=t;++r)o(a=n[r].key)&&(i[a]=r);return i}var Br={create:Ir,update:Ir,destroy:function(n){Ir(n,jr)}};function Ir(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,a,i=n===jr,o=e===jr,s=Pr(n.data.directives,n.context),l=Pr(e.data.directives,e.context),p=[],c=[];for(t in l)r=s[t],a=l[t],r?(a.oldValue=r.value,a.oldArg=r.arg,Mr(a,"update",e,n),a.def&&a.def.componentUpdated&&c.push(a)):(Mr(a,"bind",e,n),a.def&&a.def.inserted&&p.push(a));if(p.length){var d=function(){for(var t=0;t<p.length;t++)Mr(p[t],"inserted",e,n)};i?Xn(e,"insert",d):d()}c.length&&Xn(e,"postpatch",(function(){for(var t=0;t<c.length;t++)Mr(c[t],"componentUpdated",e,n)}));if(!i)for(t in s)l[t]||Mr(s[t],"unbind",n,n,o)}(n,e)}var Er=Object.create(null);function Pr(n,e){var t,r,a=Object.create(null);if(!n)return a;for(t=0;t<n.length;t++){if((r=n[t]).modifiers||(r.modifiers=Er),a[_r(r)]=r,e._setupState&&e._setupState.__sfc){var i=r.def||Pt(e,"_setupState","v-"+r.name);r.def="function"==typeof i?{bind:i,update:i}:i}r.def=r.def||Pt(e.$options,"directives",r.name)}return a}function _r(n){return n.rawName||"".concat(n.name,".").concat(Object.keys(n.modifiers||{}).join("."))}function Mr(n,e,t,r,a){var i=n.def&&n.def[e];if(i)try{i(t.elm,n,t,r,a)}catch(r){Ae(r,t.context,"directive ".concat(n.name," ").concat(e," hook"))}}var Rr=[wr,Br];function Dr(n,e){var t=e.componentOptions;if(!(o(t)&&!1===t.Ctor.options.inheritAttrs||i(n.data.attrs)&&i(e.data.attrs))){var r,a,l=e.elm,p=n.data.attrs||{},c=e.data.attrs||{};for(r in(o(c.__ob__)||s(c._v_attr_proxy))&&(c=e.data.attrs=_({},c)),c)a=c[r],p[r]!==a&&zr(l,r,a,e.data.pre);for(r in(Y||K)&&c.value!==p.value&&zr(l,"value",c.value),p)i(c[r])&&(sr(r)?l.removeAttributeNS(or,lr(r)):rr(r)||l.removeAttribute(r))}}function zr(n,e,t,r){r||n.tagName.indexOf("-")>-1?Or(n,e,t):ir(e)?pr(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):rr(e)?n.setAttribute(e,function(n,e){return pr(e)||"false"===e?"false":"contenteditable"===n&&ar(e)?e:"true"}(e,t)):sr(e)?pr(t)?n.removeAttributeNS(or,lr(e)):n.setAttributeNS(or,e,t):Or(n,e,t)}function Or(n,e,t){if(pr(t))n.removeAttribute(e);else{if(Y&&!Z&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var Lr={create:Dr,update:Dr};function Jr(n,e){var t=e.elm,r=e.data,a=n.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=cr(e),l=t._transitionClasses;o(l)&&(s=gr(s,ur(l))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var qr,Fr={create:Jr,update:Jr};function Ur(n,e,t){var r=qr;return function a(){var i=e.apply(null,arguments);null!==i&&Vr(n,a,t,r)}}var Nr=_e&&!(tn&&Number(tn[1])<=53);function Hr(n,e,t,r){if(Nr){var a=lt,i=e;e=i._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=a||n.timeStamp<=0||n.target.ownerDocument!==document)return i.apply(this,arguments)}}qr.addEventListener(n,e,an?{capture:t,passive:r}:t)}function Vr(n,e,t,r){(r||qr).removeEventListener(n,e._wrapper||e,t)}function $r(n,e){if(!i(n.data.on)||!i(e.data.on)){var t=e.data.on||{},r=n.data.on||{};qr=e.elm||n.elm,function(n){if(o(n.__r)){var e=Y?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}o(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),Wn(t,r,Hr,Vr,Ur,e.context),qr=void 0}}var Wr,Xr={create:$r,update:$r,destroy:function(n){return $r(n,jr)}};function Gr(n,e){if(!i(n.data.domProps)||!i(e.data.domProps)){var t,r,a=e.elm,l=n.data.domProps||{},p=e.data.domProps||{};for(t in(o(p.__ob__)||s(p._v_attr_proxy))&&(p=e.data.domProps=_({},p)),l)t in p||(a[t]="");for(t in p){if(r=p[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===l[t])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===t&&"PROGRESS"!==a.tagName){a._value=r;var c=i(r)?"":String(r);Qr(a,c)&&(a.value=c)}else if("innerHTML"===t&&fr(a.tagName)&&i(a.innerHTML)){(Wr=Wr||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var d=Wr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}else if(r!==l[t])try{a[t]=r}catch(n){}}}}function Qr(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(o(r)){if(r.number)return v(t)!==v(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Yr={create:Gr,update:Gr},Zr=j((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Kr(n){var e=na(n.style);return n.staticStyle?_(n.staticStyle,e):e}function na(n){return Array.isArray(n)?M(n):"string"==typeof n?Zr(n):n}var ea,ta=/^--/,ra=/\s*!important$/,aa=function(n,e,t){if(ta.test(e))n.style.setProperty(e,t);else if(ra.test(t))n.style.setProperty(I(e),t.replace(ra,""),"important");else{var r=oa(e);if(Array.isArray(t))for(var a=0,i=t.length;a<i;a++)n.style[r]=t[a];else n.style[r]=t}},ia=["Webkit","Moz","ms"],oa=j((function(n){if(ea=ea||document.createElement("div").style,"filter"!==(n=T(n))&&n in ea)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<ia.length;t++){var r=ia[t]+e;if(r in ea)return r}}));function sa(n,e){var t=e.data,r=n.data;if(!(i(t.staticStyle)&&i(t.style)&&i(r.staticStyle)&&i(r.style))){var a,s,l=e.elm,p=r.staticStyle,c=r.normalizedStyle||r.style||{},d=p||c,g=na(e.data.style)||{};e.data.normalizedStyle=o(g.__ob__)?_({},g):g;var u=function(n,e){var t,r={};if(e)for(var a=n;a.componentInstance;)(a=a.componentInstance._vnode)&&a.data&&(t=Kr(a.data))&&_(r,t);(t=Kr(n.data))&&_(r,t);for(var i=n;i=i.parent;)i.data&&(t=Kr(i.data))&&_(r,t);return r}(e,!0);for(s in d)i(u[s])&&aa(l,s,"");for(s in u)a=u[s],aa(l,s,null==a?"":a)}}var la={create:sa,update:sa},pa=/\s+/;function ca(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(pa).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" ".concat(n.getAttribute("class")||""," ");t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function da(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(pa).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" ".concat(n.getAttribute("class")||""," "),r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function ga(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&_(e,ua(n.name||"v")),_(e,n),e}return"string"==typeof n?ua(n):void 0}}var ua=j((function(n){return{enterClass:"".concat(n,"-enter"),enterToClass:"".concat(n,"-enter-to"),enterActiveClass:"".concat(n,"-enter-active"),leaveClass:"".concat(n,"-leave"),leaveToClass:"".concat(n,"-leave-to"),leaveActiveClass:"".concat(n,"-leave-active")}})),ma=G&&!Z,ba="transition",fa="transitionend",ha="animation",va="animationend";ma&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ba="WebkitTransition",fa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ha="WebkitAnimation",va="webkitAnimationEnd"));var ya=G?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function xa(n){ya((function(){ya(n)}))}function wa(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),ca(n,e))}function Sa(n,e){n._transitionClasses&&w(n._transitionClasses,e),da(n,e)}function ka(n,e,t){var r=Ca(n,e),a=r.type,i=r.timeout,o=r.propCount;if(!a)return t();var s="transition"===a?fa:va,l=0,p=function(){n.removeEventListener(s,c),t()},c=function(e){e.target===n&&++l>=o&&p()};setTimeout((function(){l<o&&p()}),i+1),n.addEventListener(s,c)}var ja=/\b(transform|all)(,|$)/;function Ca(n,e){var t,r=window.getComputedStyle(n),a=(r[ba+"Delay"]||"").split(", "),i=(r[ba+"Duration"]||"").split(", "),o=Ta(a,i),s=(r[ha+"Delay"]||"").split(", "),l=(r[ha+"Duration"]||"").split(", "),p=Ta(s,l),c=0,d=0;return"transition"===e?o>0&&(t="transition",c=o,d=i.length):"animation"===e?p>0&&(t="animation",c=p,d=l.length):d=(t=(c=Math.max(o,p))>0?o>p?"transition":"animation":null)?"transition"===t?i.length:l.length:0,{type:t,timeout:c,propCount:d,hasTransform:"transition"===t&&ja.test(r[ba+"Property"])}}function Ta(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return Aa(e)+Aa(n[t])})))}function Aa(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function Ba(n,e){var t=n.elm;o(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=ga(n.data.transition);if(!i(r)&&!o(t._enterCb)&&1===t.nodeType){for(var a=r.css,s=r.type,l=r.enterClass,d=r.enterToClass,g=r.enterActiveClass,u=r.appearClass,m=r.appearToClass,b=r.appearActiveClass,f=r.beforeEnter,h=r.enter,y=r.afterEnter,x=r.enterCancelled,w=r.beforeAppear,S=r.appear,k=r.afterAppear,j=r.appearCancelled,C=r.duration,T=Ye,A=Ye.$vnode;A&&A.parent;)T=A.context,A=A.parent;var B=!T._isMounted||!n.isRootInsert;if(!B||S||""===S){var I=B&&u?u:l,E=B&&b?b:g,P=B&&m?m:d,_=B&&w||f,M=B&&p(S)?S:h,R=B&&k||y,D=B&&j||x,z=v(c(C)?C.enter:C);0;var O=!1!==a&&!Z,L=Pa(M),q=t._enterCb=J((function(){O&&(Sa(t,P),Sa(t,E)),q.cancelled?(O&&Sa(t,I),D&&D(t)):R&&R(t),t._enterCb=null}));n.data.show||Xn(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),M&&M(t,q)})),_&&_(t),O&&(wa(t,I),wa(t,E),xa((function(){Sa(t,I),q.cancelled||(wa(t,P),L||(Ea(z)?setTimeout(q,z):ka(t,s,q)))}))),n.data.show&&(e&&e(),M&&M(t,q)),O||L||q()}}}function Ia(n,e){var t=n.elm;o(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=ga(n.data.transition);if(i(r)||1!==t.nodeType)return e();if(!o(t._leaveCb)){var a=r.css,s=r.type,l=r.leaveClass,p=r.leaveToClass,d=r.leaveActiveClass,g=r.beforeLeave,u=r.leave,m=r.afterLeave,b=r.leaveCancelled,f=r.delayLeave,h=r.duration,y=!1!==a&&!Z,x=Pa(u),w=v(c(h)?h.leave:h);0;var S=t._leaveCb=J((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),y&&(Sa(t,p),Sa(t,d)),S.cancelled?(y&&Sa(t,l),b&&b(t)):(e(),m&&m(t)),t._leaveCb=null}));f?f(k):k()}function k(){S.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),g&&g(t),y&&(wa(t,l),wa(t,d),xa((function(){Sa(t,l),S.cancelled||(wa(t,p),x||(Ea(w)?setTimeout(S,w):ka(t,s,S)))}))),u&&u(t,S),y||x||S())}}function Ea(n){return"number"==typeof n&&!isNaN(n)}function Pa(n){if(i(n))return!1;var e=n.fns;return o(e)?Pa(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function _a(n,e){!0!==e.data.show&&Ba(e)}var Ma=function(n){var e,t,r={},p=n.modules,c=n.nodeOps;for(e=0;e<Cr.length;++e)for(r[Cr[e]]=[],t=0;t<p.length;++t)o(p[t][Cr[e]])&&r[Cr[e]].push(p[t][Cr[e]]);function d(n){var e=c.parentNode(n);o(e)&&c.removeChild(e,n)}function g(n,e,t,a,i,l,p){if(o(n.elm)&&o(l)&&(n=l[p]=hn(n)),n.isRootInsert=!i,!function(n,e,t,a){var i=n.data;if(o(i)){var l=o(n.componentInstance)&&i.keepAlive;if(o(i=i.hook)&&o(i=i.init)&&i(n,!1),o(n.componentInstance))return u(n,e),m(t,n.elm,a),s(l)&&function(n,e,t,a){var i,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,o(i=s.data)&&o(i=i.transition)){for(i=0;i<r.activate.length;++i)r.activate[i](jr,s);e.push(s);break}m(t,n.elm,a)}(n,e,t,a),!0}}(n,e,t,a)){var d=n.data,g=n.children,f=n.tag;o(f)?(n.elm=n.ns?c.createElementNS(n.ns,f):c.createElement(f,n),v(n),b(n,g,e),o(d)&&h(n,e),m(t,n.elm,a)):s(n.isComment)?(n.elm=c.createComment(n.text),m(t,n.elm,a)):(n.elm=c.createTextNode(n.text),m(t,n.elm,a))}}function u(n,e){o(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,f(n)?(h(n,e),v(n)):(Sr(n),e.push(n))}function m(n,e,t){o(n)&&(o(t)?c.parentNode(t)===n&&c.insertBefore(n,e,t):c.appendChild(n,e))}function b(n,e,t){if(a(e)){0;for(var r=0;r<e.length;++r)g(e[r],t,n.elm,null,!0,e,r)}else l(n.text)&&c.appendChild(n.elm,c.createTextNode(String(n.text)))}function f(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return o(n.tag)}function h(n,t){for(var a=0;a<r.create.length;++a)r.create[a](jr,n);o(e=n.data.hook)&&(o(e.create)&&e.create(jr,n),o(e.insert)&&t.push(n))}function v(n){var e;if(o(e=n.fnScopeId))c.setStyleScope(n.elm,e);else for(var t=n;t;)o(e=t.context)&&o(e=e.$options._scopeId)&&c.setStyleScope(n.elm,e),t=t.parent;o(e=Ye)&&e!==n.context&&e!==n.fnContext&&o(e=e.$options._scopeId)&&c.setStyleScope(n.elm,e)}function x(n,e,t,r,a,i){for(;r<=a;++r)g(t[r],i,n,e,!1,t,r)}function w(n){var e,t,a=n.data;if(o(a))for(o(e=a.hook)&&o(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(o(e=n.children))for(t=0;t<n.children.length;++t)w(n.children[t])}function S(n,e,t){for(;e<=t;++e){var r=n[e];o(r)&&(o(r.tag)?(k(r),w(r)):d(r.elm))}}function k(n,e){if(o(e)||o(n.data)){var t,a=r.remove.length+1;for(o(e)?e.listeners+=a:e=function(n,e){function t(){0==--t.listeners&&d(n)}return t.listeners=e,t}(n.elm,a),o(t=n.componentInstance)&&o(t=t._vnode)&&o(t.data)&&k(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);o(t=n.data.hook)&&o(t=t.remove)?t(n,e):e()}else d(n.elm)}function j(n,e,t,r){for(var a=t;a<r;a++){var i=e[a];if(o(i)&&Tr(n,i))return a}}function C(n,e,t,a,l,p){if(n!==e){o(e.elm)&&o(a)&&(e=a[l]=hn(e));var d=e.elm=n.elm;if(s(n.isAsyncPlaceholder))o(e.asyncFactory.resolved)?B(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var u,m=e.data;o(m)&&o(u=m.hook)&&o(u=u.prepatch)&&u(n,e);var b=n.children,h=e.children;if(o(m)&&f(e)){for(u=0;u<r.update.length;++u)r.update[u](n,e);o(u=m.hook)&&o(u=u.update)&&u(n,e)}i(e.text)?o(b)&&o(h)?b!==h&&function(n,e,t,r,a){var s,l,p,d=0,u=0,m=e.length-1,b=e[0],f=e[m],h=t.length-1,v=t[0],y=t[h],w=!a;for(0;d<=m&&u<=h;)i(b)?b=e[++d]:i(f)?f=e[--m]:Tr(b,v)?(C(b,v,r,t,u),b=e[++d],v=t[++u]):Tr(f,y)?(C(f,y,r,t,h),f=e[--m],y=t[--h]):Tr(b,y)?(C(b,y,r,t,h),w&&c.insertBefore(n,b.elm,c.nextSibling(f.elm)),b=e[++d],y=t[--h]):Tr(f,v)?(C(f,v,r,t,u),w&&c.insertBefore(n,f.elm,b.elm),f=e[--m],v=t[++u]):(i(s)&&(s=Ar(e,d,m)),i(l=o(v.key)?s[v.key]:j(v,e,d,m))?g(v,r,n,b.elm,!1,t,u):Tr(p=e[l],v)?(C(p,v,r,t,u),e[l]=void 0,w&&c.insertBefore(n,p.elm,b.elm)):g(v,r,n,b.elm,!1,t,u),v=t[++u]);d>m?x(n,i(t[h+1])?null:t[h+1].elm,t,u,h,r):u>h&&S(e,d,m)}(d,b,h,t,p):o(h)?(o(n.text)&&c.setTextContent(d,""),x(d,null,h,0,h.length-1,t)):o(b)?S(b,0,b.length-1):o(n.text)&&c.setTextContent(d,""):n.text!==e.text&&c.setTextContent(d,e.text),o(m)&&o(u=m.hook)&&o(u=u.postpatch)&&u(n,e)}}}function T(n,e,t){if(s(t)&&o(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var A=y("attrs,class,staticClass,staticStyle,key");function B(n,e,t,r){var a,i=e.tag,l=e.data,p=e.children;if(r=r||l&&l.pre,e.elm=n,s(e.isComment)&&o(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(o(l)&&(o(a=l.hook)&&o(a=a.init)&&a(e,!0),o(a=e.componentInstance)))return u(e,t),!0;if(o(i)){if(o(p))if(n.hasChildNodes())if(o(a=l)&&o(a=a.domProps)&&o(a=a.innerHTML)){if(a!==n.innerHTML)return!1}else{for(var c=!0,d=n.firstChild,g=0;g<p.length;g++){if(!d||!B(d,p[g],t,r)){c=!1;break}d=d.nextSibling}if(!c||d)return!1}else b(e,p,t);if(o(l)){var m=!1;for(var f in l)if(!A(f)){m=!0,h(e,t);break}!m&&l.class&&Ne(l.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,a){if(!i(e)){var l,p=!1,d=[];if(i(n))p=!0,g(e,d);else{var u=o(n.nodeType);if(!u&&Tr(n,e))C(n,e,d,null,null,a);else{if(u){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&B(n,e,d))return T(e,d,!0),n;l=n,n=new mn(c.tagName(l).toLowerCase(),{},[],void 0,l)}var m=n.elm,b=c.parentNode(m);if(g(e,d,m._leaveCb?null:b,c.nextSibling(m)),o(e.parent))for(var h=e.parent,v=f(e);h;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](h);if(h.elm=e.elm,v){for(var x=0;x<r.create.length;++x)r.create[x](jr,h);var k=h.data.hook.insert;if(k.merged)for(var j=k.fns.slice(1),A=0;A<j.length;A++)j[A]()}else Sr(h);h=h.parent}o(b)?S([n],0,0):o(n.tag)&&w(n)}}return T(e,d,p),e.elm}o(n)&&w(n)}}({nodeOps:xr,modules:[Lr,Fr,Xr,Yr,la,G?{create:_a,activate:_a,remove:function(n,e){!0!==n.data.show?Ia(n,e):e()}}:{}].concat(Rr)});Z&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&Fa(n,"input")}));var Ra={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?Xn(t,"postpatch",(function(){Ra.componentUpdated(n,e,t)})):Da(n,e,t.context),n._vOptions=[].map.call(n.options,La)):("textarea"===t.tag||yr(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",Ja),n.addEventListener("compositionend",qa),n.addEventListener("change",qa),Z&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){Da(n,e,t.context);var r=n._vOptions,a=n._vOptions=[].map.call(n.options,La);if(a.some((function(n,e){return!O(n,r[e])})))(n.multiple?e.value.some((function(n){return Oa(n,a)})):e.value!==e.oldValue&&Oa(e.value,a))&&Fa(n,"change")}}};function Da(n,e,t){za(n,e,t),(Y||K)&&setTimeout((function(){za(n,e,t)}),0)}function za(n,e,t){var r=e.value,a=n.multiple;if(!a||Array.isArray(r)){for(var i,o,s=0,l=n.options.length;s<l;s++)if(o=n.options[s],a)i=L(r,La(o))>-1,o.selected!==i&&(o.selected=i);else if(O(La(o),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));a||(n.selectedIndex=-1)}}function Oa(n,e){return e.every((function(e){return!O(e,n)}))}function La(n){return"_value"in n?n._value:n.value}function Ja(n){n.target.composing=!0}function qa(n){n.target.composing&&(n.target.composing=!1,Fa(n.target,"input"))}function Fa(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function Ua(n){return!n.componentInstance||n.data&&n.data.transition?n:Ua(n.componentInstance._vnode)}var Na={model:Ra,show:{bind:function(n,e,t){var r=e.value,a=(t=Ua(t)).data&&t.data.transition,i=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&a?(t.data.show=!0,Ba(t,(function(){n.style.display=i}))):n.style.display=r?i:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=Ua(t)).data&&t.data.transition?(t.data.show=!0,r?Ba(t,(function(){n.style.display=n.__vOriginalDisplay})):Ia(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,a){a||(n.style.display=n.__vOriginalDisplay)}}},Ha={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Va(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Va(Ce(e.children)):n}function $a(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var a=t._parentListeners;for(var r in a)e[T(r)]=a[r];return e}function Wa(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Xa=function(n){return n.tag||be(n)},Ga=function(n){return"show"===n.name},Qa={name:"transition",props:Ha,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Xa)).length){0;var r=this.mode;0;var a=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return a;var i=Va(a);if(!i)return a;if(this._leaving)return Wa(n,a);var o="__transition-".concat(this._uid,"-");i.key=null==i.key?i.isComment?o+"comment":o+i.tag:l(i.key)?0===String(i.key).indexOf(o)?i.key:o+i.key:i.key;var s=(i.data||(i.data={})).transition=$a(this),p=this._vnode,c=Va(p);if(i.data.directives&&i.data.directives.some(Ga)&&(i.data.show=!0),c&&c.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(i,c)&&!be(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var d=c.data.transition=_({},s);if("out-in"===r)return this._leaving=!0,Xn(d,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Wa(n,a);if("in-out"===r){if(be(i))return p;var g,u=function(){g()};Xn(s,"afterEnter",u),Xn(s,"enterCancelled",u),Xn(d,"delayLeave",(function(n){g=n}))}}return a}}},Ya=_({tag:String,moveClass:String},Ha);function Za(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Ka(n){n.data.newPos=n.elm.getBoundingClientRect()}function ni(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,a=e.top-t.top;if(r||a){n.data.moved=!0;var i=n.elm.style;i.transform=i.WebkitTransform="translate(".concat(r,"px,").concat(a,"px)"),i.transitionDuration="0s"}}delete Ya.mode;var ei={Transition:Qa,TransitionGroup:{props:Ya,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var a=Ze(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,a(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,a=this.$slots.default||[],i=this.children=[],o=$a(this),s=0;s<a.length;s++){if((c=a[s]).tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))i.push(c),t[c.key]=c,(c.data||(c.data={})).transition=o;else;}if(r){var l=[],p=[];for(s=0;s<r.length;s++){var c;(c=r[s]).data.transition=o,c.data.pos=c.elm.getBoundingClientRect(),t[c.key]?l.push(c):p.push(c)}this.kept=n(e,null,l),this.removed=p}return n(e,null,i)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Za),n.forEach(Ka),n.forEach(ni),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;wa(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(fa,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(fa,n),t._moveCb=null,Sa(t,e))})}})))},methods:{hasMove:function(n,e){if(!ma)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){da(t,n)})),ca(t,e),t.style.display="none",this.$el.appendChild(t);var r=Ca(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};function ti(n,e){for(var t in e)n[t]=e[t];return n}Wt.config.mustUseProp=function(n,e,t){return"value"===t&&tr(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Wt.config.isReservedTag=hr,Wt.config.isReservedAttr=er,Wt.config.getTagNamespace=function(n){return fr(n)?"svg":"math"===n?"math":void 0},Wt.config.isUnknownElement=function(n){if(!G)return!0;if(hr(n))return!1;if(n=n.toLowerCase(),null!=vr[n])return vr[n];var e=document.createElement(n);return n.indexOf("-")>-1?vr[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:vr[n]=/HTMLUnknownElement/.test(e.toString())},_(Wt.options.directives,Na),_(Wt.options.components,ei),Wt.prototype.__patch__=G?Ma:R,Wt.prototype.$mount=function(n,e){return function(n,e,t){var r;n.$el=e,n.$options.render||(n.$options.render=bn),et(n,"beforeMount"),r=function(){n._update(n._render(),t)},new $e(n,r,R,{before:function(){n._isMounted&&!n._isDestroyed&&et(n,"beforeUpdate")}},!0),t=!1;var a=n._preWatchers;if(a)for(var i=0;i<a.length;i++)a[i].run();return null==n.$vnode&&(n._isMounted=!0,et(n,"mounted")),n}(this,n=n&&G?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},G&&setTimeout((function(){N.devtools&&ln&&ln.emit("init",Wt)}),0);var ri=/[!'()*]/g,ai=function(n){return"%"+n.charCodeAt(0).toString(16)},ii=/%2C/g,oi=function(n){return encodeURIComponent(n).replace(ri,ai).replace(ii,",")};function si(n){try{return decodeURIComponent(n)}catch(n){0}return n}var li=function(n){return null==n||"object"==typeof n?n:String(n)};function pi(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=si(t.shift()),a=t.length>0?si(t.join("=")):null;void 0===e[r]?e[r]=a:Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]})),e):e}function ci(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return oi(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push(oi(e)):r.push(oi(e)+"="+oi(n)))})),r.join("&")}return oi(e)+"="+oi(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var di=/\/?$/;function gi(n,e,t,r){var a=r&&r.options.stringifyQuery,i=e.query||{};try{i=ui(i)}catch(n){}var o={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:i,params:e.params||{},fullPath:fi(e,a),matched:n?bi(n):[]};return t&&(o.redirectedFrom=fi(t,a)),Object.freeze(o)}function ui(n){if(Array.isArray(n))return n.map(ui);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=ui(n[t]);return e}return n}var mi=gi(null,{path:"/"});function bi(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function fi(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var a=n.hash;return void 0===a&&(a=""),(t||"/")+(e||ci)(r)+a}function hi(n,e,t){return e===mi?n===e:!!e&&(n.path&&e.path?n.path.replace(di,"")===e.path.replace(di,"")&&(t||n.hash===e.hash&&vi(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&vi(n.query,e.query)&&vi(n.params,e.params))))}function vi(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,a){var i=n[t];if(r[a]!==t)return!1;var o=e[t];return null==i||null==o?i===o:"object"==typeof i&&"object"==typeof o?vi(i,o):String(i)===String(o)}))}function yi(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var a=t.instances[r],i=t.enteredCbs[r];if(a&&i){delete t.enteredCbs[r];for(var o=0;o<i.length;o++)a._isBeingDestroyed||i[o](a)}}}}var xi={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,a=e.parent,i=e.data;i.routerView=!0;for(var o=a.$createElement,s=t.name,l=a.$route,p=a._routerViewCache||(a._routerViewCache={}),c=0,d=!1;a&&a._routerRoot!==a;){var g=a.$vnode?a.$vnode.data:{};g.routerView&&c++,g.keepAlive&&a._directInactive&&a._inactive&&(d=!0),a=a.$parent}if(i.routerViewDepth=c,d){var u=p[s],m=u&&u.component;return m?(u.configProps&&wi(m,i,u.route,u.configProps),o(m,i,r)):o()}var b=l.matched[c],f=b&&b.components[s];if(!b||!f)return p[s]=null,o();p[s]={component:f},i.registerRouteInstance=function(n,e){var t=b.instances[s];(e&&t!==n||!e&&t===n)&&(b.instances[s]=e)},(i.hook||(i.hook={})).prepatch=function(n,e){b.instances[s]=e.componentInstance},i.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==b.instances[s]&&(b.instances[s]=n.componentInstance),yi(l)};var h=b.props&&b.props[s];return h&&(ti(p[s],{route:l,configProps:h}),wi(f,i,l,h)),o(f,i,r)}};function wi(n,e,t,r){var a=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(a){a=e.props=ti({},a);var i=e.attrs=e.attrs||{};for(var o in a)n.props&&o in n.props||(i[o]=a[o],delete a[o])}}function Si(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var i=n.replace(/^\//,"").split("/"),o=0;o<i.length;o++){var s=i[o];".."===s?a.pop():"."!==s&&a.push(s)}return""!==a[0]&&a.unshift(""),a.join("/")}function ki(n){return n.replace(/\/(?:\s*\/)+/g,"/")}var ji=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},Ci=Ji,Ti=Pi,Ai=function(n,e){return Mi(Pi(n,e),e)},Bi=Mi,Ii=Li,Ei=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Pi(n,e){for(var t,r=[],a=0,i=0,o="",s=e&&e.delimiter||"/";null!=(t=Ei.exec(n));){var l=t[0],p=t[1],c=t.index;if(o+=n.slice(i,c),i=c+l.length,p)o+=p[1];else{var d=n[i],g=t[2],u=t[3],m=t[4],b=t[5],f=t[6],h=t[7];o&&(r.push(o),o="");var v=null!=g&&null!=d&&d!==g,y="+"===f||"*"===f,x="?"===f||"*"===f,w=t[2]||s,S=m||b;r.push({name:u||a++,prefix:g||"",delimiter:w,optional:x,repeat:y,partial:v,asterisk:!!h,pattern:S?Di(S):h?".*":"[^"+Ri(w)+"]+?"})}}return i<n.length&&(o+=n.substr(i)),o&&r.push(o),r}function _i(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function Mi(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",Oi(e)));return function(e,r){for(var a="",i=e||{},o=(r||{}).pretty?_i:encodeURIComponent,s=0;s<n.length;s++){var l=n[s];if("string"!=typeof l){var p,c=i[l.name];if(null==c){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(ji(c)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<c.length;d++){if(p=o(c[d]),!t[s].test(p))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(p)+"`");a+=(0===d?l.prefix:l.delimiter)+p}}else{if(p=l.asterisk?encodeURI(c).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):o(c),!t[s].test(p))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+p+'"');a+=l.prefix+p}}else a+=l}return a}}function Ri(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Di(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function zi(n,e){return n.keys=e,n}function Oi(n){return n&&n.sensitive?"":"i"}function Li(n,e,t){ji(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,a=!1!==t.end,i="",o=0;o<n.length;o++){var s=n[o];if("string"==typeof s)i+=Ri(s);else{var l=Ri(s.prefix),p="(?:"+s.pattern+")";e.push(s),s.repeat&&(p+="(?:"+l+p+")*"),i+=p=s.optional?s.partial?l+"("+p+")?":"(?:"+l+"("+p+"))?":l+"("+p+")"}}var c=Ri(t.delimiter||"/"),d=i.slice(-c.length)===c;return r||(i=(d?i.slice(0,-c.length):i)+"(?:"+c+"(?=$))?"),i+=a?"$":r&&d?"":"(?="+c+"|$)",zi(new RegExp("^"+i,Oi(t)),e)}function Ji(n,e,t){return ji(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return zi(n,e)}(n,e):ji(n)?function(n,e,t){for(var r=[],a=0;a<n.length;a++)r.push(Ji(n[a],e,t).source);return zi(new RegExp("(?:"+r.join("|")+")",Oi(t)),e)}(n,e,t):function(n,e,t){return Li(Pi(n,t),e,t)}(n,e,t)}Ci.parse=Ti,Ci.compile=Ai,Ci.tokensToFunction=Bi,Ci.tokensToRegExp=Ii;var qi=Object.create(null);function Fi(n,e,t){e=e||{};try{var r=qi[n]||(qi[n]=Ci.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function Ui(n,e,t,r){var a="string"==typeof n?{path:n}:n;if(a._normalized)return a;if(a.name){var i=(a=ti({},n)).params;return i&&"object"==typeof i&&(a.params=ti({},i)),a}if(!a.path&&a.params&&e){(a=ti({},a))._normalized=!0;var o=ti(ti({},e.params),a.params);if(e.name)a.name=e.name,a.params=o;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;a.path=Fi(s,o,e.path)}else 0;return a}var l=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var a=n.indexOf("?");return a>=0&&(t=n.slice(a+1),n=n.slice(0,a)),{path:n,query:t,hash:e}}(a.path||""),p=e&&e.path||"/",c=l.path?Si(l.path,p,t||a.append):p,d=function(n,e,t){void 0===e&&(e={});var r,a=t||pi;try{r=a(n||"")}catch(n){r={}}for(var i in e){var o=e[i];r[i]=Array.isArray(o)?o.map(li):li(o)}return r}(l.query,a.query,r&&r.options.parseQuery),g=a.hash||l.hash;return g&&"#"!==g.charAt(0)&&(g="#"+g),{_normalized:!0,path:c,query:d,hash:g}}var Ni,Hi=function(){},Vi={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,a=t.resolve(this.to,r,this.append),i=a.location,o=a.route,s=a.href,l={},p=t.options.linkActiveClass,c=t.options.linkExactActiveClass,d=null==p?"router-link-active":p,g=null==c?"router-link-exact-active":c,u=null==this.activeClass?d:this.activeClass,m=null==this.exactActiveClass?g:this.exactActiveClass,b=o.redirectedFrom?gi(null,Ui(o.redirectedFrom),null,t):o;l[m]=hi(r,b,this.exactPath),l[u]=this.exact||this.exactPath?l[m]:function(n,e){return 0===n.path.replace(di,"/").indexOf(e.path.replace(di,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,b);var f=l[m]?this.ariaCurrentValue:null,h=function(n){$i(n)&&(e.replace?t.replace(i,Hi):t.push(i,Hi))},v={click:$i};Array.isArray(this.event)?this.event.forEach((function(n){v[n]=h})):v[this.event]=h;var y={class:l},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:o,navigate:h,isActive:l[u],isExactActive:l[m]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?n():n("span",{},x)}if("a"===this.tag)y.on=v,y.attrs={href:s,"aria-current":f};else{var w=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(w){w.isStatic=!1;var S=w.data=ti({},w.data);for(var k in S.on=S.on||{},S.on){var j=S.on[k];k in v&&(S.on[k]=Array.isArray(j)?j:[j])}for(var C in v)C in S.on?S.on[C].push(v[C]):S.on[C]=h;var T=w.data.attrs=ti({},w.data.attrs);T.href=s,T["aria-current"]=f}else y.on=v}return n(this.tag,y,this.$slots.default)}};function $i(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Wi="undefined"!=typeof window;function Xi(n,e,t,r,a){var i=e||[],o=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,a,i,o){var s=a.path,l=a.name;0;var p=a.pathToRegexpOptions||{},c=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return ki(e.path+"/"+n)}(s,i,p.strict);"boolean"==typeof a.caseSensitive&&(p.sensitive=a.caseSensitive);var d={path:c,regex:Gi(c,p),components:a.components||{default:a.component},alias:a.alias?"string"==typeof a.alias?[a.alias]:a.alias:[],instances:{},enteredCbs:{},name:l,parent:i,matchAs:o,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};a.children&&a.children.forEach((function(a){var i=o?ki(o+"/"+a.path):void 0;n(e,t,r,a,d,i)}));t[d.path]||(e.push(d.path),t[d.path]=d);if(void 0!==a.alias)for(var g=Array.isArray(a.alias)?a.alias:[a.alias],u=0;u<g.length;++u){0;var m={path:g[u],children:a.children};n(e,t,r,m,i,d.path||"/")}l&&(r[l]||(r[l]=d))}(i,o,s,n,a)}));for(var l=0,p=i.length;l<p;l++)"*"===i[l]&&(i.push(i.splice(l,1)[0]),p--,l--);return{pathList:i,pathMap:o,nameMap:s}}function Gi(n,e){return Ci(n,[],e)}function Qi(n,e){var t=Xi(n),r=t.pathList,a=t.pathMap,i=t.nameMap;function o(n,t,o){var s=Ui(n,t,!1,e),p=s.name;if(p){var c=i[p];if(!c)return l(null,s);var d=c.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var g in t.params)!(g in s.params)&&d.indexOf(g)>-1&&(s.params[g]=t.params[g]);return s.path=Fi(c.path,s.params),l(c,s,o)}if(s.path){s.params={};for(var u=0;u<r.length;u++){var m=r[u],b=a[m];if(Yi(b.regex,s.path,s.params))return l(b,s,o)}}return l(null,s)}function s(n,t){var r=n.redirect,a="function"==typeof r?r(gi(n,t,null,e)):r;if("string"==typeof a&&(a={path:a}),!a||"object"!=typeof a)return l(null,t);var s=a,p=s.name,c=s.path,d=t.query,g=t.hash,u=t.params;if(d=s.hasOwnProperty("query")?s.query:d,g=s.hasOwnProperty("hash")?s.hash:g,u=s.hasOwnProperty("params")?s.params:u,p){i[p];return o({_normalized:!0,name:p,query:d,hash:g,params:u},void 0,t)}if(c){var m=function(n,e){return Si(n,e.parent?e.parent.path:"/",!0)}(c,n);return o({_normalized:!0,path:Fi(m,u),query:d,hash:g},void 0,t)}return l(null,t)}function l(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=o({_normalized:!0,path:Fi(t,e.params)});if(r){var a=r.matched,i=a[a.length-1];return e.params=r.params,l(i,e)}return l(null,e)}(0,t,n.matchAs):gi(n,t,r,e)}return{match:o,addRoute:function(n,e){var t="object"!=typeof n?i[n]:void 0;Xi([e||n],r,a,i,t),t&&t.alias.length&&Xi(t.alias.map((function(n){return{path:n,children:[e]}})),r,a,i,t)},getRoutes:function(){return r.map((function(n){return a[n]}))},addRoutes:function(n){Xi(n,r,a,i)}}}function Yi(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var a=1,i=r.length;a<i;++a){var o=n.keys[a-1];o&&(t[o.name||"pathMatch"]="string"==typeof r[a]?si(r[a]):r[a])}return!0}var Zi=Wi&&window.performance&&window.performance.now?window.performance:Date;function Ki(){return Zi.now().toFixed(3)}var no=Ki();function eo(){return no}function to(n){return no=n}var ro=Object.create(null);function ao(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=ti({},window.history.state);return t.key=eo(),window.history.replaceState(t,"",e),window.addEventListener("popstate",so),function(){window.removeEventListener("popstate",so)}}function io(n,e,t,r){if(n.app){var a=n.options.scrollBehavior;a&&n.app.$nextTick((function(){var i=function(){var n=eo();if(n)return ro[n]}(),o=a.call(n,e,t,r?i:null);o&&("function"==typeof o.then?o.then((function(n){uo(n,i)})).catch((function(n){0})):uo(o,i))}))}}function oo(){var n=eo();n&&(ro[n]={x:window.pageXOffset,y:window.pageYOffset})}function so(n){oo(),n.state&&n.state.key&&to(n.state.key)}function lo(n){return co(n.x)||co(n.y)}function po(n){return{x:co(n.x)?n.x:window.pageXOffset,y:co(n.y)?n.y:window.pageYOffset}}function co(n){return"number"==typeof n}var go=/^#\d/;function uo(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var a=go.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(a){var i=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(a,i={x:co((t=i).x)?t.x:0,y:co(t.y)?t.y:0})}else lo(n)&&(e=po(n))}else r&&lo(n)&&(e=po(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var mo,bo=Wi&&((-1===(mo=window.navigator.userAgent).indexOf("Android 2.")&&-1===mo.indexOf("Android 4.0")||-1===mo.indexOf("Mobile Safari")||-1!==mo.indexOf("Chrome")||-1!==mo.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function fo(n,e){oo();var t=window.history;try{if(e){var r=ti({},t.state);r.key=eo(),t.replaceState(r,"",n)}else t.pushState({key:to(Ki())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function ho(n){fo(n,!0)}var vo={redirected:2,aborted:4,cancelled:8,duplicated:16};function yo(n,e){return wo(n,e,vo.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return So.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function xo(n,e){return wo(n,e,vo.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function wo(n,e,t,r){var a=new Error(r);return a._isRouter=!0,a.from=n,a.to=e,a.type=t,a}var So=["params","query","hash"];function ko(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function jo(n,e){return ko(n)&&n._isRouter&&(null==e||n.type===e)}function Co(n,e,t){var r=function(a){a>=n.length?t():n[a]?e(n[a],(function(){r(a+1)})):r(a+1)};r(0)}function To(n){return function(e,t,r){var a=!1,i=0,o=null;Ao(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){a=!0,i++;var l,p=Eo((function(e){var a;((a=e).__esModule||Io&&"Module"===a[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:Ni.extend(e),t.components[s]=e,--i<=0&&r()})),c=Eo((function(n){var e="Failed to resolve async component "+s+": "+n;o||(o=ko(n)?n:new Error(e),r(o))}));try{l=n(p,c)}catch(n){c(n)}if(l)if("function"==typeof l.then)l.then(p,c);else{var d=l.component;d&&"function"==typeof d.then&&d.then(p,c)}}})),a||r()}}function Ao(n,e){return Bo(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function Bo(n){return Array.prototype.concat.apply([],n)}var Io="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Eo(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var Po=function(n,e){this.router=n,this.base=function(n){if(!n)if(Wi){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=mi,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function _o(n,e,t,r){var a=Ao(n,(function(n,r,a,i){var o=function(n,e){"function"!=typeof n&&(n=Ni.extend(n));return n.options[e]}(n,e);if(o)return Array.isArray(o)?o.map((function(n){return t(n,r,a,i)})):t(o,r,a,i)}));return Bo(r?a.reverse():a)}function Mo(n,e){if(e)return function(){return n.apply(e,arguments)}}Po.prototype.listen=function(n){this.cb=n},Po.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},Po.prototype.onError=function(n){this.errorCbs.push(n)},Po.prototype.transitionTo=function(n,e,t){var r,a=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var i=this.current;this.confirmTransition(r,(function(){a.updateRoute(r),e&&e(r),a.ensureURL(),a.router.afterHooks.forEach((function(n){n&&n(r,i)})),a.ready||(a.ready=!0,a.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!a.ready&&(jo(n,vo.redirected)&&i===mi||(a.ready=!0,a.readyErrorCbs.forEach((function(e){e(n)}))))}))},Po.prototype.confirmTransition=function(n,e,t){var r=this,a=this.current;this.pending=n;var i,o,s=function(n){!jo(n)&&ko(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},l=n.matched.length-1,p=a.matched.length-1;if(hi(n,a)&&l===p&&n.matched[l]===a.matched[p])return this.ensureURL(),n.hash&&io(this.router,a,n,!1),s(((o=wo(i=a,n,vo.duplicated,'Avoided redundant navigation to current location: "'+i.fullPath+'".')).name="NavigationDuplicated",o));var c=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),d=c.updated,g=c.deactivated,u=c.activated,m=[].concat(function(n){return _o(n,"beforeRouteLeave",Mo,!0)}(g),this.router.beforeHooks,function(n){return _o(n,"beforeRouteUpdate",Mo)}(d),u.map((function(n){return n.beforeEnter})),To(u)),b=function(e,t){if(r.pending!==n)return s(xo(a,n));try{e(n,a,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return wo(n,e,vo.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(a,n))):ko(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(yo(a,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};Co(m,b,(function(){Co(function(n){return _o(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,a,i){return n(r,a,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),i(n)}))}}(n,t,r)}))}(u).concat(r.router.resolveHooks),b,(function(){if(r.pending!==n)return s(xo(a,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){yi(n)}))}))}))},Po.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},Po.prototype.setupListeners=function(){},Po.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=mi,this.pending=null};var Ro=function(n){function e(e,t){n.call(this,e,t),this._startLocation=Do(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=bo&&t;r&&this.listeners.push(ao());var a=function(){var t=n.current,a=Do(n.base);n.current===mi&&a===n._startLocation||n.transitionTo(a,(function(n){r&&io(e,n,t,!0)}))};window.addEventListener("popstate",a),this.listeners.push((function(){window.removeEventListener("popstate",a)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){fo(ki(r.base+n.fullPath)),io(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){ho(ki(r.base+n.fullPath)),io(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(Do(this.base)!==this.current.fullPath){var e=ki(this.base+this.current.fullPath);n?fo(e):ho(e)}},e.prototype.getCurrentLocation=function(){return Do(this.base)},e}(Po);function Do(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(ki(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var zo=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=Do(n);if(!/^\/#/.test(e))return window.location.replace(ki(n+"/#"+e)),!0}(this.base)||Oo()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=bo&&e;t&&this.listeners.push(ao());var r=function(){var e=n.current;Oo()&&n.transitionTo(Lo(),(function(r){t&&io(n.router,r,e,!0),bo||Fo(r.fullPath)}))},a=bo?"popstate":"hashchange";window.addEventListener(a,r),this.listeners.push((function(){window.removeEventListener(a,r)}))}},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){qo(n.fullPath),io(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Fo(n.fullPath),io(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;Lo()!==e&&(n?qo(e):Fo(e))},e.prototype.getCurrentLocation=function(){return Lo()},e}(Po);function Oo(){var n=Lo();return"/"===n.charAt(0)||(Fo("/"+n),!1)}function Lo(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function Jo(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function qo(n){bo?fo(Jo(n)):window.location.hash=n}function Fo(n){bo?ho(Jo(n)):window.location.replace(Jo(n))}var Uo=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){jo(n,vo.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Po),No=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Qi(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!bo&&!1!==n.fallback,this.fallback&&(e="hash"),Wi||(e="abstract"),this.mode=e,e){case"history":this.history=new Ro(this,n.base);break;case"hash":this.history=new zo(this,n.base,this.fallback);break;case"abstract":this.history=new Uo(this,n.base);break;default:0}},Ho={currentRoute:{configurable:!0}};No.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Ho.currentRoute.get=function(){return this.history&&this.history.current},No.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof Ro||t instanceof zo){var r=function(n){t.setupListeners(),function(n){var r=t.current,a=e.options.scrollBehavior;bo&&a&&"fullPath"in n&&io(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},No.prototype.beforeEach=function(n){return $o(this.beforeHooks,n)},No.prototype.beforeResolve=function(n){return $o(this.resolveHooks,n)},No.prototype.afterEach=function(n){return $o(this.afterHooks,n)},No.prototype.onReady=function(n,e){this.history.onReady(n,e)},No.prototype.onError=function(n){this.history.onError(n)},No.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},No.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},No.prototype.go=function(n){this.history.go(n)},No.prototype.back=function(){this.go(-1)},No.prototype.forward=function(){this.go(1)},No.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},No.prototype.resolve=function(n,e,t){var r=Ui(n,e=e||this.history.current,t,this),a=this.match(r,e),i=a.redirectedFrom||a.fullPath;return{location:r,route:a,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?ki(n+"/"+r):r}(this.history.base,i,this.mode),normalizedTo:r,resolved:a}},No.prototype.getRoutes=function(){return this.matcher.getRoutes()},No.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==mi&&this.history.transitionTo(this.history.getCurrentLocation())},No.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==mi&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(No.prototype,Ho);var Vo=No;function $o(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}No.install=function n(e){if(!n.installed||Ni!==e){n.installed=!0,Ni=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",xi),e.component("RouterLink",Vi);var a=e.config.optionMergeStrategies;a.beforeRouteEnter=a.beforeRouteLeave=a.beforeRouteUpdate=a.created}},No.version="3.6.5",No.isNavigationFailure=jo,No.NavigationFailureType=vo,No.START_LOCATION=mi,Wi&&window.Vue&&window.Vue.use(No);t(107);t(129),t(16);var Wo={NotFound:()=>Promise.all([t.e(0),t.e(4)]).then(t.bind(null,342)),Layout:()=>Promise.all([t.e(0),t.e(2)]).then(t.bind(null,341))},Xo={"v-4f55c4ec":()=>t.e(5).then(t.bind(null,343)),"v-55b8f14c":()=>t.e(7).then(t.bind(null,344)),"v-7f7df8a0":()=>t.e(9).then(t.bind(null,345)),"v-b55d218c":()=>t.e(6).then(t.bind(null,346)),"v-ad888434":()=>t.e(8).then(t.bind(null,347)),"v-cbe3e38e":()=>t.e(10).then(t.bind(null,348)),"v-4c6b8695":()=>t.e(11).then(t.bind(null,349)),"v-0a3e806a":()=>t.e(12).then(t.bind(null,350)),"v-a011e00e":()=>t.e(13).then(t.bind(null,351)),"v-b5170794":()=>t.e(14).then(t.bind(null,352)),"v-359ace56":()=>t.e(15).then(t.bind(null,353)),"v-0ef44af3":()=>t.e(16).then(t.bind(null,354)),"v-ec12120a":()=>t.e(17).then(t.bind(null,355)),"v-a873abde":()=>t.e(19).then(t.bind(null,356)),"v-6447466a":()=>t.e(18).then(t.bind(null,357)),"v-bc19b5fc":()=>t.e(20).then(t.bind(null,358)),"v-464c8937":()=>t.e(21).then(t.bind(null,359)),"v-12c0ceb0":()=>t.e(22).then(t.bind(null,360)),"v-32803cf9":()=>t.e(24).then(t.bind(null,361)),"v-1a5daf91":()=>t.e(23).then(t.bind(null,362)),"v-26a96ffb":()=>t.e(25).then(t.bind(null,363)),"v-77b7c09e":()=>t.e(26).then(t.bind(null,364)),"v-60d8b9e6":()=>t.e(27).then(t.bind(null,365)),"v-8f04575e":()=>t.e(29).then(t.bind(null,366)),"v-6cd7991c":()=>t.e(28).then(t.bind(null,367)),"v-11054c30":()=>t.e(30).then(t.bind(null,368)),"v-5bd37d3c":()=>t.e(31).then(t.bind(null,369)),"v-ca7af3d6":()=>t.e(32).then(t.bind(null,370)),"v-4d1c67ea":()=>t.e(33).then(t.bind(null,371)),"v-9a6a8e22":()=>t.e(35).then(t.bind(null,372)),"v-b009604a":()=>t.e(34).then(t.bind(null,373)),"v-ab53d220":()=>t.e(36).then(t.bind(null,374)),"v-44814011":()=>t.e(37).then(t.bind(null,375)),"v-1eb14240":()=>t.e(38).then(t.bind(null,376)),"v-5be0fc7d":()=>t.e(40).then(t.bind(null,377)),"v-35ee501b":()=>t.e(39).then(t.bind(null,378)),"v-361cf50d":()=>t.e(41).then(t.bind(null,379)),"v-f86530fc":()=>t.e(43).then(t.bind(null,380)),"v-c6474816":()=>t.e(42).then(t.bind(null,381)),"v-443c98b2":()=>t.e(44).then(t.bind(null,382)),"v-cab5a862":()=>t.e(45).then(t.bind(null,383)),"v-06bc9c3d":()=>t.e(46).then(t.bind(null,384)),"v-059d2e9c":()=>t.e(47).then(t.bind(null,385)),"v-3cee8b95":()=>t.e(48).then(t.bind(null,386)),"v-63e74542":()=>t.e(49).then(t.bind(null,387)),"v-27e9310e":()=>t.e(51).then(t.bind(null,388)),"v-3caac053":()=>t.e(50).then(t.bind(null,389)),"v-515c830f":()=>t.e(52).then(t.bind(null,390)),"v-2460a6bd":()=>t.e(53).then(t.bind(null,391)),"v-72547bfe":()=>t.e(54).then(t.bind(null,392)),"v-3a1ac617":()=>t.e(56).then(t.bind(null,393)),"v-30e174be":()=>t.e(55).then(t.bind(null,394)),"v-9761e2fa":()=>t.e(59).then(t.bind(null,395)),"v-94543dd8":()=>t.e(57).then(t.bind(null,396)),"v-6078057e":()=>t.e(58).then(t.bind(null,397)),"v-a6563758":()=>t.e(60).then(t.bind(null,398)),"v-2541fab0":()=>t.e(61).then(t.bind(null,399)),"v-033e2880":()=>t.e(63).then(t.bind(null,400)),"v-65fa0e1c":()=>t.e(62).then(t.bind(null,401)),"v-1a8a1886":()=>t.e(64).then(t.bind(null,402)),"v-07a8e71a":()=>t.e(65).then(t.bind(null,403)),"v-7765fe32":()=>t.e(67).then(t.bind(null,404)),"v-3d0b52f2":()=>t.e(66).then(t.bind(null,405)),"v-3b93de07":()=>t.e(68).then(t.bind(null,406)),"v-fe19e418":()=>t.e(69).then(t.bind(null,407))};function Go(n){const e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}const Qo=/-(\w)/g,Yo=Go(n=>n.replace(Qo,(n,e)=>e?e.toUpperCase():"")),Zo=/\B([A-Z])/g,Ko=Go(n=>n.replace(Zo,"-$1").toLowerCase()),ns=Go(n=>n.charAt(0).toUpperCase()+n.slice(1));function es(n,e){if(!e)return;if(n(e))return n(e);return e.includes("-")?n(ns(Yo(e))):n(ns(e))||n(Ko(e))}const ts=Object.assign({},Wo,Xo),rs=n=>ts[n],as=n=>Xo[n],is=n=>Wo[n],os=n=>Wt.component(n);function ss(n){return es(as,n)}function ls(n){return es(is,n)}function ps(n){return es(rs,n)}function cs(n){return es(os,n)}function ds(...n){return Promise.all(n.filter(n=>n).map(async n=>{if(!cs(n)&&ps(n)){const e=await ps(n)();Wt.component(n,e.default)}}))}function gs(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var us=t(92),ms=t.n(us),bs=t(93),fs=t.n(bs),hs={created(){if(this.siteMeta=this.$site.headTags.filter(([n])=>"meta"===n).map(([n,e])=>e),this.$ssrContext){const e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map(n=>{let e="<meta";return Object.keys(n).forEach(t=>{e+=` ${t}="${fs()(n[t])}"`}),e+">"}).join("\n    "):"",this.$ssrContext.canonicalLink=ys(this.$canonicalUrl)}var n},mounted(){this.currentMetaTags=[...document.querySelectorAll("meta")],this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta(){document.title=this.$title,document.documentElement.lang=this.$lang;const n=this.getMergedMetaTags();this.currentMetaTags=xs(n,this.currentMetaTags)},getMergedMetaTags(){const n=this.$page.frontmatter.meta||[];return ms()([{name:"description",content:this.$description}],n,this.siteMeta,ws)},updateCanonicalLink(){vs(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",ys(this.$canonicalUrl))}},watch:{$page(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy(){xs(null,this.currentMetaTags),vs()}};function vs(){const n=document.querySelector("link[rel='canonical']");n&&n.remove()}function ys(n=""){return n?`<link href="${n}" rel="canonical" />`:""}function xs(n,e){if(e&&[...e].filter(n=>n.parentNode===document.head).forEach(n=>document.head.removeChild(n)),n)return n.map(n=>{const e=document.createElement("meta");return Object.keys(n).forEach(t=>{e.setAttribute(t,n[t])}),document.head.appendChild(e),e})}function ws(n){for(const e of["name","property","itemprop"])if(n.hasOwnProperty(e))return n[e]+e;return JSON.stringify(n)}var Ss=t(52),ks={mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(Ss)()((function(){this.setActiveHash()}),300),setActiveHash(){const n=[].slice.call(document.querySelectorAll(".sidebar-link")),e=[].slice.call(document.querySelectorAll(".header-anchor")).filter(e=>n.some(n=>n.hash===e.hash)),t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),r=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=window.innerHeight+t;for(let n=0;n<e.length;n++){const i=e[n],o=e[n+1],s=0===n&&0===t||t>=i.parentElement.offsetTop+10&&(!o||t<o.parentElement.offsetTop-10),l=decodeURIComponent(this.$route.hash);if(s&&l!==decodeURIComponent(i.hash)){const t=i;if(a===r)for(let t=n+1;t<e.length;t++)if(l===decodeURIComponent(e[t].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(t.hash),()=>{this.$nextTick(()=>{this.$vuepress.$set("disableScrollBehavior",!1)})})}}}},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)}},js=t(24),Cs=t.n(js),Ts={mounted(){Cs.a.configure({showSpinner:!1}),this.$router.beforeEach((n,e,t)=>{n.path===e.path||Wt.component(n.name)||Cs.a.start(),t()}),this.$router.afterEach(()=>{Cs.a.done(),this.isSidebarOpen=!1})}};t(241),t(242);class As{constructor(){this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}show({text:n="",duration:e=3e3}){let t=document.createElement("div");t.className="message move-in",t.innerHTML=`\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">${n}</div>\n    `,this.containerEl.appendChild(t),e>0&&setTimeout(()=>{this.close(t)},e)}close(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",()=>{n.remove()})}}var Bs={mounted(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy(){setTimeout(()=>{(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach(n=>{document.querySelectorAll(n).forEach(this.generateCopyButton)})},1e3)},generateCopyButton(n){if(n.classList.contains("codecopy-enabled"))return;const e=document.createElement("i");e.className="code-copy",e.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',e.title="Copy to clipboard",e.addEventListener("click",()=>{this.copyToClipboard(n.innerText)}),n.appendChild(e),n.classList.add("codecopy-enabled")},copyToClipboard(n){const e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy");(new As).show({text:"å¤å¶æå",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var Is={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},Es={},Ps=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},_s=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:Is[n]},Ms=function n(e,t,r){var a=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))a[n]=t[n];else{var e=n.replace("data","");a.dataset[e]=t[n]}})),r&&r.forEach((function(e){var t=e.tag,r=e.attrs,i=e.children;a.appendChild(n(t,r,i))})),a},Rs=function(n,e,t){var r,a=(r=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(r));return 1!==a.length||t?a:a[0]},Ds=function(n,e){var t,r,a=n.match(/<style>([\s\S]+)<\/style>/),i=n.match(/<template>([\s\S]+)<\/template>/),o=n.match(/<script>([\s\S]+)<\/script>/),s={css:a&&a[1].replace(/^\n|\n$/g,""),html:i&&i[1].replace(/^\n|\n$/g,""),js:o&&o[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=Ps(s.html),s.jsTpl=(t=s.js,r=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(r,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),r="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),a=window.Babel?window.Babel.transform(r,{presets:["es2015"]}).code:r,i=[eval][0](a);return i.template=e,i}(s.js,s.html);var l=_s("vue");return s.jsLib.unshift(l),s},zs=function(n,e){var t,r=n.match(/<style>([\s\S]+)<\/style>/),a=n.match(/<html>([\s\S]+)<\/html>/),i=n.match(/<script>([\s\S]+)<\/script>/),o={css:r&&r[1].replace(/^\n|\n$/g,""),html:a&&a[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return o.htmlTpl=o.html,o.jsTpl=o.js,o.script=(t=o.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),o},Os=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function Ls(){var n=Rs(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=Rs(n,"vuepress-plugin-demo-block__code"),t=Rs(n,"vuepress-plugin-demo-block__display"),r=Rs(n,"vuepress-plugin-demo-block__footer"),a=Rs(t,"vuepress-plugin-demo-block__app"),i=decodeURIComponent(n.dataset.code),o=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);o=o?JSON.parse(o):{};var l=e.querySelector("div").clientHeight,p="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,r="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),a=new Function("return ".concat(r))(),i={js:a,css:a.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:Os(n),htmlTpl:Ps("")},o=_s("react"),s=_s("reactDOM");return i.jsLib.unshift(o,s),i}(i,o):"vanilla"===s?zs(i,o):Ds(i,o),c=Ms("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(r.appendChild(c),c.addEventListener("click",Js.bind(null,c,l,e,r)),_s("jsfiddle")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,i=n.cssLib,o=a.concat(i).concat(_s("cssLib")).concat(_s("jsLib")).join(",");return Ms("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:r}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:o}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(p)),_s("codepen")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,i=n.cssLib,o=JSON.stringify({css:e,html:t,js:r,js_external:a.concat(_s("jsLib")).join(";"),css_external:i.concat(_s("cssLib")).join(";"),layout:_s("codepenLayout"),js_pre_processor:_s("codepenJsProcessor"),editors:_s("codepenEditors")});return Ms("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:o}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(p)),void 0!==o.horizontal?o.horizontal:_s("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var d=e.firstChild.cloneNode(!0);d.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(d)}if(p.css&&function(n){if(!Es[n]){var e=Ms("style",{innerHTML:n});document.body.appendChild(e),Es[n]=!0}}(p.css),"react"===s)ReactDOM.render(React.createElement(p.js),a);else if("vue"===s){var g=(new(Vue.extend(p.script))).$mount();a.appendChild(g.$el)}else"vanilla"===s&&(a.innerHTML=p.html,new Function("return (function(){".concat(p.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){Ls()}),300)}function Js(n,e,t,r){var a="1"!==n.dataset.isExpand;t.style.height=a?"".concat(e,"px"):0,a?r.classList.add("vuepress-plugin-demo-block__show-link"):r.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=a?"1":"0"}var qs={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},Ls()},updated:function(){Ls()}},Fs="auto",Us="zoom-in",Ns="zoom-out",Hs="grab",Vs="move";function $s(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={passive:!1};r?n.addEventListener(e,t,a):n.removeEventListener(e,t,a)}function Ws(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function Xs(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Gs(n,e,t){!function(n){var e=Qs,t=Ys;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var a=n.transform;delete n.transform,n[t]=a}}(e);var r=n.style,a={};for(var i in e)t&&(a[i]=r[i]||""),r[i]=e[i];return a}var Qs="transition",Ys="transform",Zs="transform",Ks="transitionend";var nl=function(){},el={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:nl,onClose:nl,onGrab:nl,onMove:nl,onRelease:nl,onBeforeOpen:nl,onBeforeClose:nl,onBeforeGrab:nl,onBeforeRelease:nl,onImageLoading:nl,onImageLoaded:nl},tl={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),al(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,a=this.lastScrollPosition.y-t,i=this.options.scrollThreshold;(Math.abs(a)>=i||Math.abs(r)>=i)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(rl(n)&&!al(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){rl(n)&&!al(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function rl(n){return 0===n.button}function al(n){return n.metaKey||n.ctrlKey}var il={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Gs(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),$s(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Gs(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sl=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),ll=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pl={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Xs(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,a=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?Hs:Ns,transition:Zs+"\n        "+r+"s\n        "+a,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Gs(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Gs(this.el,{transform:"none"})},grab:function(n,e,t){var r=cl(),a=r.x-n,i=r.y-e;Gs(this.el,{cursor:Vs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=cl(),a=r.x-n,i=r.y-e;Gs(this.el,{transition:Zs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+i)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Gs(this.el,this.styleClose)},restoreOpenStyle:function(){Gs(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=cl(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,a=r.customSize,i=r.scaleBase;if(!a&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(a&&"object"===(void 0===a?"undefined":ol(a)))return{x:a.width/this.rect.width,y:a.height/this.rect.height};var o=this.rect.width/2,s=this.rect.height/2,l=cl(),p={x:l.x-o,y:l.y-s},c=p.x/o,d=p.y/s,g=i+Math.min(c,d);if(a&&"string"==typeof a){var u=t||this.el.naturalWidth,m=e||this.el.naturalHeight,b=parseFloat(a)*u/(100*this.rect.width),f=parseFloat(a)*m/(100*this.rect.height);if(g>b||g>f)return{x:b,y:f}}return{x:g,y:g}}};function cl(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function dl(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){$s(n,r,e[r],t)}))}var gl=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(pl),this.overlay=Object.create(il),this.handler=Object.create(tl),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=ll({},el,e),this.overlay.init(this),this.handler.init(this)}return sl(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=Us,$s(n,"click",this.handler.click),this.options.preloadImage&&Ws(Xs(n)));return this}},{key:"config",value:function(n){return n?(ll(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var a=this.target.srcOriginal;null!=a&&(this.options.onImageLoading(r),Ws(a,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),$s(document,"scroll",this.handler.scroll),$s(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&$s(window,"resize",this.handler.resizeWindow);var i=function n(){$s(r,Ks,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&dl(document,e.handler,!0),t(r)};return $s(r,Ks,i),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=Fs,this.overlay.fadeOut(),this.target.zoomOut(),$s(document,"scroll",this.handler.scroll,!1),$s(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&$s(window,"resize",this.handler.resizeWindow,!1);var r=function r(){$s(t,Ks,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&dl(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return $s(t,Ks,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var a=this.target.el;this.options.onBeforeGrab(a),this.released=!1,this.target.grab(n,e,t);var i=function n(){$s(a,Ks,n,!1),r(a)};return $s(a,Ks,i),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Vs,this.target.move(n,e,t);var a=this.target.el,i=function n(){$s(a,Ks,n,!1),r(a)};return $s(a,Ks,i),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=Fs,this.target.restoreOpenStyle();var r=function r(){$s(t,Ks,r,!1),n.lock=!1,n.released=!0,e(t)};return $s(t,Ks,r),this}}}]),n}();const ul=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),ml=Number("500");class bl{constructor(){this.instance=new gl(ul)}update(n=".theme-vdoing-content img:not(.no-zoom)"){"undefined"!=typeof window&&this.instance.listen(n)}updateDelay(n=".theme-vdoing-content img:not(.no-zoom)",e=ml){setTimeout(()=>this.update(n),e)}}var fl=[hs,ks,Ts,Bs,qs,{watch:{"$page.path"(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted(){this.$vuepress.zooming=new bl,this.$vuepress.zooming.updateDelay()}}],hl={name:"GlobalLayout",computed:{layout(){const n=this.getLayout();return gs("layout",n),Wt.component(n)}},methods:{getLayout(){if(this.$page.path){const n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},vl=t(4),yl=Object(vl.a)(hl,(function(){return(0,this._self._c)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),n[e].push(...t);break;default:throw new Error("Unknown option name.")}}(yl,"mixins",fl);const xl=[{name:"v-4f55c4ec",path:"/pages/9d3091/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-4f55c4ec").then(t)}},{path:"/pages/9d3091/index.html",redirect:"/pages/9d3091/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/01.Springæ¦è¿°.html",redirect:"/pages/9d3091/"},{name:"v-55b8f14c",path:"/pages/dbf521/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-55b8f14c").then(t)}},{path:"/pages/dbf521/index.html",redirect:"/pages/dbf521/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/22.SpringBootåºæ¬åç.html",redirect:"/pages/dbf521/"},{name:"v-7f7df8a0",path:"/pages/9e0b67/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-7f7df8a0").then(t)}},{path:"/pages/9e0b67/index.html",redirect:"/pages/9e0b67/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/",redirect:"/pages/9e0b67/"},{name:"v-b55d218c",path:"/pages/430f53/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-b55d218c").then(t)}},{path:"/pages/430f53/index.html",redirect:"/pages/430f53/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/21.SpringBootç¥è¯å¾è°±.html",redirect:"/pages/430f53/"},{name:"v-ad888434",path:"/pages/db33b0/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-ad888434").then(t)}},{path:"/pages/db33b0/index.html",redirect:"/pages/db33b0/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/99.Springé¢è¯.html",redirect:"/pages/db33b0/"},{name:"v-cbe3e38e",path:"/pages/68097d/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-cbe3e38e").then(t)}},{path:"/pages/68097d/index.html",redirect:"/pages/68097d/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/01.SpringBean.html",redirect:"/pages/68097d/"},{name:"v-4c6b8695",path:"/pages/915530/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-4c6b8695").then(t)}},{path:"/pages/915530/index.html",redirect:"/pages/915530/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/02.SpringIoC.html",redirect:"/pages/915530/"},{name:"v-0a3e806a",path:"/pages/9a6f6b/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-0a3e806a").then(t)}},{path:"/pages/9a6f6b/index.html",redirect:"/pages/9a6f6b/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/03.Springä¾èµæ¥æ¾.html",redirect:"/pages/9a6f6b/"},{name:"v-a011e00e",path:"/pages/f61a1c/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-a011e00e").then(t)}},{path:"/pages/f61a1c/index.html",redirect:"/pages/f61a1c/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/04.Springä¾èµæ³¨å¥.html",redirect:"/pages/f61a1c/"},{name:"v-b5170794",path:"/pages/a5f257/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-b5170794").then(t)}},{path:"/pages/a5f257/index.html",redirect:"/pages/a5f257/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/05.SpringIoCä¾èµæ¥æº.html",redirect:"/pages/a5f257/"},{name:"v-359ace56",path:"/pages/8289f5/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-359ace56").then(t)}},{path:"/pages/8289f5/index.html",redirect:"/pages/8289f5/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/06.SpringBeanä½ç¨å.html",redirect:"/pages/8289f5/"},{name:"v-0ef44af3",path:"/pages/4ab176/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-0ef44af3").then(t)}},{path:"/pages/4ab176/index.html",redirect:"/pages/4ab176/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/07.SpringBeançå½å¨æ.html",redirect:"/pages/4ab176/"},{name:"v-ec12120a",path:"/pages/55f315/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-ec12120a").then(t)}},{path:"/pages/55f315/index.html",redirect:"/pages/55f315/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/08.Springéç½®åæ°æ®.html",redirect:"/pages/55f315/"},{name:"v-a873abde",path:"/pages/53aedb/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-a873abde").then(t)}},{path:"/pages/53aedb/index.html",redirect:"/pages/53aedb/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/10.SpringAop.html",redirect:"/pages/53aedb/"},{name:"v-6447466a",path:"/pages/ad472e/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-6447466a").then(t)}},{path:"/pages/ad472e/index.html",redirect:"/pages/ad472e/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/09.Springåºç¨ä¸ä¸æçå½å¨æ.html",redirect:"/pages/ad472e/"},{name:"v-bc19b5fc",path:"/pages/a1549f/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-bc19b5fc").then(t)}},{path:"/pages/a1549f/index.html",redirect:"/pages/a1549f/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/20.Springèµæºç®¡ç.html",redirect:"/pages/a1549f/"},{name:"v-464c8937",path:"/pages/fe6aad/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-464c8937").then(t)}},{path:"/pages/fe6aad/index.html",redirect:"/pages/fe6aad/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/21.Springæ ¡éª.html",redirect:"/pages/fe6aad/"},{name:"v-12c0ceb0",path:"/pages/267b4c/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-12c0ceb0").then(t)}},{path:"/pages/267b4c/index.html",redirect:"/pages/267b4c/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/22.Springæ°æ®ç»å®.html",redirect:"/pages/267b4c/"},{name:"v-32803cf9",path:"/pages/1f743f/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-32803cf9").then(t)}},{path:"/pages/1f743f/index.html",redirect:"/pages/1f743f/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/24.SpringEL.html",redirect:"/pages/1f743f/"},{name:"v-1a5daf91",path:"/pages/6662dc/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-1a5daf91").then(t)}},{path:"/pages/6662dc/index.html",redirect:"/pages/6662dc/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/23.Springç±»åè½¬æ¢.html",redirect:"/pages/6662dc/"},{name:"v-26a96ffb",path:"/pages/cca414/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-26a96ffb").then(t)}},{path:"/pages/cca414/index.html",redirect:"/pages/cca414/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/25.Springäºä»¶.html",redirect:"/pages/cca414/"},{name:"v-77b7c09e",path:"/pages/b5b8ad/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-77b7c09e").then(t)}},{path:"/pages/b5b8ad/index.html",redirect:"/pages/b5b8ad/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/26.Springå½éå.html",redirect:"/pages/b5b8ad/"},{name:"v-60d8b9e6",path:"/pages/175cbd/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-60d8b9e6").then(t)}},{path:"/pages/175cbd/index.html",redirect:"/pages/175cbd/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/27.Springæ³åå¤ç.html",redirect:"/pages/175cbd/"},{name:"v-8f04575e",path:"/pages/03d838/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-8f04575e").then(t)}},{path:"/pages/03d838/index.html",redirect:"/pages/03d838/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/29.SpringEnvironmentæ½è±¡.html",redirect:"/pages/03d838/"},{name:"v-6cd7991c",path:"/pages/b6556f/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-6cd7991c").then(t)}},{path:"/pages/b6556f/index.html",redirect:"/pages/b6556f/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/28.Springæ³¨è§£.html",redirect:"/pages/b6556f/"},{name:"v-11054c30",path:"/pages/950e4d/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-11054c30").then(t)}},{path:"/pages/950e4d/index.html",redirect:"/pages/950e4d/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/31.SpringBootä¹å¿«éå¥é¨.html",redirect:"/pages/950e4d/"},{name:"v-5bd37d3c",path:"/pages/0fb992/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-5bd37d3c").then(t)}},{path:"/pages/0fb992/index.html",redirect:"/pages/0fb992/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/32.SpringBootä¹å±æ§å è½½.html",redirect:"/pages/0fb992/"},{name:"v-ca7af3d6",path:"/pages/cb598e/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-ca7af3d6").then(t)}},{path:"/pages/cb598e/index.html",redirect:"/pages/cb598e/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/33.SpringBootä¹Profile.html",redirect:"/pages/cb598e/"},{name:"v-4d1c67ea",path:"/pages/5e7c20/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-4d1c67ea").then(t)}},{path:"/pages/5e7c20/index.html",redirect:"/pages/5e7c20/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/",redirect:"/pages/5e7c20/"},{name:"v-9a6a8e22",path:"/pages/cf19fd/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-9a6a8e22").then(t)}},{path:"/pages/cf19fd/index.html",redirect:"/pages/cf19fd/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/02.Springä¹JDBC.html",redirect:"/pages/cf19fd/"},{name:"v-b009604a",path:"/pages/1b774c/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-b009604a").then(t)}},{path:"/pages/1b774c/index.html",redirect:"/pages/1b774c/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/01.Springä¹æ°æ®æº.html",redirect:"/pages/1b774c/"},{name:"v-ab53d220",path:"/pages/128c54/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-ab53d220").then(t)}},{path:"/pages/128c54/index.html",redirect:"/pages/128c54/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/03.Springä¹äºå¡.html",redirect:"/pages/128c54/"},{name:"v-44814011",path:"/pages/a03d7b/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-44814011").then(t)}},{path:"/pages/a03d7b/index.html",redirect:"/pages/a03d7b/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/04.Springä¹JPA.html",redirect:"/pages/a03d7b/"},{name:"v-1eb14240",path:"/pages/88219e/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-1eb14240").then(t)}},{path:"/pages/88219e/index.html",redirect:"/pages/88219e/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/10.SpringéæMybatis.html",redirect:"/pages/88219e/"},{name:"v-5be0fc7d",path:"/pages/65e4a2/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-5be0fc7d").then(t)}},{path:"/pages/65e4a2/index.html",redirect:"/pages/65e4a2/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/21.Springè®¿é®Redis.html",redirect:"/pages/65e4a2/"},{name:"v-35ee501b",path:"/pages/191cdb/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-35ee501b").then(t)}},{path:"/pages/191cdb/index.html",redirect:"/pages/191cdb/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/20.SpringDataç»¼å.html",redirect:"/pages/191cdb/"},{name:"v-361cf50d",path:"/pages/db2a41/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-361cf50d").then(t)}},{path:"/pages/db2a41/index.html",redirect:"/pages/db2a41/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/22.Springè®¿é®MongoDB.html",redirect:"/pages/db2a41/"},{name:"v-f86530fc",path:"/pages/b912d1/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-f86530fc").then(t)}},{path:"/pages/b912d1/index.html",redirect:"/pages/b912d1/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/",redirect:"/pages/b912d1/"},{name:"v-c6474816",path:"/pages/fac14c/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-c6474816").then(t)}},{path:"/pages/fac14c/index.html",redirect:"/pages/fac14c/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/23.Springè®¿é®Elasticsearch.html",redirect:"/pages/fac14c/"},{name:"v-443c98b2",path:"/pages/65351b/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-443c98b2").then(t)}},{path:"/pages/65351b/index.html",redirect:"/pages/65351b/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/01.SpringWebç»¼è¿°.html",redirect:"/pages/65351b/"},{name:"v-cab5a862",path:"/pages/5d002f/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-cab5a862").then(t)}},{path:"/pages/5d002f/index.html",redirect:"/pages/5d002f/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/02.SpringWebåºç¨.html",redirect:"/pages/5d002f/"},{name:"v-06bc9c3d",path:"/pages/20287b/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-06bc9c3d").then(t)}},{path:"/pages/20287b/index.html",redirect:"/pages/20287b/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/03.DispatcherServlet.html",redirect:"/pages/20287b/"},{name:"v-059d2e9c",path:"/pages/4a164d/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-059d2e9c").then(t)}},{path:"/pages/4a164d/index.html",redirect:"/pages/4a164d/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/04.Springè¿æ»¤å¨.html",redirect:"/pages/4a164d/"},{name:"v-3cee8b95",path:"/pages/1d2954/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-3cee8b95").then(t)}},{path:"/pages/1d2954/index.html",redirect:"/pages/1d2954/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/05.Springè·¨å.html",redirect:"/pages/1d2954/"},{name:"v-63e74542",path:"/pages/251e31/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-63e74542").then(t)}},{path:"/pages/251e31/index.html",redirect:"/pages/251e31/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/06.Springè§å¾.html",redirect:"/pages/251e31/"},{name:"v-27e9310e",path:"/pages/e2586a/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-27e9310e").then(t)}},{path:"/pages/e2586a/index.html",redirect:"/pages/e2586a/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/",redirect:"/pages/e2586a/"},{name:"v-3caac053",path:"/pages/ad0516/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-3caac053").then(t)}},{path:"/pages/ad0516/index.html",redirect:"/pages/ad0516/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/21.SpringBootä¹åºç¨EasyUI.html",redirect:"/pages/ad0516/"},{name:"v-515c830f",path:"/pages/92add2/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-515c830f").then(t)}},{path:"/pages/92add2/index.html",redirect:"/pages/92add2/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/01.SpringBootä¹å¼æ­¥è¯·æ±.html",redirect:"/pages/92add2/"},{name:"v-2460a6bd",path:"/pages/676725/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-2460a6bd").then(t)}},{path:"/pages/676725/index.html",redirect:"/pages/676725/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/02.SpringBootä¹Json.html",redirect:"/pages/676725/"},{name:"v-72547bfe",path:"/pages/2586f1/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-72547bfe").then(t)}},{path:"/pages/2586f1/index.html",redirect:"/pages/2586f1/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/03.SpringBootä¹é®ä»¶.html",redirect:"/pages/2586f1/"},{name:"v-3a1ac617",path:"/pages/a311cb/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-3a1ac617").then(t)}},{path:"/pages/a311cb/index.html",redirect:"/pages/a311cb/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/01.Springéæç¼å­.html",redirect:"/pages/a311cb/"},{name:"v-30e174be",path:"/pages/56581b/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-30e174be").then(t)}},{path:"/pages/56581b/index.html",redirect:"/pages/56581b/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/",redirect:"/pages/56581b/"},{name:"v-9761e2fa",path:"/pages/d6025b/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-9761e2fa").then(t)}},{path:"/pages/d6025b/index.html",redirect:"/pages/d6025b/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/",redirect:"/pages/d6025b/"},{name:"v-94543dd8",path:"/pages/a187f0/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-94543dd8").then(t)}},{path:"/pages/a187f0/index.html",redirect:"/pages/a187f0/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/02.Springéæè°åº¦å¨.html",redirect:"/pages/a187f0/"},{name:"v-6078057e",path:"/pages/274fd7/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-6078057e").then(t)}},{path:"/pages/274fd7/index.html",redirect:"/pages/274fd7/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/03.SpringéæDubbo.html",redirect:"/pages/274fd7/"},{name:"v-a6563758",path:"/pages/568352/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-a6563758").then(t)}},{path:"/pages/568352/index.html",redirect:"/pages/568352/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/10.Springå®å¨/01.SpringBootä¹å®å¨å¿«éå¥é¨.html",redirect:"/pages/568352/"},{name:"v-2541fab0",path:"/pages/752c6a/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-2541fab0").then(t)}},{path:"/pages/752c6a/index.html",redirect:"/pages/752c6a/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/01.Spring4åçº§.html",redirect:"/pages/752c6a/"},{name:"v-033e2880",path:"/pages/c013cc/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-033e2880").then(t)}},{path:"/pages/c013cc/index.html",redirect:"/pages/c013cc/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/22.SpringBootä¹Actuator.html",redirect:"/pages/c013cc/"},{name:"v-65fa0e1c",path:"/pages/bac2ce/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-65fa0e1c").then(t)}},{path:"/pages/bac2ce/index.html",redirect:"/pages/bac2ce/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/21.SpringBootä¹banner.html",redirect:"/pages/bac2ce/"},{name:"v-1a8a1886",path:"/pages/6bb8c1/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-1a8a1886").then(t)}},{path:"/pages/6bb8c1/index.html",redirect:"/pages/6bb8c1/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/",redirect:"/pages/6bb8c1/"},{name:"v-07a8e71a",path:"/pages/a1a3d3/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-07a8e71a").then(t)}},{path:"/pages/a1a3d3/index.html",redirect:"/pages/a1a3d3/"},{path:"/01.Java/13.æ¡æ¶/01.Spring/",redirect:"/pages/a1a3d3/"},{name:"v-7765fe32",path:"/categories/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-7765fe32").then(t)}},{path:"/categories/index.html",redirect:"/categories/"},{path:"/@pages/categoriesPage.html",redirect:"/categories/"},{name:"v-3d0b52f2",path:"/archives/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-3d0b52f2").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-3b93de07",path:"/tags/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-3b93de07").then(t)}},{path:"/tags/index.html",redirect:"/tags/"},{path:"/@pages/tagsPage.html",redirect:"/tags/"},{name:"v-fe19e418",path:"/",component:yl,beforeEnter:(n,e,t)=>{ds("Layout","v-fe19e418").then(t)}},{path:"/index.html",redirect:"/"},{path:"*",component:yl}],wl={title:"SPRING TUTORIAL",description:"ð§ spring-tutorial æ¯ä¸ä¸ª Spring æç¨ã",base:"/spring-tutorial/",headTags:[["link",{rel:"icon",href:"/spring-tutorial/img/favicon.ico"}],["meta",{name:"keywords",content:"vuepress,theme,blog,vdoing"}],["meta",{name:"theme-color",content:"#11a8cd"}],["meta",{name:"wwads-cn-verify",content:"mxqWx62nfQQ9ocT4e5DzISHzOWyF4s"}],["script",{src:"https://cdn.wwads.cn/js/makemoney.js",type:"text/javascript"}]],pages:[{title:"Spring Framework ç»¼è¿°",frontmatter:{title:"Spring Framework ç»¼è¿°",date:"2019-11-22T10:46:02.000Z",order:1,categories:["Java","æ¡æ¶","Spring","Springç»¼å"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/9d3091/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/00.Spring%E7%BB%BC%E5%90%88/01.Spring%E6%A6%82%E8%BF%B0.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/01.Springæ¦è¿°.md",key:"v-4f55c4ec",path:"/pages/9d3091/",headers:[{level:2,title:"Spring Framework ç®ä»",slug:"spring-framework-ç®ä»",normalizedTitle:"spring framework ç®ä»",charIndex:26},{level:2,title:"ä¸ºä»ä¹ä½¿ç¨ Spring",slug:"ä¸ºä»ä¹ä½¿ç¨-spring",normalizedTitle:"ä¸ºä»ä¹ä½¿ç¨ spring",charIndex:386},{level:2,title:"æ ¸å¿ææ³",slug:"æ ¸å¿ææ³",normalizedTitle:"æ ¸å¿ææ³",charIndex:1154},{level:3,title:"IoC",slug:"ioc",normalizedTitle:"ioc",charIndex:1179},{level:3,title:"Aop",slug:"aop",normalizedTitle:"aop",charIndex:1185},{level:2,title:"Spring ä½ç³»ç»æ",slug:"spring-ä½ç³»ç»æ",normalizedTitle:"spring ä½ç³»ç»æ",charIndex:2004},{level:3,title:"Core Container",slug:"core-container",normalizedTitle:"core container",charIndex:2138},{level:4,title:"BeanFactory",slug:"beanfactory",normalizedTitle:"beanfactory",charIndex:2167},{level:4,title:"ApplicationContext",slug:"applicationcontext",normalizedTitle:"applicationcontext",charIndex:2193},{level:3,title:"AOP and Instrumentation",slug:"aop-and-instrumentation",normalizedTitle:"aop and instrumentation",charIndex:2222},{level:3,title:"Messaging",slug:"messaging",normalizedTitle:"messaging",charIndex:2256},{level:3,title:"Data Access / Integaration",slug:"data-access-integaration",normalizedTitle:"data access / integaration",charIndex:2276},{level:3,title:"Web",slug:"web",normalizedTitle:"web",charIndex:2313},{level:3,title:"Test",slug:"test",normalizedTitle:"test",charIndex:2327},{level:2,title:"æ¯è¯­",slug:"æ¯è¯­",normalizedTitle:"æ¯è¯­",charIndex:2338}],headersStr:"Spring Framework ç®ä» ä¸ºä»ä¹ä½¿ç¨ Spring æ ¸å¿ææ³ IoC Aop Spring ä½ç³»ç»æ Core Container BeanFactory ApplicationContext AOP and Instrumentation Messaging Data Access / Integaration Web Test æ¯è¯­",content:'# Spring Framework ç»¼è¿°\n\n\n# Spring Framework ç®ä»\n\nSpring Framework æ¯æåæ¬¢è¿çä¼ä¸çº§ Java åºç¨ç¨åºå¼åæ¡æ¶ãç¨äºæå»ºä¼ä¸çº§åºç¨çè½»éçº§ãä¸ç«å¼è§£å³æ¹æ¡ã\n\nå½è°è®ºå°å¤§å°åéæåº¦æ¶ï¼ Spring æ¯è½»éçº§çã Spring æ¡æ¶çåºç¡çæ¬æ¯å¨ 2 MB å·¦å³çã\n\nSpring æ¡æ¶çæ ¸å¿ç¹æ§å¯ä»¥ç¨äºå¼åä»»ä½ Java åºç¨ç¨åºï¼ä½æ¯å¨ Java EE å¹³å°ä¸æå»º web åºç¨ç¨åºæ¯éè¦æ©å±çã Spring æ¡æ¶çç®æ æ¯ä½¿ J2EE å¼ååå¾æ´å®¹æä½¿ç¨ï¼éè¿å¯ç¨åºäº POJO ç¼ç¨æ¨¡åæ¥ä¿è¿è¯å¥½çç¼ç¨å®è·µã\n\nSpring Framework è®¾è®¡çå¿µå¦ä¸ï¼\n\n * åäºè®©éæ©æ å¤ä¸å¨\n * ä½ç°æµ·çº³ç¾å·çç²¾ç¥\n * ä¿æååå¼å®¹æ§\n * ä¸æ³¨ API è®¾è®¡\n * è¿½æ±ä¸¥èçä»£ç è´¨é\n\n\n# ä¸ºä»ä¹ä½¿ç¨ Spring\n\nä¸é¢ååºçæ¯ä½¿ç¨ Spring æ¡æ¶ä¸»è¦çå¥½å¤ï¼\n\n * Spring å¯ä»¥ä½¿å¼åäººåä½¿ç¨ POJOs å¼åä¼ä¸çº§çåºç¨ç¨åºãåªä½¿ç¨ POJOs çå¥½å¤æ¯ä½ ä¸éè¦ä¸ä¸ª EJB å®¹å¨äº§åï¼æ¯å¦ä¸ä¸ªåºç¨ç¨åºæå¡å¨ï¼ä½æ¯ä½ å¯ä»¥éæ©ä½¿ç¨ä¸ä¸ªå¥å£®ç servlet å®¹å¨ï¼æ¯å¦ Tomcat æèä¸äºåä¸äº§åã\n * Spring å¨ä¸ä¸ªååæ¨¡å¼ä¸­æ¯æç»ç»çãå³ä½¿ååç±»çæ°ééå¸¸å¤§ï¼ä½ åªéè¦éæ©ä½ éè¦çé¨åï¼èå¿½ç¥å©ä½çé£é¨åã\n * Spring ä¸ä¼è®©ä½ ç½è´¹åæ°åéå¤å·¥ä½ï¼å®çæ­£çå©ç¨äºä¸äºç°æçææ¯ï¼åå ä¸ª ORM æ¡æ¶ãæ¥å¿æ¡æ¶ãJEEãQuartz å JDK è®¡æ¶å¨ï¼å¶ä»è§å¾ææ¯ã\n * æµè¯ä¸ä¸ªç¨ Spring ç¼åçåºç¨ç¨åºå¾å®¹æï¼å ä¸º environment-dependent ä»£ç è¢«æ¾è¿äºè¿ä¸ªæ¡æ¶ä¸­ãæ­¤å¤ï¼éè¿ä½¿ç¨ JavaBean-style POJOsï¼å®å¨ä½¿ç¨ä¾èµæ³¨å¥æ³¨å¥æµè¯æ°æ®æ¶åå¾æ´å®¹æã\n * Spring ç web æ¡æ¶æ¯ä¸ä¸ªè®¾è®¡è¯å¥½ç web MVC æ¡æ¶ï¼å®ä¸º web æ¡æ¶ï¼æ¯å¦ Structs æèå¶ä»å·¥ç¨ä¸çæèå¾å°åæ¬¢è¿ç web æ¡æ¶ï¼æä¾äºä¸ä¸ªå¾å¥½çä¾æ¿ä»£çéæ©ã\n * ä¸ºå°ç¹å®ææ¯çå¼å¸¸ï¼ä¾å¦ï¼ç± JDBCãHibernateï¼æè JDO æåºçå¼å¸¸ï¼ç¿»è¯æä¸è´çï¼ Spring æä¾äºä¸ä¸ªæ¹ä¾¿ç APIï¼èè¿äºé½æ¯æªç»æ£éªçå¼å¸¸ã\n * è½»éçº§ç IOC å®¹å¨å¾å¾æ¯è½»éçº§çï¼ä¾å¦ï¼ç¹å«æ¯å½ä¸ EJB å®¹å¨ç¸æ¯çæ¶åãè¿æå©äºå¨åå­å CPU èµæºæéçè®¡ç®æºä¸å¼ååé¨ç½²åºç¨ç¨åºã\n * Spring æä¾äºä¸ä¸ªä¸è´çäºå¡ç®¡ççé¢ï¼è¯¥çé¢å¯ä»¥ç¼©å°æä¸ä¸ªæ¬å°äºå¡ï¼ä¾å¦ï¼ä½¿ç¨ä¸ä¸ªåä¸çæ°æ®åºï¼åæ©å±æä¸ä¸ªå¨å±äºå¡ï¼ä¾å¦ï¼ä½¿ç¨ JTAï¼ã\n\n\n# æ ¸å¿ææ³\n\nSpring ææ ¸å¿çä¸¤ä¸ªææ¯ææ³æ¯ï¼IoC å Aop\n\n\n# IoC\n\nIoC å³ Inversion of Control ï¼æä¸ºæ§å¶åè½¬ã\n\nSpring æè®¤åçææ¯æ¯æ§å¶åè½¬ç**ä¾èµæ³¨å¥ï¼DIï¼**æ¨¡å¼ãæ§å¶åè½¬ï¼IoCï¼æ¯ä¸ä¸ªéç¨çæ¦å¿µï¼å®å¯ä»¥ç¨è®¸å¤ä¸åçæ¹å¼å»è¡¨è¾¾ï¼ä¾èµæ³¨å¥ä»ä»æ¯æ§å¶åè½¬çä¸ä¸ªå·ä½çä¾å­ã\n\nå½ç¼åä¸ä¸ªå¤æç Java åºç¨ç¨åºæ¶ï¼åºç¨ç¨åºç±»åºè¯¥å°½å¯è½çç¬ç«äºå¶ä»ç Java ç±»æ¥å¢å è¿äºç±»å¯éç¨å¯è½æ§ï¼å½è¿è¡ååæµè¯æ¶ï¼å¯ä»¥ä½¿å®ä»¬ç¬ç«äºå¶ä»ç±»è¿è¡æµè¯ãä¾èµæ³¨å¥ï¼æèææ¶è¢«ç§°ä¸ºéçº¿ï¼æå©äºå°è¿äºç±»ç²åå¨ä¸èµ·ï¼å¹¶ä¸å¨åä¸æ¶é´è®©å®ä»¬ä¿æç¬ç«ã\n\nå°åºä»ä¹æ¯ä¾èµæ³¨å¥ï¼è®©æä»¬å°è¿ä¸¤ä¸ªè¯åå¼æ¥çä¸çãè¿éå°ä¾èµå³ç³»é¨åè½¬åä¸ºä¸¤ä¸ªç±»ä¹é´çå³èãä¾å¦ï¼ç±» A ä¾èµäºç±» Bãç°å¨ï¼è®©æä»¬çä¸çç¬¬äºé¨åï¼æ³¨å¥ãææè¿ä¸åé½æå³çç±» B å°éè¿ IoC è¢«æ³¨å¥å°ç±» A ä¸­ã\n\nä¾èµæ³¨å¥å¯ä»¥ä»¥åæé å½æ°ä¼ éåæ°çæ¹å¼åçï¼æèéè¿ä½¿ç¨ setter æ¹æ³ post-constructionãç±äºä¾èµæ³¨å¥æ¯ Spring æ¡æ¶çæ ¸å¿é¨åï¼æä»¥æå°å¨ä¸ä¸ªåç¬çç« èä¸­å©ç¨å¾å¥½çä¾å­å»è§£éè¿ä¸æ¦å¿µã\n\n\n# Aop\n\nSpring æ¡æ¶çä¸ä¸ªå³é®ç»ä»¶æ¯é¢åæ¹é¢çç¨åºè®¾è®¡ï¼AOPï¼æ¡æ¶ãä¸ä¸ªç¨åºä¸­è·¨è¶å¤ä¸ªç¹çåè½è¢«ç§°ä¸ºæ¨ªåå³æ³¨ç¹ï¼è¿äºæ¨ªåå³æ³¨ç¹å¨æ¦å¿µä¸ç¬ç«äºåºç¨ç¨åºçä¸å¡é»è¾ãæåç§åæ ·å¸¸è§çå¾å¥½çå³äºæ¹é¢çä¾å­ï¼æ¯å¦æ¥å¿è®°å½ãå£°ææ§äºå¡ãå®å¨æ§ï¼åç¼å­ç­ç­ã\n\nå¨ OOP ä¸­æ¨¡ååçå³é®ååæ¯ç±»ï¼èå¨ AOP ä¸­æ¨¡ååçå³é®ååæ¯æ¹é¢ãAOP å¸®å©ä½ å°æ¨ªåå³æ³¨ç¹ä»å®ä»¬æå½±åçå¯¹è±¡ä¸­åç¦»åºæ¥ï¼ç¶èä¾èµæ³¨å¥å¸®å©ä½ å°ä½ çåºç¨ç¨åºå¯¹è±¡ä»å½¼æ­¤ä¸­åç¦»åºæ¥ã\n\nSpring æ¡æ¶ç AOP æ¨¡åæä¾äºé¢åæ¹é¢çç¨åºè®¾è®¡å®ç°ï¼åè®¸ä½ å®ä¹æ¦æªå¨æ¹æ³ååå¥ç¹ï¼å¯ä»¥å®ç°å°åºè¯¥è¢«åå¼çä»£ç å¹²åçåå¼åè½ãæå°å¨ä¸ä¸ªç¬ç«çç« èä¸­è®¨è®ºæ´å¤å³äº Spring AOP çæ¦å¿µã\n\n\n# Spring ä½ç³»ç»æ\n\nSpring å½åæ¡æ¶æ20ä¸ª jar åï¼å¤§è´å¯ä»¥åä¸º6å¤§æ¨¡å:\n\n * 1. ä¸ºä»ä¹ä½¿ç¨ Spring\n * 2. æ ¸å¿ææ³\n   * 2.1. IoC\n   * 2.2. Aop\n * 3. Spring ä½ç³»ç»æ\n   * 3.1. Core Container\n     * 3.1.1. BeanFactory\n     * 3.1.2. ApplicationContext\n   * 3.2. AOP and Instrumentation\n   * 3.3. Messaging\n   * 3.4. Data Access / Integaration\n   * 3.5. Web\n   * 3.6. Test\n * 4. æ¯è¯­\n\nSpring æ¡æ¶æä¾äºéå¸¸ä¸°å¯çåè½ï¼å æ­¤æ´ä¸ªæ¶æä¹å¾åºå¤§ã å¨æä»¬å®éçåºç¨å¼åä¸­ï¼å¹¶ä¸ä¸å®è¦ä½¿ç¨ææçåè½ï¼èæ¯å¯ä»¥æ ¹æ®éè¦éæ©åéç Spring æ¨¡åã\n\n\n\n\n# Core Container\n\nIoC å®¹å¨æ¯ Spring æ¡æ¶çæ ¸å¿ãspring å®¹å¨ä½¿ç¨ä¾èµæ³¨å¥ç®¡çææåºç¨çç»ä»¶ï¼å®ä¼åå»ºç¸äºåä½çç»ä»¶ä¹é´çå³èãæ¯«æ çé®ï¼è¿äºå¯¹è±¡æ´ç®åå¹²åï¼æ´å®¹æçè§£ï¼ä¹æ´å®¹æéç¨åæµè¯ã Spring èªå¸¦äºå ç§å®¹å¨çå®ç°ï¼å¯å½çº³ä¸ºä¸¤ç§ç±»åï¼\n\n# BeanFactory\n\nç± org.springframework.beans.factory.BeanFactory æ¥å£å®ä¹ã å®æ¯æç®åçå®¹å¨ï¼æä¾åºæ¬ç DI æ¯æã\n\n# ApplicationContext\n\nç± org.springframework.context.ApplicationContext æ¥å£å®ä¹ã å®æ¯åºäº BeanFactory ä¹ä¸æå»ºï¼å¹¶æä¾é¢ååºç¨çæå¡ï¼ä¾å¦ä»å±æ§æä»¶è§£æææ¬ä¿¡æ¯çè½åï¼ä»¥ååå¸åºç¨äºä»¶ç»æå´è¶£çäºä»¶çå¬èçè½åã æ³¨ï¼Bean å·¥åå¯¹äºå¤§å¤æ°åºç¨æ¥è¯´å¾å¾å¤ªä½çº§äºï¼æä»¥åºç¨ä¸ä¸æä½¿ç¨æ´å¹¿æ³ãæ¨èå¨å¼åä¸­ä½¿ç¨åºç¨ä¸ä¸æå®¹å¨ã\n\nSpring èªå¸¦äºå¤ç§åºç¨ä¸ä¸æï¼æå¯è½éå°çæä»¥ä¸å ç§ï¼ ClassPathXmlApplicationContextï¼ä»ç±»è·¯å¾ä¸ç XML éç½®æä»¶ä¸­å è½½ä¸ä¸æå®ä¹ï¼æåºç¨ä¸ä¸æå®ä¹æä»¶å½åç±»èµæºã FileSystemXmlApplicationContextï¼è¯»åæä»¶ç³»ç»ä¸ç XML éç½®æä»¶å¹¶å è½½ä¸ä¸æå®ä¹ã XmlWebApplicationContextï¼è¯»å Web åºç¨ä¸ç XML éç½®æä»¶å¹¶è£è½½ä¸ä¸æå®ä¹ã\n\nèä¾\n\nApplicationContext context = new FileSystemXmlApplicationContext("D:\\Temp\\build.xml");\nApplicationContext context2 = new ClassPathXmlApplicationContext("build.xml");\n\n\nå¯ä»¥çå°ï¼å è½½ FileSystemXmlApplicationContext å ClassPathXmlApplicationContext ååç¸ä¼¼ã å·®å¼å¨äºï¼åèå¨æå®æä»¶ç³»ç»è·¯å¾ä¸æ¥æ¾ build.xml æä»¶ï¼èåå¨ææç±»è·¯å¾ï¼åå« JAR æä»¶ï¼ä¸æ¥æ¾ build.xml æä»¶ã éè¿å¼ç¨åºç¨ä¸ä¸æï¼å¯ä»¥å¾æ¹ä¾¿çè°ç¨ getBean() æ¹æ³ä» Spring å®¹å¨ä¸­è·å Beanã\n\nç¸å³ jar å\n\n * spring-core, spring-beans, æä¾æ¡æ¶çåºç¡é¨åï¼åæ¬ IoC åä¾èµæ³¨å¥ç¹æ§ã\n\n * spring-context, å¨spring-core, spring-beansåºç¡ä¸æå»ºãå®æä¾ä¸ç§æ¡æ¶å¼çè®¿é®å¯¹è±¡çæ¹æ³ãå®ä¹æ¯æç±»ä¼¼ Java EE ç¹æ§ï¼ä¾å¦ï¼EJBï¼JMX ååºæ¬ remotingãApplicationContext æ¥å£æ¯å®çèç¦ç¹ã\n\n * springcontext-support, éæç¬¬ä¸æ¹åºå° Spring application contextã\n\n * spring-expressionï¼æä¾ä¸ç§å¼ºæåçè¡¨è¾¾è¯­è¨å¨è¿è¡æ¶æ¥æ¥è¯¢åæçºµä¸ä¸ªå¯¹è±¡å¾ã\n\n\n# AOP and Instrumentation\n\nç¸å³ jar å\n\n * spring-aopï¼æä¾äºå¯¹é¢ååé¢ç¼ç¨çä¸°å¯æ¯æã\n * spring-aspectsï¼æä¾äºå¯¹ AspectJ çéæã\n * spring-instrumentï¼æä¾äºå¯¹ç±» instrumentation çæ¯æåç±»å è½½å¨ã\n * spring-instrument-tomcatï¼åå«äº Spring å¯¹ Tomcat ç instrumentation ä»£çã\n\n\n# Messaging\n\nç¸å³ jar å\n\n * spring-messagingï¼åå« spring çæ¶æ¯å¤çåè½ï¼å¦ Messageï¼MessageChannelï¼MessageHandlerã\n\n\n# Data Access / Integaration\n\nData Access/Integration å±åå«äº JDBC / ORM / OXM / JMS å Transaction æ¨¡åã\n\nç¸å³ jar å\n\n * spring-jdbcï¼æä¾äºä¸ä¸ª JDBC æ½è±¡å±ã\n\n * spring-txï¼æ¯æç¼ç¨åå£°æå¼äºå¡ç®¡çç±»ã\n\n * spring-ormï¼æä¾äºæµè¡çå¯¹è±¡å³ç³»åæ å° API éï¼å¦ JPAï¼JDOï¼Hibernateã\n\n * spring-oxmï¼æä¾äºä¸ä¸ªæ½è±¡å±ä»¥æ¯æå¯¹è±¡/XML æ å°çå®ç°ï¼å¦ JAXBï¼Castorï¼XMLBeansï¼JiBX å XStream.\n\n * spring-jmsï¼åå«äºçäº§åæ¶è´¹æ¶æ¯çåè½ã\n\n\n# Web\n\nç¸å³ jar å\n\n * spring-webï¼æä¾äºåºæ¬çé¢å web çåè½ï¼å¦å¤æä»¶ä¸ä¼ ãä½¿ç¨ Servlet çå¬å¨ç Ioc å®¹å¨çåå§åãä¸ä¸ªé¢å web çåºç¨å±ä¸ä¸æã\n\n * spring-webmvcï¼åæ¬ MVC å REST web æå¡å®ç°ã\n\n * spring-webmvc-portletï¼æä¾å¨ Protlet ç¯å¢ç MVC å®ç°åspring-webmvcåè½çéåã\n\n\n# Test\n\nç¸å³ jar å\n\n * spring-testï¼ä»¥ Junit å TestNG æ¥æ¯æ spring ç»ä»¶çååæµè¯åéææµè¯ã\n\n\n# æ¯è¯­\n\n * åºç¨ç¨åºï¼æ¯è½å®ææä»¬æéè¦åè½çæåï¼æ¯å¦è´­ç©ç½ç«ãOA ç³»ç»ã\n * æ¡æ¶ï¼æ¯è½å®æä¸å®åè½çåæåï¼æ¯å¦æä»¬å¯ä»¥ä½¿ç¨æ¡æ¶è¿è¡è´­ç©ç½ç«å¼åï¼æ¡æ¶åä¸é¨ååè½ï¼æä»¬èªå·±åä¸é¨ååè½ï¼è¿æ ·åºç¨ç¨åºå°±åå»ºåºæ¥äºãèä¸æ¡æ¶è§å®äºä½ å¨å¼ååºç¨ç¨åºæ¶çæ´ä½æ¶æï¼æä¾äºä¸äºåºç¡åè½ï¼è¿è§å®äºç±»åå¯¹è±¡çå¦ä½åå»ºãå¦ä½åä½ç­ï¼ä»èç®åæä»¬å¼åï¼è®©æä»¬ä¸æ³¨äºä¸å¡é»è¾å¼åã\n * éä¾µå¥å¼è®¾è®¡ï¼ä»æ¡æ¶è§åº¦å¯ä»¥è¿æ ·çè§£ï¼æ éç»§æ¿æ¡æ¶æä¾çç±»ï¼è¿ç§è®¾è®¡å°±å¯ä»¥çä½æ¯éä¾µå¥å¼è®¾è®¡ï¼å¦æç»§æ¿äºè¿äºæ¡æ¶ç±»ï¼å°±æ¯ä¾µå¥è®¾è®¡ï¼å¦æä»¥åæ³æ´æ¢æ¡æ¶ä¹ååè¿çä»£ç å ä¹æ æ³éç¨ï¼å¦æéä¾µå¥å¼è®¾è®¡åä¹ååè¿çä»£ç ä»ç¶å¯ä»¥ç»§ç»­ä½¿ç¨ã\n * è½»éçº§åééçº§ï¼è½»éçº§æ¯ç¸å¯¹äºééçº§èè¨çï¼è½»éçº§ä¸è¬å°±æ¯éå¥ä¾µæ§çãæä¾èµçä¸è¥¿éå¸¸å°ãèµæºå ç¨éå¸¸å°ãé¨ç½²ç®åç­ç­ï¼å¶å®å°±æ¯æ¯è¾å®¹æä½¿ç¨ï¼èééçº§æ­£å¥½ç¸åã\n * POJOï¼POJOï¼Plain Old Java Objectsï¼ç®åç Java å¯¹è±¡ï¼å®å¯ä»¥åå«ä¸å¡é»è¾ææä¹åé»è¾ï¼ä½ä¸æå½ä»»ä½ç¹æ®è§è²ä¸ä¸ç»§æ¿æä¸å®ç°ä»»ä½å¶å® Java æ¡æ¶çç±»ææ¥å£ã\n * å®¹å¨ï¼å¨æ¥å¸¸çæ´»ä¸­å®¹å¨å°±æ¯ä¸ç§çæ¾ä¸è¥¿çå¨å·ï¼ä»ç¨åºè®¾è®¡è§åº¦çå°±æ¯è£å¯¹è±¡ççå¯¹è±¡ï¼å ä¸ºå­å¨æ¾å¥ãæ¿åºç­æä½ï¼æä»¥å®¹å¨è¿è¦ç®¡çå¯¹è±¡ççå½å¨æã\n * **æ§å¶åè½¬ï¼**å³ Inversion of Controlï¼ç¼©åä¸º IoCï¼æ§å¶åè½¬è¿æä¸ä¸ªåå­å«åä¾èµæ³¨å¥ï¼Dependency Injectionï¼ï¼å°±æ¯ç±å®¹å¨æ§å¶ç¨åºä¹é´çå³ç³»ï¼èéä¼ ç»å®ç°ä¸­ï¼ç±ç¨åºä»£ç ç´æ¥ææ§ã\n * JavaBeanï¼ä¸è¬æå®¹å¨ç®¡çå¯¹è±¡ï¼å¨ Spring ä¸­æ Spring IoC å®¹å¨ç®¡çå¯¹è±¡ã',normalizedContent:'# spring framework ç»¼è¿°\n\n\n# spring framework ç®ä»\n\nspring framework æ¯æåæ¬¢è¿çä¼ä¸çº§ java åºç¨ç¨åºå¼åæ¡æ¶ãç¨äºæå»ºä¼ä¸çº§åºç¨çè½»éçº§ãä¸ç«å¼è§£å³æ¹æ¡ã\n\nå½è°è®ºå°å¤§å°åéæåº¦æ¶ï¼ spring æ¯è½»éçº§çã spring æ¡æ¶çåºç¡çæ¬æ¯å¨ 2 mb å·¦å³çã\n\nspring æ¡æ¶çæ ¸å¿ç¹æ§å¯ä»¥ç¨äºå¼åä»»ä½ java åºç¨ç¨åºï¼ä½æ¯å¨ java ee å¹³å°ä¸æå»º web åºç¨ç¨åºæ¯éè¦æ©å±çã spring æ¡æ¶çç®æ æ¯ä½¿ j2ee å¼ååå¾æ´å®¹æä½¿ç¨ï¼éè¿å¯ç¨åºäº pojo ç¼ç¨æ¨¡åæ¥ä¿è¿è¯å¥½çç¼ç¨å®è·µã\n\nspring framework è®¾è®¡çå¿µå¦ä¸ï¼\n\n * åäºè®©éæ©æ å¤ä¸å¨\n * ä½ç°æµ·çº³ç¾å·çç²¾ç¥\n * ä¿æååå¼å®¹æ§\n * ä¸æ³¨ api è®¾è®¡\n * è¿½æ±ä¸¥èçä»£ç è´¨é\n\n\n# ä¸ºä»ä¹ä½¿ç¨ spring\n\nä¸é¢ååºçæ¯ä½¿ç¨ spring æ¡æ¶ä¸»è¦çå¥½å¤ï¼\n\n * spring å¯ä»¥ä½¿å¼åäººåä½¿ç¨ pojos å¼åä¼ä¸çº§çåºç¨ç¨åºãåªä½¿ç¨ pojos çå¥½å¤æ¯ä½ ä¸éè¦ä¸ä¸ª ejb å®¹å¨äº§åï¼æ¯å¦ä¸ä¸ªåºç¨ç¨åºæå¡å¨ï¼ä½æ¯ä½ å¯ä»¥éæ©ä½¿ç¨ä¸ä¸ªå¥å£®ç servlet å®¹å¨ï¼æ¯å¦ tomcat æèä¸äºåä¸äº§åã\n * spring å¨ä¸ä¸ªååæ¨¡å¼ä¸­æ¯æç»ç»çãå³ä½¿ååç±»çæ°ééå¸¸å¤§ï¼ä½ åªéè¦éæ©ä½ éè¦çé¨åï¼èå¿½ç¥å©ä½çé£é¨åã\n * spring ä¸ä¼è®©ä½ ç½è´¹åæ°åéå¤å·¥ä½ï¼å®çæ­£çå©ç¨äºä¸äºç°æçææ¯ï¼åå ä¸ª orm æ¡æ¶ãæ¥å¿æ¡æ¶ãjeeãquartz å jdk è®¡æ¶å¨ï¼å¶ä»è§å¾ææ¯ã\n * æµè¯ä¸ä¸ªç¨ spring ç¼åçåºç¨ç¨åºå¾å®¹æï¼å ä¸º environment-dependent ä»£ç è¢«æ¾è¿äºè¿ä¸ªæ¡æ¶ä¸­ãæ­¤å¤ï¼éè¿ä½¿ç¨ javabean-style pojosï¼å®å¨ä½¿ç¨ä¾èµæ³¨å¥æ³¨å¥æµè¯æ°æ®æ¶åå¾æ´å®¹æã\n * spring ç web æ¡æ¶æ¯ä¸ä¸ªè®¾è®¡è¯å¥½ç web mvc æ¡æ¶ï¼å®ä¸º web æ¡æ¶ï¼æ¯å¦ structs æèå¶ä»å·¥ç¨ä¸çæèå¾å°åæ¬¢è¿ç web æ¡æ¶ï¼æä¾äºä¸ä¸ªå¾å¥½çä¾æ¿ä»£çéæ©ã\n * ä¸ºå°ç¹å®ææ¯çå¼å¸¸ï¼ä¾å¦ï¼ç± jdbcãhibernateï¼æè jdo æåºçå¼å¸¸ï¼ç¿»è¯æä¸è´çï¼ spring æä¾äºä¸ä¸ªæ¹ä¾¿ç apiï¼èè¿äºé½æ¯æªç»æ£éªçå¼å¸¸ã\n * è½»éçº§ç ioc å®¹å¨å¾å¾æ¯è½»éçº§çï¼ä¾å¦ï¼ç¹å«æ¯å½ä¸ ejb å®¹å¨ç¸æ¯çæ¶åãè¿æå©äºå¨åå­å cpu èµæºæéçè®¡ç®æºä¸å¼ååé¨ç½²åºç¨ç¨åºã\n * spring æä¾äºä¸ä¸ªä¸è´çäºå¡ç®¡ççé¢ï¼è¯¥çé¢å¯ä»¥ç¼©å°æä¸ä¸ªæ¬å°äºå¡ï¼ä¾å¦ï¼ä½¿ç¨ä¸ä¸ªåä¸çæ°æ®åºï¼åæ©å±æä¸ä¸ªå¨å±äºå¡ï¼ä¾å¦ï¼ä½¿ç¨ jtaï¼ã\n\n\n# æ ¸å¿ææ³\n\nspring ææ ¸å¿çä¸¤ä¸ªææ¯ææ³æ¯ï¼ioc å aop\n\n\n# ioc\n\nioc å³ inversion of control ï¼æä¸ºæ§å¶åè½¬ã\n\nspring æè®¤åçææ¯æ¯æ§å¶åè½¬ç**ä¾èµæ³¨å¥ï¼diï¼**æ¨¡å¼ãæ§å¶åè½¬ï¼iocï¼æ¯ä¸ä¸ªéç¨çæ¦å¿µï¼å®å¯ä»¥ç¨è®¸å¤ä¸åçæ¹å¼å»è¡¨è¾¾ï¼ä¾èµæ³¨å¥ä»ä»æ¯æ§å¶åè½¬çä¸ä¸ªå·ä½çä¾å­ã\n\nå½ç¼åä¸ä¸ªå¤æç java åºç¨ç¨åºæ¶ï¼åºç¨ç¨åºç±»åºè¯¥å°½å¯è½çç¬ç«äºå¶ä»ç java ç±»æ¥å¢å è¿äºç±»å¯éç¨å¯è½æ§ï¼å½è¿è¡ååæµè¯æ¶ï¼å¯ä»¥ä½¿å®ä»¬ç¬ç«äºå¶ä»ç±»è¿è¡æµè¯ãä¾èµæ³¨å¥ï¼æèææ¶è¢«ç§°ä¸ºéçº¿ï¼æå©äºå°è¿äºç±»ç²åå¨ä¸èµ·ï¼å¹¶ä¸å¨åä¸æ¶é´è®©å®ä»¬ä¿æç¬ç«ã\n\nå°åºä»ä¹æ¯ä¾èµæ³¨å¥ï¼è®©æä»¬å°è¿ä¸¤ä¸ªè¯åå¼æ¥çä¸çãè¿éå°ä¾èµå³ç³»é¨åè½¬åä¸ºä¸¤ä¸ªç±»ä¹é´çå³èãä¾å¦ï¼ç±» a ä¾èµäºç±» bãç°å¨ï¼è®©æä»¬çä¸çç¬¬äºé¨åï¼æ³¨å¥ãææè¿ä¸åé½æå³çç±» b å°éè¿ ioc è¢«æ³¨å¥å°ç±» a ä¸­ã\n\nä¾èµæ³¨å¥å¯ä»¥ä»¥åæé å½æ°ä¼ éåæ°çæ¹å¼åçï¼æèéè¿ä½¿ç¨ setter æ¹æ³ post-constructionãç±äºä¾èµæ³¨å¥æ¯ spring æ¡æ¶çæ ¸å¿é¨åï¼æä»¥æå°å¨ä¸ä¸ªåç¬çç« èä¸­å©ç¨å¾å¥½çä¾å­å»è§£éè¿ä¸æ¦å¿µã\n\n\n# aop\n\nspring æ¡æ¶çä¸ä¸ªå³é®ç»ä»¶æ¯é¢åæ¹é¢çç¨åºè®¾è®¡ï¼aopï¼æ¡æ¶ãä¸ä¸ªç¨åºä¸­è·¨è¶å¤ä¸ªç¹çåè½è¢«ç§°ä¸ºæ¨ªåå³æ³¨ç¹ï¼è¿äºæ¨ªåå³æ³¨ç¹å¨æ¦å¿µä¸ç¬ç«äºåºç¨ç¨åºçä¸å¡é»è¾ãæåç§åæ ·å¸¸è§çå¾å¥½çå³äºæ¹é¢çä¾å­ï¼æ¯å¦æ¥å¿è®°å½ãå£°ææ§äºå¡ãå®å¨æ§ï¼åç¼å­ç­ç­ã\n\nå¨ oop ä¸­æ¨¡ååçå³é®ååæ¯ç±»ï¼èå¨ aop ä¸­æ¨¡ååçå³é®ååæ¯æ¹é¢ãaop å¸®å©ä½ å°æ¨ªåå³æ³¨ç¹ä»å®ä»¬æå½±åçå¯¹è±¡ä¸­åç¦»åºæ¥ï¼ç¶èä¾èµæ³¨å¥å¸®å©ä½ å°ä½ çåºç¨ç¨åºå¯¹è±¡ä»å½¼æ­¤ä¸­åç¦»åºæ¥ã\n\nspring æ¡æ¶ç aop æ¨¡åæä¾äºé¢åæ¹é¢çç¨åºè®¾è®¡å®ç°ï¼åè®¸ä½ å®ä¹æ¦æªå¨æ¹æ³ååå¥ç¹ï¼å¯ä»¥å®ç°å°åºè¯¥è¢«åå¼çä»£ç å¹²åçåå¼åè½ãæå°å¨ä¸ä¸ªç¬ç«çç« èä¸­è®¨è®ºæ´å¤å³äº spring aop çæ¦å¿µã\n\n\n# spring ä½ç³»ç»æ\n\nspring å½åæ¡æ¶æ20ä¸ª jar åï¼å¤§è´å¯ä»¥åä¸º6å¤§æ¨¡å:\n\n * 1. ä¸ºä»ä¹ä½¿ç¨ spring\n * 2. æ ¸å¿ææ³\n   * 2.1. ioc\n   * 2.2. aop\n * 3. spring ä½ç³»ç»æ\n   * 3.1. core container\n     * 3.1.1. beanfactory\n     * 3.1.2. applicationcontext\n   * 3.2. aop and instrumentation\n   * 3.3. messaging\n   * 3.4. data access / integaration\n   * 3.5. web\n   * 3.6. test\n * 4. æ¯è¯­\n\nspring æ¡æ¶æä¾äºéå¸¸ä¸°å¯çåè½ï¼å æ­¤æ´ä¸ªæ¶æä¹å¾åºå¤§ã å¨æä»¬å®éçåºç¨å¼åä¸­ï¼å¹¶ä¸ä¸å®è¦ä½¿ç¨ææçåè½ï¼èæ¯å¯ä»¥æ ¹æ®éè¦éæ©åéç spring æ¨¡åã\n\n\n\n\n# core container\n\nioc å®¹å¨æ¯ spring æ¡æ¶çæ ¸å¿ãspring å®¹å¨ä½¿ç¨ä¾èµæ³¨å¥ç®¡çææåºç¨çç»ä»¶ï¼å®ä¼åå»ºç¸äºåä½çç»ä»¶ä¹é´çå³èãæ¯«æ çé®ï¼è¿äºå¯¹è±¡æ´ç®åå¹²åï¼æ´å®¹æçè§£ï¼ä¹æ´å®¹æéç¨åæµè¯ã spring èªå¸¦äºå ç§å®¹å¨çå®ç°ï¼å¯å½çº³ä¸ºä¸¤ç§ç±»åï¼\n\n# beanfactory\n\nç± org.springframework.beans.factory.beanfactory æ¥å£å®ä¹ã å®æ¯æç®åçå®¹å¨ï¼æä¾åºæ¬ç di æ¯æã\n\n# applicationcontext\n\nç± org.springframework.context.applicationcontext æ¥å£å®ä¹ã å®æ¯åºäº beanfactory ä¹ä¸æå»ºï¼å¹¶æä¾é¢ååºç¨çæå¡ï¼ä¾å¦ä»å±æ§æä»¶è§£æææ¬ä¿¡æ¯çè½åï¼ä»¥ååå¸åºç¨äºä»¶ç»æå´è¶£çäºä»¶çå¬èçè½åã æ³¨ï¼bean å·¥åå¯¹äºå¤§å¤æ°åºç¨æ¥è¯´å¾å¾å¤ªä½çº§äºï¼æä»¥åºç¨ä¸ä¸æä½¿ç¨æ´å¹¿æ³ãæ¨èå¨å¼åä¸­ä½¿ç¨åºç¨ä¸ä¸æå®¹å¨ã\n\nspring èªå¸¦äºå¤ç§åºç¨ä¸ä¸æï¼æå¯è½éå°çæä»¥ä¸å ç§ï¼ classpathxmlapplicationcontextï¼ä»ç±»è·¯å¾ä¸ç xml éç½®æä»¶ä¸­å è½½ä¸ä¸æå®ä¹ï¼æåºç¨ä¸ä¸æå®ä¹æä»¶å½åç±»èµæºã filesystemxmlapplicationcontextï¼è¯»åæä»¶ç³»ç»ä¸ç xml éç½®æä»¶å¹¶å è½½ä¸ä¸æå®ä¹ã xmlwebapplicationcontextï¼è¯»å web åºç¨ä¸ç xml éç½®æä»¶å¹¶è£è½½ä¸ä¸æå®ä¹ã\n\nèä¾\n\napplicationcontext context = new filesystemxmlapplicationcontext("d:\\temp\\build.xml");\napplicationcontext context2 = new classpathxmlapplicationcontext("build.xml");\n\n\nå¯ä»¥çå°ï¼å è½½ filesystemxmlapplicationcontext å classpathxmlapplicationcontext ååç¸ä¼¼ã å·®å¼å¨äºï¼åèå¨æå®æä»¶ç³»ç»è·¯å¾ä¸æ¥æ¾ build.xml æä»¶ï¼èåå¨ææç±»è·¯å¾ï¼åå« jar æä»¶ï¼ä¸æ¥æ¾ build.xml æä»¶ã éè¿å¼ç¨åºç¨ä¸ä¸æï¼å¯ä»¥å¾æ¹ä¾¿çè°ç¨ getbean() æ¹æ³ä» spring å®¹å¨ä¸­è·å beanã\n\nç¸å³ jar å\n\n * spring-core, spring-beans, æä¾æ¡æ¶çåºç¡é¨åï¼åæ¬ ioc åä¾èµæ³¨å¥ç¹æ§ã\n\n * spring-context, å¨spring-core, spring-beansåºç¡ä¸æå»ºãå®æä¾ä¸ç§æ¡æ¶å¼çè®¿é®å¯¹è±¡çæ¹æ³ãå®ä¹æ¯æç±»ä¼¼ java ee ç¹æ§ï¼ä¾å¦ï¼ejbï¼jmx ååºæ¬ remotingãapplicationcontext æ¥å£æ¯å®çèç¦ç¹ã\n\n * springcontext-support, éæç¬¬ä¸æ¹åºå° spring application contextã\n\n * spring-expressionï¼æä¾ä¸ç§å¼ºæåçè¡¨è¾¾è¯­è¨å¨è¿è¡æ¶æ¥æ¥è¯¢åæçºµä¸ä¸ªå¯¹è±¡å¾ã\n\n\n# aop and instrumentation\n\nç¸å³ jar å\n\n * spring-aopï¼æä¾äºå¯¹é¢ååé¢ç¼ç¨çä¸°å¯æ¯æã\n * spring-aspectsï¼æä¾äºå¯¹ aspectj çéæã\n * spring-instrumentï¼æä¾äºå¯¹ç±» instrumentation çæ¯æåç±»å è½½å¨ã\n * spring-instrument-tomcatï¼åå«äº spring å¯¹ tomcat ç instrumentation ä»£çã\n\n\n# messaging\n\nç¸å³ jar å\n\n * spring-messagingï¼åå« spring çæ¶æ¯å¤çåè½ï¼å¦ messageï¼messagechannelï¼messagehandlerã\n\n\n# data access / integaration\n\ndata access/integration å±åå«äº jdbc / orm / oxm / jms å transaction æ¨¡åã\n\nç¸å³ jar å\n\n * spring-jdbcï¼æä¾äºä¸ä¸ª jdbc æ½è±¡å±ã\n\n * spring-txï¼æ¯æç¼ç¨åå£°æå¼äºå¡ç®¡çç±»ã\n\n * spring-ormï¼æä¾äºæµè¡çå¯¹è±¡å³ç³»åæ å° api éï¼å¦ jpaï¼jdoï¼hibernateã\n\n * spring-oxmï¼æä¾äºä¸ä¸ªæ½è±¡å±ä»¥æ¯æå¯¹è±¡/xml æ å°çå®ç°ï¼å¦ jaxbï¼castorï¼xmlbeansï¼jibx å xstream.\n\n * spring-jmsï¼åå«äºçäº§åæ¶è´¹æ¶æ¯çåè½ã\n\n\n# web\n\nç¸å³ jar å\n\n * spring-webï¼æä¾äºåºæ¬çé¢å web çåè½ï¼å¦å¤æä»¶ä¸ä¼ ãä½¿ç¨ servlet çå¬å¨ç ioc å®¹å¨çåå§åãä¸ä¸ªé¢å web çåºç¨å±ä¸ä¸æã\n\n * spring-webmvcï¼åæ¬ mvc å rest web æå¡å®ç°ã\n\n * spring-webmvc-portletï¼æä¾å¨ protlet ç¯å¢ç mvc å®ç°åspring-webmvcåè½çéåã\n\n\n# test\n\nç¸å³ jar å\n\n * spring-testï¼ä»¥ junit å testng æ¥æ¯æ spring ç»ä»¶çååæµè¯åéææµè¯ã\n\n\n# æ¯è¯­\n\n * åºç¨ç¨åºï¼æ¯è½å®ææä»¬æéè¦åè½çæåï¼æ¯å¦è´­ç©ç½ç«ãoa ç³»ç»ã\n * æ¡æ¶ï¼æ¯è½å®æä¸å®åè½çåæåï¼æ¯å¦æä»¬å¯ä»¥ä½¿ç¨æ¡æ¶è¿è¡è´­ç©ç½ç«å¼åï¼æ¡æ¶åä¸é¨ååè½ï¼æä»¬èªå·±åä¸é¨ååè½ï¼è¿æ ·åºç¨ç¨åºå°±åå»ºåºæ¥äºãèä¸æ¡æ¶è§å®äºä½ å¨å¼ååºç¨ç¨åºæ¶çæ´ä½æ¶æï¼æä¾äºä¸äºåºç¡åè½ï¼è¿è§å®äºç±»åå¯¹è±¡çå¦ä½åå»ºãå¦ä½åä½ç­ï¼ä»èç®åæä»¬å¼åï¼è®©æä»¬ä¸æ³¨äºä¸å¡é»è¾å¼åã\n * éä¾µå¥å¼è®¾è®¡ï¼ä»æ¡æ¶è§åº¦å¯ä»¥è¿æ ·çè§£ï¼æ éç»§æ¿æ¡æ¶æä¾çç±»ï¼è¿ç§è®¾è®¡å°±å¯ä»¥çä½æ¯éä¾µå¥å¼è®¾è®¡ï¼å¦æç»§æ¿äºè¿äºæ¡æ¶ç±»ï¼å°±æ¯ä¾µå¥è®¾è®¡ï¼å¦æä»¥åæ³æ´æ¢æ¡æ¶ä¹ååè¿çä»£ç å ä¹æ æ³éç¨ï¼å¦æéä¾µå¥å¼è®¾è®¡åä¹ååè¿çä»£ç ä»ç¶å¯ä»¥ç»§ç»­ä½¿ç¨ã\n * è½»éçº§åééçº§ï¼è½»éçº§æ¯ç¸å¯¹äºééçº§èè¨çï¼è½»éçº§ä¸è¬å°±æ¯éå¥ä¾µæ§çãæä¾èµçä¸è¥¿éå¸¸å°ãèµæºå ç¨éå¸¸å°ãé¨ç½²ç®åç­ç­ï¼å¶å®å°±æ¯æ¯è¾å®¹æä½¿ç¨ï¼èééçº§æ­£å¥½ç¸åã\n * pojoï¼pojoï¼plain old java objectsï¼ç®åç java å¯¹è±¡ï¼å®å¯ä»¥åå«ä¸å¡é»è¾ææä¹åé»è¾ï¼ä½ä¸æå½ä»»ä½ç¹æ®è§è²ä¸ä¸ç»§æ¿æä¸å®ç°ä»»ä½å¶å® java æ¡æ¶çç±»ææ¥å£ã\n * å®¹å¨ï¼å¨æ¥å¸¸çæ´»ä¸­å®¹å¨å°±æ¯ä¸ç§çæ¾ä¸è¥¿çå¨å·ï¼ä»ç¨åºè®¾è®¡è§åº¦çå°±æ¯è£å¯¹è±¡ççå¯¹è±¡ï¼å ä¸ºå­å¨æ¾å¥ãæ¿åºç­æä½ï¼æä»¥å®¹å¨è¿è¦ç®¡çå¯¹è±¡ççå½å¨æã\n * **æ§å¶åè½¬ï¼**å³ inversion of controlï¼ç¼©åä¸º iocï¼æ§å¶åè½¬è¿æä¸ä¸ªåå­å«åä¾èµæ³¨å¥ï¼dependency injectionï¼ï¼å°±æ¯ç±å®¹å¨æ§å¶ç¨åºä¹é´çå³ç³»ï¼èéä¼ ç»å®ç°ä¸­ï¼ç±ç¨åºä»£ç ç´æ¥ææ§ã\n * javabeanï¼ä¸è¬æå®¹å¨ç®¡çå¯¹è±¡ï¼å¨ spring ä¸­æ spring ioc å®¹å¨ç®¡çå¯¹è±¡ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot åºæ¬åç",frontmatter:{title:"SpringBoot åºæ¬åç",date:"2020-08-12T07:01:26.000Z",order:22,categories:["Java","æ¡æ¶","Spring","Springç»¼å"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/dbf521/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/00.Spring%E7%BB%BC%E5%90%88/22.SpringBoot%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/22.SpringBootåºæ¬åç.md",key:"v-55b8f14c",path:"/pages/dbf521/",headers:[{level:2,title:"SpringBootApplication èåçç§å¯",slug:"springbootapplication-èåçç§å¯",normalizedTitle:"springbootapplication èåçç§å¯",charIndex:429},{level:2,title:"@Configuration",slug:"configuration",normalizedTitle:"@configuration",charIndex:1202},{level:2,title:"@ComponentScan",slug:"componentscan",normalizedTitle:"@componentscan",charIndex:870},{level:2,title:"@EnableAutoConfiguration",slug:"enableautoconfiguration",normalizedTitle:"@enableautoconfiguration",charIndex:780},{level:4,title:"AutoConfigurationPackage æ³¨è§£ï¼",slug:"autoconfigurationpackage-æ³¨è§£",normalizedTitle:"autoconfigurationpackage æ³¨è§£ï¼",charIndex:4561},{level:4,title:"Import(AutoConfigurationImportSelector.class)æ³¨è§£ï¼",slug:"import-autoconfigurationimportselector-class-æ³¨è§£",normalizedTitle:"import(autoconfigurationimportselector.class)æ³¨è§£ï¼",charIndex:5179},{level:3,title:"èªå¨éç½®å¹åè±éï¼SpringFactoriesLoader è¯¦è§£",slug:"èªå¨éç½®å¹åè±é-springfactoriesloader-è¯¦è§£",normalizedTitle:"èªå¨éç½®å¹åè±éï¼springfactoriesloader è¯¦è§£",charIndex:6686},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:7738}],headersStr:"SpringBootApplication èåçç§å¯ @Configuration @ComponentScan @EnableAutoConfiguration AutoConfigurationPackage æ³¨è§£ï¼ Import(AutoConfigurationImportSelector.class)æ³¨è§£ï¼ èªå¨éç½®å¹åè±éï¼SpringFactoriesLoader è¯¦è§£ åèèµæ",content:'# SpringBoot åºæ¬åç\n\nSpringBoot ä¸ºæä»¬åçèªå¨éç½®ï¼ç¡®å®æ¹ä¾¿å¿«æ·ï¼ä½ä¸ç´æä¸æç½å®çåé¨å¯å¨åçï¼è¿æ¬¡å°±æ¥ä¸æ­¥æ­¥è§£å¼ SpringBoot çç¥ç§é¢çº±ï¼è®©å®ä¸åç¥ç§ã\n\n\n\n----------------------------------------\n\n@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n\n\nä»ä¸é¢ä»£ç å¯ä»¥çåºï¼**Annotation å®ä¹ï¼@SpringBootApplicationï¼åç±»å®ä¹ï¼SpringApplication.runï¼**æä¸ºèç¼ï¼æä»¥è¦æ­å¼ SpringBoot çç¥ç§é¢çº±ï¼æä»¬è¦ä»è¿ä¸¤ä½å¼å§å°±å¯ä»¥äºã\n\n\n# SpringBootApplication èåçç§å¯\n\n@Target(ElementType.TYPE)            // æ³¨è§£çéç¨èå´ï¼å¶ä¸­TYPEç¨äºæè¿°ç±»ãæ¥å£ï¼åæ¬åæ³¨è§£ç±»åï¼æenumå£°æ\n@Retention(RetentionPolicy.RUNTIME)  // æ³¨è§£ççå½å¨æï¼ä¿çå°classæä»¶ä¸­ï¼ä¸ä¸ªçå½å¨æï¼\n@Documented                          // è¡¨æè¿ä¸ªæ³¨è§£åºè¯¥è¢«javadocè®°å½\n@Inherited                           // å­ç±»å¯ä»¥ç»§æ¿è¯¥æ³¨è§£\n@SpringBootConfiguration             // ç»§æ¿äºConfigurationï¼è¡¨ç¤ºå½åæ¯æ³¨è§£ç±»\n@EnableAutoConfiguration             // å¼å¯springbootçæ³¨è§£åè½ï¼springbootçåå¤§ç¥å¨ä¹ä¸ï¼å¶åå©@importçå¸®å©\n@ComponentScan(excludeFilters = {    // æ«æè·¯å¾è®¾ç½®ï¼å·ä½ä½¿ç¨å¾ç¡®è®¤ï¼\n        @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),\n        @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })\npublic @interface SpringBootApplication {\n...\n}\n\n\nè½ç¶å®ä¹ä½¿ç¨äºå¤ä¸ª Annotation è¿è¡äºåä¿¡æ¯æ æ³¨ï¼ä½å®éä¸éè¦çåªæä¸ä¸ª Annotationï¼\n\n@Configurationï¼@SpringBootConfiguration ç¹å¼æ¥çåç°éé¢è¿æ¯åºç¨äº@Configurationï¼ @EnableAutoConfiguration @ComponentScan æä»¥ï¼å¦ææä»¬ä½¿ç¨å¦ä¸ç SpringBoot å¯å¨ç±»ï¼æ´ä¸ª SpringBoot åºç¨ä¾ç¶å¯ä»¥ä¸ä¹åçå¯å¨ç±»åè½å¯¹ç­ï¼\n\n@Configuration\n@EnableAutoConfiguration\n@ComponentScan\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n\n\næ¯æ¬¡åè¿ 3 ä¸ªæ¯è¾ç´¯ï¼æä»¥åä¸ä¸ª@SpringBootApplication æ¹ä¾¿ç¹ãæ¥ä¸æ¥åå«ä»ç»è¿ 3 ä¸ª Annotationã\n\n\n# @Configuration\n\nè¿éç@Configuration å¯¹æä»¬æ¥è¯´ä¸éçï¼å®å°±æ¯ JavaConfig å½¢å¼ç Spring Ioc å®¹å¨çéç½®ç±»ä½¿ç¨çé£ä¸ª@Configurationï¼SpringBoot ç¤¾åºæ¨èä½¿ç¨åºäº JavaConfig çéç½®å½¢å¼ï¼æä»¥ï¼è¿éçå¯å¨ç±»æ æ³¨äº@Configuration ä¹åï¼æ¬èº«å¶å®ä¹æ¯ä¸ä¸ª IoC å®¹å¨çéç½®ç±»ã ä¸¾å ä¸ªç®åä¾å­åé¡¾ä¸ï¼XML è· config éç½®æ¹å¼çåºå«ï¼\n\nè¡¨è¾¾å½¢å¼å±é¢ åºäº XML éç½®çæ¹å¼æ¯è¿æ ·ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"\n       default-lazy-init="true">\n    \x3c!--beanå®ä¹--\x3e\n</beans>\n\n\nèåºäº JavaConfig çéç½®æ¹å¼æ¯è¿æ ·ï¼\n\n@Configuration\npublic class MockConfiguration{\n    //beanå®ä¹\n}\n\n\nä»»ä½ä¸ä¸ªæ æ³¨äº@Configuration ç Java ç±»å®ä¹é½æ¯ä¸ä¸ª JavaConfig éç½®ç±»ã\n\næ³¨å bean å®ä¹å±é¢ åºäº XML çéç½®å½¢å¼æ¯è¿æ ·ï¼\n\n<bean id="mockService" class="..MockServiceImpl">\n    ...\n</bean>\n\n\nèåºäº JavaConfig çéç½®å½¢å¼æ¯è¿æ ·çï¼\n\n@Configuration\npublic class MockConfiguration{\n    @Bean\n    public MockService mockService(){\n        return new MockServiceImpl();\n    }\n}\n\n\nä»»ä½ä¸ä¸ªæ æ³¨äº@Bean çæ¹æ³ï¼å¶è¿åå¼å°ä½ä¸ºä¸ä¸ª bean å®ä¹æ³¨åå° Spring ç IoC å®¹å¨ï¼æ¹æ³åå°é»è®¤æè¯¥ bean å®ä¹ç idã\n\nè¡¨è¾¾ä¾èµæ³¨å¥å³ç³»å±é¢ ä¸ºäºè¡¨è¾¾ bean ä¸ bean ä¹é´çä¾èµå³ç³»ï¼å¨ XML å½¢å¼ä¸­ä¸è¬æ¯è¿æ ·ï¼\n\n<bean id="mockService" class="..MockServiceImpl">\n    <propery name ="dependencyService" ref="dependencyService" />\n</bean>\n\n<bean id="dependencyService" class="DependencyServiceImpl"></bean>\n\n\nèåºäº JavaConfig çéç½®å½¢å¼æ¯è¿æ ·çï¼\n\n@Configuration\npublic class MockConfiguration{\n    @Bean\n    public MockService mockService(){\n        return new MockServiceImpl(dependencyService());\n    }\n\n    @Bean\n    public DependencyService dependencyService(){\n        return new DependencyServiceImpl();\n    }\n}\n\n\nå¦æä¸ä¸ª bean çå®ä¹ä¾èµå¶ä» bean,åç´æ¥è°ç¨å¯¹åºç JavaConfig ç±»ä¸­ä¾èµ bean çåå»ºæ¹æ³å°±å¯ä»¥äºã\n\n\n# @ComponentScan\n\n@ComponentScan è¿ä¸ªæ³¨è§£å¨ Spring ä¸­å¾éè¦ï¼å®å¯¹åº XML éç½®ä¸­çåç´ ï¼@ComponentScan çåè½å¶å®å°±æ¯èªå¨æ«æå¹¶å è½½ç¬¦åæ¡ä»¶çç»ä»¶ï¼æ¯å¦@Component å@Repository ç­ï¼æè bean å®ä¹ï¼æç»å°è¿äº bean å®ä¹å è½½å° IoC å®¹å¨ä¸­ã\n\næä»¬å¯ä»¥éè¿ basePackages ç­å±æ§æ¥ç»ç²åº¦çå®å¶@ComponentScan èªå¨æ«æçèå´ï¼å¦æä¸æå®ï¼åé»è®¤ Spring æ¡æ¶å®ç°ä¼ä»å£°æ@ComponentScan æå¨ç±»ç package è¿è¡æ«æã\n\n> æ³¨ï¼æä»¥ SpringBoot çå¯å¨ç±»æå¥½æ¯æ¾å¨ root package ä¸ï¼å ä¸ºé»è®¤ä¸æå® basePackagesã\n\n\n# @EnableAutoConfiguration\n\nä¸ªäººæè§**@EnableAutoConfiguration è¿ä¸ª Annotation æä¸ºéè¦**ï¼æä»¥æ¾å¨æåæ¥è§£è¯»ï¼å¤§å®¶æ¯å¦è¿è®°å¾ Spring æ¡æ¶æä¾çåç§åå­ä¸º@Enable å¼å¤´ç Annotation å®ä¹ï¼æ¯å¦@EnableSchedulingã@EnableCachingã@EnableMBeanExport ç­ï¼@EnableAutoConfiguration ççå¿µååäºæ¹å¼å¶å®ä¸èç¸æ¿ï¼ç®åæ¦æ¬ä¸ä¸å°±æ¯ï¼åå©@Import çæ¯æï¼æ¶éåæ³¨åç¹å®åºæ¯ç¸å³ç bean å®ä¹ã\n\n@EnableSchedulingæ¯éè¿@Import å° Spring è°åº¦æ¡æ¶ç¸å³ç bean å®ä¹é½å è½½å° IoC å®¹å¨ã @EnableMBeanExportæ¯éè¿@Import å° JMX ç¸å³ç bean å®ä¹å è½½å° IoC å®¹å¨ã è**@EnableAutoConfiguration**ä¹æ¯åå©@Import çå¸®å©ï¼å°ææç¬¦åèªå¨éç½®æ¡ä»¶ç bean å®ä¹å è½½å° IoC å®¹å¨ï¼ä»æ­¤èå·²ï¼\n\n@EnableAutoConfiguration ä½ä¸ºä¸ä¸ªå¤å Annotation,å¶èªèº«å®ä¹å³é®ä¿¡æ¯å¦ä¸ï¼\n\n@SuppressWarnings("deprecation")\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@AutoConfigurationPackage\n@Import(EnableAutoConfigurationImportSelector.class)\npublic @interface EnableAutoConfiguration {\n    ...\n}\n\n\nä¸¤ä¸ªæ¯è¾éè¦çæ³¨è§£ï¼\n\n@AutoConfigurationPackageï¼èªå¨éç½®å\n\n@Import: å¯¼å¥èªå¨éç½®çç»ä»¶\n\n# AutoConfigurationPackage æ³¨è§£ï¼\n\nstatic class Registrar implements ImportBeanDefinitionRegistrar, DeterminableImports {\n\n        @Override\n        public void registerBeanDefinitions(AnnotationMetadata metadata,\n                BeanDefinitionRegistry registry) {\n            register(registry, new PackageImport(metadata).getPackageName());\n        }\n\n\nå®å¶å®æ¯æ³¨åäºä¸ä¸ª Bean çå®ä¹ã\n\nnew PackageImport(metadata).getPackageName()ï¼å®å¶å®è¿åäºå½åä¸»ç¨åºç±»ç åçº§ä»¥åå­çº§ çåç»ä»¶ã\n\n\n\nä»¥ä¸å¾ä¸ºä¾ï¼DemoApplication æ¯å demo ååçº§ï¼ä½æ¯ demo2 è¿ä¸ªç±»æ¯ DemoApplication çç¶çº§ï¼å example ååçº§\n\nä¹å°±æ¯è¯´ï¼DemoApplication å¯å¨å è½½ç Bean ä¸­ï¼å¹¶ä¸ä¼å è½½ demo2ï¼è¿ä¹å°±æ¯ä¸ºä»ä¹ï¼æä»¬è¦æ DemoApplication æ¾å¨é¡¹ç®çæé«çº§ä¸­ã\n\n# Import(AutoConfigurationImportSelector.class)æ³¨è§£ï¼\n\n\n\nå¯ä»¥ä»å¾ä¸­çåº AutoConfigurationImportSelector ç»§æ¿äº DeferredImportSelector ç»§æ¿äº ImportSelector\n\nImportSelector æä¸ä¸ªæ¹æ³ä¸ºï¼selectImportsã\n\n@Override\n    public String[] selectImports(AnnotationMetadata annotationMetadata) {\n        if (!isEnabled(annotationMetadata)) {\n            return NO_IMPORTS;\n        }\n        AutoConfigurationMetadata autoConfigurationMetadata = AutoConfigurationMetadataLoader\n                .loadMetadata(this.beanClassLoader);\n        AnnotationAttributes attributes = getAttributes(annotationMetadata);\n        List<String> configurations = getCandidateConfigurations(annotationMetadata,\n                attributes);\n        configurations = removeDuplicates(configurations);\n        Set<String> exclusions = getExclusions(annotationMetadata, attributes);\n        checkExcludedClasses(configurations, exclusions);\n        configurations.removeAll(exclusions);\n        configurations = filter(configurations, autoConfigurationMetadata);\n        fireAutoConfigurationImportEvents(configurations, exclusions);\n        return StringUtils.toStringArray(configurations);\n    }\n\n\nå¯ä»¥çå°ç¬¬ä¹è¡ï¼å®å¶å®æ¯å»å è½½ public static final String FACTORIES_RESOURCE_LOCATION = "META-INF/spring.factories";å¤é¨æä»¶ãè¿ä¸ªå¤é¨æä»¶ï¼æå¾å¤èªå¨éç½®çç±»ãå¦ä¸ï¼\n\n\n\nimage\n\nå¶ä¸­ï¼æå³é®çè¦å±**@Import(EnableAutoConfigurationImportSelector.class)ï¼åå©EnableAutoConfigurationImportSelector**ï¼@EnableAutoConfigurationå¯ä»¥å¸®å© SpringBoot åºç¨å°ææç¬¦åæ¡ä»¶ç**@Configuration**éç½®é½å è½½å°å½å SpringBoot åå»ºå¹¶ä½¿ç¨ç IoC å®¹å¨ãå°±åä¸åªâå«çªé±¼âä¸æ ·ã\n\n\n\n\n# èªå¨éç½®å¹åè±éï¼SpringFactoriesLoader è¯¦è§£\n\nåå©äº Spring æ¡æ¶åæçä¸ä¸ªå·¥å·ç±»ï¼SpringFactoriesLoader çæ¯æï¼@EnableAutoConfiguration å¯ä»¥æºè½çèªå¨éç½®åææå¾ä»¥å¤§ååæï¼\n\nSpringFactoriesLoader å±äº Spring æ¡æ¶ç§æçä¸ç§æ©å±æ¹æ¡ï¼å¶ä¸»è¦åè½å°±æ¯ä»æå®çéç½®æä»¶ META-INF/spring.factories å è½½éç½®ã\n\npublic abstract class SpringFactoriesLoader {\n    //...\n    public static <T> List<T> loadFactories(Class<T> factoryClass, ClassLoader classLoader) {\n        ...\n    }\n\n\n    public static List<String> loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader) {\n        ....\n    }\n}\n\n\néå**@EnableAutoConfigurationä½¿ç¨çè¯ï¼å®æ´å¤æ¯æä¾ä¸ç§éç½®æ¥æ¾çåè½æ¯æï¼å³æ ¹æ®@EnableAutoConfiguration çå®æ´ç±»å org.springframework.boot.autoconfigure.EnableAutoConfiguration ä½ä¸ºæ¥æ¾ç Key,è·åå¯¹åºçä¸ç»@Configuration**ç±»\n\n\n\nä¸å¾å°±æ¯ä» SpringBoot ç autoconfigure ä¾èµåä¸­ç META-INF/spring.factories éç½®æä»¶ä¸­æå½çä¸æ®µåå®¹ï¼å¯ä»¥å¾å¥½å°è¯´æé®é¢ã\n\næä»¥ï¼@EnableAutoConfiguration èªå¨éç½®çé­æ³éªå£«å°±åæäºï¼ä» classpath ä¸­æå¯»ææç META-INF/spring.factories éç½®æä»¶ï¼å¹¶å°å¶ä¸­ org.springframework.boot.autoconfigure.EnableutoConfiguration å¯¹åºçéç½®é¡¹éè¿åå°ï¼Java Refletionï¼å®ä¾åä¸ºå¯¹åºçæ æ³¨äº@Configuration ç JavaConfig å½¢å¼ç IoC å®¹å¨éç½®ç±»ï¼ç¶åæ±æ»ä¸ºä¸ä¸ªå¹¶å è½½å° IoC å®¹å¨ã\n\n\n\n\n# åèèµæ\n\n * ä¸æææ springboot å¯å¨åç',normalizedContent:'# springboot åºæ¬åç\n\nspringboot ä¸ºæä»¬åçèªå¨éç½®ï¼ç¡®å®æ¹ä¾¿å¿«æ·ï¼ä½ä¸ç´æä¸æç½å®çåé¨å¯å¨åçï¼è¿æ¬¡å°±æ¥ä¸æ­¥æ­¥è§£å¼ springboot çç¥ç§é¢çº±ï¼è®©å®ä¸åç¥ç§ã\n\n\n\n----------------------------------------\n\n@springbootapplication\npublic class application {\n    public static void main(string[] args) {\n        springapplication.run(application.class, args);\n    }\n}\n\n\nä»ä¸é¢ä»£ç å¯ä»¥çåºï¼**annotation å®ä¹ï¼@springbootapplicationï¼åç±»å®ä¹ï¼springapplication.runï¼**æä¸ºèç¼ï¼æä»¥è¦æ­å¼ springboot çç¥ç§é¢çº±ï¼æä»¬è¦ä»è¿ä¸¤ä½å¼å§å°±å¯ä»¥äºã\n\n\n# springbootapplication èåçç§å¯\n\n@target(elementtype.type)            // æ³¨è§£çéç¨èå´ï¼å¶ä¸­typeç¨äºæè¿°ç±»ãæ¥å£ï¼åæ¬åæ³¨è§£ç±»åï¼æenumå£°æ\n@retention(retentionpolicy.runtime)  // æ³¨è§£ççå½å¨æï¼ä¿çå°classæä»¶ä¸­ï¼ä¸ä¸ªçå½å¨æï¼\n@documented                          // è¡¨æè¿ä¸ªæ³¨è§£åºè¯¥è¢«javadocè®°å½\n@inherited                           // å­ç±»å¯ä»¥ç»§æ¿è¯¥æ³¨è§£\n@springbootconfiguration             // ç»§æ¿äºconfigurationï¼è¡¨ç¤ºå½åæ¯æ³¨è§£ç±»\n@enableautoconfiguration             // å¼å¯springbootçæ³¨è§£åè½ï¼springbootçåå¤§ç¥å¨ä¹ä¸ï¼å¶åå©@importçå¸®å©\n@componentscan(excludefilters = {    // æ«æè·¯å¾è®¾ç½®ï¼å·ä½ä½¿ç¨å¾ç¡®è®¤ï¼\n        @filter(type = filtertype.custom, classes = typeexcludefilter.class),\n        @filter(type = filtertype.custom, classes = autoconfigurationexcludefilter.class) })\npublic @interface springbootapplication {\n...\n}\n\n\nè½ç¶å®ä¹ä½¿ç¨äºå¤ä¸ª annotation è¿è¡äºåä¿¡æ¯æ æ³¨ï¼ä½å®éä¸éè¦çåªæä¸ä¸ª annotationï¼\n\n@configurationï¼@springbootconfiguration ç¹å¼æ¥çåç°éé¢è¿æ¯åºç¨äº@configurationï¼ @enableautoconfiguration @componentscan æä»¥ï¼å¦ææä»¬ä½¿ç¨å¦ä¸ç springboot å¯å¨ç±»ï¼æ´ä¸ª springboot åºç¨ä¾ç¶å¯ä»¥ä¸ä¹åçå¯å¨ç±»åè½å¯¹ç­ï¼\n\n@configuration\n@enableautoconfiguration\n@componentscan\npublic class application {\n    public static void main(string[] args) {\n        springapplication.run(application.class, args);\n    }\n}\n\n\næ¯æ¬¡åè¿ 3 ä¸ªæ¯è¾ç´¯ï¼æä»¥åä¸ä¸ª@springbootapplication æ¹ä¾¿ç¹ãæ¥ä¸æ¥åå«ä»ç»è¿ 3 ä¸ª annotationã\n\n\n# @configuration\n\nè¿éç@configuration å¯¹æä»¬æ¥è¯´ä¸éçï¼å®å°±æ¯ javaconfig å½¢å¼ç spring ioc å®¹å¨çéç½®ç±»ä½¿ç¨çé£ä¸ª@configurationï¼springboot ç¤¾åºæ¨èä½¿ç¨åºäº javaconfig çéç½®å½¢å¼ï¼æä»¥ï¼è¿éçå¯å¨ç±»æ æ³¨äº@configuration ä¹åï¼æ¬èº«å¶å®ä¹æ¯ä¸ä¸ª ioc å®¹å¨çéç½®ç±»ã ä¸¾å ä¸ªç®åä¾å­åé¡¾ä¸ï¼xml è· config éç½®æ¹å¼çåºå«ï¼\n\nè¡¨è¾¾å½¢å¼å±é¢ åºäº xml éç½®çæ¹å¼æ¯è¿æ ·ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"\n       default-lazy-init="true">\n    \x3c!--beanå®ä¹--\x3e\n</beans>\n\n\nèåºäº javaconfig çéç½®æ¹å¼æ¯è¿æ ·ï¼\n\n@configuration\npublic class mockconfiguration{\n    //beanå®ä¹\n}\n\n\nä»»ä½ä¸ä¸ªæ æ³¨äº@configuration ç java ç±»å®ä¹é½æ¯ä¸ä¸ª javaconfig éç½®ç±»ã\n\næ³¨å bean å®ä¹å±é¢ åºäº xml çéç½®å½¢å¼æ¯è¿æ ·ï¼\n\n<bean id="mockservice" class="..mockserviceimpl">\n    ...\n</bean>\n\n\nèåºäº javaconfig çéç½®å½¢å¼æ¯è¿æ ·çï¼\n\n@configuration\npublic class mockconfiguration{\n    @bean\n    public mockservice mockservice(){\n        return new mockserviceimpl();\n    }\n}\n\n\nä»»ä½ä¸ä¸ªæ æ³¨äº@bean çæ¹æ³ï¼å¶è¿åå¼å°ä½ä¸ºä¸ä¸ª bean å®ä¹æ³¨åå° spring ç ioc å®¹å¨ï¼æ¹æ³åå°é»è®¤æè¯¥ bean å®ä¹ç idã\n\nè¡¨è¾¾ä¾èµæ³¨å¥å³ç³»å±é¢ ä¸ºäºè¡¨è¾¾ bean ä¸ bean ä¹é´çä¾èµå³ç³»ï¼å¨ xml å½¢å¼ä¸­ä¸è¬æ¯è¿æ ·ï¼\n\n<bean id="mockservice" class="..mockserviceimpl">\n    <propery name ="dependencyservice" ref="dependencyservice" />\n</bean>\n\n<bean id="dependencyservice" class="dependencyserviceimpl"></bean>\n\n\nèåºäº javaconfig çéç½®å½¢å¼æ¯è¿æ ·çï¼\n\n@configuration\npublic class mockconfiguration{\n    @bean\n    public mockservice mockservice(){\n        return new mockserviceimpl(dependencyservice());\n    }\n\n    @bean\n    public dependencyservice dependencyservice(){\n        return new dependencyserviceimpl();\n    }\n}\n\n\nå¦æä¸ä¸ª bean çå®ä¹ä¾èµå¶ä» bean,åç´æ¥è°ç¨å¯¹åºç javaconfig ç±»ä¸­ä¾èµ bean çåå»ºæ¹æ³å°±å¯ä»¥äºã\n\n\n# @componentscan\n\n@componentscan è¿ä¸ªæ³¨è§£å¨ spring ä¸­å¾éè¦ï¼å®å¯¹åº xml éç½®ä¸­çåç´ ï¼@componentscan çåè½å¶å®å°±æ¯èªå¨æ«æå¹¶å è½½ç¬¦åæ¡ä»¶çç»ä»¶ï¼æ¯å¦@component å@repository ç­ï¼æè bean å®ä¹ï¼æç»å°è¿äº bean å®ä¹å è½½å° ioc å®¹å¨ä¸­ã\n\næä»¬å¯ä»¥éè¿ basepackages ç­å±æ§æ¥ç»ç²åº¦çå®å¶@componentscan èªå¨æ«æçèå´ï¼å¦æä¸æå®ï¼åé»è®¤ spring æ¡æ¶å®ç°ä¼ä»å£°æ@componentscan æå¨ç±»ç package è¿è¡æ«æã\n\n> æ³¨ï¼æä»¥ springboot çå¯å¨ç±»æå¥½æ¯æ¾å¨ root package ä¸ï¼å ä¸ºé»è®¤ä¸æå® basepackagesã\n\n\n# @enableautoconfiguration\n\nä¸ªäººæè§**@enableautoconfiguration è¿ä¸ª annotation æä¸ºéè¦**ï¼æä»¥æ¾å¨æåæ¥è§£è¯»ï¼å¤§å®¶æ¯å¦è¿è®°å¾ spring æ¡æ¶æä¾çåç§åå­ä¸º@enable å¼å¤´ç annotation å®ä¹ï¼æ¯å¦@enableschedulingã@enablecachingã@enablembeanexport ç­ï¼@enableautoconfiguration ççå¿µååäºæ¹å¼å¶å®ä¸èç¸æ¿ï¼ç®åæ¦æ¬ä¸ä¸å°±æ¯ï¼åå©@import çæ¯æï¼æ¶éåæ³¨åç¹å®åºæ¯ç¸å³ç bean å®ä¹ã\n\n@enableschedulingæ¯éè¿@import å° spring è°åº¦æ¡æ¶ç¸å³ç bean å®ä¹é½å è½½å° ioc å®¹å¨ã @enablembeanexportæ¯éè¿@import å° jmx ç¸å³ç bean å®ä¹å è½½å° ioc å®¹å¨ã è**@enableautoconfiguration**ä¹æ¯åå©@import çå¸®å©ï¼å°ææç¬¦åèªå¨éç½®æ¡ä»¶ç bean å®ä¹å è½½å° ioc å®¹å¨ï¼ä»æ­¤èå·²ï¼\n\n@enableautoconfiguration ä½ä¸ºä¸ä¸ªå¤å annotation,å¶èªèº«å®ä¹å³é®ä¿¡æ¯å¦ä¸ï¼\n\n@suppresswarnings("deprecation")\n@target(elementtype.type)\n@retention(retentionpolicy.runtime)\n@documented\n@inherited\n@autoconfigurationpackage\n@import(enableautoconfigurationimportselector.class)\npublic @interface enableautoconfiguration {\n    ...\n}\n\n\nä¸¤ä¸ªæ¯è¾éè¦çæ³¨è§£ï¼\n\n@autoconfigurationpackageï¼èªå¨éç½®å\n\n@import: å¯¼å¥èªå¨éç½®çç»ä»¶\n\n# autoconfigurationpackage æ³¨è§£ï¼\n\nstatic class registrar implements importbeandefinitionregistrar, determinableimports {\n\n        @override\n        public void registerbeandefinitions(annotationmetadata metadata,\n                beandefinitionregistry registry) {\n            register(registry, new packageimport(metadata).getpackagename());\n        }\n\n\nå®å¶å®æ¯æ³¨åäºä¸ä¸ª bean çå®ä¹ã\n\nnew packageimport(metadata).getpackagename()ï¼å®å¶å®è¿åäºå½åä¸»ç¨åºç±»ç åçº§ä»¥åå­çº§ çåç»ä»¶ã\n\n\n\nä»¥ä¸å¾ä¸ºä¾ï¼demoapplication æ¯å demo ååçº§ï¼ä½æ¯ demo2 è¿ä¸ªç±»æ¯ demoapplication çç¶çº§ï¼å example ååçº§\n\nä¹å°±æ¯è¯´ï¼demoapplication å¯å¨å è½½ç bean ä¸­ï¼å¹¶ä¸ä¼å è½½ demo2ï¼è¿ä¹å°±æ¯ä¸ºä»ä¹ï¼æä»¬è¦æ demoapplication æ¾å¨é¡¹ç®çæé«çº§ä¸­ã\n\n# import(autoconfigurationimportselector.class)æ³¨è§£ï¼\n\n\n\nå¯ä»¥ä»å¾ä¸­çåº autoconfigurationimportselector ç»§æ¿äº deferredimportselector ç»§æ¿äº importselector\n\nimportselector æä¸ä¸ªæ¹æ³ä¸ºï¼selectimportsã\n\n@override\n    public string[] selectimports(annotationmetadata annotationmetadata) {\n        if (!isenabled(annotationmetadata)) {\n            return no_imports;\n        }\n        autoconfigurationmetadata autoconfigurationmetadata = autoconfigurationmetadataloader\n                .loadmetadata(this.beanclassloader);\n        annotationattributes attributes = getattributes(annotationmetadata);\n        list<string> configurations = getcandidateconfigurations(annotationmetadata,\n                attributes);\n        configurations = removeduplicates(configurations);\n        set<string> exclusions = getexclusions(annotationmetadata, attributes);\n        checkexcludedclasses(configurations, exclusions);\n        configurations.removeall(exclusions);\n        configurations = filter(configurations, autoconfigurationmetadata);\n        fireautoconfigurationimportevents(configurations, exclusions);\n        return stringutils.tostringarray(configurations);\n    }\n\n\nå¯ä»¥çå°ç¬¬ä¹è¡ï¼å®å¶å®æ¯å»å è½½ public static final string factories_resource_location = "meta-inf/spring.factories";å¤é¨æä»¶ãè¿ä¸ªå¤é¨æä»¶ï¼æå¾å¤èªå¨éç½®çç±»ãå¦ä¸ï¼\n\n\n\nimage\n\nå¶ä¸­ï¼æå³é®çè¦å±**@import(enableautoconfigurationimportselector.class)ï¼åå©enableautoconfigurationimportselector**ï¼@enableautoconfigurationå¯ä»¥å¸®å© springboot åºç¨å°ææç¬¦åæ¡ä»¶ç**@configuration**éç½®é½å è½½å°å½å springboot åå»ºå¹¶ä½¿ç¨ç ioc å®¹å¨ãå°±åä¸åªâå«çªé±¼âä¸æ ·ã\n\n\n\n\n# èªå¨éç½®å¹åè±éï¼springfactoriesloader è¯¦è§£\n\nåå©äº spring æ¡æ¶åæçä¸ä¸ªå·¥å·ç±»ï¼springfactoriesloader çæ¯æï¼@enableautoconfiguration å¯ä»¥æºè½çèªå¨éç½®åææå¾ä»¥å¤§ååæï¼\n\nspringfactoriesloader å±äº spring æ¡æ¶ç§æçä¸ç§æ©å±æ¹æ¡ï¼å¶ä¸»è¦åè½å°±æ¯ä»æå®çéç½®æä»¶ meta-inf/spring.factories å è½½éç½®ã\n\npublic abstract class springfactoriesloader {\n    //...\n    public static <t> list<t> loadfactories(class<t> factoryclass, classloader classloader) {\n        ...\n    }\n\n\n    public static list<string> loadfactorynames(class<?> factoryclass, classloader classloader) {\n        ....\n    }\n}\n\n\néå**@enableautoconfigurationä½¿ç¨çè¯ï¼å®æ´å¤æ¯æä¾ä¸ç§éç½®æ¥æ¾çåè½æ¯æï¼å³æ ¹æ®@enableautoconfiguration çå®æ´ç±»å org.springframework.boot.autoconfigure.enableautoconfiguration ä½ä¸ºæ¥æ¾ç key,è·åå¯¹åºçä¸ç»@configuration**ç±»\n\n\n\nä¸å¾å°±æ¯ä» springboot ç autoconfigure ä¾èµåä¸­ç meta-inf/spring.factories éç½®æä»¶ä¸­æå½çä¸æ®µåå®¹ï¼å¯ä»¥å¾å¥½å°è¯´æé®é¢ã\n\næä»¥ï¼@enableautoconfiguration èªå¨éç½®çé­æ³éªå£«å°±åæäºï¼ä» classpath ä¸­æå¯»ææç meta-inf/spring.factories éç½®æä»¶ï¼å¹¶å°å¶ä¸­ org.springframework.boot.autoconfigure.enableutoconfiguration å¯¹åºçéç½®é¡¹éè¿åå°ï¼java refletionï¼å®ä¾åä¸ºå¯¹åºçæ æ³¨äº@configuration ç javaconfig å½¢å¼ç ioc å®¹å¨éç½®ç±»ï¼ç¶åæ±æ»ä¸ºä¸ä¸ªå¹¶å è½½å° ioc å®¹å¨ã\n\n\n\n\n# åèèµæ\n\n * ä¸æææ springboot å¯å¨åç',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ç»¼è¿°",frontmatter:{title:"Spring ç»¼è¿°",date:"2020-02-26T23:48:06.000Z",categories:["Java","æ¡æ¶","Spring","Springç»¼å"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/9e0b67/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/00.Spring%E7%BB%BC%E5%90%88/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/README.md",key:"v-7f7df8a0",path:"/pages/9e0b67/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:16},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:91},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:270}],headersStr:"ð åå®¹ ð èµæ ðª ä¼ é",content:"# Spring ç»¼è¿°\n\n\n# ð åå®¹\n\n * Spring æ¦è¿°\n * SpringBoot ç¥è¯å¾è°±\n * SpringBoot åºæ¬åç\n * Spring é¢è¯\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾",normalizedContent:"# spring ç»¼è¿°\n\n\n# ð åå®¹\n\n * spring æ¦è¿°\n * springboot ç¥è¯å¾è°±\n * springboot åºæ¬åç\n * spring é¢è¯\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ç¥è¯å¾è°±",frontmatter:{title:"SpringBoot ç¥è¯å¾è°±",date:"2020-08-12T07:01:26.000Z",order:21,categories:["Java","æ¡æ¶","Spring","Springç»¼å"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/430f53/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/00.Spring%E7%BB%BC%E5%90%88/21.SpringBoot%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/21.SpringBootç¥è¯å¾è°±.md",key:"v-b55d218c",path:"/pages/430f53/",headers:[{level:2,title:"ä¸ãæç å¼çï¼æ¢ç´¢ Spring IoC å®¹å¨",slug:"ä¸ãæç å¼ç-æ¢ç´¢-spring-ioc-å®¹å¨",normalizedTitle:"ä¸ãæç å¼çï¼æ¢ç´¢ spring ioc å®¹å¨",charIndex:722},{level:3,title:"1.1ãSpring IoC å®¹å¨",slug:"_1-1ãspring-ioc-å®¹å¨",normalizedTitle:"1.1ãspring ioc å®¹å¨",charIndex:911},{level:3,title:"1.2ãSpring å®¹å¨æ©å±æºå¶",slug:"_1-2ãspring-å®¹å¨æ©å±æºå¶",normalizedTitle:"1.2ãspring å®¹å¨æ©å±æºå¶",charIndex:4067},{level:2,title:"äºãå¤¯å®åºç¡ï¼JavaConfig ä¸å¸¸è§ Annotation",slug:"äºãå¤¯å®åºç¡-javaconfig-ä¸å¸¸è§-annotation",normalizedTitle:"äºãå¤¯å®åºç¡ï¼javaconfig ä¸å¸¸è§ annotation",charIndex:6857},{level:3,title:"2.1ãJavaConfig",slug:"_2-1ãjavaconfig",normalizedTitle:"2.1ãjavaconfig",charIndex:6894},{level:3,title:"2.2ã@ComponentScan",slug:"_2-2ã-componentscan",normalizedTitle:"2.2ã@componentscan",charIndex:8790},{level:3,title:"2.3ã@Import",slug:"_2-3ã-import",normalizedTitle:"2.3ã@import",charIndex:9028},{level:3,title:"2.4ã@Conditional",slug:"_2-4ã-conditional",normalizedTitle:"2.4ã@conditional",charIndex:9693},{level:3,title:"2.5ã@ConfigurationProperties ä¸@EnableConfigurationProperties",slug:"_2-5ã-configurationproperties-ä¸-enableconfigurationproperties",normalizedTitle:"2.5ã@configurationproperties ä¸@enableconfigurationproperties",charIndex:11433},{level:2,title:"ä¸ãåéå¦æ³¥ï¼SpringFactoriesLoader è¯¦è§£",slug:"ä¸ãåéå¦æ³¥-springfactoriesloader-è¯¦è§£",normalizedTitle:"ä¸ãåéå¦æ³¥ï¼springfactoriesloader è¯¦è§£",charIndex:14026},{level:2,title:"åãå¦ä¸ä»¶æ­¦å¨ï¼Spring å®¹å¨çäºä»¶çå¬æºå¶",slug:"åãå¦ä¸ä»¶æ­¦å¨-spring-å®¹å¨çäºä»¶çå¬æºå¶",normalizedTitle:"åãå¦ä¸ä»¶æ­¦å¨ï¼spring å®¹å¨çäºä»¶çå¬æºå¶",charIndex:19858},{level:4,title:"Spring å®¹å¨åçäºä»¶çå¬æºå¶",slug:"spring-å®¹å¨åçäºä»¶çå¬æºå¶",normalizedTitle:"spring å®¹å¨åçäºä»¶çå¬æºå¶",charIndex:23057},{level:2,title:"äºãåºç¥å¥åï¼æ­ç§èªå¨éç½®åç",slug:"äºãåºç¥å¥å-æ­ç§èªå¨éç½®åç",normalizedTitle:"äºãåºç¥å¥åï¼æ­ç§èªå¨éç½®åç",charIndex:24228},{level:2,title:"å­ãå¯å¨å¼å¯¼ï¼Spring Boot åºç¨å¯å¨çç§å¯",slug:"å­ãå¯å¨å¼å¯¼-spring-boot-åºç¨å¯å¨çç§å¯",normalizedTitle:"å­ãå¯å¨å¼å¯¼ï¼spring boot åºç¨å¯å¨çç§å¯",charIndex:28598},{level:3,title:"6.1 SpringApplication åå§å",slug:"_6-1-springapplication-åå§å",normalizedTitle:"6.1 springapplication åå§å",charIndex:28629},{level:3,title:"6.2 Spring Boot å¯å¨æµç¨",slug:"_6-2-spring-boot-å¯å¨æµç¨",normalizedTitle:"6.2 spring boot å¯å¨æµç¨",charIndex:30395},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:36499}],headersStr:"ä¸ãæç å¼çï¼æ¢ç´¢ Spring IoC å®¹å¨ 1.1ãSpring IoC å®¹å¨ 1.2ãSpring å®¹å¨æ©å±æºå¶ äºãå¤¯å®åºç¡ï¼JavaConfig ä¸å¸¸è§ Annotation 2.1ãJavaConfig 2.2ã@ComponentScan 2.3ã@Import 2.4ã@Conditional 2.5ã@ConfigurationProperties ä¸@EnableConfigurationProperties ä¸ãåéå¦æ³¥ï¼SpringFactoriesLoader è¯¦è§£ åãå¦ä¸ä»¶æ­¦å¨ï¼Spring å®¹å¨çäºä»¶çå¬æºå¶ Spring å®¹å¨åçäºä»¶çå¬æºå¶ äºãåºç¥å¥åï¼æ­ç§èªå¨éç½®åç å­ãå¯å¨å¼å¯¼ï¼Spring Boot åºç¨å¯å¨çç§å¯ 6.1 SpringApplication åå§å 6.2 Spring Boot å¯å¨æµç¨ åèèµæ",content:'# SpringBoot ç¥è¯å¾è°±\n\n>  1. é¢è­¦ï¼æ¬æéå¸¸é¿ï¼å»ºè®®å mark åçï¼ä¹è®¸æ¯æåä¸æ¬¡åè¿ä¹é¿çæç« \n>  2. è¯´æï¼åé¢æ 4 ä¸ªå°èå³äº Spring çåºç¡ç¥è¯ï¼åå«æ¯ï¼IOC å®¹å¨ãJavaConfigãäºä»¶çå¬ãSpringFactoriesLoader è¯¦è§£ï¼å®ä»¬å æ®äºæ¬æçå¤§é¨ååå®¹ï¼è½ç¶å®ä»¬ä¹é´å¯è½æ²¡æå¤ªå¤çèç³»ï¼ä½è¿äºç¥è¯å¯¹äºçè§£ Spring Boot çæ ¸å¿åçè³å³éè¦ï¼å¦æä½ å¯¹ Spring æ¡æ¶ççäºå¿ï¼å®å¨å¯ä»¥è·³è¿è¿ 4 ä¸ªå°èãæ­£æ¯å ä¸ºè¿ä¸ªç³»åçæç« æ¯ç±è¿äºçä¼¼ä¸ç¸å³çç¥è¯ç¹ç»æï¼å æ­¤ååç¥è¯æ¸åã\n\nå¨è¿å»ä¸¤ä¸å¹´ç Spring çæåï¼æè®©äººå´å¥çè«è¿äº Spring Boot æ¡æ¶ãæè®¸ä»å½åä¸å°±è½çåºè¿ä¸ªæ¡æ¶çè®¾è®¡åè¡·ï¼å¿«éçå¯å¨ Spring åºç¨ãå è Spring Boot åºç¨æ¬è´¨ä¸å°±æ¯ä¸ä¸ªåºäº Spring æ¡æ¶çåºç¨ï¼å®æ¯ Spring å¯¹âçº¦å®ä¼åäºéç½®âçå¿µçæä½³å®è·µäº§ç©ï¼å®è½å¤å¸®å©å¼åèæ´å¿«éé«æå°æå»ºåºäº Spring çæåçåºç¨ã\n\né£ Spring Boot æä½é­æ³ï¼èªå¨éç½®ãèµ·æ­¥ä¾èµãActuatorãå½ä»¤è¡çé¢(CLI) æ¯ Spring Boot æéè¦ç 4 å¤§æ ¸å¿ç¹æ§ï¼å¶ä¸­ CLI æ¯ Spring Boot çå¯éç¹æ§ï¼è½ç¶å®åè½å¼ºå¤§ï¼ä½ä¹å¼å¥äºä¸å¥ä¸å¤ªå¸¸è§çå¼åæ¨¡åï¼å èè¿ä¸ªç³»åçæç« ä»å³æ³¨å¶å® 3 ç§ç¹æ§ãå¦æç« æ é¢ï¼æ¬ææ¯è¿ä¸ªç³»åçç¬¬ä¸é¨åï¼å°ä¸ºä½ æå¼ Spring Boot çå¤§é¨ï¼éç¹ä¸ºä½ åæå¶å¯å¨æµç¨ä»¥åèªå¨éç½®å®ç°åçãè¦ææ¡è¿é¨åæ ¸å¿åå®¹ï¼çè§£ä¸äº Spring æ¡æ¶çåºç¡ç¥è¯ï¼å°ä¼è®©ä½ äºåååã\n\n\n# ä¸ãæç å¼çï¼æ¢ç´¢ Spring IoC å®¹å¨\n\nå¦ææçè¿SpringApplication.run()æ¹æ³çæºç ï¼Spring Boot åé¿æ æ¯çå¯å¨æµç¨ä¸å®ä¼è®©ä½ æçï¼éè¿ç°è±¡çæ¬è´¨ï¼SpringApplication åªæ¯å°ä¸ä¸ªå¸åç Spring åºç¨çå¯å¨æµç¨è¿è¡äºæ©å±ï¼å æ­¤ï¼éå½»çè§£ Spring å®¹å¨æ¯æå¼ Spring Boot å¤§é¨çä¸æé¥åã\n\n\n# 1.1ãSpring IoC å®¹å¨\n\nå¯ä»¥æ Spring IoC å®¹å¨æ¯ä½ä¸é´é¤é¦ï¼å½ä½ æ¥å°é¤é¦ï¼éå¸¸ä¼ç´æ¥æå¼æå¡åï¼ç¹èï¼è³äºèçåææ¯ä»ä¹ï¼å¦ä½ç¨åææèååºæ¥ï¼å¯è½ä½ æ ¹æ¬å°±ä¸å³å¿ãIoC å®¹å¨ä¹æ¯ä¸æ ·ï¼ä½ åªéè¦åè¯å®éè¦æä¸ª beanï¼å®å°±æå¯¹åºçå®ä¾ï¼instanceï¼æç»ä½ ï¼è³äºè¿ä¸ª bean æ¯å¦ä¾èµå¶ä»ç»ä»¶ï¼ææ ·å®æå®çåå§åï¼æ ¹æ¬å°±ä¸éè¦ä½ å³å¿ã\n\nä½ä¸ºé¤é¦ï¼æ³è¦ååºèè´ï¼å¾ç¥éèçåæåèè°±ï¼åæ ·å°ï¼IoC å®¹å¨æ³è¦ç®¡çåä¸ªä¸å¡å¯¹è±¡ä»¥åå®ä»¬ä¹é´çä¾èµå³ç³»ï¼éè¦éè¿æç§éå¾æ¥è®°å½åç®¡çè¿äºä¿¡æ¯ãBeanDefinitionå¯¹è±¡å°±æ¿æäºè¿ä¸ªè´£ä»»ï¼å®¹å¨ä¸­çæ¯ä¸ä¸ª bean é½ä¼æä¸ä¸ªå¯¹åºç BeanDefinition å®ä¾ï¼è¯¥å®ä¾è´è´£ä¿å­ bean å¯¹è±¡çææå¿è¦ä¿¡æ¯ï¼åæ¬ bean å¯¹è±¡ç class ç±»åãæ¯å¦æ¯æ½è±¡ç±»ãæé æ¹æ³ååæ°ãå¶å®å±æ§ç­ç­ãå½å®¢æ·ç«¯åå®¹å¨è¯·æ±ç¸åºå¯¹è±¡æ¶ï¼å®¹å¨å°±ä¼éè¿è¿äºä¿¡æ¯ä¸ºå®¢æ·ç«¯è¿åä¸ä¸ªå®æ´å¯ç¨ç bean å®ä¾ã\n\nåææå·²ç»åå¤å¥½ï¼æ BeanDefinition ççåæï¼ï¼å¼å§åèå§ï¼ç­ç­ï¼ä½ è¿éè¦ä¸ä»½èè°±ï¼BeanDefinitionRegistryåBeanFactoryå°±æ¯è¿ä»½èè°±ï¼BeanDefinitionRegistry æ½è±¡åº bean çæ³¨åé»è¾ï¼è BeanFactory åæ½è±¡åºäº bean çç®¡çé»è¾ï¼èåä¸ª BeanFactory çå®ç°ç±»å°±å·ä½æ¿æäº bean çæ³¨åä»¥åç®¡çå·¥ä½ãå®ä»¬ä¹é´çå³ç³»å°±å¦ä¸å¾ï¼\n\nBeanFactoryãBeanDefinitionRegistry å³ç³»å¾ï¼æ¥èªï¼Spring æ­ç§ï¼\n\nDefaultListableBeanFactoryä½ä¸ºä¸ä¸ªæ¯è¾éç¨ç BeanFactory å®ç°ï¼å®åæ¶ä¹å®ç°äº BeanDefinitionRegistry æ¥å£ï¼å æ­¤å®å°±æ¿æäº Bean çæ³¨åç®¡çå·¥ä½ãä»å¾ä¸­ä¹å¯ä»¥çåºï¼BeanFactory æ¥å£ä¸­ä¸»è¦åå« getBeanãcontainBeanãgetTypeãgetAliases ç­ç®¡ç bean çæ¹æ³ï¼è BeanDefinitionRegistry æ¥å£ååå« registerBeanDefinitionãremoveBeanDefinitionãgetBeanDefinition ç­æ³¨åç®¡ç BeanDefinition çæ¹æ³ã\n\nä¸é¢éè¿ä¸æ®µç®åçä»£ç æ¥æ¨¡æ BeanFactory åºå±æ¯å¦ä½å·¥ä½çï¼\n\n// é»è®¤å®¹å¨å®ç°\nDefaultListableBeanFactory beanRegistry = new DefaultListableBeanFactory();\n// æ ¹æ®ä¸å¡å¯¹è±¡æé ç¸åºçBeanDefinition\nAbstractBeanDefinition definition = new RootBeanDefinition(Business.class,true);\n// å°beanå®ä¹æ³¨åå°å®¹å¨ä¸­\nbeanRegistry.registerBeanDefinition("beanName",definition);\n// å¦ææå¤ä¸ªbeanï¼è¿å¯ä»¥æå®åä¸ªbeanä¹é´çä¾èµå³ç³»\n// ........\n\n// ç¶åå¯ä»¥ä»å®¹å¨ä¸­è·åè¿ä¸ªbeançå®ä¾\n// æ³¨æï¼è¿éçbeanRegistryå¶å®å®ç°äºBeanFactoryæ¥å£ï¼æä»¥å¯ä»¥å¼ºè½¬ï¼\n// åçº¯çBeanDefinitionRegistryæ¯æ æ³å¼ºå¶è½¬æ¢å°BeanFactoryç±»åç\nBeanFactory container = (BeanFactory)beanRegistry;\nBusiness business = (Business)container.getBean("beanName");\n\n\nè¿æ®µä»£ç ä»ä¸ºäºè¯´æ BeanFactory åºå±çå¤§è´å·¥ä½æµç¨ï¼å®éæåµä¼æ´å å¤æï¼æ¯å¦ bean ä¹é´çä¾èµå³ç³»å¯è½å®ä¹å¨å¤é¨éç½®æä»¶(XML/Properties)ä¸­ãä¹å¯è½æ¯æ³¨è§£æ¹å¼ãSpring IoC å®¹å¨çæ´ä¸ªå·¥ä½æµç¨å¤§è´å¯ä»¥åä¸ºä¸¤ä¸ªé¶æ®µï¼\n\nâ ãå®¹å¨å¯å¨é¶æ®µ\n\nå®¹å¨å¯å¨æ¶ï¼ä¼éè¿æç§éå¾å è½½Configuration MetaDataãé¤äºä»£ç æ¹å¼æ¯è¾ç´æ¥å¤ï¼å¨å¤§é¨åæåµä¸ï¼å®¹å¨éè¦ä¾èµæäºå·¥å·ç±»ï¼æ¯å¦ï¼BeanDefinitionReaderï¼BeanDefinitionReader ä¼å¯¹å è½½çConfiguration MetaDataè¿è¡è§£æååæï¼å¹¶å°åæåçä¿¡æ¯ç»è£ä¸ºç¸åºç BeanDefinitionï¼æåæè¿äºä¿å­äº bean å®ä¹ç BeanDefinitionï¼æ³¨åå°ç¸åºç BeanDefinitionRegistryï¼è¿æ ·å®¹å¨çå¯å¨å·¥ä½å°±å®æäºãè¿ä¸ªé¶æ®µä¸»è¦å®æä¸äºåå¤æ§å·¥ä½ï¼æ´ä¾§éäº bean å¯¹è±¡ç®¡çä¿¡æ¯çæ¶éï¼å½ç¶ä¸äºéªè¯æ§æèè¾å©æ§çå·¥ä½ä¹å¨è¿ä¸é¶æ®µå®æã\n\næ¥çä¸ä¸ªç®åçä¾å­å§ï¼è¿å¾ï¼ææç bean é½å®ä¹å¨ XML éç½®æä»¶ä¸­ï¼ä¸é¢çä»£ç å°æ¨¡æ BeanFactory å¦ä½ä»éç½®æä»¶ä¸­å è½½ bean çå®ä¹ä»¥åä¾èµå³ç³»ï¼\n\n// éå¸¸ä¸ºBeanDefinitionRegistryçå®ç°ç±»ï¼è¿éä»¥DeFaultListabeBeanFactoryä¸ºä¾\nBeanDefinitionRegistry beanRegistry = new DefaultListableBeanFactory();\n// XmlBeanDefinitionReaderå®ç°äºBeanDefinitionReaderæ¥å£ï¼ç¨äºè§£æXMLæä»¶\nXmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReaderImpl(beanRegistry);\n// å è½½éç½®æä»¶\nbeanDefinitionReader.loadBeanDefinitions("classpath:spring-bean.xml");\n\n// ä»å®¹å¨ä¸­è·åbeanå®ä¾\nBeanFactory container = (BeanFactory)beanRegistry;\nBusiness business = (Business)container.getBean("beanName");\n\n\nâ¡ãBean çå®ä¾åé¶æ®µ\n\nç»è¿ç¬¬ä¸é¶æ®µï¼ææ bean å®ä¹é½éè¿ BeanDefinition çæ¹å¼æ³¨åå° BeanDefinitionRegistry ä¸­ï¼å½æä¸ªè¯·æ±éè¿å®¹å¨ç getBean æ¹æ³è¯·æ±æä¸ªå¯¹è±¡ï¼æèå ä¸ºä¾èµå³ç³»å®¹å¨éè¦éå¼çè°ç¨ getBean æ¶ï¼å°±ä¼è§¦åç¬¬äºé¶æ®µçæ´»å¨ï¼å®¹å¨ä¼é¦åæ£æ¥æè¯·æ±çå¯¹è±¡ä¹åæ¯å¦å·²ç»å®ä¾åå®æãå¦ææ²¡æï¼åä¼æ ¹æ®æ³¨åç BeanDefinition ææä¾çä¿¡æ¯å®ä¾åè¢«è¯·æ±å¯¹è±¡ï¼å¹¶ä¸ºå¶æ³¨å¥ä¾èµãå½è¯¥å¯¹è±¡è£éå®æ¯åï¼å®¹å¨ä¼ç«å³å°å¶è¿åç»è¯·æ±æ¹æ³ä½¿ç¨ã\n\nBeanFactory åªæ¯ Spring IoC å®¹å¨çä¸ç§å®ç°ï¼å¦ææ²¡æç¹æ®æå®ï¼å®éç¨éç¨å»¶è¿åå§åç­ç¥ï¼åªæå½è®¿é®å®¹å¨ä¸­çæä¸ªå¯¹è±¡æ¶ï¼æå¯¹è¯¥å¯¹è±¡è¿è¡åå§ååä¾èµæ³¨å¥æä½ãèå¨å®éåºæ¯ä¸ï¼æä»¬æ´å¤çä½¿ç¨å¦å¤ä¸ç§ç±»åçå®¹å¨ï¼ApplicationContextï¼å®æå»ºå¨ BeanFactory ä¹ä¸ï¼å±äºæ´é«çº§çå®¹å¨ï¼é¤äºå·æ BeanFactory çææè½åä¹å¤ï¼è¿æä¾å¯¹äºä»¶çå¬æºå¶ä»¥åå½éåçæ¯æç­ãå®ç®¡çç beanï¼å¨å®¹å¨å¯å¨æ¶å¨é¨å®æåå§ååä¾èµæ³¨å¥æä½ã\n\n\n# 1.2ãSpring å®¹å¨æ©å±æºå¶\n\nIoC å®¹å¨è´è´£ç®¡çå®¹å¨ä¸­ææ bean ççå½å¨æï¼èå¨ bean çå½å¨æçä¸åé¶æ®µï¼Spring æä¾äºä¸åçæ©å±ç¹æ¥æ¹å bean çå½è¿ãå¨å®¹å¨çå¯å¨é¶æ®µï¼BeanFactoryPostProcessoråè®¸æä»¬å¨å®¹å¨å®ä¾åç¸åºå¯¹è±¡ä¹åï¼å¯¹æ³¨åå°å®¹å¨ç BeanDefinition æä¿å­çä¿¡æ¯åä¸äºé¢å¤çæä½ï¼æ¯å¦ä¿®æ¹ bean å®ä¹çæäºå±æ§æèå¢å å¶ä»ä¿¡æ¯ç­ã\n\nå¦æè¦èªå®ä¹æ©å±ç±»ï¼éå¸¸éè¦å®ç°org.springframework.beans.factory.config.BeanFactoryPostProcessoræ¥å£ï¼ä¸æ­¤åæ¶ï¼å ä¸ºå®¹å¨ä¸­å¯è½æå¤ä¸ª BeanFactoryPostProcessorï¼å¯è½è¿éè¦å®ç°org.springframework.core.Orderedæ¥å£ï¼ä»¥ä¿è¯ BeanFactoryPostProcessor æç§é¡ºåºæ§è¡ãSpring æä¾äºä¸ºæ°ä¸å¤ç BeanFactoryPostProcessor å®ç°ï¼æä»¬ä»¥PropertyPlaceholderConfigureræ¥è¯´æå¶å¤§è´çå·¥ä½æµç¨ã\n\nå¨ Spring é¡¹ç®ç XML éç½®æä»¶ä¸­ï¼ç»å¸¸å¯ä»¥çå°è®¸å¤éç½®é¡¹çå¼ä½¿ç¨å ä½ç¬¦ï¼èå°å ä½ç¬¦æä»£è¡¨çå¼åç¬éç½®å°ç¬ç«ç properties æä»¶ï¼è¿æ ·å¯ä»¥å°æ£è½å¨ä¸å XML æä»¶ä¸­çéç½®éä¸­ç®¡çï¼èä¸ä¹æ¹ä¾¿è¿ç»´æ ¹æ®ä¸åçç¯å¢è¿è¡éç½®ä¸åçå¼ãè¿ä¸ªéå¸¸å®ç¨çåè½å°±æ¯ç± PropertyPlaceholderConfigurer è´è´£å®ç°çã\n\næ ¹æ®åæï¼å½ BeanFactory å¨ç¬¬ä¸é¶æ®µå è½½å®ææéç½®ä¿¡æ¯æ¶ï¼BeanFactory ä¸­ä¿å­çå¯¹è±¡çå±æ§è¿æ¯ä»¥å ä½ç¬¦æ¹å¼å­å¨çï¼æ¯å¦${jdbc.mysql.url}ãå½ PropertyPlaceholderConfigurer ä½ä¸º BeanFactoryPostProcessor è¢«åºç¨æ¶ï¼å®ä¼ä½¿ç¨ properties éç½®æä»¶ä¸­çå¼æ¥æ¿æ¢ç¸åºç BeanDefinition ä¸­å ä½ç¬¦æè¡¨ç¤ºçå±æ§å¼ãå½éè¦å®ä¾å bean æ¶ï¼bean å®ä¹ä¸­çå±æ§å¼å°±å·²ç»è¢«æ¿æ¢ææä»¬éç½®çå¼ãå½ç¶å¶å®ç°æ¯ä¸é¢æè¿°çè¦å¤æä¸äºï¼è¿éä»è¯´æå¶å¤§è´å·¥ä½åçï¼æ´è¯¦ç»çå®ç°å¯ä»¥åèå¶æºç ã\n\nä¸ä¹ç¸ä¼¼çï¼è¿æBeanPostProcessorï¼å¶å­å¨äºå¯¹è±¡å®ä¾åé¶æ®µãè· BeanFactoryPostProcessor ç±»ä¼¼ï¼å®ä¼å¤çå®¹å¨åææç¬¦åæ¡ä»¶å¹¶ä¸å·²ç»å®ä¾ååçå¯¹è±¡ãç®åçå¯¹æ¯ï¼BeanFactoryPostProcessor å¤ç bean çå®ä¹ï¼è BeanPostProcessor åå¤ç bean å®æå®ä¾ååçå¯¹è±¡ãBeanPostProcessor å®ä¹äºä¸¤ä¸ªæ¥å£ï¼\n\npublic interface BeanPostProcessor {\n    // åç½®å¤ç\n    Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;\n    // åç½®å¤ç\n    Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;\n}\n\n\nä¸ºäºçè§£è¿ä¸¤ä¸ªæ¹æ³æ§è¡çæ¶æºï¼ç®åçäºè§£ä¸ bean çæ´ä¸ªçå½å¨æï¼\n\npostProcessBeforeInitialization()æ¹æ³ä¸postProcessAfterInitialization()åå«å¯¹åºå¾ä¸­åç½®å¤çååç½®å¤çä¸¤ä¸ªæ­¥éª¤å°æ§è¡çæ¹æ³ãè¿ä¸¤ä¸ªæ¹æ³ä¸­é½ä¼ å¥äº bean å¯¹è±¡å®ä¾çå¼ç¨ï¼ä¸ºæ©å±å®¹å¨çå¯¹è±¡å®ä¾åè¿ç¨æä¾äºå¾å¤§ä¾¿å©ï¼å¨è¿å¿å ä¹å¯ä»¥å¯¹ä¼ å¥çå®ä¾æ§è¡ä»»ä½æä½ãæ³¨è§£ãAOP ç­åè½çå®ç°åå¤§éä½¿ç¨äºBeanPostProcessorï¼æ¯å¦æä¸ä¸ªèªå®ä¹æ³¨è§£ï¼ä½ å®å¨å¯ä»¥å®ç° BeanPostProcessor çæ¥å£ï¼å¨å¶ä¸­å¤æ­ bean å¯¹è±¡çèè¢ä¸æ¯å¦æè¯¥æ³¨è§£ï¼å¦ææï¼ä½ å¯ä»¥å¯¹è¿ä¸ª bean å®ä¾æ§è¡ä»»ä½æä½ï¼æ³æ³æ¯ä¸æ¯éå¸¸çç®åï¼\n\nåæ¥çä¸ä¸ªæ´å¸¸è§çä¾å­ï¼å¨ Spring ä¸­ç»å¸¸è½å¤çå°åç§åæ ·ç Aware æ¥å£ï¼å¶ä½ç¨å°±æ¯å¨å¯¹è±¡å®ä¾åå®æä»¥åå° Aware æ¥å£å®ä¹ä¸­è§å®çä¾èµæ³¨å¥å°å½åå®ä¾ä¸­ãæ¯å¦æå¸¸è§çApplicationContextAwareæ¥å£ï¼å®ç°äºè¿ä¸ªæ¥å£çç±»é½å¯ä»¥è·åå°ä¸ä¸ª ApplicationContext å¯¹è±¡ãå½å®¹å¨ä¸­æ¯ä¸ªå¯¹è±¡çå®ä¾åè¿ç¨èµ°å° BeanPostProcessor åç½®å¤çè¿ä¸æ­¥æ¶ï¼å®¹å¨ä¼æ£æµå°ä¹åæ³¨åå°å®¹å¨ç ApplicationContextAwareProcessorï¼ç¶åå°±ä¼è°ç¨å¶ postProcessBeforeInitialization()æ¹æ³ï¼æ£æ¥å¹¶è®¾ç½® Aware ç¸å³ä¾èµãççä»£ç å§ï¼æ¯ä¸æ¯å¾ç®åï¼\n\n// ä»£ç æ¥èªï¼org.springframework.context.support.ApplicationContextAwareProcessor\n// å¶postProcessBeforeInitializationæ¹æ³è°ç¨äºinvokeAwareInterfacesæ¹æ³\nprivate void invokeAwareInterfaces(Object bean) {\n    if (bean instanceof EnvironmentAware) {\n        ((EnvironmentAware) bean).setEnvironment(this.applicationContext.getEnvironment());\n    }\n    if (bean instanceof ApplicationContextAware) {\n        ((ApplicationContextAware) bean).setApplicationContext(this.applicationContext);\n    }\n    // ......\n}\n\n\næåæ»ç»ä¸ä¸ï¼æ¬å°èåå®¹åä½ ä¸èµ·åé¡¾äº Spring å®¹å¨çé¨åæ ¸å¿åå®¹ï¼éäºç¯å¹ä¸è½åæ´å¤ï¼ä½çè§£è¿é¨ååå®¹ï¼è¶³ä»¥è®©æ¨è½»æ¾çè§£ Spring Boot çå¯å¨åçï¼å¦æå¨åç»­çå­¦ä¹ è¿ç¨ä¸­éå°ä¸äºæ¦æ¶©é¾æçç¥è¯ï¼ååè¿å¤´æ¥çç Spring çæ ¸å¿ç¥è¯ï¼ä¹è®¸æææ³ä¸å°çææãä¹è®¸ Spring Boot çä¸­æèµæå¾å°ï¼ä½ Spring çä¸­æèµæåä¹¦ç±æå¤ªå¤å¤ªå¤ï¼æ»æä¸è¥¿è½ç»ä½ å¯åã\n\n\n# äºãå¤¯å®åºç¡ï¼JavaConfig ä¸å¸¸è§ Annotation\n\n\n# 2.1ãJavaConfig\n\næä»¬ç¥ébeanæ¯ Spring IOC ä¸­éå¸¸æ ¸å¿çæ¦å¿µï¼Spring å®¹å¨è´è´£ bean ççå½å¨æçç®¡çãå¨æåï¼Spring ä½¿ç¨ XML éç½®æä»¶çæ¹å¼æ¥æè¿° bean çå®ä¹ä»¥åç¸äºé´çä¾èµå³ç³»ï¼ä½éç Spring çåå±ï¼è¶æ¥è¶å¤çäººå¯¹è¿ç§æ¹å¼è¡¨ç¤ºä¸æ»¡ï¼å ä¸º Spring é¡¹ç®çææä¸å¡ç±»åä»¥ bean çå½¢å¼éç½®å¨ XML æä»¶ä¸­ï¼é æäºå¤§éç XML æä»¶ï¼ä½¿é¡¹ç®åå¾å¤æä¸é¾ä»¥ç®¡çã\n\nåæ¥ï¼åºäºçº¯ Java Annotation ä¾èµæ³¨å¥æ¡æ¶Guiceåºä¸ï¼å¶æ§è½ææ¾ä¼äºéç¨ XML æ¹å¼ç Springï¼çè³æé¨åäººè®¤ä¸ºï¼Guiceå¯ä»¥å®å¨åä»£ Springï¼Guiceä»æ¯ä¸ä¸ªè½»éçº§ IOC æ¡æ¶ï¼åä»£ Spring è¿å·®çæºè¿ï¼ãæ­£æ¯è¿æ ·çå±æºæï¼ä¿ä½¿ Spring åç¤¾åºæ¨åºå¹¶æç»­å®åäºJavaConfigå­é¡¹ç®ï¼å®åºäº Java ä»£ç å Annotation æ³¨è§£æ¥æè¿° bean ä¹é´çä¾èµç»å®å³ç³»ãæ¯å¦ï¼ä¸é¢æ¯ä½¿ç¨ XML éç½®æ¹å¼æ¥æè¿° bean çå®ä¹ï¼\n\n<bean id="bookService" class="cn.moondev.service.BookServiceImpl"></bean>\n\n\nèåºäº JavaConfig çéç½®å½¢å¼æ¯è¿æ ·çï¼\n\n@Configuration\npublic class MoonBookConfiguration {\n\n    // ä»»ä½æ å¿äº@Beançæ¹æ³ï¼å¶è¿åå¼å°ä½ä¸ºä¸ä¸ªbeanæ³¨åå°SpringçIOCå®¹å¨ä¸­\n    // æ¹æ³åé»è®¤æä¸ºè¯¥beanå®ä¹çid\n    @Bean\n    public BookService bookService() {\n        return new BookServiceImpl();\n    }\n}\n\n\nå¦æä¸¤ä¸ª bean ä¹é´æä¾èµå³ç³»çè¯ï¼å¨ XML éç½®ä¸­åºè¯¥æ¯è¿æ ·ï¼\n\n<bean id="bookService" class="cn.moondev.service.BookServiceImpl">\n    <property name="dependencyService" ref="dependencyService"/>\n</bean>\n\n<bean id="otherService" class="cn.moondev.service.OtherServiceImpl">\n    <property name="dependencyService" ref="dependencyService"/>\n</bean>\n\n<bean id="dependencyService" class="DependencyServiceImpl"/>\n\n\nèå¨ JavaConfig ä¸­åæ¯è¿æ ·ï¼\n\n@Configuration\npublic class MoonBookConfiguration {\n\n    // å¦æä¸ä¸ªbeanä¾èµå¦ä¸ä¸ªbeanï¼åç´æ¥è°ç¨å¯¹åºJavaConfigç±»ä¸­ä¾èµbeançåå»ºæ¹æ³å³å¯\n    // è¿éç´æ¥è°ç¨dependencyService()\n    @Bean\n    public BookService bookService() {\n        return new BookServiceImpl(dependencyService());\n    }\n\n    @Bean\n    public OtherService otherService() {\n        return new OtherServiceImpl(dependencyService());\n    }\n\n    @Bean\n    public DependencyService dependencyService() {\n        return new DependencyServiceImpl();\n    }\n}\n\n\nä½ å¯è½æ³¨æå°è¿ä¸ªç¤ºä¾ä¸­ï¼æä¸¤ä¸ª bean é½ä¾èµäº dependencyServiceï¼ä¹å°±æ¯è¯´å½åå§å bookService æ¶ä¼è°ç¨dependencyService()ï¼å¨åå§å otherService æ¶ä¹ä¼è°ç¨dependencyService()ï¼é£ä¹é®é¢æ¥äºï¼è¿æ¶å IOC å®¹å¨ä¸­æ¯æä¸ä¸ª dependencyService å®ä¾è¿æ¯ä¸¤ä¸ªï¼è¿ä¸ªé®é¢ççå¤§å®¶æèå§ï¼è¿éä¸åèµè¿°ã\n\n\n# 2.2ã@ComponentScan\n\n@ComponentScanæ³¨è§£å¯¹åº XML éç½®å½¢å¼ä¸­ç``åç´ ï¼è¡¨ç¤ºå¯ç¨ç»ä»¶æ«æï¼Spring ä¼èªå¨æ«æææéè¿æ³¨è§£éç½®ç beanï¼ç¶åå°å¶æ³¨åå° IOC å®¹å¨ä¸­ãæä»¬å¯ä»¥éè¿basePackagesç­å±æ§æ¥æå®@ComponentScanèªå¨æ«æçèå´ï¼å¦æä¸æå®ï¼é»è®¤ä»å£°æ@ComponentScanæå¨ç±»çpackageè¿è¡æ«æãæ­£å ä¸ºå¦æ­¤ï¼SpringBoot çå¯å¨ç±»é½é»è®¤å¨src/main/javaä¸ã\n\n\n# 2.3ã@Import\n\n@Importæ³¨è§£ç¨äºå¯¼å¥éç½®ç±»ï¼ä¸¾ä¸ªç®åçä¾å­ï¼\n\n@Configuration\npublic class MoonBookConfiguration {\n    @Bean\n    public BookService bookService() {\n        return new BookServiceImpl();\n    }\n}\n\n\nç°å¨æå¦å¤ä¸ä¸ªéç½®ç±»ï¼æ¯å¦ï¼MoonUserConfigurationï¼è¿ä¸ªéç½®ç±»ä¸­æä¸ä¸ª bean ä¾èµäºMoonBookConfigurationä¸­ç bookServiceï¼å¦ä½å°è¿ä¸¤ä¸ª bean ç»åå¨ä¸èµ·ï¼åå©@Importå³å¯ï¼\n\n@Configuration\n// å¯ä»¥åæ¶å¯¼å¥å¤ä¸ªéç½®ç±»ï¼æ¯å¦ï¼@Import({A.class,B.class})\n@Import(MoonBookConfiguration.class)\npublic class MoonUserConfiguration {\n    @Bean\n    public UserService userService(BookService bookService) {\n        return new BookServiceImpl(bookService);\n    }\n}\n\n\néè¦æ³¨æçæ¯ï¼å¨ 4.2 ä¹åï¼@Importæ³¨è§£åªæ¯æå¯¼å¥éç½®ç±»ï¼ä½æ¯å¨ 4.2 ä¹åï¼å®æ¯æå¯¼å¥æ®éç±»ï¼å¹¶å°è¿ä¸ªç±»ä½ä¸ºä¸ä¸ª bean çå®ä¹æ³¨åå° IOC å®¹å¨ä¸­ã\n\n\n# 2.4ã@Conditional\n\n@Conditionalæ³¨è§£è¡¨ç¤ºå¨æ»¡è¶³æç§æ¡ä»¶åæåå§åä¸ä¸ª bean æèå¯ç¨æäºéç½®ãå®ä¸è¬ç¨å¨ç±@Componentã@Serviceã@Configurationç­æ³¨è§£æ è¯çç±»ä¸é¢ï¼æèç±@Beanæ è®°çæ¹æ³ä¸ãå¦æä¸ä¸ª@Configurationç±»æ è®°äº@Conditionalï¼åè¯¥ç±»ä¸­æææ è¯äº@Beançæ¹æ³å@Importæ³¨è§£å¯¼å¥çç¸å³ç±»å°éµä»è¿äºæ¡ä»¶ã\n\nå¨ Spring éå¯ä»¥å¾æ¹ä¾¿çç¼åä½ èªå·±çæ¡ä»¶ç±»ï¼æè¦åçå°±æ¯å®ç°Conditionæ¥å£ï¼å¹¶è¦çå®çmatches()æ¹æ³ãä¸¾ä¸ªä¾å­ï¼ä¸é¢çç®åæ¡ä»¶ç±»è¡¨ç¤ºåªæå¨Classpathéå­å¨JdbcTemplateç±»æ¶æçæï¼\n\npublic class JdbcTemplateCondition implements Condition {\n\n    @Override\n    public boolean matches(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata) {\n        try {\n        conditionContext.getClassLoader().loadClass("org.springframework.jdbc.core.JdbcTemplate");\n            return true;\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n}\n\n\nå½ä½ ç¨ Java æ¥å£°æ bean çæ¶åï¼å¯ä»¥ä½¿ç¨è¿ä¸ªèªå®ä¹æ¡ä»¶ç±»ï¼\n\n@Conditional(JdbcTemplateCondition.class)\n@Service\npublic MyService service() {\n    ......\n}\n\n\nè¿ä¸ªä¾å­ä¸­åªæå½JdbcTemplateConditionç±»çæ¡ä»¶æç«æ¶æä¼åå»º MyService è¿ä¸ª beanãä¹å°±æ¯è¯´ MyService è¿ bean çåå»ºæ¡ä»¶æ¯classpathéé¢åå«JdbcTemplateï¼å¦åè¿ä¸ª bean çå£°æå°±ä¼è¢«å¿½ç¥æã\n\nSpring Bootå®ä¹äºå¾å¤æè¶£çæ¡ä»¶ï¼å¹¶æä»ä»¬è¿ç¨å°äºéç½®ç±»ä¸ï¼è¿äºéç½®ç±»ææäºSpring Bootçèªå¨éç½®çåºç¡ãSpring Bootè¿ç¨æ¡ä»¶åéç½®çæ¹æ³æ¯ï¼å®ä¹å¤ä¸ªç¹æ®çæ¡ä»¶åæ³¨è§£ï¼å¹¶å°å®ä»¬ç¨å°éç½®ç±»ä¸ãä¸é¢ååºäºSpring Bootæä¾çé¨åæ¡ä»¶åæ³¨è§£ï¼\n\næ¡ä»¶åæ³¨è§£                             éç½®çææ¡ä»¶\n@ConditionalOnBean                éç½®äºæä¸ªç¹å® bean\n@ConditionalOnMissingBean         æ²¡æéç½®ç¹å®ç bean\n@ConditionalOnClass               Classpath éææå®çç±»\n@ConditionalOnMissingClass        Classpath éæ²¡ææå®çç±»\n@ConditionalOnExpression          ç»å®ç Spring Expression Language è¡¨è¾¾å¼è®¡ç®ç»æä¸º true\n@ConditionalOnJava                Java ççæ¬å¹éç¹å®ææèä¸ä¸ªèå´å¼\n@ConditionalOnProperty            æå®çéç½®å±æ§è¦æä¸ä¸ªæç¡®çå¼\n@ConditionalOnResource            Classpath éææå®çèµæº\n@ConditionalOnWebApplication      è¿æ¯ä¸ä¸ª Web åºç¨ç¨åº\n@ConditionalOnNotWebApplication   è¿ä¸æ¯ä¸ä¸ª Web åºç¨ç¨åº\n\n\n# 2.5ã@ConfigurationProperties ä¸@EnableConfigurationProperties\n\nå½æäºå±æ§çå¼éè¦éç½®çæ¶åï¼æä»¬ä¸è¬ä¼å¨application.propertiesæä»¶ä¸­æ°å»ºéç½®é¡¹ï¼ç¶åå¨ bean ä¸­ä½¿ç¨@Valueæ³¨è§£æ¥è·åéç½®çå¼ï¼æ¯å¦ä¸é¢éç½®æ°æ®æºçä»£ç ã\n\n// jdbc config\njdbc.mysql.url=jdbc:mysql://localhost:3306/sampledb\njdbc.mysql.username=root\njdbc.mysql.password=123456\n......\n\n// éç½®æ°æ®æº\n@Configuration\npublic class HikariDataSourceConfiguration {\n\n    @Value("jdbc.mysql.url")\n    public String url;\n    @Value("jdbc.mysql.username")\n    public String user;\n    @Value("jdbc.mysql.password")\n    public String password;\n\n    @Bean\n    public HikariDataSource dataSource() {\n        HikariConfig hikariConfig = new HikariConfig();\n        hikariConfig.setJdbcUrl(url);\n        hikariConfig.setUsername(user);\n        hikariConfig.setPassword(password);\n        // çç¥é¨åä»£ç \n        return new HikariDataSource(hikariConfig);\n    }\n}\n\n\nä½¿ç¨@Valueæ³¨è§£æ³¨å¥çå±æ§éå¸¸é½æ¯è¾ç®åï¼å¦æåä¸ä¸ªéç½®å¨å¤ä¸ªå°æ¹ä½¿ç¨ï¼ä¹å­å¨ä¸æ¹ä¾¿ç»´æ¤çé®é¢ï¼èèä¸ï¼å¦ææå åä¸ªå°æ¹å¨ä½¿ç¨æä¸ªéç½®ï¼èç°å¨ä½ æ³æ¹ä¸åå­ï¼ä½ æ¹æä¹åï¼ï¼ãå¯¹äºæ´ä¸ºå¤æçéç½®ï¼Spring Boot æä¾äºæ´ä¼éçå®ç°æ¹å¼ï¼é£å°±æ¯@ConfigurationPropertiesæ³¨è§£ãæä»¬å¯ä»¥éè¿ä¸é¢çæ¹å¼æ¥æ¹åä¸é¢çä»£ç ï¼\n\n@Component\n//  è¿å¯ä»¥éè¿@PropertySource("classpath:jdbc.properties")æ¥æå®éç½®æä»¶\n@ConfigurationProperties("jdbc.mysql")\n// åç¼=jdbc.mysqlï¼ä¼å¨éç½®æä»¶ä¸­å¯»æ¾jdbc.mysql.*çéç½®é¡¹\npulic class JdbcConfig {\n    public String url;\n    public String username;\n    public String password;\n}\n\n@Configuration\npublic class HikariDataSourceConfiguration {\n\n    @AutoWired\n    public JdbcConfig config;\n\n    @Bean\n    public HikariDataSource dataSource() {\n        HikariConfig hikariConfig = new HikariConfig();\n        hikariConfig.setJdbcUrl(config.url);\n        hikariConfig.setUsername(config.username);\n        hikariConfig.setPassword(config.password);\n        // çç¥é¨åä»£ç \n        return new HikariDataSource(hikariConfig);\n    }\n}\n\n\n@ConfigurationPropertieså¯¹äºæ´ä¸ºå¤æçéç½®ï¼å¤çèµ·æ¥ä¹æ¯å¾å¿åºæï¼æ¯å¦æå¦ä¸éç½®æä»¶ï¼\n\n#App\napp.menus[0].title=Home\napp.menus[0].name=Home\napp.menus[0].path=/\napp.menus[1].title=Login\napp.menus[1].name=Login\napp.menus[1].path=/login\n\napp.compiler.timeout=5\napp.compiler.output-folder=/temp/\n\napp.error=/error/\n\n\nå¯ä»¥å®ä¹å¦ä¸éç½®ç±»æ¥æ¥æ¶è¿äºå±æ§\n\n@Component\n@ConfigurationProperties("app")\npublic class AppProperties {\n\n    public String error;\n    public List<Menu> menus = new ArrayList<>();\n    public Compiler compiler = new Compiler();\n\n    public static class Menu {\n        public String name;\n        public String path;\n        public String title;\n    }\n\n    public static class Compiler {\n        public String timeout;\n        public String outputFolder;\n    }\n}\n\n\n@EnableConfigurationPropertiesæ³¨è§£è¡¨ç¤ºå¯¹@ConfigurationPropertiesçååµæ¯æï¼é»è®¤ä¼å°å¯¹åº Properties Class ä½ä¸º bean æ³¨å¥ç IOC å®¹å¨ä¸­ï¼å³å¨ç¸åºç Properties ç±»ä¸ä¸ç¨å @Componentæ³¨è§£ã\n\n\n# ä¸ãåéå¦æ³¥ï¼SpringFactoriesLoader è¯¦è§£\n\nJVM æä¾äº 3 ç§ç±»å è½½å¨ï¼BootstrapClassLoaderãExtClassLoaderãAppClassLoaderåå«å è½½ Java æ ¸å¿ç±»åºãæ©å±ç±»åºä»¥ååºç¨çç±»è·¯å¾(CLASSPATH)ä¸çç±»åºãJVM éè¿åäº²å§æ´¾æ¨¡åè¿è¡ç±»çå è½½ï¼æä»¬ä¹å¯ä»¥éè¿ç»§æ¿java.lang.classloaderå®ç°èªå·±çç±»å è½½å¨ã\n\nä½ä¸ºåäº²å§æ´¾æ¨¡åï¼å½ä¸ä¸ªç±»å è½½å¨æ¶å°ç±»å è½½ä»»å¡æ¶ï¼ä¼åäº¤ç»èªå·±çç¶å è½½å¨å»å®æï¼å æ­¤æç»å è½½ä»»å¡é½ä¼ä¼ éå°æé¡¶å±ç BootstrapClassLoaderï¼åªæå½ç¶å è½½å¨æ æ³å®æå è½½ä»»å¡æ¶ï¼æä¼å°è¯èªå·±æ¥å è½½ã\n\néç¨åäº²å§æ´¾æ¨¡åçä¸ä¸ªå¥½å¤æ¯ä¿è¯ä½¿ç¨ä¸åç±»å è½½å¨æç»å¾å°çé½æ¯åä¸ä¸ªå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥ä¿è¯ Java æ ¸å¿åºçç±»åå®å¨ï¼æ¯å¦ï¼å è½½ä½äº rt.jar åä¸­çjava.lang.Objectç±»ï¼ä¸ç®¡æ¯åªä¸ªå è½½å¨å è½½è¿ä¸ªç±»ï¼æç»é½æ¯å§æç»é¡¶å±ç BootstrapClassLoader æ¥å è½½çï¼è¿æ ·å°±å¯ä»¥ä¿è¯ä»»ä½çç±»å è½½å¨æç»å¾å°çé½æ¯åæ ·ä¸ä¸ª Object å¯¹è±¡ãæ¥ç ClassLoader çæºç ï¼å¯¹åäº²å§æ´¾æ¨¡åä¼ææ´ç´è§çè®¤è¯ï¼\n\nprotected Class<?> loadClass(String name, boolean resolve) {\n    synchronized (getClassLoadingLock(name)) {\n    // é¦åï¼æ£æ¥è¯¥ç±»æ¯å¦å·²ç»è¢«å è½½ï¼å¦æä»JVMç¼å­ä¸­æ¾å°è¯¥ç±»ï¼åç´æ¥è¿å\n    Class<?> c = findLoadedClass(name);\n    if (c == null) {\n        try {\n            // éµå¾ªåäº²å§æ´¾çæ¨¡åï¼é¦åä¼éè¿éå½ä»ç¶å è½½å¨å¼å§æ¾ï¼\n            // ç´å°ç¶ç±»å è½½å¨æ¯BootstrapClassLoaderä¸ºæ­¢\n            if (parent != null) {\n                c = parent.loadClass(name, false);\n            } else {\n                c = findBootstrapClassOrNull(name);\n            }\n        } catch (ClassNotFoundException e) {}\n        if (c == null) {\n            // å¦æè¿æ¾ä¸å°ï¼å°è¯éè¿findClassæ¹æ³å»å¯»æ¾\n            // findClassæ¯çç»å¼åèèªå·±å®ç°çï¼ä¹å°±æ¯è¯´\n            // èªå®ä¹ç±»å è½½å¨æ¶ï¼éåæ­¤æ¹æ³å³å¯\n           c = findClass(name);\n        }\n    }\n    if (resolve) {\n        resolveClass(c);\n    }\n    return c;\n    }\n}\n\n\nä½åäº²å§æ´¾æ¨¡åå¹¶ä¸è½è§£å³ææçç±»å è½½å¨é®é¢ï¼æ¯å¦ï¼Java æä¾äºå¾å¤æå¡æä¾èæ¥å£(Service Provider Interfaceï¼SPI)ï¼åè®¸ç¬¬ä¸æ¹ä¸ºè¿äºæ¥å£æä¾å®ç°ãå¸¸è§ç SPI æ JDBCãJNDIãJAXP ç­ï¼è¿äº SPI çæ¥å£ç±æ ¸å¿ç±»åºæä¾ï¼å´ç±ç¬¬ä¸æ¹å®ç°ï¼è¿æ ·å°±å­å¨ä¸ä¸ªé®é¢ï¼SPI çæ¥å£æ¯ Java æ ¸å¿åºçä¸é¨åï¼æ¯ç± BootstrapClassLoader å è½½çï¼SPI å®ç°ç Java ç±»ä¸è¬æ¯ç± AppClassLoader æ¥å è½½çãBootstrapClassLoader æ¯æ æ³æ¾å° SPI çå®ç°ç±»çï¼å ä¸ºå®åªå è½½ Java çæ ¸å¿åºãå®ä¹ä¸è½ä»£çç» AppClassLoaderï¼å ä¸ºå®æ¯æé¡¶å±çç±»å è½½å¨ãä¹å°±æ¯è¯´ï¼åäº²å§æ´¾æ¨¡åå¹¶ä¸è½è§£å³è¿ä¸ªé®é¢ã\n\nçº¿ç¨ä¸ä¸æç±»å è½½å¨(ContextClassLoader)æ­£å¥½è§£å³äºè¿ä¸ªé®é¢ãä»åç§°ä¸çï¼å¯è½ä¼è¯¯è§£ä¸ºå®æ¯ä¸ç§æ°çç±»å è½½å¨ï¼å®éä¸ï¼å®ä»ä»æ¯ Thread ç±»çä¸ä¸ªåéèå·²ï¼å¯ä»¥éè¿setContextClassLoader(ClassLoader cl)ågetContextClassLoader()æ¥è®¾ç½®åè·åè¯¥å¯¹è±¡ãå¦æä¸åä»»ä½çè®¾ç½®ï¼Java åºç¨ççº¿ç¨çä¸ä¸æç±»å è½½å¨é»è®¤å°±æ¯ AppClassLoaderãå¨æ ¸å¿ç±»åºä½¿ç¨ SPI æ¥å£æ¶ï¼ä¼ éçç±»å è½½å¨ä½¿ç¨çº¿ç¨ä¸ä¸æç±»å è½½å¨ï¼å°±å¯ä»¥æåçå è½½å° SPI å®ç°çç±»ãçº¿ç¨ä¸ä¸æç±»å è½½å¨å¨å¾å¤ SPI çå®ç°ä¸­é½ä¼ç¨å°ãä½å¨ JDBC ä¸­ï¼ä½ å¯è½ä¼çå°ä¸ç§æ´ç´æ¥çå®ç°æ¹å¼ï¼æ¯å¦ï¼JDBC é©±å¨ç®¡çjava.sql.Driverä¸­çloadInitialDrivers()æ¹æ³ä¸­ï¼ä½ å¯ä»¥ç´æ¥çå° JDK æ¯å¦ä½å è½½é©±å¨çï¼\n\nfor (String aDriver : driversList) {\n    try {\n        // ç´æ¥ä½¿ç¨AppClassLoader\n        Class.forName(aDriver, true, ClassLoader.getSystemClassLoader());\n    } catch (Exception ex) {\n        println("DriverManager.Initialize: load failed: " + ex);\n    }\n}\n\n\nå¶å®è®²è§£çº¿ç¨ä¸ä¸æç±»å è½½å¨ï¼æä¸»è¦æ¯è®©å¤§å®¶å¨çå°Thread.currentThread().getClassLoader()åThread.currentThread().getContextClassLoader()æ¶ä¸ä¼ä¸è¸æµé¼ï¼è¿ä¸¤èé¤äºå¨è®¸å¤åºå±æ¡æ¶ä¸­åå¾ç ClassLoader å¯è½ä¼ææä¸åå¤ï¼å¶ä»å¤§å¤æ°ä¸å¡åºæ¯ä¸é½æ¯ä¸æ ·çï¼å¤§å®¶åªè¦ç¥éå®æ¯ä¸ºäºè§£å³ä»ä¹é®é¢èå­å¨çå³å¯ã\n\nç±»å è½½å¨é¤äºå è½½ class å¤ï¼è¿æä¸ä¸ªéå¸¸éè¦åè½ï¼å°±æ¯å è½½èµæºï¼å®å¯ä»¥ä» jar åä¸­è¯»åä»»ä½èµæºæä»¶ï¼æ¯å¦ï¼ClassLoader.getResources(String name)æ¹æ³å°±æ¯ç¨äºè¯»å jar åä¸­çèµæºæä»¶ï¼å¶ä»£ç å¦ä¸ï¼\n\npublic Enumeration<URL> getResources(String name) throws IOException {\n    Enumeration<URL>[] tmp = (Enumeration<URL>[]) new Enumeration<?>[2];\n    if (parent != null) {\n        tmp[0] = parent.getResources(name);\n    } else {\n        tmp[0] = getBootstrapResources(name);\n    }\n    tmp[1] = findResources(name);\n    return new CompoundEnumeration<>(tmp);\n}\n\n\næ¯ä¸æ¯è§å¾æç¹ç¼çï¼ä¸éï¼å®çé»è¾å¶å®è·ç±»å è½½çé»è¾æ¯ä¸æ ·çï¼é¦åå¤æ­ç¶ç±»å è½½å¨æ¯å¦ä¸ºç©ºï¼ä¸ä¸ºç©ºåå§æç¶ç±»å è½½å¨æ§è¡èµæºæ¥æ¾ä»»å¡ï¼ç´å° BootstrapClassLoaderï¼æåæè½®å°èªå·±æ¥æ¾ãèä¸åçç±»å è½½å¨è´è´£æ«æä¸åè·¯å¾ä¸ç jar åï¼å°±å¦åå è½½ class ä¸æ ·ï¼æåä¼æ«æææç jar åï¼æ¾å°ç¬¦åæ¡ä»¶çèµæºæä»¶ã\n\nç±»å è½½å¨çfindResources(name)æ¹æ³ä¼éåå¶è´è´£å è½½çææ jar åï¼æ¾å° jar åä¸­åç§°ä¸º name çèµæºæä»¶ï¼è¿éçèµæºå¯ä»¥æ¯ä»»ä½æä»¶ï¼çè³æ¯.class æä»¶ï¼æ¯å¦ä¸é¢çç¤ºä¾ï¼ç¨äºæ¥æ¾ Array.class æä»¶ï¼\n\n// å¯»æ¾Array.classæä»¶\npublic static void main(String[] args) throws Exception{\n    // Array.classçå®æ´è·¯å¾\n    String name = "java/sql/Array.class";\n    Enumeration<URL> urls = Thread.currentThread().getContextClassLoader().getResources(name);\n    while (urls.hasMoreElements()) {\n        URL url = urls.nextElement();\n        System.out.println(url.toString());\n    }\n}\n\n\nè¿è¡åå¯ä»¥å¾å°å¦ä¸ç»æï¼\n\n$JAVA_HOME/jre/lib/rt.jar!/java/sql/Array.class\n\n\næ ¹æ®èµæºæä»¶ç URLï¼å¯ä»¥æé ç¸åºçæä»¶æ¥è¯»åèµæºåå®¹ã\n\nçå°è¿éï¼ä½ å¯è½ä¼æå°æºå¥æªçï¼ä½ ä¸æ¯è¦è¯¦è§£SpringFactoriesLoaderåï¼ä¸æ¥è®²äºä¸å  ClassLoader æ¯å ä¸ªææï¼çä¸å®çæºç ä½ å°±ç¥éäºï¼\n\npublic static final String FACTORIES_RESOURCE_LOCATION = "META-INF/spring.factories";\n// spring.factoriesæä»¶çæ ¼å¼ä¸ºï¼key=value1,value2,value3\n// ä»ææçjaråä¸­æ¾å°META-INF/spring.factoriesæä»¶\n// ç¶åä»æä»¶ä¸­è§£æåºkey=factoryClassç±»åç§°çæævalueå¼\npublic static List<String> loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader) {\n    String factoryClassName = factoryClass.getName();\n    // åå¾èµæºæä»¶çURL\n    Enumeration<URL> urls = (classLoader != null ? classLoader.getResources(FACTORIES_RESOURCE_LOCATION) : ClassLoader.getSystemResources(FACTORIES_RESOURCE_LOCATION));\n    List<String> result = new ArrayList<String>();\n    // éåææçURL\n    while (urls.hasMoreElements()) {\n        URL url = urls.nextElement();\n        // æ ¹æ®èµæºæä»¶URLè§£æpropertiesæä»¶\n        Properties properties = PropertiesLoaderUtils.loadProperties(new UrlResource(url));\n        String factoryClassNames = properties.getProperty(factoryClassName);\n        // ç»è£æ°æ®ï¼å¹¶è¿å\n        result.addAll(Arrays.asList(StringUtils.commaDelimitedListToStringArray(factoryClassNames)));\n    }\n    return result;\n}\n\n\næäºåé¢å³äº ClassLoader çç¥è¯ï¼åæ¥çè§£è¿æ®µä»£ç ï¼æ¯ä¸æ¯æè§è±ç¶å¼æï¼ä»CLASSPATHä¸çæ¯ä¸ª Jar åä¸­æå¯»ææMETA-INF/spring.factorieséç½®æä»¶ï¼ç¶åå°è§£æ properties æä»¶ï¼æ¾å°æå®åç§°çéç½®åè¿åãéè¦æ³¨æçæ¯ï¼å¶å®è¿éä¸ä»ä»æ¯ä¼å» ClassPath è·¯å¾ä¸æ¥æ¾ï¼ä¼æ«æææè·¯å¾ä¸ç Jar åï¼åªä¸è¿è¿ä¸ªæä»¶åªä¼å¨ Classpath ä¸ç jar åä¸­ãæ¥ç®åçä¸spring.factoriesæä»¶çåå®¹å§ï¼\n\n// æ¥èª org.springframework.boot.autoconfigureä¸çMETA-INF/spring.factories\n// EnableAutoConfigurationåæä¼è®²å°ï¼å®ç¨äºå¼å¯Spring Bootèªå¨éç½®åè½\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\norg.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\\\norg.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\\norg.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration\\\n\n\næ§è¡loadFactoryNames(EnableAutoConfiguration.class, classLoader)åï¼å¾å°å¯¹åºçä¸ç»@Configurationç±»ï¼ æä»¬å°±å¯ä»¥éè¿åå°å®ä¾åè¿äºç±»ç¶åæ³¨å¥å° IOC å®¹å¨ä¸­ï¼æåå®¹å¨éå°±æäºä¸ç³»åæ æ³¨äº@Configurationç JavaConfig å½¢å¼çéç½®ç±»ã\n\nè¿å°±æ¯SpringFactoriesLoaderï¼å®æ¬è´¨ä¸å±äº Spring æ¡æ¶ç§æçä¸ç§æ©å±æ¹æ¡ï¼ç±»ä¼¼äº SPIï¼Spring Boot å¨ Spring åºç¡ä¸çå¾å¤æ ¸å¿åè½é½æ¯åºäºæ­¤ï¼å¸æå¤§å®¶å¯ä»¥çè§£ã\n\n\n# åãå¦ä¸ä»¶æ­¦å¨ï¼Spring å®¹å¨çäºä»¶çå¬æºå¶\n\nè¿å»ï¼äºä»¶çå¬æºå¶å¤ç¨äºå¾å½¢çé¢ç¼ç¨ï¼æ¯å¦ï¼ç¹å»æé®ãå¨ææ¬æ¡è¾å¥åå®¹ç­æä½è¢«ç§°ä¸ºäºä»¶ï¼èå½äºä»¶è§¦åæ¶ï¼åºç¨ç¨åºä½åºä¸å®çååºåè¡¨ç¤ºåºç¨çå¬äºè¿ä¸ªäºä»¶ï¼èå¨æå¡å¨ç«¯ï¼äºä»¶ççå¬æºå¶æ´å¤çç¨äºå¼æ­¥éç¥ä»¥åçæ§åå¼å¸¸å¤çãJava æä¾äºå®ç°äºä»¶çå¬æºå¶çä¸¤ä¸ªåºç¡ç±»ï¼èªå®ä¹äºä»¶ç±»åæ©å±èªjava.util.EventObjectãäºä»¶ççå¬å¨æ©å±èªjava.util.EventListenerãæ¥çä¸ä¸ªç®åçå®ä¾ï¼ç®åççæ§ä¸ä¸ªæ¹æ³çèæ¶ã\n\né¦åå®ä¹äºä»¶ç±»åï¼éå¸¸çåæ³æ¯æ©å± EventObjectï¼éçäºä»¶çåçï¼ç¸åºçç¶æéå¸¸é½å°è£å¨æ­¤ç±»ä¸­ï¼\n\npublic class MethodMonitorEvent extends EventObject {\n    // æ¶é´æ³ï¼ç¨äºè®°å½æ¹æ³å¼å§æ§è¡çæ¶é´\n    public long timestamp;\n\n    public MethodMonitorEvent(Object source) {\n        super(source);\n    }\n}\n\n\näºä»¶åå¸ä¹åï¼ç¸åºççå¬å¨å³å¯å¯¹è¯¥ç±»åçäºä»¶è¿è¡å¤çï¼æä»¬å¯ä»¥å¨æ¹æ³å¼å§æ§è¡ä¹ååå¸ä¸ä¸ª begin äºä»¶ï¼å¨æ¹æ³æ§è¡ç»æä¹ååå¸ä¸ä¸ª end äºä»¶ï¼ç¸åºå°ï¼äºä»¶çå¬å¨éè¦æä¾æ¹æ³å¯¹è¿ä¸¤ç§æåµä¸æ¥æ¶å°çäºä»¶è¿è¡å¤çï¼\n\n// 1ãå®ä¹äºä»¶çå¬æ¥å£\npublic interface MethodMonitorEventListener extends EventListener {\n    // å¤çæ¹æ³æ§è¡ä¹ååå¸çäºä»¶\n    public void onMethodBegin(MethodMonitorEvent event);\n    // å¤çæ¹æ³ç»ææ¶åå¸çäºä»¶\n    public void onMethodEnd(MethodMonitorEvent event);\n}\n// 2ãäºä»¶çå¬æ¥å£çå®ç°ï¼å¦ä½å¤ç\npublic class AbstractMethodMonitorEventListener implements MethodMonitorEventListener {\n\n    @Override\n    public void onMethodBegin(MethodMonitorEvent event) {\n        // è®°å½æ¹æ³å¼å§æ§è¡æ¶çæ¶é´\n        event.timestamp = System.currentTimeMillis();\n    }\n\n    @Override\n    public void onMethodEnd(MethodMonitorEvent event) {\n        // è®¡ç®æ¹æ³èæ¶\n        long duration = System.currentTimeMillis() - event.timestamp;\n        System.out.println("èæ¶ï¼" + duration);\n    }\n}\n\n\näºä»¶çå¬å¨æ¥å£éå¯¹ä¸åçäºä»¶åå¸å®éæä¾ç¸åºçå¤çæ¹æ³å®ä¹ï¼æéè¦çæ¯ï¼å¶æ¹æ³åªæ¥æ¶ MethodMonitorEvent åæ°ï¼è¯´æè¿ä¸ªçå¬å¨ç±»åªè´è´£çå¬å¨å¯¹åºçäºä»¶å¹¶è¿è¡å¤çãæäºäºä»¶åçå¬å¨ï¼å©ä¸çå°±æ¯åå¸äºä»¶ï¼ç¶åè®©ç¸åºççå¬å¨çå¬å¹¶å¤çãéå¸¸æåµï¼æä»¬ä¼æä¸ä¸ªäºä»¶åå¸èï¼å®æ¬èº«ä½ä¸ºäºä»¶æºï¼å¨åéçæ¶æºï¼å°ç¸åºçäºä»¶åå¸ç»å¯¹åºçäºä»¶çå¬å¨ï¼\n\npublic class MethodMonitorEventPublisher {\n\n    private List<MethodMonitorEventListener> listeners = new ArrayList<MethodMonitorEventListener>();\n\n    public void methodMonitor() {\n        MethodMonitorEvent eventObject = new MethodMonitorEvent(this);\n        publishEvent("begin",eventObject);\n        // æ¨¡ææ¹æ³æ§è¡ï¼ä¼ç 5ç§é\n        TimeUnit.SECONDS.sleep(5);\n        publishEvent("end",eventObject);\n\n    }\n\n    private void publishEvent(String status,MethodMonitorEvent event) {\n        // é¿åå¨äºä»¶å¤çæé´ï¼çå¬å¨è¢«ç§»é¤ï¼è¿éä¸ºäºå®å¨åä¸ä¸ªå¤å¶æä½\n        List<MethodMonitorEventListener> copyListeners = â¥ new ArrayList<MethodMonitorEventListener>(listeners);\n        for (MethodMonitorEventListener listener : copyListeners) {\n            if ("begin".equals(status)) {\n                listener.onMethodBegin(event);\n            } else {\n                listener.onMethodEnd(event);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        MethodMonitorEventPublisher publisher = new MethodMonitorEventPublisher();\n        publisher.addEventListener(new AbstractMethodMonitorEventListener());\n        publisher.methodMonitor();\n    }\n    // çç¥å®ç°\n    public void addEventListener(MethodMonitorEventListener listener) {}\n    public void removeEventListener(MethodMonitorEventListener listener) {}\n    public void removeAllListeners() {}\n\n\nå¯¹äºäºä»¶åå¸èï¼äºä»¶æºï¼éå¸¸éè¦å³æ³¨ä¸¤ç¹ï¼\n\n 1. å¨åéçæ¶æºåå¸äºä»¶ãæ­¤ä¾ä¸­ç methodMonitor()æ¹æ³æ¯äºä»¶åå¸çæºå¤´ï¼å¶å¨æ¹æ³æ§è¡ä¹ååç»æä¹åä¸¤ä¸ªæ¶é´ç¹åå¸ MethodMonitorEvent äºä»¶ï¼æ¯ä¸ªæ¶é´ç¹åå¸çäºä»¶é½ä¼ä¼ ç»ç¸åºççå¬å¨è¿è¡å¤çãå¨å·ä½å®ç°æ¶éè¦æ³¨æçæ¯ï¼äºä»¶åå¸æ¯é¡ºåºæ§è¡ï¼ä¸ºäºä¸å½±åå¤çæ§è½ï¼äºä»¶çå¬å¨çå¤çé»è¾åºå°½éç®åã\n 2. äºä»¶çå¬å¨çç®¡çãpublisher ç±»ä¸­æä¾äºäºä»¶çå¬å¨çæ³¨åä¸ç§»é¤æ¹æ³ï¼è¿æ ·å®¢æ·ç«¯å¯ä»¥æ ¹æ®å®éæåµå³å®æ¯å¦éè¦æ³¨åæ°ççå¬å¨æèç§»é¤æä¸ªçå¬å¨ãå¦æè¿éæ²¡ææä¾ remove æ¹æ³ï¼é£ä¹æ³¨åççå¬å¨ç¤ºä¾å°ä¸ç´è¢« MethodMonitorEventPublisher å¼ç¨ï¼å³ä½¿å·²ç»åºå¼ä¸ç¨äºï¼ä¹ä¾ç¶å¨åå¸èççå¬å¨åè¡¨ä¸­ï¼è¿ä¼å¯¼è´éæ§çåå­æ³æ¼ã\n\n# Spring å®¹å¨åçäºä»¶çå¬æºå¶\n\nSpring ç ApplicationContext å®¹å¨åé¨ä¸­çææäºä»¶ç±»ååç»§æ¿èªorg.springframework.context.ApplicationEventï¼å®¹å¨ä¸­çææçå¬å¨é½å®ç°org.springframework.context.ApplicationListeneræ¥å£ï¼å¹¶ä¸ä»¥ bean çå½¢å¼æ³¨åå¨å®¹å¨ä¸­ãä¸æ¦å¨å®¹å¨ååå¸ ApplicationEvent åå¶å­ç±»åçäºä»¶ï¼æ³¨åå°å®¹å¨ç ApplicationListener å°±ä¼å¯¹è¿äºäºä»¶è¿è¡å¤çã\n\nä½ åºè¯¥å·²ç»çå°æ¯æä¹åäºäºã\n\nApplicationEvent ç»§æ¿èª EventObjectï¼Spring æä¾äºä¸äºé»è®¤çå®ç°ï¼æ¯å¦ï¼ContextClosedEventè¡¨ç¤ºå®¹å¨å¨å³å°å³é­æ¶åå¸çäºä»¶ç±»åï¼ContextRefreshedEventè¡¨ç¤ºå®¹å¨å¨åå§åæèå·æ°çæ¶ååå¸çäºä»¶ç±»å......\n\nå®¹å¨åé¨ä½¿ç¨ ApplicationListener ä½ä¸ºäºä»¶çå¬å¨æ¥å£å®ä¹ï¼å®ç»§æ¿èª EventListenerãApplicationContext å®¹å¨å¨å¯å¨æ¶ï¼ä¼èªå¨è¯å«å¹¶å è½½ EventListener ç±»åç beanï¼ä¸æ¦å®¹å¨åæäºä»¶åå¸ï¼å°éç¥è¿äºæ³¨åå°å®¹å¨ç EventListenerã\n\nApplicationContext æ¥å£ç»§æ¿äº ApplicationEventPublisher æ¥å£ï¼è¯¥æ¥å£æä¾äºvoid publishEvent(ApplicationEvent event)æ¹æ³å®ä¹ï¼ä¸é¾çåºï¼ApplicationContext å®¹å¨æå½çå°±æ¯äºä»¶åå¸èçè§è²ãå¦ææå´è¶£å¯ä»¥æ¥çAbstractApplicationContext.publishEvent(ApplicationEvent event)æ¹æ³çæºç ï¼ApplicationContext å°äºä»¶çåå¸ä»¥åçå¬å¨çç®¡çå·¥ä½å§æç»ApplicationEventMulticasteræ¥å£çå®ç°ç±»ãå¨å®¹å¨å¯å¨æ¶ï¼ä¼æ£æ¥å®¹å¨åæ¯å¦å­å¨åä¸º applicationEventMulticaster ç ApplicationEventMulticaster å¯¹è±¡å®ä¾ãå¦ææå°±ä½¿ç¨å¶æä¾çå®ç°ï¼æ²¡æå°±é»è®¤åå§åä¸ä¸ª SimpleApplicationEventMulticaster ä½ä¸ºå®ç°ã\n\næåï¼å¦ææä»¬ä¸å¡éè¦å¨å®¹å¨åé¨åå¸äºä»¶ï¼åªéè¦ä¸ºå¶æ³¨å¥ ApplicationEventPublisher ä¾èµå³å¯ï¼å®ç° ApplicationEventPublisherAware æ¥å£æè ApplicationContextAware æ¥å£(Aware æ¥å£ç¸å³åå®¹è¯·åé¡¾ä¸æ)ã\n\n\n# äºãåºç¥å¥åï¼æ­ç§èªå¨éç½®åç\n\nå¸åç Spring Boot åºç¨çå¯å¨ç±»ä¸è¬åä½äºsrc/main/javaæ ¹è·¯å¾ä¸ï¼æ¯å¦MoonApplicationç±»ï¼\n\n@SpringBootApplication\npublic class MoonApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MoonApplication.class, args);\n    }\n}\n\n\nå¶ä¸­@SpringBootApplicationå¼å¯ç»ä»¶æ«æåèªå¨éç½®ï¼èSpringApplication.runåè´è´£å¯å¨å¼å¯¼åºç¨ç¨åºã@SpringBootApplicationæ¯ä¸ä¸ªå¤åAnnotationï¼å®å°ä¸ä¸ªæç¨çæ³¨è§£ç»åå¨ä¸èµ·ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@SpringBootConfiguration\n@EnableAutoConfiguration\n@ComponentScan(excludeFilters = {\n        @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),\n        @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })\npublic @interface SpringBootApplication {\n    // ......\n}\n\n\n@SpringBootConfigurationå°±æ¯@Configurationï¼å®æ¯ Spring æ¡æ¶çæ³¨è§£ï¼æ æè¯¥ç±»æ¯ä¸ä¸ªJavaConfigéç½®ç±»ãè@ComponentScanå¯ç¨ç»ä»¶æ«æï¼åæå·²ç»è¯¦ç»è®²è§£è¿ï¼è¿éçéå³æ³¨@EnableAutoConfigurationã\n\n@EnableAutoConfigurationæ³¨è§£è¡¨ç¤ºå¼å¯ Spring Boot èªå¨éç½®åè½ï¼Spring Boot ä¼æ ¹æ®åºç¨çä¾èµãèªå®ä¹ç beanãclasspath ä¸ææ²¡ææä¸ªç±» ç­ç­å ç´ æ¥çæµä½ éè¦ç beanï¼ç¶åæ³¨åå° IOC å®¹å¨ä¸­ãé£@EnableAutoConfigurationæ¯å¦ä½æ¨ç®åºä½ çéæ±ï¼é¦åçä¸å®çå®ä¹ï¼\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@AutoConfigurationPackage\n@Import(EnableAutoConfigurationImportSelector.class)\npublic @interface EnableAutoConfiguration {\n    // ......\n}\n\n\nä½ çå³æ³¨ç¹åºè¯¥å¨@Import(EnableAutoConfigurationImportSelector.class)ä¸äºï¼åæè¯´è¿ï¼@Importæ³¨è§£ç¨äºå¯¼å¥ç±»ï¼å¹¶å°è¿ä¸ªç±»ä½ä¸ºä¸ä¸ª bean çå®ä¹æ³¨åå°å®¹å¨ä¸­ï¼è¿éå®å°æEnableAutoConfigurationImportSelectorä½ä¸º bean æ³¨å¥å°å®¹å¨ä¸­ï¼èè¿ä¸ªç±»ä¼å°ææç¬¦åæ¡ä»¶ç@Configuration éç½®é½å è½½å°å®¹å¨ä¸­ï¼ççå®çä»£ç ï¼\n\npublic String[] selectImports(AnnotationMetadata annotationMetadata) {\n    // çç¥äºå¤§é¨åä»£ç ï¼ä¿çä¸å¥æ ¸å¿ä»£ç \n    // æ³¨æï¼SpringBootæè¿çæ¬ä¸­ï¼è¿å¥ä»£ç è¢«å°è£å¨ä¸ä¸ªåç¬çæ¹æ³ä¸­\n    // SpringFactoriesLoaderç¸å³ç¥è¯è¯·åèåæ\n    List<String> factories = new ArrayList<String>(new LinkedHashSet<String>(\n        SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class, this.beanClassLoader)));\n}\n\n\nè¿ä¸ªç±»ä¼æ«æææç jar åï¼å°ææç¬¦åæ¡ä»¶ç@Configuration éç½®ç±»æ³¨å¥çå®¹å¨ä¸­ï¼ä½ä¸ºç¬¦åæ¡ä»¶ï¼ççMETA-INF/spring.factoriesçæä»¶åå®¹ï¼\n\n// æ¥èª org.springframework.boot.autoconfigureä¸çMETA-INF/spring.factories\n// éç½®çkey = EnableAutoConfigurationï¼ä¸ä»£ç ä¸­ä¸è´\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\norg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\\norg.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration\\\n.....\n\n\nä»¥DataSourceAutoConfigurationä¸ºä¾ï¼çç Spring Boot æ¯å¦ä½èªå¨éç½®çï¼\n\n@Configuration\n@ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })\n@EnableConfigurationProperties(DataSourceProperties.class)\n@Import({ Registrar.class, DataSourcePoolMetadataProvidersConfiguration.class })\npublic class DataSourceAutoConfiguration {\n}\n\n\nåå«è¯´ä¸è¯´ï¼\n\n * @ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })ï¼å½ Classpath ä¸­å­å¨ DataSource æè EmbeddedDatabaseType ç±»æ¶æå¯ç¨è¿ä¸ªéç½®ï¼å¦åè¿ä¸ªéç½®å°è¢«å¿½ç¥ã\n * @EnableConfigurationProperties(DataSourceProperties.class)ï¼å° DataSource çé»è®¤éç½®ç±»æ³¨å¥å° IOC å®¹å¨ä¸­ï¼DataSourceproperties å®ä¹ä¸ºï¼\n\n// æä¾å¯¹datasourceéç½®ä¿¡æ¯çæ¯æï¼ææçéç½®åç¼ä¸ºï¼spring.datasource\n@ConfigurationProperties(prefix = "spring.datasource")\npublic class DataSourceProperties  {\n    private ClassLoader classLoader;\n    private Environment environment;\n    private String name = "testdb";\n    ......\n}\n\n\n * @Import({ Registrar.class, DataSourcePoolMetadataProvidersConfiguration.class })ï¼å¯¼å¥å¶ä»é¢å¤çéç½®ï¼å°±ä»¥DataSourcePoolMetadataProvidersConfigurationä¸ºä¾å§ã\n\n@Configuration\npublic class DataSourcePoolMetadataProvidersConfiguration {\n\n    @Configuration\n    @ConditionalOnClass(org.apache.tomcat.jdbc.pool.DataSource.class)\n    static class TomcatDataSourcePoolMetadataProviderConfiguration {\n        @Bean\n        public DataSourcePoolMetadataProvider tomcatPoolDataSourceMetadataProvider() {\n            .....\n        }\n    }\n  ......\n}\n\n\nDataSourcePoolMetadataProvidersConfiguration æ¯æ°æ®åºè¿æ¥æ± æä¾èçä¸ä¸ªéç½®ç±»ï¼å³ Classpath ä¸­å­å¨org.apache.tomcat.jdbc.pool.DataSource.classï¼åä½¿ç¨ tomcat-jdbc è¿æ¥æ± ï¼å¦æ Classpath ä¸­å­å¨HikariDataSource.classåä½¿ç¨ Hikari è¿æ¥æ± ã\n\nè¿éä»æè¿°äº DataSourceAutoConfiguration çå°å±±ä¸è§ï¼ä½è¶³ä»¥è¯´æ Spring Boot å¦ä½å©ç¨æ¡ä»¶è¯éç½®æ¥å®ç°èªå¨éç½®çãåé¡¾ä¸ä¸ï¼@EnableAutoConfigurationä¸­å¯¼å¥äº EnableAutoConfigurationImportSelector ç±»ï¼èè¿ä¸ªç±»çselectImports()éè¿ SpringFactoriesLoader å¾å°äºå¤§éçéç½®ç±»ï¼èæ¯ä¸ä¸ªéç½®ç±»åæ ¹æ®æ¡ä»¶åéç½®æ¥ååºå³ç­ï¼ä»¥å®ç°èªå¨éç½®ã\n\næ´ä¸ªæµç¨å¾æ¸æ°ï¼ä½æ¼äºä¸ä¸ªå¤§é®é¢ï¼EnableAutoConfigurationImportSelector.selectImports()æ¯ä½æ¶æ§è¡çï¼å¶å®è¿ä¸ªæ¹æ³ä¼å¨å®¹å¨å¯å¨è¿ç¨ä¸­æ§è¡ï¼AbstractApplicationContext.refresh()ï¼æ´å¤çç»èå¨ä¸ä¸å°èä¸­è¯´æã\n\n\n# å­ãå¯å¨å¼å¯¼ï¼Spring Boot åºç¨å¯å¨çç§å¯\n\n\n# 6.1 SpringApplication åå§å\n\nSpringBoot æ´ä¸ªå¯å¨æµç¨åä¸ºä¸¤ä¸ªæ­¥éª¤ï¼åå§åä¸ä¸ª SpringApplication å¯¹è±¡ãæ§è¡è¯¥å¯¹è±¡ç run æ¹æ³ãçä¸ SpringApplication çåå§åæµç¨ï¼SpringApplication çæé æ¹æ³ä¸­è°ç¨ initialize(Object[] sources)æ¹æ³ï¼å¶ä»£ç å¦ä¸ï¼\n\nprivate void initialize(Object[] sources) {\n     if (sources != null && sources.length > 0) {\n         this.sources.addAll(Arrays.asList(sources));\n     }\n     // å¤æ­æ¯å¦æ¯Webé¡¹ç®\n     this.webEnvironment = deduceWebEnvironment();\n     setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));\n     setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));\n     // æ¾å°å¥å£ç±»\n     this.mainApplicationClass = deduceMainApplicationClass();\n}\n\n\nåå§åæµç¨ä¸­æéè¦çå°±æ¯éè¿ SpringFactoriesLoader æ¾å°spring.factoriesæä»¶ä¸­éç½®çApplicationContextInitializeråApplicationListenerä¸¤ä¸ªæ¥å£çå®ç°ç±»åç§°ï¼ä»¥ä¾¿åææé ç¸åºçå®ä¾ãApplicationContextInitializerçä¸»è¦ç®çæ¯å¨ConfigurableApplicationContextå refresh ä¹åï¼å¯¹ ConfigurableApplicationContext å®ä¾åè¿ä¸æ­¥çè®¾ç½®æå¤çãConfigurableApplicationContext ç»§æ¿èª ApplicationContextï¼å¶ä¸»è¦æä¾äºå¯¹ ApplicationContext è¿è¡è®¾ç½®çè½åã\n\nå®ç°ä¸ä¸ª ApplicationContextInitializer éå¸¸ç®åï¼å ä¸ºå®åªæä¸ä¸ªæ¹æ³ï¼ä½å¤§å¤æ°æåµä¸æä»¬æ²¡æå¿è¦èªå®ä¹ä¸ä¸ª ApplicationContextInitializerï¼å³ä¾¿æ¯ Spring Boot æ¡æ¶ï¼å®é»è®¤ä¹åªæ¯æ³¨åäºä¸¤ä¸ªå®ç°ï¼æ¯ç« Spring çå®¹å¨å·²ç»éå¸¸æçåç¨³å®ï¼ä½ æ²¡æå¿è¦æ¥æ¹åå®ã\n\nèApplicationListenerçç®çå°±æ²¡ä»ä¹å¥½è¯´çäºï¼å®æ¯ Spring æ¡æ¶å¯¹ Java äºä»¶çå¬æºå¶çä¸ç§æ¡æ¶å®ç°ï¼å·ä½åå®¹å¨åæ Spring äºä»¶çå¬æºå¶è¿ä¸ªå°èæè¯¦ç»è®²è§£ãè¿éä¸»è¦è¯´è¯´ï¼å¦æä½ æ³ä¸º Spring Boot åºç¨æ·»å çå¬å¨ï¼è¯¥å¦ä½å®ç°ï¼\n\nSpring Boot æä¾ä¸¤ç§æ¹å¼æ¥æ·»å èªå®ä¹çå¬å¨ï¼\n\n * éè¿SpringApplication.addListeners(ApplicationListener... listeners)æèSpringApplication.setListeners(Collection> listeners)ä¸¤ä¸ªæ¹æ³æ¥æ·»å ä¸ä¸ªæèå¤ä¸ªèªå®ä¹çå¬å¨\n * æ¢ç¶ SpringApplication çåå§åæµç¨ä¸­å·²ç»ä»spring.factoriesä¸­è·åå°ApplicationListenerçå®ç°ç±»ï¼é£ä¹æä»¬ç´æ¥å¨èªå·±ç jar åçMETA-INF/spring.factoriesæä»¶ä¸­æ°å¢éç½®å³å¯ï¼\n\norg.springframework.context.ApplicationListener=\\\ncn.moondev.listeners.xxxxListener\\\n\n\nå³äº SpringApplication çåå§åï¼æä»¬å°±è¯´è¿ä¹å¤ã\n\n\n# 6.2 Spring Boot å¯å¨æµç¨\n\nSpring Boot åºç¨çæ´ä¸ªå¯å¨æµç¨é½å°è£å¨ SpringApplication.run æ¹æ³ä¸­ï¼å¶æ´ä¸ªæµç¨ççæ¯å¤ªé¿å¤ªé¿äºï¼ä½æ¬è´¨ä¸å°±æ¯å¨ Spring å®¹å¨å¯å¨çåºç¡ä¸åäºå¤§éçæ©å±ï¼æç§è¿ä¸ªæè·¯æ¥ççæºç ï¼\n\npublic ConfigurableApplicationContext run(String... args) {\n        StopWatch stopWatch = new StopWatch();\n        stopWatch.start();\n        ConfigurableApplicationContext context = null;\n        FailureAnalyzers analyzers = null;\n        configureHeadlessProperty();\n        // â \n        SpringApplicationRunListeners listeners = getRunListeners(args);\n        listeners.starting();\n        try {\n            // â¡\n            ApplicationArguments applicationArguments = new DefaultApplicationArguments(args);\n            ConfigurableEnvironment environment = prepareEnvironment(listeners,applicationArguments);\n            // â¢\n            Banner printedBanner = printBanner(environment);\n            // â£\n            context = createApplicationContext();\n            // â¤\n            analyzers = new FailureAnalyzers(context);\n            // â¥\n            prepareContext(context, environment, listeners, applicationArguments,printedBanner);\n            // â¦\n            refreshContext(context);\n            // â§\n            afterRefresh(context, applicationArguments);\n            // â¨\n            listeners.finished(context, null);\n            stopWatch.stop();\n            return context;\n        }\n        catch (Throwable ex) {\n            handleRunFailure(context, listeners, analyzers, ex);\n            throw new IllegalStateException(ex);\n        }\n    }\n\n\nâ  éè¿ SpringFactoriesLoader æ¥æ¾å¹¶å è½½ææçSpringApplicationRunListenersï¼éè¿è°ç¨ starting()æ¹æ³éç¥ææç SpringApplicationRunListenersï¼åºç¨å¼å§å¯å¨äºãSpringApplicationRunListeners å¶æ¬è´¨ä¸å°±æ¯ä¸ä¸ªäºä»¶åå¸èï¼å®å¨ SpringBoot åºç¨å¯å¨çä¸åæ¶é´ç¹åå¸ä¸ååºç¨äºä»¶ç±»å(ApplicationEvent)ï¼å¦ææåªäºäºä»¶çå¬è(ApplicationListener)å¯¹è¿äºäºä»¶æå´è¶£ï¼åå¯ä»¥æ¥æ¶å¹¶ä¸å¤çãè¿è®°å¾åå§åæµç¨ä¸­ï¼SpringApplication å è½½äºä¸ç³»å ApplicationListener åï¼è¿ä¸ªå¯å¨æµç¨ä¸­æ²¡æåç°æåå¸äºä»¶çä»£ç ï¼å¶å®é½å·²ç»å¨ SpringApplicationRunListeners è¿å¿å®ç°äºã\n\nç®åçåæä¸ä¸å¶å®ç°æµç¨ï¼é¦åçä¸ SpringApplicationRunListener çæºç ï¼\n\npublic interface SpringApplicationRunListener {\n\n    // è¿è¡runæ¹æ³æ¶ç«å³è°ç¨æ­¤æ¹æ³ï¼å¯ä»¥ç¨æ·éå¸¸æ©æçåå§åå·¥ä½\n    void starting();\n\n    // Environmentåå¤å¥½åï¼å¹¶ä¸ApplicationContextåå»ºä¹åè°ç¨\n    void environmentPrepared(ConfigurableEnvironment environment);\n\n    // ApplicationContextåå»ºå¥½åç«å³è°ç¨\n    void contextPrepared(ConfigurableApplicationContext context);\n\n    // ApplicationContextå è½½å®æï¼å¨refreshä¹åè°ç¨\n    void contextLoaded(ConfigurableApplicationContext context);\n\n    // å½runæ¹æ³ç»æä¹åè°ç¨\n    void finished(ConfigurableApplicationContext context, Throwable exception);\n\n}\n\n\nSpringApplicationRunListener åªæä¸ä¸ªå®ç°ç±»ï¼EventPublishingRunListenerãâ  å¤çä»£ç åªä¼è·åå°ä¸ä¸ª EventPublishingRunListener çå®ä¾ï¼æä»¬æ¥çç starting()æ¹æ³çåå®¹ï¼\n\npublic void starting() {\n    // åå¸ä¸ä¸ªApplicationStartedEvent\n    this.initialMulticaster.multicastEvent(new ApplicationStartedEvent(this.application, this.args));\n}\n\n\né¡ºçè¿ä¸ªé»è¾ï¼ä½ å¯ä»¥å¨ â¡ å¤çprepareEnvironment()æ¹æ³çæºç ä¸­æ¾å°listeners.environmentPrepared(environment);å³ SpringApplicationRunListener æ¥å£çç¬¬äºä¸ªæ¹æ³ï¼é£ä¸åºä½ ææï¼environmentPrepared()ååå¸äºå¦å¤ä¸ä¸ªäºä»¶ApplicationEnvironmentPreparedEventãæ¥ä¸æ¥ä¼åçä»ä¹ï¼å°±ä¸ç¨æå¤è¯´äºå§ã\n\nâ¡ åå»ºå¹¶éç½®å½ååºç¨å°è¦ä½¿ç¨çEnvironmentï¼Environment ç¨äºæè¿°åºç¨ç¨åºå½åçè¿è¡ç¯å¢ï¼å¶æ½è±¡äºä¸¤ä¸ªæ¹é¢çåå®¹ï¼éç½®æä»¶(profile)åå±æ§(properties)ï¼å¼åç»éªä¸°å¯çåå­¦å¯¹è¿ä¸¤ä¸ªä¸è¥¿ä¸å®ä¸ä¼éçï¼ä¸åçç¯å¢(egï¼çäº§ç¯å¢ãé¢åå¸ç¯å¢)å¯ä»¥ä½¿ç¨ä¸åçéç½®æä»¶ï¼èå±æ§åå¯ä»¥ä»éç½®æä»¶ãç¯å¢åéãå½ä»¤è¡åæ°ç­æ¥æºè·åãå æ­¤ï¼å½ Environment åå¤å¥½åï¼å¨æ´ä¸ªåºç¨çä»»ä½æ¶åï¼é½å¯ä»¥ä» Environment ä¸­è·åèµæºã\n\næ»ç»èµ·æ¥ï¼â¡ å¤çä¸¤å¥ä»£ç ï¼ä¸»è¦å®æä»¥ä¸å ä»¶äºï¼\n\n * å¤æ­ Environment æ¯å¦å­å¨ï¼ä¸å­å¨å°±åå»ºï¼å¦ææ¯ web é¡¹ç®å°±åå»ºStandardServletEnvironmentï¼å¦ååå»ºStandardEnvironmentï¼\n * éç½® Environmentï¼éç½® profile ä»¥å properties\n * è°ç¨ SpringApplicationRunListener çenvironmentPrepared()æ¹æ³ï¼éç¥äºä»¶çå¬èï¼åºç¨ç Environment å·²ç»åå¤å¥½\n\nâ¢ãSpringBoot åºç¨å¨å¯å¨æ¶ä¼è¾åºè¿æ ·çä¸è¥¿ï¼\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.5.6.RELEASE)\n\n\nå¦ææ³æè¿ä¸ªä¸è¥¿æ¹æèªå·±çæ¶é¸¦ï¼ä½ å¯ä»¥ç ç©¶ä»¥ä¸ Banner çå®ç°ï¼è¿ä¸ªä»»å¡å°±çç»ä½ ä»¬å§ã\n\nâ£ãæ ¹æ®æ¯å¦æ¯ web é¡¹ç®ï¼æ¥åå»ºä¸åç ApplicationContext å®¹å¨ã\n\nâ¤ãåå»ºä¸ç³»åFailureAnalyzerï¼åå»ºæµç¨ä¾ç¶æ¯éè¿ SpringFactoriesLoader è·åå°ææå®ç° FailureAnalyzer æ¥å£ç classï¼ç¶åå¨åå»ºå¯¹åºçå®ä¾ãFailureAnalyzer ç¨äºåææéå¹¶æä¾ç¸å³è¯æ­ä¿¡æ¯ã\n\nâ¥ãåå§å ApplicationContextï¼ä¸»è¦å®æä»¥ä¸å·¥ä½ï¼\n\n * å°åå¤å¥½ç Environment è®¾ç½®ç» ApplicationContext\n * éåè°ç¨ææç ApplicationContextInitializer çinitialize()æ¹æ³æ¥å¯¹å·²ç»åå»ºå¥½ç ApplicationContext è¿è¡è¿ä¸æ­¥çå¤ç\n * è°ç¨ SpringApplicationRunListener çcontextPrepared()æ¹æ³ï¼éç¥ææççå¬èï¼ApplicationContext å·²ç»åå¤å®æ¯\n * å°ææç bean å è½½å°å®¹å¨ä¸­\n * è°ç¨ SpringApplicationRunListener çcontextLoaded()æ¹æ³ï¼éç¥ææççå¬èï¼ApplicationContext å·²ç»è£è½½å®æ¯\n\nâ¦ãè°ç¨ ApplicationContext çrefresh()æ¹æ³ï¼å®æ IoC å®¹å¨å¯ç¨çæåä¸éå·¥åºãä»åå­ä¸çè§£ä¸ºå·æ°å®¹å¨ï¼é£ä½ä¸ºå·æ°ï¼å°±æ¯ææå®¹å¨çå¯å¨ï¼èç³»ä¸ä¸ç¬¬ä¸å°èçåå®¹ãé£å¦ä½å·æ°å¢ï¼ä¸çä¸é¢ä»£ç ï¼\n\n// æèªrefresh()æ¹æ³ä¸­ä¸å¥ä»£ç \ninvokeBeanFactoryPostProcessors(beanFactory);\n\n\nççè¿ä¸ªæ¹æ³çå®ç°ï¼\n\nprotected void invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory) {\n    PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());\n    ......\n}\n\n\nè·åå°ææçBeanFactoryPostProcessoræ¥å¯¹å®¹å¨åä¸äºé¢å¤çæä½ãBeanFactoryPostProcessor åè®¸æä»¬å¨å®¹å¨å®ä¾åç¸åºå¯¹è±¡ä¹åï¼å¯¹æ³¨åå°å®¹å¨ç BeanDefinition æä¿å­çä¿¡æ¯åä¸äºé¢å¤çæä½ãè¿éç getBeanFactoryPostProcessors()æ¹æ³å¯ä»¥è·åå° 3 ä¸ª Processorï¼\n\nConfigurationWarningsApplicationContextInitializer$ConfigurationWarningsPostProcessor\nSharedMetadataReaderFactoryContextInitializer$CachingMetadataReaderFactoryPostProcessor\nConfigFileApplicationListener$PropertySourceOrderingPostProcessor\n\n\nä¸æ¯æé£ä¹å¤ BeanFactoryPostProcessor çå®ç°ç±»ï¼ä¸ºä»ä¹è¿å¿åªæè¿ 3 ä¸ªï¼å ä¸ºå¨åå§åæµç¨è·åå°çåç§ ApplicationContextInitializer å ApplicationListener ä¸­ï¼åªæä¸æ 3 ä¸ªåäºç±»ä¼¼äºå¦ä¸æä½ï¼\n\npublic void initialize(ConfigurableApplicationContext context) {\n    context.addBeanFactoryPostProcessor(new ConfigurationWarningsPostProcessor(getChecks()));\n}\n\n\nç¶åä½ å°±å¯ä»¥è¿å¥å°PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors()æ¹æ³äºï¼è¿ä¸ªæ¹æ³é¤äºä¼éåä¸é¢ç 3 ä¸ª BeanFactoryPostProcessor å¤çå¤ï¼è¿ä¼è·åç±»åä¸ºBeanDefinitionRegistryPostProcessorç beanï¼org.springframework.context.annotation.internalConfigurationAnnotationProcessorï¼å¯¹åºç Class ä¸ºConfigurationClassPostProcessorãConfigurationClassPostProcessorç¨äºè§£æå¤çåç§æ³¨è§£ï¼åæ¬ï¼@Configurationã@ComponentScanã@Importã@PropertySourceã@ImportResourceã@Beanãå½å¤ç@importæ³¨è§£çæ¶åï¼å°±ä¼è°ç¨èªå¨éç½®è¿ä¸å°èä¸­çEnableAutoConfigurationImportSelector.selectImports()æ¥å®æèªå¨éç½®åè½ãå¶ä»çè¿éä¸åå¤è®²ï¼å¦æä½ æå´è¶£ï¼å¯ä»¥æ¥éåèèµæ 6ã\n\nâ§ãæ¥æ¾å½å context ä¸­æ¯å¦æ³¨åæ CommandLineRunner å ApplicationRunnerï¼å¦ææåéåæ§è¡å®ä»¬ã\n\nâ¨ãæ§è¡ææ SpringApplicationRunListener ç finished()æ¹æ³ã\n\nè¿å°±æ¯ Spring Boot çæ´ä¸ªå¯å¨æµç¨ï¼å¶æ ¸å¿å°±æ¯å¨ Spring å®¹å¨åå§åå¹¶å¯å¨çåºç¡ä¸å å¥åç§æ©å±ç¹ï¼è¿äºæ©å±ç¹åæ¬ï¼ApplicationContextInitializerãApplicationListener ä»¥ååç§ BeanFactoryPostProcessor ç­ç­ãä½ å¯¹æ´ä¸ªæµç¨çç»èä¸å¿å¤ªè¿å³æ³¨ï¼çè³æ²¡å¼æç½ä¹æ²¡æå³ç³»ï¼ä½ åªè¦çè§£è¿äºæ©å±ç¹æ¯å¨ä½æ¶å¦ä½å·¥ä½çï¼è½è®©å®ä»¬ä¸ºä½ æç¨å³å¯ã\n\næ´ä¸ªå¯å¨æµç¨ç¡®å®éå¸¸å¤æï¼å¯ä»¥æ¥è¯¢åèèµæä¸­çé¨åç« èååå®¹ï¼å¯¹ç§çæºç ï¼å¤ççï¼ææ³æç»ä½ é½è½å¼æ¸æ¥çãè¨èæ»ä¹ï¼Spring ææ¯æ ¸å¿ï¼çè§£æ¸æ¥ Spring å®¹å¨çå¯å¨æµç¨ï¼é£ Spring Boot å¯å¨æµç¨å°±ä¸å¨è¯ä¸äºã\n\n\n# åèèµæ\n\n[1]çç¦å¼º èï¼springboot æ­ç§ï¼å¿«éæå»ºå¾®æå¡ä½ç³»; æºæ¢°å·¥ä¸åºçç¤¾, 2016 [2]çç¦å¼º èï¼spring æ­ç§; äººæ°é®ä»¶åºçç¤¾, 2009 [3]craig walls èï¼ä¸éªä¸° è¯ï¼spring boot å®æï¼ä¸­å½å·¥ä¿¡åºçéå¢ äººæ°é®çµåºçç¤¾ï¼2016 [4]æ·±å¥æ¢è®¨ java ç±»å è½½å¨ : www.ibm.com/developerwoâ¦ [5]spring boot å®æï¼èªå¨éç½®åçåæ : blog.csdn.net/liaokailin/â¦ [6]spring bootå®æï¼spring boot beanå è½½æºç åæï¼ blog.csdn.net/liaokailin/â¦',normalizedContent:'# springboot ç¥è¯å¾è°±\n\n>  1. é¢è­¦ï¼æ¬æéå¸¸é¿ï¼å»ºè®®å mark åçï¼ä¹è®¸æ¯æåä¸æ¬¡åè¿ä¹é¿çæç« \n>  2. è¯´æï¼åé¢æ 4 ä¸ªå°èå³äº spring çåºç¡ç¥è¯ï¼åå«æ¯ï¼ioc å®¹å¨ãjavaconfigãäºä»¶çå¬ãspringfactoriesloader è¯¦è§£ï¼å®ä»¬å æ®äºæ¬æçå¤§é¨ååå®¹ï¼è½ç¶å®ä»¬ä¹é´å¯è½æ²¡æå¤ªå¤çèç³»ï¼ä½è¿äºç¥è¯å¯¹äºçè§£ spring boot çæ ¸å¿åçè³å³éè¦ï¼å¦æä½ å¯¹ spring æ¡æ¶ççäºå¿ï¼å®å¨å¯ä»¥è·³è¿è¿ 4 ä¸ªå°èãæ­£æ¯å ä¸ºè¿ä¸ªç³»åçæç« æ¯ç±è¿äºçä¼¼ä¸ç¸å³çç¥è¯ç¹ç»æï¼å æ­¤ååç¥è¯æ¸åã\n\nå¨è¿å»ä¸¤ä¸å¹´ç spring çæåï¼æè®©äººå´å¥çè«è¿äº spring boot æ¡æ¶ãæè®¸ä»å½åä¸å°±è½çåºè¿ä¸ªæ¡æ¶çè®¾è®¡åè¡·ï¼å¿«éçå¯å¨ spring åºç¨ãå è spring boot åºç¨æ¬è´¨ä¸å°±æ¯ä¸ä¸ªåºäº spring æ¡æ¶çåºç¨ï¼å®æ¯ spring å¯¹âçº¦å®ä¼åäºéç½®âçå¿µçæä½³å®è·µäº§ç©ï¼å®è½å¤å¸®å©å¼åèæ´å¿«éé«æå°æå»ºåºäº spring çæåçåºç¨ã\n\né£ spring boot æä½é­æ³ï¼èªå¨éç½®ãèµ·æ­¥ä¾èµãactuatorãå½ä»¤è¡çé¢(cli) æ¯ spring boot æéè¦ç 4 å¤§æ ¸å¿ç¹æ§ï¼å¶ä¸­ cli æ¯ spring boot çå¯éç¹æ§ï¼è½ç¶å®åè½å¼ºå¤§ï¼ä½ä¹å¼å¥äºä¸å¥ä¸å¤ªå¸¸è§çå¼åæ¨¡åï¼å èè¿ä¸ªç³»åçæç« ä»å³æ³¨å¶å® 3 ç§ç¹æ§ãå¦æç« æ é¢ï¼æ¬ææ¯è¿ä¸ªç³»åçç¬¬ä¸é¨åï¼å°ä¸ºä½ æå¼ spring boot çå¤§é¨ï¼éç¹ä¸ºä½ åæå¶å¯å¨æµç¨ä»¥åèªå¨éç½®å®ç°åçãè¦ææ¡è¿é¨åæ ¸å¿åå®¹ï¼çè§£ä¸äº spring æ¡æ¶çåºç¡ç¥è¯ï¼å°ä¼è®©ä½ äºåååã\n\n\n# ä¸ãæç å¼çï¼æ¢ç´¢ spring ioc å®¹å¨\n\nå¦ææçè¿springapplication.run()æ¹æ³çæºç ï¼spring boot åé¿æ æ¯çå¯å¨æµç¨ä¸å®ä¼è®©ä½ æçï¼éè¿ç°è±¡çæ¬è´¨ï¼springapplication åªæ¯å°ä¸ä¸ªå¸åç spring åºç¨çå¯å¨æµç¨è¿è¡äºæ©å±ï¼å æ­¤ï¼éå½»çè§£ spring å®¹å¨æ¯æå¼ spring boot å¤§é¨çä¸æé¥åã\n\n\n# 1.1ãspring ioc å®¹å¨\n\nå¯ä»¥æ spring ioc å®¹å¨æ¯ä½ä¸é´é¤é¦ï¼å½ä½ æ¥å°é¤é¦ï¼éå¸¸ä¼ç´æ¥æå¼æå¡åï¼ç¹èï¼è³äºèçåææ¯ä»ä¹ï¼å¦ä½ç¨åææèååºæ¥ï¼å¯è½ä½ æ ¹æ¬å°±ä¸å³å¿ãioc å®¹å¨ä¹æ¯ä¸æ ·ï¼ä½ åªéè¦åè¯å®éè¦æä¸ª beanï¼å®å°±æå¯¹åºçå®ä¾ï¼instanceï¼æç»ä½ ï¼è³äºè¿ä¸ª bean æ¯å¦ä¾èµå¶ä»ç»ä»¶ï¼ææ ·å®æå®çåå§åï¼æ ¹æ¬å°±ä¸éè¦ä½ å³å¿ã\n\nä½ä¸ºé¤é¦ï¼æ³è¦ååºèè´ï¼å¾ç¥éèçåæåèè°±ï¼åæ ·å°ï¼ioc å®¹å¨æ³è¦ç®¡çåä¸ªä¸å¡å¯¹è±¡ä»¥åå®ä»¬ä¹é´çä¾èµå³ç³»ï¼éè¦éè¿æç§éå¾æ¥è®°å½åç®¡çè¿äºä¿¡æ¯ãbeandefinitionå¯¹è±¡å°±æ¿æäºè¿ä¸ªè´£ä»»ï¼å®¹å¨ä¸­çæ¯ä¸ä¸ª bean é½ä¼æä¸ä¸ªå¯¹åºç beandefinition å®ä¾ï¼è¯¥å®ä¾è´è´£ä¿å­ bean å¯¹è±¡çææå¿è¦ä¿¡æ¯ï¼åæ¬ bean å¯¹è±¡ç class ç±»åãæ¯å¦æ¯æ½è±¡ç±»ãæé æ¹æ³ååæ°ãå¶å®å±æ§ç­ç­ãå½å®¢æ·ç«¯åå®¹å¨è¯·æ±ç¸åºå¯¹è±¡æ¶ï¼å®¹å¨å°±ä¼éè¿è¿äºä¿¡æ¯ä¸ºå®¢æ·ç«¯è¿åä¸ä¸ªå®æ´å¯ç¨ç bean å®ä¾ã\n\nåææå·²ç»åå¤å¥½ï¼æ beandefinition ççåæï¼ï¼å¼å§åèå§ï¼ç­ç­ï¼ä½ è¿éè¦ä¸ä»½èè°±ï¼beandefinitionregistryåbeanfactoryå°±æ¯è¿ä»½èè°±ï¼beandefinitionregistry æ½è±¡åº bean çæ³¨åé»è¾ï¼è beanfactory åæ½è±¡åºäº bean çç®¡çé»è¾ï¼èåä¸ª beanfactory çå®ç°ç±»å°±å·ä½æ¿æäº bean çæ³¨åä»¥åç®¡çå·¥ä½ãå®ä»¬ä¹é´çå³ç³»å°±å¦ä¸å¾ï¼\n\nbeanfactoryãbeandefinitionregistry å³ç³»å¾ï¼æ¥èªï¼spring æ­ç§ï¼\n\ndefaultlistablebeanfactoryä½ä¸ºä¸ä¸ªæ¯è¾éç¨ç beanfactory å®ç°ï¼å®åæ¶ä¹å®ç°äº beandefinitionregistry æ¥å£ï¼å æ­¤å®å°±æ¿æäº bean çæ³¨åç®¡çå·¥ä½ãä»å¾ä¸­ä¹å¯ä»¥çåºï¼beanfactory æ¥å£ä¸­ä¸»è¦åå« getbeanãcontainbeanãgettypeãgetaliases ç­ç®¡ç bean çæ¹æ³ï¼è beandefinitionregistry æ¥å£ååå« registerbeandefinitionãremovebeandefinitionãgetbeandefinition ç­æ³¨åç®¡ç beandefinition çæ¹æ³ã\n\nä¸é¢éè¿ä¸æ®µç®åçä»£ç æ¥æ¨¡æ beanfactory åºå±æ¯å¦ä½å·¥ä½çï¼\n\n// é»è®¤å®¹å¨å®ç°\ndefaultlistablebeanfactory beanregistry = new defaultlistablebeanfactory();\n// æ ¹æ®ä¸å¡å¯¹è±¡æé ç¸åºçbeandefinition\nabstractbeandefinition definition = new rootbeandefinition(business.class,true);\n// å°beanå®ä¹æ³¨åå°å®¹å¨ä¸­\nbeanregistry.registerbeandefinition("beanname",definition);\n// å¦ææå¤ä¸ªbeanï¼è¿å¯ä»¥æå®åä¸ªbeanä¹é´çä¾èµå³ç³»\n// ........\n\n// ç¶åå¯ä»¥ä»å®¹å¨ä¸­è·åè¿ä¸ªbeançå®ä¾\n// æ³¨æï¼è¿éçbeanregistryå¶å®å®ç°äºbeanfactoryæ¥å£ï¼æä»¥å¯ä»¥å¼ºè½¬ï¼\n// åçº¯çbeandefinitionregistryæ¯æ æ³å¼ºå¶è½¬æ¢å°beanfactoryç±»åç\nbeanfactory container = (beanfactory)beanregistry;\nbusiness business = (business)container.getbean("beanname");\n\n\nè¿æ®µä»£ç ä»ä¸ºäºè¯´æ beanfactory åºå±çå¤§è´å·¥ä½æµç¨ï¼å®éæåµä¼æ´å å¤æï¼æ¯å¦ bean ä¹é´çä¾èµå³ç³»å¯è½å®ä¹å¨å¤é¨éç½®æä»¶(xml/properties)ä¸­ãä¹å¯è½æ¯æ³¨è§£æ¹å¼ãspring ioc å®¹å¨çæ´ä¸ªå·¥ä½æµç¨å¤§è´å¯ä»¥åä¸ºä¸¤ä¸ªé¶æ®µï¼\n\nâ ãå®¹å¨å¯å¨é¶æ®µ\n\nå®¹å¨å¯å¨æ¶ï¼ä¼éè¿æç§éå¾å è½½configuration metadataãé¤äºä»£ç æ¹å¼æ¯è¾ç´æ¥å¤ï¼å¨å¤§é¨åæåµä¸ï¼å®¹å¨éè¦ä¾èµæäºå·¥å·ç±»ï¼æ¯å¦ï¼beandefinitionreaderï¼beandefinitionreader ä¼å¯¹å è½½çconfiguration metadataè¿è¡è§£æååæï¼å¹¶å°åæåçä¿¡æ¯ç»è£ä¸ºç¸åºç beandefinitionï¼æåæè¿äºä¿å­äº bean å®ä¹ç beandefinitionï¼æ³¨åå°ç¸åºç beandefinitionregistryï¼è¿æ ·å®¹å¨çå¯å¨å·¥ä½å°±å®æäºãè¿ä¸ªé¶æ®µä¸»è¦å®æä¸äºåå¤æ§å·¥ä½ï¼æ´ä¾§éäº bean å¯¹è±¡ç®¡çä¿¡æ¯çæ¶éï¼å½ç¶ä¸äºéªè¯æ§æèè¾å©æ§çå·¥ä½ä¹å¨è¿ä¸é¶æ®µå®æã\n\næ¥çä¸ä¸ªç®åçä¾å­å§ï¼è¿å¾ï¼ææç bean é½å®ä¹å¨ xml éç½®æä»¶ä¸­ï¼ä¸é¢çä»£ç å°æ¨¡æ beanfactory å¦ä½ä»éç½®æä»¶ä¸­å è½½ bean çå®ä¹ä»¥åä¾èµå³ç³»ï¼\n\n// éå¸¸ä¸ºbeandefinitionregistryçå®ç°ç±»ï¼è¿éä»¥defaultlistabebeanfactoryä¸ºä¾\nbeandefinitionregistry beanregistry = new defaultlistablebeanfactory();\n// xmlbeandefinitionreaderå®ç°äºbeandefinitionreaderæ¥å£ï¼ç¨äºè§£æxmlæä»¶\nxmlbeandefinitionreader beandefinitionreader = new xmlbeandefinitionreaderimpl(beanregistry);\n// å è½½éç½®æä»¶\nbeandefinitionreader.loadbeandefinitions("classpath:spring-bean.xml");\n\n// ä»å®¹å¨ä¸­è·åbeanå®ä¾\nbeanfactory container = (beanfactory)beanregistry;\nbusiness business = (business)container.getbean("beanname");\n\n\nâ¡ãbean çå®ä¾åé¶æ®µ\n\nç»è¿ç¬¬ä¸é¶æ®µï¼ææ bean å®ä¹é½éè¿ beandefinition çæ¹å¼æ³¨åå° beandefinitionregistry ä¸­ï¼å½æä¸ªè¯·æ±éè¿å®¹å¨ç getbean æ¹æ³è¯·æ±æä¸ªå¯¹è±¡ï¼æèå ä¸ºä¾èµå³ç³»å®¹å¨éè¦éå¼çè°ç¨ getbean æ¶ï¼å°±ä¼è§¦åç¬¬äºé¶æ®µçæ´»å¨ï¼å®¹å¨ä¼é¦åæ£æ¥æè¯·æ±çå¯¹è±¡ä¹åæ¯å¦å·²ç»å®ä¾åå®æãå¦ææ²¡æï¼åä¼æ ¹æ®æ³¨åç beandefinition ææä¾çä¿¡æ¯å®ä¾åè¢«è¯·æ±å¯¹è±¡ï¼å¹¶ä¸ºå¶æ³¨å¥ä¾èµãå½è¯¥å¯¹è±¡è£éå®æ¯åï¼å®¹å¨ä¼ç«å³å°å¶è¿åç»è¯·æ±æ¹æ³ä½¿ç¨ã\n\nbeanfactory åªæ¯ spring ioc å®¹å¨çä¸ç§å®ç°ï¼å¦ææ²¡æç¹æ®æå®ï¼å®éç¨éç¨å»¶è¿åå§åç­ç¥ï¼åªæå½è®¿é®å®¹å¨ä¸­çæä¸ªå¯¹è±¡æ¶ï¼æå¯¹è¯¥å¯¹è±¡è¿è¡åå§ååä¾èµæ³¨å¥æä½ãèå¨å®éåºæ¯ä¸ï¼æä»¬æ´å¤çä½¿ç¨å¦å¤ä¸ç§ç±»åçå®¹å¨ï¼applicationcontextï¼å®æå»ºå¨ beanfactory ä¹ä¸ï¼å±äºæ´é«çº§çå®¹å¨ï¼é¤äºå·æ beanfactory çææè½åä¹å¤ï¼è¿æä¾å¯¹äºä»¶çå¬æºå¶ä»¥åå½éåçæ¯æç­ãå®ç®¡çç beanï¼å¨å®¹å¨å¯å¨æ¶å¨é¨å®æåå§ååä¾èµæ³¨å¥æä½ã\n\n\n# 1.2ãspring å®¹å¨æ©å±æºå¶\n\nioc å®¹å¨è´è´£ç®¡çå®¹å¨ä¸­ææ bean ççå½å¨æï¼èå¨ bean çå½å¨æçä¸åé¶æ®µï¼spring æä¾äºä¸åçæ©å±ç¹æ¥æ¹å bean çå½è¿ãå¨å®¹å¨çå¯å¨é¶æ®µï¼beanfactorypostprocessoråè®¸æä»¬å¨å®¹å¨å®ä¾åç¸åºå¯¹è±¡ä¹åï¼å¯¹æ³¨åå°å®¹å¨ç beandefinition æä¿å­çä¿¡æ¯åä¸äºé¢å¤çæä½ï¼æ¯å¦ä¿®æ¹ bean å®ä¹çæäºå±æ§æèå¢å å¶ä»ä¿¡æ¯ç­ã\n\nå¦æè¦èªå®ä¹æ©å±ç±»ï¼éå¸¸éè¦å®ç°org.springframework.beans.factory.config.beanfactorypostprocessoræ¥å£ï¼ä¸æ­¤åæ¶ï¼å ä¸ºå®¹å¨ä¸­å¯è½æå¤ä¸ª beanfactorypostprocessorï¼å¯è½è¿éè¦å®ç°org.springframework.core.orderedæ¥å£ï¼ä»¥ä¿è¯ beanfactorypostprocessor æç§é¡ºåºæ§è¡ãspring æä¾äºä¸ºæ°ä¸å¤ç beanfactorypostprocessor å®ç°ï¼æä»¬ä»¥propertyplaceholderconfigureræ¥è¯´æå¶å¤§è´çå·¥ä½æµç¨ã\n\nå¨ spring é¡¹ç®ç xml éç½®æä»¶ä¸­ï¼ç»å¸¸å¯ä»¥çå°è®¸å¤éç½®é¡¹çå¼ä½¿ç¨å ä½ç¬¦ï¼èå°å ä½ç¬¦æä»£è¡¨çå¼åç¬éç½®å°ç¬ç«ç properties æä»¶ï¼è¿æ ·å¯ä»¥å°æ£è½å¨ä¸å xml æä»¶ä¸­çéç½®éä¸­ç®¡çï¼èä¸ä¹æ¹ä¾¿è¿ç»´æ ¹æ®ä¸åçç¯å¢è¿è¡éç½®ä¸åçå¼ãè¿ä¸ªéå¸¸å®ç¨çåè½å°±æ¯ç± propertyplaceholderconfigurer è´è´£å®ç°çã\n\næ ¹æ®åæï¼å½ beanfactory å¨ç¬¬ä¸é¶æ®µå è½½å®ææéç½®ä¿¡æ¯æ¶ï¼beanfactory ä¸­ä¿å­çå¯¹è±¡çå±æ§è¿æ¯ä»¥å ä½ç¬¦æ¹å¼å­å¨çï¼æ¯å¦${jdbc.mysql.url}ãå½ propertyplaceholderconfigurer ä½ä¸º beanfactorypostprocessor è¢«åºç¨æ¶ï¼å®ä¼ä½¿ç¨ properties éç½®æä»¶ä¸­çå¼æ¥æ¿æ¢ç¸åºç beandefinition ä¸­å ä½ç¬¦æè¡¨ç¤ºçå±æ§å¼ãå½éè¦å®ä¾å bean æ¶ï¼bean å®ä¹ä¸­çå±æ§å¼å°±å·²ç»è¢«æ¿æ¢ææä»¬éç½®çå¼ãå½ç¶å¶å®ç°æ¯ä¸é¢æè¿°çè¦å¤æä¸äºï¼è¿éä»è¯´æå¶å¤§è´å·¥ä½åçï¼æ´è¯¦ç»çå®ç°å¯ä»¥åèå¶æºç ã\n\nä¸ä¹ç¸ä¼¼çï¼è¿æbeanpostprocessorï¼å¶å­å¨äºå¯¹è±¡å®ä¾åé¶æ®µãè· beanfactorypostprocessor ç±»ä¼¼ï¼å®ä¼å¤çå®¹å¨åææç¬¦åæ¡ä»¶å¹¶ä¸å·²ç»å®ä¾ååçå¯¹è±¡ãç®åçå¯¹æ¯ï¼beanfactorypostprocessor å¤ç bean çå®ä¹ï¼è beanpostprocessor åå¤ç bean å®æå®ä¾ååçå¯¹è±¡ãbeanpostprocessor å®ä¹äºä¸¤ä¸ªæ¥å£ï¼\n\npublic interface beanpostprocessor {\n    // åç½®å¤ç\n    object postprocessbeforeinitialization(object bean, string beanname) throws beansexception;\n    // åç½®å¤ç\n    object postprocessafterinitialization(object bean, string beanname) throws beansexception;\n}\n\n\nä¸ºäºçè§£è¿ä¸¤ä¸ªæ¹æ³æ§è¡çæ¶æºï¼ç®åçäºè§£ä¸ bean çæ´ä¸ªçå½å¨æï¼\n\npostprocessbeforeinitialization()æ¹æ³ä¸postprocessafterinitialization()åå«å¯¹åºå¾ä¸­åç½®å¤çååç½®å¤çä¸¤ä¸ªæ­¥éª¤å°æ§è¡çæ¹æ³ãè¿ä¸¤ä¸ªæ¹æ³ä¸­é½ä¼ å¥äº bean å¯¹è±¡å®ä¾çå¼ç¨ï¼ä¸ºæ©å±å®¹å¨çå¯¹è±¡å®ä¾åè¿ç¨æä¾äºå¾å¤§ä¾¿å©ï¼å¨è¿å¿å ä¹å¯ä»¥å¯¹ä¼ å¥çå®ä¾æ§è¡ä»»ä½æä½ãæ³¨è§£ãaop ç­åè½çå®ç°åå¤§éä½¿ç¨äºbeanpostprocessorï¼æ¯å¦æä¸ä¸ªèªå®ä¹æ³¨è§£ï¼ä½ å®å¨å¯ä»¥å®ç° beanpostprocessor çæ¥å£ï¼å¨å¶ä¸­å¤æ­ bean å¯¹è±¡çèè¢ä¸æ¯å¦æè¯¥æ³¨è§£ï¼å¦ææï¼ä½ å¯ä»¥å¯¹è¿ä¸ª bean å®ä¾æ§è¡ä»»ä½æä½ï¼æ³æ³æ¯ä¸æ¯éå¸¸çç®åï¼\n\nåæ¥çä¸ä¸ªæ´å¸¸è§çä¾å­ï¼å¨ spring ä¸­ç»å¸¸è½å¤çå°åç§åæ ·ç aware æ¥å£ï¼å¶ä½ç¨å°±æ¯å¨å¯¹è±¡å®ä¾åå®æä»¥åå° aware æ¥å£å®ä¹ä¸­è§å®çä¾èµæ³¨å¥å°å½åå®ä¾ä¸­ãæ¯å¦æå¸¸è§çapplicationcontextawareæ¥å£ï¼å®ç°äºè¿ä¸ªæ¥å£çç±»é½å¯ä»¥è·åå°ä¸ä¸ª applicationcontext å¯¹è±¡ãå½å®¹å¨ä¸­æ¯ä¸ªå¯¹è±¡çå®ä¾åè¿ç¨èµ°å° beanpostprocessor åç½®å¤çè¿ä¸æ­¥æ¶ï¼å®¹å¨ä¼æ£æµå°ä¹åæ³¨åå°å®¹å¨ç applicationcontextawareprocessorï¼ç¶åå°±ä¼è°ç¨å¶ postprocessbeforeinitialization()æ¹æ³ï¼æ£æ¥å¹¶è®¾ç½® aware ç¸å³ä¾èµãççä»£ç å§ï¼æ¯ä¸æ¯å¾ç®åï¼\n\n// ä»£ç æ¥èªï¼org.springframework.context.support.applicationcontextawareprocessor\n// å¶postprocessbeforeinitializationæ¹æ³è°ç¨äºinvokeawareinterfacesæ¹æ³\nprivate void invokeawareinterfaces(object bean) {\n    if (bean instanceof environmentaware) {\n        ((environmentaware) bean).setenvironment(this.applicationcontext.getenvironment());\n    }\n    if (bean instanceof applicationcontextaware) {\n        ((applicationcontextaware) bean).setapplicationcontext(this.applicationcontext);\n    }\n    // ......\n}\n\n\næåæ»ç»ä¸ä¸ï¼æ¬å°èåå®¹åä½ ä¸èµ·åé¡¾äº spring å®¹å¨çé¨åæ ¸å¿åå®¹ï¼éäºç¯å¹ä¸è½åæ´å¤ï¼ä½çè§£è¿é¨ååå®¹ï¼è¶³ä»¥è®©æ¨è½»æ¾çè§£ spring boot çå¯å¨åçï¼å¦æå¨åç»­çå­¦ä¹ è¿ç¨ä¸­éå°ä¸äºæ¦æ¶©é¾æçç¥è¯ï¼ååè¿å¤´æ¥çç spring çæ ¸å¿ç¥è¯ï¼ä¹è®¸æææ³ä¸å°çææãä¹è®¸ spring boot çä¸­æèµæå¾å°ï¼ä½ spring çä¸­æèµæåä¹¦ç±æå¤ªå¤å¤ªå¤ï¼æ»æä¸è¥¿è½ç»ä½ å¯åã\n\n\n# äºãå¤¯å®åºç¡ï¼javaconfig ä¸å¸¸è§ annotation\n\n\n# 2.1ãjavaconfig\n\næä»¬ç¥ébeanæ¯ spring ioc ä¸­éå¸¸æ ¸å¿çæ¦å¿µï¼spring å®¹å¨è´è´£ bean ççå½å¨æçç®¡çãå¨æåï¼spring ä½¿ç¨ xml éç½®æä»¶çæ¹å¼æ¥æè¿° bean çå®ä¹ä»¥åç¸äºé´çä¾èµå³ç³»ï¼ä½éç spring çåå±ï¼è¶æ¥è¶å¤çäººå¯¹è¿ç§æ¹å¼è¡¨ç¤ºä¸æ»¡ï¼å ä¸º spring é¡¹ç®çææä¸å¡ç±»åä»¥ bean çå½¢å¼éç½®å¨ xml æä»¶ä¸­ï¼é æäºå¤§éç xml æä»¶ï¼ä½¿é¡¹ç®åå¾å¤æä¸é¾ä»¥ç®¡çã\n\nåæ¥ï¼åºäºçº¯ java annotation ä¾èµæ³¨å¥æ¡æ¶guiceåºä¸ï¼å¶æ§è½ææ¾ä¼äºéç¨ xml æ¹å¼ç springï¼çè³æé¨åäººè®¤ä¸ºï¼guiceå¯ä»¥å®å¨åä»£ springï¼guiceä»æ¯ä¸ä¸ªè½»éçº§ ioc æ¡æ¶ï¼åä»£ spring è¿å·®çæºè¿ï¼ãæ­£æ¯è¿æ ·çå±æºæï¼ä¿ä½¿ spring åç¤¾åºæ¨åºå¹¶æç»­å®åäºjavaconfigå­é¡¹ç®ï¼å®åºäº java ä»£ç å annotation æ³¨è§£æ¥æè¿° bean ä¹é´çä¾èµç»å®å³ç³»ãæ¯å¦ï¼ä¸é¢æ¯ä½¿ç¨ xml éç½®æ¹å¼æ¥æè¿° bean çå®ä¹ï¼\n\n<bean id="bookservice" class="cn.moondev.service.bookserviceimpl"></bean>\n\n\nèåºäº javaconfig çéç½®å½¢å¼æ¯è¿æ ·çï¼\n\n@configuration\npublic class moonbookconfiguration {\n\n    // ä»»ä½æ å¿äº@beançæ¹æ³ï¼å¶è¿åå¼å°ä½ä¸ºä¸ä¸ªbeanæ³¨åå°springçiocå®¹å¨ä¸­\n    // æ¹æ³åé»è®¤æä¸ºè¯¥beanå®ä¹çid\n    @bean\n    public bookservice bookservice() {\n        return new bookserviceimpl();\n    }\n}\n\n\nå¦æä¸¤ä¸ª bean ä¹é´æä¾èµå³ç³»çè¯ï¼å¨ xml éç½®ä¸­åºè¯¥æ¯è¿æ ·ï¼\n\n<bean id="bookservice" class="cn.moondev.service.bookserviceimpl">\n    <property name="dependencyservice" ref="dependencyservice"/>\n</bean>\n\n<bean id="otherservice" class="cn.moondev.service.otherserviceimpl">\n    <property name="dependencyservice" ref="dependencyservice"/>\n</bean>\n\n<bean id="dependencyservice" class="dependencyserviceimpl"/>\n\n\nèå¨ javaconfig ä¸­åæ¯è¿æ ·ï¼\n\n@configuration\npublic class moonbookconfiguration {\n\n    // å¦æä¸ä¸ªbeanä¾èµå¦ä¸ä¸ªbeanï¼åç´æ¥è°ç¨å¯¹åºjavaconfigç±»ä¸­ä¾èµbeançåå»ºæ¹æ³å³å¯\n    // è¿éç´æ¥è°ç¨dependencyservice()\n    @bean\n    public bookservice bookservice() {\n        return new bookserviceimpl(dependencyservice());\n    }\n\n    @bean\n    public otherservice otherservice() {\n        return new otherserviceimpl(dependencyservice());\n    }\n\n    @bean\n    public dependencyservice dependencyservice() {\n        return new dependencyserviceimpl();\n    }\n}\n\n\nä½ å¯è½æ³¨æå°è¿ä¸ªç¤ºä¾ä¸­ï¼æä¸¤ä¸ª bean é½ä¾èµäº dependencyserviceï¼ä¹å°±æ¯è¯´å½åå§å bookservice æ¶ä¼è°ç¨dependencyservice()ï¼å¨åå§å otherservice æ¶ä¹ä¼è°ç¨dependencyservice()ï¼é£ä¹é®é¢æ¥äºï¼è¿æ¶å ioc å®¹å¨ä¸­æ¯æä¸ä¸ª dependencyservice å®ä¾è¿æ¯ä¸¤ä¸ªï¼è¿ä¸ªé®é¢ççå¤§å®¶æèå§ï¼è¿éä¸åèµè¿°ã\n\n\n# 2.2ã@componentscan\n\n@componentscanæ³¨è§£å¯¹åº xml éç½®å½¢å¼ä¸­ç``åç´ ï¼è¡¨ç¤ºå¯ç¨ç»ä»¶æ«æï¼spring ä¼èªå¨æ«æææéè¿æ³¨è§£éç½®ç beanï¼ç¶åå°å¶æ³¨åå° ioc å®¹å¨ä¸­ãæä»¬å¯ä»¥éè¿basepackagesç­å±æ§æ¥æå®@componentscanèªå¨æ«æçèå´ï¼å¦æä¸æå®ï¼é»è®¤ä»å£°æ@componentscanæå¨ç±»çpackageè¿è¡æ«æãæ­£å ä¸ºå¦æ­¤ï¼springboot çå¯å¨ç±»é½é»è®¤å¨src/main/javaä¸ã\n\n\n# 2.3ã@import\n\n@importæ³¨è§£ç¨äºå¯¼å¥éç½®ç±»ï¼ä¸¾ä¸ªç®åçä¾å­ï¼\n\n@configuration\npublic class moonbookconfiguration {\n    @bean\n    public bookservice bookservice() {\n        return new bookserviceimpl();\n    }\n}\n\n\nç°å¨æå¦å¤ä¸ä¸ªéç½®ç±»ï¼æ¯å¦ï¼moonuserconfigurationï¼è¿ä¸ªéç½®ç±»ä¸­æä¸ä¸ª bean ä¾èµäºmoonbookconfigurationä¸­ç bookserviceï¼å¦ä½å°è¿ä¸¤ä¸ª bean ç»åå¨ä¸èµ·ï¼åå©@importå³å¯ï¼\n\n@configuration\n// å¯ä»¥åæ¶å¯¼å¥å¤ä¸ªéç½®ç±»ï¼æ¯å¦ï¼@import({a.class,b.class})\n@import(moonbookconfiguration.class)\npublic class moonuserconfiguration {\n    @bean\n    public userservice userservice(bookservice bookservice) {\n        return new bookserviceimpl(bookservice);\n    }\n}\n\n\néè¦æ³¨æçæ¯ï¼å¨ 4.2 ä¹åï¼@importæ³¨è§£åªæ¯æå¯¼å¥éç½®ç±»ï¼ä½æ¯å¨ 4.2 ä¹åï¼å®æ¯æå¯¼å¥æ®éç±»ï¼å¹¶å°è¿ä¸ªç±»ä½ä¸ºä¸ä¸ª bean çå®ä¹æ³¨åå° ioc å®¹å¨ä¸­ã\n\n\n# 2.4ã@conditional\n\n@conditionalæ³¨è§£è¡¨ç¤ºå¨æ»¡è¶³æç§æ¡ä»¶åæåå§åä¸ä¸ª bean æèå¯ç¨æäºéç½®ãå®ä¸è¬ç¨å¨ç±@componentã@serviceã@configurationç­æ³¨è§£æ è¯çç±»ä¸é¢ï¼æèç±@beanæ è®°çæ¹æ³ä¸ãå¦æä¸ä¸ª@configurationç±»æ è®°äº@conditionalï¼åè¯¥ç±»ä¸­æææ è¯äº@beançæ¹æ³å@importæ³¨è§£å¯¼å¥çç¸å³ç±»å°éµä»è¿äºæ¡ä»¶ã\n\nå¨ spring éå¯ä»¥å¾æ¹ä¾¿çç¼åä½ èªå·±çæ¡ä»¶ç±»ï¼æè¦åçå°±æ¯å®ç°conditionæ¥å£ï¼å¹¶è¦çå®çmatches()æ¹æ³ãä¸¾ä¸ªä¾å­ï¼ä¸é¢çç®åæ¡ä»¶ç±»è¡¨ç¤ºåªæå¨classpathéå­å¨jdbctemplateç±»æ¶æçæï¼\n\npublic class jdbctemplatecondition implements condition {\n\n    @override\n    public boolean matches(conditioncontext conditioncontext, annotatedtypemetadata annotatedtypemetadata) {\n        try {\n        conditioncontext.getclassloader().loadclass("org.springframework.jdbc.core.jdbctemplate");\n            return true;\n        } catch (classnotfoundexception e) {\n            e.printstacktrace();\n        }\n        return false;\n    }\n}\n\n\nå½ä½ ç¨ java æ¥å£°æ bean çæ¶åï¼å¯ä»¥ä½¿ç¨è¿ä¸ªèªå®ä¹æ¡ä»¶ç±»ï¼\n\n@conditional(jdbctemplatecondition.class)\n@service\npublic myservice service() {\n    ......\n}\n\n\nè¿ä¸ªä¾å­ä¸­åªæå½jdbctemplateconditionç±»çæ¡ä»¶æç«æ¶æä¼åå»º myservice è¿ä¸ª beanãä¹å°±æ¯è¯´ myservice è¿ bean çåå»ºæ¡ä»¶æ¯classpathéé¢åå«jdbctemplateï¼å¦åè¿ä¸ª bean çå£°æå°±ä¼è¢«å¿½ç¥æã\n\nspring bootå®ä¹äºå¾å¤æè¶£çæ¡ä»¶ï¼å¹¶æä»ä»¬è¿ç¨å°äºéç½®ç±»ä¸ï¼è¿äºéç½®ç±»ææäºspring bootçèªå¨éç½®çåºç¡ãspring bootè¿ç¨æ¡ä»¶åéç½®çæ¹æ³æ¯ï¼å®ä¹å¤ä¸ªç¹æ®çæ¡ä»¶åæ³¨è§£ï¼å¹¶å°å®ä»¬ç¨å°éç½®ç±»ä¸ãä¸é¢ååºäºspring bootæä¾çé¨åæ¡ä»¶åæ³¨è§£ï¼\n\næ¡ä»¶åæ³¨è§£                             éç½®çææ¡ä»¶\n@conditionalonbean                éç½®äºæä¸ªç¹å® bean\n@conditionalonmissingbean         æ²¡æéç½®ç¹å®ç bean\n@conditionalonclass               classpath éææå®çç±»\n@conditionalonmissingclass        classpath éæ²¡ææå®çç±»\n@conditionalonexpression          ç»å®ç spring expression language è¡¨è¾¾å¼è®¡ç®ç»æä¸º true\n@conditionalonjava                java ççæ¬å¹éç¹å®ææèä¸ä¸ªèå´å¼\n@conditionalonproperty            æå®çéç½®å±æ§è¦æä¸ä¸ªæç¡®çå¼\n@conditionalonresource            classpath éææå®çèµæº\n@conditionalonwebapplication      è¿æ¯ä¸ä¸ª web åºç¨ç¨åº\n@conditionalonnotwebapplication   è¿ä¸æ¯ä¸ä¸ª web åºç¨ç¨åº\n\n\n# 2.5ã@configurationproperties ä¸@enableconfigurationproperties\n\nå½æäºå±æ§çå¼éè¦éç½®çæ¶åï¼æä»¬ä¸è¬ä¼å¨application.propertiesæä»¶ä¸­æ°å»ºéç½®é¡¹ï¼ç¶åå¨ bean ä¸­ä½¿ç¨@valueæ³¨è§£æ¥è·åéç½®çå¼ï¼æ¯å¦ä¸é¢éç½®æ°æ®æºçä»£ç ã\n\n// jdbc config\njdbc.mysql.url=jdbc:mysql://localhost:3306/sampledb\njdbc.mysql.username=root\njdbc.mysql.password=123456\n......\n\n// éç½®æ°æ®æº\n@configuration\npublic class hikaridatasourceconfiguration {\n\n    @value("jdbc.mysql.url")\n    public string url;\n    @value("jdbc.mysql.username")\n    public string user;\n    @value("jdbc.mysql.password")\n    public string password;\n\n    @bean\n    public hikaridatasource datasource() {\n        hikariconfig hikariconfig = new hikariconfig();\n        hikariconfig.setjdbcurl(url);\n        hikariconfig.setusername(user);\n        hikariconfig.setpassword(password);\n        // çç¥é¨åä»£ç \n        return new hikaridatasource(hikariconfig);\n    }\n}\n\n\nä½¿ç¨@valueæ³¨è§£æ³¨å¥çå±æ§éå¸¸é½æ¯è¾ç®åï¼å¦æåä¸ä¸ªéç½®å¨å¤ä¸ªå°æ¹ä½¿ç¨ï¼ä¹å­å¨ä¸æ¹ä¾¿ç»´æ¤çé®é¢ï¼èèä¸ï¼å¦ææå åä¸ªå°æ¹å¨ä½¿ç¨æä¸ªéç½®ï¼èç°å¨ä½ æ³æ¹ä¸åå­ï¼ä½ æ¹æä¹åï¼ï¼ãå¯¹äºæ´ä¸ºå¤æçéç½®ï¼spring boot æä¾äºæ´ä¼éçå®ç°æ¹å¼ï¼é£å°±æ¯@configurationpropertiesæ³¨è§£ãæä»¬å¯ä»¥éè¿ä¸é¢çæ¹å¼æ¥æ¹åä¸é¢çä»£ç ï¼\n\n@component\n//  è¿å¯ä»¥éè¿@propertysource("classpath:jdbc.properties")æ¥æå®éç½®æä»¶\n@configurationproperties("jdbc.mysql")\n// åç¼=jdbc.mysqlï¼ä¼å¨éç½®æä»¶ä¸­å¯»æ¾jdbc.mysql.*çéç½®é¡¹\npulic class jdbcconfig {\n    public string url;\n    public string username;\n    public string password;\n}\n\n@configuration\npublic class hikaridatasourceconfiguration {\n\n    @autowired\n    public jdbcconfig config;\n\n    @bean\n    public hikaridatasource datasource() {\n        hikariconfig hikariconfig = new hikariconfig();\n        hikariconfig.setjdbcurl(config.url);\n        hikariconfig.setusername(config.username);\n        hikariconfig.setpassword(config.password);\n        // çç¥é¨åä»£ç \n        return new hikaridatasource(hikariconfig);\n    }\n}\n\n\n@configurationpropertieså¯¹äºæ´ä¸ºå¤æçéç½®ï¼å¤çèµ·æ¥ä¹æ¯å¾å¿åºæï¼æ¯å¦æå¦ä¸éç½®æä»¶ï¼\n\n#app\napp.menus[0].title=home\napp.menus[0].name=home\napp.menus[0].path=/\napp.menus[1].title=login\napp.menus[1].name=login\napp.menus[1].path=/login\n\napp.compiler.timeout=5\napp.compiler.output-folder=/temp/\n\napp.error=/error/\n\n\nå¯ä»¥å®ä¹å¦ä¸éç½®ç±»æ¥æ¥æ¶è¿äºå±æ§\n\n@component\n@configurationproperties("app")\npublic class appproperties {\n\n    public string error;\n    public list<menu> menus = new arraylist<>();\n    public compiler compiler = new compiler();\n\n    public static class menu {\n        public string name;\n        public string path;\n        public string title;\n    }\n\n    public static class compiler {\n        public string timeout;\n        public string outputfolder;\n    }\n}\n\n\n@enableconfigurationpropertiesæ³¨è§£è¡¨ç¤ºå¯¹@configurationpropertiesçååµæ¯æï¼é»è®¤ä¼å°å¯¹åº properties class ä½ä¸º bean æ³¨å¥ç ioc å®¹å¨ä¸­ï¼å³å¨ç¸åºç properties ç±»ä¸ä¸ç¨å @componentæ³¨è§£ã\n\n\n# ä¸ãåéå¦æ³¥ï¼springfactoriesloader è¯¦è§£\n\njvm æä¾äº 3 ç§ç±»å è½½å¨ï¼bootstrapclassloaderãextclassloaderãappclassloaderåå«å è½½ java æ ¸å¿ç±»åºãæ©å±ç±»åºä»¥ååºç¨çç±»è·¯å¾(classpath)ä¸çç±»åºãjvm éè¿åäº²å§æ´¾æ¨¡åè¿è¡ç±»çå è½½ï¼æä»¬ä¹å¯ä»¥éè¿ç»§æ¿java.lang.classloaderå®ç°èªå·±çç±»å è½½å¨ã\n\nä½ä¸ºåäº²å§æ´¾æ¨¡åï¼å½ä¸ä¸ªç±»å è½½å¨æ¶å°ç±»å è½½ä»»å¡æ¶ï¼ä¼åäº¤ç»èªå·±çç¶å è½½å¨å»å®æï¼å æ­¤æç»å è½½ä»»å¡é½ä¼ä¼ éå°æé¡¶å±ç bootstrapclassloaderï¼åªæå½ç¶å è½½å¨æ æ³å®æå è½½ä»»å¡æ¶ï¼æä¼å°è¯èªå·±æ¥å è½½ã\n\néç¨åäº²å§æ´¾æ¨¡åçä¸ä¸ªå¥½å¤æ¯ä¿è¯ä½¿ç¨ä¸åç±»å è½½å¨æç»å¾å°çé½æ¯åä¸ä¸ªå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥ä¿è¯ java æ ¸å¿åºçç±»åå®å¨ï¼æ¯å¦ï¼å è½½ä½äº rt.jar åä¸­çjava.lang.objectç±»ï¼ä¸ç®¡æ¯åªä¸ªå è½½å¨å è½½è¿ä¸ªç±»ï¼æç»é½æ¯å§æç»é¡¶å±ç bootstrapclassloader æ¥å è½½çï¼è¿æ ·å°±å¯ä»¥ä¿è¯ä»»ä½çç±»å è½½å¨æç»å¾å°çé½æ¯åæ ·ä¸ä¸ª object å¯¹è±¡ãæ¥ç classloader çæºç ï¼å¯¹åäº²å§æ´¾æ¨¡åä¼ææ´ç´è§çè®¤è¯ï¼\n\nprotected class<?> loadclass(string name, boolean resolve) {\n    synchronized (getclassloadinglock(name)) {\n    // é¦åï¼æ£æ¥è¯¥ç±»æ¯å¦å·²ç»è¢«å è½½ï¼å¦æä»jvmç¼å­ä¸­æ¾å°è¯¥ç±»ï¼åç´æ¥è¿å\n    class<?> c = findloadedclass(name);\n    if (c == null) {\n        try {\n            // éµå¾ªåäº²å§æ´¾çæ¨¡åï¼é¦åä¼éè¿éå½ä»ç¶å è½½å¨å¼å§æ¾ï¼\n            // ç´å°ç¶ç±»å è½½å¨æ¯bootstrapclassloaderä¸ºæ­¢\n            if (parent != null) {\n                c = parent.loadclass(name, false);\n            } else {\n                c = findbootstrapclassornull(name);\n            }\n        } catch (classnotfoundexception e) {}\n        if (c == null) {\n            // å¦æè¿æ¾ä¸å°ï¼å°è¯éè¿findclassæ¹æ³å»å¯»æ¾\n            // findclassæ¯çç»å¼åèèªå·±å®ç°çï¼ä¹å°±æ¯è¯´\n            // èªå®ä¹ç±»å è½½å¨æ¶ï¼éåæ­¤æ¹æ³å³å¯\n           c = findclass(name);\n        }\n    }\n    if (resolve) {\n        resolveclass(c);\n    }\n    return c;\n    }\n}\n\n\nä½åäº²å§æ´¾æ¨¡åå¹¶ä¸è½è§£å³ææçç±»å è½½å¨é®é¢ï¼æ¯å¦ï¼java æä¾äºå¾å¤æå¡æä¾èæ¥å£(service provider interfaceï¼spi)ï¼åè®¸ç¬¬ä¸æ¹ä¸ºè¿äºæ¥å£æä¾å®ç°ãå¸¸è§ç spi æ jdbcãjndiãjaxp ç­ï¼è¿äº spi çæ¥å£ç±æ ¸å¿ç±»åºæä¾ï¼å´ç±ç¬¬ä¸æ¹å®ç°ï¼è¿æ ·å°±å­å¨ä¸ä¸ªé®é¢ï¼spi çæ¥å£æ¯ java æ ¸å¿åºçä¸é¨åï¼æ¯ç± bootstrapclassloader å è½½çï¼spi å®ç°ç java ç±»ä¸è¬æ¯ç± appclassloader æ¥å è½½çãbootstrapclassloader æ¯æ æ³æ¾å° spi çå®ç°ç±»çï¼å ä¸ºå®åªå è½½ java çæ ¸å¿åºãå®ä¹ä¸è½ä»£çç» appclassloaderï¼å ä¸ºå®æ¯æé¡¶å±çç±»å è½½å¨ãä¹å°±æ¯è¯´ï¼åäº²å§æ´¾æ¨¡åå¹¶ä¸è½è§£å³è¿ä¸ªé®é¢ã\n\nçº¿ç¨ä¸ä¸æç±»å è½½å¨(contextclassloader)æ­£å¥½è§£å³äºè¿ä¸ªé®é¢ãä»åç§°ä¸çï¼å¯è½ä¼è¯¯è§£ä¸ºå®æ¯ä¸ç§æ°çç±»å è½½å¨ï¼å®éä¸ï¼å®ä»ä»æ¯ thread ç±»çä¸ä¸ªåéèå·²ï¼å¯ä»¥éè¿setcontextclassloader(classloader cl)ågetcontextclassloader()æ¥è®¾ç½®åè·åè¯¥å¯¹è±¡ãå¦æä¸åä»»ä½çè®¾ç½®ï¼java åºç¨ççº¿ç¨çä¸ä¸æç±»å è½½å¨é»è®¤å°±æ¯ appclassloaderãå¨æ ¸å¿ç±»åºä½¿ç¨ spi æ¥å£æ¶ï¼ä¼ éçç±»å è½½å¨ä½¿ç¨çº¿ç¨ä¸ä¸æç±»å è½½å¨ï¼å°±å¯ä»¥æåçå è½½å° spi å®ç°çç±»ãçº¿ç¨ä¸ä¸æç±»å è½½å¨å¨å¾å¤ spi çå®ç°ä¸­é½ä¼ç¨å°ãä½å¨ jdbc ä¸­ï¼ä½ å¯è½ä¼çå°ä¸ç§æ´ç´æ¥çå®ç°æ¹å¼ï¼æ¯å¦ï¼jdbc é©±å¨ç®¡çjava.sql.driverä¸­çloadinitialdrivers()æ¹æ³ä¸­ï¼ä½ å¯ä»¥ç´æ¥çå° jdk æ¯å¦ä½å è½½é©±å¨çï¼\n\nfor (string adriver : driverslist) {\n    try {\n        // ç´æ¥ä½¿ç¨appclassloader\n        class.forname(adriver, true, classloader.getsystemclassloader());\n    } catch (exception ex) {\n        println("drivermanager.initialize: load failed: " + ex);\n    }\n}\n\n\nå¶å®è®²è§£çº¿ç¨ä¸ä¸æç±»å è½½å¨ï¼æä¸»è¦æ¯è®©å¤§å®¶å¨çå°thread.currentthread().getclassloader()åthread.currentthread().getcontextclassloader()æ¶ä¸ä¼ä¸è¸æµé¼ï¼è¿ä¸¤èé¤äºå¨è®¸å¤åºå±æ¡æ¶ä¸­åå¾ç classloader å¯è½ä¼ææä¸åå¤ï¼å¶ä»å¤§å¤æ°ä¸å¡åºæ¯ä¸é½æ¯ä¸æ ·çï¼å¤§å®¶åªè¦ç¥éå®æ¯ä¸ºäºè§£å³ä»ä¹é®é¢èå­å¨çå³å¯ã\n\nç±»å è½½å¨é¤äºå è½½ class å¤ï¼è¿æä¸ä¸ªéå¸¸éè¦åè½ï¼å°±æ¯å è½½èµæºï¼å®å¯ä»¥ä» jar åä¸­è¯»åä»»ä½èµæºæä»¶ï¼æ¯å¦ï¼classloader.getresources(string name)æ¹æ³å°±æ¯ç¨äºè¯»å jar åä¸­çèµæºæä»¶ï¼å¶ä»£ç å¦ä¸ï¼\n\npublic enumeration<url> getresources(string name) throws ioexception {\n    enumeration<url>[] tmp = (enumeration<url>[]) new enumeration<?>[2];\n    if (parent != null) {\n        tmp[0] = parent.getresources(name);\n    } else {\n        tmp[0] = getbootstrapresources(name);\n    }\n    tmp[1] = findresources(name);\n    return new compoundenumeration<>(tmp);\n}\n\n\næ¯ä¸æ¯è§å¾æç¹ç¼çï¼ä¸éï¼å®çé»è¾å¶å®è·ç±»å è½½çé»è¾æ¯ä¸æ ·çï¼é¦åå¤æ­ç¶ç±»å è½½å¨æ¯å¦ä¸ºç©ºï¼ä¸ä¸ºç©ºåå§æç¶ç±»å è½½å¨æ§è¡èµæºæ¥æ¾ä»»å¡ï¼ç´å° bootstrapclassloaderï¼æåæè½®å°èªå·±æ¥æ¾ãèä¸åçç±»å è½½å¨è´è´£æ«æä¸åè·¯å¾ä¸ç jar åï¼å°±å¦åå è½½ class ä¸æ ·ï¼æåä¼æ«æææç jar åï¼æ¾å°ç¬¦åæ¡ä»¶çèµæºæä»¶ã\n\nç±»å è½½å¨çfindresources(name)æ¹æ³ä¼éåå¶è´è´£å è½½çææ jar åï¼æ¾å° jar åä¸­åç§°ä¸º name çèµæºæä»¶ï¼è¿éçèµæºå¯ä»¥æ¯ä»»ä½æä»¶ï¼çè³æ¯.class æä»¶ï¼æ¯å¦ä¸é¢çç¤ºä¾ï¼ç¨äºæ¥æ¾ array.class æä»¶ï¼\n\n// å¯»æ¾array.classæä»¶\npublic static void main(string[] args) throws exception{\n    // array.classçå®æ´è·¯å¾\n    string name = "java/sql/array.class";\n    enumeration<url> urls = thread.currentthread().getcontextclassloader().getresources(name);\n    while (urls.hasmoreelements()) {\n        url url = urls.nextelement();\n        system.out.println(url.tostring());\n    }\n}\n\n\nè¿è¡åå¯ä»¥å¾å°å¦ä¸ç»æï¼\n\n$java_home/jre/lib/rt.jar!/java/sql/array.class\n\n\næ ¹æ®èµæºæä»¶ç urlï¼å¯ä»¥æé ç¸åºçæä»¶æ¥è¯»åèµæºåå®¹ã\n\nçå°è¿éï¼ä½ å¯è½ä¼æå°æºå¥æªçï¼ä½ ä¸æ¯è¦è¯¦è§£springfactoriesloaderåï¼ä¸æ¥è®²äºä¸å  classloader æ¯å ä¸ªææï¼çä¸å®çæºç ä½ å°±ç¥éäºï¼\n\npublic static final string factories_resource_location = "meta-inf/spring.factories";\n// spring.factoriesæä»¶çæ ¼å¼ä¸ºï¼key=value1,value2,value3\n// ä»ææçjaråä¸­æ¾å°meta-inf/spring.factoriesæä»¶\n// ç¶åä»æä»¶ä¸­è§£æåºkey=factoryclassç±»åç§°çæævalueå¼\npublic static list<string> loadfactorynames(class<?> factoryclass, classloader classloader) {\n    string factoryclassname = factoryclass.getname();\n    // åå¾èµæºæä»¶çurl\n    enumeration<url> urls = (classloader != null ? classloader.getresources(factories_resource_location) : classloader.getsystemresources(factories_resource_location));\n    list<string> result = new arraylist<string>();\n    // éåææçurl\n    while (urls.hasmoreelements()) {\n        url url = urls.nextelement();\n        // æ ¹æ®èµæºæä»¶urlè§£æpropertiesæä»¶\n        properties properties = propertiesloaderutils.loadproperties(new urlresource(url));\n        string factoryclassnames = properties.getproperty(factoryclassname);\n        // ç»è£æ°æ®ï¼å¹¶è¿å\n        result.addall(arrays.aslist(stringutils.commadelimitedlisttostringarray(factoryclassnames)));\n    }\n    return result;\n}\n\n\næäºåé¢å³äº classloader çç¥è¯ï¼åæ¥çè§£è¿æ®µä»£ç ï¼æ¯ä¸æ¯æè§è±ç¶å¼æï¼ä»classpathä¸çæ¯ä¸ª jar åä¸­æå¯»ææmeta-inf/spring.factorieséç½®æä»¶ï¼ç¶åå°è§£æ properties æä»¶ï¼æ¾å°æå®åç§°çéç½®åè¿åãéè¦æ³¨æçæ¯ï¼å¶å®è¿éä¸ä»ä»æ¯ä¼å» classpath è·¯å¾ä¸æ¥æ¾ï¼ä¼æ«æææè·¯å¾ä¸ç jar åï¼åªä¸è¿è¿ä¸ªæä»¶åªä¼å¨ classpath ä¸ç jar åä¸­ãæ¥ç®åçä¸spring.factoriesæä»¶çåå®¹å§ï¼\n\n// æ¥èª org.springframework.boot.autoconfigureä¸çmeta-inf/spring.factories\n// enableautoconfigurationåæä¼è®²å°ï¼å®ç¨äºå¼å¯spring bootèªå¨éç½®åè½\norg.springframework.boot.autoconfigure.enableautoconfiguration=\\\norg.springframework.boot.autoconfigure.admin.springapplicationadminjmxautoconfiguration,\\\norg.springframework.boot.autoconfigure.aop.aopautoconfiguration,\\\norg.springframework.boot.autoconfigure.amqp.rabbitautoconfiguration\\\n\n\næ§è¡loadfactorynames(enableautoconfiguration.class, classloader)åï¼å¾å°å¯¹åºçä¸ç»@configurationç±»ï¼ æä»¬å°±å¯ä»¥éè¿åå°å®ä¾åè¿äºç±»ç¶åæ³¨å¥å° ioc å®¹å¨ä¸­ï¼æåå®¹å¨éå°±æäºä¸ç³»åæ æ³¨äº@configurationç javaconfig å½¢å¼çéç½®ç±»ã\n\nè¿å°±æ¯springfactoriesloaderï¼å®æ¬è´¨ä¸å±äº spring æ¡æ¶ç§æçä¸ç§æ©å±æ¹æ¡ï¼ç±»ä¼¼äº spiï¼spring boot å¨ spring åºç¡ä¸çå¾å¤æ ¸å¿åè½é½æ¯åºäºæ­¤ï¼å¸æå¤§å®¶å¯ä»¥çè§£ã\n\n\n# åãå¦ä¸ä»¶æ­¦å¨ï¼spring å®¹å¨çäºä»¶çå¬æºå¶\n\nè¿å»ï¼äºä»¶çå¬æºå¶å¤ç¨äºå¾å½¢çé¢ç¼ç¨ï¼æ¯å¦ï¼ç¹å»æé®ãå¨ææ¬æ¡è¾å¥åå®¹ç­æä½è¢«ç§°ä¸ºäºä»¶ï¼èå½äºä»¶è§¦åæ¶ï¼åºç¨ç¨åºä½åºä¸å®çååºåè¡¨ç¤ºåºç¨çå¬äºè¿ä¸ªäºä»¶ï¼èå¨æå¡å¨ç«¯ï¼äºä»¶ççå¬æºå¶æ´å¤çç¨äºå¼æ­¥éç¥ä»¥åçæ§åå¼å¸¸å¤çãjava æä¾äºå®ç°äºä»¶çå¬æºå¶çä¸¤ä¸ªåºç¡ç±»ï¼èªå®ä¹äºä»¶ç±»åæ©å±èªjava.util.eventobjectãäºä»¶ççå¬å¨æ©å±èªjava.util.eventlistenerãæ¥çä¸ä¸ªç®åçå®ä¾ï¼ç®åççæ§ä¸ä¸ªæ¹æ³çèæ¶ã\n\né¦åå®ä¹äºä»¶ç±»åï¼éå¸¸çåæ³æ¯æ©å± eventobjectï¼éçäºä»¶çåçï¼ç¸åºçç¶æéå¸¸é½å°è£å¨æ­¤ç±»ä¸­ï¼\n\npublic class methodmonitorevent extends eventobject {\n    // æ¶é´æ³ï¼ç¨äºè®°å½æ¹æ³å¼å§æ§è¡çæ¶é´\n    public long timestamp;\n\n    public methodmonitorevent(object source) {\n        super(source);\n    }\n}\n\n\näºä»¶åå¸ä¹åï¼ç¸åºççå¬å¨å³å¯å¯¹è¯¥ç±»åçäºä»¶è¿è¡å¤çï¼æä»¬å¯ä»¥å¨æ¹æ³å¼å§æ§è¡ä¹ååå¸ä¸ä¸ª begin äºä»¶ï¼å¨æ¹æ³æ§è¡ç»æä¹ååå¸ä¸ä¸ª end äºä»¶ï¼ç¸åºå°ï¼äºä»¶çå¬å¨éè¦æä¾æ¹æ³å¯¹è¿ä¸¤ç§æåµä¸æ¥æ¶å°çäºä»¶è¿è¡å¤çï¼\n\n// 1ãå®ä¹äºä»¶çå¬æ¥å£\npublic interface methodmonitoreventlistener extends eventlistener {\n    // å¤çæ¹æ³æ§è¡ä¹ååå¸çäºä»¶\n    public void onmethodbegin(methodmonitorevent event);\n    // å¤çæ¹æ³ç»ææ¶åå¸çäºä»¶\n    public void onmethodend(methodmonitorevent event);\n}\n// 2ãäºä»¶çå¬æ¥å£çå®ç°ï¼å¦ä½å¤ç\npublic class abstractmethodmonitoreventlistener implements methodmonitoreventlistener {\n\n    @override\n    public void onmethodbegin(methodmonitorevent event) {\n        // è®°å½æ¹æ³å¼å§æ§è¡æ¶çæ¶é´\n        event.timestamp = system.currenttimemillis();\n    }\n\n    @override\n    public void onmethodend(methodmonitorevent event) {\n        // è®¡ç®æ¹æ³èæ¶\n        long duration = system.currenttimemillis() - event.timestamp;\n        system.out.println("èæ¶ï¼" + duration);\n    }\n}\n\n\näºä»¶çå¬å¨æ¥å£éå¯¹ä¸åçäºä»¶åå¸å®éæä¾ç¸åºçå¤çæ¹æ³å®ä¹ï¼æéè¦çæ¯ï¼å¶æ¹æ³åªæ¥æ¶ methodmonitorevent åæ°ï¼è¯´æè¿ä¸ªçå¬å¨ç±»åªè´è´£çå¬å¨å¯¹åºçäºä»¶å¹¶è¿è¡å¤çãæäºäºä»¶åçå¬å¨ï¼å©ä¸çå°±æ¯åå¸äºä»¶ï¼ç¶åè®©ç¸åºççå¬å¨çå¬å¹¶å¤çãéå¸¸æåµï¼æä»¬ä¼æä¸ä¸ªäºä»¶åå¸èï¼å®æ¬èº«ä½ä¸ºäºä»¶æºï¼å¨åéçæ¶æºï¼å°ç¸åºçäºä»¶åå¸ç»å¯¹åºçäºä»¶çå¬å¨ï¼\n\npublic class methodmonitoreventpublisher {\n\n    private list<methodmonitoreventlistener> listeners = new arraylist<methodmonitoreventlistener>();\n\n    public void methodmonitor() {\n        methodmonitorevent eventobject = new methodmonitorevent(this);\n        publishevent("begin",eventobject);\n        // æ¨¡ææ¹æ³æ§è¡ï¼ä¼ç 5ç§é\n        timeunit.seconds.sleep(5);\n        publishevent("end",eventobject);\n\n    }\n\n    private void publishevent(string status,methodmonitorevent event) {\n        // é¿åå¨äºä»¶å¤çæé´ï¼çå¬å¨è¢«ç§»é¤ï¼è¿éä¸ºäºå®å¨åä¸ä¸ªå¤å¶æä½\n        list<methodmonitoreventlistener> copylisteners = â¥ new arraylist<methodmonitoreventlistener>(listeners);\n        for (methodmonitoreventlistener listener : copylisteners) {\n            if ("begin".equals(status)) {\n                listener.onmethodbegin(event);\n            } else {\n                listener.onmethodend(event);\n            }\n        }\n    }\n\n    public static void main(string[] args) {\n        methodmonitoreventpublisher publisher = new methodmonitoreventpublisher();\n        publisher.addeventlistener(new abstractmethodmonitoreventlistener());\n        publisher.methodmonitor();\n    }\n    // çç¥å®ç°\n    public void addeventlistener(methodmonitoreventlistener listener) {}\n    public void removeeventlistener(methodmonitoreventlistener listener) {}\n    public void removealllisteners() {}\n\n\nå¯¹äºäºä»¶åå¸èï¼äºä»¶æºï¼éå¸¸éè¦å³æ³¨ä¸¤ç¹ï¼\n\n 1. å¨åéçæ¶æºåå¸äºä»¶ãæ­¤ä¾ä¸­ç methodmonitor()æ¹æ³æ¯äºä»¶åå¸çæºå¤´ï¼å¶å¨æ¹æ³æ§è¡ä¹ååç»æä¹åä¸¤ä¸ªæ¶é´ç¹åå¸ methodmonitorevent äºä»¶ï¼æ¯ä¸ªæ¶é´ç¹åå¸çäºä»¶é½ä¼ä¼ ç»ç¸åºççå¬å¨è¿è¡å¤çãå¨å·ä½å®ç°æ¶éè¦æ³¨æçæ¯ï¼äºä»¶åå¸æ¯é¡ºåºæ§è¡ï¼ä¸ºäºä¸å½±åå¤çæ§è½ï¼äºä»¶çå¬å¨çå¤çé»è¾åºå°½éç®åã\n 2. äºä»¶çå¬å¨çç®¡çãpublisher ç±»ä¸­æä¾äºäºä»¶çå¬å¨çæ³¨åä¸ç§»é¤æ¹æ³ï¼è¿æ ·å®¢æ·ç«¯å¯ä»¥æ ¹æ®å®éæåµå³å®æ¯å¦éè¦æ³¨åæ°ççå¬å¨æèç§»é¤æä¸ªçå¬å¨ãå¦æè¿éæ²¡ææä¾ remove æ¹æ³ï¼é£ä¹æ³¨åççå¬å¨ç¤ºä¾å°ä¸ç´è¢« methodmonitoreventpublisher å¼ç¨ï¼å³ä½¿å·²ç»åºå¼ä¸ç¨äºï¼ä¹ä¾ç¶å¨åå¸èççå¬å¨åè¡¨ä¸­ï¼è¿ä¼å¯¼è´éæ§çåå­æ³æ¼ã\n\n# spring å®¹å¨åçäºä»¶çå¬æºå¶\n\nspring ç applicationcontext å®¹å¨åé¨ä¸­çææäºä»¶ç±»ååç»§æ¿èªorg.springframework.context.applicationeventï¼å®¹å¨ä¸­çææçå¬å¨é½å®ç°org.springframework.context.applicationlisteneræ¥å£ï¼å¹¶ä¸ä»¥ bean çå½¢å¼æ³¨åå¨å®¹å¨ä¸­ãä¸æ¦å¨å®¹å¨ååå¸ applicationevent åå¶å­ç±»åçäºä»¶ï¼æ³¨åå°å®¹å¨ç applicationlistener å°±ä¼å¯¹è¿äºäºä»¶è¿è¡å¤çã\n\nä½ åºè¯¥å·²ç»çå°æ¯æä¹åäºäºã\n\napplicationevent ç»§æ¿èª eventobjectï¼spring æä¾äºä¸äºé»è®¤çå®ç°ï¼æ¯å¦ï¼contextclosedeventè¡¨ç¤ºå®¹å¨å¨å³å°å³é­æ¶åå¸çäºä»¶ç±»åï¼contextrefreshedeventè¡¨ç¤ºå®¹å¨å¨åå§åæèå·æ°çæ¶ååå¸çäºä»¶ç±»å......\n\nå®¹å¨åé¨ä½¿ç¨ applicationlistener ä½ä¸ºäºä»¶çå¬å¨æ¥å£å®ä¹ï¼å®ç»§æ¿èª eventlistenerãapplicationcontext å®¹å¨å¨å¯å¨æ¶ï¼ä¼èªå¨è¯å«å¹¶å è½½ eventlistener ç±»åç beanï¼ä¸æ¦å®¹å¨åæäºä»¶åå¸ï¼å°éç¥è¿äºæ³¨åå°å®¹å¨ç eventlistenerã\n\napplicationcontext æ¥å£ç»§æ¿äº applicationeventpublisher æ¥å£ï¼è¯¥æ¥å£æä¾äºvoid publishevent(applicationevent event)æ¹æ³å®ä¹ï¼ä¸é¾çåºï¼applicationcontext å®¹å¨æå½çå°±æ¯äºä»¶åå¸èçè§è²ãå¦ææå´è¶£å¯ä»¥æ¥çabstractapplicationcontext.publishevent(applicationevent event)æ¹æ³çæºç ï¼applicationcontext å°äºä»¶çåå¸ä»¥åçå¬å¨çç®¡çå·¥ä½å§æç»applicationeventmulticasteræ¥å£çå®ç°ç±»ãå¨å®¹å¨å¯å¨æ¶ï¼ä¼æ£æ¥å®¹å¨åæ¯å¦å­å¨åä¸º applicationeventmulticaster ç applicationeventmulticaster å¯¹è±¡å®ä¾ãå¦ææå°±ä½¿ç¨å¶æä¾çå®ç°ï¼æ²¡æå°±é»è®¤åå§åä¸ä¸ª simpleapplicationeventmulticaster ä½ä¸ºå®ç°ã\n\næåï¼å¦ææä»¬ä¸å¡éè¦å¨å®¹å¨åé¨åå¸äºä»¶ï¼åªéè¦ä¸ºå¶æ³¨å¥ applicationeventpublisher ä¾èµå³å¯ï¼å®ç° applicationeventpublisheraware æ¥å£æè applicationcontextaware æ¥å£(aware æ¥å£ç¸å³åå®¹è¯·åé¡¾ä¸æ)ã\n\n\n# äºãåºç¥å¥åï¼æ­ç§èªå¨éç½®åç\n\nå¸åç spring boot åºç¨çå¯å¨ç±»ä¸è¬åä½äºsrc/main/javaæ ¹è·¯å¾ä¸ï¼æ¯å¦moonapplicationç±»ï¼\n\n@springbootapplication\npublic class moonapplication {\n\n    public static void main(string[] args) {\n        springapplication.run(moonapplication.class, args);\n    }\n}\n\n\nå¶ä¸­@springbootapplicationå¼å¯ç»ä»¶æ«æåèªå¨éç½®ï¼èspringapplication.runåè´è´£å¯å¨å¼å¯¼åºç¨ç¨åºã@springbootapplicationæ¯ä¸ä¸ªå¤åannotationï¼å®å°ä¸ä¸ªæç¨çæ³¨è§£ç»åå¨ä¸èµ·ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.runtime)\n@documented\n@inherited\n@springbootconfiguration\n@enableautoconfiguration\n@componentscan(excludefilters = {\n        @filter(type = filtertype.custom, classes = typeexcludefilter.class),\n        @filter(type = filtertype.custom, classes = autoconfigurationexcludefilter.class) })\npublic @interface springbootapplication {\n    // ......\n}\n\n\n@springbootconfigurationå°±æ¯@configurationï¼å®æ¯ spring æ¡æ¶çæ³¨è§£ï¼æ æè¯¥ç±»æ¯ä¸ä¸ªjavaconfigéç½®ç±»ãè@componentscanå¯ç¨ç»ä»¶æ«æï¼åæå·²ç»è¯¦ç»è®²è§£è¿ï¼è¿éçéå³æ³¨@enableautoconfigurationã\n\n@enableautoconfigurationæ³¨è§£è¡¨ç¤ºå¼å¯ spring boot èªå¨éç½®åè½ï¼spring boot ä¼æ ¹æ®åºç¨çä¾èµãèªå®ä¹ç beanãclasspath ä¸ææ²¡ææä¸ªç±» ç­ç­å ç´ æ¥çæµä½ éè¦ç beanï¼ç¶åæ³¨åå° ioc å®¹å¨ä¸­ãé£@enableautoconfigurationæ¯å¦ä½æ¨ç®åºä½ çéæ±ï¼é¦åçä¸å®çå®ä¹ï¼\n\n@target(elementtype.type)\n@retention(retentionpolicy.runtime)\n@documented\n@inherited\n@autoconfigurationpackage\n@import(enableautoconfigurationimportselector.class)\npublic @interface enableautoconfiguration {\n    // ......\n}\n\n\nä½ çå³æ³¨ç¹åºè¯¥å¨@import(enableautoconfigurationimportselector.class)ä¸äºï¼åæè¯´è¿ï¼@importæ³¨è§£ç¨äºå¯¼å¥ç±»ï¼å¹¶å°è¿ä¸ªç±»ä½ä¸ºä¸ä¸ª bean çå®ä¹æ³¨åå°å®¹å¨ä¸­ï¼è¿éå®å°æenableautoconfigurationimportselectorä½ä¸º bean æ³¨å¥å°å®¹å¨ä¸­ï¼èè¿ä¸ªç±»ä¼å°ææç¬¦åæ¡ä»¶ç@configuration éç½®é½å è½½å°å®¹å¨ä¸­ï¼ççå®çä»£ç ï¼\n\npublic string[] selectimports(annotationmetadata annotationmetadata) {\n    // çç¥äºå¤§é¨åä»£ç ï¼ä¿çä¸å¥æ ¸å¿ä»£ç \n    // æ³¨æï¼springbootæè¿çæ¬ä¸­ï¼è¿å¥ä»£ç è¢«å°è£å¨ä¸ä¸ªåç¬çæ¹æ³ä¸­\n    // springfactoriesloaderç¸å³ç¥è¯è¯·åèåæ\n    list<string> factories = new arraylist<string>(new linkedhashset<string>(\n        springfactoriesloader.loadfactorynames(enableautoconfiguration.class, this.beanclassloader)));\n}\n\n\nè¿ä¸ªç±»ä¼æ«æææç jar åï¼å°ææç¬¦åæ¡ä»¶ç@configuration éç½®ç±»æ³¨å¥çå®¹å¨ä¸­ï¼ä½ä¸ºç¬¦åæ¡ä»¶ï¼ççmeta-inf/spring.factoriesçæä»¶åå®¹ï¼\n\n// æ¥èª org.springframework.boot.autoconfigureä¸çmeta-inf/spring.factories\n// éç½®çkey = enableautoconfigurationï¼ä¸ä»£ç ä¸­ä¸è´\norg.springframework.boot.autoconfigure.enableautoconfiguration=\\\norg.springframework.boot.autoconfigure.jdbc.datasourceautoconfiguration,\\\norg.springframework.boot.autoconfigure.aop.aopautoconfiguration,\\\norg.springframework.boot.autoconfigure.amqp.rabbitautoconfiguration\\\n.....\n\n\nä»¥datasourceautoconfigurationä¸ºä¾ï¼çç spring boot æ¯å¦ä½èªå¨éç½®çï¼\n\n@configuration\n@conditionalonclass({ datasource.class, embeddeddatabasetype.class })\n@enableconfigurationproperties(datasourceproperties.class)\n@import({ registrar.class, datasourcepoolmetadataprovidersconfiguration.class })\npublic class datasourceautoconfiguration {\n}\n\n\nåå«è¯´ä¸è¯´ï¼\n\n * @conditionalonclass({ datasource.class, embeddeddatabasetype.class })ï¼å½ classpath ä¸­å­å¨ datasource æè embeddeddatabasetype ç±»æ¶æå¯ç¨è¿ä¸ªéç½®ï¼å¦åè¿ä¸ªéç½®å°è¢«å¿½ç¥ã\n * @enableconfigurationproperties(datasourceproperties.class)ï¼å° datasource çé»è®¤éç½®ç±»æ³¨å¥å° ioc å®¹å¨ä¸­ï¼datasourceproperties å®ä¹ä¸ºï¼\n\n// æä¾å¯¹datasourceéç½®ä¿¡æ¯çæ¯æï¼ææçéç½®åç¼ä¸ºï¼spring.datasource\n@configurationproperties(prefix = "spring.datasource")\npublic class datasourceproperties  {\n    private classloader classloader;\n    private environment environment;\n    private string name = "testdb";\n    ......\n}\n\n\n * @import({ registrar.class, datasourcepoolmetadataprovidersconfiguration.class })ï¼å¯¼å¥å¶ä»é¢å¤çéç½®ï¼å°±ä»¥datasourcepoolmetadataprovidersconfigurationä¸ºä¾å§ã\n\n@configuration\npublic class datasourcepoolmetadataprovidersconfiguration {\n\n    @configuration\n    @conditionalonclass(org.apache.tomcat.jdbc.pool.datasource.class)\n    static class tomcatdatasourcepoolmetadataproviderconfiguration {\n        @bean\n        public datasourcepoolmetadataprovider tomcatpooldatasourcemetadataprovider() {\n            .....\n        }\n    }\n  ......\n}\n\n\ndatasourcepoolmetadataprovidersconfiguration æ¯æ°æ®åºè¿æ¥æ± æä¾èçä¸ä¸ªéç½®ç±»ï¼å³ classpath ä¸­å­å¨org.apache.tomcat.jdbc.pool.datasource.classï¼åä½¿ç¨ tomcat-jdbc è¿æ¥æ± ï¼å¦æ classpath ä¸­å­å¨hikaridatasource.classåä½¿ç¨ hikari è¿æ¥æ± ã\n\nè¿éä»æè¿°äº datasourceautoconfiguration çå°å±±ä¸è§ï¼ä½è¶³ä»¥è¯´æ spring boot å¦ä½å©ç¨æ¡ä»¶è¯éç½®æ¥å®ç°èªå¨éç½®çãåé¡¾ä¸ä¸ï¼@enableautoconfigurationä¸­å¯¼å¥äº enableautoconfigurationimportselector ç±»ï¼èè¿ä¸ªç±»çselectimports()éè¿ springfactoriesloader å¾å°äºå¤§éçéç½®ç±»ï¼èæ¯ä¸ä¸ªéç½®ç±»åæ ¹æ®æ¡ä»¶åéç½®æ¥ååºå³ç­ï¼ä»¥å®ç°èªå¨éç½®ã\n\næ´ä¸ªæµç¨å¾æ¸æ°ï¼ä½æ¼äºä¸ä¸ªå¤§é®é¢ï¼enableautoconfigurationimportselector.selectimports()æ¯ä½æ¶æ§è¡çï¼å¶å®è¿ä¸ªæ¹æ³ä¼å¨å®¹å¨å¯å¨è¿ç¨ä¸­æ§è¡ï¼abstractapplicationcontext.refresh()ï¼æ´å¤çç»èå¨ä¸ä¸å°èä¸­è¯´æã\n\n\n# å­ãå¯å¨å¼å¯¼ï¼spring boot åºç¨å¯å¨çç§å¯\n\n\n# 6.1 springapplication åå§å\n\nspringboot æ´ä¸ªå¯å¨æµç¨åä¸ºä¸¤ä¸ªæ­¥éª¤ï¼åå§åä¸ä¸ª springapplication å¯¹è±¡ãæ§è¡è¯¥å¯¹è±¡ç run æ¹æ³ãçä¸ springapplication çåå§åæµç¨ï¼springapplication çæé æ¹æ³ä¸­è°ç¨ initialize(object[] sources)æ¹æ³ï¼å¶ä»£ç å¦ä¸ï¼\n\nprivate void initialize(object[] sources) {\n     if (sources != null && sources.length > 0) {\n         this.sources.addall(arrays.aslist(sources));\n     }\n     // å¤æ­æ¯å¦æ¯webé¡¹ç®\n     this.webenvironment = deducewebenvironment();\n     setinitializers((collection) getspringfactoriesinstances(applicationcontextinitializer.class));\n     setlisteners((collection) getspringfactoriesinstances(applicationlistener.class));\n     // æ¾å°å¥å£ç±»\n     this.mainapplicationclass = deducemainapplicationclass();\n}\n\n\nåå§åæµç¨ä¸­æéè¦çå°±æ¯éè¿ springfactoriesloader æ¾å°spring.factoriesæä»¶ä¸­éç½®çapplicationcontextinitializeråapplicationlistenerä¸¤ä¸ªæ¥å£çå®ç°ç±»åç§°ï¼ä»¥ä¾¿åææé ç¸åºçå®ä¾ãapplicationcontextinitializerçä¸»è¦ç®çæ¯å¨configurableapplicationcontextå refresh ä¹åï¼å¯¹ configurableapplicationcontext å®ä¾åè¿ä¸æ­¥çè®¾ç½®æå¤çãconfigurableapplicationcontext ç»§æ¿èª applicationcontextï¼å¶ä¸»è¦æä¾äºå¯¹ applicationcontext è¿è¡è®¾ç½®çè½åã\n\nå®ç°ä¸ä¸ª applicationcontextinitializer éå¸¸ç®åï¼å ä¸ºå®åªæä¸ä¸ªæ¹æ³ï¼ä½å¤§å¤æ°æåµä¸æä»¬æ²¡æå¿è¦èªå®ä¹ä¸ä¸ª applicationcontextinitializerï¼å³ä¾¿æ¯ spring boot æ¡æ¶ï¼å®é»è®¤ä¹åªæ¯æ³¨åäºä¸¤ä¸ªå®ç°ï¼æ¯ç« spring çå®¹å¨å·²ç»éå¸¸æçåç¨³å®ï¼ä½ æ²¡æå¿è¦æ¥æ¹åå®ã\n\nèapplicationlistenerçç®çå°±æ²¡ä»ä¹å¥½è¯´çäºï¼å®æ¯ spring æ¡æ¶å¯¹ java äºä»¶çå¬æºå¶çä¸ç§æ¡æ¶å®ç°ï¼å·ä½åå®¹å¨åæ spring äºä»¶çå¬æºå¶è¿ä¸ªå°èæè¯¦ç»è®²è§£ãè¿éä¸»è¦è¯´è¯´ï¼å¦æä½ æ³ä¸º spring boot åºç¨æ·»å çå¬å¨ï¼è¯¥å¦ä½å®ç°ï¼\n\nspring boot æä¾ä¸¤ç§æ¹å¼æ¥æ·»å èªå®ä¹çå¬å¨ï¼\n\n * éè¿springapplication.addlisteners(applicationlistener... listeners)æèspringapplication.setlisteners(collection> listeners)ä¸¤ä¸ªæ¹æ³æ¥æ·»å ä¸ä¸ªæèå¤ä¸ªèªå®ä¹çå¬å¨\n * æ¢ç¶ springapplication çåå§åæµç¨ä¸­å·²ç»ä»spring.factoriesä¸­è·åå°applicationlistenerçå®ç°ç±»ï¼é£ä¹æä»¬ç´æ¥å¨èªå·±ç jar åçmeta-inf/spring.factoriesæä»¶ä¸­æ°å¢éç½®å³å¯ï¼\n\norg.springframework.context.applicationlistener=\\\ncn.moondev.listeners.xxxxlistener\\\n\n\nå³äº springapplication çåå§åï¼æä»¬å°±è¯´è¿ä¹å¤ã\n\n\n# 6.2 spring boot å¯å¨æµç¨\n\nspring boot åºç¨çæ´ä¸ªå¯å¨æµç¨é½å°è£å¨ springapplication.run æ¹æ³ä¸­ï¼å¶æ´ä¸ªæµç¨ççæ¯å¤ªé¿å¤ªé¿äºï¼ä½æ¬è´¨ä¸å°±æ¯å¨ spring å®¹å¨å¯å¨çåºç¡ä¸åäºå¤§éçæ©å±ï¼æç§è¿ä¸ªæè·¯æ¥ççæºç ï¼\n\npublic configurableapplicationcontext run(string... args) {\n        stopwatch stopwatch = new stopwatch();\n        stopwatch.start();\n        configurableapplicationcontext context = null;\n        failureanalyzers analyzers = null;\n        configureheadlessproperty();\n        // â \n        springapplicationrunlisteners listeners = getrunlisteners(args);\n        listeners.starting();\n        try {\n            // â¡\n            applicationarguments applicationarguments = new defaultapplicationarguments(args);\n            configurableenvironment environment = prepareenvironment(listeners,applicationarguments);\n            // â¢\n            banner printedbanner = printbanner(environment);\n            // â£\n            context = createapplicationcontext();\n            // â¤\n            analyzers = new failureanalyzers(context);\n            // â¥\n            preparecontext(context, environment, listeners, applicationarguments,printedbanner);\n            // â¦\n            refreshcontext(context);\n            // â§\n            afterrefresh(context, applicationarguments);\n            // â¨\n            listeners.finished(context, null);\n            stopwatch.stop();\n            return context;\n        }\n        catch (throwable ex) {\n            handlerunfailure(context, listeners, analyzers, ex);\n            throw new illegalstateexception(ex);\n        }\n    }\n\n\nâ  éè¿ springfactoriesloader æ¥æ¾å¹¶å è½½ææçspringapplicationrunlistenersï¼éè¿è°ç¨ starting()æ¹æ³éç¥ææç springapplicationrunlistenersï¼åºç¨å¼å§å¯å¨äºãspringapplicationrunlisteners å¶æ¬è´¨ä¸å°±æ¯ä¸ä¸ªäºä»¶åå¸èï¼å®å¨ springboot åºç¨å¯å¨çä¸åæ¶é´ç¹åå¸ä¸ååºç¨äºä»¶ç±»å(applicationevent)ï¼å¦ææåªäºäºä»¶çå¬è(applicationlistener)å¯¹è¿äºäºä»¶æå´è¶£ï¼åå¯ä»¥æ¥æ¶å¹¶ä¸å¤çãè¿è®°å¾åå§åæµç¨ä¸­ï¼springapplication å è½½äºä¸ç³»å applicationlistener åï¼è¿ä¸ªå¯å¨æµç¨ä¸­æ²¡æåç°æåå¸äºä»¶çä»£ç ï¼å¶å®é½å·²ç»å¨ springapplicationrunlisteners è¿å¿å®ç°äºã\n\nç®åçåæä¸ä¸å¶å®ç°æµç¨ï¼é¦åçä¸ springapplicationrunlistener çæºç ï¼\n\npublic interface springapplicationrunlistener {\n\n    // è¿è¡runæ¹æ³æ¶ç«å³è°ç¨æ­¤æ¹æ³ï¼å¯ä»¥ç¨æ·éå¸¸æ©æçåå§åå·¥ä½\n    void starting();\n\n    // environmentåå¤å¥½åï¼å¹¶ä¸applicationcontextåå»ºä¹åè°ç¨\n    void environmentprepared(configurableenvironment environment);\n\n    // applicationcontextåå»ºå¥½åç«å³è°ç¨\n    void contextprepared(configurableapplicationcontext context);\n\n    // applicationcontextå è½½å®æï¼å¨refreshä¹åè°ç¨\n    void contextloaded(configurableapplicationcontext context);\n\n    // å½runæ¹æ³ç»æä¹åè°ç¨\n    void finished(configurableapplicationcontext context, throwable exception);\n\n}\n\n\nspringapplicationrunlistener åªæä¸ä¸ªå®ç°ç±»ï¼eventpublishingrunlistenerãâ  å¤çä»£ç åªä¼è·åå°ä¸ä¸ª eventpublishingrunlistener çå®ä¾ï¼æä»¬æ¥çç starting()æ¹æ³çåå®¹ï¼\n\npublic void starting() {\n    // åå¸ä¸ä¸ªapplicationstartedevent\n    this.initialmulticaster.multicastevent(new applicationstartedevent(this.application, this.args));\n}\n\n\né¡ºçè¿ä¸ªé»è¾ï¼ä½ å¯ä»¥å¨ â¡ å¤çprepareenvironment()æ¹æ³çæºç ä¸­æ¾å°listeners.environmentprepared(environment);å³ springapplicationrunlistener æ¥å£çç¬¬äºä¸ªæ¹æ³ï¼é£ä¸åºä½ ææï¼environmentprepared()ååå¸äºå¦å¤ä¸ä¸ªäºä»¶applicationenvironmentpreparedeventãæ¥ä¸æ¥ä¼åçä»ä¹ï¼å°±ä¸ç¨æå¤è¯´äºå§ã\n\nâ¡ åå»ºå¹¶éç½®å½ååºç¨å°è¦ä½¿ç¨çenvironmentï¼environment ç¨äºæè¿°åºç¨ç¨åºå½åçè¿è¡ç¯å¢ï¼å¶æ½è±¡äºä¸¤ä¸ªæ¹é¢çåå®¹ï¼éç½®æä»¶(profile)åå±æ§(properties)ï¼å¼åç»éªä¸°å¯çåå­¦å¯¹è¿ä¸¤ä¸ªä¸è¥¿ä¸å®ä¸ä¼éçï¼ä¸åçç¯å¢(egï¼çäº§ç¯å¢ãé¢åå¸ç¯å¢)å¯ä»¥ä½¿ç¨ä¸åçéç½®æä»¶ï¼èå±æ§åå¯ä»¥ä»éç½®æä»¶ãç¯å¢åéãå½ä»¤è¡åæ°ç­æ¥æºè·åãå æ­¤ï¼å½ environment åå¤å¥½åï¼å¨æ´ä¸ªåºç¨çä»»ä½æ¶åï¼é½å¯ä»¥ä» environment ä¸­è·åèµæºã\n\næ»ç»èµ·æ¥ï¼â¡ å¤çä¸¤å¥ä»£ç ï¼ä¸»è¦å®æä»¥ä¸å ä»¶äºï¼\n\n * å¤æ­ environment æ¯å¦å­å¨ï¼ä¸å­å¨å°±åå»ºï¼å¦ææ¯ web é¡¹ç®å°±åå»ºstandardservletenvironmentï¼å¦ååå»ºstandardenvironmentï¼\n * éç½® environmentï¼éç½® profile ä»¥å properties\n * è°ç¨ springapplicationrunlistener çenvironmentprepared()æ¹æ³ï¼éç¥äºä»¶çå¬èï¼åºç¨ç environment å·²ç»åå¤å¥½\n\nâ¢ãspringboot åºç¨å¨å¯å¨æ¶ä¼è¾åºè¿æ ·çä¸è¥¿ï¼\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: spring boot ::        (v1.5.6.release)\n\n\nå¦ææ³æè¿ä¸ªä¸è¥¿æ¹æèªå·±çæ¶é¸¦ï¼ä½ å¯ä»¥ç ç©¶ä»¥ä¸ banner çå®ç°ï¼è¿ä¸ªä»»å¡å°±çç»ä½ ä»¬å§ã\n\nâ£ãæ ¹æ®æ¯å¦æ¯ web é¡¹ç®ï¼æ¥åå»ºä¸åç applicationcontext å®¹å¨ã\n\nâ¤ãåå»ºä¸ç³»åfailureanalyzerï¼åå»ºæµç¨ä¾ç¶æ¯éè¿ springfactoriesloader è·åå°ææå®ç° failureanalyzer æ¥å£ç classï¼ç¶åå¨åå»ºå¯¹åºçå®ä¾ãfailureanalyzer ç¨äºåææéå¹¶æä¾ç¸å³è¯æ­ä¿¡æ¯ã\n\nâ¥ãåå§å applicationcontextï¼ä¸»è¦å®æä»¥ä¸å·¥ä½ï¼\n\n * å°åå¤å¥½ç environment è®¾ç½®ç» applicationcontext\n * éåè°ç¨ææç applicationcontextinitializer çinitialize()æ¹æ³æ¥å¯¹å·²ç»åå»ºå¥½ç applicationcontext è¿è¡è¿ä¸æ­¥çå¤ç\n * è°ç¨ springapplicationrunlistener çcontextprepared()æ¹æ³ï¼éç¥ææççå¬èï¼applicationcontext å·²ç»åå¤å®æ¯\n * å°ææç bean å è½½å°å®¹å¨ä¸­\n * è°ç¨ springapplicationrunlistener çcontextloaded()æ¹æ³ï¼éç¥ææççå¬èï¼applicationcontext å·²ç»è£è½½å®æ¯\n\nâ¦ãè°ç¨ applicationcontext çrefresh()æ¹æ³ï¼å®æ ioc å®¹å¨å¯ç¨çæåä¸éå·¥åºãä»åå­ä¸çè§£ä¸ºå·æ°å®¹å¨ï¼é£ä½ä¸ºå·æ°ï¼å°±æ¯ææå®¹å¨çå¯å¨ï¼èç³»ä¸ä¸ç¬¬ä¸å°èçåå®¹ãé£å¦ä½å·æ°å¢ï¼ä¸çä¸é¢ä»£ç ï¼\n\n// æèªrefresh()æ¹æ³ä¸­ä¸å¥ä»£ç \ninvokebeanfactorypostprocessors(beanfactory);\n\n\nççè¿ä¸ªæ¹æ³çå®ç°ï¼\n\nprotected void invokebeanfactorypostprocessors(configurablelistablebeanfactory beanfactory) {\n    postprocessorregistrationdelegate.invokebeanfactorypostprocessors(beanfactory, getbeanfactorypostprocessors());\n    ......\n}\n\n\nè·åå°ææçbeanfactorypostprocessoræ¥å¯¹å®¹å¨åä¸äºé¢å¤çæä½ãbeanfactorypostprocessor åè®¸æä»¬å¨å®¹å¨å®ä¾åç¸åºå¯¹è±¡ä¹åï¼å¯¹æ³¨åå°å®¹å¨ç beandefinition æä¿å­çä¿¡æ¯åä¸äºé¢å¤çæä½ãè¿éç getbeanfactorypostprocessors()æ¹æ³å¯ä»¥è·åå° 3 ä¸ª processorï¼\n\nconfigurationwarningsapplicationcontextinitializer$configurationwarningspostprocessor\nsharedmetadatareaderfactorycontextinitializer$cachingmetadatareaderfactorypostprocessor\nconfigfileapplicationlistener$propertysourceorderingpostprocessor\n\n\nä¸æ¯æé£ä¹å¤ beanfactorypostprocessor çå®ç°ç±»ï¼ä¸ºä»ä¹è¿å¿åªæè¿ 3 ä¸ªï¼å ä¸ºå¨åå§åæµç¨è·åå°çåç§ applicationcontextinitializer å applicationlistener ä¸­ï¼åªæä¸æ 3 ä¸ªåäºç±»ä¼¼äºå¦ä¸æä½ï¼\n\npublic void initialize(configurableapplicationcontext context) {\n    context.addbeanfactorypostprocessor(new configurationwarningspostprocessor(getchecks()));\n}\n\n\nç¶åä½ å°±å¯ä»¥è¿å¥å°postprocessorregistrationdelegate.invokebeanfactorypostprocessors()æ¹æ³äºï¼è¿ä¸ªæ¹æ³é¤äºä¼éåä¸é¢ç 3 ä¸ª beanfactorypostprocessor å¤çå¤ï¼è¿ä¼è·åç±»åä¸ºbeandefinitionregistrypostprocessorç beanï¼org.springframework.context.annotation.internalconfigurationannotationprocessorï¼å¯¹åºç class ä¸ºconfigurationclasspostprocessorãconfigurationclasspostprocessorç¨äºè§£æå¤çåç§æ³¨è§£ï¼åæ¬ï¼@configurationã@componentscanã@importã@propertysourceã@importresourceã@beanãå½å¤ç@importæ³¨è§£çæ¶åï¼å°±ä¼è°ç¨èªå¨éç½®è¿ä¸å°èä¸­çenableautoconfigurationimportselector.selectimports()æ¥å®æèªå¨éç½®åè½ãå¶ä»çè¿éä¸åå¤è®²ï¼å¦æä½ æå´è¶£ï¼å¯ä»¥æ¥éåèèµæ 6ã\n\nâ§ãæ¥æ¾å½å context ä¸­æ¯å¦æ³¨åæ commandlinerunner å applicationrunnerï¼å¦ææåéåæ§è¡å®ä»¬ã\n\nâ¨ãæ§è¡ææ springapplicationrunlistener ç finished()æ¹æ³ã\n\nè¿å°±æ¯ spring boot çæ´ä¸ªå¯å¨æµç¨ï¼å¶æ ¸å¿å°±æ¯å¨ spring å®¹å¨åå§åå¹¶å¯å¨çåºç¡ä¸å å¥åç§æ©å±ç¹ï¼è¿äºæ©å±ç¹åæ¬ï¼applicationcontextinitializerãapplicationlistener ä»¥ååç§ beanfactorypostprocessor ç­ç­ãä½ å¯¹æ´ä¸ªæµç¨çç»èä¸å¿å¤ªè¿å³æ³¨ï¼çè³æ²¡å¼æç½ä¹æ²¡æå³ç³»ï¼ä½ åªè¦çè§£è¿äºæ©å±ç¹æ¯å¨ä½æ¶å¦ä½å·¥ä½çï¼è½è®©å®ä»¬ä¸ºä½ æç¨å³å¯ã\n\næ´ä¸ªå¯å¨æµç¨ç¡®å®éå¸¸å¤æï¼å¯ä»¥æ¥è¯¢åèèµæä¸­çé¨åç« èååå®¹ï¼å¯¹ç§çæºç ï¼å¤ççï¼ææ³æç»ä½ é½è½å¼æ¸æ¥çãè¨èæ»ä¹ï¼spring ææ¯æ ¸å¿ï¼çè§£æ¸æ¥ spring å®¹å¨çå¯å¨æµç¨ï¼é£ spring boot å¯å¨æµç¨å°±ä¸å¨è¯ä¸äºã\n\n\n# åèèµæ\n\n[1]çç¦å¼º èï¼springboot æ­ç§ï¼å¿«éæå»ºå¾®æå¡ä½ç³»; æºæ¢°å·¥ä¸åºçç¤¾, 2016 [2]çç¦å¼º èï¼spring æ­ç§; äººæ°é®ä»¶åºçç¤¾, 2009 [3]craig walls èï¼ä¸éªä¸° è¯ï¼spring boot å®æï¼ä¸­å½å·¥ä¿¡åºçéå¢ äººæ°é®çµåºçç¤¾ï¼2016 [4]æ·±å¥æ¢è®¨ java ç±»å è½½å¨ : www.ibm.com/developerwoâ¦ [5]spring boot å®æï¼èªå¨éç½®åçåæ : blog.csdn.net/liaokailin/â¦ [6]spring bootå®æï¼spring boot beanå è½½æºç åæï¼ blog.csdn.net/liaokailin/â¦',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring é¢è¯",frontmatter:{title:"Spring é¢è¯",date:"2018-08-02T17:33:32.000Z",order:99,categories:["Java","æ¡æ¶","Spring","Springç»¼å"],tags:["Java","æ¡æ¶","Spring","é¢è¯"],permalink:"/pages/db33b0/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/00.Spring%E7%BB%BC%E5%90%88/99.Spring%E9%9D%A2%E8%AF%95.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/99.Springé¢è¯.md",key:"v-ad888434",path:"/pages/db33b0/",headers:[{level:2,title:"ç»¼åç¯",slug:"ç»¼åç¯",normalizedTitle:"ç»¼åç¯",charIndex:16},{level:3,title:"ä¸åçæ¬ç Spring Framework æåªäºä¸»è¦åè½ï¼",slug:"ä¸åçæ¬ç-spring-framework-æåªäºä¸»è¦åè½",normalizedTitle:"ä¸åçæ¬ç spring framework æåªäºä¸»è¦åè½ï¼",charIndex:24},{level:3,title:"ä»ä¹æ¯ Spring Frameworkï¼",slug:"ä»ä¹æ¯-spring-framework",normalizedTitle:"ä»ä¹æ¯ spring frameworkï¼",charIndex:222},{level:3,title:"åä¸¾ Spring Framework çä¼ç¹ã",slug:"åä¸¾-spring-framework-çä¼ç¹ã",normalizedTitle:"åä¸¾ spring framework çä¼ç¹ã",charIndex:404},{level:3,title:"Spring Framework æåªäºä¸åçåè½ï¼",slug:"spring-framework-æåªäºä¸åçåè½",normalizedTitle:"spring framework æåªäºä¸åçåè½ï¼",charIndex:588},{level:3,title:"Spring Framework ä¸­æå¤å°ä¸ªæ¨¡åï¼å®ä»¬åå«æ¯ä»ä¹ï¼",slug:"spring-framework-ä¸­æå¤å°ä¸ªæ¨¡å-å®ä»¬åå«æ¯ä»ä¹",normalizedTitle:"spring framework ä¸­æå¤å°ä¸ªæ¨¡åï¼å®ä»¬åå«æ¯ä»ä¹ï¼",charIndex:891},{level:3,title:"ä»ä¹æ¯ Spring éç½®æä»¶ï¼",slug:"ä»ä¹æ¯-spring-éç½®æä»¶",normalizedTitle:"ä»ä¹æ¯ spring éç½®æä»¶ï¼",charIndex:1605},{level:3,title:"Spring åºç¨ç¨åºæåªäºä¸åç»ä»¶ï¼",slug:"spring-åºç¨ç¨åºæåªäºä¸åç»ä»¶",normalizedTitle:"spring åºç¨ç¨åºæåªäºä¸åç»ä»¶ï¼",charIndex:1726},{level:3,title:"ä½¿ç¨ Spring æåªäºæ¹å¼ï¼",slug:"ä½¿ç¨-spring-æåªäºæ¹å¼",normalizedTitle:"ä½¿ç¨ spring æåªäºæ¹å¼ï¼",charIndex:1911},{level:2,title:"æ ¸å¿ç¯",slug:"æ ¸å¿ç¯",normalizedTitle:"æ ¸å¿ç¯",charIndex:2090},{level:3,title:"IoC",slug:"ioc",normalizedTitle:"ioc",charIndex:2098},{level:4,title:"ä»ä¹æ¯ IoCï¼ä»ä¹æ¯ä¾èµæ³¨å¥ï¼ä»ä¹æ¯ Spring IoCï¼",slug:"ä»ä¹æ¯-ioc-ä»ä¹æ¯ä¾èµæ³¨å¥-ä»ä¹æ¯-spring-ioc",normalizedTitle:"ä»ä¹æ¯ iocï¼ä»ä¹æ¯ä¾èµæ³¨å¥ï¼ä»ä¹æ¯ spring iocï¼",charIndex:2105},{level:4,title:"ä¾èµæ³¨å¥æåªäºå®ç°æ¹å¼ï¼",slug:"ä¾èµæ³¨å¥æåªäºå®ç°æ¹å¼",normalizedTitle:"ä¾èµæ³¨å¥æåªäºå®ç°æ¹å¼ï¼",charIndex:2489},{level:4,title:"æé å¨æ³¨å¥ VS. setter æ³¨å¥",slug:"æé å¨æ³¨å¥-vs-setter-æ³¨å¥",normalizedTitle:"æé å¨æ³¨å¥ vs. setter æ³¨å¥",charIndex:2814},{level:4,title:"BeanFactory VS. ApplicationContext",slug:"beanfactory-vs-applicationcontext",normalizedTitle:"beanfactory vs. applicationcontext",charIndex:2991},{level:4,title:"BeanFactory VS. FactoryBean",slug:"beanfactory-vs-factorybean",normalizedTitle:"beanfactory vs. factorybean",charIndex:3371},{level:4,title:"Spring IoC å¯å¨æ¶åäºåªäºåå¤",slug:"spring-ioc-å¯å¨æ¶åäºåªäºåå¤",normalizedTitle:"spring ioc å¯å¨æ¶åäºåªäºåå¤",charIndex:3477},{level:4,title:"Spring IoC çå®ç°æºå¶æ¯ä»ä¹",slug:"spring-ioc-çå®ç°æºå¶æ¯ä»ä¹",normalizedTitle:"spring ioc çå®ç°æºå¶æ¯ä»ä¹",charIndex:3553},{level:3,title:"Bean",slug:"bean",normalizedTitle:"bean",charIndex:727},{level:4,title:"ä»ä¹æ¯ Spring Bean",slug:"ä»ä¹æ¯-spring-bean",normalizedTitle:"ä»ä¹æ¯ spring bean",charIndex:4334},{level:4,title:"å¦ä½æ³¨å Spring Bean",slug:"å¦ä½æ³¨å-spring-bean",normalizedTitle:"å¦ä½æ³¨å spring bean",charIndex:4726},{level:4,title:"spring æä¾äºåªäºéç½®æ¹å¼ï¼",slug:"spring-æä¾äºåªäºéç½®æ¹å¼",normalizedTitle:"spring æä¾äºåªäºéç½®æ¹å¼ï¼",charIndex:4777},{level:4,title:"spring æ¯æéä¸­ bean scopeï¼",slug:"spring-æ¯æéä¸­-bean-scope",normalizedTitle:"spring æ¯æéä¸­ bean scopeï¼",charIndex:5548},{level:4,title:"Spring Bean ççå½å¨æ",slug:"spring-bean-ççå½å¨æ",normalizedTitle:"spring bean ççå½å¨æ",charIndex:6126},{level:4,title:"ä»ä¹æ¯ spring çåé¨ beanï¼",slug:"ä»ä¹æ¯-spring-çåé¨-bean",normalizedTitle:"ä»ä¹æ¯ spring çåé¨ beanï¼",charIndex:7479},{level:4,title:"ä»ä¹æ¯ spring è£é",slug:"ä»ä¹æ¯-spring-è£é",normalizedTitle:"ä»ä¹æ¯ spring è£é",charIndex:8264},{level:4,title:"èªå¨è£éæåªäºæ¹å¼ï¼",slug:"èªå¨è£éæåªäºæ¹å¼",normalizedTitle:"èªå¨è£éæåªäºæ¹å¼ï¼",charIndex:8387},{level:4,title:"èªå¨è£éæä»ä¹å±éï¼",slug:"èªå¨è£éæä»ä¹å±é",normalizedTitle:"èªå¨è£éæä»ä¹å±éï¼",charIndex:8762},{level:3,title:"AOP",slug:"aop",normalizedTitle:"aop",charIndex:665},{level:4,title:"ä»ä¹æ¯ AOPï¼",slug:"ä»ä¹æ¯-aop",normalizedTitle:"ä»ä¹æ¯ aopï¼",charIndex:8930},{level:4,title:"AOP ä¸­ç AspectãAdviceãPointcutãJointPoint å Advice åæ°åå«æ¯ä»ä¹ï¼",slug:"aop-ä¸­ç-aspectãadviceãpointcutãjointpoint-å-advice-åæ°åå«æ¯ä»ä¹",normalizedTitle:"aop ä¸­ç aspectãadviceãpointcutãjointpoint å advice åæ°åå«æ¯ä»ä¹ï¼",charIndex:9117},{level:4,title:"ä»ä¹æ¯éç¥ï¼Adviceï¼ï¼",slug:"ä»ä¹æ¯éç¥-advice",normalizedTitle:"ä»ä¹æ¯éç¥ï¼adviceï¼ï¼",charIndex:9829},{level:4,title:"æåªäºç±»åçéç¥ï¼Adviceï¼ï¼",slug:"æåªäºç±»åçéç¥-advice",normalizedTitle:"æåªäºç±»åçéç¥ï¼adviceï¼ï¼",charIndex:9943},{level:4,title:"æåºå¨ spring aop ä¸­ concern å cross-cutting concern çä¸åä¹å¤ã",slug:"æåºå¨-spring-aop-ä¸­-concern-å-cross-cutting-concern-çä¸åä¹å¤ã",normalizedTitle:"æåºå¨ spring aop ä¸­ concern å cross-cutting concern çä¸åä¹å¤ã",charIndex:10335},{level:4,title:"AOP æåªäºå®ç°æ¹å¼ï¼",slug:"aop-æåªäºå®ç°æ¹å¼",normalizedTitle:"aop æåªäºå®ç°æ¹å¼ï¼",charIndex:10539},{level:4,title:"Spring AOP and AspectJ AOP æä»ä¹åºå«ï¼",slug:"spring-aop-and-aspectj-aop-æä»ä¹åºå«",normalizedTitle:"spring aop and aspectj aop æä»ä¹åºå«ï¼",charIndex:10756},{level:4,title:"å¦ä½çè§£ Spring ä¸­çä»£çï¼",slug:"å¦ä½çè§£-spring-ä¸­çä»£ç",normalizedTitle:"å¦ä½çè§£ spring ä¸­çä»£çï¼",charIndex:10899},{level:4,title:"ä»ä¹æ¯ç¼ç»ï¼Weavingï¼ï¼",slug:"ä»ä¹æ¯ç¼ç»-weaving",normalizedTitle:"ä»ä¹æ¯ç¼ç»ï¼weavingï¼ï¼",charIndex:11007},{level:2,title:"æ³¨è§£",slug:"æ³¨è§£",normalizedTitle:"æ³¨è§£",charIndex:109},{level:3,title:"ä½ ç¨è¿åªäºéè¦ç Spring æ³¨è§£ï¼",slug:"ä½ ç¨è¿åªäºéè¦ç-spring-æ³¨è§£",normalizedTitle:"ä½ ç¨è¿åªäºéè¦ç spring æ³¨è§£ï¼",charIndex:11122},{level:3,title:"å¦ä½å¨ spring ä¸­å¯å¨æ³¨è§£è£éï¼",slug:"å¦ä½å¨-spring-ä¸­å¯å¨æ³¨è§£è£é",normalizedTitle:"å¦ä½å¨ spring ä¸­å¯å¨æ³¨è§£è£éï¼",charIndex:11611},{level:3,title:"@Component, @Controller, @Repository, @Service æä½åºå«ï¼",slug:"component-controller-repository-service-æä½åºå«",normalizedTitle:"@component, @controller, @repository, @service æä½åºå«ï¼",charIndex:11732},{level:3,title:"@Required æ³¨è§£æä»ä¹ç¨ï¼",slug:"required-æ³¨è§£æä»ä¹ç¨",normalizedTitle:"@required æ³¨è§£æä»ä¹ç¨ï¼",charIndex:12178},{level:3,title:"@Autowired æ³¨è§£æä»ä¹ç¨ï¼",slug:"autowired-æ³¨è§£æä»ä¹ç¨",normalizedTitle:"@autowired æ³¨è§£æä»ä¹ç¨ï¼",charIndex:12535},{level:3,title:"@Qualifier æ³¨è§£æä»ä¹ç¨ï¼",slug:"qualifier-æ³¨è§£æä»ä¹ç¨",normalizedTitle:"@qualifier æ³¨è§£æä»ä¹ç¨ï¼",charIndex:12853},{level:3,title:"@RequestMapping æ³¨è§£æä»ä¹ç¨ï¼",slug:"requestmapping-æ³¨è§£æä»ä¹ç¨",normalizedTitle:"@requestmapping æ³¨è§£æä»ä¹ç¨ï¼",charIndex:13478},{level:2,title:"æ°æ®ç¯",slug:"æ°æ®ç¯",normalizedTitle:"æ°æ®ç¯",charIndex:13622},{level:3,title:"spring DAO æä»ä¹ç¨ï¼",slug:"spring-dao-æä»ä¹ç¨",normalizedTitle:"spring dao æä»ä¹ç¨ï¼",charIndex:13630},{level:3,title:"åä¸¾ Spring DAO æåºçå¼å¸¸ã",slug:"åä¸¾-spring-dao-æåºçå¼å¸¸ã",normalizedTitle:"åä¸¾ spring dao æåºçå¼å¸¸ã",charIndex:13757},{level:3,title:"spring JDBC API ä¸­å­å¨åªäºç±»ï¼",slug:"spring-jdbc-api-ä¸­å­å¨åªäºç±»",normalizedTitle:"spring jdbc api ä¸­å­å¨åªäºç±»ï¼",charIndex:13784},{level:3,title:"ä½¿ç¨ Spring è®¿é® Hibernate çæ¹æ³æåªäºï¼",slug:"ä½¿ç¨-spring-è®¿é®-hibernate-çæ¹æ³æåªäº",normalizedTitle:"ä½¿ç¨ spring è®¿é® hibernate çæ¹æ³æåªäºï¼",charIndex:13919},{level:3,title:"åä¸¾ spring æ¯æçäºå¡ç®¡çç±»å",slug:"åä¸¾-spring-æ¯æçäºå¡ç®¡çç±»å",normalizedTitle:"åä¸¾ spring æ¯æçäºå¡ç®¡çç±»å",charIndex:14060},{level:3,title:"spring æ¯æåªäº ORM æ¡æ¶",slug:"spring-æ¯æåªäº-orm-æ¡æ¶",normalizedTitle:"spring æ¯æåªäº orm æ¡æ¶",charIndex:14209},{level:2,title:"MVC",slug:"mvc",normalizedTitle:"mvc",charIndex:745},{level:3,title:"Spring MVC æ¡æ¶æä»ä¹ç¨ï¼",slug:"spring-mvc-æ¡æ¶æä»ä¹ç¨",normalizedTitle:"spring mvc æ¡æ¶æä»ä¹ç¨ï¼",charIndex:14285},{level:3,title:"æè¿°ä¸ä¸ DispatcherServlet çå·¥ä½æµç¨",slug:"æè¿°ä¸ä¸-dispatcherservlet-çå·¥ä½æµç¨",normalizedTitle:"æè¿°ä¸ä¸ dispatcherservlet çå·¥ä½æµç¨",charIndex:14431},{level:3,title:"ä»ç»ä¸ä¸ WebApplicationContext",slug:"ä»ç»ä¸ä¸-webapplicationcontext",normalizedTitle:"ä»ç»ä¸ä¸ webapplicationcontext",charIndex:15427},{level:2,title:"èµæ",slug:"èµæ",normalizedTitle:"èµæ",charIndex:15682}],headersStr:"ç»¼åç¯ ä¸åçæ¬ç Spring Framework æåªäºä¸»è¦åè½ï¼ ä»ä¹æ¯ Spring Frameworkï¼ åä¸¾ Spring Framework çä¼ç¹ã Spring Framework æåªäºä¸åçåè½ï¼ Spring Framework ä¸­æå¤å°ä¸ªæ¨¡åï¼å®ä»¬åå«æ¯ä»ä¹ï¼ ä»ä¹æ¯ Spring éç½®æä»¶ï¼ Spring åºç¨ç¨åºæåªäºä¸åç»ä»¶ï¼ ä½¿ç¨ Spring æåªäºæ¹å¼ï¼ æ ¸å¿ç¯ IoC ä»ä¹æ¯ IoCï¼ä»ä¹æ¯ä¾èµæ³¨å¥ï¼ä»ä¹æ¯ Spring IoCï¼ ä¾èµæ³¨å¥æåªäºå®ç°æ¹å¼ï¼ æé å¨æ³¨å¥ VS. setter æ³¨å¥ BeanFactory VS. ApplicationContext BeanFactory VS. FactoryBean Spring IoC å¯å¨æ¶åäºåªäºåå¤ Spring IoC çå®ç°æºå¶æ¯ä»ä¹ Bean ä»ä¹æ¯ Spring Bean å¦ä½æ³¨å Spring Bean spring æä¾äºåªäºéç½®æ¹å¼ï¼ spring æ¯æéä¸­ bean scopeï¼ Spring Bean ççå½å¨æ ä»ä¹æ¯ spring çåé¨ beanï¼ ä»ä¹æ¯ spring è£é èªå¨è£éæåªäºæ¹å¼ï¼ èªå¨è£éæä»ä¹å±éï¼ AOP ä»ä¹æ¯ AOPï¼ AOP ä¸­ç AspectãAdviceãPointcutãJointPoint å Advice åæ°åå«æ¯ä»ä¹ï¼ ä»ä¹æ¯éç¥ï¼Adviceï¼ï¼ æåªäºç±»åçéç¥ï¼Adviceï¼ï¼ æåºå¨ spring aop ä¸­ concern å cross-cutting concern çä¸åä¹å¤ã AOP æåªäºå®ç°æ¹å¼ï¼ Spring AOP and AspectJ AOP æä»ä¹åºå«ï¼ å¦ä½çè§£ Spring ä¸­çä»£çï¼ ä»ä¹æ¯ç¼ç»ï¼Weavingï¼ï¼ æ³¨è§£ ä½ ç¨è¿åªäºéè¦ç Spring æ³¨è§£ï¼ å¦ä½å¨ spring ä¸­å¯å¨æ³¨è§£è£éï¼ @Component, @Controller, @Repository, @Service æä½åºå«ï¼ @Required æ³¨è§£æä»ä¹ç¨ï¼ @Autowired æ³¨è§£æä»ä¹ç¨ï¼ @Qualifier æ³¨è§£æä»ä¹ç¨ï¼ @RequestMapping æ³¨è§£æä»ä¹ç¨ï¼ æ°æ®ç¯ spring DAO æä»ä¹ç¨ï¼ åä¸¾ Spring DAO æåºçå¼å¸¸ã spring JDBC API ä¸­å­å¨åªäºç±»ï¼ ä½¿ç¨ Spring è®¿é® Hibernate çæ¹æ³æåªäºï¼ åä¸¾ spring æ¯æçäºå¡ç®¡çç±»å spring æ¯æåªäº ORM æ¡æ¶ MVC Spring MVC æ¡æ¶æä»ä¹ç¨ï¼ æè¿°ä¸ä¸ DispatcherServlet çå·¥ä½æµç¨ ä»ç»ä¸ä¸ WebApplicationContext èµæ",content:'# Spring é¢è¯\n\n\n# ç»¼åç¯\n\n\n# ä¸åçæ¬ç Spring Framework æåªäºä¸»è¦åè½ï¼\n\nVERSION      FEATURE\nSpring 2.5   åå¸äº 2007 å¹´ãè¿æ¯ç¬¬ä¸ä¸ªæ¯ææ³¨è§£ççæ¬ã\nSpring 3.0   åå¸äº 2009 å¹´ãå®å®å¨å©ç¨äº Java5 ä¸­çæ¹è¿ï¼å¹¶ä¸º JEE6 æä¾äºæ¯æã\nSpring 4.0   åå¸äº 2013 å¹´ãè¿æ¯ç¬¬ä¸ä¸ªå®å¨æ¯æ JAVA8 ççæ¬ã\n\n\n# ä»ä¹æ¯ Spring Frameworkï¼\n\n * Spring æ¯ä¸ä¸ªå¼æºåºç¨æ¡æ¶ï¼æ¨å¨éä½åºç¨ç¨åºå¼åçå¤æåº¦ã\n * å®æ¯è½»éçº§ãæ¾æ£è¦åçã\n * å®å·æåå±ä½ç³»ç»æï¼åè®¸ç¨æ·éæ©ç»ä»¶ï¼åæ¶è¿ä¸º J2EE åºç¨ç¨åºå¼åæä¾äºä¸ä¸ªæåèåçæ¡æ¶ã\n * å®å¯ä»¥éæå¶ä»æ¡æ¶ï¼å¦ StructsãHibernateãEJB ç­ï¼æä»¥åç§°ä¸ºæ¡æ¶çæ¡æ¶ã\n\n\n# åä¸¾ Spring Framework çä¼ç¹ã\n\n * ç±äº Spring Frameworks çåå±æ¶æï¼ç¨æ·å¯ä»¥èªç±éæ©èªå·±éè¦çç»ä»¶ã\n * Spring Framework æ¯æ POJO(Plain Old Java Object) ç¼ç¨ï¼ä»èå·å¤æç»­éæåå¯æµè¯æ§ã\n * ç±äºä¾èµæ³¨å¥åæ§å¶åè½¬ï¼JDBC å¾ä»¥ç®åã\n * å®æ¯å¼æºåè´¹çã\n\n\n# Spring Framework æåªäºä¸åçåè½ï¼\n\n * è½»éçº§ - Spring å¨ä»£ç éåéæåº¦æ¹é¢é½å¾è½»ä¾¿ã\n * IOC - æ§å¶åè½¬\n * AOP - é¢ååé¢ç¼ç¨å¯ä»¥å°åºç¨ä¸å¡é»è¾åç³»ç»æå¡åç¦»ï¼ä»¥å®ç°é«åèã\n * å®¹å¨ - Spring è´è´£åå»ºåç®¡çå¯¹è±¡ï¼Beanï¼ççå½å¨æåéç½®ã\n * MVC - å¯¹ web åºç¨æä¾äºé«åº¦å¯éç½®æ§ï¼å¶ä»æ¡æ¶çéæä¹ååæ¹ä¾¿ã\n * äºå¡ç®¡ç - æä¾äºç¨äºäºå¡ç®¡ççéç¨æ½è±¡å±ãSpring çäºå¡æ¯æä¹å¯ç¨äºå®¹å¨è¾å°çç¯å¢ã\n * JDBC å¼å¸¸ - Spring ç JDBC æ½è±¡å±æä¾äºä¸ä¸ªå¼å¸¸å±æ¬¡ç»æï¼ç®åäºéè¯¯å¤çç­ç¥ã\n\n\n# Spring Framework ä¸­æå¤å°ä¸ªæ¨¡åï¼å®ä»¬åå«æ¯ä»ä¹ï¼\n\n\n\n * Spring æ ¸å¿å®¹å¨ â è¯¥å±åºæ¬ä¸æ¯ Spring Framework çæ ¸å¿ãå®åå«ä»¥ä¸æ¨¡åï¼\n   * Spring Core\n   * Spring Bean\n   * SpEL (Spring Expression Language)\n   * Spring Context\n * æ°æ®è®¿é®/éæ â è¯¥å±æä¾ä¸æ°æ®åºäº¤äºçæ¯æãå®åå«ä»¥ä¸æ¨¡åï¼\n   * JDBC (Java DataBase Connectivity)\n   * ORM (Object Relational Mapping)\n   * OXM (Object XML Mappers)\n   * JMS (Java Messaging Service)\n   * Transaction\n * Web â è¯¥å±æä¾äºåå»º Web åºç¨ç¨åºçæ¯æãå®åå«ä»¥ä¸æ¨¡åï¼\n   * Web\n   * Web â Servlet\n   * Web â Socket\n   * Web â Portlet\n * AOP â è¯¥å±æ¯æé¢ååé¢ç¼ç¨\n * Instrumentation â è¯¥å±ä¸ºç±»æ£æµåç±»å è½½å¨å®ç°æä¾æ¯æã\n * Test â è¯¥å±ä¸ºä½¿ç¨ JUnit å TestNG è¿è¡æµè¯æä¾æ¯æã\n * å ä¸ªæé¡¹æ¨¡å:\n   * Messaging â è¯¥æ¨¡åä¸º STOMP æä¾æ¯æãå®è¿æ¯ææ³¨è§£ç¼ç¨æ¨¡åï¼è¯¥æ¨¡åç¨äºä» WebSocket å®¢æ·ç«¯è·¯ç±åå¤ç STOMP æ¶æ¯ã\n   * Aspects â è¯¥æ¨¡åä¸ºä¸ AspectJ çéææä¾æ¯æã\n\n\n# ä»ä¹æ¯ Spring éç½®æä»¶ï¼\n\nSpring éç½®æä»¶æ¯ XML æä»¶ãè¯¥æä»¶ä¸»è¦åå«ç±»ä¿¡æ¯ãå®æè¿°äºè¿äºç±»æ¯å¦ä½éç½®ä»¥åç¸äºå¼å¥çãä½æ¯ï¼XML éç½®æä»¶åé¿ä¸æ´å å¹²åãå¦ææ²¡ææ­£ç¡®è§ååç¼åï¼é£ä¹å¨å¤§é¡¹ç®ä¸­ç®¡çåå¾éå¸¸å°é¾ã\n\n\n# Spring åºç¨ç¨åºæåªäºä¸åç»ä»¶ï¼\n\nSpring åºç¨ä¸è¬æä»¥ä¸ç»ä»¶ï¼\n\n * æ¥å£ - å®ä¹åè½ã\n * Bean ç±» - å®åå«å±æ§ï¼setter å getter æ¹æ³ï¼å½æ°ç­ã\n * Spring é¢ååé¢ç¼ç¨ï¼AOPï¼ - æä¾é¢ååé¢ç¼ç¨çåè½ã\n * Bean éç½®æä»¶ - åå«ç±»çä¿¡æ¯ä»¥åå¦ä½éç½®å®ä»¬ã\n * ç¨æ·ç¨åº - å®ä½¿ç¨æ¥å£ã\n\n\n# ä½¿ç¨ Spring æåªäºæ¹å¼ï¼\n\nä½¿ç¨ Spring æä»¥ä¸æ¹å¼ï¼\n\n * ä½ä¸ºä¸ä¸ªæçç Spring Web åºç¨ç¨åºã\n * ä½ä¸ºç¬¬ä¸æ¹ Web æ¡æ¶ï¼ä½¿ç¨ Spring Frameworks ä¸­é´å±ã\n * ç¨äºè¿ç¨ä½¿ç¨ã\n * ä½ä¸ºä¼ä¸çº§ Java Beanï¼å®å¯ä»¥åè£ç°æç POJOï¼Plain Old Java Objectsï¼ã\n\n\n# æ ¸å¿ç¯\n\n\n# IoC\n\n# ä»ä¹æ¯ IoCï¼ä»ä¹æ¯ä¾èµæ³¨å¥ï¼ä»ä¹æ¯ Spring IoCï¼\n\nIoC å³æ§å¶åè½¬ï¼Inversion of Controlï¼ç¼©åä¸º IoCï¼ãIoC åç§°ä¸ºä¾èµåç½®ååï¼è®¾è®¡æ¨¡å¼å­å¤§ååä¹ä¸ï¼ï¼å®çè¦ç¹å¨äºï¼ç¨åºè¦ä¾èµäºæ½è±¡æ¥å£ï¼ä¸è¦ä¾èµäºå·ä½å®ç°ãå®çä½ç¨å°±æ¯ç¨äºéä½ä»£ç é´çè¦ååº¦ã\n\nIoC çå®ç°æ¹å¼æä¸¤ç§ï¼\n\n * ä¾èµæ³¨å¥ï¼Dependency Injectionï¼ç®ç§° DIï¼ï¼ä¸éè¿ new() çæ¹å¼å¨ç±»åé¨åå»ºä¾èµç±»å¯¹è±¡ï¼èæ¯å°ä¾èµçç±»å¯¹è±¡å¨å¤é¨åå»ºå¥½ä¹åï¼éè¿æé å¨ãå½æ°åæ°ç­æ¹å¼ä¼ éï¼ææ³¨å¥ï¼ç»ç±»ä½¿ç¨ã\n * ä¾èµæ¥æ¾ï¼Dependency Lookupï¼ï¼å®¹å¨ä¸­çåæ§å¯¹è±¡éè¿å®¹å¨ç API æ¥æ¥æ¾èªå·±æä¾èµçèµæºååä½å¯¹è±¡ã\n\nSpring IoC æ¯ IoC çä¸ç§å®ç°ãDI æ¯ Spring IoC çä¸»è¦å®ç°ååã\n\n\n\n# ä¾èµæ³¨å¥æåªäºå®ç°æ¹å¼ï¼\n\nä¾èµæ³¨å¥æå¦ä¸æ¹å¼ï¼\n\nä¾èµæ³¨å¥æ¹å¼        éç½®åæ°æ®ä¸¾ä¾\nSetter æ¹æ³æ³¨å¥   <proeprty name="user" ref="userBean"/>\næé å¨æ³¨å¥         <constructor-arg name="user" ref="userBean" />\nå­æ®µæ³¨å¥          @Autowired User user;\næ¹æ³æ³¨å¥          @Autowired public void user(User user) { ... }\næ¥å£åè°æ³¨å¥        class MyBean implements BeanFactoryAware { ... }\n\n# æé å¨æ³¨å¥ VS. setter æ³¨å¥\n\næé å¨æ³¨å¥            SETTER æ³¨å¥\næ²¡æé¨åæ³¨å¥           æé¨åæ³¨å¥\nä¸ä¼è¦ç setter å±æ§   ä¼è¦ç setter å±æ§\nä»»æä¿®æ¹é½ä¼åå»ºä¸ä¸ªæ°å®ä¾    ä»»æä¿®æ¹ä¸ä¼åå»ºä¸ä¸ªæ°å®ä¾\néç¨äºè®¾ç½®å¾å¤å±æ§        éç¨äºè®¾ç½®å°éå±æ§\n\nå®æ¹æ¨èä½¿ç¨æé å¨æ³¨å¥ã\n\n# BeanFactory VS. ApplicationContext\n\nå¨ Spring ä¸­ï¼æä¸¤ç§ IoC å®¹å¨ï¼BeanFactory å ApplicationContextã\n\n * BeanFactoryï¼BeanFactory æ¯ Spring åºç¡ IoC å®¹å¨ãBeanFactory æä¾äº Spring å®¹å¨çéç½®æ¡æ¶ååºæ¬åè½ã\n * ApplicationContextï¼ApplicationContext æ¯å·å¤åºç¨ç¹æ§ç BeanFactory çå­æ¥å£ãå®è¿æ©å±äºå¶ä»ä¸äºæ¥å£ï¼ä»¥æ¯ææ´ä¸°å¯çåè½ï¼å¦ï¼å½éåãè®¿é®èµæºãäºä»¶æºå¶ãæ´æ¹ä¾¿çæ¯æ AOPãå¨ web åºç¨ä¸­æå®åºç¨å±ä¸ä¸æç­ã\n\nå®éå¼åä¸­ï¼æ´æ¨èä½¿ç¨ ApplicationContext ä½ä¸º IoC å®¹å¨ï¼å ä¸ºå®çåè½è¿å¤äº BeanFactoryã\n\n# BeanFactory VS. FactoryBean\n\nBeanFactory æ¯ Spring åºç¡ IoC å®¹å¨ã\n\nFactoryBean æ¯åå»º Bean çä¸ç§æ¹å¼ï¼å¸®å©å®ç°å¤æçåå§åé»è¾ã\n\n# Spring IoC å¯å¨æ¶åäºåªäºåå¤\n\nIoC éç½®åä¿¡æ¯è¯»ååè§£æ\n\nIoC å®¹å¨çå½å¨æç®¡ç\n\nSpring äºä»¶åå¸\n\nå½éå\n\nç­ç­\n\n# Spring IoC çå®ç°æºå¶æ¯ä»ä¹\n\nSpring ä¸­ç IoC çå®ç°åçå°±æ¯å·¥åæ¨¡å¼å åå°æºå¶ã\n\nç¤ºä¾ï¼\n\ninterface Fruit {\n     public abstract void eat();\n}\nclass Apple implements Fruit {\n    public void eat(){\n        System.out.println("Apple");\n    }\n}\nclass Orange implements Fruit {\n    public void eat(){\n        System.out.println("Orange");\n    }\n}\nclass Factory {\n    public static Fruit getInstance(String ClassName) {\n        Fruit f=null;\n        try {\n            f=(Fruit)Class.forName(ClassName).newInstance();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return f;\n    }\n}\nclass Client {\n    public static void main(String[] a) {\n        Fruit f=Factory.getInstance("io.github.dunwu.spring.Apple");\n        if(f!=null){\n            f.eat();\n        }\n    }\n}\n\n\n\n# Bean\n\n# ä»ä¹æ¯ Spring Bean\n\nå¨ Spring ä¸­ï¼ææåºç¨ç¨åºä¸»ä½ç± Spring IoC å®¹å¨ç®¡ççå¯¹è±¡ç§°ä¸º BeanãBean æ¯ç± Spring IoC å®¹å¨å®ä¾åãè£éåç®¡ççå¯¹è±¡ã Bean ä»¥åå®ä»¬ä¹é´çä¾èµå³ç³»åæ å¨å®¹å¨ä½¿ç¨çéç½®åæ°æ®ä¸­ã\n\nSpring IoC å®¹å¨æ¬èº«ï¼å¹¶ä¸è½è¯å«éç½®çåæ°æ®ãä¸ºæ­¤ï¼è¦å°è¿äºéç½®ä¿¡æ¯è½¬ä¸º Spring è½è¯å«çæ ¼å¼ââBeanDefinition å¯¹è±¡ã\n\nBeanDefinition æ¯ Spring ä¸­å®ä¹ Bean çéç½®åä¿¡æ¯æ¥å£ï¼å®åå«ï¼\n\n * Bean ç±»å\n * Bean è¡ä¸ºéç½®åç´ ï¼å¦ï¼ä½ç¨åãèªå¨ç»å®çæ¨¡å¼ãçå½å¨æåè°ç­\n * å¶ä» Bean å¼ç¨ï¼ä¹å¯ç§°ä¸ºåä½èï¼Collaboratorsï¼æä¾èµï¼Dependenciesï¼\n * éç½®è®¾ç½®ï¼å¦ Bean å±æ§ï¼Propertiesï¼\n\n# å¦ä½æ³¨å Spring Bean\n\néè¿ BeanDefinition åå¤é¨åä¾å¯¹è±¡æ¥æ³¨åã\n\n# spring æä¾äºåªäºéç½®æ¹å¼ï¼\n\n * åºäº xml éç½®\n\nbean æéçä¾èµé¡¹åæå¡å¨ XML æ ¼å¼çéç½®æä»¶ä¸­æå®ãè¿äºéç½®æä»¶éå¸¸åå«è®¸å¤ bean å®ä¹åç¹å®äºåºç¨ç¨åºçéç½®éé¡¹ãå®ä»¬éå¸¸ä»¥ bean æ ç­¾å¼å¤´ãä¾å¦ï¼\n\n<bean id="studentbean" class="org.edureka.firstSpring.StudentBean">\n <property name="name" value="Edureka"></property>\n</bean>\n\n\n * åºäºæ³¨è§£éç½®\n\næ¨å¯ä»¥éè¿å¨ç¸å³çç±»ï¼æ¹æ³æå­æ®µå£°æä¸ä½¿ç¨æ³¨è§£ï¼å° bean éç½®ä¸ºç»ä»¶ç±»æ¬èº«ï¼èä¸æ¯ä½¿ç¨ XML æ¥æè¿° bean è£éãé»è®¤æåµä¸ï¼Spring å®¹å¨ä¸­æªæå¼æ³¨è§£è£éãå æ­¤ï¼æ¨éè¦å¨ä½¿ç¨å®ä¹åå¨ Spring éç½®æä»¶ä¸­å¯ç¨å®ãä¾å¦ï¼\n\n<beans>\n<context:annotation-config/>\n\x3c!-- bean definitions go here --\x3e\n</beans>\n\n\n * åºäº Java API éç½®\n\nSpring ç Java éç½®æ¯éè¿ä½¿ç¨ @Bean å @Configuration æ¥å®ç°ã\n\n 1. @Bean æ³¨è§£æ®æ¼ä¸ <bean /> åç´ ç¸åçè§è²ã\n 2. @Configuration ç±»åè®¸éè¿ç®åå°è°ç¨åä¸ä¸ªç±»ä¸­çå¶ä» @Bean æ¹æ³æ¥å®ä¹ bean é´ä¾èµå³ç³»ã\n\nä¾å¦ï¼\n\n@Configuration\npublic class StudentConfig {\n    @Bean\n    public StudentBean myStudent() {\n        return new StudentBean();\n    }\n}\n\n\n# spring æ¯æéä¸­ bean scopeï¼\n\nSpring bean æ¯æ 5 ç§ scopeï¼\n\n * Singleton - æ¯ä¸ª Spring IoC å®¹å¨ä»æä¸ä¸ªåå®ä¾ã\n * Prototype - æ¯æ¬¡è¯·æ±é½ä¼äº§çä¸ä¸ªæ°çå®ä¾ã\n * Request - æ¯ä¸æ¬¡ HTTP è¯·æ±é½ä¼äº§çä¸ä¸ªæ°çå®ä¾ï¼å¹¶ä¸è¯¥ bean ä»å¨å½å HTTP è¯·æ±åææã\n * Session - æ¯ä¸æ¬¡ HTTP è¯·æ±é½ä¼äº§çä¸ä¸ªæ°ç beanï¼åæ¶è¯¥ bean ä»å¨å½å HTTP session åææã\n * Global-session - ç±»ä¼¼äºæ åç HTTP Session ä½ç¨åï¼ä¸è¿å®ä»ä»å¨åºäº portlet ç web åºç¨ä¸­æææä¹ãPortlet è§èå®ä¹äºå¨å± Session çæ¦å¿µï¼å®è¢«æææææä¸ª portlet web åºç¨çåç§ä¸åç portlet æå±äº«ãå¨ global session ä½ç¨åä¸­å®ä¹ç bean è¢«éå®äºå¨å± portlet Session ççå½å¨æèå´åãå¦æä½ å¨ web ä¸­ä½¿ç¨ global session ä½ç¨åæ¥æ è¯ beanï¼é£ä¹ web ä¼èªå¨å½æ session ç±»åæ¥ä½¿ç¨ã\n\nä»å½ç¨æ·ä½¿ç¨æ¯æ Web ç ApplicationContext æ¶ï¼æåä¸ä¸ªæå¯ç¨ã\n\n# Spring Bean ççå½å¨æ\n\n\n\nspring bean å®¹å¨ççå½å¨æå¦ä¸ï¼\n\n 1.  Spring å¯¹ Bean è¿è¡å®ä¾åï¼ç¸å½äº new XXX()ï¼\n\n 2.  Spring å°å¼åå¼ç¨æ³¨å¥å° Bean å¯¹åºçå±æ§ä¸­\n\n 3.  å¦æ Bean å®ç°äº BeanNameAware æ¥å£ï¼Spring å° Bean ç ID ä¼ éç» setBeanName æ¹æ³\n     \n     * ä½ç¨æ¯éè¿ Bean çå¼ç¨æ¥è·å¾ Bean IDï¼ä¸è¬ä¸å¡ä¸­æ¯å¾å°æç¨å° Bean ç ID ç\n\n 4.  å¦æ Bean å®ç°äº BeanFactoryAware æ¥å£ï¼Spring å°è°ç¨ setBeanDactory æ¹æ³ï¼å¹¶æ BeanFactory å®¹å¨å®ä¾ä½ä¸ºåæ°ä¼ å¥ã\n     \n     * ä½ç¨æ¯è·å Spring å®¹å¨ï¼å¦ Bean éè¿ Spring å®¹å¨åå¸äºä»¶ç­\n\n 5.  å¦æ Bean å®ç°äº ApplicationContextAware æ¥å£ï¼Spring å®¹å¨å°è°ç¨ setApplicationContext æ¹æ³ï¼æåºç¨ä¸ä¸æä½ä¸ºåæ°ä¼ å¥\n     \n     * ä½ç¨ä¸ BeanFactory ç±»ä¼¼é½æ¯ä¸ºäºè·å Spring å®¹å¨ï¼ä¸åçæ¯ Spring å®¹å¨å¨è°ç¨ setApplicationContext æ¹æ³æ¶ä¼æå®èªå·±ä½ä¸º setApplicationContext çåæ°ä¼ å¥ï¼è Spring å®¹å¨å¨è°ç¨ setBeanFactory åéè¦ä½¿ç¨èèªå·±æå®ï¼æ³¨å¥ï¼setBeanFactory éçåæ° BeanFactory\n\n 6.  å¦æ Bean å®ç°äº BeanPostProcess æ¥å£ï¼Spring å°è°ç¨ postProcessBeforeInitialization æ¹æ³\n     \n     * ä½ç¨æ¯å¨ Bean å®ä¾åå»ºæååå¯¹å¶è¿è¡å¢å¼ºå¤çï¼å¦å¯¹ Bean è¿è¡ä¿®æ¹ï¼å¢å æä¸ªåè½\n\n 7.  å¦æ Bean å®ç°äº InitializingBean æ¥å£ï¼Spring å°è°ç¨ afterPropertiesSet æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ Bean ä½¿ç¨ init-method å£°æåå§åçä½ç¨ä¸æ ·ï¼é½æ¯å¨ Bean çå¨é¨å±æ§è®¾ç½®æååæ§è¡çåå§åæ¹æ³ã\n\n 8.  å¦æ Bean å®ç°äº BeanPostProcess æ¥å£ï¼Spring å°è°ç¨ postProcessAfterInitialization æ¹æ³\n     \n     * postProcessBeforeInitialization æ¯å¨ Bean åå§ååæ§è¡çï¼è postProcessAfterInitialization æ¯å¨ Bean åå§ååæ§è¡ç\n\n 9.  ç»è¿ä»¥ä¸çå·¥ä½åï¼Bean å°ä¸ç´é©»çå¨åºç¨ä¸ä¸æä¸­ç»åºç¨ä½¿ç¨ï¼ç´å°åºç¨ä¸ä¸æè¢«éæ¯\n\n 10. å¦æ Bean å®ç°äº DispostbleBean æ¥å£ï¼Spring å°è°ç¨å®ç destory æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ Bean ä½¿ç¨ destory-method å±æ§çä½ç¨ä¸æ ·ï¼é½æ¯å¨ Bean å®ä¾éæ¯åæ§è¡çæ¹æ³ã\n\n# ä»ä¹æ¯ spring çåé¨ beanï¼\n\nåªæå° bean ç¨ä½å¦ä¸ä¸ª bean çå±æ§æ¶ï¼æè½å° bean å£°æä¸ºåé¨ beanãä¸ºäºå®ä¹ beanï¼Spring çåºäº XML çéç½®åæ°æ®å¨ <property> æ <constructor-arg> ä¸­æä¾äº <bean> åç´ çä½¿ç¨ãåé¨ bean æ»æ¯å¿åçï¼å®ä»¬æ»æ¯ä½ä¸ºååã\n\nä¾å¦ï¼åè®¾æä»¬æä¸ä¸ª Student ç±»ï¼å¶ä¸­å¼ç¨äº Person ç±»ãè¿éæä»¬å°åªåå»ºä¸ä¸ª Person ç±»å®ä¾å¹¶å¨ Student ä¸­ä½¿ç¨å®ã\n\nStudent.java\n\npublic class Student {\n    private Person person;\n    //Setters and Getters\n}\npublic class Person {\n    private String name;\n    private String address;\n    //Setters and Getters\n}\n\n\nbean.xml\n\n<bean id=âStudentBean" class="com.edureka.Student">\n    <property name="person">\n        \x3c!--This is inner bean --\x3e\n        <bean class="com.edureka.Person">\n            <property name="name" value=âScott"></property>\n            <property name="address" value=âBangalore"></property>\n        </bean>\n    </property>\n</bean>\n\n\n# ä»ä¹æ¯ spring è£é\n\nå½ bean å¨ Spring å®¹å¨ä¸­ç»åå¨ä¸èµ·æ¶ï¼å®è¢«ç§°ä¸ºè£éæ bean è£éã Spring å®¹å¨éè¦ç¥ééè¦ä»ä¹ bean ä»¥åå®¹å¨åºè¯¥å¦ä½ä½¿ç¨ä¾èµæ³¨å¥æ¥å° bean ç»å®å¨ä¸èµ·ï¼åæ¶è£é beanã\n\n# èªå¨è£éæåªäºæ¹å¼ï¼\n\nSpring å®¹å¨è½å¤èªå¨è£é beanãä¹å°±æ¯è¯´ï¼å¯ä»¥éè¿æ£æ¥ BeanFactory çåå®¹è®© Spring èªå¨è§£æ bean çåä½èã\n\nèªå¨è£éçä¸åæ¨¡å¼ï¼\n\n * no - è¿æ¯é»è®¤è®¾ç½®ï¼è¡¨ç¤ºæ²¡æèªå¨è£éãåºä½¿ç¨æ¾å¼ bean å¼ç¨è¿è¡è£éã\n * byName - å®æ ¹æ® bean çåç§°æ³¨å¥å¯¹è±¡ä¾èµé¡¹ãå®å¹éå¹¶è£éå¶å±æ§ä¸ XML æä»¶ä¸­ç±ç¸ååç§°å®ä¹ç beanã\n * byType - å®æ ¹æ®ç±»åæ³¨å¥å¯¹è±¡ä¾èµé¡¹ãå¦æå±æ§çç±»åä¸ XML æä»¶ä¸­çä¸ä¸ª bean åç§°å¹éï¼åå¹éå¹¶è£éå±æ§ã\n * æé å¨ - å®éè¿è°ç¨ç±»çæé å¨æ¥æ³¨å¥ä¾èµé¡¹ãå®æå¤§éçåæ°ã\n * autodetect - é¦åå®¹å¨å°è¯éè¿æé å¨ä½¿ç¨ autowire è£éï¼å¦æä¸è½ï¼åå°è¯éè¿ byType èªå¨è£éã\n\n# èªå¨è£éæä»ä¹å±éï¼\n\n * è¦ççå¯è½æ§ - æ¨å§ç»å¯ä»¥ä½¿ç¨ <constructor-arg> å <property> è®¾ç½®æå®ä¾èµé¡¹ï¼è¿å°è¦çèªå¨è£éã\n * åºæ¬åæ°æ®ç±»å - ç®åå±æ§ï¼å¦åæ°æ®ç±»åï¼å­ç¬¦ä¸²åç±»ï¼æ æ³èªå¨è£éã\n * ä»¤äººå°æçæ§è´¨ - æ»æ¯åæ¬¢ä½¿ç¨æç¡®çè£éï¼å ä¸ºèªå¨è£éä¸å¤ªç²¾ç¡®ã\n\n\n# AOP\n\n# ä»ä¹æ¯ AOPï¼\n\nAOP(Aspect-Oriented Programming), å³ é¢ååé¢ç¼ç¨, å®ä¸ OOP( Object-Oriented Programming, é¢åå¯¹è±¡ç¼ç¨) ç¸è¾ç¸æ, æä¾äºä¸ OOP ä¸åçæ½è±¡è½¯ä»¶ç»æçè§è§. å¨ OOP ä¸­, æä»¬ä»¥ç±»(class)ä½ä¸ºæä»¬çåºæ¬åå, è AOP ä¸­çåºæ¬ååæ¯ Aspect(åé¢)\n\n# AOP ä¸­ç AspectãAdviceãPointcutãJointPoint å Advice åæ°åå«æ¯ä»ä¹ï¼\n\n\n\n * Aspect - Aspect æ¯ä¸ä¸ªå®ç°äº¤åé®é¢çç±»ï¼ä¾å¦äºå¡ç®¡çãæ¹é¢å¯ä»¥æ¯éç½®çæ®éç±»ï¼ç¶åå¨ Spring Bean éç½®æä»¶ä¸­éç½®ï¼æèæä»¬å¯ä»¥ä½¿ç¨ Spring AspectJ æ¯æä½¿ç¨ @Aspect æ³¨è§£å°ç±»å£°æä¸º Aspectã\n * Advice - Advice æ¯éå¯¹ç¹å® JoinPoint éåçæä½ãå¨ç¼ç¨æ¹é¢ï¼å®ä»¬æ¯å¨åºç¨ç¨åºä¸­è¾¾å°å·æå¹éåå¥ç¹çç¹å® JoinPoint æ¶æ§è¡çæ¹æ³ãæ¨å¯ä»¥å° Advice è§ä¸º Spring æ¦æªå¨ï¼Interceptorï¼æ Servlet è¿æ»¤å¨ï¼filterï¼ã\n * Advice Arguments - æä»¬å¯ä»¥å¨ advice æ¹æ³ä¸­ä¼ éåæ°ãæä»¬å¯ä»¥å¨åå¥ç¹ä¸­ä½¿ç¨ args() è¡¨è¾¾å¼æ¥åºç¨äºä¸åæ°æ¨¡å¼å¹éçä»»ä½æ¹æ³ãå¦ææä»¬ä½¿ç¨å®ï¼é£ä¹æä»¬éè¦å¨ç¡®å®åæ°ç±»åç advice æ¹æ³ä¸­ä½¿ç¨ç¸åçåç§°ã\n * Pointcut - Pointcut æ¯ä¸ JoinPoint å¹éçæ­£åè¡¨è¾¾å¼ï¼ç¨äºç¡®å®æ¯å¦éè¦æ§è¡ Adviceã Pointcut ä½¿ç¨ä¸ JoinPoint å¹éçä¸åç±»åçè¡¨è¾¾å¼ãSpring æ¡æ¶ä½¿ç¨ AspectJ Pointcut è¡¨è¾¾å¼è¯­è¨æ¥ç¡®å®å°åºç¨éç¥æ¹æ³ç JoinPointã\n * JoinPoint - JoinPoint æ¯åºç¨ç¨åºä¸­çç¹å®ç¹ï¼ä¾å¦æ¹æ³æ§è¡ï¼å¼å¸¸å¤çï¼æ´æ¹å¯¹è±¡åéå¼ç­ãå¨ Spring AOP ä¸­ï¼JoinPoint å§ç»æ¯æ¹æ³çæ§è¡å¨ã\n\n# ä»ä¹æ¯éç¥ï¼Adviceï¼ï¼\n\nç¹å® JoinPoint å¤ç Aspect æéåçå¨ä½ç§°ä¸º AdviceãSpring AOP ä½¿ç¨ä¸ä¸ª Advice ä½ä¸ºæ¦æªå¨ï¼å¨ JoinPoint âå¨å´âç»´æ¤ä¸ç³»åçæ¦æªå¨ã\n\n# æåªäºç±»åçéç¥ï¼Adviceï¼ï¼\n\n * Before - è¿äºç±»åç Advice å¨ joinpoint æ¹æ³ä¹åæ§è¡ï¼å¹¶ä½¿ç¨ @Before æ³¨è§£æ è®°è¿è¡éç½®ã\n * After Returning - è¿äºç±»åç Advice å¨è¿æ¥ç¹æ¹æ³æ­£å¸¸æ§è¡åæ§è¡ï¼å¹¶ä½¿ç¨@AfterReturning æ³¨è§£æ è®°è¿è¡éç½®ã\n * After Throwing - è¿äºç±»åç Advice ä»å¨ joinpoint æ¹æ³éè¿æåºå¼å¸¸éåºå¹¶ä½¿ç¨ @AfterThrowing æ³¨è§£æ è®°éç½®æ¶æ§è¡ã\n * After (finally) - è¿äºç±»åç Advice å¨è¿æ¥ç¹æ¹æ³ä¹åæ§è¡ï¼æ è®ºæ¹æ³éåºæ¯æ­£å¸¸è¿æ¯å¼å¸¸è¿åï¼å¹¶ä½¿ç¨ @After æ³¨è§£æ è®°è¿è¡éç½®ã\n * Around - è¿äºç±»åç Advice å¨è¿æ¥ç¹ä¹ååä¹åæ§è¡ï¼å¹¶ä½¿ç¨ @Around æ³¨è§£æ è®°è¿è¡éç½®ã\n\n# æåºå¨ spring aop ä¸­ concern å cross-cutting concern çä¸åä¹å¤ã\n\nconcern æ¯æä»¬æ³è¦å¨åºç¨ç¨åºçç¹å®æ¨¡åä¸­å®ä¹çè¡ä¸ºãå®å¯ä»¥å®ä¹ä¸ºæä»¬æ³è¦å®ç°çåè½ã\n\ncross-cutting concern æ¯ä¸ä¸ªéç¨äºæ´ä¸ªåºç¨çè¡ä¸ºï¼è¿ä¼å½±åæ´ä¸ªåºç¨ç¨åºãä¾å¦ï¼æ¥å¿è®°å½ï¼å®å¨æ§åæ°æ®ä¼ è¾æ¯åºç¨ç¨åºå ä¹æ¯ä¸ªæ¨¡åé½éè¦å³æ³¨çé®é¢ï¼å æ­¤å®ä»¬æ¯è·¨é¢åçé®é¢ã\n\n# AOP æåªäºå®ç°æ¹å¼ï¼\n\nå®ç° AOP çææ¯ï¼ä¸»è¦åä¸ºä¸¤å¤§ç±»ï¼\n\n * éæä»£ç - æä½¿ç¨ AOP æ¡æ¶æä¾çå½ä»¤è¿è¡ç¼è¯ï¼ä»èå¨ç¼è¯é¶æ®µå°±å¯çæ AOP ä»£çç±»ï¼å æ­¤ä¹ç§°ä¸ºç¼è¯æ¶å¢å¼ºï¼\n   * ç¼è¯æ¶ç¼ç»ï¼ç¹æ®ç¼è¯å¨å®ç°ï¼\n   * ç±»å è½½æ¶ç¼ç»ï¼ç¹æ®çç±»å è½½å¨å®ç°ï¼ã\n * å¨æä»£ç - å¨è¿è¡æ¶å¨åå­ä¸­âä¸´æ¶âçæ AOP å¨æä»£çç±»ï¼å æ­¤ä¹è¢«ç§°ä¸ºè¿è¡æ¶å¢å¼ºã\n   * JDK å¨æä»£ç\n   * CGLIB\n\n# Spring AOP and AspectJ AOP æä»ä¹åºå«ï¼\n\nSpring AOP åºäºå¨æä»£çæ¹å¼å®ç°ï¼AspectJ åºäºéæä»£çæ¹å¼å®ç°ã Spring AOP ä»æ¯ææ¹æ³çº§å«ç PointCutï¼æä¾äºå®å¨ç AOP æ¯æï¼å®è¿æ¯æå±æ§çº§å«ç PointCutã\n\n# å¦ä½çè§£ Spring ä¸­çä»£çï¼\n\nå° Advice åºç¨äºç®æ å¯¹è±¡ååå»ºçå¯¹è±¡ç§°ä¸ºä»£çãå¨å®¢æ·ç«¯å¯¹è±¡çæåµä¸ï¼ç®æ å¯¹è±¡åä»£çå¯¹è±¡æ¯ç¸åçã\n\nAdvice + Target Object = Proxy\n\n\n# ä»ä¹æ¯ç¼ç»ï¼Weavingï¼ï¼\n\nä¸ºäºåå»ºä¸ä¸ª advice å¯¹è±¡èé¾æ¥ä¸ä¸ª aspect åå¶å®åºç¨ç±»åæå¯¹è±¡ï¼ç§°ä¸ºç¼ç»ï¼Weavingï¼ãå¨ Spring AOP ä¸­ï¼ç¼ç»å¨è¿è¡æ¶æ§è¡ãè¯·åèä¸å¾ï¼\n\n\n\n\n# æ³¨è§£\n\n\n# ä½ ç¨è¿åªäºéè¦ç Spring æ³¨è§£ï¼\n\n * @Controller - ç¨äº Spring MVC é¡¹ç®ä¸­çæ§å¶å¨ç±»ã\n * @Service - ç¨äºæå¡ç±»ã\n * @RequestMapping - ç¨äºå¨æ§å¶å¨å¤çç¨åºæ¹æ³ä¸­éç½® URI æ å°ã\n * @ResponseBody - ç¨äºåé Object ä½ä¸ºååºï¼éå¸¸ç¨äºåé XML æ JSON æ°æ®ä½ä¸ºååºã\n * @PathVariable - ç¨äºå°å¨æå¼ä» URI æ å°å°å¤çç¨åºæ¹æ³åæ°ã\n * @Autowired - ç¨äºå¨ spring bean ä¸­èªå¨è£éä¾èµé¡¹ã\n * @Qualifier - ä½¿ç¨ @Autowired æ³¨è§£ï¼ä»¥é¿åå¨å­å¨å¤ä¸ª bean ç±»åå®ä¾æ¶åºç°æ··æ·ã\n * @Scope - ç¨äºéç½® spring bean çèå´ã\n * @Configurationï¼@ComponentScan å @Bean - ç¨äºåºäº java çéç½®ã\n * @Aspectï¼@Beforeï¼@Afterï¼@Aroundï¼@Pointcut - ç¨äºåé¢ç¼ç¨ï¼AOPï¼ã\n\n\n# å¦ä½å¨ spring ä¸­å¯å¨æ³¨è§£è£éï¼\n\né»è®¤æåµä¸ï¼Spring å®¹å¨ä¸­æªæå¼æ³¨è§£è£éãå æ­¤ï¼è¦ä½¿ç¨åºäºæ³¨è§£è£éï¼æä»¬å¿é¡»éè¿éç½®<contextï¼annotation-config /> åç´ å¨ Spring éç½®æä»¶ä¸­å¯ç¨å®ã\n\n\n# @Component, @Controller, @Repository, @Service æä½åºå«ï¼\n\n * @Componentï¼è¿å° java ç±»æ è®°ä¸º beanãå®æ¯ä»»ä½ Spring ç®¡çç»ä»¶çéç¨æé åãspring çç»ä»¶æ«ææºå¶ç°å¨å¯ä»¥å°å¶æ¾åå¹¶å°å¶æå¥åºç¨ç¨åºç¯å¢ä¸­ã\n * @Controllerï¼è¿å°ä¸ä¸ªç±»æ è®°ä¸º Spring Web MVC æ§å¶å¨ãæ æå®ç Bean ä¼èªå¨å¯¼å¥å° IoC å®¹å¨ä¸­ã\n * @Serviceï¼æ­¤æ³¨è§£æ¯ç»ä»¶æ³¨è§£çç¹åãå®ä¸ä¼å¯¹ @Component æ³¨è§£æä¾ä»»ä½å¶ä»è¡ä¸ºãæ¨å¯ä»¥å¨æå¡å±ç±»ä¸­ä½¿ç¨ @Service èä¸æ¯ @Componentï¼å ä¸ºå®ä»¥æ´å¥½çæ¹å¼æå®äºæå¾ã\n * @Repositoryï¼è¿ä¸ªæ³¨è§£æ¯å·æç±»ä¼¼ç¨éååè½ç @Component æ³¨è§£çç¹åãå®ä¸º DAO æä¾äºé¢å¤çå¥½å¤ãå®å° DAO å¯¼å¥ IoC å®¹å¨ï¼å¹¶ä½¿æªç»æ£æ¥çå¼å¸¸æèµæ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã\n\n\n# @Required æ³¨è§£æä»ä¹ç¨ï¼\n\n@Required åºç¨äº bean å±æ§ setter æ¹æ³ãæ­¤æ³¨è§£ä»æç¤ºå¿é¡»å¨éç½®æ¶ä½¿ç¨ bean å®ä¹ä¸­çæ¾å¼å±æ§å¼æä½¿ç¨èªå¨è£éå¡«ååå½±åç bean å±æ§ãå¦æå°æªå¡«ååå½±åç bean å±æ§ï¼åå®¹å¨å°æåº BeanInitializationExceptionã\n\nç¤ºä¾ï¼\n\npublic class Employee {\n    private String name;\n    @Required\n    public void setName(String name){\n        this.name=name;\n    }\n    public string getName(){\n        return name;\n    }\n}\n\n\n\n# @Autowired æ³¨è§£æä»ä¹ç¨ï¼\n\n@Autowired å¯ä»¥æ´åç¡®å°æ§å¶åºè¯¥å¨ä½å¤ä»¥åå¦ä½è¿è¡èªå¨è£éãæ­¤æ³¨è§£ç¨äºå¨ setter æ¹æ³ï¼æé å¨ï¼å·æä»»æåç§°æå¤ä¸ªåæ°çå±æ§ææ¹æ³ä¸èªå¨è£é beanãé»è®¤æåµä¸ï¼å®æ¯ç±»åé©±å¨çæ³¨å¥ã\n\npublic class Employee {\n    private String name;\n    @Autowired\n    public void setName(String name) {\n        this.name=name;\n    }\n    public string getName(){\n        return name;\n    }\n}\n\n\n\n# @Qualifier æ³¨è§£æä»ä¹ç¨ï¼\n\nå½æ¨åå»ºå¤ä¸ªç¸åç±»åç bean å¹¶å¸æä»ä½¿ç¨å±æ§è£éå¶ä¸­ä¸ä¸ª bean æ¶ï¼æ¨å¯ä»¥ä½¿ç¨@Qualifier æ³¨è§£å @Autowired éè¿æå®åºè¯¥è£éåªä¸ªç¡®åç bean æ¥æ¶é¤æ­§ä¹ã\n\nä¾å¦ï¼è¿éæä»¬åå«æä¸¤ä¸ªç±»ï¼Employee å EmpAccountãå¨ EmpAccount ä¸­ï¼ä½¿ç¨@Qualifier æå®äºå¿é¡»è£é id ä¸º emp1 ç beanã\n\nEmployee.java\n\npublic class Employee {\n    private String name;\n    @Autowired\n    public void setName(String name) {\n        this.name=name;\n    }\n    public string getName() {\n        return name;\n    }\n}\n\n\nEmpAccount.java\n\npublic class EmpAccount {\n    private Employee emp;\n\n    @Autowired\n    @Qualifier(emp1)\n    public void showName() {\n        System.out.println(âEmployee name : â+emp.getName);\n    }\n}\n\n\n\n# @RequestMapping æ³¨è§£æä»ä¹ç¨ï¼\n\n@RequestMapping æ³¨è§£ç¨äºå°ç¹å® HTTP è¯·æ±æ¹æ³æ å°å°å°å¤çç¸åºè¯·æ±çæ§å¶å¨ä¸­çç¹å®ç±»/æ¹æ³ãæ­¤æ³¨è§£å¯åºç¨äºä¸¤ä¸ªçº§å«ï¼\n\n * ç±»çº§å«ï¼æ å°è¯·æ±ç URL\n * æ¹æ³çº§å«ï¼æ å° URL ä»¥å HTTP è¯·æ±æ¹æ³\n\n\n# æ°æ®ç¯\n\n\n# spring DAO æä»ä¹ç¨ï¼\n\nSpring DAO ä½¿å¾ JDBCï¼Hibernate æ JDO è¿æ ·çæ°æ®è®¿é®ææ¯æ´å®¹æä»¥ä¸ç§ç»ä¸çæ¹å¼å·¥ä½ãè¿ä½¿å¾ç¨æ·å®¹æå¨æä¹æ§ææ¯ä¹é´åæ¢ãå®è¿åè®¸æ¨å¨ç¼åä»£ç æ¶ï¼æ éèèæè·æ¯ç§ææ¯ä¸åçå¼å¸¸ã\n\n\n# åä¸¾ Spring DAO æåºçå¼å¸¸ã\n\n\n\n\n# spring JDBC API ä¸­å­å¨åªäºç±»ï¼\n\n * JdbcTemplate\n * SimpleJdbcTemplate\n * NamedParameterJdbcTemplate\n * SimpleJdbcInsert\n * SimpleJdbcCall\n\n\n# ä½¿ç¨ Spring è®¿é® Hibernate çæ¹æ³æåªäºï¼\n\næä»¬å¯ä»¥éè¿ä¸¤ç§æ¹å¼ä½¿ç¨ Spring è®¿é® Hibernateï¼\n\n 1. ä½¿ç¨ Hibernate æ¨¡æ¿ååè°è¿è¡æ§å¶åè½¬\n 2. æ©å± HibernateDAOSupport å¹¶åºç¨ AOP æ¦æªå¨èç¹\n\n\n# åä¸¾ spring æ¯æçäºå¡ç®¡çç±»å\n\nSpring æ¯æä¸¤ç§ç±»åçäºå¡ç®¡çï¼\n\n 1. ç¨åºåäºå¡ç®¡çï¼å¨æ­¤è¿ç¨ä¸­ï¼å¨ç¼ç¨çå¸®å©ä¸ç®¡çäºå¡ãå®ä¸ºæ¨æä¾æå¤§ççµæ´»æ§ï¼ä½ç»´æ¤èµ·æ¥éå¸¸å°é¾ã\n 2. å£°æå¼äºå¡ç®¡çï¼å¨æ­¤ï¼äºå¡ç®¡çä¸ä¸å¡ä»£ç åç¦»ãä»ä½¿ç¨æ³¨è§£æåºäº XML çéç½®æ¥ç®¡çäºå¡ã\n\n\n# spring æ¯æåªäº ORM æ¡æ¶\n\n * Hibernate\n * iBatis\n * JPA\n * JDO\n * OJB\n\n\n# MVC\n\n\n# Spring MVC æ¡æ¶æä»ä¹ç¨ï¼\n\nSpring Web MVC æ¡æ¶æä¾ æ¨¡å-è§å¾-æ§å¶å¨ æ¶æåéæ¶å¯ç¨çç»ä»¶ï¼ç¨äºå¼åçµæ´»ä¸æ¾æ£è¦åç Web åºç¨ç¨åºã MVC æ¨¡å¼æå©äºåç¦»åºç¨ç¨åºçä¸åæ¹é¢ï¼å¦è¾å¥é»è¾ï¼ä¸å¡é»è¾å UI é»è¾ï¼åæ¶å¨ææè¿äºåç´ ä¹é´æä¾æ¾æ£è¦åã\n\n\n# æè¿°ä¸ä¸ DispatcherServlet çå·¥ä½æµç¨\n\nDispatcherServlet çå·¥ä½æµç¨å¯ä»¥ç¨ä¸å¹å¾æ¥è¯´æï¼\n\n\n\n 1. åæå¡å¨åé HTTP è¯·æ±ï¼è¯·æ±è¢«åç«¯æ§å¶å¨ DispatcherServlet æè·ã\n 2. DispatcherServlet æ ¹æ® <servlet-name>-servlet.xml ä¸­çéç½®å¯¹è¯·æ±ç URL è¿è¡è§£æï¼å¾å°è¯·æ±èµæºæ è¯ç¬¦ï¼URIï¼ãç¶åæ ¹æ®è¯¥ URIï¼è°ç¨ HandlerMapping è·å¾è¯¥ Handler éç½®çææç¸å³çå¯¹è±¡ï¼åæ¬ Handler å¯¹è±¡ä»¥å Handler å¯¹è±¡å¯¹åºçæ¦æªå¨ï¼ï¼æåä»¥HandlerExecutionChain å¯¹è±¡çå½¢å¼è¿åã\n 3. DispatcherServlet æ ¹æ®è·å¾çHandlerï¼éæ©ä¸ä¸ªåéç HandlerAdapterãï¼éæ³¨ï¼å¦ææåè·å¾HandlerAdapteråï¼æ­¤æ¶å°å¼å§æ§è¡æ¦æªå¨ç preHandler(...)æ¹æ³ï¼ã\n 4. æåRequestä¸­çæ¨¡åæ°æ®ï¼å¡«åHandlerå¥åï¼å¼å§æ§è¡Handlerï¼Controller)ã å¨å¡«åHandlerçå¥åè¿ç¨ä¸­ï¼æ ¹æ®ä½ çéç½®ï¼Spring å°å¸®ä½ åä¸äºé¢å¤çå·¥ä½ï¼\n    * HttpMessageConveterï¼ å°è¯·æ±æ¶æ¯ï¼å¦ Jsonãxml ç­æ°æ®ï¼è½¬æ¢æä¸ä¸ªå¯¹è±¡ï¼å°å¯¹è±¡è½¬æ¢ä¸ºæå®çååºä¿¡æ¯ã\n    * æ°æ®è½¬æ¢ï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®è½¬æ¢ãå¦Stringè½¬æ¢æIntegerãDoubleç­ã\n    * æ°æ®æ ¹å¼åï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®æ ¼å¼åã å¦å°å­ç¬¦ä¸²è½¬æ¢ææ ¼å¼åæ°å­ææ ¼å¼åæ¥æç­ã\n    * æ°æ®éªè¯ï¼ éªè¯æ°æ®çæææ§ï¼é¿åº¦ãæ ¼å¼ç­ï¼ï¼éªè¯ç»æå­å¨å°BindingResultæErrorä¸­ã\n 5. Handler(Controller)æ§è¡å®æåï¼å DispatcherServlet è¿åä¸ä¸ª ModelAndView å¯¹è±¡ï¼\n 6. æ ¹æ®è¿åçModelAndViewï¼éæ©ä¸ä¸ªéåç ViewResolverï¼å¿é¡»æ¯å·²ç»æ³¨åå° Spring å®¹å¨ä¸­çViewResolver)è¿åç»DispatcherServletã\n 7. ViewResolver ç»åModelåViewï¼æ¥æ¸²æè§å¾ã\n 8. è§å¾è´è´£å°æ¸²æç»æè¿åç»å®¢æ·ç«¯ã\n\n\n# ä»ç»ä¸ä¸ WebApplicationContext\n\nWebApplicationContext æ¯ ApplicationContext çæ©å±ãå®å·æ Web åºç¨ç¨åºæéçä¸äºé¢å¤åè½ãå®ä¸æ®éç ApplicationContext å¨è§£æä¸»é¢åå³å®ä¸åªä¸ª servlet å³èçè½åæ¹é¢ææä¸åã\n\nï¼å®ï¼\n\n----------------------------------------\n\nð æ³å­¦ä¹ æ´å¤ Spring åå®¹å¯ä»¥è®¿é®æç Spring æç¨ï¼spring-notes\n\n\n# èµæ\n\n * Top 50 Spring Interview Questions You Must Prepare In 2018\n * Spring Interview Questions and Answers',normalizedContent:'# spring é¢è¯\n\n\n# ç»¼åç¯\n\n\n# ä¸åçæ¬ç spring framework æåªäºä¸»è¦åè½ï¼\n\nversion      feature\nspring 2.5   åå¸äº 2007 å¹´ãè¿æ¯ç¬¬ä¸ä¸ªæ¯ææ³¨è§£ççæ¬ã\nspring 3.0   åå¸äº 2009 å¹´ãå®å®å¨å©ç¨äº java5 ä¸­çæ¹è¿ï¼å¹¶ä¸º jee6 æä¾äºæ¯æã\nspring 4.0   åå¸äº 2013 å¹´ãè¿æ¯ç¬¬ä¸ä¸ªå®å¨æ¯æ java8 ççæ¬ã\n\n\n# ä»ä¹æ¯ spring frameworkï¼\n\n * spring æ¯ä¸ä¸ªå¼æºåºç¨æ¡æ¶ï¼æ¨å¨éä½åºç¨ç¨åºå¼åçå¤æåº¦ã\n * å®æ¯è½»éçº§ãæ¾æ£è¦åçã\n * å®å·æåå±ä½ç³»ç»æï¼åè®¸ç¨æ·éæ©ç»ä»¶ï¼åæ¶è¿ä¸º j2ee åºç¨ç¨åºå¼åæä¾äºä¸ä¸ªæåèåçæ¡æ¶ã\n * å®å¯ä»¥éæå¶ä»æ¡æ¶ï¼å¦ structsãhibernateãejb ç­ï¼æä»¥åç§°ä¸ºæ¡æ¶çæ¡æ¶ã\n\n\n# åä¸¾ spring framework çä¼ç¹ã\n\n * ç±äº spring frameworks çåå±æ¶æï¼ç¨æ·å¯ä»¥èªç±éæ©èªå·±éè¦çç»ä»¶ã\n * spring framework æ¯æ pojo(plain old java object) ç¼ç¨ï¼ä»èå·å¤æç»­éæåå¯æµè¯æ§ã\n * ç±äºä¾èµæ³¨å¥åæ§å¶åè½¬ï¼jdbc å¾ä»¥ç®åã\n * å®æ¯å¼æºåè´¹çã\n\n\n# spring framework æåªäºä¸åçåè½ï¼\n\n * è½»éçº§ - spring å¨ä»£ç éåéæåº¦æ¹é¢é½å¾è½»ä¾¿ã\n * ioc - æ§å¶åè½¬\n * aop - é¢ååé¢ç¼ç¨å¯ä»¥å°åºç¨ä¸å¡é»è¾åç³»ç»æå¡åç¦»ï¼ä»¥å®ç°é«åèã\n * å®¹å¨ - spring è´è´£åå»ºåç®¡çå¯¹è±¡ï¼beanï¼ççå½å¨æåéç½®ã\n * mvc - å¯¹ web åºç¨æä¾äºé«åº¦å¯éç½®æ§ï¼å¶ä»æ¡æ¶çéæä¹ååæ¹ä¾¿ã\n * äºå¡ç®¡ç - æä¾äºç¨äºäºå¡ç®¡ççéç¨æ½è±¡å±ãspring çäºå¡æ¯æä¹å¯ç¨äºå®¹å¨è¾å°çç¯å¢ã\n * jdbc å¼å¸¸ - spring ç jdbc æ½è±¡å±æä¾äºä¸ä¸ªå¼å¸¸å±æ¬¡ç»æï¼ç®åäºéè¯¯å¤çç­ç¥ã\n\n\n# spring framework ä¸­æå¤å°ä¸ªæ¨¡åï¼å®ä»¬åå«æ¯ä»ä¹ï¼\n\n\n\n * spring æ ¸å¿å®¹å¨ â è¯¥å±åºæ¬ä¸æ¯ spring framework çæ ¸å¿ãå®åå«ä»¥ä¸æ¨¡åï¼\n   * spring core\n   * spring bean\n   * spel (spring expression language)\n   * spring context\n * æ°æ®è®¿é®/éæ â è¯¥å±æä¾ä¸æ°æ®åºäº¤äºçæ¯æãå®åå«ä»¥ä¸æ¨¡åï¼\n   * jdbc (java database connectivity)\n   * orm (object relational mapping)\n   * oxm (object xml mappers)\n   * jms (java messaging service)\n   * transaction\n * web â è¯¥å±æä¾äºåå»º web åºç¨ç¨åºçæ¯æãå®åå«ä»¥ä¸æ¨¡åï¼\n   * web\n   * web â servlet\n   * web â socket\n   * web â portlet\n * aop â è¯¥å±æ¯æé¢ååé¢ç¼ç¨\n * instrumentation â è¯¥å±ä¸ºç±»æ£æµåç±»å è½½å¨å®ç°æä¾æ¯æã\n * test â è¯¥å±ä¸ºä½¿ç¨ junit å testng è¿è¡æµè¯æä¾æ¯æã\n * å ä¸ªæé¡¹æ¨¡å:\n   * messaging â è¯¥æ¨¡åä¸º stomp æä¾æ¯æãå®è¿æ¯ææ³¨è§£ç¼ç¨æ¨¡åï¼è¯¥æ¨¡åç¨äºä» websocket å®¢æ·ç«¯è·¯ç±åå¤ç stomp æ¶æ¯ã\n   * aspects â è¯¥æ¨¡åä¸ºä¸ aspectj çéææä¾æ¯æã\n\n\n# ä»ä¹æ¯ spring éç½®æä»¶ï¼\n\nspring éç½®æä»¶æ¯ xml æä»¶ãè¯¥æä»¶ä¸»è¦åå«ç±»ä¿¡æ¯ãå®æè¿°äºè¿äºç±»æ¯å¦ä½éç½®ä»¥åç¸äºå¼å¥çãä½æ¯ï¼xml éç½®æä»¶åé¿ä¸æ´å å¹²åãå¦ææ²¡ææ­£ç¡®è§ååç¼åï¼é£ä¹å¨å¤§é¡¹ç®ä¸­ç®¡çåå¾éå¸¸å°é¾ã\n\n\n# spring åºç¨ç¨åºæåªäºä¸åç»ä»¶ï¼\n\nspring åºç¨ä¸è¬æä»¥ä¸ç»ä»¶ï¼\n\n * æ¥å£ - å®ä¹åè½ã\n * bean ç±» - å®åå«å±æ§ï¼setter å getter æ¹æ³ï¼å½æ°ç­ã\n * spring é¢ååé¢ç¼ç¨ï¼aopï¼ - æä¾é¢ååé¢ç¼ç¨çåè½ã\n * bean éç½®æä»¶ - åå«ç±»çä¿¡æ¯ä»¥åå¦ä½éç½®å®ä»¬ã\n * ç¨æ·ç¨åº - å®ä½¿ç¨æ¥å£ã\n\n\n# ä½¿ç¨ spring æåªäºæ¹å¼ï¼\n\nä½¿ç¨ spring æä»¥ä¸æ¹å¼ï¼\n\n * ä½ä¸ºä¸ä¸ªæçç spring web åºç¨ç¨åºã\n * ä½ä¸ºç¬¬ä¸æ¹ web æ¡æ¶ï¼ä½¿ç¨ spring frameworks ä¸­é´å±ã\n * ç¨äºè¿ç¨ä½¿ç¨ã\n * ä½ä¸ºä¼ä¸çº§ java beanï¼å®å¯ä»¥åè£ç°æç pojoï¼plain old java objectsï¼ã\n\n\n# æ ¸å¿ç¯\n\n\n# ioc\n\n# ä»ä¹æ¯ iocï¼ä»ä¹æ¯ä¾èµæ³¨å¥ï¼ä»ä¹æ¯ spring iocï¼\n\nioc å³æ§å¶åè½¬ï¼inversion of controlï¼ç¼©åä¸º iocï¼ãioc åç§°ä¸ºä¾èµåç½®ååï¼è®¾è®¡æ¨¡å¼å­å¤§ååä¹ä¸ï¼ï¼å®çè¦ç¹å¨äºï¼ç¨åºè¦ä¾èµäºæ½è±¡æ¥å£ï¼ä¸è¦ä¾èµäºå·ä½å®ç°ãå®çä½ç¨å°±æ¯ç¨äºéä½ä»£ç é´çè¦ååº¦ã\n\nioc çå®ç°æ¹å¼æä¸¤ç§ï¼\n\n * ä¾èµæ³¨å¥ï¼dependency injectionï¼ç®ç§° diï¼ï¼ä¸éè¿ new() çæ¹å¼å¨ç±»åé¨åå»ºä¾èµç±»å¯¹è±¡ï¼èæ¯å°ä¾èµçç±»å¯¹è±¡å¨å¤é¨åå»ºå¥½ä¹åï¼éè¿æé å¨ãå½æ°åæ°ç­æ¹å¼ä¼ éï¼ææ³¨å¥ï¼ç»ç±»ä½¿ç¨ã\n * ä¾èµæ¥æ¾ï¼dependency lookupï¼ï¼å®¹å¨ä¸­çåæ§å¯¹è±¡éè¿å®¹å¨ç api æ¥æ¥æ¾èªå·±æä¾èµçèµæºååä½å¯¹è±¡ã\n\nspring ioc æ¯ ioc çä¸ç§å®ç°ãdi æ¯ spring ioc çä¸»è¦å®ç°ååã\n\n\n\n# ä¾èµæ³¨å¥æåªäºå®ç°æ¹å¼ï¼\n\nä¾èµæ³¨å¥æå¦ä¸æ¹å¼ï¼\n\nä¾èµæ³¨å¥æ¹å¼        éç½®åæ°æ®ä¸¾ä¾\nsetter æ¹æ³æ³¨å¥   <proeprty name="user" ref="userbean"/>\næé å¨æ³¨å¥         <constructor-arg name="user" ref="userbean" />\nå­æ®µæ³¨å¥          @autowired user user;\næ¹æ³æ³¨å¥          @autowired public void user(user user) { ... }\næ¥å£åè°æ³¨å¥        class mybean implements beanfactoryaware { ... }\n\n# æé å¨æ³¨å¥ vs. setter æ³¨å¥\n\næé å¨æ³¨å¥            setter æ³¨å¥\næ²¡æé¨åæ³¨å¥           æé¨åæ³¨å¥\nä¸ä¼è¦ç setter å±æ§   ä¼è¦ç setter å±æ§\nä»»æä¿®æ¹é½ä¼åå»ºä¸ä¸ªæ°å®ä¾    ä»»æä¿®æ¹ä¸ä¼åå»ºä¸ä¸ªæ°å®ä¾\néç¨äºè®¾ç½®å¾å¤å±æ§        éç¨äºè®¾ç½®å°éå±æ§\n\nå®æ¹æ¨èä½¿ç¨æé å¨æ³¨å¥ã\n\n# beanfactory vs. applicationcontext\n\nå¨ spring ä¸­ï¼æä¸¤ç§ ioc å®¹å¨ï¼beanfactory å applicationcontextã\n\n * beanfactoryï¼beanfactory æ¯ spring åºç¡ ioc å®¹å¨ãbeanfactory æä¾äº spring å®¹å¨çéç½®æ¡æ¶ååºæ¬åè½ã\n * applicationcontextï¼applicationcontext æ¯å·å¤åºç¨ç¹æ§ç beanfactory çå­æ¥å£ãå®è¿æ©å±äºå¶ä»ä¸äºæ¥å£ï¼ä»¥æ¯ææ´ä¸°å¯çåè½ï¼å¦ï¼å½éåãè®¿é®èµæºãäºä»¶æºå¶ãæ´æ¹ä¾¿çæ¯æ aopãå¨ web åºç¨ä¸­æå®åºç¨å±ä¸ä¸æç­ã\n\nå®éå¼åä¸­ï¼æ´æ¨èä½¿ç¨ applicationcontext ä½ä¸º ioc å®¹å¨ï¼å ä¸ºå®çåè½è¿å¤äº beanfactoryã\n\n# beanfactory vs. factorybean\n\nbeanfactory æ¯ spring åºç¡ ioc å®¹å¨ã\n\nfactorybean æ¯åå»º bean çä¸ç§æ¹å¼ï¼å¸®å©å®ç°å¤æçåå§åé»è¾ã\n\n# spring ioc å¯å¨æ¶åäºåªäºåå¤\n\nioc éç½®åä¿¡æ¯è¯»ååè§£æ\n\nioc å®¹å¨çå½å¨æç®¡ç\n\nspring äºä»¶åå¸\n\nå½éå\n\nç­ç­\n\n# spring ioc çå®ç°æºå¶æ¯ä»ä¹\n\nspring ä¸­ç ioc çå®ç°åçå°±æ¯å·¥åæ¨¡å¼å åå°æºå¶ã\n\nç¤ºä¾ï¼\n\ninterface fruit {\n     public abstract void eat();\n}\nclass apple implements fruit {\n    public void eat(){\n        system.out.println("apple");\n    }\n}\nclass orange implements fruit {\n    public void eat(){\n        system.out.println("orange");\n    }\n}\nclass factory {\n    public static fruit getinstance(string classname) {\n        fruit f=null;\n        try {\n            f=(fruit)class.forname(classname).newinstance();\n        } catch (exception e) {\n            e.printstacktrace();\n        }\n        return f;\n    }\n}\nclass client {\n    public static void main(string[] a) {\n        fruit f=factory.getinstance("io.github.dunwu.spring.apple");\n        if(f!=null){\n            f.eat();\n        }\n    }\n}\n\n\n\n# bean\n\n# ä»ä¹æ¯ spring bean\n\nå¨ spring ä¸­ï¼ææåºç¨ç¨åºä¸»ä½ç± spring ioc å®¹å¨ç®¡ççå¯¹è±¡ç§°ä¸º beanãbean æ¯ç± spring ioc å®¹å¨å®ä¾åãè£éåç®¡ççå¯¹è±¡ã bean ä»¥åå®ä»¬ä¹é´çä¾èµå³ç³»åæ å¨å®¹å¨ä½¿ç¨çéç½®åæ°æ®ä¸­ã\n\nspring ioc å®¹å¨æ¬èº«ï¼å¹¶ä¸è½è¯å«éç½®çåæ°æ®ãä¸ºæ­¤ï¼è¦å°è¿äºéç½®ä¿¡æ¯è½¬ä¸º spring è½è¯å«çæ ¼å¼ââbeandefinition å¯¹è±¡ã\n\nbeandefinition æ¯ spring ä¸­å®ä¹ bean çéç½®åä¿¡æ¯æ¥å£ï¼å®åå«ï¼\n\n * bean ç±»å\n * bean è¡ä¸ºéç½®åç´ ï¼å¦ï¼ä½ç¨åãèªå¨ç»å®çæ¨¡å¼ãçå½å¨æåè°ç­\n * å¶ä» bean å¼ç¨ï¼ä¹å¯ç§°ä¸ºåä½èï¼collaboratorsï¼æä¾èµï¼dependenciesï¼\n * éç½®è®¾ç½®ï¼å¦ bean å±æ§ï¼propertiesï¼\n\n# å¦ä½æ³¨å spring bean\n\néè¿ beandefinition åå¤é¨åä¾å¯¹è±¡æ¥æ³¨åã\n\n# spring æä¾äºåªäºéç½®æ¹å¼ï¼\n\n * åºäº xml éç½®\n\nbean æéçä¾èµé¡¹åæå¡å¨ xml æ ¼å¼çéç½®æä»¶ä¸­æå®ãè¿äºéç½®æä»¶éå¸¸åå«è®¸å¤ bean å®ä¹åç¹å®äºåºç¨ç¨åºçéç½®éé¡¹ãå®ä»¬éå¸¸ä»¥ bean æ ç­¾å¼å¤´ãä¾å¦ï¼\n\n<bean id="studentbean" class="org.edureka.firstspring.studentbean">\n <property name="name" value="edureka"></property>\n</bean>\n\n\n * åºäºæ³¨è§£éç½®\n\næ¨å¯ä»¥éè¿å¨ç¸å³çç±»ï¼æ¹æ³æå­æ®µå£°æä¸ä½¿ç¨æ³¨è§£ï¼å° bean éç½®ä¸ºç»ä»¶ç±»æ¬èº«ï¼èä¸æ¯ä½¿ç¨ xml æ¥æè¿° bean è£éãé»è®¤æåµä¸ï¼spring å®¹å¨ä¸­æªæå¼æ³¨è§£è£éãå æ­¤ï¼æ¨éè¦å¨ä½¿ç¨å®ä¹åå¨ spring éç½®æä»¶ä¸­å¯ç¨å®ãä¾å¦ï¼\n\n<beans>\n<context:annotation-config/>\n\x3c!-- bean definitions go here --\x3e\n</beans>\n\n\n * åºäº java api éç½®\n\nspring ç java éç½®æ¯éè¿ä½¿ç¨ @bean å @configuration æ¥å®ç°ã\n\n 1. @bean æ³¨è§£æ®æ¼ä¸ <bean /> åç´ ç¸åçè§è²ã\n 2. @configuration ç±»åè®¸éè¿ç®åå°è°ç¨åä¸ä¸ªç±»ä¸­çå¶ä» @bean æ¹æ³æ¥å®ä¹ bean é´ä¾èµå³ç³»ã\n\nä¾å¦ï¼\n\n@configuration\npublic class studentconfig {\n    @bean\n    public studentbean mystudent() {\n        return new studentbean();\n    }\n}\n\n\n# spring æ¯æéä¸­ bean scopeï¼\n\nspring bean æ¯æ 5 ç§ scopeï¼\n\n * singleton - æ¯ä¸ª spring ioc å®¹å¨ä»æä¸ä¸ªåå®ä¾ã\n * prototype - æ¯æ¬¡è¯·æ±é½ä¼äº§çä¸ä¸ªæ°çå®ä¾ã\n * request - æ¯ä¸æ¬¡ http è¯·æ±é½ä¼äº§çä¸ä¸ªæ°çå®ä¾ï¼å¹¶ä¸è¯¥ bean ä»å¨å½å http è¯·æ±åææã\n * session - æ¯ä¸æ¬¡ http è¯·æ±é½ä¼äº§çä¸ä¸ªæ°ç beanï¼åæ¶è¯¥ bean ä»å¨å½å http session åææã\n * global-session - ç±»ä¼¼äºæ åç http session ä½ç¨åï¼ä¸è¿å®ä»ä»å¨åºäº portlet ç web åºç¨ä¸­æææä¹ãportlet è§èå®ä¹äºå¨å± session çæ¦å¿µï¼å®è¢«æææææä¸ª portlet web åºç¨çåç§ä¸åç portlet æå±äº«ãå¨ global session ä½ç¨åä¸­å®ä¹ç bean è¢«éå®äºå¨å± portlet session ççå½å¨æèå´åãå¦æä½ å¨ web ä¸­ä½¿ç¨ global session ä½ç¨åæ¥æ è¯ beanï¼é£ä¹ web ä¼èªå¨å½æ session ç±»åæ¥ä½¿ç¨ã\n\nä»å½ç¨æ·ä½¿ç¨æ¯æ web ç applicationcontext æ¶ï¼æåä¸ä¸ªæå¯ç¨ã\n\n# spring bean ççå½å¨æ\n\n\n\nspring bean å®¹å¨ççå½å¨æå¦ä¸ï¼\n\n 1.  spring å¯¹ bean è¿è¡å®ä¾åï¼ç¸å½äº new xxx()ï¼\n\n 2.  spring å°å¼åå¼ç¨æ³¨å¥å° bean å¯¹åºçå±æ§ä¸­\n\n 3.  å¦æ bean å®ç°äº beannameaware æ¥å£ï¼spring å° bean ç id ä¼ éç» setbeanname æ¹æ³\n     \n     * ä½ç¨æ¯éè¿ bean çå¼ç¨æ¥è·å¾ bean idï¼ä¸è¬ä¸å¡ä¸­æ¯å¾å°æç¨å° bean ç id ç\n\n 4.  å¦æ bean å®ç°äº beanfactoryaware æ¥å£ï¼spring å°è°ç¨ setbeandactory æ¹æ³ï¼å¹¶æ beanfactory å®¹å¨å®ä¾ä½ä¸ºåæ°ä¼ å¥ã\n     \n     * ä½ç¨æ¯è·å spring å®¹å¨ï¼å¦ bean éè¿ spring å®¹å¨åå¸äºä»¶ç­\n\n 5.  å¦æ bean å®ç°äº applicationcontextaware æ¥å£ï¼spring å®¹å¨å°è°ç¨ setapplicationcontext æ¹æ³ï¼æåºç¨ä¸ä¸æä½ä¸ºåæ°ä¼ å¥\n     \n     * ä½ç¨ä¸ beanfactory ç±»ä¼¼é½æ¯ä¸ºäºè·å spring å®¹å¨ï¼ä¸åçæ¯ spring å®¹å¨å¨è°ç¨ setapplicationcontext æ¹æ³æ¶ä¼æå®èªå·±ä½ä¸º setapplicationcontext çåæ°ä¼ å¥ï¼è spring å®¹å¨å¨è°ç¨ setbeanfactory åéè¦ä½¿ç¨èèªå·±æå®ï¼æ³¨å¥ï¼setbeanfactory éçåæ° beanfactory\n\n 6.  å¦æ bean å®ç°äº beanpostprocess æ¥å£ï¼spring å°è°ç¨ postprocessbeforeinitialization æ¹æ³\n     \n     * ä½ç¨æ¯å¨ bean å®ä¾åå»ºæååå¯¹å¶è¿è¡å¢å¼ºå¤çï¼å¦å¯¹ bean è¿è¡ä¿®æ¹ï¼å¢å æä¸ªåè½\n\n 7.  å¦æ bean å®ç°äº initializingbean æ¥å£ï¼spring å°è°ç¨ afterpropertiesset æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ bean ä½¿ç¨ init-method å£°æåå§åçä½ç¨ä¸æ ·ï¼é½æ¯å¨ bean çå¨é¨å±æ§è®¾ç½®æååæ§è¡çåå§åæ¹æ³ã\n\n 8.  å¦æ bean å®ç°äº beanpostprocess æ¥å£ï¼spring å°è°ç¨ postprocessafterinitialization æ¹æ³\n     \n     * postprocessbeforeinitialization æ¯å¨ bean åå§ååæ§è¡çï¼è postprocessafterinitialization æ¯å¨ bean åå§ååæ§è¡ç\n\n 9.  ç»è¿ä»¥ä¸çå·¥ä½åï¼bean å°ä¸ç´é©»çå¨åºç¨ä¸ä¸æä¸­ç»åºç¨ä½¿ç¨ï¼ç´å°åºç¨ä¸ä¸æè¢«éæ¯\n\n 10. å¦æ bean å®ç°äº dispostblebean æ¥å£ï¼spring å°è°ç¨å®ç destory æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ bean ä½¿ç¨ destory-method å±æ§çä½ç¨ä¸æ ·ï¼é½æ¯å¨ bean å®ä¾éæ¯åæ§è¡çæ¹æ³ã\n\n# ä»ä¹æ¯ spring çåé¨ beanï¼\n\nåªæå° bean ç¨ä½å¦ä¸ä¸ª bean çå±æ§æ¶ï¼æè½å° bean å£°æä¸ºåé¨ beanãä¸ºäºå®ä¹ beanï¼spring çåºäº xml çéç½®åæ°æ®å¨ <property> æ <constructor-arg> ä¸­æä¾äº <bean> åç´ çä½¿ç¨ãåé¨ bean æ»æ¯å¿åçï¼å®ä»¬æ»æ¯ä½ä¸ºååã\n\nä¾å¦ï¼åè®¾æä»¬æä¸ä¸ª student ç±»ï¼å¶ä¸­å¼ç¨äº person ç±»ãè¿éæä»¬å°åªåå»ºä¸ä¸ª person ç±»å®ä¾å¹¶å¨ student ä¸­ä½¿ç¨å®ã\n\nstudent.java\n\npublic class student {\n    private person person;\n    //setters and getters\n}\npublic class person {\n    private string name;\n    private string address;\n    //setters and getters\n}\n\n\nbean.xml\n\n<bean id=âstudentbean" class="com.edureka.student">\n    <property name="person">\n        \x3c!--this is inner bean --\x3e\n        <bean class="com.edureka.person">\n            <property name="name" value=âscott"></property>\n            <property name="address" value=âbangalore"></property>\n        </bean>\n    </property>\n</bean>\n\n\n# ä»ä¹æ¯ spring è£é\n\nå½ bean å¨ spring å®¹å¨ä¸­ç»åå¨ä¸èµ·æ¶ï¼å®è¢«ç§°ä¸ºè£éæ bean è£éã spring å®¹å¨éè¦ç¥ééè¦ä»ä¹ bean ä»¥åå®¹å¨åºè¯¥å¦ä½ä½¿ç¨ä¾èµæ³¨å¥æ¥å° bean ç»å®å¨ä¸èµ·ï¼åæ¶è£é beanã\n\n# èªå¨è£éæåªäºæ¹å¼ï¼\n\nspring å®¹å¨è½å¤èªå¨è£é beanãä¹å°±æ¯è¯´ï¼å¯ä»¥éè¿æ£æ¥ beanfactory çåå®¹è®© spring èªå¨è§£æ bean çåä½èã\n\nèªå¨è£éçä¸åæ¨¡å¼ï¼\n\n * no - è¿æ¯é»è®¤è®¾ç½®ï¼è¡¨ç¤ºæ²¡æèªå¨è£éãåºä½¿ç¨æ¾å¼ bean å¼ç¨è¿è¡è£éã\n * byname - å®æ ¹æ® bean çåç§°æ³¨å¥å¯¹è±¡ä¾èµé¡¹ãå®å¹éå¹¶è£éå¶å±æ§ä¸ xml æä»¶ä¸­ç±ç¸ååç§°å®ä¹ç beanã\n * bytype - å®æ ¹æ®ç±»åæ³¨å¥å¯¹è±¡ä¾èµé¡¹ãå¦æå±æ§çç±»åä¸ xml æä»¶ä¸­çä¸ä¸ª bean åç§°å¹éï¼åå¹éå¹¶è£éå±æ§ã\n * æé å¨ - å®éè¿è°ç¨ç±»çæé å¨æ¥æ³¨å¥ä¾èµé¡¹ãå®æå¤§éçåæ°ã\n * autodetect - é¦åå®¹å¨å°è¯éè¿æé å¨ä½¿ç¨ autowire è£éï¼å¦æä¸è½ï¼åå°è¯éè¿ bytype èªå¨è£éã\n\n# èªå¨è£éæä»ä¹å±éï¼\n\n * è¦ççå¯è½æ§ - æ¨å§ç»å¯ä»¥ä½¿ç¨ <constructor-arg> å <property> è®¾ç½®æå®ä¾èµé¡¹ï¼è¿å°è¦çèªå¨è£éã\n * åºæ¬åæ°æ®ç±»å - ç®åå±æ§ï¼å¦åæ°æ®ç±»åï¼å­ç¬¦ä¸²åç±»ï¼æ æ³èªå¨è£éã\n * ä»¤äººå°æçæ§è´¨ - æ»æ¯åæ¬¢ä½¿ç¨æç¡®çè£éï¼å ä¸ºèªå¨è£éä¸å¤ªç²¾ç¡®ã\n\n\n# aop\n\n# ä»ä¹æ¯ aopï¼\n\naop(aspect-oriented programming), å³ é¢ååé¢ç¼ç¨, å®ä¸ oop( object-oriented programming, é¢åå¯¹è±¡ç¼ç¨) ç¸è¾ç¸æ, æä¾äºä¸ oop ä¸åçæ½è±¡è½¯ä»¶ç»æçè§è§. å¨ oop ä¸­, æä»¬ä»¥ç±»(class)ä½ä¸ºæä»¬çåºæ¬åå, è aop ä¸­çåºæ¬ååæ¯ aspect(åé¢)\n\n# aop ä¸­ç aspectãadviceãpointcutãjointpoint å advice åæ°åå«æ¯ä»ä¹ï¼\n\n\n\n * aspect - aspect æ¯ä¸ä¸ªå®ç°äº¤åé®é¢çç±»ï¼ä¾å¦äºå¡ç®¡çãæ¹é¢å¯ä»¥æ¯éç½®çæ®éç±»ï¼ç¶åå¨ spring bean éç½®æä»¶ä¸­éç½®ï¼æèæä»¬å¯ä»¥ä½¿ç¨ spring aspectj æ¯æä½¿ç¨ @aspect æ³¨è§£å°ç±»å£°æä¸º aspectã\n * advice - advice æ¯éå¯¹ç¹å® joinpoint éåçæä½ãå¨ç¼ç¨æ¹é¢ï¼å®ä»¬æ¯å¨åºç¨ç¨åºä¸­è¾¾å°å·æå¹éåå¥ç¹çç¹å® joinpoint æ¶æ§è¡çæ¹æ³ãæ¨å¯ä»¥å° advice è§ä¸º spring æ¦æªå¨ï¼interceptorï¼æ servlet è¿æ»¤å¨ï¼filterï¼ã\n * advice arguments - æä»¬å¯ä»¥å¨ advice æ¹æ³ä¸­ä¼ éåæ°ãæä»¬å¯ä»¥å¨åå¥ç¹ä¸­ä½¿ç¨ args() è¡¨è¾¾å¼æ¥åºç¨äºä¸åæ°æ¨¡å¼å¹éçä»»ä½æ¹æ³ãå¦ææä»¬ä½¿ç¨å®ï¼é£ä¹æä»¬éè¦å¨ç¡®å®åæ°ç±»åç advice æ¹æ³ä¸­ä½¿ç¨ç¸åçåç§°ã\n * pointcut - pointcut æ¯ä¸ joinpoint å¹éçæ­£åè¡¨è¾¾å¼ï¼ç¨äºç¡®å®æ¯å¦éè¦æ§è¡ adviceã pointcut ä½¿ç¨ä¸ joinpoint å¹éçä¸åç±»åçè¡¨è¾¾å¼ãspring æ¡æ¶ä½¿ç¨ aspectj pointcut è¡¨è¾¾å¼è¯­è¨æ¥ç¡®å®å°åºç¨éç¥æ¹æ³ç joinpointã\n * joinpoint - joinpoint æ¯åºç¨ç¨åºä¸­çç¹å®ç¹ï¼ä¾å¦æ¹æ³æ§è¡ï¼å¼å¸¸å¤çï¼æ´æ¹å¯¹è±¡åéå¼ç­ãå¨ spring aop ä¸­ï¼joinpoint å§ç»æ¯æ¹æ³çæ§è¡å¨ã\n\n# ä»ä¹æ¯éç¥ï¼adviceï¼ï¼\n\nç¹å® joinpoint å¤ç aspect æéåçå¨ä½ç§°ä¸º adviceãspring aop ä½¿ç¨ä¸ä¸ª advice ä½ä¸ºæ¦æªå¨ï¼å¨ joinpoint âå¨å´âç»´æ¤ä¸ç³»åçæ¦æªå¨ã\n\n# æåªäºç±»åçéç¥ï¼adviceï¼ï¼\n\n * before - è¿äºç±»åç advice å¨ joinpoint æ¹æ³ä¹åæ§è¡ï¼å¹¶ä½¿ç¨ @before æ³¨è§£æ è®°è¿è¡éç½®ã\n * after returning - è¿äºç±»åç advice å¨è¿æ¥ç¹æ¹æ³æ­£å¸¸æ§è¡åæ§è¡ï¼å¹¶ä½¿ç¨@afterreturning æ³¨è§£æ è®°è¿è¡éç½®ã\n * after throwing - è¿äºç±»åç advice ä»å¨ joinpoint æ¹æ³éè¿æåºå¼å¸¸éåºå¹¶ä½¿ç¨ @afterthrowing æ³¨è§£æ è®°éç½®æ¶æ§è¡ã\n * after (finally) - è¿äºç±»åç advice å¨è¿æ¥ç¹æ¹æ³ä¹åæ§è¡ï¼æ è®ºæ¹æ³éåºæ¯æ­£å¸¸è¿æ¯å¼å¸¸è¿åï¼å¹¶ä½¿ç¨ @after æ³¨è§£æ è®°è¿è¡éç½®ã\n * around - è¿äºç±»åç advice å¨è¿æ¥ç¹ä¹ååä¹åæ§è¡ï¼å¹¶ä½¿ç¨ @around æ³¨è§£æ è®°è¿è¡éç½®ã\n\n# æåºå¨ spring aop ä¸­ concern å cross-cutting concern çä¸åä¹å¤ã\n\nconcern æ¯æä»¬æ³è¦å¨åºç¨ç¨åºçç¹å®æ¨¡åä¸­å®ä¹çè¡ä¸ºãå®å¯ä»¥å®ä¹ä¸ºæä»¬æ³è¦å®ç°çåè½ã\n\ncross-cutting concern æ¯ä¸ä¸ªéç¨äºæ´ä¸ªåºç¨çè¡ä¸ºï¼è¿ä¼å½±åæ´ä¸ªåºç¨ç¨åºãä¾å¦ï¼æ¥å¿è®°å½ï¼å®å¨æ§åæ°æ®ä¼ è¾æ¯åºç¨ç¨åºå ä¹æ¯ä¸ªæ¨¡åé½éè¦å³æ³¨çé®é¢ï¼å æ­¤å®ä»¬æ¯è·¨é¢åçé®é¢ã\n\n# aop æåªäºå®ç°æ¹å¼ï¼\n\nå®ç° aop çææ¯ï¼ä¸»è¦åä¸ºä¸¤å¤§ç±»ï¼\n\n * éæä»£ç - æä½¿ç¨ aop æ¡æ¶æä¾çå½ä»¤è¿è¡ç¼è¯ï¼ä»èå¨ç¼è¯é¶æ®µå°±å¯çæ aop ä»£çç±»ï¼å æ­¤ä¹ç§°ä¸ºç¼è¯æ¶å¢å¼ºï¼\n   * ç¼è¯æ¶ç¼ç»ï¼ç¹æ®ç¼è¯å¨å®ç°ï¼\n   * ç±»å è½½æ¶ç¼ç»ï¼ç¹æ®çç±»å è½½å¨å®ç°ï¼ã\n * å¨æä»£ç - å¨è¿è¡æ¶å¨åå­ä¸­âä¸´æ¶âçæ aop å¨æä»£çç±»ï¼å æ­¤ä¹è¢«ç§°ä¸ºè¿è¡æ¶å¢å¼ºã\n   * jdk å¨æä»£ç\n   * cglib\n\n# spring aop and aspectj aop æä»ä¹åºå«ï¼\n\nspring aop åºäºå¨æä»£çæ¹å¼å®ç°ï¼aspectj åºäºéæä»£çæ¹å¼å®ç°ã spring aop ä»æ¯ææ¹æ³çº§å«ç pointcutï¼æä¾äºå®å¨ç aop æ¯æï¼å®è¿æ¯æå±æ§çº§å«ç pointcutã\n\n# å¦ä½çè§£ spring ä¸­çä»£çï¼\n\nå° advice åºç¨äºç®æ å¯¹è±¡ååå»ºçå¯¹è±¡ç§°ä¸ºä»£çãå¨å®¢æ·ç«¯å¯¹è±¡çæåµä¸ï¼ç®æ å¯¹è±¡åä»£çå¯¹è±¡æ¯ç¸åçã\n\nadvice + target object = proxy\n\n\n# ä»ä¹æ¯ç¼ç»ï¼weavingï¼ï¼\n\nä¸ºäºåå»ºä¸ä¸ª advice å¯¹è±¡èé¾æ¥ä¸ä¸ª aspect åå¶å®åºç¨ç±»åæå¯¹è±¡ï¼ç§°ä¸ºç¼ç»ï¼weavingï¼ãå¨ spring aop ä¸­ï¼ç¼ç»å¨è¿è¡æ¶æ§è¡ãè¯·åèä¸å¾ï¼\n\n\n\n\n# æ³¨è§£\n\n\n# ä½ ç¨è¿åªäºéè¦ç spring æ³¨è§£ï¼\n\n * @controller - ç¨äº spring mvc é¡¹ç®ä¸­çæ§å¶å¨ç±»ã\n * @service - ç¨äºæå¡ç±»ã\n * @requestmapping - ç¨äºå¨æ§å¶å¨å¤çç¨åºæ¹æ³ä¸­éç½® uri æ å°ã\n * @responsebody - ç¨äºåé object ä½ä¸ºååºï¼éå¸¸ç¨äºåé xml æ json æ°æ®ä½ä¸ºååºã\n * @pathvariable - ç¨äºå°å¨æå¼ä» uri æ å°å°å¤çç¨åºæ¹æ³åæ°ã\n * @autowired - ç¨äºå¨ spring bean ä¸­èªå¨è£éä¾èµé¡¹ã\n * @qualifier - ä½¿ç¨ @autowired æ³¨è§£ï¼ä»¥é¿åå¨å­å¨å¤ä¸ª bean ç±»åå®ä¾æ¶åºç°æ··æ·ã\n * @scope - ç¨äºéç½® spring bean çèå´ã\n * @configurationï¼@componentscan å @bean - ç¨äºåºäº java çéç½®ã\n * @aspectï¼@beforeï¼@afterï¼@aroundï¼@pointcut - ç¨äºåé¢ç¼ç¨ï¼aopï¼ã\n\n\n# å¦ä½å¨ spring ä¸­å¯å¨æ³¨è§£è£éï¼\n\né»è®¤æåµä¸ï¼spring å®¹å¨ä¸­æªæå¼æ³¨è§£è£éãå æ­¤ï¼è¦ä½¿ç¨åºäºæ³¨è§£è£éï¼æä»¬å¿é¡»éè¿éç½®<contextï¼annotation-config /> åç´ å¨ spring éç½®æä»¶ä¸­å¯ç¨å®ã\n\n\n# @component, @controller, @repository, @service æä½åºå«ï¼\n\n * @componentï¼è¿å° java ç±»æ è®°ä¸º beanãå®æ¯ä»»ä½ spring ç®¡çç»ä»¶çéç¨æé åãspring çç»ä»¶æ«ææºå¶ç°å¨å¯ä»¥å°å¶æ¾åå¹¶å°å¶æå¥åºç¨ç¨åºç¯å¢ä¸­ã\n * @controllerï¼è¿å°ä¸ä¸ªç±»æ è®°ä¸º spring web mvc æ§å¶å¨ãæ æå®ç bean ä¼èªå¨å¯¼å¥å° ioc å®¹å¨ä¸­ã\n * @serviceï¼æ­¤æ³¨è§£æ¯ç»ä»¶æ³¨è§£çç¹åãå®ä¸ä¼å¯¹ @component æ³¨è§£æä¾ä»»ä½å¶ä»è¡ä¸ºãæ¨å¯ä»¥å¨æå¡å±ç±»ä¸­ä½¿ç¨ @service èä¸æ¯ @componentï¼å ä¸ºå®ä»¥æ´å¥½çæ¹å¼æå®äºæå¾ã\n * @repositoryï¼è¿ä¸ªæ³¨è§£æ¯å·æç±»ä¼¼ç¨éååè½ç @component æ³¨è§£çç¹åãå®ä¸º dao æä¾äºé¢å¤çå¥½å¤ãå®å° dao å¯¼å¥ ioc å®¹å¨ï¼å¹¶ä½¿æªç»æ£æ¥çå¼å¸¸æèµæ ¼è½¬æ¢ä¸º spring dataaccessexceptionã\n\n\n# @required æ³¨è§£æä»ä¹ç¨ï¼\n\n@required åºç¨äº bean å±æ§ setter æ¹æ³ãæ­¤æ³¨è§£ä»æç¤ºå¿é¡»å¨éç½®æ¶ä½¿ç¨ bean å®ä¹ä¸­çæ¾å¼å±æ§å¼æä½¿ç¨èªå¨è£éå¡«ååå½±åç bean å±æ§ãå¦æå°æªå¡«ååå½±åç bean å±æ§ï¼åå®¹å¨å°æåº beaninitializationexceptionã\n\nç¤ºä¾ï¼\n\npublic class employee {\n    private string name;\n    @required\n    public void setname(string name){\n        this.name=name;\n    }\n    public string getname(){\n        return name;\n    }\n}\n\n\n\n# @autowired æ³¨è§£æä»ä¹ç¨ï¼\n\n@autowired å¯ä»¥æ´åç¡®å°æ§å¶åºè¯¥å¨ä½å¤ä»¥åå¦ä½è¿è¡èªå¨è£éãæ­¤æ³¨è§£ç¨äºå¨ setter æ¹æ³ï¼æé å¨ï¼å·æä»»æåç§°æå¤ä¸ªåæ°çå±æ§ææ¹æ³ä¸èªå¨è£é beanãé»è®¤æåµä¸ï¼å®æ¯ç±»åé©±å¨çæ³¨å¥ã\n\npublic class employee {\n    private string name;\n    @autowired\n    public void setname(string name) {\n        this.name=name;\n    }\n    public string getname(){\n        return name;\n    }\n}\n\n\n\n# @qualifier æ³¨è§£æä»ä¹ç¨ï¼\n\nå½æ¨åå»ºå¤ä¸ªç¸åç±»åç bean å¹¶å¸æä»ä½¿ç¨å±æ§è£éå¶ä¸­ä¸ä¸ª bean æ¶ï¼æ¨å¯ä»¥ä½¿ç¨@qualifier æ³¨è§£å @autowired éè¿æå®åºè¯¥è£éåªä¸ªç¡®åç bean æ¥æ¶é¤æ­§ä¹ã\n\nä¾å¦ï¼è¿éæä»¬åå«æä¸¤ä¸ªç±»ï¼employee å empaccountãå¨ empaccount ä¸­ï¼ä½¿ç¨@qualifier æå®äºå¿é¡»è£é id ä¸º emp1 ç beanã\n\nemployee.java\n\npublic class employee {\n    private string name;\n    @autowired\n    public void setname(string name) {\n        this.name=name;\n    }\n    public string getname() {\n        return name;\n    }\n}\n\n\nempaccount.java\n\npublic class empaccount {\n    private employee emp;\n\n    @autowired\n    @qualifier(emp1)\n    public void showname() {\n        system.out.println(âemployee name : â+emp.getname);\n    }\n}\n\n\n\n# @requestmapping æ³¨è§£æä»ä¹ç¨ï¼\n\n@requestmapping æ³¨è§£ç¨äºå°ç¹å® http è¯·æ±æ¹æ³æ å°å°å°å¤çç¸åºè¯·æ±çæ§å¶å¨ä¸­çç¹å®ç±»/æ¹æ³ãæ­¤æ³¨è§£å¯åºç¨äºä¸¤ä¸ªçº§å«ï¼\n\n * ç±»çº§å«ï¼æ å°è¯·æ±ç url\n * æ¹æ³çº§å«ï¼æ å° url ä»¥å http è¯·æ±æ¹æ³\n\n\n# æ°æ®ç¯\n\n\n# spring dao æä»ä¹ç¨ï¼\n\nspring dao ä½¿å¾ jdbcï¼hibernate æ jdo è¿æ ·çæ°æ®è®¿é®ææ¯æ´å®¹æä»¥ä¸ç§ç»ä¸çæ¹å¼å·¥ä½ãè¿ä½¿å¾ç¨æ·å®¹æå¨æä¹æ§ææ¯ä¹é´åæ¢ãå®è¿åè®¸æ¨å¨ç¼åä»£ç æ¶ï¼æ éèèæè·æ¯ç§ææ¯ä¸åçå¼å¸¸ã\n\n\n# åä¸¾ spring dao æåºçå¼å¸¸ã\n\n\n\n\n# spring jdbc api ä¸­å­å¨åªäºç±»ï¼\n\n * jdbctemplate\n * simplejdbctemplate\n * namedparameterjdbctemplate\n * simplejdbcinsert\n * simplejdbccall\n\n\n# ä½¿ç¨ spring è®¿é® hibernate çæ¹æ³æåªäºï¼\n\næä»¬å¯ä»¥éè¿ä¸¤ç§æ¹å¼ä½¿ç¨ spring è®¿é® hibernateï¼\n\n 1. ä½¿ç¨ hibernate æ¨¡æ¿ååè°è¿è¡æ§å¶åè½¬\n 2. æ©å± hibernatedaosupport å¹¶åºç¨ aop æ¦æªå¨èç¹\n\n\n# åä¸¾ spring æ¯æçäºå¡ç®¡çç±»å\n\nspring æ¯æä¸¤ç§ç±»åçäºå¡ç®¡çï¼\n\n 1. ç¨åºåäºå¡ç®¡çï¼å¨æ­¤è¿ç¨ä¸­ï¼å¨ç¼ç¨çå¸®å©ä¸ç®¡çäºå¡ãå®ä¸ºæ¨æä¾æå¤§ççµæ´»æ§ï¼ä½ç»´æ¤èµ·æ¥éå¸¸å°é¾ã\n 2. å£°æå¼äºå¡ç®¡çï¼å¨æ­¤ï¼äºå¡ç®¡çä¸ä¸å¡ä»£ç åç¦»ãä»ä½¿ç¨æ³¨è§£æåºäº xml çéç½®æ¥ç®¡çäºå¡ã\n\n\n# spring æ¯æåªäº orm æ¡æ¶\n\n * hibernate\n * ibatis\n * jpa\n * jdo\n * ojb\n\n\n# mvc\n\n\n# spring mvc æ¡æ¶æä»ä¹ç¨ï¼\n\nspring web mvc æ¡æ¶æä¾ æ¨¡å-è§å¾-æ§å¶å¨ æ¶æåéæ¶å¯ç¨çç»ä»¶ï¼ç¨äºå¼åçµæ´»ä¸æ¾æ£è¦åç web åºç¨ç¨åºã mvc æ¨¡å¼æå©äºåç¦»åºç¨ç¨åºçä¸åæ¹é¢ï¼å¦è¾å¥é»è¾ï¼ä¸å¡é»è¾å ui é»è¾ï¼åæ¶å¨ææè¿äºåç´ ä¹é´æä¾æ¾æ£è¦åã\n\n\n# æè¿°ä¸ä¸ dispatcherservlet çå·¥ä½æµç¨\n\ndispatcherservlet çå·¥ä½æµç¨å¯ä»¥ç¨ä¸å¹å¾æ¥è¯´æï¼\n\n\n\n 1. åæå¡å¨åé http è¯·æ±ï¼è¯·æ±è¢«åç«¯æ§å¶å¨ dispatcherservlet æè·ã\n 2. dispatcherservlet æ ¹æ® <servlet-name>-servlet.xml ä¸­çéç½®å¯¹è¯·æ±ç url è¿è¡è§£æï¼å¾å°è¯·æ±èµæºæ è¯ç¬¦ï¼uriï¼ãç¶åæ ¹æ®è¯¥ uriï¼è°ç¨ handlermapping è·å¾è¯¥ handler éç½®çææç¸å³çå¯¹è±¡ï¼åæ¬ handler å¯¹è±¡ä»¥å handler å¯¹è±¡å¯¹åºçæ¦æªå¨ï¼ï¼æåä»¥handlerexecutionchain å¯¹è±¡çå½¢å¼è¿åã\n 3. dispatcherservlet æ ¹æ®è·å¾çhandlerï¼éæ©ä¸ä¸ªåéç handleradapterãï¼éæ³¨ï¼å¦ææåè·å¾handleradapteråï¼æ­¤æ¶å°å¼å§æ§è¡æ¦æªå¨ç prehandler(...)æ¹æ³ï¼ã\n 4. æårequestä¸­çæ¨¡åæ°æ®ï¼å¡«åhandlerå¥åï¼å¼å§æ§è¡handlerï¼controller)ã å¨å¡«åhandlerçå¥åè¿ç¨ä¸­ï¼æ ¹æ®ä½ çéç½®ï¼spring å°å¸®ä½ åä¸äºé¢å¤çå·¥ä½ï¼\n    * httpmessageconveterï¼ å°è¯·æ±æ¶æ¯ï¼å¦ jsonãxml ç­æ°æ®ï¼è½¬æ¢æä¸ä¸ªå¯¹è±¡ï¼å°å¯¹è±¡è½¬æ¢ä¸ºæå®çååºä¿¡æ¯ã\n    * æ°æ®è½¬æ¢ï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®è½¬æ¢ãå¦stringè½¬æ¢æintegerãdoubleç­ã\n    * æ°æ®æ ¹å¼åï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®æ ¼å¼åã å¦å°å­ç¬¦ä¸²è½¬æ¢ææ ¼å¼åæ°å­ææ ¼å¼åæ¥æç­ã\n    * æ°æ®éªè¯ï¼ éªè¯æ°æ®çæææ§ï¼é¿åº¦ãæ ¼å¼ç­ï¼ï¼éªè¯ç»æå­å¨å°bindingresultæerrorä¸­ã\n 5. handler(controller)æ§è¡å®æåï¼å dispatcherservlet è¿åä¸ä¸ª modelandview å¯¹è±¡ï¼\n 6. æ ¹æ®è¿åçmodelandviewï¼éæ©ä¸ä¸ªéåç viewresolverï¼å¿é¡»æ¯å·²ç»æ³¨åå° spring å®¹å¨ä¸­çviewresolver)è¿åç»dispatcherservletã\n 7. viewresolver ç»åmodelåviewï¼æ¥æ¸²æè§å¾ã\n 8. è§å¾è´è´£å°æ¸²æç»æè¿åç»å®¢æ·ç«¯ã\n\n\n# ä»ç»ä¸ä¸ webapplicationcontext\n\nwebapplicationcontext æ¯ applicationcontext çæ©å±ãå®å·æ web åºç¨ç¨åºæéçä¸äºé¢å¤åè½ãå®ä¸æ®éç applicationcontext å¨è§£æä¸»é¢åå³å®ä¸åªä¸ª servlet å³èçè½åæ¹é¢ææä¸åã\n\nï¼å®ï¼\n\n----------------------------------------\n\nð æ³å­¦ä¹ æ´å¤ spring åå®¹å¯ä»¥è®¿é®æç spring æç¨ï¼spring-notes\n\n\n# èµæ\n\n * top 50 spring interview questions you must prepare in 2018\n * spring interview questions and answers',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Bean",frontmatter:{title:"Spring Bean",date:"2021-12-10T19:15:42.000Z",order:1,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","Bean","BeanDefinition"],permalink:"/pages/68097d/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/01.SpringBean.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/01.SpringBean.md",key:"v-cbe3e38e",path:"/pages/68097d/",headers:[{level:2,title:"Spring Bean å®ä¹",slug:"spring-bean-å®ä¹",normalizedTitle:"spring bean å®ä¹",charIndex:133},{level:3,title:"BeanDefinition",slug:"beandefinition",normalizedTitle:"beandefinition",charIndex:152},{level:4,title:"BeanDefinition åä¿¡æ¯",slug:"beandefinition-åä¿¡æ¯",normalizedTitle:"beandefinition åä¿¡æ¯",charIndex:428},{level:4,title:"BeanDefinition æå»º",slug:"beandefinition-æå»º",normalizedTitle:"beandefinition æå»º",charIndex:931},{level:3,title:"Spring Bean å½å",slug:"spring-bean-å½å",normalizedTitle:"spring bean å½å",charIndex:1085},{level:4,title:"Spring Bean å½åè§å",slug:"spring-bean-å½åè§å",normalizedTitle:"spring bean å½åè§å",charIndex:1103},{level:4,title:"Spring Bean å½åçæå¨",slug:"spring-bean-å½åçæå¨",normalizedTitle:"spring bean å½åçæå¨",charIndex:1469},{level:4,title:"Spring Bean å«å",slug:"spring-bean-å«å",normalizedTitle:"spring bean å«å",charIndex:1769},{level:2,title:"Spring Bean çå½å¨æ",slug:"spring-bean-çå½å¨æ",normalizedTitle:"spring bean çå½å¨æ",charIndex:2166},{level:2,title:"Spring Bean æ³¨å",slug:"spring-bean-æ³¨å",normalizedTitle:"spring bean æ³¨å",charIndex:3495},{level:3,title:"XML éç½®åä¿¡æ¯",slug:"xml-éç½®åä¿¡æ¯",normalizedTitle:"xml éç½®åä¿¡æ¯",charIndex:3564},{level:3,title:"æ³¨è§£éç½®åä¿¡æ¯",slug:"æ³¨è§£éç½®åä¿¡æ¯",normalizedTitle:"æ³¨è§£éç½®åä¿¡æ¯",charIndex:3651},{level:3,title:"Java API éç½®åä¿¡æ¯",slug:"java-api-éç½®åä¿¡æ¯",normalizedTitle:"java api éç½®åä¿¡æ¯",charIndex:3710},{level:2,title:"Spring Bean å®ä¾å",slug:"spring-bean-å®ä¾å",normalizedTitle:"spring bean å®ä¾å",charIndex:4016},{level:2,title:"Spring Bean åå§ååéæ¯",slug:"spring-bean-åå§ååéæ¯",normalizedTitle:"spring bean åå§ååéæ¯",charIndex:4546},{level:2,title:"Spring Bean åå¾åæ¶",slug:"spring-bean-åå¾åæ¶",normalizedTitle:"spring bean åå¾åæ¶",charIndex:5589},{level:2,title:"Spring Bean ä½ç¨èå´",slug:"spring-bean-ä½ç¨èå´",normalizedTitle:"spring bean ä½ç¨èå´",charIndex:5703},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:6830}],headersStr:"Spring Bean å®ä¹ BeanDefinition BeanDefinition åä¿¡æ¯ BeanDefinition æå»º Spring Bean å½å Spring Bean å½åè§å Spring Bean å½åçæå¨ Spring Bean å«å Spring Bean çå½å¨æ Spring Bean æ³¨å XML éç½®åä¿¡æ¯ æ³¨è§£éç½®åä¿¡æ¯ Java API éç½®åä¿¡æ¯ Spring Bean å®ä¾å Spring Bean åå§ååéæ¯ Spring Bean åå¾åæ¶ Spring Bean ä½ç¨èå´ åèèµæ",content:'# Spring Bean\n\nå¨ Spring ä¸­ï¼ææåºç¨ç¨åºä¸»ä½ç± Spring IoC å®¹å¨ç®¡ççå¯¹è±¡ç§°ä¸º BeanãBean æ¯ç± Spring IoC å®¹å¨å®ä¾åãè£éåç®¡ççå¯¹è±¡ã Bean ä»¥åå®ä»¬ä¹é´çä¾èµå³ç³»åæ å¨å®¹å¨ä½¿ç¨çéç½®åæ°æ®ä¸­ã\n\n\n# Spring Bean å®ä¹\n\n\n# BeanDefinition\n\nSpring IoC å®¹å¨æ¬èº«ï¼å¹¶ä¸è½è¯å«éç½®çåæ°æ®ãä¸ºæ­¤ï¼è¦å°è¿äºéç½®ä¿¡æ¯è½¬ä¸º Spring è½è¯å«çæ ¼å¼ââBeanDefinition å¯¹è±¡ã\n\nBeanDefinition æ¯ Spring ä¸­å®ä¹ Bean çéç½®åä¿¡æ¯æ¥å£ï¼å®åå«ï¼\n\n * Bean ç±»å\n * Bean è¡ä¸ºéç½®åç´ ï¼å¦ï¼ä½ç¨åãèªå¨ç»å®çæ¨¡å¼ãçå½å¨æåè°ç­\n * å¶ä» Bean å¼ç¨ï¼ä¹å¯ç§°ä¸ºåä½èï¼Collaboratorsï¼æä¾èµï¼Dependenciesï¼\n * éç½®è®¾ç½®ï¼å¦ Bean å±æ§ï¼Propertiesï¼\n\n# BeanDefinition åä¿¡æ¯\n\nBeanDefinition åä¿¡æ¯å¦ä¸ï¼\n\nå±æ§ï¼PROPERTYï¼               è¯´æ\nClass                      å¨ç±»åï¼å¿é¡»æ¯å·ä½ç±»ï¼ä¸è½ç¨æ½è±¡ç±»ææ¥å£\nName                       Bean çåç§°æè ID\nScope                      Bean çä½ç¨åï¼å¦ï¼singletonãprototype ç­ï¼\nConstructor arguments      Bean æé å¨åæ°ï¼ç¨äºä¾èµæ³¨å¥ï¼\nProperties                 Bean å±æ§è®¾ç½®ï¼ç¨äºä¾èµæ³¨å¥ï¼\nAutowiring mode            Bean èªå¨ç»å®æ¨¡å¼ï¼å¦ï¼éè¿åç§° byNameï¼\nLazy initialization mode   Bean å»¶è¿åå§åæ¨¡å¼ï¼å»¶è¿åéå»¶è¿ï¼\nInitialization method      Bean åå§ååè°æ¹æ³åç§°\nDestruction method         Bean éæ¯åè°æ¹æ³åç§°\n\n# BeanDefinition æå»º\n\nBeanDefinition æå»ºæ¹å¼ï¼\n\n * éè¿ BeanDefinitionBuilder\n\n * éè¿ AbstractBeanDefinition ä»¥åæ´¾çç±»\n\n> ð» Spring Bean å®ä¹ç¤ºä¾æºç ï¼BeanDefinitionTests\n\n\n# Spring Bean å½å\n\n# Spring Bean å½åè§å\n\næ¯ä¸ª Bean æ¥æä¸ä¸ªæå¤ä¸ªæ è¯ç¬¦ï¼identifiersï¼ï¼è¿äºæ è¯ç¬¦å¨ Bean æå¨çå®¹å¨å¿é¡»æ¯å¯ä¸çãéå¸¸ï¼ä¸ä¸ª Bean ä»æä¸ä¸ªæ è¯ç¬¦ï¼å¦æéè¦é¢å¤çï¼å¯èèä½¿ç¨å«åï¼Aliasï¼æ¥æ©åã\n\nå¨åºäº XML çéç½®åä¿¡æ¯ä¸­ï¼å¼åäººåå¯ä»¥ä½¿ç¨ id å±æ§ãname å±æ§ææ¥æå® Bean æ è¯ç¬¦ãéå¸¸ï¼Bean çæ è¯ç¬¦ç±å­æ¯ç»æï¼åè®¸åºç°ç¹æ®å­ç¬¦ãå¦æè¦æ³å¼å¥ Bean çå«åçè¯ï¼å¯å¨ name å±æ§ä½¿ç¨åè§éå·ï¼â,âï¼æåå·ï¼â;â) æ¥é´éã\n\nSpring ä¸­ï¼ä¸º Bean æå® id å name å±æ§ä¸æ¯å¿é¡»çãå¦æä¸æå®ï¼Spring ä¼èªå¨ä¸º Bean åéä¸ä¸ªå¯ä¸çåç§°ãå°½ç®¡ Bean çå½åæ²¡æéå¶ï¼ä¸è¿å®æ¹å»ºè®®éç¨é©¼å³°å½åæ³æ¥å½å Beanã\n\n# Spring Bean å½åçæå¨\n\nSpring æä¾äºä¸¤ç§ Spring Bean å½åçæå¨ï¼\n\n * DefaultBeanNameGeneratorï¼é»è®¤éç¨ BeanNameGenerator å®ç°ã\n * AnnotationBeanNameGeneratorï¼åºäºæ³¨è§£æ«æç BeanNameGenerator å®ç°ã\n\npublic interface BeanNameGenerator {\n   String generateBeanName(BeanDefinition definition, BeanDefinitionRegistry registry);\n}\n\n\n# Spring Bean å«å\n\nSpring æ¯æéè¿ <alias> å±æ§ä¸º Bean è®¾ç½®å«åã\n\nBean å«åï¼Aliasï¼çä½ç¨ï¼\n\n * å¤ç¨ç°æç BeanDefinition\n * æ´å·æåºæ¯åçå½åæ¹æ³ï¼æ¯å¦ï¼\n   * <alias name="myApp-dataSource" alias="subsystemA-dataSource"/>\n   * <alias name="myApp-dataSource" alias="subsystemB-dataSource"/>\n\n<bean id="user" class="io.github.dunwu.spring.core.bean.entity.person.User">\n  \x3c!-- å±æ§ç¥ --\x3e\n</bean>\n<alias name="user" alias="aliasUser" />\n\n\n\n# Spring Bean çå½å¨æ\n\n\n\n 1.  Spring å¯¹ Bean è¿è¡å®ä¾åï¼ç¸å½äº new XXX()ï¼\n\n 2.  Spring å°å¼åå¼ç¨æ³¨å¥å° Bean å¯¹åºçå±æ§ä¸­\n\n 3.  å¦æ Bean å®ç°äº BeanNameAware æ¥å£ï¼Spring å° Bean ç ID ä¼ éç» setBeanName æ¹æ³\n     \n     * ä½ç¨æ¯éè¿ Bean çå¼ç¨æ¥è·å¾ Bean IDï¼ä¸è¬ä¸å¡ä¸­æ¯å¾å°æç¨å° Bean ç ID ç\n\n 4.  å¦æ Bean å®ç°äº BeanFactoryAware æ¥å£ï¼Spring å°è°ç¨ setBeanDactory æ¹æ³ï¼å¹¶æ BeanFactory å®¹å¨å®ä¾ä½ä¸ºåæ°ä¼ å¥ã\n     \n     * ä½ç¨æ¯è·å Spring å®¹å¨ï¼å¦ Bean éè¿ Spring å®¹å¨åå¸äºä»¶ç­\n\n 5.  å¦æ Bean å®ç°äº ApplicationContextAware æ¥å£ï¼Spring å®¹å¨å°è°ç¨ setApplicationContext æ¹æ³ï¼æåºç¨ä¸ä¸æä½ä¸ºåæ°ä¼ å¥\n     \n     * ä½ç¨ä¸ BeanFactory ç±»ä¼¼é½æ¯ä¸ºäºè·å Spring å®¹å¨ï¼ä¸åçæ¯ Spring å®¹å¨å¨è°ç¨ setApplicationContext æ¹æ³æ¶ä¼æå®èªå·±ä½ä¸º setApplicationContext çåæ°ä¼ å¥ï¼è Spring å®¹å¨å¨è°ç¨ setBeanFactory åéè¦ä½¿ç¨èèªå·±æå®ï¼æ³¨å¥ï¼setBeanFactory éçåæ° BeanFactory\n\n 6.  å¦æ Bean å®ç°äº BeanPostProcess æ¥å£ï¼Spring å°è°ç¨ postProcessBeforeInitialization æ¹æ³\n     \n     * ä½ç¨æ¯å¨ Bean å®ä¾åå»ºæååå¯¹å¶è¿è¡å¢å¼ºå¤çï¼å¦å¯¹ Bean è¿è¡ä¿®æ¹ï¼å¢å æä¸ªåè½\n\n 7.  å¦æ Bean å®ç°äº InitializingBean æ¥å£ï¼Spring å°è°ç¨ afterPropertiesSet æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ Bean ä½¿ç¨ init-method å£°æåå§åçä½ç¨ä¸æ ·ï¼é½æ¯å¨ Bean çå¨é¨å±æ§è®¾ç½®æååæ§è¡çåå§åæ¹æ³ã\n\n 8.  å¦æ Bean å®ç°äº BeanPostProcess æ¥å£ï¼Spring å°è°ç¨ postProcessAfterInitialization æ¹æ³\n     \n     * postProcessBeforeInitialization æ¯å¨ Bean åå§ååæ§è¡çï¼è postProcessAfterInitialization æ¯å¨ Bean åå§ååæ§è¡ç\n\n 9.  ç»è¿ä»¥ä¸çå·¥ä½åï¼Bean å°ä¸ç´é©»çå¨åºç¨ä¸ä¸æä¸­ç»åºç¨ä½¿ç¨ï¼ç´å°åºç¨ä¸ä¸æè¢«éæ¯\n\n 10. å¦æ Bean å®ç°äº DispostbleBean æ¥å£ï¼Spring å°è°ç¨å®ç destory æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ Bean ä½¿ç¨ destory-method å±æ§çä½ç¨ä¸æ ·ï¼é½æ¯å¨ Bean å®ä¾éæ¯åæ§è¡çæ¹æ³ã\n\n\n# Spring Bean æ³¨å\n\næ³¨å Spring Bean å®éä¸æ¯å° BeanDefinition æ³¨åå° IoC å®¹å¨ä¸­ã\n\n\n# XML éç½®åä¿¡æ¯\n\nSpring çä¼ ç»éç½®æ¹å¼ãå¨ <bean> æ ç­¾ä¸­éç½®åæ°æ®åå®¹ã\n\nç¼ºç¹æ¯å½ JavaBean è¿å¤æ¶ï¼äº§ççéç½®æä»¶è¶³ä»¥è®©ä½ ç¼è±ç¼­ä¹±ã\n\n\n# æ³¨è§£éç½®åä¿¡æ¯\n\nä½¿ç¨ @Beanã@Componentã@Import æ³¨è§£æ³¨å Spring Beanã\n\n\n# Java API éç½®åä¿¡æ¯\n\n * å½åæ¹å¼ï¼BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)\n * éå½åæ¹å¼ï¼BeanDefinitionReaderUtils#registerWithGeneratedName(AbstractBeanDefinition,BeanDefinitionRegistry)\n * éç½®ç±»æ¹å¼ï¼AnnotatedBeanDefinitionReader#register(Class...)\n\n> ð» Spring Bean æ³¨åç¤ºä¾æºç ï¼BeanRegistryTests\n\n\n# Spring Bean å®ä¾å\n\nSpring Bean å®ä¾åæ¹å¼ï¼\n\n * å¸¸è§æ¹å¼\n   * éè¿æé å¨ï¼éç½®åä¿¡æ¯ï¼XMLãJava æ³¨è§£å Java APIï¼\n   * éè¿éææ¹æ³ï¼éç½®åä¿¡æ¯ï¼XMLãJava æ³¨è§£å Java APIï¼\n   * éè¿ Bean å·¥åæ¹æ³ï¼éç½®åä¿¡æ¯ï¼XMLãJava æ³¨è§£å Java APIï¼\n   * éè¿ FactoryBeanï¼éç½®åä¿¡æ¯ï¼XMLãJava æ³¨è§£å Java APIï¼\n * ç¹æ®æ¹å¼\n   * éè¿ ServiceLoaderFactoryBeanï¼éç½®åä¿¡æ¯ï¼XMLãJava æ³¨è§£å Java API ï¼\n   * éè¿ AutowireCapableBeanFactory#createBean(java.lang.Class, int, boolean)\n   * éè¿ BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)\n\n> ð» Spring Bean å®ä¾åç¤ºä¾æºç ï¼BeanInstantiationTestsãBeanInstantiationSpecialTests\n\n\n# Spring Bean åå§ååéæ¯\n\nSpring Bean åå§ååéæ¯çæ¹å¼æä»¥ä¸å ç§ï¼\n\n 1. ä½¿ç¨ @PostConstruct å @PreDestroy æ³¨è§£åå«æå®ç¸åºçåå§åæ¹æ³åéæ¯æ¹æ³ã\n\n 2. å®ç° InitializingBean æ¥å£ç afterPropertiesSet() æ¹æ³æ¥ç¼ååå§åæ¹æ³ï¼å®ç° DisposableBean æ¥å£ç destroy() æ¹æ³æ¥ç¼åéæ¯æ¹æ³ã\n    \n    * InitializingBean æ¥å£åå«ä¸ä¸ª afterPropertiesSet æ¹æ³ï¼å¯ä»¥éè¿å®ç°è¯¥æ¥å£ï¼ç¶åå¨è¿ä¸ªæ¹æ³ä¸­ç¼ååå§åé»è¾ã\n    * DisposableBeanæ¥å£åå«ä¸ä¸ª destory æ¹æ³ï¼å¯ä»¥éè¿å®ç°è¯¥æ¥å£ï¼ç¶åå¨è¿ä¸ªæ¹æ³ä¸­ç¼åéæ¯é»è¾ã\n\n 3. èªå®ä¹åå§åæ¹æ³\n    \n    * XML éç½®ï¼<bean init-method="init" destroy="destroy" ... />\n    * Java æ³¨è§£ï¼@Bean(initMethod = "init", destroyMethod = "destroy")\n    * Java APIï¼AbstractBeanDefinition#setInitMethodName(String) å AbstractBeanDefinition#setDestroyMethodName(String) åå«å®ä¹åå§ååéæ¯æ¹æ³\n\næ³¨æï¼å¦æåæ¶å­å¨ï¼æ§è¡é¡ºåºä¼æç§åºåæ§è¡ã\n\nBean çå»¶è¿åå§å\n\n * xml æ¹å¼ï¼<bean lazy-init="true" ... />\n * æ³¨è§£æ¹å¼ï¼@Lazy\n\nSpring æä¾äºä¸ä¸ª BeanPostProcessor æ¥å£ï¼æä¾äºä¸¤ä¸ªæ¹æ³ postProcessBeforeInitialization å postProcessAfterInitializationãå¶ä¸­postProcessBeforeInitialization å¨ç»ä»¶çåå§åæ¹æ³è°ç¨ä¹åæ§è¡ï¼postProcessAfterInitialization å¨ç»ä»¶çåå§åæ¹æ³è°ç¨ä¹åæ§è¡ãå®ä»¬é½åå«ä¸¤ä¸ªå¥åï¼\n\n * beanï¼å½åç»ä»¶å¯¹è±¡ï¼\n * beanNameï¼å½åç»ä»¶å¨å®¹å¨ä¸­çåç§°ã\n\n> ð» Spring Bean åå§ååéæ¯ç¤ºä¾æºç ï¼BeanInitDestroyTests\n\n\n# Spring Bean åå¾åæ¶\n\nSpring Bean åå¾åæ¶æ­¥éª¤ï¼\n\n 1. å³é­ Spring å®¹å¨ï¼åºç¨ä¸ä¸æï¼\n 2. æ§è¡ GC\n 3. Spring Bean è¦çç finalize() æ¹æ³è¢«åè°\n\n\n# Spring Bean ä½ç¨èå´\n\nSCOPE         DESCRIPTION\nsingleton     (Default) Scopes a single bean definition to a single object\n              instance for each Spring IoC container.\nprototype     Scopes a single bean definition to any number of object\n              instances.\nrequest       Scopes a single bean definition to the lifecycle of a single\n              HTTP request. That is, each HTTP request has its own\n              instance of a bean created off the back of a single bean\n              definition. Only valid in the context of a web-aware Spring\n              ApplicationContext.\nsession       Scopes a single bean definition to the lifecycle of an HTTP\n              Session. Only valid in the context of a web-aware Spring\n              ApplicationContext.\napplication   Scopes a single bean definition to the lifecycle of a\n              ServletContext. Only valid in the context of a web-aware\n              Spring ApplicationContext.\nwebsocket     Scopes a single bean definition to the lifecycle of a\n              WebSocket. Only valid in the context of a web-aware Spring\n              ApplicationContext.\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring bean\n\nå¨ spring ä¸­ï¼ææåºç¨ç¨åºä¸»ä½ç± spring ioc å®¹å¨ç®¡ççå¯¹è±¡ç§°ä¸º beanãbean æ¯ç± spring ioc å®¹å¨å®ä¾åãè£éåç®¡ççå¯¹è±¡ã bean ä»¥åå®ä»¬ä¹é´çä¾èµå³ç³»åæ å¨å®¹å¨ä½¿ç¨çéç½®åæ°æ®ä¸­ã\n\n\n# spring bean å®ä¹\n\n\n# beandefinition\n\nspring ioc å®¹å¨æ¬èº«ï¼å¹¶ä¸è½è¯å«éç½®çåæ°æ®ãä¸ºæ­¤ï¼è¦å°è¿äºéç½®ä¿¡æ¯è½¬ä¸º spring è½è¯å«çæ ¼å¼ââbeandefinition å¯¹è±¡ã\n\nbeandefinition æ¯ spring ä¸­å®ä¹ bean çéç½®åä¿¡æ¯æ¥å£ï¼å®åå«ï¼\n\n * bean ç±»å\n * bean è¡ä¸ºéç½®åç´ ï¼å¦ï¼ä½ç¨åãèªå¨ç»å®çæ¨¡å¼ãçå½å¨æåè°ç­\n * å¶ä» bean å¼ç¨ï¼ä¹å¯ç§°ä¸ºåä½èï¼collaboratorsï¼æä¾èµï¼dependenciesï¼\n * éç½®è®¾ç½®ï¼å¦ bean å±æ§ï¼propertiesï¼\n\n# beandefinition åä¿¡æ¯\n\nbeandefinition åä¿¡æ¯å¦ä¸ï¼\n\nå±æ§ï¼propertyï¼               è¯´æ\nclass                      å¨ç±»åï¼å¿é¡»æ¯å·ä½ç±»ï¼ä¸è½ç¨æ½è±¡ç±»ææ¥å£\nname                       bean çåç§°æè id\nscope                      bean çä½ç¨åï¼å¦ï¼singletonãprototype ç­ï¼\nconstructor arguments      bean æé å¨åæ°ï¼ç¨äºä¾èµæ³¨å¥ï¼\nproperties                 bean å±æ§è®¾ç½®ï¼ç¨äºä¾èµæ³¨å¥ï¼\nautowiring mode            bean èªå¨ç»å®æ¨¡å¼ï¼å¦ï¼éè¿åç§° bynameï¼\nlazy initialization mode   bean å»¶è¿åå§åæ¨¡å¼ï¼å»¶è¿åéå»¶è¿ï¼\ninitialization method      bean åå§ååè°æ¹æ³åç§°\ndestruction method         bean éæ¯åè°æ¹æ³åç§°\n\n# beandefinition æå»º\n\nbeandefinition æå»ºæ¹å¼ï¼\n\n * éè¿ beandefinitionbuilder\n\n * éè¿ abstractbeandefinition ä»¥åæ´¾çç±»\n\n> ð» spring bean å®ä¹ç¤ºä¾æºç ï¼beandefinitiontests\n\n\n# spring bean å½å\n\n# spring bean å½åè§å\n\næ¯ä¸ª bean æ¥æä¸ä¸ªæå¤ä¸ªæ è¯ç¬¦ï¼identifiersï¼ï¼è¿äºæ è¯ç¬¦å¨ bean æå¨çå®¹å¨å¿é¡»æ¯å¯ä¸çãéå¸¸ï¼ä¸ä¸ª bean ä»æä¸ä¸ªæ è¯ç¬¦ï¼å¦æéè¦é¢å¤çï¼å¯èèä½¿ç¨å«åï¼aliasï¼æ¥æ©åã\n\nå¨åºäº xml çéç½®åä¿¡æ¯ä¸­ï¼å¼åäººåå¯ä»¥ä½¿ç¨ id å±æ§ãname å±æ§ææ¥æå® bean æ è¯ç¬¦ãéå¸¸ï¼bean çæ è¯ç¬¦ç±å­æ¯ç»æï¼åè®¸åºç°ç¹æ®å­ç¬¦ãå¦æè¦æ³å¼å¥ bean çå«åçè¯ï¼å¯å¨ name å±æ§ä½¿ç¨åè§éå·ï¼â,âï¼æåå·ï¼â;â) æ¥é´éã\n\nspring ä¸­ï¼ä¸º bean æå® id å name å±æ§ä¸æ¯å¿é¡»çãå¦æä¸æå®ï¼spring ä¼èªå¨ä¸º bean åéä¸ä¸ªå¯ä¸çåç§°ãå°½ç®¡ bean çå½åæ²¡æéå¶ï¼ä¸è¿å®æ¹å»ºè®®éç¨é©¼å³°å½åæ³æ¥å½å beanã\n\n# spring bean å½åçæå¨\n\nspring æä¾äºä¸¤ç§ spring bean å½åçæå¨ï¼\n\n * defaultbeannamegeneratorï¼é»è®¤éç¨ beannamegenerator å®ç°ã\n * annotationbeannamegeneratorï¼åºäºæ³¨è§£æ«æç beannamegenerator å®ç°ã\n\npublic interface beannamegenerator {\n   string generatebeanname(beandefinition definition, beandefinitionregistry registry);\n}\n\n\n# spring bean å«å\n\nspring æ¯æéè¿ <alias> å±æ§ä¸º bean è®¾ç½®å«åã\n\nbean å«åï¼aliasï¼çä½ç¨ï¼\n\n * å¤ç¨ç°æç beandefinition\n * æ´å·æåºæ¯åçå½åæ¹æ³ï¼æ¯å¦ï¼\n   * <alias name="myapp-datasource" alias="subsystema-datasource"/>\n   * <alias name="myapp-datasource" alias="subsystemb-datasource"/>\n\n<bean id="user" class="io.github.dunwu.spring.core.bean.entity.person.user">\n  \x3c!-- å±æ§ç¥ --\x3e\n</bean>\n<alias name="user" alias="aliasuser" />\n\n\n\n# spring bean çå½å¨æ\n\n\n\n 1.  spring å¯¹ bean è¿è¡å®ä¾åï¼ç¸å½äº new xxx()ï¼\n\n 2.  spring å°å¼åå¼ç¨æ³¨å¥å° bean å¯¹åºçå±æ§ä¸­\n\n 3.  å¦æ bean å®ç°äº beannameaware æ¥å£ï¼spring å° bean ç id ä¼ éç» setbeanname æ¹æ³\n     \n     * ä½ç¨æ¯éè¿ bean çå¼ç¨æ¥è·å¾ bean idï¼ä¸è¬ä¸å¡ä¸­æ¯å¾å°æç¨å° bean ç id ç\n\n 4.  å¦æ bean å®ç°äº beanfactoryaware æ¥å£ï¼spring å°è°ç¨ setbeandactory æ¹æ³ï¼å¹¶æ beanfactory å®¹å¨å®ä¾ä½ä¸ºåæ°ä¼ å¥ã\n     \n     * ä½ç¨æ¯è·å spring å®¹å¨ï¼å¦ bean éè¿ spring å®¹å¨åå¸äºä»¶ç­\n\n 5.  å¦æ bean å®ç°äº applicationcontextaware æ¥å£ï¼spring å®¹å¨å°è°ç¨ setapplicationcontext æ¹æ³ï¼æåºç¨ä¸ä¸æä½ä¸ºåæ°ä¼ å¥\n     \n     * ä½ç¨ä¸ beanfactory ç±»ä¼¼é½æ¯ä¸ºäºè·å spring å®¹å¨ï¼ä¸åçæ¯ spring å®¹å¨å¨è°ç¨ setapplicationcontext æ¹æ³æ¶ä¼æå®èªå·±ä½ä¸º setapplicationcontext çåæ°ä¼ å¥ï¼è spring å®¹å¨å¨è°ç¨ setbeanfactory åéè¦ä½¿ç¨èèªå·±æå®ï¼æ³¨å¥ï¼setbeanfactory éçåæ° beanfactory\n\n 6.  å¦æ bean å®ç°äº beanpostprocess æ¥å£ï¼spring å°è°ç¨ postprocessbeforeinitialization æ¹æ³\n     \n     * ä½ç¨æ¯å¨ bean å®ä¾åå»ºæååå¯¹å¶è¿è¡å¢å¼ºå¤çï¼å¦å¯¹ bean è¿è¡ä¿®æ¹ï¼å¢å æä¸ªåè½\n\n 7.  å¦æ bean å®ç°äº initializingbean æ¥å£ï¼spring å°è°ç¨ afterpropertiesset æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ bean ä½¿ç¨ init-method å£°æåå§åçä½ç¨ä¸æ ·ï¼é½æ¯å¨ bean çå¨é¨å±æ§è®¾ç½®æååæ§è¡çåå§åæ¹æ³ã\n\n 8.  å¦æ bean å®ç°äº beanpostprocess æ¥å£ï¼spring å°è°ç¨ postprocessafterinitialization æ¹æ³\n     \n     * postprocessbeforeinitialization æ¯å¨ bean åå§ååæ§è¡çï¼è postprocessafterinitialization æ¯å¨ bean åå§ååæ§è¡ç\n\n 9.  ç»è¿ä»¥ä¸çå·¥ä½åï¼bean å°ä¸ç´é©»çå¨åºç¨ä¸ä¸æä¸­ç»åºç¨ä½¿ç¨ï¼ç´å°åºç¨ä¸ä¸æè¢«éæ¯\n\n 10. å¦æ bean å®ç°äº dispostblebean æ¥å£ï¼spring å°è°ç¨å®ç destory æ¹æ³ï¼ä½ç¨ä¸å¨éç½®æä»¶ä¸­å¯¹ bean ä½¿ç¨ destory-method å±æ§çä½ç¨ä¸æ ·ï¼é½æ¯å¨ bean å®ä¾éæ¯åæ§è¡çæ¹æ³ã\n\n\n# spring bean æ³¨å\n\næ³¨å spring bean å®éä¸æ¯å° beandefinition æ³¨åå° ioc å®¹å¨ä¸­ã\n\n\n# xml éç½®åä¿¡æ¯\n\nspring çä¼ ç»éç½®æ¹å¼ãå¨ <bean> æ ç­¾ä¸­éç½®åæ°æ®åå®¹ã\n\nç¼ºç¹æ¯å½ javabean è¿å¤æ¶ï¼äº§ççéç½®æä»¶è¶³ä»¥è®©ä½ ç¼è±ç¼­ä¹±ã\n\n\n# æ³¨è§£éç½®åä¿¡æ¯\n\nä½¿ç¨ @beanã@componentã@import æ³¨è§£æ³¨å spring beanã\n\n\n# java api éç½®åä¿¡æ¯\n\n * å½åæ¹å¼ï¼beandefinitionregistry#registerbeandefinition(string,beandefinition)\n * éå½åæ¹å¼ï¼beandefinitionreaderutils#registerwithgeneratedname(abstractbeandefinition,beandefinitionregistry)\n * éç½®ç±»æ¹å¼ï¼annotatedbeandefinitionreader#register(class...)\n\n> ð» spring bean æ³¨åç¤ºä¾æºç ï¼beanregistrytests\n\n\n# spring bean å®ä¾å\n\nspring bean å®ä¾åæ¹å¼ï¼\n\n * å¸¸è§æ¹å¼\n   * éè¿æé å¨ï¼éç½®åä¿¡æ¯ï¼xmlãjava æ³¨è§£å java apiï¼\n   * éè¿éææ¹æ³ï¼éç½®åä¿¡æ¯ï¼xmlãjava æ³¨è§£å java apiï¼\n   * éè¿ bean å·¥åæ¹æ³ï¼éç½®åä¿¡æ¯ï¼xmlãjava æ³¨è§£å java apiï¼\n   * éè¿ factorybeanï¼éç½®åä¿¡æ¯ï¼xmlãjava æ³¨è§£å java apiï¼\n * ç¹æ®æ¹å¼\n   * éè¿ serviceloaderfactorybeanï¼éç½®åä¿¡æ¯ï¼xmlãjava æ³¨è§£å java api ï¼\n   * éè¿ autowirecapablebeanfactory#createbean(java.lang.class, int, boolean)\n   * éè¿ beandefinitionregistry#registerbeandefinition(string,beandefinition)\n\n> ð» spring bean å®ä¾åç¤ºä¾æºç ï¼beaninstantiationtestsãbeaninstantiationspecialtests\n\n\n# spring bean åå§ååéæ¯\n\nspring bean åå§ååéæ¯çæ¹å¼æä»¥ä¸å ç§ï¼\n\n 1. ä½¿ç¨ @postconstruct å @predestroy æ³¨è§£åå«æå®ç¸åºçåå§åæ¹æ³åéæ¯æ¹æ³ã\n\n 2. å®ç° initializingbean æ¥å£ç afterpropertiesset() æ¹æ³æ¥ç¼ååå§åæ¹æ³ï¼å®ç° disposablebean æ¥å£ç destroy() æ¹æ³æ¥ç¼åéæ¯æ¹æ³ã\n    \n    * initializingbean æ¥å£åå«ä¸ä¸ª afterpropertiesset æ¹æ³ï¼å¯ä»¥éè¿å®ç°è¯¥æ¥å£ï¼ç¶åå¨è¿ä¸ªæ¹æ³ä¸­ç¼ååå§åé»è¾ã\n    * disposablebeanæ¥å£åå«ä¸ä¸ª destory æ¹æ³ï¼å¯ä»¥éè¿å®ç°è¯¥æ¥å£ï¼ç¶åå¨è¿ä¸ªæ¹æ³ä¸­ç¼åéæ¯é»è¾ã\n\n 3. èªå®ä¹åå§åæ¹æ³\n    \n    * xml éç½®ï¼<bean init-method="init" destroy="destroy" ... />\n    * java æ³¨è§£ï¼@bean(initmethod = "init", destroymethod = "destroy")\n    * java apiï¼abstractbeandefinition#setinitmethodname(string) å abstractbeandefinition#setdestroymethodname(string) åå«å®ä¹åå§ååéæ¯æ¹æ³\n\næ³¨æï¼å¦æåæ¶å­å¨ï¼æ§è¡é¡ºåºä¼æç§åºåæ§è¡ã\n\nbean çå»¶è¿åå§å\n\n * xml æ¹å¼ï¼<bean lazy-init="true" ... />\n * æ³¨è§£æ¹å¼ï¼@lazy\n\nspring æä¾äºä¸ä¸ª beanpostprocessor æ¥å£ï¼æä¾äºä¸¤ä¸ªæ¹æ³ postprocessbeforeinitialization å postprocessafterinitializationãå¶ä¸­postprocessbeforeinitialization å¨ç»ä»¶çåå§åæ¹æ³è°ç¨ä¹åæ§è¡ï¼postprocessafterinitialization å¨ç»ä»¶çåå§åæ¹æ³è°ç¨ä¹åæ§è¡ãå®ä»¬é½åå«ä¸¤ä¸ªå¥åï¼\n\n * beanï¼å½åç»ä»¶å¯¹è±¡ï¼\n * beannameï¼å½åç»ä»¶å¨å®¹å¨ä¸­çåç§°ã\n\n> ð» spring bean åå§ååéæ¯ç¤ºä¾æºç ï¼beaninitdestroytests\n\n\n# spring bean åå¾åæ¶\n\nspring bean åå¾åæ¶æ­¥éª¤ï¼\n\n 1. å³é­ spring å®¹å¨ï¼åºç¨ä¸ä¸æï¼\n 2. æ§è¡ gc\n 3. spring bean è¦çç finalize() æ¹æ³è¢«åè°\n\n\n# spring bean ä½ç¨èå´\n\nscope         description\nsingleton     (default) scopes a single bean definition to a single object\n              instance for each spring ioc container.\nprototype     scopes a single bean definition to any number of object\n              instances.\nrequest       scopes a single bean definition to the lifecycle of a single\n              http request. that is, each http request has its own\n              instance of a bean created off the back of a single bean\n              definition. only valid in the context of a web-aware spring\n              applicationcontext.\nsession       scopes a single bean definition to the lifecycle of an http\n              session. only valid in the context of a web-aware spring\n              applicationcontext.\napplication   scopes a single bean definition to the lifecycle of a\n              servletcontext. only valid in the context of a web-aware\n              spring applicationcontext.\nwebsocket     scopes a single bean definition to the lifecycle of a\n              websocket. only valid in the context of a web-aware spring\n              applicationcontext.\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring IoC",frontmatter:{title:"Spring IoC",date:"2020-08-30T16:06:10.000Z",order:2,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","IOC"],permalink:"/pages/915530/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/02.SpringIoC.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/02.SpringIoC.md",key:"v-4c6b8695",path:"/pages/915530/",headers:[{level:2,title:"IoC ç®ä»",slug:"ioc-ç®ä»",normalizedTitle:"ioc ç®ä»",charIndex:17},{level:3,title:"IoC æ¯ä»ä¹",slug:"ioc-æ¯ä»ä¹",normalizedTitle:"ioc æ¯ä»ä¹",charIndex:28},{level:3,title:"IoC è½åä»ä¹",slug:"ioc-è½åä»ä¹",normalizedTitle:"ioc è½åä»ä¹",charIndex:671},{level:3,title:"IoC å DI",slug:"ioc-å-di",normalizedTitle:"ioc å di",charIndex:1081},{level:3,title:"IoC å®¹å¨",slug:"ioc-å®¹å¨",normalizedTitle:"ioc å®¹å¨",charIndex:471},{level:3,title:"Bean",slug:"bean",normalizedTitle:"bean",charIndex:1497},{level:3,title:"Spring IoC",slug:"spring-ioc-2",normalizedTitle:"spring ioc",charIndex:2},{level:2,title:"IoC å®¹å¨",slug:"ioc-å®¹å¨-2",normalizedTitle:"ioc å®¹å¨",charIndex:471},{level:3,title:"éç½®åæ°æ®",slug:"éç½®åæ°æ®",normalizedTitle:"éç½®åæ°æ®",charIndex:1586},{level:3,title:"å®ä¾åå®¹å¨",slug:"å®ä¾åå®¹å¨",normalizedTitle:"å®ä¾åå®¹å¨",charIndex:3390},{level:3,title:"ä½¿ç¨å®¹å¨",slug:"ä½¿ç¨å®¹å¨",normalizedTitle:"ä½¿ç¨å®¹å¨",charIndex:3519},{level:2,title:"IoC ä¾èµæ¥æº",slug:"ioc-ä¾èµæ¥æº",normalizedTitle:"ioc ä¾èµæ¥æº",charIndex:8776},{level:2,title:"IoC éç½®åæ°æ®",slug:"ioc-éç½®åæ°æ®",normalizedTitle:"ioc éç½®åæ°æ®",charIndex:8821},{level:3,title:"Xml éç½®",slug:"xml-éç½®",normalizedTitle:"xml éç½®",charIndex:9025},{level:4,title:"å®ä¾åå®¹å¨",slug:"å®ä¾åå®¹å¨-2",normalizedTitle:"å®ä¾åå®¹å¨",charIndex:3390},{level:4,title:"ä½¿ç¨å®¹å¨",slug:"ä½¿ç¨å®¹å¨-2",normalizedTitle:"ä½¿ç¨å®¹å¨",charIndex:3519},{level:3,title:"æ³¨è§£éç½®",slug:"æ³¨è§£éç½®",normalizedTitle:"æ³¨è§£éç½®",charIndex:3758},{level:4,title:"å¯å¨æ³¨è§£",slug:"å¯å¨æ³¨è§£",normalizedTitle:"å¯å¨æ³¨è§£",charIndex:11107},{level:4,title:"@Required",slug:"required",normalizedTitle:"@required",charIndex:11365},{level:4,title:"@Autowired",slug:"autowired",normalizedTitle:"@autowired",charIndex:11337},{level:4,title:"@Qualifier",slug:"qualifier",normalizedTitle:"@qualifier",charIndex:13969},{level:4,title:"@Resource",slug:"resource",normalizedTitle:"@resource",charIndex:15630},{level:4,title:"@PostConstruct å @PreDestroy",slug:"postconstruct-å-predestroy",normalizedTitle:"@postconstruct å @predestroy",charIndex:17189},{level:4,title:"@Inject",slug:"inject",normalizedTitle:"@inject",charIndex:12176},{level:3,title:"Java éç½®",slug:"java-éç½®",normalizedTitle:"java éç½®",charIndex:3810},{level:4,title:"@Bean",slug:"bean-2",normalizedTitle:"@bean",charIndex:3888},{level:4,title:"å£°æä¸ä¸ª bean",slug:"å£°æä¸ä¸ª-bean",normalizedTitle:"å£°æä¸ä¸ª bean",charIndex:19723},{level:4,title:"@Configuration",slug:"configuration",normalizedTitle:"@configuration",charIndex:3865},{level:2,title:"ä¾èµè§£å³è¿ç¨",slug:"ä¾èµè§£å³è¿ç¨",normalizedTitle:"ä¾èµè§£å³è¿ç¨",charIndex:21290},{level:2,title:"æä½³å®è·µ",slug:"æä½³å®è·µ",normalizedTitle:"æä½³å®è·µ",charIndex:22326},{level:3,title:"singleton ç Bean å¦ä½æ³¨å¥ prototype ç Bean",slug:"singleton-ç-bean-å¦ä½æ³¨å¥-prototype-ç-bean",normalizedTitle:"singleton ç bean å¦ä½æ³¨å¥ prototype ç bean",charIndex:22335},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:24298}],headersStr:"IoC ç®ä» IoC æ¯ä»ä¹ IoC è½åä»ä¹ IoC å DI IoC å®¹å¨ Bean Spring IoC IoC å®¹å¨ éç½®åæ°æ® å®ä¾åå®¹å¨ ä½¿ç¨å®¹å¨ IoC ä¾èµæ¥æº IoC éç½®åæ°æ® Xml éç½® å®ä¾åå®¹å¨ ä½¿ç¨å®¹å¨ æ³¨è§£éç½® å¯å¨æ³¨è§£ @Required @Autowired @Qualifier @Resource @PostConstruct å @PreDestroy @Inject Java éç½® @Bean å£°æä¸ä¸ª bean @Configuration ä¾èµè§£å³è¿ç¨ æä½³å®è·µ singleton ç Bean å¦ä½æ³¨å¥ prototype ç Bean åèèµæ",content:'# Spring IoC\n\n\n# IoC ç®ä»\n\n\n# IoC æ¯ä»ä¹\n\nIoC å³æ§å¶åè½¬ï¼Inversion of Controlï¼ç¼©åä¸º IoCï¼ãIoC åç§°ä¸ºä¾èµåç½®ååï¼è®¾è®¡æ¨¡å¼å­å¤§ååä¹ä¸ï¼ï¼å®çè¦ç¹å¨äºï¼ç¨åºè¦ä¾èµäºæ½è±¡æ¥å£ï¼ä¸è¦ä¾èµäºå·ä½å®ç°ãå®çä½ç¨å°±æ¯ç¨äºéä½ä»£ç é´çè¦ååº¦ã\n\nIoC çå®ç°æ¹å¼æä¸¤ç§ï¼\n\n * ä¾èµæ³¨å¥ï¼Dependency Injectionï¼ç®ç§° DIï¼ï¼ä¸éè¿ new() çæ¹å¼å¨ç±»åé¨åå»ºä¾èµç±»å¯¹è±¡ï¼èæ¯å°ä¾èµçç±»å¯¹è±¡å¨å¤é¨åå»ºå¥½ä¹åï¼éè¿æé å½æ°ãå½æ°åæ°ç­æ¹å¼ä¼ éï¼ææ³¨å¥ï¼ç»ç±»ä½¿ç¨ã\n * ä¾èµæ¥æ¾ï¼Dependency Lookupï¼ï¼å®¹å¨ä¸­çåæ§å¯¹è±¡éè¿å®¹å¨ç API æ¥æ¥æ¾èªå·±æä¾èµçèµæºååä½å¯¹è±¡ã\n\nçè§£ Ioc çå³é®æ¯è¦æç¡®ä¸¤ä¸ªè¦ç¹ï¼\n\n * è°æ§å¶è°ï¼æ§å¶ä»ä¹ï¼ä¼ ç» Java SE ç¨åºè®¾è®¡ï¼æä»¬ç´æ¥å¨å¯¹è±¡åé¨éè¿ new è¿è¡åå»ºå¯¹è±¡ï¼æ¯ç¨åºä¸»å¨å»åå»ºä¾èµå¯¹è±¡ï¼è IoC æ¯æä¸é¨ä¸ä¸ªå®¹å¨æ¥åå»ºè¿äºå¯¹è±¡ï¼å³ç± Ioc å®¹å¨æ¥æ§å¶å¯¹è±¡çåå»ºï¼è°æ§å¶è°ï¼å½ç¶æ¯ IoC å®¹å¨æ§å¶äºå¯¹è±¡ï¼æ§å¶ä»ä¹ï¼é£å°±æ¯ä¸»è¦æ§å¶äºå¤é¨èµæºè·åï¼ä¸åªæ¯å¯¹è±¡åæ¬æ¯å¦æä»¶ç­ï¼ã\n * ä¸ºä½æ¯åè½¬ï¼åªäºæ¹é¢åè½¬äºï¼æåè½¬å°±ææ­£è½¬ï¼ä¼ ç»åºç¨ç¨åºæ¯ç±æä»¬èªå·±å¨å¯¹è±¡ä¸­ä¸»å¨æ§å¶å»ç´æ¥è·åä¾èµå¯¹è±¡ï¼ä¹å°±æ¯æ­£è½¬ï¼èåè½¬åæ¯ç±å®¹å¨æ¥å¸®å¿åå»ºåæ³¨å¥ä¾èµå¯¹è±¡ï¼ä¸ºä½æ¯åè½¬ï¼å ä¸ºç±å®¹å¨å¸®æä»¬æ¥æ¾åæ³¨å¥ä¾èµå¯¹è±¡ï¼å¯¹è±¡åªæ¯è¢«å¨çæ¥åä¾èµå¯¹è±¡ï¼æä»¥æ¯åè½¬ï¼åªäºæ¹é¢åè½¬äºï¼ä¾èµå¯¹è±¡çè·åè¢«åè½¬äºã\n\n\n\n\n# IoC è½åä»ä¹\n\nIoC ä¸æ¯ä¸ç§ææ¯ï¼èæ¯ç¼ç¨ææ³ï¼ä¸ä¸ªéè¦çé¢åå¯¹è±¡ç¼ç¨çæ³åï¼å®è½æå¯¼æä»¬å¦ä½è®¾è®¡åºæ¾è¦åãæ´ä¼è¯çç¨åºãä¼ ç»åºç¨ç¨åºé½æ¯ç±æä»¬å¨ç±»åé¨ä¸»å¨åå»ºä¾èµå¯¹è±¡ï¼ä»èå¯¼è´ç±»ä¸ç±»ä¹é´é«è¦åï¼é¾äºæµè¯ï¼æäº IoC å®¹å¨åï¼æåå»ºåæ¥æ¾ä¾èµå¯¹è±¡çæ§å¶æäº¤ç»äºå®¹å¨ï¼ç±å®¹å¨è¿è¡æ³¨å¥ç»åå¯¹è±¡ï¼æä»¥å¯¹è±¡ä¸å¯¹è±¡ä¹é´æ¯æ¾æ£è¦åï¼è¿æ ·ä¹æ¹ä¾¿æµè¯ï¼å©äºåè½å¤ç¨ï¼æ´éè¦çæ¯ä½¿å¾ç¨åºçæ´ä¸ªä½ç³»ç»æåå¾éå¸¸çµæ´»ã\n\nå¶å® IoC å¯¹ç¼ç¨å¸¦æ¥çæå¤§æ¹åä¸æ¯ä»ä»£ç ä¸ï¼èæ¯ä»ææ³ä¸ï¼åçäºâä¸»ä»æ¢ä½âçååãåºç¨ç¨åºåæ¬æ¯èå¤§ï¼è¦è·åä»ä¹èµæºé½æ¯ä¸»å¨åºå»ï¼ä½æ¯å¨ IoC/DI ææ³ä¸­ï¼åºç¨ç¨åºå°±åæè¢«å¨çäºï¼è¢«å¨çç­å¾ IoC å®¹å¨æ¥åå»ºå¹¶æ³¨å¥å®æéè¦çèµæºäºã\n\nIoC å¾å¥½çä½ç°äºé¢åå¯¹è±¡è®¾è®¡æ³åä¹ä¸ââ å¥½è±åæ³åï¼âå«æ¾æä»¬ï¼æä»¬æ¾ä½ âï¼å³ç± IoC å®¹å¨å¸®å¯¹è±¡æ¾ç¸åºçä¾èµå¯¹è±¡å¹¶æ³¨å¥ï¼èä¸æ¯ç±å¯¹è±¡ä¸»å¨å»æ¾ã\n\n\n# IoC å DI\n\nå¶å®å®ä»¬æ¯åä¸ä¸ªæ¦å¿µçä¸åè§åº¦æè¿°ï¼ç±äºæ§å¶åè½¬æ¦å¿µæ¯è¾å«ç³ï¼å¯è½åªæ¯çè§£ä¸ºå®¹å¨æ§å¶å¯¹è±¡è¿ä¸ä¸ªå±é¢ï¼å¾é¾è®©äººæ³å°è°æ¥ç»´æ¤å¯¹è±¡å³ç³»ï¼ï¼æä»¥ 2004 å¹´å¤§å¸çº§äººç© Martin Fowler åç»åºäºä¸ä¸ªæ°çåå­ï¼âä¾èµæ³¨å¥âï¼ç¸å¯¹ IoC èè¨ï¼âä¾èµæ³¨å¥âæç¡®æè¿°äºâè¢«æ³¨å¥å¯¹è±¡ä¾èµ IoC å®¹å¨éç½®ä¾èµå¯¹è±¡âã\n\n> æ³¨ï¼å¦ææ³è¦æ´å æ·±å¥çäºè§£ IoC å DIï¼è¯·åèå¤§å¸çº§äººç© Martin Fowler çä¸ç¯ç»å¸æç«  Inversion of Control Containers and the Dependency Injection pattern ã\n\n\n# IoC å®¹å¨\n\nIoC å®¹å¨å°±æ¯å·æä¾èµæ³¨å¥åè½çå®¹å¨ãIoC å®¹å¨è´è´£å®ä¾åãå®ä½ãéç½®åºç¨ç¨åºä¸­çå¯¹è±¡åå»ºç«è¿äºå¯¹è±¡é´çä¾èµãåºç¨ç¨åºæ éç´æ¥å¨ä»£ç ä¸­ new ç¸å³çå¯¹è±¡ï¼åºç¨ç¨åºç± IoC å®¹å¨è¿è¡ç»è£ãå¨ Spring ä¸­ BeanFactory æ¯ IoC å®¹å¨çå®éä»£è¡¨èã\n\nSpring IoC å®¹å¨å¦ä½ç¥éåªäºæ¯å®ç®¡ççå¯¹è±¡å¢ï¼è¿å°±éè¦éç½®æä»¶ï¼Spring IoC å®¹å¨éè¿è¯»åéç½®æä»¶ä¸­çéç½®åæ°æ®ï¼éè¿åæ°æ®å¯¹åºç¨ä¸­çåä¸ªå¯¹è±¡è¿è¡å®ä¾ååè£éãä¸è¬ä½¿ç¨åºäº xml éç½®æä»¶è¿è¡éç½®åæ°æ®ï¼èä¸ Spring ä¸éç½®æä»¶å®å¨è§£è¦çï¼å¯ä»¥ä½¿ç¨å¶ä»ä»»ä½å¯è½çæ¹å¼è¿è¡éç½®åæ°æ®ï¼æ¯å¦æ³¨è§£ãåºäº java æä»¶çãåºäºå±æ§æä»¶çéç½®é½å¯ä»¥ã\n\n\n# Bean\n\n> JavaBean æ¯ä¸ç§ JAVA è¯­è¨åæçå¯éç¨ç»ä»¶ãä¸ºåæ JavaBeanï¼ç±»å¿é¡»æ¯å·ä½çåå¬å±çï¼å¹¶ä¸å·ææ åæ°çæé å¨ãJavaBean å¯¹å¤é¨éè¿æä¾ getter / setter æ¹æ³æ¥è®¿é®å¶æåã\n\nç± IoC å®¹å¨ç®¡ççé£äºç»æä½ åºç¨ç¨åºçå¯¹è±¡æä»¬å°±å«å® BeanãBean å°±æ¯ç± Spring å®¹å¨åå§åãè£éåç®¡ççå¯¹è±¡ï¼é¤æ­¤ä¹å¤ï¼bean å°±ä¸åºç¨ç¨åºä¸­çå¶ä»å¯¹è±¡æ²¡æä»ä¹åºå«äºãé£ IoC ææ ·ç¡®å®å¦ä½å®ä¾å Beanãç®¡ç Bean ä¹é´çä¾èµå³ç³»ä»¥åç®¡ç Bean å¢ï¼è¿å°±éè¦éç½®åæ°æ®ï¼å¨ Spring ä¸­ç± BeanDefinition ä»£è¡¨ï¼åè¾¹ä¼è¯¦ç»ä»ç»ï¼éç½®åæ°æ®æå®å¦ä½å®ä¾å Beanãå¦ä½ç»è£ Bean ç­ã\n\n\n# Spring IoC\n\nSpring IoC å®¹å¨ä¸­çå¯¹è±¡ä»éè¿æé å½æ°åæ°ãå·¥åæ¹æ³çåæ°æå¨å¯¹è±¡å®ä¾è¢«æé æä»å·¥åæ¹æ³è¿ååè®¾ç½®çå±æ§æ¥å®ä¹å®ä»¬çä¾èµå³ç³»ï¼å³ä¸å®ä»¬ä¸èµ·å·¥ä½çå¶ä»å¯¹è±¡ï¼ãç¶åå®¹å¨å¨åå»º bean æ¶æ³¨å¥è¿äºä¾èµé¡¹ãè¿ä¸ªè¿ç¨åºæ¬ä¸æ¯ bean æ¬èº«éè¿ä½¿ç¨ç±»çç´æ¥æé æè¯¸å¦æå¡å®ä½å¨æ¨¡å¼ä¹ç±»çæºå¶æ¥æ§å¶å¶ä¾èµå³ç³»çå®ä¾åæä½ç½®çéè¿ç¨ï¼å æ­¤ç§°ä¸ºæ§å¶åè½¬ï¼ã\n\norg.springframework.beans å org.springframework.context æ¯ IoC å®¹å¨çåºç¡ã\n\n\n# IoC å®¹å¨\n\nå¨ Spring ä¸­ï¼æä¸¤ç§ IoC å®¹å¨ï¼BeanFactory å ApplicationContextã\n\n * BeanFactoryï¼BeanFactory æ¯ Spring åºç¡ IoC å®¹å¨ãBeanFactory æä¾äº Spring å®¹å¨çéç½®æ¡æ¶ååºæ¬åè½ã\n * ApplicationContextï¼ApplicationContext æ¯å·å¤åºç¨ç¹æ§ç BeanFactory çå­æ¥å£ãå®è¿æ©å±äºå¶ä»ä¸äºæ¥å£ï¼ä»¥æ¯ææ´ä¸°å¯çåè½ï¼å¦ï¼å½éåãè®¿é®èµæºãäºä»¶æºå¶ãæ´æ¹ä¾¿çæ¯æ AOPãå¨ web åºç¨ä¸­æå®åºç¨å±ä¸ä¸æç­ã\n\nå®éå¼åä¸­ï¼æ´æ¨èä½¿ç¨ ApplicationContext ä½ä¸º IoC å®¹å¨ï¼å ä¸ºå®çåè½è¿å¤äº BeanFactoryã\n\norg.springframework.context.ApplicationContext æ¥å£ä»£è¡¨ Spring IoC å®¹å¨ï¼è´è´£å®ä¾åãéç½®åç»è£ beanãå®¹å¨éè¿è¯»åéç½®åæ°æ®æ¥è·åå³äºè¦å®ä¾åãéç½®åç»è£åªäºå¯¹è±¡çæä»¤ãéç½®åæ°æ®ä»¥ XMLãJava æ³¨éæ Java ä»£ç è¡¨ç¤ºãå®åè®¸æ¨è¡¨è¾¾ç»æåºç¨ç¨åºçå¯¹è±¡ä»¥åè¿äºå¯¹è±¡ä¹é´ä¸°å¯çç¸äºä¾èµå³ç³»ã\n\nSpring æä¾äº ApplicationContext æ¥å£çå ä¸ªå®ç°ï¼ä¾å¦ï¼\n\n * ClassPathXmlApplicationContextï¼ApplicationContext çå®ç°ï¼ä» classpath è·åéç½®ä¿¡æ¯ã\n\nBeanFactory beanFactory = new ClassPathXmlApplicationContext("classpath.xml");\n\n\n * FileSystemXmlApplicationContextï¼ApplicationContext çå®ç°ï¼ä»æä»¶ç³»ç»è·åéç½®ä¿¡æ¯ã\n\nBeanFactory beanFactory = new FileSystemXmlApplicationContext("fileSystemConfig.xml");\n\n\nå¨å¤§å¤æ°åºç¨åºæ¯ä¸­ï¼ä¸éè¦æ¾å¼éè¿ç¨æ·ä»£ç æ¥å®ä¾å Spring IoC å®¹å¨çä¸ä¸ªæå¤ä¸ªå®ä¾ã\n\nä¸å¾æ¾ç¤ºäº Spring IoC å®¹å¨çå·¥ä½æ­¥éª¤\n\n\n\nä½¿ç¨ IoC å®¹å¨å¯åä¸ºä¸æ­¥éª¤ï¼\n\n 1. éç½®åæ°æ®ï¼éè¦éç½®ä¸äºåæ°æ®æ¥åè¯ Springï¼ä½ å¸æå®¹å¨å¦ä½å·¥ä½ï¼å·ä½æ¥è¯´ï¼å°±æ¯å¦ä½å»åå§åãéç½®ãç®¡ç JavaBean å¯¹è±¡ã\n 2. å®ä¾åå®¹å¨ï¼ç± IoC å®¹å¨è§£æéç½®çåæ°æ®ãIoC å®¹å¨ç Bean Reader è¯»åå¹¶è§£æéç½®æä»¶ï¼æ ¹æ®å®ä¹çæ BeanDefinition éç½®åæ°æ®å¯¹è±¡ï¼IoC å®¹å¨æ ¹æ® BeanDefinition è¿è¡å®ä¾åãéç½®åç»è£ Beanã\n 3. ä½¿ç¨å®¹å¨ï¼ç±å®¢æ·ç«¯å®ä¾åå®¹å¨ï¼è·åéè¦ç Beanã\n\n\n# éç½®åæ°æ®\n\n**åæ°æ®ï¼Metadataï¼**åç§°ä¸­ä»æ°æ®ãä¸­ç»§æ°æ®ï¼ä¸ºæè¿°æ°æ®çæ°æ®ï¼data about dataï¼ï¼ä¸»è¦æ¯æè¿°æ°æ®å±æ§ï¼propertyï¼çä¿¡æ¯ã\n\néç½®åæ°æ®çæ¹å¼ï¼\n\n * åºäº xml éç½®ï¼Spring çä¼ ç»éç½®æ¹å¼ãéå¸¸æ¯å¨é¡¶çº§åç´  <beans> ä¸­éè¿ <bean>åç´ éç½®åæ°æ®ãè¿ç§æ¹å¼çç¼ºç¹æ¯ï¼å¦æ JavaBean è¿å¤ï¼åäº§ççéç½®æä»¶è¶³ä»¥è®©ä½ ç¼è±ç¼­ä¹±ã\n * åºäºæ³¨è§£éç½®ï¼Spring 2.5 å¼å¥äºå¯¹åºäºæ³¨è§£çéç½®åæ°æ®çæ¯æãå¯ä»¥å¤§å¤§ç®åä½ çéç½®ã\n * åºäº Java éç½®ï¼ä» Spring 3.0 å¼å§ï¼Spring æ¯æä½¿ç¨ Java ä»£ç æ¥éç½®åæ°æ®ãéå¸¸æ¯å¨ @Configuration ä¿®é¥°çç±»ä¸­éè¿ @Bean æå®å®ä¾å Bean çæ¹æ³ãæ´å¤è¯¦æï¼å¯ä»¥åé @Configurationã@Beanã@Import å @DependsOn æ³¨éã\n\nè¿äº bean å®ä¹å¯¹åºäºææåºç¨ç¨åºçå®éå¯¹è±¡ãä¾å¦ï¼å®ä¹æå¡å±å¯¹è±¡ãæ°æ®è®¿é®å¯¹è±¡ (DAO)ãè¡¨ç¤ºå¯¹è±¡ï¼å¦ Struts Action å®ä¾ï¼ãåºç¡è®¾æ½å¯¹è±¡ï¼å¦ Hibernate SessionFactoriesãJMS éåç­ï¼ãéå¸¸ï¼ä¸ä¼å¨å®¹å¨ä¸­éç½®ç»ç²åº¦çåå¯¹è±¡ï¼å ä¸ºåå»ºåå è½½åå¯¹è±¡éå¸¸æ¯ DAO åä¸å¡é»è¾çè´£ä»»ãä½æ¯ï¼å¯ä»¥ä½¿ç¨ Spring ä¸ AspectJ çéææ¥éç½®å¨ IoC å®¹å¨æ§å¶ä¹å¤åå»ºçå¯¹è±¡ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåºäº XML çéç½®åæ°æ®çåºæ¬ç»æï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!--id å±æ§ç¨äºå¯ä¸æ è¯åä¸ª bean å®ä¹--\x3e\n    \x3c!--class å±æ§ç¨äºææ bean ç±»åçå®å¨éå®å--\x3e\n    <bean id="..." class="...">\n        \x3c!-- è¿ééç½® Bean çå±æ§ --\x3e\n    </bean>\n\n    <bean id="..." class="...">\n        \x3c!-- è¿ééç½® Bean çå±æ§ --\x3e\n    </bean>\n\n    \x3c!-- æ´å¤ç Bean å®ä¹ --\x3e\n\n</beans>\n\n\n\n# å®ä¾åå®¹å¨\n\nå¯ä»¥éè¿ä¸º ApplicationContext çæé å½æ°æå®å¤é¨èµæºè·¯å¾ï¼æ¥å è½½éç½®åæ°æ®ã\n\nApplicationContext context = new ClassPathXmlApplicationContext("services.xml", "daos.xml");\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºæå¡å±å¯¹è±¡ (services.xml) éç½®æä»¶ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!-- services --\x3e\n\n    <bean id="petStore" class="org.springframework.samples.jpetstore.services.PetStoreServiceImpl">\n        <property name="accountDao" ref="accountDao"/>\n        <property name="itemDao" ref="itemDao"/>\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for services go here --\x3e\n\n</beans>\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºæ°æ®è®¿é®å¯¹è±¡ (daos.xml) éç½®æä»¶ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="accountDao"\n        class="org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="itemDao" class="org.springframework.samples.jpetstore.dao.jpa.JpaItemDao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for data access objects go here --\x3e\n\n</beans>\n\n\nä¸é¢çç¤ºä¾ä¸­ï¼æå¡å±ç± PetStoreServiceImpl ç±»åç±»åä¸º JpaAccountDao å JpaItemDao çä¸¤ä¸ªæ°æ®è®¿é®å¯¹è±¡ï¼åºäº JPA å¯¹è±¡å³ç³»æ å°æ åï¼ç»æã property name åç´ æçæ¯ JavaBean å±æ§çåç§°ï¼ref åç´ æçæ¯å¦ä¸ä¸ª bean å®ä¹çåç§°ã id å ref åç´ ä¹é´çè¿ç§èç³»è¡¨è¾¾äºåä½å¯¹è±¡ä¹é´çä¾èµå³ç³»ã\n\nSpring æ¯æéè¿å¤ä¸ª xml æä»¶æ¥å®ä¹ Beanï¼æ¯ä¸ªåç¬ç XML éç½®æä»¶é½ä»£è¡¨æ¶æä¸­çä¸ä¸ªé»è¾å±ææ¨¡åãå¯ä»¥ä½¿ç¨ ApplicationContext æé å½æ°ä»ææè¿äº XML çæ®µå è½½ bean å®ä¹ãæèï¼ä½¿ç¨ <import/> åç´ ä»å¦ä¸ä¸ªæå¤ä¸ªæä»¶å è½½ bean å®ä¹ãå¦ä¸æç¤ºï¼\n\n<beans>\n    <import resource="services.xml"/>\n    <import resource="resources/messageSource.xml"/>\n    <import resource="/resources/themeSource.xml"/>\n\n    <bean id="bean1" class="..."/>\n    <bean id="bean2" class="..."/>\n</beans>\n\n\nå¨ä¸é¢çç¤ºä¾ä¸­ï¼å¤é¨ bean å®ä¹ä»ä¸ä¸ªæä»¶å è½½ï¼services.xmlãmessageSource.xml å themeSource.xmlãservices.xml æä»¶å¿é¡»åå½å xml æä»¶ä½äºåä¸ç®å½æç±»è·¯å¾ä½ç½®ï¼è messageSource.xml å themeSource.xml å¿é¡»ä½äºå½åæä»¶æå¨ç®å½çå­ç®å½ resources ä¸ã/resources ç / ä¼è¢«å¿½ç¥ãä½æ¯ï¼é´äºè¿äºè·¯å¾æ¯ç¸å¯¹çï¼æå¥½ä¸è¦ä½¿ç¨ /ãæ ¹æ® Spring Schemaï¼è¢«å¯¼å¥æä»¶çåå®¹ï¼åæ¬é¡¶çº§ <beans/> åç´ ï¼å¿é¡»æ¯ææç XML bean å®ä¹ã\n\n> æ³¨æï¼\n> \n> å¯ä»¥ï¼ä½ä¸æ¨èä½¿ç¨ç¸å¯¹ â../â è·¯å¾æ¥å¼ç¨ç¶ç®å½ä¸­çæä»¶ãè¿æ ·åä¼åå»ºå¯¹å½ååºç¨ç¨åºä¹å¤çæä»¶çä¾èµãç¹å«æ¯ï¼ä¸å»ºè®®å°æ­¤å¼ç¨ç¨äº classpathï¼URLï¼ä¾å¦ï¼ classpath:../services.xmlï¼ï¼å¶ä¸­è¿è¡æ¶è§£æè¿ç¨ä¼éæ©âæè¿çâç±»è·¯å¾æ ¹ï¼ç¶åæ¥çå¶ç¶ç®å½ãç±»è·¯å¾éç½®æ´æ¹å¯è½ä¼å¯¼è´éæ©ä¸åçãä¸æ­£ç¡®çç®å½ã\n> \n> å¯ä»¥ä½¿ç¨å®å¨éå®çèµæºä½ç½®èä¸æ¯ç¸å¯¹è·¯å¾ï¼ä¾å¦ï¼file:C:/config/services.xml æ classpath:/config/services.xmlãå»ºè®®ä¸ºæ­¤ç±»ç»å¯¹è·¯å¾ä¿çä¸å®çé´æ¥æ§ âââ ä¾å¦ï¼éè¿ â${...}â å ä½ç¬¦æ¥å¼ç¨è¿è¡æ¶æå® ç JVM åæ°ã\n\nå½åç©ºé´æ¬èº«æä¾äºå¯¼å¥æä»¤åè½ã Spring æä¾çä¸ç³»å XML å½åç©ºé´ä¸­æä¾äºé¤äºæ®é bean å®ä¹ä¹å¤çæ´å¤éç½®ç¹æ§ âââ ä¾å¦ï¼context å util å½åç©ºé´ã\n\n\n# ä½¿ç¨å®¹å¨\n\nApplicationContext è½å¤ç»´æ¤ä¸å bean åå¶ä¾èµé¡¹çæ³¨åè¡¨ãéè¿ä½¿ç¨æ¹æ³ T getBean(String name, Class T requiredType)ï¼å¯ä»¥æ£ç´¢å¹¶è·å bean çå®ä¾ã\n\nApplicationContext åè®¸è¯»å bean å®ä¹å¹¶è®¿é®å®ä»¬ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n// create and configure beans\nApplicationContext context = new ClassPathXmlApplicationContext("services.xml", "daos.xml");\n\n// retrieve configured instance\nPetStoreService service = context.getBean("petStore", PetStoreService.class);\n\n// use configured instance\nList<String> userList = service.getUsernameList();\n\n\næçµæ´»çåä½æ¯ GenericApplicationContext ç»åéè¯»å¨å§æ âââ ä¾å¦ï¼ç»å XML æä»¶ç XmlBeanDefinitionReaderï¼å¦ä¸ä¾æç¤ºï¼\n\nGenericApplicationContext context = new GenericApplicationContext();\nnew XmlBeanDefinitionReader(context).loadBeanDefinitions("services.xml", "daos.xml");\ncontext.refresh();\n\n\nå¯ä»¥å¨åä¸ä¸ª ApplicationContext ä¸æ··ååå¹éæ­¤ç±»è¯»åå¨å§æï¼ä»ä¸åçéç½®æºè¯»å bean å®ä¹ã\n\nç¶åï¼å¯ä»¥ä½¿ç¨ getBean æ£ç´¢ bean çå®ä¾ã ApplicationContext æ¥å£è¿æä¸äºå¶ä»æ¹æ³ç¨äºæ£ç´¢ beanï¼ä½çæ³æåµä¸ï¼åºç¨ç¨åºä»£ç ä¸åºè¯¥ä½¿ç¨å®ä»¬ãå®éä¸ï¼åºç¨ç¨åºä»£ç æ ¹æ¬ä¸åºè¯¥è°ç¨ getBean() æ¹æ³ï¼å æ­¤æ ¹æ¬ä¸ä¾èµ Spring APIãä¾å¦ï¼Spring ä¸ Web æ¡æ¶çéæä¸ºåç§ Web æ¡æ¶ç»ä»¶ï¼ä¾å¦æ§å¶å¨å JSF ç®¡çç beanï¼æä¾äºä¾èµæ³¨å¥ï¼è®©æ¨å¯ä»¥éè¿åæ°æ®ï¼ä¾å¦èªå¨è£éæ³¨éï¼å£°æå¯¹ç¹å® bean çä¾èµã\n\n\n# IoC ä¾èµæ¥æº\n\nèªå®ä¹ Bean\n\nå®¹å¨åå»º Bean å¯¹è±¡\n\nå®¹å¨åå»ºä¾èµ\n\n\n# IoC éç½®åæ°æ®\n\nIoC å®¹å¨çéç½®æä¸ç§æ¹å¼ï¼\n\n * åºäº xml éç½®\n * åºäº properties éç½®\n * åºäºæ³¨è§£éç½®\n * åºäº Java éç½®\n\nä½ä¸º Spring ä¼ ç»çéç½®æ¹å¼ï¼xml éç½®æ¹å¼ä¸è¬ä¸ºå¤§å®¶æçç¥ã\n\nå¦æåå¦äº xml éç½®ï¼Spring ä¹æä¾äºæ³¨è§£éç½®æ¹å¼æ Java éç½®æ¹å¼æ¥ç®åéç½®ã\n\næ¬æï¼å°å¯¹ Java éç½® IoC å®¹å¨åè¯¦ç»çä»ç»ã\n\n\n# Xml éç½®\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n         http://www.springframework.org/schema/beans/spring-beans.xsd">\n  <import resource="resource1.xml" />\n  <bean id="bean1" class=""></bean>\n  <bean id="bean2" class=""></bean>\n  <bean name="bean2" class=""></bean>\n\n  <alias alias="bean3" name="bean2"/>\n  <import resource="resource2.xml" />\n</beans>\n\n\næ ç­¾è¯´æï¼\n\n * <beans> æ¯ Spring éç½®æä»¶çæ ¹èç¹ã\n * <bean> ç¨æ¥å®ä¹ä¸ä¸ª JavaBeanãid å±æ§æ¯å®çæ è¯ï¼å¨æä»¶ä¸­å¿é¡»å¯ä¸ï¼class å±æ§æ¯å®å³èçç±»ã\n * <alias> ç¨æ¥å®ä¹ Bean çå«åã\n * <import> ç¨æ¥å¯¼å¥å¶ä»éç½®æä»¶ç Bean å®ä¹ãè¿æ¯ä¸ºäºå è½½å¤ä¸ªéç½®æä»¶ï¼å½ç¶ä¹å¯ä»¥æè¿äºéç½®æä»¶æé ä¸ºä¸ä¸ªæ°ç»ï¼new String[] {âconfig1.xmlâ, config2.xml}ï¼ä¼ ç» ApplicationContext å®ç°ç±»è¿è¡å è½½å¤ä¸ªéç½®æä»¶ï¼é£ä¸ä¸ªæ´éåç±ç¨æ·å³å®ï¼è¿ä¸¤ç§æ¹å¼é½æ¯éè¿è°ç¨ Bean Definition Reader è¯»å Bean å®ä¹ï¼åé¨å®ç°æ²¡æä»»ä½åºå«ã<import> æ ç­¾å¯ä»¥æ¾å¨ <beans> ä¸çä»»ä½ä½ç½®ï¼æ²¡æé¡ºåºå³ç³»ã\n\n# å®ä¾åå®¹å¨\n\nå®ä¾åå®¹å¨çè¿ç¨ï¼ å®ä½èµæºï¼XML éç½®æä»¶ï¼ è¯»åéç½®ä¿¡æ¯(Resource) è½¬åä¸º Spring å¯è¯å«çæ°æ®å½¢å¼ï¼BeanDefinitionï¼\n\nApplicationContext context =\n      new ClassPathXmlApplicationContext(new String[] {"services.xml", "daos.xml"});\n\n\nç»å xml éç½®æä»¶ éç½®ç Bean åè½åä¸ç¸åï¼é½æ¾å¨ä¸ä¸ª xml æä»¶ä¸­ï¼ä¸ä¾¿ç®¡çã Java è®¾è®¡æ¨¡å¼è®²ç©¶èè´£åä¸ååãéç½®å¶å®ä¹æ¯å¦æ­¤ï¼åè½ä¸åç JavaBean åºè¯¥è¢«ç»ç»å¨ä¸åç xml æä»¶ä¸­ãç¶åä½¿ç¨ import æ ç­¾æå®ä»¬ç»ä¸å¯¼å¥ã\n\n<import resource="classpath:spring/applicationContext.xml"/>\n<import resource="/WEB-INF/spring/service.xml"/>\n\n\n# ä½¿ç¨å®¹å¨\n\nä½¿ç¨å®¹å¨çæ¹å¼å°±æ¯éè¿getBeanè·å IoC å®¹å¨ä¸­ç JavaBeanã Spring ä¹æå¶ä»æ¹æ³å»è·å¾ JavaBeanï¼ä½æ¯ Spring å¹¶ä¸æ¨èå¶ä»æ¹å¼ã\n\n// create and configure beans\nApplicationContext context =\nnew ClassPathXmlApplicationContext(new String[] {"services.xml", "daos.xml"});\n// retrieve configured instance\nPetStoreService service = context.getBean("petStore", PetStoreService.class);\n// use configured instance\nList<String> userList = service.getUsernameList();\n\n\n\n# æ³¨è§£éç½®\n\nSpring2.5 å¼å¥äºæ³¨è§£ã äºæ¯ï¼ä¸ä¸ªé®é¢äº§çäºï¼ä½¿ç¨æ³¨è§£æ¹å¼æ³¨å¥ JavaBean æ¯ä¸æ¯ä¸å®å®ç xml æ¹å¼ï¼ æªå¿ãæ­£æè°ï¼ä»èè§ä»æºèè§æºãä»»ä½äºç©é½æå¶ä¼ç¼ºç¹ï¼çä½ å¦ä½åèãæ¥ççæ³¨è§£çä¼ç¼ºç¹ï¼ ä¼ç¹ï¼å¤§å¤§åå°äºéç½®ï¼å¹¶ä¸å¯ä»¥ä½¿éç½®æ´å ç²¾ç»ââç±»ï¼æ¹æ³ï¼å­æ®µé½å¯ä»¥ç¨æ³¨è§£å»æ è®°ã ç¼ºç¹ï¼ä½¿ç¨æ³¨è§£ï¼ä¸å¯é¿åäº§çäºä¾µå¥å¼ç¼ç¨ï¼ä¹äº§çäºä¸äºé®é¢ã\n\n * ä½ éè¦å°æ³¨è§£å å¥ä½ çæºç å¹¶ç¼è¯å®ï¼\n\n * æ³¨è§£å¾å¾æ¯è¾åæ£ï¼ä¸æç®¡æ§ã\n\n> æ³¨ï¼spring ä¸­ï¼åè¿è¡æ³¨è§£æ³¨å¥ï¼ç¶åææ¯ xml æ³¨å¥ï¼å æ­¤å¦ææ³¨å¥çç®æ ç¸åï¼åèä¼è¦çåèã\n\n# å¯å¨æ³¨è§£\n\nSpring é»è®¤æ¯ä¸å¯ç¨æ³¨è§£çãå¦ææ³ä½¿ç¨æ³¨è§£ï¼éè¦åå¨ xml ä¸­å¯å¨æ³¨è§£ã å¯å¨æ¹å¼ï¼å¨ xml ä¸­å å¥ä¸ä¸ªæ ç­¾ï¼å¾ç®åå§ã\n\n<context:annotation-config/>\n\n\n> æ³¨ï¼<context:annotation-config/> åªä¼æ£ç´¢å®ä¹å®çä¸ä¸æãä»ä¹ææå¢ï¼å°±æ¯è¯´ï¼å¦æä½  ä¸º DispatcherServlet æå®äºä¸ä¸ªWebApplicationContextï¼é£ä¹å®åªå¨ controller ä¸­æ¥æ¾@Autowiredæ³¨è§£ï¼èä¸ä¼æ£æ¥å¶å®çè·¯å¾ã\n\n# @Required\n\n@Required æ³¨è§£åªè½ç¨äºä¿®é¥° bean å±æ§ç setter æ¹æ³ãåå½±åç bean å±æ§å¿é¡»å¨éç½®æ¶è¢«å¡«åå¨ xml éç½®æä»¶ä¸­ï¼å¦åå®¹å¨å°æåºBeanInitializationExceptionã\n\npublic class AnnotationRequired {\n    private String name;\n    private String sex;\n\n    public String getName() {\n        return name;\n    }\n\n    /**\n     * @Required æ³¨è§£ç¨äºbeanå±æ§çsetteræ¹æ³å¹¶ä¸å®æç¤ºï¼åå½±åçbeanå±æ§å¿é¡»å¨éç½®æ¶è¢«å¡«åå¨xmléç½®æä»¶ä¸­ï¼\n     *           å¦åå®¹å¨å°æåºBeanInitializationExceptionã\n     */\n    @Required\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getSex() {\n        return sex;\n    }\n\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n}\n\n\n# @Autowired\n\n@Autowiredæ³¨è§£å¯ç¨äºä¿®é¥°å±æ§ãsetter æ¹æ³ãæé æ¹æ³ã\n\n@Autowired æ³¨å¥è¿ç¨\n\n * åä¿¡æ¯è§£æ\n * ä¾èµæ¥æ¾\n * ä¾èµæ³¨å¥ï¼å­æ®µãæ¹æ³ï¼\n\n> æ³¨ï¼@Autowiredæ³¨è§£ä¹å¯ç¨äºä¿®é¥°æé æ¹æ³ï¼ä½å¦æç±»ä¸­åªæé»è®¤æé æ¹æ³ï¼åæ²¡æå¿è¦ãå¦ææå¤ä¸ªæé å¨ï¼è³å°åºè¯¥ä¿®é¥°ä¸ä¸ªï¼æ¥åè¯å®¹å¨åªä¸ä¸ªå¿é¡»ä½¿ç¨ã\n\nå¯ä»¥ä½¿ç¨ JSR330 çæ³¨è§£@Injectæ¥æ¿ä»£@Autowiredã\n\nèä¾\n\npublic class AnnotationAutowired {\n    private static final Logger log = LoggerFactory.getLogger(AnnotationRequired.class);\n\n    @Autowired\n    private Apple fieldA;\n\n    private Banana fieldB;\n\n    private Orange fieldC;\n\n    public Apple getFieldA() {\n        return fieldA;\n    }\n\n    public void setFieldA(Apple fieldA) {\n        this.fieldA = fieldA;\n    }\n\n    public Banana getFieldB() {\n        return fieldB;\n    }\n\n    @Autowired\n    public void setFieldB(Banana fieldB) {\n        this.fieldB = fieldB;\n    }\n\n    public Orange getFieldC() {\n        return fieldC;\n    }\n\n    public void setFieldC(Orange fieldC) {\n        this.fieldC = fieldC;\n    }\n\n    public AnnotationAutowired() {}\n\n    @Autowired\n    public AnnotationAutowired(Orange fieldC) {\n        this.fieldC = fieldC;\n    }\n\n    public static void main(String[] args) throws Exception {\n        AbstractApplicationContext ctx =\n                        new ClassPathXmlApplicationContext("spring/spring-annotation.xml");\n\n        AnnotationAutowired annotationAutowired =\n                        (AnnotationAutowired) ctx.getBean("annotationAutowired");\n        log.debug("fieldA: {}, fieldB:{}, fieldC:{}", annotationAutowired.getFieldA().getName(),\n                        annotationAutowired.getFieldB().getName(),\n                        annotationAutowired.getFieldC().getName());\n        ctx.close();\n    }\n}\n\n\nxml ä¸­çéç½®\n\n\x3c!-- æµè¯@Autowired --\x3e\n<bean id="apple" class="org.zp.notes.spring.beans.annotation.sample.Apple"/>\n<bean id="potato" class="org.zp.notes.spring.beans.annotation.sample.Banana"/>\n<bean id="tomato" class="org.zp.notes.spring.beans.annotation.sample.Orange"/>\n<bean id="annotationAutowired" class="org.zp.notes.spring.beans.annotation.sample.AnnotationAutowired"/>\n\n\n# @Qualifier\n\nå¨@Autowiredæ³¨è§£ä¸­ï¼æå°äºå¦æåç°æå¤ä¸ªåéç bean é½ç¬¦åä¿®é¥°ç±»åï¼Spring å°±ä¼æçäºã\n\né£ä¹ï¼å¦ä½è§£å³è¿ä¸ªé®é¢ã\n\nå¯ä»¥éè¿@Qualifieræå® bean åç§°æ¥éå®çæ­£éè¦çé£ä¸ª beanã\n\nèä¾\n\npublic class AnnotationQualifier {\n    private static final Logger log = LoggerFactory.getLogger(AnnotationQualifier.class);\n\n    @Autowired\n    @Qualifier("dog") /** å»é¤è¿è¡ï¼ä¼æ¥å¼å¸¸ */\n    Animal dog;\n\n    Animal cat;\n\n    public Animal getDog() {\n        return dog;\n    }\n\n    public void setDog(Animal dog) {\n        this.dog = dog;\n    }\n\n    public Animal getCat() {\n        return cat;\n    }\n\n    @Autowired\n    public void setCat(@Qualifier("cat") Animal cat) {\n        this.cat = cat;\n    }\n\n    public static void main(String[] args) throws Exception {\n        AbstractApplicationContext ctx =\n                new ClassPathXmlApplicationContext("spring/spring-annotation.xml");\n\n        AnnotationQualifier annotationQualifier =\n                (AnnotationQualifier) ctx.getBean("annotationQualifier");\n\n        log.debug("Dog name: {}", annotationQualifier.getDog().getName());\n        log.debug("Cat name: {}", annotationQualifier.getCat().getName());\n        ctx.close();\n    }\n}\n\nabstract class Animal {\n    public String getName() {\n        return null;\n    }\n}\n\nclass Dog extends Animal {\n    public String getName() {\n        return "ç";\n    }\n}\n\nclass Cat extends Animal {\n    public String getName() {\n        return "ç«";\n    }\n}\n\n\nxml ä¸­çéç½®\n\n\x3c!-- æµè¯@Qualifier --\x3e\n<bean id="dog" class="org.zp.notes.spring.beans.annotation.sample.Dog"/>\n<bean id="cat" class="org.zp.notes.spring.beans.annotation.sample.Cat"/>\n<bean id="annotationQualifier" class="org.zp.notes.spring.beans.annotation.sample.AnnotationQualifier"/>\n\n\n# @Resource\n\nSpring æ¯æ JSP250 è§å®çæ³¨è§£@Resourceãè¿ä¸ªæ³¨è§£æ ¹æ®æå®çåç§°æ¥æ³¨å¥ beanã\n\nå¦ææ²¡æä¸º@Resourceæå®åç§°ï¼å®ä¼å@Autowiredä¸æ ·æç§ç±»åå»å¯»æ¾å¹éã\n\nå¨ Spring ä¸­ï¼ç±CommonAnnotationBeanPostProcessoræ¥å¤ç@Resourceæ³¨è§£ã\n\nèä¾\n\npublic class AnnotationResource {\n    private static final Logger log = LoggerFactory.getLogger(AnnotationResource.class);\n\n    @Resource(name = "flower")\n    Plant flower;\n\n    @Resource(name = "tree")\n    Plant tree;\n\n    public Plant getFlower() {\n        return flower;\n    }\n\n    public void setFlower(Plant flower) {\n        this.flower = flower;\n    }\n\n    public Plant getTree() {\n        return tree;\n    }\n\n    public void setTree(Plant tree) {\n        this.tree = tree;\n    }\n\n    public static void main(String[] args) throws Exception {\n        AbstractApplicationContext ctx =\n                        new ClassPathXmlApplicationContext("spring/spring-annotation.xml");\n\n        AnnotationResource annotationResource =\n                        (AnnotationResource) ctx.getBean("annotationResource");\n        log.debug("type: {}, name: {}", annotationResource.getFlower().getClass(), annotationResource.getFlower().getName());\n        log.debug("type: {}, name: {}", annotationResource.getTree().getClass(), annotationResource.getTree().getName());\n        ctx.close();\n    }\n}\n\n\nxml çéç½®\n\n\x3c!-- æµè¯@Resource --\x3e\n<bean id="flower" class="org.zp.notes.spring.beans.annotation.sample.Flower"/>\n<bean id="tree" class="org.zp.notes.spring.beans.annotation.sample.Tree"/>\n<bean id="annotationResource" class="org.zp.notes.spring.beans.annotation.sample.AnnotationResource"/>\n\n\n# @PostConstruct å @PreDestroy\n\n@PostConstruct å @PreDestroy æ¯ JSR 250 è§å®çç¨äºçå½å¨æçæ³¨è§£ã\n\nä»å¶åå·å°±å¯ä»¥çåºï¼ä¸ä¸ªæ¯å¨æé ä¹åè°ç¨çæ¹æ³ï¼ä¸ä¸ªæ¯éæ¯ä¹åè°ç¨çæ¹æ³ã\n\npublic class AnnotationPostConstructAndPreDestroy {\n    private static final Logger log = LoggerFactory.getLogger(AnnotationPostConstructAndPreDestroy.class);\n\n    @PostConstruct\n    public void init() {\n        log.debug("call @PostConstruct method");\n    }\n\n    @PreDestroy\n    public void destroy() {\n        log.debug("call @PreDestroy method");\n    }\n}\n\n\n# @Inject\n\nä» Spring3.0 å¼å§ï¼Spring æ¯æ JSR 330 æ åæ³¨è§£ï¼ä¾èµæ³¨å¥ï¼ã\n\næ³¨ï¼å¦æè¦ä½¿ç¨ JSR 330 æ³¨è§£ï¼éè¦ä½¿ç¨å¤é¨ jar åã\n\nè¥ä½ ä½¿ç¨ maven ç®¡ç jar åï¼åªéè¦æ·»å ä¾èµå° pom.xml å³å¯ï¼\n\n<dependency>\n  <groupId>javax.inject</groupId>\n  <artifactId>javax.inject</artifactId>\n  <version>1</version>\n</dependency>\n\n\n@Inject å @Autowired ä¸æ ·ï¼å¯ä»¥ä¿®é¥°å±æ§ãsetter æ¹æ³ãæé æ¹æ³ã\n\nèä¾\n\npublic class AnnotationInject {\n    private static final Logger log = LoggerFactory.getLogger(AnnotationInject.class);\n    @Inject\n    Apple fieldA;\n\n    Banana fieldB;\n\n    Orange fieldC;\n\n    public Apple getFieldA() {\n        return fieldA;\n    }\n\n    public void setFieldA(Apple fieldA) {\n        this.fieldA = fieldA;\n    }\n\n    public Banana getFieldB() {\n        return fieldB;\n    }\n\n    @Inject\n    public void setFieldB(Banana fieldB) {\n        this.fieldB = fieldB;\n    }\n\n    public Orange getFieldC() {\n        return fieldC;\n    }\n\n    public AnnotationInject() {}\n\n    @Inject\n    public AnnotationInject(Orange fieldC) {\n        this.fieldC = fieldC;\n    }\n\n    public static void main(String[] args) throws Exception {\n        AbstractApplicationContext ctx =\n                        new ClassPathXmlApplicationContext("spring/spring-annotation.xml");\n        AnnotationInject annotationInject = (AnnotationInject) ctx.getBean("annotationInject");\n\n        log.debug("type: {}, name: {}", annotationInject.getFieldA().getClass(),\n                        annotationInject.getFieldA().getName());\n\n        log.debug("type: {}, name: {}", annotationInject.getFieldB().getClass(),\n                        annotationInject.getFieldB().getName());\n\n        log.debug("type: {}, name: {}", annotationInject.getFieldC().getClass(),\n                        annotationInject.getFieldC().getName());\n\n        ctx.close();\n    }\n}\n\n\n\n# Java éç½®\n\nåºäº Java éç½® Spring IoC å®¹å¨ï¼å®éä¸æ¯Spring åè®¸ç¨æ·å®ä¹ä¸ä¸ªç±»ï¼å¨è¿ä¸ªç±»ä¸­å»ç®¡ç IoC å®¹å¨çéç½®ã\n\nä¸ºäºè®© Spring è¯å«è¿ä¸ªå®ä¹ç±»ä¸ºä¸ä¸ª Spring éç½®ç±»ï¼éè¦ç¨å°ä¸¤ä¸ªæ³¨è§£ï¼@Configurationå@Beanã\n\nå¦æä½ çæ Spring ç xml éç½®æ¹å¼ï¼ä½ å¯ä»¥å°@Configurationç­ä»·äº<beans>æ ç­¾ï¼å°@Beanç­ä»·äº<bean>æ ç­¾ã\n\n# @Bean\n\n@Bean çä¿®é¥°ç®æ åªè½æ¯æ¹æ³ææ³¨è§£ã\n\n@Bean åªè½å®ä¹å¨ @Configuration æ @Component æ³¨è§£ä¿®é¥°çç±»ä¸­ã\n\n# å£°æä¸ä¸ª bean\n\næ­¤å¤ï¼@Configuration ç±»åè®¸å¨åä¸ä¸ªç±»ä¸­éè¿@Bean å®ä¹åé¨ bean ä¾èµã\n\nå£°æä¸ä¸ª beanï¼åªéè¦å¨ bean å±æ§ç set æ¹æ³ä¸æ æ³¨@Bean å³å¯ã\n\n@Configuration\npublic class AnnotationConfiguration {\n    private static final Logger log = LoggerFactory.getLogger(JavaComponentScan.class);\n\n    @Bean\n    public Job getPolice() {\n        return new Police();\n    }\n\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(AnnotationConfiguration.class);\n        ctx.scan("org.zp.notes.spring.beans");\n        ctx.refresh();\n        Job job = (Job) ctx.getBean("police");\n        log.debug("job: {}, work: {}", job.getClass(), job.work());\n    }\n}\n\npublic interface Job {\n    String work();\n}\n\n@Component("police")\npublic class Police implements Job {\n    @Override\n    public String work() {\n        return "æç½ªç¯";\n    }\n}\n\n\nè¿ç­ä»·äºéç½®\n\n<beans>\n\t<bean id="police" class="org.zp.notes.spring.ioc.sample.job.Police"/>\n</beans>\n\n\n@Bean æ³¨è§£ç¨æ¥è¡¨æä¸ä¸ªæ¹æ³å®ä¾åãéç½®ååå§åä¸ä¸ªè¢« Spring IoC å®¹å¨ç®¡ççæ°å¯¹è±¡ã\n\nå¦æä½ çæ Spring ç xml éç½®ï¼ä½ å¯ä»¥å°@Bean è§ä¸ºç­ä»·äº<beans>æ ç­¾ã\n\n@Bean æ³¨è§£å¯ä»¥ç¨äºä»»ä½ç Spring @Component beanï¼ç¶èï¼éå¸¸è¢«ç¨äº@Configuration beanã\n\n# @Configuration\n\n@Configuration æ¯ä¸ä¸ªç±»çº§å«çæ³¨è§£ï¼ç¨æ¥æ è®°è¢«ä¿®é¥°ç±»çå¯¹è±¡æ¯ä¸ä¸ªBeanDefinitionã\n\n@Configuration å£°æ bean æ¯éè¿è¢« @Bean ä¿®é¥°çå¬å±æ¹æ³ãæ­¤å¤ï¼@Configuration åè®¸å¨åä¸ä¸ªç±»ä¸­éè¿ @Bean å®ä¹åé¨ bean ä¾èµã\n\n@Configuration\npublic class AppConfig {\n    @Bean\n    public MyService myService() {\n        return new MyServiceImpl();\n    }\n}\n\n\nè¿ç­ä»·äºéç½®\n\n<beans>\n\t<bean id="myService" class="com.acme.services.MyServiceImpl"/>\n</beans>\n\n\nç¨ AnnotationConfigApplicationContext å®ä¾å IoC å®¹å¨ã\n\n\n# ä¾èµè§£å³è¿ç¨\n\nå®¹å¨æ§è¡ bean ä¾èµè§£æå¦ä¸ï¼\n\n * ApplicationContext ä½¿ç¨éç½®åæ°æ®åå»ºååå§å Beanãéç½®åæ°æ®å¯ä»¥ç± XMLãJava ä»£ç ææ³¨è§£æå®ã\n * å¯¹äºæ¯ä¸ª beanï¼å¶ä¾èµå³ç³»ä»¥å±æ§ãæé å½æ°åæ°æéæå·¥åæ¹æ³çåæ°çå½¢å¼è¡¨ç¤ºãè¿äºä¾èµé¡¹å¨å®éåå»º bean æ¶æä¾ç» beanã\n * æ¯ä¸ªå±æ§ææé å½æ°åæ°é½æ¯è¦è®¾ç½®çå¼çå®éå®ä¹ï¼æèæ¯å¯¹å®¹å¨ä¸­å¦ä¸ä¸ª bean çå¼ç¨ã\n * ä½ä¸ºå¼çæ¯ä¸ªå±æ§ææé å½æ°åæ°é½ä»å¶æå®æ ¼å¼è½¬æ¢ä¸ºè¯¥å±æ§ææé å½æ°åæ°çå®éç±»åãé»è®¤æåµä¸ï¼Spring å¯ä»¥å°ä»¥å­ç¬¦ä¸²æ ¼å¼æä¾çå¼è½¬æ¢ä¸ºææåç½®ç±»åï¼ä¾å¦ intãlongãStringãboolean ç­ã\n\nSpring å®¹å¨å¨åå»ºå®¹å¨æ¶éªè¯æ¯ä¸ª bean çéç½®ãä½æ¯ï¼å¨å®éåå»º bean ä¹åï¼ä¸ä¼è®¾ç½® bean å±æ§æ¬èº«ãå¨åå»ºå®¹å¨æ¶ä¼åå»º singleton åçå®ä¾å¹¶è®¾ç½®ä¸ºé»è®¤ç Beanãå¦åï¼åªæå¨è¯·æ±æ¶æä¼åå»º beanã\n\néæ³¨æï¼æé å¨æ³¨å¥ï¼å¯è½ä¼å¯¼è´æ æ³è§£å³å¾ªç¯ä¾èµé®é¢ã\n\nä¾å¦ï¼A ç±»éè¿æé å¨æ³¨å¥éè¦ B ç±»çå®ä¾ï¼B ç±»éè¿æé å¨æ³¨å¥éè¦ A ç±»çå®ä¾ãSpring IoC å®¹å¨ä¼å¨è¿è¡æ¶æ£æµå°æ­¤å¾ªç¯å¼ç¨ï¼å¹¶æåº BeanCurrentlyInCreationExceptionã\n\nä¸ç§è§£å³æ¹æ¡æ¯ä½¿ç¨ setter æ¹æ³æ³¨å¥æ¿ä»£æé å¨æ³¨å¥ã\n\nå¦ä¸ç§è§£å³æ¹æ¡æ¯ï¼bean A å bean B ä¹é´çå¾ªç¯ä¾èµå³ç³»ï¼å¼ºå¶å¶ä¸­ä¸ä¸ª bean å¨å®å¨åå§åä¹åæ³¨å¥å¦ä¸ä¸ª beanï¼å¸åçåæé¸¡è¿æ¯åæèçåºæ¯ï¼ã\n\nSpring ä¼å¨å®¹å¨å è½½æ¶æ£æµéç½®é®é¢ï¼ä¾å¦å¼ç¨ä¸å­å¨ç bean æå¾ªç¯ä¾èµãå¨å®éåå»º bean æ¶ï¼Spring ä¼å°½å¯è½æå°è®¾ç½®å±æ§å¹¶è§£æä¾èµå³ç³»ãè¿æå³çï¼å¦æå¨åå»ºè¯¥å¯¹è±¡æå¶ä¾èµé¡¹ä¹ä¸æ¶åºç°é®é¢ï¼åæ­£ç¡®å è½½ç Spring å®¹å¨ç¨åå¯ä»¥å¨æ¨è¯·æ±å¯¹è±¡æ¶çæå¼å¸¸ âââ ä¾å¦ï¼bean ç±äºä¸¢å¤±ææ æèå¼åå¼å¸¸ãæäºéç½®é®é¢çè¿ç§æ½å¨çå»¶è¿å¯è§æ§æ¯é»è®¤æåµä¸ ApplicationContext å®ç°é¢å®ä¾ååä¾ bean çåå ãä»¥å¨å®ééè¦ä¹ååå»ºè¿äº bean çä¸äºåææ¶é´ååå­ä¸ºä»£ä»·ï¼æ¨ä¼å¨åå»º ApplicationContext æ¶åç°éç½®é®é¢ï¼èä¸æ¯ç¨åãæ¨ä»ç¶å¯ä»¥è¦çæ­¤é»è®¤è¡ä¸ºï¼ä»¥ä¾¿åä¾ bean å»¶è¿åå§åï¼èä¸æ¯æ¥åå°é¢åå®ä¾åã\n\n\n# æä½³å®è·µ\n\n\n# singleton ç Bean å¦ä½æ³¨å¥ prototype ç Bean\n\nSpring åå»ºç Bean é»è®¤æ¯åä¾çï¼ä½å½ Bean éå°ç»§æ¿çæ¶åï¼å¯è½ä¼å¿½ç¥è¿ä¸ç¹ã\n\nåè®¾æä¸ä¸ª SayService æ½è±¡ç±»ï¼å¶ä¸­ç»´æ¤äºä¸ä¸ªç±»åæ¯ ArrayList çå­æ®µ dataï¼ç¨äºä¿å­æ¹æ³å¤ççä¸­é´æ°æ®ãæ¯æ¬¡è°ç¨ say æ¹æ³é½ä¼å¾ data å å¥æ°æ°æ®ï¼å¯ä»¥è®¤ä¸º SayService æ¯æç¶æï¼å¦æ SayService æ¯åä¾çè¯å¿ç¶ä¼ OOMã\n\n/**\n * SayService æ¯æç¶æï¼å¦æ SayService æ¯åä¾çè¯å¿ç¶ä¼ OOM\n */\n@Slf4j\npublic abstract class SayService {\n\n   List<String> data = new ArrayList<>();\n\n   public void say() {\n      data.add(IntStream.rangeClosed(1, 1000000)\n         .mapToObj(__ -> "a")\n         .collect(Collectors.joining("")) + UUID.randomUUID().toString());\n      log.info("I\'m {} size:{}", this, data.size());\n   }\n\n}\n\n\nä½å®éå¼åçæ¶åï¼å¼ååå­¦æ²¡æè¿å¤æèå°±æ SayHello å SayBye ç±»å ä¸äº @Service æ³¨è§£ï¼è®©å®ä»¬æä¸ºäº Beanï¼ä¹æ²¡æèèå°ç¶ç±»æ¯æç¶æçã\n\n@Service\n@Slf4j\npublic class SayBye extends SayService {\n\n   @Override\n   public void say() {\n      super.say();\n      log.info("bye");\n   }\n\n}\n\n@Service\n@Slf4j\npublic class SayHello extends SayService {\n\n\t@Override\n\tpublic void say() {\n\t\tsuper.say();\n\t\tlog.info("hello");\n\t}\n\n}\n\n\nå¨ä¸ºç±»æ è®°ä¸ @Service æ³¨è§£æç±»åäº¤ç±å®¹å¨ç®¡çåï¼é¦åè¯ä¼°ä¸ä¸ç±»æ¯å¦æç¶æï¼ç¶åä¸º Bean è®¾ç½®åéç Scopeã\n\nè°ç¨ä»£ç ï¼\n\n@Slf4j\n@RestController\n@RequestMapping("beansingletonandorder")\npublic class BeanSingletonAndOrderController {\n\n   @Autowired\n   List<SayService> sayServiceList;\n   @Autowired\n   private ApplicationContext applicationContext;\n\n   @GetMapping("test")\n   public void test() {\n      log.info("====================");\n      sayServiceList.forEach(SayService::say);\n   }\n\n}\n\n\nå¯è½æäººè®¤ä¸ºï¼ä¸º SayHello å SayBye ä¸¤ä¸ªç±»é½æ è®°äº @Scope æ³¨è§£ï¼è®¾ç½®äº PROTOTYPE ççå½å¨æå°±å¯ä»¥è§£å³ä¸é¢çé®é¢ã\n\n@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n\n\nä½å®éä¸è¿æ¯æé®é¢ãå ä¸º@RestController æ³¨è§£ =@Controller æ³¨è§£ +@ResponseBody æ³¨è§£ï¼åå ä¸º @Controller æ è®°äº @Component åæ³¨è§£ï¼æä»¥ @RestController æ³¨è§£å¶å®ä¹æ¯ä¸ä¸ª Spring Beanã\n\nBean é»è®¤æ¯åä¾çï¼æä»¥åä¾ç Controller æ³¨å¥ç Service ä¹æ¯ä¸æ¬¡æ§åå»ºçï¼å³ä½¿ Service æ¬èº«æ è¯äº prototype çèå´ä¹æ²¡ç¨ã\n\nä¿®å¤æ¹å¼æ¯ï¼è®© Service ä»¥ä»£çæ¹å¼æ³¨å¥ãè¿æ ·è½ç¶ Controller æ¬èº«æ¯åä¾çï¼ä½æ¯æ¬¡é½è½ä»ä»£çè·å Serviceãè¿æ ·ä¸æ¥ï¼prototype èå´çéç½®æè½çæ­£çæã\n\n@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE, proxyMode = ScopedProx)\n\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring ioc\n\n\n# ioc ç®ä»\n\n\n# ioc æ¯ä»ä¹\n\nioc å³æ§å¶åè½¬ï¼inversion of controlï¼ç¼©åä¸º iocï¼ãioc åç§°ä¸ºä¾èµåç½®ååï¼è®¾è®¡æ¨¡å¼å­å¤§ååä¹ä¸ï¼ï¼å®çè¦ç¹å¨äºï¼ç¨åºè¦ä¾èµäºæ½è±¡æ¥å£ï¼ä¸è¦ä¾èµäºå·ä½å®ç°ãå®çä½ç¨å°±æ¯ç¨äºéä½ä»£ç é´çè¦ååº¦ã\n\nioc çå®ç°æ¹å¼æä¸¤ç§ï¼\n\n * ä¾èµæ³¨å¥ï¼dependency injectionï¼ç®ç§° diï¼ï¼ä¸éè¿ new() çæ¹å¼å¨ç±»åé¨åå»ºä¾èµç±»å¯¹è±¡ï¼èæ¯å°ä¾èµçç±»å¯¹è±¡å¨å¤é¨åå»ºå¥½ä¹åï¼éè¿æé å½æ°ãå½æ°åæ°ç­æ¹å¼ä¼ éï¼ææ³¨å¥ï¼ç»ç±»ä½¿ç¨ã\n * ä¾èµæ¥æ¾ï¼dependency lookupï¼ï¼å®¹å¨ä¸­çåæ§å¯¹è±¡éè¿å®¹å¨ç api æ¥æ¥æ¾èªå·±æä¾èµçèµæºååä½å¯¹è±¡ã\n\nçè§£ ioc çå³é®æ¯è¦æç¡®ä¸¤ä¸ªè¦ç¹ï¼\n\n * è°æ§å¶è°ï¼æ§å¶ä»ä¹ï¼ä¼ ç» java se ç¨åºè®¾è®¡ï¼æä»¬ç´æ¥å¨å¯¹è±¡åé¨éè¿ new è¿è¡åå»ºå¯¹è±¡ï¼æ¯ç¨åºä¸»å¨å»åå»ºä¾èµå¯¹è±¡ï¼è ioc æ¯æä¸é¨ä¸ä¸ªå®¹å¨æ¥åå»ºè¿äºå¯¹è±¡ï¼å³ç± ioc å®¹å¨æ¥æ§å¶å¯¹è±¡çåå»ºï¼è°æ§å¶è°ï¼å½ç¶æ¯ ioc å®¹å¨æ§å¶äºå¯¹è±¡ï¼æ§å¶ä»ä¹ï¼é£å°±æ¯ä¸»è¦æ§å¶äºå¤é¨èµæºè·åï¼ä¸åªæ¯å¯¹è±¡åæ¬æ¯å¦æä»¶ç­ï¼ã\n * ä¸ºä½æ¯åè½¬ï¼åªäºæ¹é¢åè½¬äºï¼æåè½¬å°±ææ­£è½¬ï¼ä¼ ç»åºç¨ç¨åºæ¯ç±æä»¬èªå·±å¨å¯¹è±¡ä¸­ä¸»å¨æ§å¶å»ç´æ¥è·åä¾èµå¯¹è±¡ï¼ä¹å°±æ¯æ­£è½¬ï¼èåè½¬åæ¯ç±å®¹å¨æ¥å¸®å¿åå»ºåæ³¨å¥ä¾èµå¯¹è±¡ï¼ä¸ºä½æ¯åè½¬ï¼å ä¸ºç±å®¹å¨å¸®æä»¬æ¥æ¾åæ³¨å¥ä¾èµå¯¹è±¡ï¼å¯¹è±¡åªæ¯è¢«å¨çæ¥åä¾èµå¯¹è±¡ï¼æä»¥æ¯åè½¬ï¼åªäºæ¹é¢åè½¬äºï¼ä¾èµå¯¹è±¡çè·åè¢«åè½¬äºã\n\n\n\n\n# ioc è½åä»ä¹\n\nioc ä¸æ¯ä¸ç§ææ¯ï¼èæ¯ç¼ç¨ææ³ï¼ä¸ä¸ªéè¦çé¢åå¯¹è±¡ç¼ç¨çæ³åï¼å®è½æå¯¼æä»¬å¦ä½è®¾è®¡åºæ¾è¦åãæ´ä¼è¯çç¨åºãä¼ ç»åºç¨ç¨åºé½æ¯ç±æä»¬å¨ç±»åé¨ä¸»å¨åå»ºä¾èµå¯¹è±¡ï¼ä»èå¯¼è´ç±»ä¸ç±»ä¹é´é«è¦åï¼é¾äºæµè¯ï¼æäº ioc å®¹å¨åï¼æåå»ºåæ¥æ¾ä¾èµå¯¹è±¡çæ§å¶æäº¤ç»äºå®¹å¨ï¼ç±å®¹å¨è¿è¡æ³¨å¥ç»åå¯¹è±¡ï¼æä»¥å¯¹è±¡ä¸å¯¹è±¡ä¹é´æ¯æ¾æ£è¦åï¼è¿æ ·ä¹æ¹ä¾¿æµè¯ï¼å©äºåè½å¤ç¨ï¼æ´éè¦çæ¯ä½¿å¾ç¨åºçæ´ä¸ªä½ç³»ç»æåå¾éå¸¸çµæ´»ã\n\nå¶å® ioc å¯¹ç¼ç¨å¸¦æ¥çæå¤§æ¹åä¸æ¯ä»ä»£ç ä¸ï¼èæ¯ä»ææ³ä¸ï¼åçäºâä¸»ä»æ¢ä½âçååãåºç¨ç¨åºåæ¬æ¯èå¤§ï¼è¦è·åä»ä¹èµæºé½æ¯ä¸»å¨åºå»ï¼ä½æ¯å¨ ioc/di ææ³ä¸­ï¼åºç¨ç¨åºå°±åæè¢«å¨çäºï¼è¢«å¨çç­å¾ ioc å®¹å¨æ¥åå»ºå¹¶æ³¨å¥å®æéè¦çèµæºäºã\n\nioc å¾å¥½çä½ç°äºé¢åå¯¹è±¡è®¾è®¡æ³åä¹ä¸ââ å¥½è±åæ³åï¼âå«æ¾æä»¬ï¼æä»¬æ¾ä½ âï¼å³ç± ioc å®¹å¨å¸®å¯¹è±¡æ¾ç¸åºçä¾èµå¯¹è±¡å¹¶æ³¨å¥ï¼èä¸æ¯ç±å¯¹è±¡ä¸»å¨å»æ¾ã\n\n\n# ioc å di\n\nå¶å®å®ä»¬æ¯åä¸ä¸ªæ¦å¿µçä¸åè§åº¦æè¿°ï¼ç±äºæ§å¶åè½¬æ¦å¿µæ¯è¾å«ç³ï¼å¯è½åªæ¯çè§£ä¸ºå®¹å¨æ§å¶å¯¹è±¡è¿ä¸ä¸ªå±é¢ï¼å¾é¾è®©äººæ³å°è°æ¥ç»´æ¤å¯¹è±¡å³ç³»ï¼ï¼æä»¥ 2004 å¹´å¤§å¸çº§äººç© martin fowler åç»åºäºä¸ä¸ªæ°çåå­ï¼âä¾èµæ³¨å¥âï¼ç¸å¯¹ ioc èè¨ï¼âä¾èµæ³¨å¥âæç¡®æè¿°äºâè¢«æ³¨å¥å¯¹è±¡ä¾èµ ioc å®¹å¨éç½®ä¾èµå¯¹è±¡âã\n\n> æ³¨ï¼å¦ææ³è¦æ´å æ·±å¥çäºè§£ ioc å diï¼è¯·åèå¤§å¸çº§äººç© martin fowler çä¸ç¯ç»å¸æç«  inversion of control containers and the dependency injection pattern ã\n\n\n# ioc å®¹å¨\n\nioc å®¹å¨å°±æ¯å·æä¾èµæ³¨å¥åè½çå®¹å¨ãioc å®¹å¨è´è´£å®ä¾åãå®ä½ãéç½®åºç¨ç¨åºä¸­çå¯¹è±¡åå»ºç«è¿äºå¯¹è±¡é´çä¾èµãåºç¨ç¨åºæ éç´æ¥å¨ä»£ç ä¸­ new ç¸å³çå¯¹è±¡ï¼åºç¨ç¨åºç± ioc å®¹å¨è¿è¡ç»è£ãå¨ spring ä¸­ beanfactory æ¯ ioc å®¹å¨çå®éä»£è¡¨èã\n\nspring ioc å®¹å¨å¦ä½ç¥éåªäºæ¯å®ç®¡ççå¯¹è±¡å¢ï¼è¿å°±éè¦éç½®æä»¶ï¼spring ioc å®¹å¨éè¿è¯»åéç½®æä»¶ä¸­çéç½®åæ°æ®ï¼éè¿åæ°æ®å¯¹åºç¨ä¸­çåä¸ªå¯¹è±¡è¿è¡å®ä¾ååè£éãä¸è¬ä½¿ç¨åºäº xml éç½®æä»¶è¿è¡éç½®åæ°æ®ï¼èä¸ spring ä¸éç½®æä»¶å®å¨è§£è¦çï¼å¯ä»¥ä½¿ç¨å¶ä»ä»»ä½å¯è½çæ¹å¼è¿è¡éç½®åæ°æ®ï¼æ¯å¦æ³¨è§£ãåºäº java æä»¶çãåºäºå±æ§æä»¶çéç½®é½å¯ä»¥ã\n\n\n# bean\n\n> javabean æ¯ä¸ç§ java è¯­è¨åæçå¯éç¨ç»ä»¶ãä¸ºåæ javabeanï¼ç±»å¿é¡»æ¯å·ä½çåå¬å±çï¼å¹¶ä¸å·ææ åæ°çæé å¨ãjavabean å¯¹å¤é¨éè¿æä¾ getter / setter æ¹æ³æ¥è®¿é®å¶æåã\n\nç± ioc å®¹å¨ç®¡ççé£äºç»æä½ åºç¨ç¨åºçå¯¹è±¡æä»¬å°±å«å® beanãbean å°±æ¯ç± spring å®¹å¨åå§åãè£éåç®¡ççå¯¹è±¡ï¼é¤æ­¤ä¹å¤ï¼bean å°±ä¸åºç¨ç¨åºä¸­çå¶ä»å¯¹è±¡æ²¡æä»ä¹åºå«äºãé£ ioc ææ ·ç¡®å®å¦ä½å®ä¾å beanãç®¡ç bean ä¹é´çä¾èµå³ç³»ä»¥åç®¡ç bean å¢ï¼è¿å°±éè¦éç½®åæ°æ®ï¼å¨ spring ä¸­ç± beandefinition ä»£è¡¨ï¼åè¾¹ä¼è¯¦ç»ä»ç»ï¼éç½®åæ°æ®æå®å¦ä½å®ä¾å beanãå¦ä½ç»è£ bean ç­ã\n\n\n# spring ioc\n\nspring ioc å®¹å¨ä¸­çå¯¹è±¡ä»éè¿æé å½æ°åæ°ãå·¥åæ¹æ³çåæ°æå¨å¯¹è±¡å®ä¾è¢«æé æä»å·¥åæ¹æ³è¿ååè®¾ç½®çå±æ§æ¥å®ä¹å®ä»¬çä¾èµå³ç³»ï¼å³ä¸å®ä»¬ä¸èµ·å·¥ä½çå¶ä»å¯¹è±¡ï¼ãç¶åå®¹å¨å¨åå»º bean æ¶æ³¨å¥è¿äºä¾èµé¡¹ãè¿ä¸ªè¿ç¨åºæ¬ä¸æ¯ bean æ¬èº«éè¿ä½¿ç¨ç±»çç´æ¥æé æè¯¸å¦æå¡å®ä½å¨æ¨¡å¼ä¹ç±»çæºå¶æ¥æ§å¶å¶ä¾èµå³ç³»çå®ä¾åæä½ç½®çéè¿ç¨ï¼å æ­¤ç§°ä¸ºæ§å¶åè½¬ï¼ã\n\norg.springframework.beans å org.springframework.context æ¯ ioc å®¹å¨çåºç¡ã\n\n\n# ioc å®¹å¨\n\nå¨ spring ä¸­ï¼æä¸¤ç§ ioc å®¹å¨ï¼beanfactory å applicationcontextã\n\n * beanfactoryï¼beanfactory æ¯ spring åºç¡ ioc å®¹å¨ãbeanfactory æä¾äº spring å®¹å¨çéç½®æ¡æ¶ååºæ¬åè½ã\n * applicationcontextï¼applicationcontext æ¯å·å¤åºç¨ç¹æ§ç beanfactory çå­æ¥å£ãå®è¿æ©å±äºå¶ä»ä¸äºæ¥å£ï¼ä»¥æ¯ææ´ä¸°å¯çåè½ï¼å¦ï¼å½éåãè®¿é®èµæºãäºä»¶æºå¶ãæ´æ¹ä¾¿çæ¯æ aopãå¨ web åºç¨ä¸­æå®åºç¨å±ä¸ä¸æç­ã\n\nå®éå¼åä¸­ï¼æ´æ¨èä½¿ç¨ applicationcontext ä½ä¸º ioc å®¹å¨ï¼å ä¸ºå®çåè½è¿å¤äº beanfactoryã\n\norg.springframework.context.applicationcontext æ¥å£ä»£è¡¨ spring ioc å®¹å¨ï¼è´è´£å®ä¾åãéç½®åç»è£ beanãå®¹å¨éè¿è¯»åéç½®åæ°æ®æ¥è·åå³äºè¦å®ä¾åãéç½®åç»è£åªäºå¯¹è±¡çæä»¤ãéç½®åæ°æ®ä»¥ xmlãjava æ³¨éæ java ä»£ç è¡¨ç¤ºãå®åè®¸æ¨è¡¨è¾¾ç»æåºç¨ç¨åºçå¯¹è±¡ä»¥åè¿äºå¯¹è±¡ä¹é´ä¸°å¯çç¸äºä¾èµå³ç³»ã\n\nspring æä¾äº applicationcontext æ¥å£çå ä¸ªå®ç°ï¼ä¾å¦ï¼\n\n * classpathxmlapplicationcontextï¼applicationcontext çå®ç°ï¼ä» classpath è·åéç½®ä¿¡æ¯ã\n\nbeanfactory beanfactory = new classpathxmlapplicationcontext("classpath.xml");\n\n\n * filesystemxmlapplicationcontextï¼applicationcontext çå®ç°ï¼ä»æä»¶ç³»ç»è·åéç½®ä¿¡æ¯ã\n\nbeanfactory beanfactory = new filesystemxmlapplicationcontext("filesystemconfig.xml");\n\n\nå¨å¤§å¤æ°åºç¨åºæ¯ä¸­ï¼ä¸éè¦æ¾å¼éè¿ç¨æ·ä»£ç æ¥å®ä¾å spring ioc å®¹å¨çä¸ä¸ªæå¤ä¸ªå®ä¾ã\n\nä¸å¾æ¾ç¤ºäº spring ioc å®¹å¨çå·¥ä½æ­¥éª¤\n\n\n\nä½¿ç¨ ioc å®¹å¨å¯åä¸ºä¸æ­¥éª¤ï¼\n\n 1. éç½®åæ°æ®ï¼éè¦éç½®ä¸äºåæ°æ®æ¥åè¯ springï¼ä½ å¸æå®¹å¨å¦ä½å·¥ä½ï¼å·ä½æ¥è¯´ï¼å°±æ¯å¦ä½å»åå§åãéç½®ãç®¡ç javabean å¯¹è±¡ã\n 2. å®ä¾åå®¹å¨ï¼ç± ioc å®¹å¨è§£æéç½®çåæ°æ®ãioc å®¹å¨ç bean reader è¯»åå¹¶è§£æéç½®æä»¶ï¼æ ¹æ®å®ä¹çæ beandefinition éç½®åæ°æ®å¯¹è±¡ï¼ioc å®¹å¨æ ¹æ® beandefinition è¿è¡å®ä¾åãéç½®åç»è£ beanã\n 3. ä½¿ç¨å®¹å¨ï¼ç±å®¢æ·ç«¯å®ä¾åå®¹å¨ï¼è·åéè¦ç beanã\n\n\n# éç½®åæ°æ®\n\n**åæ°æ®ï¼metadataï¼**åç§°ä¸­ä»æ°æ®ãä¸­ç»§æ°æ®ï¼ä¸ºæè¿°æ°æ®çæ°æ®ï¼data about dataï¼ï¼ä¸»è¦æ¯æè¿°æ°æ®å±æ§ï¼propertyï¼çä¿¡æ¯ã\n\néç½®åæ°æ®çæ¹å¼ï¼\n\n * åºäº xml éç½®ï¼spring çä¼ ç»éç½®æ¹å¼ãéå¸¸æ¯å¨é¡¶çº§åç´  <beans> ä¸­éè¿ <bean>åç´ éç½®åæ°æ®ãè¿ç§æ¹å¼çç¼ºç¹æ¯ï¼å¦æ javabean è¿å¤ï¼åäº§ççéç½®æä»¶è¶³ä»¥è®©ä½ ç¼è±ç¼­ä¹±ã\n * åºäºæ³¨è§£éç½®ï¼spring 2.5 å¼å¥äºå¯¹åºäºæ³¨è§£çéç½®åæ°æ®çæ¯æãå¯ä»¥å¤§å¤§ç®åä½ çéç½®ã\n * åºäº java éç½®ï¼ä» spring 3.0 å¼å§ï¼spring æ¯æä½¿ç¨ java ä»£ç æ¥éç½®åæ°æ®ãéå¸¸æ¯å¨ @configuration ä¿®é¥°çç±»ä¸­éè¿ @bean æå®å®ä¾å bean çæ¹æ³ãæ´å¤è¯¦æï¼å¯ä»¥åé @configurationã@beanã@import å @dependson æ³¨éã\n\nè¿äº bean å®ä¹å¯¹åºäºææåºç¨ç¨åºçå®éå¯¹è±¡ãä¾å¦ï¼å®ä¹æå¡å±å¯¹è±¡ãæ°æ®è®¿é®å¯¹è±¡ (dao)ãè¡¨ç¤ºå¯¹è±¡ï¼å¦ struts action å®ä¾ï¼ãåºç¡è®¾æ½å¯¹è±¡ï¼å¦ hibernate sessionfactoriesãjms éåç­ï¼ãéå¸¸ï¼ä¸ä¼å¨å®¹å¨ä¸­éç½®ç»ç²åº¦çåå¯¹è±¡ï¼å ä¸ºåå»ºåå è½½åå¯¹è±¡éå¸¸æ¯ dao åä¸å¡é»è¾çè´£ä»»ãä½æ¯ï¼å¯ä»¥ä½¿ç¨ spring ä¸ aspectj çéææ¥éç½®å¨ ioc å®¹å¨æ§å¶ä¹å¤åå»ºçå¯¹è±¡ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåºäº xml çéç½®åæ°æ®çåºæ¬ç»æï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!--id å±æ§ç¨äºå¯ä¸æ è¯åä¸ª bean å®ä¹--\x3e\n    \x3c!--class å±æ§ç¨äºææ bean ç±»åçå®å¨éå®å--\x3e\n    <bean id="..." class="...">\n        \x3c!-- è¿ééç½® bean çå±æ§ --\x3e\n    </bean>\n\n    <bean id="..." class="...">\n        \x3c!-- è¿ééç½® bean çå±æ§ --\x3e\n    </bean>\n\n    \x3c!-- æ´å¤ç bean å®ä¹ --\x3e\n\n</beans>\n\n\n\n# å®ä¾åå®¹å¨\n\nå¯ä»¥éè¿ä¸º applicationcontext çæé å½æ°æå®å¤é¨èµæºè·¯å¾ï¼æ¥å è½½éç½®åæ°æ®ã\n\napplicationcontext context = new classpathxmlapplicationcontext("services.xml", "daos.xml");\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºæå¡å±å¯¹è±¡ (services.xml) éç½®æä»¶ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!-- services --\x3e\n\n    <bean id="petstore" class="org.springframework.samples.jpetstore.services.petstoreserviceimpl">\n        <property name="accountdao" ref="accountdao"/>\n        <property name="itemdao" ref="itemdao"/>\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for services go here --\x3e\n\n</beans>\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºæ°æ®è®¿é®å¯¹è±¡ (daos.xml) éç½®æä»¶ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="accountdao"\n        class="org.springframework.samples.jpetstore.dao.jpa.jpaaccountdao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="itemdao" class="org.springframework.samples.jpetstore.dao.jpa.jpaitemdao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for data access objects go here --\x3e\n\n</beans>\n\n\nä¸é¢çç¤ºä¾ä¸­ï¼æå¡å±ç± petstoreserviceimpl ç±»åç±»åä¸º jpaaccountdao å jpaitemdao çä¸¤ä¸ªæ°æ®è®¿é®å¯¹è±¡ï¼åºäº jpa å¯¹è±¡å³ç³»æ å°æ åï¼ç»æã property name åç´ æçæ¯ javabean å±æ§çåç§°ï¼ref åç´ æçæ¯å¦ä¸ä¸ª bean å®ä¹çåç§°ã id å ref åç´ ä¹é´çè¿ç§èç³»è¡¨è¾¾äºåä½å¯¹è±¡ä¹é´çä¾èµå³ç³»ã\n\nspring æ¯æéè¿å¤ä¸ª xml æä»¶æ¥å®ä¹ beanï¼æ¯ä¸ªåç¬ç xml éç½®æä»¶é½ä»£è¡¨æ¶æä¸­çä¸ä¸ªé»è¾å±ææ¨¡åãå¯ä»¥ä½¿ç¨ applicationcontext æé å½æ°ä»ææè¿äº xml çæ®µå è½½ bean å®ä¹ãæèï¼ä½¿ç¨ <import/> åç´ ä»å¦ä¸ä¸ªæå¤ä¸ªæä»¶å è½½ bean å®ä¹ãå¦ä¸æç¤ºï¼\n\n<beans>\n    <import resource="services.xml"/>\n    <import resource="resources/messagesource.xml"/>\n    <import resource="/resources/themesource.xml"/>\n\n    <bean id="bean1" class="..."/>\n    <bean id="bean2" class="..."/>\n</beans>\n\n\nå¨ä¸é¢çç¤ºä¾ä¸­ï¼å¤é¨ bean å®ä¹ä»ä¸ä¸ªæä»¶å è½½ï¼services.xmlãmessagesource.xml å themesource.xmlãservices.xml æä»¶å¿é¡»åå½å xml æä»¶ä½äºåä¸ç®å½æç±»è·¯å¾ä½ç½®ï¼è messagesource.xml å themesource.xml å¿é¡»ä½äºå½åæä»¶æå¨ç®å½çå­ç®å½ resources ä¸ã/resources ç / ä¼è¢«å¿½ç¥ãä½æ¯ï¼é´äºè¿äºè·¯å¾æ¯ç¸å¯¹çï¼æå¥½ä¸è¦ä½¿ç¨ /ãæ ¹æ® spring schemaï¼è¢«å¯¼å¥æä»¶çåå®¹ï¼åæ¬é¡¶çº§ <beans/> åç´ ï¼å¿é¡»æ¯ææç xml bean å®ä¹ã\n\n> æ³¨æï¼\n> \n> å¯ä»¥ï¼ä½ä¸æ¨èä½¿ç¨ç¸å¯¹ â../â è·¯å¾æ¥å¼ç¨ç¶ç®å½ä¸­çæä»¶ãè¿æ ·åä¼åå»ºå¯¹å½ååºç¨ç¨åºä¹å¤çæä»¶çä¾èµãç¹å«æ¯ï¼ä¸å»ºè®®å°æ­¤å¼ç¨ç¨äº classpathï¼urlï¼ä¾å¦ï¼ classpath:../services.xmlï¼ï¼å¶ä¸­è¿è¡æ¶è§£æè¿ç¨ä¼éæ©âæè¿çâç±»è·¯å¾æ ¹ï¼ç¶åæ¥çå¶ç¶ç®å½ãç±»è·¯å¾éç½®æ´æ¹å¯è½ä¼å¯¼è´éæ©ä¸åçãä¸æ­£ç¡®çç®å½ã\n> \n> å¯ä»¥ä½¿ç¨å®å¨éå®çèµæºä½ç½®èä¸æ¯ç¸å¯¹è·¯å¾ï¼ä¾å¦ï¼file:c:/config/services.xml æ classpath:/config/services.xmlãå»ºè®®ä¸ºæ­¤ç±»ç»å¯¹è·¯å¾ä¿çä¸å®çé´æ¥æ§ âââ ä¾å¦ï¼éè¿ â${...}â å ä½ç¬¦æ¥å¼ç¨è¿è¡æ¶æå® ç jvm åæ°ã\n\nå½åç©ºé´æ¬èº«æä¾äºå¯¼å¥æä»¤åè½ã spring æä¾çä¸ç³»å xml å½åç©ºé´ä¸­æä¾äºé¤äºæ®é bean å®ä¹ä¹å¤çæ´å¤éç½®ç¹æ§ âââ ä¾å¦ï¼context å util å½åç©ºé´ã\n\n\n# ä½¿ç¨å®¹å¨\n\napplicationcontext è½å¤ç»´æ¤ä¸å bean åå¶ä¾èµé¡¹çæ³¨åè¡¨ãéè¿ä½¿ç¨æ¹æ³ t getbean(string name, class t requiredtype)ï¼å¯ä»¥æ£ç´¢å¹¶è·å bean çå®ä¾ã\n\napplicationcontext åè®¸è¯»å bean å®ä¹å¹¶è®¿é®å®ä»¬ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n// create and configure beans\napplicationcontext context = new classpathxmlapplicationcontext("services.xml", "daos.xml");\n\n// retrieve configured instance\npetstoreservice service = context.getbean("petstore", petstoreservice.class);\n\n// use configured instance\nlist<string> userlist = service.getusernamelist();\n\n\næçµæ´»çåä½æ¯ genericapplicationcontext ç»åéè¯»å¨å§æ âââ ä¾å¦ï¼ç»å xml æä»¶ç xmlbeandefinitionreaderï¼å¦ä¸ä¾æç¤ºï¼\n\ngenericapplicationcontext context = new genericapplicationcontext();\nnew xmlbeandefinitionreader(context).loadbeandefinitions("services.xml", "daos.xml");\ncontext.refresh();\n\n\nå¯ä»¥å¨åä¸ä¸ª applicationcontext ä¸æ··ååå¹éæ­¤ç±»è¯»åå¨å§æï¼ä»ä¸åçéç½®æºè¯»å bean å®ä¹ã\n\nç¶åï¼å¯ä»¥ä½¿ç¨ getbean æ£ç´¢ bean çå®ä¾ã applicationcontext æ¥å£è¿æä¸äºå¶ä»æ¹æ³ç¨äºæ£ç´¢ beanï¼ä½çæ³æåµä¸ï¼åºç¨ç¨åºä»£ç ä¸åºè¯¥ä½¿ç¨å®ä»¬ãå®éä¸ï¼åºç¨ç¨åºä»£ç æ ¹æ¬ä¸åºè¯¥è°ç¨ getbean() æ¹æ³ï¼å æ­¤æ ¹æ¬ä¸ä¾èµ spring apiãä¾å¦ï¼spring ä¸ web æ¡æ¶çéæä¸ºåç§ web æ¡æ¶ç»ä»¶ï¼ä¾å¦æ§å¶å¨å jsf ç®¡çç beanï¼æä¾äºä¾èµæ³¨å¥ï¼è®©æ¨å¯ä»¥éè¿åæ°æ®ï¼ä¾å¦èªå¨è£éæ³¨éï¼å£°æå¯¹ç¹å® bean çä¾èµã\n\n\n# ioc ä¾èµæ¥æº\n\nèªå®ä¹ bean\n\nå®¹å¨åå»º bean å¯¹è±¡\n\nå®¹å¨åå»ºä¾èµ\n\n\n# ioc éç½®åæ°æ®\n\nioc å®¹å¨çéç½®æä¸ç§æ¹å¼ï¼\n\n * åºäº xml éç½®\n * åºäº properties éç½®\n * åºäºæ³¨è§£éç½®\n * åºäº java éç½®\n\nä½ä¸º spring ä¼ ç»çéç½®æ¹å¼ï¼xml éç½®æ¹å¼ä¸è¬ä¸ºå¤§å®¶æçç¥ã\n\nå¦æåå¦äº xml éç½®ï¼spring ä¹æä¾äºæ³¨è§£éç½®æ¹å¼æ java éç½®æ¹å¼æ¥ç®åéç½®ã\n\næ¬æï¼å°å¯¹ java éç½® ioc å®¹å¨åè¯¦ç»çä»ç»ã\n\n\n# xml éç½®\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xsi:schemalocation="http://www.springframework.org/schema/beans\n         http://www.springframework.org/schema/beans/spring-beans.xsd">\n  <import resource="resource1.xml" />\n  <bean id="bean1" class=""></bean>\n  <bean id="bean2" class=""></bean>\n  <bean name="bean2" class=""></bean>\n\n  <alias alias="bean3" name="bean2"/>\n  <import resource="resource2.xml" />\n</beans>\n\n\næ ç­¾è¯´æï¼\n\n * <beans> æ¯ spring éç½®æä»¶çæ ¹èç¹ã\n * <bean> ç¨æ¥å®ä¹ä¸ä¸ª javabeanãid å±æ§æ¯å®çæ è¯ï¼å¨æä»¶ä¸­å¿é¡»å¯ä¸ï¼class å±æ§æ¯å®å³èçç±»ã\n * <alias> ç¨æ¥å®ä¹ bean çå«åã\n * <import> ç¨æ¥å¯¼å¥å¶ä»éç½®æä»¶ç bean å®ä¹ãè¿æ¯ä¸ºäºå è½½å¤ä¸ªéç½®æä»¶ï¼å½ç¶ä¹å¯ä»¥æè¿äºéç½®æä»¶æé ä¸ºä¸ä¸ªæ°ç»ï¼new string[] {âconfig1.xmlâ, config2.xml}ï¼ä¼ ç» applicationcontext å®ç°ç±»è¿è¡å è½½å¤ä¸ªéç½®æä»¶ï¼é£ä¸ä¸ªæ´éåç±ç¨æ·å³å®ï¼è¿ä¸¤ç§æ¹å¼é½æ¯éè¿è°ç¨ bean definition reader è¯»å bean å®ä¹ï¼åé¨å®ç°æ²¡æä»»ä½åºå«ã<import> æ ç­¾å¯ä»¥æ¾å¨ <beans> ä¸çä»»ä½ä½ç½®ï¼æ²¡æé¡ºåºå³ç³»ã\n\n# å®ä¾åå®¹å¨\n\nå®ä¾åå®¹å¨çè¿ç¨ï¼ å®ä½èµæºï¼xml éç½®æä»¶ï¼ è¯»åéç½®ä¿¡æ¯(resource) è½¬åä¸º spring å¯è¯å«çæ°æ®å½¢å¼ï¼beandefinitionï¼\n\napplicationcontext context =\n      new classpathxmlapplicationcontext(new string[] {"services.xml", "daos.xml"});\n\n\nç»å xml éç½®æä»¶ éç½®ç bean åè½åä¸ç¸åï¼é½æ¾å¨ä¸ä¸ª xml æä»¶ä¸­ï¼ä¸ä¾¿ç®¡çã java è®¾è®¡æ¨¡å¼è®²ç©¶èè´£åä¸ååãéç½®å¶å®ä¹æ¯å¦æ­¤ï¼åè½ä¸åç javabean åºè¯¥è¢«ç»ç»å¨ä¸åç xml æä»¶ä¸­ãç¶åä½¿ç¨ import æ ç­¾æå®ä»¬ç»ä¸å¯¼å¥ã\n\n<import resource="classpath:spring/applicationcontext.xml"/>\n<import resource="/web-inf/spring/service.xml"/>\n\n\n# ä½¿ç¨å®¹å¨\n\nä½¿ç¨å®¹å¨çæ¹å¼å°±æ¯éè¿getbeanè·å ioc å®¹å¨ä¸­ç javabeanã spring ä¹æå¶ä»æ¹æ³å»è·å¾ javabeanï¼ä½æ¯ spring å¹¶ä¸æ¨èå¶ä»æ¹å¼ã\n\n// create and configure beans\napplicationcontext context =\nnew classpathxmlapplicationcontext(new string[] {"services.xml", "daos.xml"});\n// retrieve configured instance\npetstoreservice service = context.getbean("petstore", petstoreservice.class);\n// use configured instance\nlist<string> userlist = service.getusernamelist();\n\n\n\n# æ³¨è§£éç½®\n\nspring2.5 å¼å¥äºæ³¨è§£ã äºæ¯ï¼ä¸ä¸ªé®é¢äº§çäºï¼ä½¿ç¨æ³¨è§£æ¹å¼æ³¨å¥ javabean æ¯ä¸æ¯ä¸å®å®ç xml æ¹å¼ï¼ æªå¿ãæ­£æè°ï¼ä»èè§ä»æºèè§æºãä»»ä½äºç©é½æå¶ä¼ç¼ºç¹ï¼çä½ å¦ä½åèãæ¥ççæ³¨è§£çä¼ç¼ºç¹ï¼ ä¼ç¹ï¼å¤§å¤§åå°äºéç½®ï¼å¹¶ä¸å¯ä»¥ä½¿éç½®æ´å ç²¾ç»ââç±»ï¼æ¹æ³ï¼å­æ®µé½å¯ä»¥ç¨æ³¨è§£å»æ è®°ã ç¼ºç¹ï¼ä½¿ç¨æ³¨è§£ï¼ä¸å¯é¿åäº§çäºä¾µå¥å¼ç¼ç¨ï¼ä¹äº§çäºä¸äºé®é¢ã\n\n * ä½ éè¦å°æ³¨è§£å å¥ä½ çæºç å¹¶ç¼è¯å®ï¼\n\n * æ³¨è§£å¾å¾æ¯è¾åæ£ï¼ä¸æç®¡æ§ã\n\n> æ³¨ï¼spring ä¸­ï¼åè¿è¡æ³¨è§£æ³¨å¥ï¼ç¶åææ¯ xml æ³¨å¥ï¼å æ­¤å¦ææ³¨å¥çç®æ ç¸åï¼åèä¼è¦çåèã\n\n# å¯å¨æ³¨è§£\n\nspring é»è®¤æ¯ä¸å¯ç¨æ³¨è§£çãå¦ææ³ä½¿ç¨æ³¨è§£ï¼éè¦åå¨ xml ä¸­å¯å¨æ³¨è§£ã å¯å¨æ¹å¼ï¼å¨ xml ä¸­å å¥ä¸ä¸ªæ ç­¾ï¼å¾ç®åå§ã\n\n<context:annotation-config/>\n\n\n> æ³¨ï¼<context:annotation-config/> åªä¼æ£ç´¢å®ä¹å®çä¸ä¸æãä»ä¹ææå¢ï¼å°±æ¯è¯´ï¼å¦æä½  ä¸º dispatcherservlet æå®äºä¸ä¸ªwebapplicationcontextï¼é£ä¹å®åªå¨ controller ä¸­æ¥æ¾@autowiredæ³¨è§£ï¼èä¸ä¼æ£æ¥å¶å®çè·¯å¾ã\n\n# @required\n\n@required æ³¨è§£åªè½ç¨äºä¿®é¥° bean å±æ§ç setter æ¹æ³ãåå½±åç bean å±æ§å¿é¡»å¨éç½®æ¶è¢«å¡«åå¨ xml éç½®æä»¶ä¸­ï¼å¦åå®¹å¨å°æåºbeaninitializationexceptionã\n\npublic class annotationrequired {\n    private string name;\n    private string sex;\n\n    public string getname() {\n        return name;\n    }\n\n    /**\n     * @required æ³¨è§£ç¨äºbeanå±æ§çsetteræ¹æ³å¹¶ä¸å®æç¤ºï¼åå½±åçbeanå±æ§å¿é¡»å¨éç½®æ¶è¢«å¡«åå¨xmléç½®æä»¶ä¸­ï¼\n     *           å¦åå®¹å¨å°æåºbeaninitializationexceptionã\n     */\n    @required\n    public void setname(string name) {\n        this.name = name;\n    }\n\n    public string getsex() {\n        return sex;\n    }\n\n    public void setsex(string sex) {\n        this.sex = sex;\n    }\n}\n\n\n# @autowired\n\n@autowiredæ³¨è§£å¯ç¨äºä¿®é¥°å±æ§ãsetter æ¹æ³ãæé æ¹æ³ã\n\n@autowired æ³¨å¥è¿ç¨\n\n * åä¿¡æ¯è§£æ\n * ä¾èµæ¥æ¾\n * ä¾èµæ³¨å¥ï¼å­æ®µãæ¹æ³ï¼\n\n> æ³¨ï¼@autowiredæ³¨è§£ä¹å¯ç¨äºä¿®é¥°æé æ¹æ³ï¼ä½å¦æç±»ä¸­åªæé»è®¤æé æ¹æ³ï¼åæ²¡æå¿è¦ãå¦ææå¤ä¸ªæé å¨ï¼è³å°åºè¯¥ä¿®é¥°ä¸ä¸ªï¼æ¥åè¯å®¹å¨åªä¸ä¸ªå¿é¡»ä½¿ç¨ã\n\nå¯ä»¥ä½¿ç¨ jsr330 çæ³¨è§£@injectæ¥æ¿ä»£@autowiredã\n\nèä¾\n\npublic class annotationautowired {\n    private static final logger log = loggerfactory.getlogger(annotationrequired.class);\n\n    @autowired\n    private apple fielda;\n\n    private banana fieldb;\n\n    private orange fieldc;\n\n    public apple getfielda() {\n        return fielda;\n    }\n\n    public void setfielda(apple fielda) {\n        this.fielda = fielda;\n    }\n\n    public banana getfieldb() {\n        return fieldb;\n    }\n\n    @autowired\n    public void setfieldb(banana fieldb) {\n        this.fieldb = fieldb;\n    }\n\n    public orange getfieldc() {\n        return fieldc;\n    }\n\n    public void setfieldc(orange fieldc) {\n        this.fieldc = fieldc;\n    }\n\n    public annotationautowired() {}\n\n    @autowired\n    public annotationautowired(orange fieldc) {\n        this.fieldc = fieldc;\n    }\n\n    public static void main(string[] args) throws exception {\n        abstractapplicationcontext ctx =\n                        new classpathxmlapplicationcontext("spring/spring-annotation.xml");\n\n        annotationautowired annotationautowired =\n                        (annotationautowired) ctx.getbean("annotationautowired");\n        log.debug("fielda: {}, fieldb:{}, fieldc:{}", annotationautowired.getfielda().getname(),\n                        annotationautowired.getfieldb().getname(),\n                        annotationautowired.getfieldc().getname());\n        ctx.close();\n    }\n}\n\n\nxml ä¸­çéç½®\n\n\x3c!-- æµè¯@autowired --\x3e\n<bean id="apple" class="org.zp.notes.spring.beans.annotation.sample.apple"/>\n<bean id="potato" class="org.zp.notes.spring.beans.annotation.sample.banana"/>\n<bean id="tomato" class="org.zp.notes.spring.beans.annotation.sample.orange"/>\n<bean id="annotationautowired" class="org.zp.notes.spring.beans.annotation.sample.annotationautowired"/>\n\n\n# @qualifier\n\nå¨@autowiredæ³¨è§£ä¸­ï¼æå°äºå¦æåç°æå¤ä¸ªåéç bean é½ç¬¦åä¿®é¥°ç±»åï¼spring å°±ä¼æçäºã\n\né£ä¹ï¼å¦ä½è§£å³è¿ä¸ªé®é¢ã\n\nå¯ä»¥éè¿@qualifieræå® bean åç§°æ¥éå®çæ­£éè¦çé£ä¸ª beanã\n\nèä¾\n\npublic class annotationqualifier {\n    private static final logger log = loggerfactory.getlogger(annotationqualifier.class);\n\n    @autowired\n    @qualifier("dog") /** å»é¤è¿è¡ï¼ä¼æ¥å¼å¸¸ */\n    animal dog;\n\n    animal cat;\n\n    public animal getdog() {\n        return dog;\n    }\n\n    public void setdog(animal dog) {\n        this.dog = dog;\n    }\n\n    public animal getcat() {\n        return cat;\n    }\n\n    @autowired\n    public void setcat(@qualifier("cat") animal cat) {\n        this.cat = cat;\n    }\n\n    public static void main(string[] args) throws exception {\n        abstractapplicationcontext ctx =\n                new classpathxmlapplicationcontext("spring/spring-annotation.xml");\n\n        annotationqualifier annotationqualifier =\n                (annotationqualifier) ctx.getbean("annotationqualifier");\n\n        log.debug("dog name: {}", annotationqualifier.getdog().getname());\n        log.debug("cat name: {}", annotationqualifier.getcat().getname());\n        ctx.close();\n    }\n}\n\nabstract class animal {\n    public string getname() {\n        return null;\n    }\n}\n\nclass dog extends animal {\n    public string getname() {\n        return "ç";\n    }\n}\n\nclass cat extends animal {\n    public string getname() {\n        return "ç«";\n    }\n}\n\n\nxml ä¸­çéç½®\n\n\x3c!-- æµè¯@qualifier --\x3e\n<bean id="dog" class="org.zp.notes.spring.beans.annotation.sample.dog"/>\n<bean id="cat" class="org.zp.notes.spring.beans.annotation.sample.cat"/>\n<bean id="annotationqualifier" class="org.zp.notes.spring.beans.annotation.sample.annotationqualifier"/>\n\n\n# @resource\n\nspring æ¯æ jsp250 è§å®çæ³¨è§£@resourceãè¿ä¸ªæ³¨è§£æ ¹æ®æå®çåç§°æ¥æ³¨å¥ beanã\n\nå¦ææ²¡æä¸º@resourceæå®åç§°ï¼å®ä¼å@autowiredä¸æ ·æç§ç±»åå»å¯»æ¾å¹éã\n\nå¨ spring ä¸­ï¼ç±commonannotationbeanpostprocessoræ¥å¤ç@resourceæ³¨è§£ã\n\nèä¾\n\npublic class annotationresource {\n    private static final logger log = loggerfactory.getlogger(annotationresource.class);\n\n    @resource(name = "flower")\n    plant flower;\n\n    @resource(name = "tree")\n    plant tree;\n\n    public plant getflower() {\n        return flower;\n    }\n\n    public void setflower(plant flower) {\n        this.flower = flower;\n    }\n\n    public plant gettree() {\n        return tree;\n    }\n\n    public void settree(plant tree) {\n        this.tree = tree;\n    }\n\n    public static void main(string[] args) throws exception {\n        abstractapplicationcontext ctx =\n                        new classpathxmlapplicationcontext("spring/spring-annotation.xml");\n\n        annotationresource annotationresource =\n                        (annotationresource) ctx.getbean("annotationresource");\n        log.debug("type: {}, name: {}", annotationresource.getflower().getclass(), annotationresource.getflower().getname());\n        log.debug("type: {}, name: {}", annotationresource.gettree().getclass(), annotationresource.gettree().getname());\n        ctx.close();\n    }\n}\n\n\nxml çéç½®\n\n\x3c!-- æµè¯@resource --\x3e\n<bean id="flower" class="org.zp.notes.spring.beans.annotation.sample.flower"/>\n<bean id="tree" class="org.zp.notes.spring.beans.annotation.sample.tree"/>\n<bean id="annotationresource" class="org.zp.notes.spring.beans.annotation.sample.annotationresource"/>\n\n\n# @postconstruct å @predestroy\n\n@postconstruct å @predestroy æ¯ jsr 250 è§å®çç¨äºçå½å¨æçæ³¨è§£ã\n\nä»å¶åå·å°±å¯ä»¥çåºï¼ä¸ä¸ªæ¯å¨æé ä¹åè°ç¨çæ¹æ³ï¼ä¸ä¸ªæ¯éæ¯ä¹åè°ç¨çæ¹æ³ã\n\npublic class annotationpostconstructandpredestroy {\n    private static final logger log = loggerfactory.getlogger(annotationpostconstructandpredestroy.class);\n\n    @postconstruct\n    public void init() {\n        log.debug("call @postconstruct method");\n    }\n\n    @predestroy\n    public void destroy() {\n        log.debug("call @predestroy method");\n    }\n}\n\n\n# @inject\n\nä» spring3.0 å¼å§ï¼spring æ¯æ jsr 330 æ åæ³¨è§£ï¼ä¾èµæ³¨å¥ï¼ã\n\næ³¨ï¼å¦æè¦ä½¿ç¨ jsr 330 æ³¨è§£ï¼éè¦ä½¿ç¨å¤é¨ jar åã\n\nè¥ä½ ä½¿ç¨ maven ç®¡ç jar åï¼åªéè¦æ·»å ä¾èµå° pom.xml å³å¯ï¼\n\n<dependency>\n  <groupid>javax.inject</groupid>\n  <artifactid>javax.inject</artifactid>\n  <version>1</version>\n</dependency>\n\n\n@inject å @autowired ä¸æ ·ï¼å¯ä»¥ä¿®é¥°å±æ§ãsetter æ¹æ³ãæé æ¹æ³ã\n\nèä¾\n\npublic class annotationinject {\n    private static final logger log = loggerfactory.getlogger(annotationinject.class);\n    @inject\n    apple fielda;\n\n    banana fieldb;\n\n    orange fieldc;\n\n    public apple getfielda() {\n        return fielda;\n    }\n\n    public void setfielda(apple fielda) {\n        this.fielda = fielda;\n    }\n\n    public banana getfieldb() {\n        return fieldb;\n    }\n\n    @inject\n    public void setfieldb(banana fieldb) {\n        this.fieldb = fieldb;\n    }\n\n    public orange getfieldc() {\n        return fieldc;\n    }\n\n    public annotationinject() {}\n\n    @inject\n    public annotationinject(orange fieldc) {\n        this.fieldc = fieldc;\n    }\n\n    public static void main(string[] args) throws exception {\n        abstractapplicationcontext ctx =\n                        new classpathxmlapplicationcontext("spring/spring-annotation.xml");\n        annotationinject annotationinject = (annotationinject) ctx.getbean("annotationinject");\n\n        log.debug("type: {}, name: {}", annotationinject.getfielda().getclass(),\n                        annotationinject.getfielda().getname());\n\n        log.debug("type: {}, name: {}", annotationinject.getfieldb().getclass(),\n                        annotationinject.getfieldb().getname());\n\n        log.debug("type: {}, name: {}", annotationinject.getfieldc().getclass(),\n                        annotationinject.getfieldc().getname());\n\n        ctx.close();\n    }\n}\n\n\n\n# java éç½®\n\nåºäº java éç½® spring ioc å®¹å¨ï¼å®éä¸æ¯spring åè®¸ç¨æ·å®ä¹ä¸ä¸ªç±»ï¼å¨è¿ä¸ªç±»ä¸­å»ç®¡ç ioc å®¹å¨çéç½®ã\n\nä¸ºäºè®© spring è¯å«è¿ä¸ªå®ä¹ç±»ä¸ºä¸ä¸ª spring éç½®ç±»ï¼éè¦ç¨å°ä¸¤ä¸ªæ³¨è§£ï¼@configurationå@beanã\n\nå¦æä½ çæ spring ç xml éç½®æ¹å¼ï¼ä½ å¯ä»¥å°@configurationç­ä»·äº<beans>æ ç­¾ï¼å°@beanç­ä»·äº<bean>æ ç­¾ã\n\n# @bean\n\n@bean çä¿®é¥°ç®æ åªè½æ¯æ¹æ³ææ³¨è§£ã\n\n@bean åªè½å®ä¹å¨ @configuration æ @component æ³¨è§£ä¿®é¥°çç±»ä¸­ã\n\n# å£°æä¸ä¸ª bean\n\næ­¤å¤ï¼@configuration ç±»åè®¸å¨åä¸ä¸ªç±»ä¸­éè¿@bean å®ä¹åé¨ bean ä¾èµã\n\nå£°æä¸ä¸ª beanï¼åªéè¦å¨ bean å±æ§ç set æ¹æ³ä¸æ æ³¨@bean å³å¯ã\n\n@configuration\npublic class annotationconfiguration {\n    private static final logger log = loggerfactory.getlogger(javacomponentscan.class);\n\n    @bean\n    public job getpolice() {\n        return new police();\n    }\n\n    public static void main(string[] args) {\n        annotationconfigapplicationcontext ctx = new annotationconfigapplicationcontext(annotationconfiguration.class);\n        ctx.scan("org.zp.notes.spring.beans");\n        ctx.refresh();\n        job job = (job) ctx.getbean("police");\n        log.debug("job: {}, work: {}", job.getclass(), job.work());\n    }\n}\n\npublic interface job {\n    string work();\n}\n\n@component("police")\npublic class police implements job {\n    @override\n    public string work() {\n        return "æç½ªç¯";\n    }\n}\n\n\nè¿ç­ä»·äºéç½®\n\n<beans>\n\t<bean id="police" class="org.zp.notes.spring.ioc.sample.job.police"/>\n</beans>\n\n\n@bean æ³¨è§£ç¨æ¥è¡¨æä¸ä¸ªæ¹æ³å®ä¾åãéç½®ååå§åä¸ä¸ªè¢« spring ioc å®¹å¨ç®¡ççæ°å¯¹è±¡ã\n\nå¦æä½ çæ spring ç xml éç½®ï¼ä½ å¯ä»¥å°@bean è§ä¸ºç­ä»·äº<beans>æ ç­¾ã\n\n@bean æ³¨è§£å¯ä»¥ç¨äºä»»ä½ç spring @component beanï¼ç¶èï¼éå¸¸è¢«ç¨äº@configuration beanã\n\n# @configuration\n\n@configuration æ¯ä¸ä¸ªç±»çº§å«çæ³¨è§£ï¼ç¨æ¥æ è®°è¢«ä¿®é¥°ç±»çå¯¹è±¡æ¯ä¸ä¸ªbeandefinitionã\n\n@configuration å£°æ bean æ¯éè¿è¢« @bean ä¿®é¥°çå¬å±æ¹æ³ãæ­¤å¤ï¼@configuration åè®¸å¨åä¸ä¸ªç±»ä¸­éè¿ @bean å®ä¹åé¨ bean ä¾èµã\n\n@configuration\npublic class appconfig {\n    @bean\n    public myservice myservice() {\n        return new myserviceimpl();\n    }\n}\n\n\nè¿ç­ä»·äºéç½®\n\n<beans>\n\t<bean id="myservice" class="com.acme.services.myserviceimpl"/>\n</beans>\n\n\nç¨ annotationconfigapplicationcontext å®ä¾å ioc å®¹å¨ã\n\n\n# ä¾èµè§£å³è¿ç¨\n\nå®¹å¨æ§è¡ bean ä¾èµè§£æå¦ä¸ï¼\n\n * applicationcontext ä½¿ç¨éç½®åæ°æ®åå»ºååå§å beanãéç½®åæ°æ®å¯ä»¥ç± xmlãjava ä»£ç ææ³¨è§£æå®ã\n * å¯¹äºæ¯ä¸ª beanï¼å¶ä¾èµå³ç³»ä»¥å±æ§ãæé å½æ°åæ°æéæå·¥åæ¹æ³çåæ°çå½¢å¼è¡¨ç¤ºãè¿äºä¾èµé¡¹å¨å®éåå»º bean æ¶æä¾ç» beanã\n * æ¯ä¸ªå±æ§ææé å½æ°åæ°é½æ¯è¦è®¾ç½®çå¼çå®éå®ä¹ï¼æèæ¯å¯¹å®¹å¨ä¸­å¦ä¸ä¸ª bean çå¼ç¨ã\n * ä½ä¸ºå¼çæ¯ä¸ªå±æ§ææé å½æ°åæ°é½ä»å¶æå®æ ¼å¼è½¬æ¢ä¸ºè¯¥å±æ§ææé å½æ°åæ°çå®éç±»åãé»è®¤æåµä¸ï¼spring å¯ä»¥å°ä»¥å­ç¬¦ä¸²æ ¼å¼æä¾çå¼è½¬æ¢ä¸ºææåç½®ç±»åï¼ä¾å¦ intãlongãstringãboolean ç­ã\n\nspring å®¹å¨å¨åå»ºå®¹å¨æ¶éªè¯æ¯ä¸ª bean çéç½®ãä½æ¯ï¼å¨å®éåå»º bean ä¹åï¼ä¸ä¼è®¾ç½® bean å±æ§æ¬èº«ãå¨åå»ºå®¹å¨æ¶ä¼åå»º singleton åçå®ä¾å¹¶è®¾ç½®ä¸ºé»è®¤ç beanãå¦åï¼åªæå¨è¯·æ±æ¶æä¼åå»º beanã\n\néæ³¨æï¼æé å¨æ³¨å¥ï¼å¯è½ä¼å¯¼è´æ æ³è§£å³å¾ªç¯ä¾èµé®é¢ã\n\nä¾å¦ï¼a ç±»éè¿æé å¨æ³¨å¥éè¦ b ç±»çå®ä¾ï¼b ç±»éè¿æé å¨æ³¨å¥éè¦ a ç±»çå®ä¾ãspring ioc å®¹å¨ä¼å¨è¿è¡æ¶æ£æµå°æ­¤å¾ªç¯å¼ç¨ï¼å¹¶æåº beancurrentlyincreationexceptionã\n\nä¸ç§è§£å³æ¹æ¡æ¯ä½¿ç¨ setter æ¹æ³æ³¨å¥æ¿ä»£æé å¨æ³¨å¥ã\n\nå¦ä¸ç§è§£å³æ¹æ¡æ¯ï¼bean a å bean b ä¹é´çå¾ªç¯ä¾èµå³ç³»ï¼å¼ºå¶å¶ä¸­ä¸ä¸ª bean å¨å®å¨åå§åä¹åæ³¨å¥å¦ä¸ä¸ª beanï¼å¸åçåæé¸¡è¿æ¯åæèçåºæ¯ï¼ã\n\nspring ä¼å¨å®¹å¨å è½½æ¶æ£æµéç½®é®é¢ï¼ä¾å¦å¼ç¨ä¸å­å¨ç bean æå¾ªç¯ä¾èµãå¨å®éåå»º bean æ¶ï¼spring ä¼å°½å¯è½æå°è®¾ç½®å±æ§å¹¶è§£æä¾èµå³ç³»ãè¿æå³çï¼å¦æå¨åå»ºè¯¥å¯¹è±¡æå¶ä¾èµé¡¹ä¹ä¸æ¶åºç°é®é¢ï¼åæ­£ç¡®å è½½ç spring å®¹å¨ç¨åå¯ä»¥å¨æ¨è¯·æ±å¯¹è±¡æ¶çæå¼å¸¸ âââ ä¾å¦ï¼bean ç±äºä¸¢å¤±ææ æèå¼åå¼å¸¸ãæäºéç½®é®é¢çè¿ç§æ½å¨çå»¶è¿å¯è§æ§æ¯é»è®¤æåµä¸ applicationcontext å®ç°é¢å®ä¾ååä¾ bean çåå ãä»¥å¨å®ééè¦ä¹ååå»ºè¿äº bean çä¸äºåææ¶é´ååå­ä¸ºä»£ä»·ï¼æ¨ä¼å¨åå»º applicationcontext æ¶åç°éç½®é®é¢ï¼èä¸æ¯ç¨åãæ¨ä»ç¶å¯ä»¥è¦çæ­¤é»è®¤è¡ä¸ºï¼ä»¥ä¾¿åä¾ bean å»¶è¿åå§åï¼èä¸æ¯æ¥åå°é¢åå®ä¾åã\n\n\n# æä½³å®è·µ\n\n\n# singleton ç bean å¦ä½æ³¨å¥ prototype ç bean\n\nspring åå»ºç bean é»è®¤æ¯åä¾çï¼ä½å½ bean éå°ç»§æ¿çæ¶åï¼å¯è½ä¼å¿½ç¥è¿ä¸ç¹ã\n\nåè®¾æä¸ä¸ª sayservice æ½è±¡ç±»ï¼å¶ä¸­ç»´æ¤äºä¸ä¸ªç±»åæ¯ arraylist çå­æ®µ dataï¼ç¨äºä¿å­æ¹æ³å¤ççä¸­é´æ°æ®ãæ¯æ¬¡è°ç¨ say æ¹æ³é½ä¼å¾ data å å¥æ°æ°æ®ï¼å¯ä»¥è®¤ä¸º sayservice æ¯æç¶æï¼å¦æ sayservice æ¯åä¾çè¯å¿ç¶ä¼ oomã\n\n/**\n * sayservice æ¯æç¶æï¼å¦æ sayservice æ¯åä¾çè¯å¿ç¶ä¼ oom\n */\n@slf4j\npublic abstract class sayservice {\n\n   list<string> data = new arraylist<>();\n\n   public void say() {\n      data.add(intstream.rangeclosed(1, 1000000)\n         .maptoobj(__ -> "a")\n         .collect(collectors.joining("")) + uuid.randomuuid().tostring());\n      log.info("i\'m {} size:{}", this, data.size());\n   }\n\n}\n\n\nä½å®éå¼åçæ¶åï¼å¼ååå­¦æ²¡æè¿å¤æèå°±æ sayhello å saybye ç±»å ä¸äº @service æ³¨è§£ï¼è®©å®ä»¬æä¸ºäº beanï¼ä¹æ²¡æèèå°ç¶ç±»æ¯æç¶æçã\n\n@service\n@slf4j\npublic class saybye extends sayservice {\n\n   @override\n   public void say() {\n      super.say();\n      log.info("bye");\n   }\n\n}\n\n@service\n@slf4j\npublic class sayhello extends sayservice {\n\n\t@override\n\tpublic void say() {\n\t\tsuper.say();\n\t\tlog.info("hello");\n\t}\n\n}\n\n\nå¨ä¸ºç±»æ è®°ä¸ @service æ³¨è§£æç±»åäº¤ç±å®¹å¨ç®¡çåï¼é¦åè¯ä¼°ä¸ä¸ç±»æ¯å¦æç¶æï¼ç¶åä¸º bean è®¾ç½®åéç scopeã\n\nè°ç¨ä»£ç ï¼\n\n@slf4j\n@restcontroller\n@requestmapping("beansingletonandorder")\npublic class beansingletonandordercontroller {\n\n   @autowired\n   list<sayservice> sayservicelist;\n   @autowired\n   private applicationcontext applicationcontext;\n\n   @getmapping("test")\n   public void test() {\n      log.info("====================");\n      sayservicelist.foreach(sayservice::say);\n   }\n\n}\n\n\nå¯è½æäººè®¤ä¸ºï¼ä¸º sayhello å saybye ä¸¤ä¸ªç±»é½æ è®°äº @scope æ³¨è§£ï¼è®¾ç½®äº prototype ççå½å¨æå°±å¯ä»¥è§£å³ä¸é¢çé®é¢ã\n\n@scope(value = configurablebeanfactory.scope_prototype)\n\n\nä½å®éä¸è¿æ¯æé®é¢ãå ä¸º@restcontroller æ³¨è§£ =@controller æ³¨è§£ +@responsebody æ³¨è§£ï¼åå ä¸º @controller æ è®°äº @component åæ³¨è§£ï¼æä»¥ @restcontroller æ³¨è§£å¶å®ä¹æ¯ä¸ä¸ª spring beanã\n\nbean é»è®¤æ¯åä¾çï¼æä»¥åä¾ç controller æ³¨å¥ç service ä¹æ¯ä¸æ¬¡æ§åå»ºçï¼å³ä½¿ service æ¬èº«æ è¯äº prototype çèå´ä¹æ²¡ç¨ã\n\nä¿®å¤æ¹å¼æ¯ï¼è®© service ä»¥ä»£çæ¹å¼æ³¨å¥ãè¿æ ·è½ç¶ controller æ¬èº«æ¯åä¾çï¼ä½æ¯æ¬¡é½è½ä»ä»£çè·å serviceãè¿æ ·ä¸æ¥ï¼prototype èå´çéç½®æè½çæ­£çæã\n\n@scope(value = configurablebeanfactory.scope_prototype, proxymode = scopedprox)\n\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ä¾èµæ¥æ¾",frontmatter:{title:"Spring ä¾èµæ¥æ¾",date:"2020-08-30T16:06:10.000Z",order:3,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","IOC","ä¾èµæ¥æ¾"],permalink:"/pages/9a6f6b/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/03.Spring%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/03.Springä¾èµæ¥æ¾.md",key:"v-0a3e806a",path:"/pages/9a6f6b/",headers:[{level:2,title:"åä¸ç±»åä¾èµæ¥æ¾",slug:"åä¸ç±»åä¾èµæ¥æ¾",normalizedTitle:"åä¸ç±»åä¾èµæ¥æ¾",charIndex:200},{level:2,title:"éåç±»åä¾èµæ¥æ¾",slug:"éåç±»åä¾èµæ¥æ¾",normalizedTitle:"éåç±»åä¾èµæ¥æ¾",charIndex:577},{level:2,title:"å±æ¬¡æ§ä¾èµæ¥æ¾",slug:"å±æ¬¡æ§ä¾èµæ¥æ¾",normalizedTitle:"å±æ¬¡æ§ä¾èµæ¥æ¾",charIndex:1141},{level:2,title:"å»¶è¿ä¾èµæ¥æ¾",slug:"å»¶è¿ä¾èµæ¥æ¾",normalizedTitle:"å»¶è¿ä¾èµæ¥æ¾",charIndex:1493},{level:2,title:"å®å¨ä¾èµæ¥æ¾",slug:"å®å¨ä¾èµæ¥æ¾",normalizedTitle:"å®å¨ä¾èµæ¥æ¾",charIndex:1736},{level:2,title:"åå»ºå¯æ¥æ¾çä¾èµ",slug:"åå»ºå¯æ¥æ¾çä¾èµ",normalizedTitle:"åå»ºå¯æ¥æ¾çä¾èµ",charIndex:2132},{level:2,title:"ä¾èµæ¥æ¾ä¸­çç»å¸å¼å¸¸",slug:"ä¾èµæ¥æ¾ä¸­çç»å¸å¼å¸¸",normalizedTitle:"ä¾èµæ¥æ¾ä¸­çç»å¸å¼å¸¸",charIndex:3799},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:4338}],headersStr:"åä¸ç±»åä¾èµæ¥æ¾ éåç±»åä¾èµæ¥æ¾ å±æ¬¡æ§ä¾èµæ¥æ¾ å»¶è¿ä¾èµæ¥æ¾ å®å¨ä¾èµæ¥æ¾ åå»ºå¯æ¥æ¾çä¾èµ ä¾èµæ¥æ¾ä¸­çç»å¸å¼å¸¸ åèèµæ",content:"# Spring ä¾èµæ¥æ¾\n\nä¾èµæ¥æ¾æ¯ä¸»å¨ææå¨çä¾èµæ¥æ¾æ¹å¼ï¼éå¸¸éè¦ä¾èµå®¹å¨ææ å API å®ç°ã\n\nIoC ä¾èµæ¥æ¾å¤§è´å¯ä»¥åä¸ºä»¥ä¸å ç±»ï¼\n\n * æ ¹æ® Bean åç§°æ¥æ¾\n * æ ¹æ® Bean ç±»åæ¥æ¾\n * æ ¹æ® Bean åç§° + ç±»åæ¥æ¾\n * æ ¹æ® Java æ³¨è§£æ¥æ¾\n\næ­¤å¤ï¼æ ¹æ®æ¥æ¾ç Bean å¯¹è±¡æ¯åä¸æéåå¯¹è±¡ï¼æ¯å¦éè¦å»¶è¿æ¥æ¾ç­ç¹å®å¸¸è§ï¼æç¸åºä¸åç APIã\n\n\n# åä¸ç±»åä¾èµæ¥æ¾\n\nåä¸ç±»åä¾èµæ¥æ¾æ¥å£- BeanFactory\n\n * æ ¹æ® Bean åç§°æ¥æ¾\n   * getBean(String)\n   * Spring 2.5 è¦çé»è®¤åæ°ï¼getBean(String,Object...)\n * æ ¹æ® Bean ç±»åæ¥æ¾\n   * Bean å®æ¶æ¥æ¾\n     * Spring 3.0 getBean(Class)\n     * Spring 4.1 è¦çé»è®¤åæ°ï¼getBean(Class,Object...)\n   * Spring 5.1 Bean å»¶è¿æ¥æ¾\n     * getBeanProvider(Class)\n     * getBeanProvider(ResolvableType)\n * æ ¹æ® Bean åç§° + ç±»åæ¥æ¾ï¼getBean(String,Class)\n\n\n# éåç±»åä¾èµæ¥æ¾\n\néåç±»åä¾èµæ¥æ¾æ¥å£- ListableBeanFactory\n\n * æ ¹æ® Bean ç±»åæ¥æ¾\n   \n   * è·ååç±»å Bean åç§°åè¡¨\n     * getBeanNamesForType(Class)\n     * Spring 4.2 getBeanNamesForType(ResolvableType)\n   * è·ååç±»å Bean å®ä¾åè¡¨\n     * getBeansOfType(Class) ä»¥åéè½½æ¹æ³\n\n * éè¿æ³¨è§£ç±»åæ¥æ¾\n   \n   * Spring 3.0 è·åæ æ³¨ç±»å Bean åç§°åè¡¨\n     \n     * getBeanNamesForAnnotation(Class<? extends Annotation>)\n   \n   * Spring 3.0 è·åæ æ³¨ç±»å Bean å®ä¾åè¡¨\n     \n     * getBeansWithAnnotation(Class<? extends Annotation>)\n   \n   * Spring 3.0 è·åæå®åç§°+ æ æ³¨ç±»å Bean å®ä¾\n     \n     * findAnnotationOnBean(String,Class<? extends Annotation>)\n\n\n# å±æ¬¡æ§ä¾èµæ¥æ¾\n\nå±æ¬¡æ§ä¾èµæ¥æ¾æ¥å£- HierarchicalBeanFactory\n\n * åäº² BeanFactoryï¼getParentBeanFactory()\n * å±æ¬¡æ§æ¥æ¾\n   * æ ¹æ® Bean åç§°æ¥æ¾\n     * åºäº containsLocalBean æ¹æ³å®ç°\n   * æ ¹æ® Bean ç±»åæ¥æ¾å®ä¾åè¡¨\n     * åä¸ç±»åï¼BeanFactoryUtils#beanOfType\n     * éåç±»åï¼BeanFactoryUtils#beansOfTypeIncludingAncestors\n   * æ ¹æ® Java æ³¨è§£æ¥æ¾åç§°åè¡¨\n     * BeanFactoryUtils#beanNamesForTypeIncludingAncestors\n\n\n# å»¶è¿ä¾èµæ¥æ¾\n\nBean å»¶è¿ä¾èµæ¥æ¾æ¥å£\n\n * org.springframework.beans.factory.ObjectFactory\n * org.springframework.beans.factory.ObjectProviderï¼Spring 5 å¯¹ Java 8 ç¹æ§æ©å±ï¼\n * å½æ°å¼æ¥å£\n   * getIfAvailable(Supplier)\n   * ifAvailable(Consumer)\n * Stream æ©å±- stream()\n\n\n# å®å¨ä¾èµæ¥æ¾\n\nä¾èµæ¥æ¾ç±»å   ä»£è¡¨å®ç°                                 æ¯å¦å®å¨\nåä¸ç±»åæ¥æ¾   BeanFactory#getBean                  å¦\n         ObjectFactory#getObject              å¦\n         ObjectProvider#getIfAvailable        æ¯\n                                              \néåç±»åæ¥æ¾   ListableBeanFactory#getBeansOfType   æ¯\n         ObjectProvider#stream                æ¯\n\næ³¨æï¼å±æ¬¡æ§ä¾èµæ¥æ¾çå®å¨æ§åå³äºå¶æ©å±çåä¸æéåç±»åç BeanFactory æ¥å£\n\n\n# åå»ºå¯æ¥æ¾çä¾èµ\n\nAbstractApplicationContext åå»ºå¯æ¥æ¾çä¾èµ\n\nBEAN                          åç§° BEAN                          å®ä¾ä½¿ç¨åºæ¯\nenvironment                   Environment å¯¹è±¡                   å¤é¨åéç½®ä»¥å Profiles\nsystemProperties              java.util.Properties å¯¹è±¡          Java ç³»ç»å±æ§\nsystemEnvironment             java.util.Map å¯¹è±¡                 æä½ç³»ç»ç¯å¢åé\nmessageSource                 MessageSource å¯¹è±¡                 å½éåææ¡\nlifecycleProcessor            LifecycleProcessor å¯¹è±¡            Lifecycle Bean å¤çå¨\napplicationEventMulticaster   ApplicationEventMulticaster å¯¹è±¡   Spring äºä»¶å¹¿æ­å¨\n\næ³¨è§£é©±å¨ Spring åºç¨ä¸ä¸æåå»ºå¯æ¥æ¾çä¾èµï¼é¨åï¼\n\nBEAN åç§°                                                                           BEAN å®ä¾                                     ä½¿ç¨åºæ¯\norg.springframework.context.annotation.internalConfigurationAnnotationProcessor   ConfigurationClassPostProcessor å¯¹è±¡          å¤ç Spring éç½®ç±»\norg.springframework.context.annotation.internalAutowiredAnnotationProcessor       AutowiredAnnotationBeanPostProcessor å¯¹è±¡     å¤ç@Autowired ä»¥å@Value æ³¨è§£\norg.springframework.context.annotation.internalCommonAnnotationProcessor          CommonAnnotationBeanPostProcessor å¯¹è±¡        ï¼æ¡ä»¶æ¿æ´»ï¼å¤ç JSR-250 æ³¨è§£ï¼å¦@PostConstruct ç­\norg.springframework.context.event.internalEventListenerProcessor                  EventListenerMethodProcessor å¯¹è±¡             å¤çæ æ³¨@EventListener ç Spring äºä»¶çå¬æ¹æ³\norg.springframework.context.event.internalEventListenerFactory                    DefaultEventListenerFactory å¯¹è±¡              @EventListener äºä»¶çå¬æ¹æ³ééä¸º ApplicationListener\norg.springframework.context.annotation.internalPersistenceAnnotationProcessor     PersistenceAnnotationBeanPostProcessor å¯¹è±¡   ï¼æ¡ä»¶æ¿æ´»ï¼å¤ç JPA æ³¨è§£åºæ¯\n\n\n# ä¾èµæ¥æ¾ä¸­çç»å¸å¼å¸¸\n\nBeansException å­ç±»å\n\nå¼å¸¸ç±»å                              è§¦åæ¡ä»¶ï¼ä¸¾ä¾ï¼                     åºæ¯ä¸¾ä¾\nNoSuchBeanDefinitionException     å½æ¥æ¾ Bean ä¸å­å¨äº IoC å®¹å¨æ¶        BeanFactory#getBeanObjectFactory#getObject\nNoUniqueBeanDefinitionException   ç±»åä¾èµæ¥æ¾æ¶ï¼IoC å®¹å¨å­å¨å¤ä¸ª Bean å®ä¾   BeanFactory#getBean(Class)\nBeanInstantiationException        å½ Bean æå¯¹åºçç±»åéå·ä½ç±»æ¶           BeanFactory#getBean\nBeanCreationException             å½ Bean åå§åè¿ç¨ä¸­                Bean åå§åæ¹æ³æ§è¡å¼å¸¸æ¶\nBeanDefinitionStoreException      å½ BeanDefinition éç½®åä¿¡æ¯éæ³æ¶    XML éç½®èµæºæ æ³æå¼æ¶\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring ä¾èµæ¥æ¾\n\nä¾èµæ¥æ¾æ¯ä¸»å¨ææå¨çä¾èµæ¥æ¾æ¹å¼ï¼éå¸¸éè¦ä¾èµå®¹å¨ææ å api å®ç°ã\n\nioc ä¾èµæ¥æ¾å¤§è´å¯ä»¥åä¸ºä»¥ä¸å ç±»ï¼\n\n * æ ¹æ® bean åç§°æ¥æ¾\n * æ ¹æ® bean ç±»åæ¥æ¾\n * æ ¹æ® bean åç§° + ç±»åæ¥æ¾\n * æ ¹æ® java æ³¨è§£æ¥æ¾\n\næ­¤å¤ï¼æ ¹æ®æ¥æ¾ç bean å¯¹è±¡æ¯åä¸æéåå¯¹è±¡ï¼æ¯å¦éè¦å»¶è¿æ¥æ¾ç­ç¹å®å¸¸è§ï¼æç¸åºä¸åç apiã\n\n\n# åä¸ç±»åä¾èµæ¥æ¾\n\nåä¸ç±»åä¾èµæ¥æ¾æ¥å£- beanfactory\n\n * æ ¹æ® bean åç§°æ¥æ¾\n   * getbean(string)\n   * spring 2.5 è¦çé»è®¤åæ°ï¼getbean(string,object...)\n * æ ¹æ® bean ç±»åæ¥æ¾\n   * bean å®æ¶æ¥æ¾\n     * spring 3.0 getbean(class)\n     * spring 4.1 è¦çé»è®¤åæ°ï¼getbean(class,object...)\n   * spring 5.1 bean å»¶è¿æ¥æ¾\n     * getbeanprovider(class)\n     * getbeanprovider(resolvabletype)\n * æ ¹æ® bean åç§° + ç±»åæ¥æ¾ï¼getbean(string,class)\n\n\n# éåç±»åä¾èµæ¥æ¾\n\néåç±»åä¾èµæ¥æ¾æ¥å£- listablebeanfactory\n\n * æ ¹æ® bean ç±»åæ¥æ¾\n   \n   * è·ååç±»å bean åç§°åè¡¨\n     * getbeannamesfortype(class)\n     * spring 4.2 getbeannamesfortype(resolvabletype)\n   * è·ååç±»å bean å®ä¾åè¡¨\n     * getbeansoftype(class) ä»¥åéè½½æ¹æ³\n\n * éè¿æ³¨è§£ç±»åæ¥æ¾\n   \n   * spring 3.0 è·åæ æ³¨ç±»å bean åç§°åè¡¨\n     \n     * getbeannamesforannotation(class<? extends annotation>)\n   \n   * spring 3.0 è·åæ æ³¨ç±»å bean å®ä¾åè¡¨\n     \n     * getbeanswithannotation(class<? extends annotation>)\n   \n   * spring 3.0 è·åæå®åç§°+ æ æ³¨ç±»å bean å®ä¾\n     \n     * findannotationonbean(string,class<? extends annotation>)\n\n\n# å±æ¬¡æ§ä¾èµæ¥æ¾\n\nå±æ¬¡æ§ä¾èµæ¥æ¾æ¥å£- hierarchicalbeanfactory\n\n * åäº² beanfactoryï¼getparentbeanfactory()\n * å±æ¬¡æ§æ¥æ¾\n   * æ ¹æ® bean åç§°æ¥æ¾\n     * åºäº containslocalbean æ¹æ³å®ç°\n   * æ ¹æ® bean ç±»åæ¥æ¾å®ä¾åè¡¨\n     * åä¸ç±»åï¼beanfactoryutils#beanoftype\n     * éåç±»åï¼beanfactoryutils#beansoftypeincludingancestors\n   * æ ¹æ® java æ³¨è§£æ¥æ¾åç§°åè¡¨\n     * beanfactoryutils#beannamesfortypeincludingancestors\n\n\n# å»¶è¿ä¾èµæ¥æ¾\n\nbean å»¶è¿ä¾èµæ¥æ¾æ¥å£\n\n * org.springframework.beans.factory.objectfactory\n * org.springframework.beans.factory.objectproviderï¼spring 5 å¯¹ java 8 ç¹æ§æ©å±ï¼\n * å½æ°å¼æ¥å£\n   * getifavailable(supplier)\n   * ifavailable(consumer)\n * stream æ©å±- stream()\n\n\n# å®å¨ä¾èµæ¥æ¾\n\nä¾èµæ¥æ¾ç±»å   ä»£è¡¨å®ç°                                 æ¯å¦å®å¨\nåä¸ç±»åæ¥æ¾   beanfactory#getbean                  å¦\n         objectfactory#getobject              å¦\n         objectprovider#getifavailable        æ¯\n                                              \néåç±»åæ¥æ¾   listablebeanfactory#getbeansoftype   æ¯\n         objectprovider#stream                æ¯\n\næ³¨æï¼å±æ¬¡æ§ä¾èµæ¥æ¾çå®å¨æ§åå³äºå¶æ©å±çåä¸æéåç±»åç beanfactory æ¥å£\n\n\n# åå»ºå¯æ¥æ¾çä¾èµ\n\nabstractapplicationcontext åå»ºå¯æ¥æ¾çä¾èµ\n\nbean                          åç§° bean                          å®ä¾ä½¿ç¨åºæ¯\nenvironment                   environment å¯¹è±¡                   å¤é¨åéç½®ä»¥å profiles\nsystemproperties              java.util.properties å¯¹è±¡          java ç³»ç»å±æ§\nsystemenvironment             java.util.map å¯¹è±¡                 æä½ç³»ç»ç¯å¢åé\nmessagesource                 messagesource å¯¹è±¡                 å½éåææ¡\nlifecycleprocessor            lifecycleprocessor å¯¹è±¡            lifecycle bean å¤çå¨\napplicationeventmulticaster   applicationeventmulticaster å¯¹è±¡   spring äºä»¶å¹¿æ­å¨\n\næ³¨è§£é©±å¨ spring åºç¨ä¸ä¸æåå»ºå¯æ¥æ¾çä¾èµï¼é¨åï¼\n\nbean åç§°                                                                           bean å®ä¾                                     ä½¿ç¨åºæ¯\norg.springframework.context.annotation.internalconfigurationannotationprocessor   configurationclasspostprocessor å¯¹è±¡          å¤ç spring éç½®ç±»\norg.springframework.context.annotation.internalautowiredannotationprocessor       autowiredannotationbeanpostprocessor å¯¹è±¡     å¤ç@autowired ä»¥å@value æ³¨è§£\norg.springframework.context.annotation.internalcommonannotationprocessor          commonannotationbeanpostprocessor å¯¹è±¡        ï¼æ¡ä»¶æ¿æ´»ï¼å¤ç jsr-250 æ³¨è§£ï¼å¦@postconstruct ç­\norg.springframework.context.event.internaleventlistenerprocessor                  eventlistenermethodprocessor å¯¹è±¡             å¤çæ æ³¨@eventlistener ç spring äºä»¶çå¬æ¹æ³\norg.springframework.context.event.internaleventlistenerfactory                    defaulteventlistenerfactory å¯¹è±¡              @eventlistener äºä»¶çå¬æ¹æ³ééä¸º applicationlistener\norg.springframework.context.annotation.internalpersistenceannotationprocessor     persistenceannotationbeanpostprocessor å¯¹è±¡   ï¼æ¡ä»¶æ¿æ´»ï¼å¤ç jpa æ³¨è§£åºæ¯\n\n\n# ä¾èµæ¥æ¾ä¸­çç»å¸å¼å¸¸\n\nbeansexception å­ç±»å\n\nå¼å¸¸ç±»å                              è§¦åæ¡ä»¶ï¼ä¸¾ä¾ï¼                     åºæ¯ä¸¾ä¾\nnosuchbeandefinitionexception     å½æ¥æ¾ bean ä¸å­å¨äº ioc å®¹å¨æ¶        beanfactory#getbeanobjectfactory#getobject\nnouniquebeandefinitionexception   ç±»åä¾èµæ¥æ¾æ¶ï¼ioc å®¹å¨å­å¨å¤ä¸ª bean å®ä¾   beanfactory#getbean(class)\nbeaninstantiationexception        å½ bean æå¯¹åºçç±»åéå·ä½ç±»æ¶           beanfactory#getbean\nbeancreationexception             å½ bean åå§åè¿ç¨ä¸­                bean åå§åæ¹æ³æ§è¡å¼å¸¸æ¶\nbeandefinitionstoreexception      å½ beandefinition éç½®åä¿¡æ¯éæ³æ¶    xml éç½®èµæºæ æ³æå¼æ¶\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ä¾èµæ³¨å¥",frontmatter:{title:"Spring ä¾èµæ³¨å¥",date:"2020-08-30T16:06:10.000Z",order:4,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","IOC","ä¾èµæ³¨å¥"],permalink:"/pages/f61a1c/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/04.Spring%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/04.Springä¾èµæ³¨å¥.md",key:"v-a011e00e",path:"/pages/f61a1c/",headers:[{level:2,title:"IoC ä¾èµæ³¨å¥ API",slug:"ioc-ä¾èµæ³¨å¥-api",normalizedTitle:"ioc ä¾èµæ³¨å¥ api",charIndex:823},{level:2,title:"ä¾èµæ³¨å¥æ¨¡å¼",slug:"ä¾èµæ³¨å¥æ¨¡å¼",normalizedTitle:"ä¾èµæ³¨å¥æ¨¡å¼",charIndex:934},{level:3,title:"æå¨æ³¨å¥æ¨¡å¼",slug:"æå¨æ³¨å¥æ¨¡å¼",normalizedTitle:"æå¨æ³¨å¥æ¨¡å¼",charIndex:952},{level:3,title:"èªå¨æ³¨å¥æ¨¡å¼",slug:"èªå¨æ³¨å¥æ¨¡å¼",normalizedTitle:"èªå¨æ³¨å¥æ¨¡å¼",charIndex:959},{level:4,title:"èªå¨è£éç­ç¥",slug:"èªå¨è£éç­ç¥",normalizedTitle:"èªå¨è£éç­ç¥",charIndex:1259},{level:4,title:"@Autowired æ³¨å¥è¿ç¨",slug:"autowired-æ³¨å¥è¿ç¨",normalizedTitle:"@autowired æ³¨å¥è¿ç¨",charIndex:1658},{level:4,title:"èªå¨è£éçéå¶åä¸è¶³",slug:"èªå¨è£éçéå¶åä¸è¶³",normalizedTitle:"èªå¨è£éçéå¶åä¸è¶³",charIndex:1710},{level:2,title:"ä¾èµæ³¨å¥æ¹å¼",slug:"ä¾èµæ³¨å¥æ¹å¼",normalizedTitle:"ä¾èµæ³¨å¥æ¹å¼",charIndex:2101},{level:3,title:"æé å¨æ³¨å¥",slug:"æé å¨æ³¨å¥",normalizedTitle:"æé å¨æ³¨å¥",charIndex:2196},{level:3,title:"Setter æ¹æ³æ³¨å¥",slug:"setter-æ¹æ³æ³¨å¥",normalizedTitle:"setter æ¹æ³æ³¨å¥",charIndex:2143},{level:3,title:"å­æ®µæ³¨å¥",slug:"å­æ®µæ³¨å¥",normalizedTitle:"å­æ®µæ³¨å¥",charIndex:2257},{level:3,title:"æ¹æ³æ³¨å¥",slug:"æ¹æ³æ³¨å¥",normalizedTitle:"æ¹æ³æ³¨å¥",charIndex:2150},{level:3,title:"æ¥å£åè°æ³¨å¥",slug:"æ¥å£åè°æ³¨å¥",normalizedTitle:"æ¥å£åè°æ³¨å¥",charIndex:2354},{level:3,title:"ä¾èµæ³¨å¥éå",slug:"ä¾èµæ³¨å¥éå",normalizedTitle:"ä¾èµæ³¨å¥éå",charIndex:6603},{level:2,title:"éå®æ³¨å¥åå»¶è¿æ³¨å¥",slug:"éå®æ³¨å¥åå»¶è¿æ³¨å¥",normalizedTitle:"éå®æ³¨å¥åå»¶è¿æ³¨å¥",charIndex:6671},{level:3,title:"éå®æ³¨å¥",slug:"éå®æ³¨å¥",normalizedTitle:"éå®æ³¨å¥",charIndex:6671},{level:3,title:"å»¶è¿æ³¨å¥",slug:"å»¶è¿æ³¨å¥",normalizedTitle:"å»¶è¿æ³¨å¥",charIndex:925},{level:2,title:"ä¾èµæ³¨å¥æ°æ®ç±»å",slug:"ä¾èµæ³¨å¥æ°æ®ç±»å",normalizedTitle:"ä¾èµæ³¨å¥æ°æ®ç±»å",charIndex:6868},{level:3,title:"åºç¡ç±»å",slug:"åºç¡ç±»å",normalizedTitle:"åºç¡ç±»å",charIndex:6881},{level:3,title:"éåç±»å",slug:"éåç±»å",normalizedTitle:"éåç±»å",charIndex:7123},{level:2,title:"ä¾èµå¤çè¿ç¨",slug:"ä¾èµå¤çè¿ç¨",normalizedTitle:"ä¾èµå¤çè¿ç¨",charIndex:7217},{level:2,title:"ä¾èµæ¥æ¾ VS. ä¾èµæ³¨å¥",slug:"ä¾èµæ¥æ¾-vs-ä¾èµæ³¨å¥",normalizedTitle:"ä¾èµæ¥æ¾ vs. ä¾èµæ³¨å¥",charIndex:7812},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:7970}],headersStr:"IoC ä¾èµæ³¨å¥ API ä¾èµæ³¨å¥æ¨¡å¼ æå¨æ³¨å¥æ¨¡å¼ èªå¨æ³¨å¥æ¨¡å¼ èªå¨è£éç­ç¥ @Autowired æ³¨å¥è¿ç¨ èªå¨è£éçéå¶åä¸è¶³ ä¾èµæ³¨å¥æ¹å¼ æé å¨æ³¨å¥ Setter æ¹æ³æ³¨å¥ å­æ®µæ³¨å¥ æ¹æ³æ³¨å¥ æ¥å£åè°æ³¨å¥ ä¾èµæ³¨å¥éå éå®æ³¨å¥åå»¶è¿æ³¨å¥ éå®æ³¨å¥ å»¶è¿æ³¨å¥ ä¾èµæ³¨å¥æ°æ®ç±»å åºç¡ç±»å éåç±»å ä¾èµå¤çè¿ç¨ ä¾èµæ¥æ¾ VS. ä¾èµæ³¨å¥ åèèµæ",content:'# Spring ä¾èµæ³¨å¥\n\nDIï¼æ¯ Dependency Injection çç¼©åï¼å³ä¾èµæ³¨å¥ãä¾èµæ³¨å¥æ¯ IoC çæå¸¸è§å½¢å¼ãä¾èµæ³¨å¥æ¯æå¨æèªå¨ç»å®çæ¹å¼ï¼æ éä¾èµç¹å®çå®¹å¨æ APIã\n\nä¾èµæ³¨å¥ (Dependency Injectionï¼ç®ç§° DI) æ¯ä¸ä¸ªè¿ç¨ï¼å¶ä¸­å¯¹è±¡ä»éè¿æé å½æ°åæ°ãå·¥åæ¹æ³çåæ°æå¯¹è±¡å®ä¾å¨æé æä»å·¥åæ¹æ³è¿åãç¶åå®¹å¨å¨åå»º bean æ¶æ³¨å¥è¿äºä¾èµé¡¹ãè¿ä¸ªè¿ç¨åºæ¬ä¸æ¯ bean æ¬èº«çéè¿ç¨ï¼å æ­¤å¾åï¼æ§å¶åè½¬ï¼ï¼å®éè¿ä½¿ç¨ç±»çç´æ¥æé ææå¡å®ä½å¨æ¨¡å¼èªè¡æ§å¶å¶ä¾èµé¡¹çå®ä¾åæä½ç½®ã\n\nä½¿ç¨ DIï¼ä»£ç æ´å¹²åï¼å½å¯¹è±¡å·æä¾èµå³ç³»æ¶ï¼è§£è¦æ´ææãå¯¹è±¡ä¸æ¥æ¾å¶ä¾èµé¡¹ï¼ä¹ä¸ç¥éä¾èµé¡¹çä½ç½®æç±»å«ãç»æï¼æ¨çç±»åå¾æ´å®¹ææµè¯ï¼ç¹å«æ¯å½ä¾èµå³ç³»å¨æ¥å£ææ½è±¡åºç±»ä¸æ¶ï¼å®ä»¬åè®¸å¨ååæµè¯ä¸­ä½¿ç¨å­æ ¹ææ¨¡æå®ç°ã\n\nå®¹å¨å¨æè´è´£ç»ä»¶çè£éï¼å®ä¼æç¬¦åä¾èµå³ç³»çå¯¹è±¡éè¿ JavaBean å±æ§æèæé å½æ°ä¼ éç»éè¦çå¯¹è±¡ã\n\nDI æ¯ç»ä»¶ä¹é´ä¾èµå³ç³»ç±å®¹å¨å¨è¿è¡æå³å®ï¼å½¢è±¡çè¯´ï¼å³ç±å®¹å¨å¨æçå°æä¸ªä¾èµå³ç³»æ³¨å¥å°ç»ä»¶ä¹ä¸­ãä¾èµæ³¨å¥çç®çå¹¶éä¸ºè½¯ä»¶ç³»ç»å¸¦æ¥æ´å¤åè½ï¼èæ¯ä¸ºäºæåç»ä»¶éç¨çé¢çï¼å¹¶ä¸ºç³»ç»æ­å»ºä¸ä¸ªçµæ´»ãå¯æ©å±çå¹³å°ãéè¿ä¾èµæ³¨å¥æºå¶ï¼æä»¬åªéè¦éè¿ç®åçéç½®ï¼èæ éä»»ä½ä»£ç å°±å¯æå®ç®æ éè¦çèµæºï¼å®æèªèº«çä¸å¡é»è¾ï¼èä¸éè¦å³å¿å·ä½çèµæºæ¥èªä½å¤ï¼ç±è°å®ç°ã\n\nçè§£ DI çå³é®æ¯ï¼âè°ä¾èµè°ï¼ä¸ºä»ä¹éè¦ä¾èµï¼è°æ³¨å¥è°ï¼æ³¨å¥äºä»ä¹âï¼é£æä»¬æ¥æ·±å¥åæä¸ä¸ï¼\n\n * **è°ä¾èµäºè°ï¼**å½ç¶æ¯åºç¨ç¨åºä¾èµäº IoC å®¹å¨ï¼\n * **ä¸ºä»ä¹éè¦ä¾èµï¼**åºç¨ç¨åºéè¦ IoC å®¹å¨æ¥æä¾å¯¹è±¡éè¦çå¤é¨èµæºï¼\n * **è°æ³¨å¥è°ï¼**å¾ææ¾æ¯ IoC å®¹å¨æ³¨å¥åºç¨ç¨åºæä¸ªå¯¹è±¡ï¼åºç¨ç¨åºä¾èµçå¯¹è±¡ï¼\n * æ³¨å¥äºä»ä¹ï¼å°±æ¯æ³¨å¥æä¸ªå¯¹è±¡æéè¦çå¤é¨èµæºï¼åæ¬å¯¹è±¡ãèµæºãå¸¸éæ°æ®ï¼ã\n\n\n# IoC ä¾èµæ³¨å¥ API\n\n * æ ¹æ® Bean åç§°æ³¨å¥\n * æ ¹æ® Bean ç±»åæ³¨å¥\n * æ³¨å¥å®¹å¨åå»º Bean å¯¹è±¡\n * æ³¨å¥é Bean å¯¹è±¡\n * æ³¨å¥ç±»å\n   * å®æ¶æ³¨å¥\n   * å»¶è¿æ³¨å¥\n\n\n# ä¾èµæ³¨å¥æ¨¡å¼\n\nä¾èµæ³¨å¥æ¨¡å¼å¯ä»¥åä¸ºæå¨æ³¨å¥æ¨¡å¼åèªå¨æ³¨å¥æ¨¡å¼ã\n\n\n# æå¨æ³¨å¥æ¨¡å¼\n\næå¨æ³¨å¥æ¨¡å¼ï¼éç½®æèç¼ç¨çæ¹å¼ï¼æåå®ææ³¨å¥è§å\n\n * XML èµæºéç½®åä¿¡æ¯\n * Java æ³¨è§£éç½®åä¿¡æ¯\n * API éç½®åä¿¡æ¯\n\n\n# èªå¨æ³¨å¥æ¨¡å¼\n\nèªå¨æ³¨å¥æ¨¡å¼å³èªå¨è£éãèªå¨è£éï¼Autowiringï¼æ¯æ Spring å®¹å¨å¯ä»¥èªå¨è£é Bean ä¹é´çå³ç³»ãSpring å¯ä»¥éè¿æ£æ¥ ApplicationContext çåå®¹ï¼èªå¨è§£æåä½èï¼å¶ä» Beanï¼ã\n\n * èªå¨è£éå¯ä»¥æ¾èåå°å±æ§ææé å½æ°åæ°çéç½®ã\n * éçå¯¹è±¡çåå±ï¼èªå¨è£éå¯ä»¥æ´æ°éç½®ã\n\n> æ³¨ï¼ç±äºèªå¨è£éå­å¨ä¸äºéå¶åä¸è¶³ï¼å®æ¹ä¸æ¨èä½¿ç¨ã\n\n# èªå¨è£éç­ç¥\n\nå½ä½¿ç¨åºäº XML çéç½®åæ°æ®æ¶ï¼å¯ä»¥ä½¿ç¨ <bean/> åç´ ç autowire å±æ§ä¸º Bean æå®èªå¨è£éæ¨¡å¼ãèªå¨è£éæ¨¡å¼æä»¥ä¸ç±»åï¼\n\næ¨¡å¼            è¯´æ\nno            é»è®¤å¼ï¼æªæ¿æ´» Autowiringï¼éè¦æå¨æå®ä¾èµæ³¨å¥å¯¹è±¡ã\nbyName        æ ¹æ®è¢«æ³¨å¥å±æ§çåç§°ä½ä¸º Bean åç§°è¿è¡ä¾èµæ¥æ¾ï¼å¹¶å°å¯¹è±¡è®¾ç½®å°è¯¥å±æ§ã\nbyType        æ ¹æ®è¢«æ³¨å¥å±æ§çç±»åä½ä¸ºä¾èµç±»åè¿è¡æ¥æ¾ï¼å¹¶å°å¯¹è±¡è®¾ç½®å°è¯¥å±æ§ã\nconstructor   ç¹æ® byType ç±»åï¼ç¨äºæé å¨åæ°ã\n\norg.springframework.beans.factory.config.AutowireCapableBeanFactory æ¯ BeanFactory çå­æ¥å£ï¼å®æ¯ Spring ä¸­ç¨äºå®ç°èªå¨è£éçå®¹å¨ã\n\n# @Autowired æ³¨å¥è¿ç¨\n\n * åä¿¡æ¯è§£æ\n * ä¾èµæ¥æ¾\n * ä¾èµæ³¨å¥ï¼å­æ®µãæ¹æ³ï¼\n\n# èªå¨è£éçéå¶åä¸è¶³\n\nèªå¨è£éæä»¥ä¸éå¶åä¸è¶³ï¼\n\n * å±æ§åæé å½æ°åæ°è®¾ç½®ä¸­çæ¾å¼ä¾èµé¡¹ä¼è¦çèªå¨è£éãæ¨ä¸è½èªå¨è£éç®åå±æ§ï¼ä¾å¦åºç¡æ°æ®ç±»åãå­ç¬¦ä¸²åç±»ï¼ä»¥åæ­¤ç±»ç®åå±æ§çæ°ç»ï¼ã\n * èªå¨è£éä¸å¦æ¾å¼è£éç²¾åãSpring ä¼å°½éé¿åçæµå¯è½å­å¨æ­§ä¹çç»æã\n * Spring å®¹å¨çæææ¡£çå·¥å·å¯è½æ æ³è§£æèªå¨è£éä¿¡æ¯ã\n * å¦æåä¸ç±»åå­å¨å¤ä¸ª Bean æ¶ï¼èªå¨è£éæ¶ä¼å­å¨æ­§ä¹ãå®¹å¨åçå¤ä¸ª Bean å®ä¹å¯è½ä¸è¦èªå¨è£éç Setter æ¹æ³ææé å½æ°åæ°æå®çç±»åå¹éãå¯¹äºæ°ç»ãéåæ Map å®ä¾ï¼è¿ä¸ä¸å®æ¯é®é¢ãä½æ¯ï¼å¯¹äºææåå¼çä¾èµé¡¹ï¼å¦ææ²¡æå¯ä¸ç Bean å®ä¹å¯ç¨ï¼åä¼å¼åå¼å¸¸ã\n\n> èªå¨è£éçéå¶åä¸è¶³ï¼è¯¦æå¯ä»¥åèå®æ¹ææ¡£ï¼Limitations and Disadvantages of Autowiring å°è\n\n\n# ä¾èµæ³¨å¥æ¹å¼\n\nä¾èµæ³¨å¥æå¦ä¸æ¹å¼ï¼\n\nä¾èµæ³¨å¥æ¹å¼        éç½®åæ°æ®ä¸¾ä¾\nSetter æ¹æ³æ³¨å¥   <proeprty name="user" ref="userBean"/>\næé å¨æ³¨å¥         <constructor-arg name="user" ref="userBean" />\nå­æ®µæ³¨å¥          @Autowired User user;\næ¹æ³æ³¨å¥          @Autowired public void user(User user) { ... }\næ¥å£åè°æ³¨å¥        class MyBean implements BeanFactoryAware { ... }\n\n\n# æé å¨æ³¨å¥\n\n * æå¨æ¨¡å¼\n   * xml éç½®åä¿¡æ¯\n   * æ³¨è§£éç½®åä¿¡æ¯\n   * Java éç½®åä¿¡æ¯\n * èªå¨æ¨¡å¼\n   * constructor\n\næé å¨æ³¨å¥æ¯éè¿å®¹å¨è°ç¨å·æå¤ä¸ªåæ°çæé å½æ°æ¥å®æçï¼æ¯ä¸ªåæ°ä»£è¡¨ä¸ä¸ªä¾èµé¡¹ãè°ç¨å¸¦æç¹å®åæ°çéæå·¥åæ¹æ³æ¥æé  bean å ä¹æ¯ç­ä»·çï¼å¹¶ä¸æ¬æ¬¡è®¨è®ºå¯¹æé å½æ°åéæå·¥åæ¹æ³çåæ°è¿è¡äºç±»ä¼¼çå¤çã\n\nä¸é¢æ¯ä¸ä¸ªæé å¨æ³¨å¥ç¤ºä¾ï¼\n\npublic class SimpleMovieLister {\n\n    // the SimpleMovieLister has a dependency on a MovieFinder\n    private final MovieFinder movieFinder;\n\n    // a constructor so that the Spring container can inject a MovieFinder\n    public SimpleMovieLister(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // business logic that actually uses the injected MovieFinder is omitted...\n}\n\n\næé å½æ°åæ°è§£æå¹ééè¿ä½¿ç¨åæ°çç±»åè¿è¡ãå¦æ bean å®ä¹çæé å½æ°åæ°ä¸­ä¸å­å¨æ½å¨çæ­§ä¹ï¼åå¨ bean å®ä¹ä¸­å®ä¹æé å½æ°åæ°çé¡ºåºæ¯å¨å®ä¾å bean æ¶å°è¿äºåæ°æä¾ç»éå½æé å½æ°çé¡ºåºã\n\npackage x.y;\n\npublic class ThingOne {\n\n    public ThingOne(ThingTwo thingTwo, ThingThree thingThree) {\n        // ...\n    }\n}\n\n\nåè®¾ ThingTwo å ThingThree ç±»æ²¡æç»§æ¿å³ç³»ï¼åä¸å­å¨æ½å¨çæ­§ä¹ãå æ­¤ï¼ä»¥ä¸éç½®å·¥ä½æ­£å¸¸ï¼æ¨æ éå¨ <constructor-arg/> åç´ ä¸­æ¾å¼æå®æé å½æ°åæ°ç´¢å¼æç±»åã\n\n<beans>\n    <bean id="beanOne" class="x.y.ThingOne">\n        <constructor-arg ref="beanTwo"/>\n        <constructor-arg ref="beanThree"/>\n    </bean>\n\n    <bean id="beanTwo" class="x.y.ThingTwo"/>\n\n    <bean id="beanThree" class="x.y.ThingThree"/>\n</beans>\n\n\nå½å¼ç¨å¦ä¸ä¸ª bean æ¶ï¼ç±»åæ¯å·²ç¥çï¼å¹¶ä¸å¯ä»¥åçå¹éï¼å°±ååé¢çç¤ºä¾ä¸æ ·ï¼ãå½ä½¿ç¨ç®åç±»åæ¶ï¼ä¾å¦ <value>true</value> ï¼Spring æ æ³ç¡®å® value çç±»åï¼å æ­¤æ æ³å¨æ²¡æå¸®å©çæåµä¸æç±»åå¹éãèèä»¥ä¸ç±»ï¼\n\npackage examples;\n\npublic class ExampleBean {\n\n    // Number of years to calculate the Ultimate Answer\n    private final int years;\n\n    // The Answer to Life, the Universe, and Everything\n    private final String ultimateAnswer;\n\n    public ExampleBean(int years, String ultimateAnswer) {\n        this.years = years;\n        this.ultimateAnswer = ultimateAnswer;\n    }\n}\n\n\næé å½æ°åæ°ç±»åå¹é\n\nå¨ä¸è¿°åºæ¯ä¸­ï¼å¦ææ¨ä½¿ç¨ type å±æ§æ¾å¼æå®æé å½æ°åæ°çç±»åï¼åå®¹å¨å¯ä»¥ä½¿ç¨ç®åç±»åçç±»åå¹éï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg type="int" value="7500000"/>\n    <constructor-arg type="java.lang.String" value="42"/>\n</bean>\n\n\næé å½æ°åæ°ç´¢å¼å¹é\n\nå¯ä»¥ä½¿ç¨ index å±æ§æ¾å¼æå®æé å½æ°åæ°çç´¢å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤º\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg index="0" value="7500000"/>\n    <constructor-arg index="1" value="42"/>\n</bean>\n\n\næé å½æ°åæ°åç§°å¹é\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg name="years" value="7500000"/>\n    <constructor-arg name="ultimateAnswer" value="42"/>\n</bean>\n\n\nå¯ä»¥ä½¿ç¨ @ConstructorProperties æ¾å¼å½åæé å½æ°åæ°ã\n\npackage examples;\n\npublic class ExampleBean {\n\n    // Fields omitted\n\n    @ConstructorProperties({"years", "ultimateAnswer"})\n    public ExampleBean(int years, String ultimateAnswer) {\n        this.years = years;\n        this.ultimateAnswer = ultimateAnswer;\n    }\n}\n\n\n\n# Setter æ¹æ³æ³¨å¥\n\n * æå¨æ¨¡å¼\n   * xml éç½®åä¿¡æ¯\n   * æ³¨è§£éç½®åä¿¡æ¯\n   * Java éç½®åä¿¡æ¯\n * èªå¨æ¨¡å¼\n   * byName\n   * byType\n\nSetter æ¹æ³æ³¨å¥æ¯éè¿å®¹å¨å¨è°ç¨æ åæ°æé å½æ°ææ åæ°éæå·¥åæ¹æ³æ¥å®ä¾å bean åè°ç¨ bean ä¸ç setter æ¹æ³æ¥å®æçã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªåªè½éè¿ä½¿ç¨çº¯ setter æ³¨å¥è¿è¡ä¾èµæ³¨å¥çç±»ã\n\npublic class SimpleMovieLister {\n\n    // the SimpleMovieLister has a dependency on the MovieFinder\n    private MovieFinder movieFinder;\n\n    // a setter method so that the Spring container can inject a MovieFinder\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // business logic that actually uses the injected MovieFinder is omitted...\n}\n\n\nå¨ Spring ä¸­ï¼å¯ä»¥æ··åä½¿ç¨æé å¨æ³¨å¥å setter æ¹æ³æ³¨å¥ãå»ºè®®å°æé å¨æ³¨å¥ç¨äºå¼ºå¶ä¾èµé¡¹ï¼å¹¶å° setter æ¹æ³æ³¨å¥æéç½®æ¹æ³ç¨äºå¯éä¾èµé¡¹ãéè¦æ³¨æçæ¯ï¼å¨ setter æ¹æ³ä¸ä½¿ç¨ @Required æ³¨è§£å¯ç¨äºä½¿å±æ§æä¸ºå¿éçä¾èµé¡¹ï¼ç¶èï¼æ´å»ºè®®ä½¿ç¨æé å¨æ³¨å¥æ¥å®æè¿é¡¹å·¥ä½ã\n\n\n# å­æ®µæ³¨å¥\n\næå¨æ¨¡å¼ï¼Java æ³¨è§£éç½®åä¿¡æ¯ï¼\n\n * @Autowired\n * @Resource\n * @Injectï¼å¯éï¼\n\n\n# æ¹æ³æ³¨å¥\n\næå¨æ¨¡å¼ï¼Java æ³¨è§£éç½®åä¿¡æ¯ï¼\n\n * @Autowired\n * @Resource\n * @Injectï¼å¯éï¼\n * @Bean\n\n\n# æ¥å£åè°æ³¨å¥\n\nAware ç³»åæ¥å£åè°\n\nå§å»ºæ¥å£                             è¯´æ\nBeanFactoryAware                 è·å IoC å®¹å¨- BeanFactory\nApplicationContextAware          è·å Spring åºç¨ä¸ä¸æ- ApplicationContext å¯¹è±¡\nEnvironmentAware                 è·å Environment å¯¹è±¡\nResourceLoaderAware              è·åèµæºå è½½å¨å¯¹è±¡- ResourceLoader\nBeanClassLoaderAware             è·åå è½½å½å Bean Class ç ClassLoader\nBeanNameAware                    è·åå½å Bean çåç§°\nMessageSourceAware               è·å MessageSource å¯¹è±¡ï¼ç¨äº Spring å½éå\nApplicationEventPublisherAware   è·å ApplicationEventPublishAware å¯¹è±¡ï¼ç¨äº Spring äºä»¶\nEmbeddedValueResolverAware       è·å StringValueResolver å¯¹è±¡ï¼ç¨äºå ä½ç¬¦å¤ç\n\n\n# ä¾èµæ³¨å¥éå\n\n * ä½ä¾èµï¼æé å¨æ³¨å¥\n * å¤ä¾èµï¼Setter æ¹æ³æ³¨å¥\n * ä¾¿å©æ§ï¼å­æ®µæ³¨å¥\n * å£°æç±»ï¼æ¹æ³æ³¨å¥\n\n\n# éå®æ³¨å¥åå»¶è¿æ³¨å¥\n\n\n# éå®æ³¨å¥\n\n * ä½¿ç¨ @Qualifier æ³¨è§£éå®\n   * éè¿ Bean åç§°éå®\n   * éè¿åç»éå®\n * éè¿ @Qualifier æ³¨è§£æ©å±éå®\n   * èªå®ä¹æ³¨è§£ï¼å¦ Spring Cloud ç @LoadBalanced\n\n\n# å»¶è¿æ³¨å¥\n\n * ä½¿ç¨ ObjectFactory\n * ä½¿ç¨ ObjectProviderï¼æ¨èï¼\n\n\n# ä¾èµæ³¨å¥æ°æ®ç±»å\n\n\n# åºç¡ç±»å\n\n * åºç¡æ°æ®ç±»åï¼booleanãbyteãcharãshortãintãfloatãlongãdouble\n * æ éç±»åï¼NumberãCharacterãBooleanãEnumãLocaleãCharsetãCurrencyãPropertiesãUUID\n * å¸¸è§ç±»åï¼ObjectãStringãTimeZoneãCalendarãOptional ç­\n * Spring ç±»åï¼ResourceãInputSourceãFormatter ç­ã\n\n\n# éåç±»å\n\næ°ç»ç±»åï¼åºç¡æ°æ®ç±»åãæ éç±»åãå¸¸è§ç±»åãString ç±»åçæ°ç»\n\néåç±»åï¼\n\n * Collectionï¼ListãSet\n * Mapï¼Properties\n\n\n# ä¾èµå¤çè¿ç¨\n\nå¥å£ï¼DefaultListableBeanFactory#resolveDependency\n\nä¾èµæè¿°ç¬¦ï¼DependencyDescriptor\n\nèªå®ä¹ç»å®åéå¯¹è±¡å¤çå¨ï¼AutowireCandidateResolver\n\n@Autowiredã@Valueã@javax.inject.Inject å¤çå¨ï¼AutowiredAnnotationBeanPostProcessor\n\néç¨æ³¨è§£å¤çå¨ï¼CommonAnnotationBeanPostProcessor\n\n * æ³¨å¥æ³¨è§£\n   * javax.xml.ws.WebServiceRef\n   * javax.ejb.EJB\n   * javax.annotation.Resources\n * çå½å¨ææ³¨è§£\n   * javax.annotation.PostConstruct\n   * javax.annotation.PreDestroy\n\nèªå®ä¹ä¾èµæ³¨å¥æ³¨è§£ï¼\n\n * çå½å¨æå¤ç\n   * InstantiationAwareBeanPostProcessor\n   * MergedBeanDefinitionPostProcessor\n * åæ°æ®\n   * InjectionMetadata\n   * InjectionMetadata.InjectedElement\n\n\n# ä¾èµæ¥æ¾ VS. ä¾èµæ³¨å¥\n\nç±»å     ä¾èµå¤ç   å®ç°å¤æåº¦   ä»£ç ä¾µå¥æ§    API ä¾èµæ§     å¯è¯»æ§\nä¾èµæ¥æ¾   ä¸»å¨     ç¸å¯¹ç¹ç    ä¾µå¥ä¸å¡é»è¾   ä¾èµå®¹å¨ API    è¯å¥½\nä¾èµæ³¨å¥   è¢«å¨     ç¸å¯¹ä¾¿å©    ä½ä¾µå¥æ§     ä¸ä¾èµå®¹å¨ API   ä¸è¬\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring ä¾èµæ³¨å¥\n\ndiï¼æ¯ dependency injection çç¼©åï¼å³ä¾èµæ³¨å¥ãä¾èµæ³¨å¥æ¯ ioc çæå¸¸è§å½¢å¼ãä¾èµæ³¨å¥æ¯æå¨æèªå¨ç»å®çæ¹å¼ï¼æ éä¾èµç¹å®çå®¹å¨æ apiã\n\nä¾èµæ³¨å¥ (dependency injectionï¼ç®ç§° di) æ¯ä¸ä¸ªè¿ç¨ï¼å¶ä¸­å¯¹è±¡ä»éè¿æé å½æ°åæ°ãå·¥åæ¹æ³çåæ°æå¯¹è±¡å®ä¾å¨æé æä»å·¥åæ¹æ³è¿åãç¶åå®¹å¨å¨åå»º bean æ¶æ³¨å¥è¿äºä¾èµé¡¹ãè¿ä¸ªè¿ç¨åºæ¬ä¸æ¯ bean æ¬èº«çéè¿ç¨ï¼å æ­¤å¾åï¼æ§å¶åè½¬ï¼ï¼å®éè¿ä½¿ç¨ç±»çç´æ¥æé ææå¡å®ä½å¨æ¨¡å¼èªè¡æ§å¶å¶ä¾èµé¡¹çå®ä¾åæä½ç½®ã\n\nä½¿ç¨ diï¼ä»£ç æ´å¹²åï¼å½å¯¹è±¡å·æä¾èµå³ç³»æ¶ï¼è§£è¦æ´ææãå¯¹è±¡ä¸æ¥æ¾å¶ä¾èµé¡¹ï¼ä¹ä¸ç¥éä¾èµé¡¹çä½ç½®æç±»å«ãç»æï¼æ¨çç±»åå¾æ´å®¹ææµè¯ï¼ç¹å«æ¯å½ä¾èµå³ç³»å¨æ¥å£ææ½è±¡åºç±»ä¸æ¶ï¼å®ä»¬åè®¸å¨ååæµè¯ä¸­ä½¿ç¨å­æ ¹ææ¨¡æå®ç°ã\n\nå®¹å¨å¨æè´è´£ç»ä»¶çè£éï¼å®ä¼æç¬¦åä¾èµå³ç³»çå¯¹è±¡éè¿ javabean å±æ§æèæé å½æ°ä¼ éç»éè¦çå¯¹è±¡ã\n\ndi æ¯ç»ä»¶ä¹é´ä¾èµå³ç³»ç±å®¹å¨å¨è¿è¡æå³å®ï¼å½¢è±¡çè¯´ï¼å³ç±å®¹å¨å¨æçå°æä¸ªä¾èµå³ç³»æ³¨å¥å°ç»ä»¶ä¹ä¸­ãä¾èµæ³¨å¥çç®çå¹¶éä¸ºè½¯ä»¶ç³»ç»å¸¦æ¥æ´å¤åè½ï¼èæ¯ä¸ºäºæåç»ä»¶éç¨çé¢çï¼å¹¶ä¸ºç³»ç»æ­å»ºä¸ä¸ªçµæ´»ãå¯æ©å±çå¹³å°ãéè¿ä¾èµæ³¨å¥æºå¶ï¼æä»¬åªéè¦éè¿ç®åçéç½®ï¼èæ éä»»ä½ä»£ç å°±å¯æå®ç®æ éè¦çèµæºï¼å®æèªèº«çä¸å¡é»è¾ï¼èä¸éè¦å³å¿å·ä½çèµæºæ¥èªä½å¤ï¼ç±è°å®ç°ã\n\nçè§£ di çå³é®æ¯ï¼âè°ä¾èµè°ï¼ä¸ºä»ä¹éè¦ä¾èµï¼è°æ³¨å¥è°ï¼æ³¨å¥äºä»ä¹âï¼é£æä»¬æ¥æ·±å¥åæä¸ä¸ï¼\n\n * **è°ä¾èµäºè°ï¼**å½ç¶æ¯åºç¨ç¨åºä¾èµäº ioc å®¹å¨ï¼\n * **ä¸ºä»ä¹éè¦ä¾èµï¼**åºç¨ç¨åºéè¦ ioc å®¹å¨æ¥æä¾å¯¹è±¡éè¦çå¤é¨èµæºï¼\n * **è°æ³¨å¥è°ï¼**å¾ææ¾æ¯ ioc å®¹å¨æ³¨å¥åºç¨ç¨åºæä¸ªå¯¹è±¡ï¼åºç¨ç¨åºä¾èµçå¯¹è±¡ï¼\n * æ³¨å¥äºä»ä¹ï¼å°±æ¯æ³¨å¥æä¸ªå¯¹è±¡æéè¦çå¤é¨èµæºï¼åæ¬å¯¹è±¡ãèµæºãå¸¸éæ°æ®ï¼ã\n\n\n# ioc ä¾èµæ³¨å¥ api\n\n * æ ¹æ® bean åç§°æ³¨å¥\n * æ ¹æ® bean ç±»åæ³¨å¥\n * æ³¨å¥å®¹å¨åå»º bean å¯¹è±¡\n * æ³¨å¥é bean å¯¹è±¡\n * æ³¨å¥ç±»å\n   * å®æ¶æ³¨å¥\n   * å»¶è¿æ³¨å¥\n\n\n# ä¾èµæ³¨å¥æ¨¡å¼\n\nä¾èµæ³¨å¥æ¨¡å¼å¯ä»¥åä¸ºæå¨æ³¨å¥æ¨¡å¼åèªå¨æ³¨å¥æ¨¡å¼ã\n\n\n# æå¨æ³¨å¥æ¨¡å¼\n\næå¨æ³¨å¥æ¨¡å¼ï¼éç½®æèç¼ç¨çæ¹å¼ï¼æåå®ææ³¨å¥è§å\n\n * xml èµæºéç½®åä¿¡æ¯\n * java æ³¨è§£éç½®åä¿¡æ¯\n * api éç½®åä¿¡æ¯\n\n\n# èªå¨æ³¨å¥æ¨¡å¼\n\nèªå¨æ³¨å¥æ¨¡å¼å³èªå¨è£éãèªå¨è£éï¼autowiringï¼æ¯æ spring å®¹å¨å¯ä»¥èªå¨è£é bean ä¹é´çå³ç³»ãspring å¯ä»¥éè¿æ£æ¥ applicationcontext çåå®¹ï¼èªå¨è§£æåä½èï¼å¶ä» beanï¼ã\n\n * èªå¨è£éå¯ä»¥æ¾èåå°å±æ§ææé å½æ°åæ°çéç½®ã\n * éçå¯¹è±¡çåå±ï¼èªå¨è£éå¯ä»¥æ´æ°éç½®ã\n\n> æ³¨ï¼ç±äºèªå¨è£éå­å¨ä¸äºéå¶åä¸è¶³ï¼å®æ¹ä¸æ¨èä½¿ç¨ã\n\n# èªå¨è£éç­ç¥\n\nå½ä½¿ç¨åºäº xml çéç½®åæ°æ®æ¶ï¼å¯ä»¥ä½¿ç¨ <bean/> åç´ ç autowire å±æ§ä¸º bean æå®èªå¨è£éæ¨¡å¼ãèªå¨è£éæ¨¡å¼æä»¥ä¸ç±»åï¼\n\næ¨¡å¼            è¯´æ\nno            é»è®¤å¼ï¼æªæ¿æ´» autowiringï¼éè¦æå¨æå®ä¾èµæ³¨å¥å¯¹è±¡ã\nbyname        æ ¹æ®è¢«æ³¨å¥å±æ§çåç§°ä½ä¸º bean åç§°è¿è¡ä¾èµæ¥æ¾ï¼å¹¶å°å¯¹è±¡è®¾ç½®å°è¯¥å±æ§ã\nbytype        æ ¹æ®è¢«æ³¨å¥å±æ§çç±»åä½ä¸ºä¾èµç±»åè¿è¡æ¥æ¾ï¼å¹¶å°å¯¹è±¡è®¾ç½®å°è¯¥å±æ§ã\nconstructor   ç¹æ® bytype ç±»åï¼ç¨äºæé å¨åæ°ã\n\norg.springframework.beans.factory.config.autowirecapablebeanfactory æ¯ beanfactory çå­æ¥å£ï¼å®æ¯ spring ä¸­ç¨äºå®ç°èªå¨è£éçå®¹å¨ã\n\n# @autowired æ³¨å¥è¿ç¨\n\n * åä¿¡æ¯è§£æ\n * ä¾èµæ¥æ¾\n * ä¾èµæ³¨å¥ï¼å­æ®µãæ¹æ³ï¼\n\n# èªå¨è£éçéå¶åä¸è¶³\n\nèªå¨è£éæä»¥ä¸éå¶åä¸è¶³ï¼\n\n * å±æ§åæé å½æ°åæ°è®¾ç½®ä¸­çæ¾å¼ä¾èµé¡¹ä¼è¦çèªå¨è£éãæ¨ä¸è½èªå¨è£éç®åå±æ§ï¼ä¾å¦åºç¡æ°æ®ç±»åãå­ç¬¦ä¸²åç±»ï¼ä»¥åæ­¤ç±»ç®åå±æ§çæ°ç»ï¼ã\n * èªå¨è£éä¸å¦æ¾å¼è£éç²¾åãspring ä¼å°½éé¿åçæµå¯è½å­å¨æ­§ä¹çç»æã\n * spring å®¹å¨çæææ¡£çå·¥å·å¯è½æ æ³è§£æèªå¨è£éä¿¡æ¯ã\n * å¦æåä¸ç±»åå­å¨å¤ä¸ª bean æ¶ï¼èªå¨è£éæ¶ä¼å­å¨æ­§ä¹ãå®¹å¨åçå¤ä¸ª bean å®ä¹å¯è½ä¸è¦èªå¨è£éç setter æ¹æ³ææé å½æ°åæ°æå®çç±»åå¹éãå¯¹äºæ°ç»ãéåæ map å®ä¾ï¼è¿ä¸ä¸å®æ¯é®é¢ãä½æ¯ï¼å¯¹äºææåå¼çä¾èµé¡¹ï¼å¦ææ²¡æå¯ä¸ç bean å®ä¹å¯ç¨ï¼åä¼å¼åå¼å¸¸ã\n\n> èªå¨è£éçéå¶åä¸è¶³ï¼è¯¦æå¯ä»¥åèå®æ¹ææ¡£ï¼limitations and disadvantages of autowiring å°è\n\n\n# ä¾èµæ³¨å¥æ¹å¼\n\nä¾èµæ³¨å¥æå¦ä¸æ¹å¼ï¼\n\nä¾èµæ³¨å¥æ¹å¼        éç½®åæ°æ®ä¸¾ä¾\nsetter æ¹æ³æ³¨å¥   <proeprty name="user" ref="userbean"/>\næé å¨æ³¨å¥         <constructor-arg name="user" ref="userbean" />\nå­æ®µæ³¨å¥          @autowired user user;\næ¹æ³æ³¨å¥          @autowired public void user(user user) { ... }\næ¥å£åè°æ³¨å¥        class mybean implements beanfactoryaware { ... }\n\n\n# æé å¨æ³¨å¥\n\n * æå¨æ¨¡å¼\n   * xml éç½®åä¿¡æ¯\n   * æ³¨è§£éç½®åä¿¡æ¯\n   * java éç½®åä¿¡æ¯\n * èªå¨æ¨¡å¼\n   * constructor\n\næé å¨æ³¨å¥æ¯éè¿å®¹å¨è°ç¨å·æå¤ä¸ªåæ°çæé å½æ°æ¥å®æçï¼æ¯ä¸ªåæ°ä»£è¡¨ä¸ä¸ªä¾èµé¡¹ãè°ç¨å¸¦æç¹å®åæ°çéæå·¥åæ¹æ³æ¥æé  bean å ä¹æ¯ç­ä»·çï¼å¹¶ä¸æ¬æ¬¡è®¨è®ºå¯¹æé å½æ°åéæå·¥åæ¹æ³çåæ°è¿è¡äºç±»ä¼¼çå¤çã\n\nä¸é¢æ¯ä¸ä¸ªæé å¨æ³¨å¥ç¤ºä¾ï¼\n\npublic class simplemovielister {\n\n    // the simplemovielister has a dependency on a moviefinder\n    private final moviefinder moviefinder;\n\n    // a constructor so that the spring container can inject a moviefinder\n    public simplemovielister(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // business logic that actually uses the injected moviefinder is omitted...\n}\n\n\næé å½æ°åæ°è§£æå¹ééè¿ä½¿ç¨åæ°çç±»åè¿è¡ãå¦æ bean å®ä¹çæé å½æ°åæ°ä¸­ä¸å­å¨æ½å¨çæ­§ä¹ï¼åå¨ bean å®ä¹ä¸­å®ä¹æé å½æ°åæ°çé¡ºåºæ¯å¨å®ä¾å bean æ¶å°è¿äºåæ°æä¾ç»éå½æé å½æ°çé¡ºåºã\n\npackage x.y;\n\npublic class thingone {\n\n    public thingone(thingtwo thingtwo, thingthree thingthree) {\n        // ...\n    }\n}\n\n\nåè®¾ thingtwo å thingthree ç±»æ²¡æç»§æ¿å³ç³»ï¼åä¸å­å¨æ½å¨çæ­§ä¹ãå æ­¤ï¼ä»¥ä¸éç½®å·¥ä½æ­£å¸¸ï¼æ¨æ éå¨ <constructor-arg/> åç´ ä¸­æ¾å¼æå®æé å½æ°åæ°ç´¢å¼æç±»åã\n\n<beans>\n    <bean id="beanone" class="x.y.thingone">\n        <constructor-arg ref="beantwo"/>\n        <constructor-arg ref="beanthree"/>\n    </bean>\n\n    <bean id="beantwo" class="x.y.thingtwo"/>\n\n    <bean id="beanthree" class="x.y.thingthree"/>\n</beans>\n\n\nå½å¼ç¨å¦ä¸ä¸ª bean æ¶ï¼ç±»åæ¯å·²ç¥çï¼å¹¶ä¸å¯ä»¥åçå¹éï¼å°±ååé¢çç¤ºä¾ä¸æ ·ï¼ãå½ä½¿ç¨ç®åç±»åæ¶ï¼ä¾å¦ <value>true</value> ï¼spring æ æ³ç¡®å® value çç±»åï¼å æ­¤æ æ³å¨æ²¡æå¸®å©çæåµä¸æç±»åå¹éãèèä»¥ä¸ç±»ï¼\n\npackage examples;\n\npublic class examplebean {\n\n    // number of years to calculate the ultimate answer\n    private final int years;\n\n    // the answer to life, the universe, and everything\n    private final string ultimateanswer;\n\n    public examplebean(int years, string ultimateanswer) {\n        this.years = years;\n        this.ultimateanswer = ultimateanswer;\n    }\n}\n\n\næé å½æ°åæ°ç±»åå¹é\n\nå¨ä¸è¿°åºæ¯ä¸­ï¼å¦ææ¨ä½¿ç¨ type å±æ§æ¾å¼æå®æé å½æ°åæ°çç±»åï¼åå®¹å¨å¯ä»¥ä½¿ç¨ç®åç±»åçç±»åå¹éï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg type="int" value="7500000"/>\n    <constructor-arg type="java.lang.string" value="42"/>\n</bean>\n\n\næé å½æ°åæ°ç´¢å¼å¹é\n\nå¯ä»¥ä½¿ç¨ index å±æ§æ¾å¼æå®æé å½æ°åæ°çç´¢å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤º\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg index="0" value="7500000"/>\n    <constructor-arg index="1" value="42"/>\n</bean>\n\n\næé å½æ°åæ°åç§°å¹é\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg name="years" value="7500000"/>\n    <constructor-arg name="ultimateanswer" value="42"/>\n</bean>\n\n\nå¯ä»¥ä½¿ç¨ @constructorproperties æ¾å¼å½åæé å½æ°åæ°ã\n\npackage examples;\n\npublic class examplebean {\n\n    // fields omitted\n\n    @constructorproperties({"years", "ultimateanswer"})\n    public examplebean(int years, string ultimateanswer) {\n        this.years = years;\n        this.ultimateanswer = ultimateanswer;\n    }\n}\n\n\n\n# setter æ¹æ³æ³¨å¥\n\n * æå¨æ¨¡å¼\n   * xml éç½®åä¿¡æ¯\n   * æ³¨è§£éç½®åä¿¡æ¯\n   * java éç½®åä¿¡æ¯\n * èªå¨æ¨¡å¼\n   * byname\n   * bytype\n\nsetter æ¹æ³æ³¨å¥æ¯éè¿å®¹å¨å¨è°ç¨æ åæ°æé å½æ°ææ åæ°éæå·¥åæ¹æ³æ¥å®ä¾å bean åè°ç¨ bean ä¸ç setter æ¹æ³æ¥å®æçã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªåªè½éè¿ä½¿ç¨çº¯ setter æ³¨å¥è¿è¡ä¾èµæ³¨å¥çç±»ã\n\npublic class simplemovielister {\n\n    // the simplemovielister has a dependency on the moviefinder\n    private moviefinder moviefinder;\n\n    // a setter method so that the spring container can inject a moviefinder\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // business logic that actually uses the injected moviefinder is omitted...\n}\n\n\nå¨ spring ä¸­ï¼å¯ä»¥æ··åä½¿ç¨æé å¨æ³¨å¥å setter æ¹æ³æ³¨å¥ãå»ºè®®å°æé å¨æ³¨å¥ç¨äºå¼ºå¶ä¾èµé¡¹ï¼å¹¶å° setter æ¹æ³æ³¨å¥æéç½®æ¹æ³ç¨äºå¯éä¾èµé¡¹ãéè¦æ³¨æçæ¯ï¼å¨ setter æ¹æ³ä¸ä½¿ç¨ @required æ³¨è§£å¯ç¨äºä½¿å±æ§æä¸ºå¿éçä¾èµé¡¹ï¼ç¶èï¼æ´å»ºè®®ä½¿ç¨æé å¨æ³¨å¥æ¥å®æè¿é¡¹å·¥ä½ã\n\n\n# å­æ®µæ³¨å¥\n\næå¨æ¨¡å¼ï¼java æ³¨è§£éç½®åä¿¡æ¯ï¼\n\n * @autowired\n * @resource\n * @injectï¼å¯éï¼\n\n\n# æ¹æ³æ³¨å¥\n\næå¨æ¨¡å¼ï¼java æ³¨è§£éç½®åä¿¡æ¯ï¼\n\n * @autowired\n * @resource\n * @injectï¼å¯éï¼\n * @bean\n\n\n# æ¥å£åè°æ³¨å¥\n\naware ç³»åæ¥å£åè°\n\nå§å»ºæ¥å£                             è¯´æ\nbeanfactoryaware                 è·å ioc å®¹å¨- beanfactory\napplicationcontextaware          è·å spring åºç¨ä¸ä¸æ- applicationcontext å¯¹è±¡\nenvironmentaware                 è·å environment å¯¹è±¡\nresourceloaderaware              è·åèµæºå è½½å¨å¯¹è±¡- resourceloader\nbeanclassloaderaware             è·åå è½½å½å bean class ç classloader\nbeannameaware                    è·åå½å bean çåç§°\nmessagesourceaware               è·å messagesource å¯¹è±¡ï¼ç¨äº spring å½éå\napplicationeventpublisheraware   è·å applicationeventpublishaware å¯¹è±¡ï¼ç¨äº spring äºä»¶\nembeddedvalueresolveraware       è·å stringvalueresolver å¯¹è±¡ï¼ç¨äºå ä½ç¬¦å¤ç\n\n\n# ä¾èµæ³¨å¥éå\n\n * ä½ä¾èµï¼æé å¨æ³¨å¥\n * å¤ä¾èµï¼setter æ¹æ³æ³¨å¥\n * ä¾¿å©æ§ï¼å­æ®µæ³¨å¥\n * å£°æç±»ï¼æ¹æ³æ³¨å¥\n\n\n# éå®æ³¨å¥åå»¶è¿æ³¨å¥\n\n\n# éå®æ³¨å¥\n\n * ä½¿ç¨ @qualifier æ³¨è§£éå®\n   * éè¿ bean åç§°éå®\n   * éè¿åç»éå®\n * éè¿ @qualifier æ³¨è§£æ©å±éå®\n   * èªå®ä¹æ³¨è§£ï¼å¦ spring cloud ç @loadbalanced\n\n\n# å»¶è¿æ³¨å¥\n\n * ä½¿ç¨ objectfactory\n * ä½¿ç¨ objectproviderï¼æ¨èï¼\n\n\n# ä¾èµæ³¨å¥æ°æ®ç±»å\n\n\n# åºç¡ç±»å\n\n * åºç¡æ°æ®ç±»åï¼booleanãbyteãcharãshortãintãfloatãlongãdouble\n * æ éç±»åï¼numberãcharacterãbooleanãenumãlocaleãcharsetãcurrencyãpropertiesãuuid\n * å¸¸è§ç±»åï¼objectãstringãtimezoneãcalendarãoptional ç­\n * spring ç±»åï¼resourceãinputsourceãformatter ç­ã\n\n\n# éåç±»å\n\næ°ç»ç±»åï¼åºç¡æ°æ®ç±»åãæ éç±»åãå¸¸è§ç±»åãstring ç±»åçæ°ç»\n\néåç±»åï¼\n\n * collectionï¼listãset\n * mapï¼properties\n\n\n# ä¾èµå¤çè¿ç¨\n\nå¥å£ï¼defaultlistablebeanfactory#resolvedependency\n\nä¾èµæè¿°ç¬¦ï¼dependencydescriptor\n\nèªå®ä¹ç»å®åéå¯¹è±¡å¤çå¨ï¼autowirecandidateresolver\n\n@autowiredã@valueã@javax.inject.inject å¤çå¨ï¼autowiredannotationbeanpostprocessor\n\néç¨æ³¨è§£å¤çå¨ï¼commonannotationbeanpostprocessor\n\n * æ³¨å¥æ³¨è§£\n   * javax.xml.ws.webserviceref\n   * javax.ejb.ejb\n   * javax.annotation.resources\n * çå½å¨ææ³¨è§£\n   * javax.annotation.postconstruct\n   * javax.annotation.predestroy\n\nèªå®ä¹ä¾èµæ³¨å¥æ³¨è§£ï¼\n\n * çå½å¨æå¤ç\n   * instantiationawarebeanpostprocessor\n   * mergedbeandefinitionpostprocessor\n * åæ°æ®\n   * injectionmetadata\n   * injectionmetadata.injectedelement\n\n\n# ä¾èµæ¥æ¾ vs. ä¾èµæ³¨å¥\n\nç±»å     ä¾èµå¤ç   å®ç°å¤æåº¦   ä»£ç ä¾µå¥æ§    api ä¾èµæ§     å¯è¯»æ§\nä¾èµæ¥æ¾   ä¸»å¨     ç¸å¯¹ç¹ç    ä¾µå¥ä¸å¡é»è¾   ä¾èµå®¹å¨ api    è¯å¥½\nä¾èµæ³¨å¥   è¢«å¨     ç¸å¯¹ä¾¿å©    ä½ä¾µå¥æ§     ä¸ä¾èµå®¹å¨ api   ä¸è¬\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring IoC ä¾èµæ¥æº",frontmatter:{title:"Spring IoC ä¾èµæ¥æº",date:"2022-12-20T20:33:51.000Z",order:5,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","IOC","ä¾èµæ³¨å¥"],permalink:"/pages/a5f257/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/05.SpringIoC%E4%BE%9D%E8%B5%96%E6%9D%A5%E6%BA%90.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/05.SpringIoCä¾èµæ¥æº.md",key:"v-b5170794",path:"/pages/a5f257/",headers:[{level:2,title:"ä¾èµæ¥æ¾çæ¥æº",slug:"ä¾èµæ¥æ¾çæ¥æº",normalizedTitle:"ä¾èµæ¥æ¾çæ¥æº",charIndex:22},{level:2,title:"ä¾èµæ³¨å¥çæ¥æº",slug:"ä¾èµæ³¨å¥çæ¥æº",normalizedTitle:"ä¾èµæ³¨å¥çæ¥æº",charIndex:1569},{level:2,title:"Spring å®¹å¨ç®¡çåæ¸¸ç¦»å¯¹è±¡",slug:"spring-å®¹å¨ç®¡çåæ¸¸ç¦»å¯¹è±¡",normalizedTitle:"spring å®¹å¨ç®¡çåæ¸¸ç¦»å¯¹è±¡",charIndex:1832},{level:2,title:"Spring BeanDefinition ä½ä¸ºä¾èµæ¥æº",slug:"spring-beandefinition-ä½ä¸ºä¾èµæ¥æº",normalizedTitle:"spring beandefinition ä½ä¸ºä¾èµæ¥æº",charIndex:2116},{level:2,title:"åä¾å¯¹è±¡ä½ä¸ºä¾èµæ¥æº",slug:"åä¾å¯¹è±¡ä½ä¸ºä¾èµæ¥æº",normalizedTitle:"åä¾å¯¹è±¡ä½ä¸ºä¾èµæ¥æº",charIndex:2261},{level:2,title:"é Spring å¯¹è±¡å®¹å¨ç®¡çå¯¹è±¡ä½ä¸ºä¾èµæ¥æº",slug:"é-spring-å¯¹è±¡å®¹å¨ç®¡çå¯¹è±¡ä½ä¸ºä¾èµæ¥æº",normalizedTitle:"é spring å¯¹è±¡å®¹å¨ç®¡çå¯¹è±¡ä½ä¸ºä¾èµæ¥æº",charIndex:2402},{level:2,title:"å¤é¨åéç½®ä½ä¸ºä¾èµæ¥æº",slug:"å¤é¨åéç½®ä½ä¸ºä¾èµæ¥æº",normalizedTitle:"å¤é¨åéç½®ä½ä¸ºä¾èµæ¥æº",charIndex:2559},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:2661},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:3028}],headersStr:"ä¾èµæ¥æ¾çæ¥æº ä¾èµæ³¨å¥çæ¥æº Spring å®¹å¨ç®¡çåæ¸¸ç¦»å¯¹è±¡ Spring BeanDefinition ä½ä¸ºä¾èµæ¥æº åä¾å¯¹è±¡ä½ä¸ºä¾èµæ¥æº é Spring å¯¹è±¡å®¹å¨ç®¡çå¯¹è±¡ä½ä¸ºä¾èµæ¥æº å¤é¨åéç½®ä½ä¸ºä¾èµæ¥æº é®é¢ åèèµæ",content:'# Spring IoC ä¾èµæ¥æº\n\n\n# ä¾èµæ¥æ¾çæ¥æº\n\næ¥æ¾æ¥æº\n\næ¥æº                      éç½®åæ°æ®\nSpring BeanDefinition   <bean id ="user" class="xxx.xxx.User">\n                        @Bean public User user() {...}\n                        BeanDefinitionBuilder\nåä¾å¯¹è±¡                    API å®ç°\n\nSpring å§å»º BeanDefintion\n\nBEAN åç§°                                                                           BEAN å®ä¾                                   ä½¿ç¨åºæ¯\norg.springframework.context.annotation.internalConfigurationAnnotationProcessor   ConfigurationClassPostProcessor å¯¹è±¡        å¤ç Spring éç½®ç±»\norg.springframework.context.annotation.internalAutowiredAnnotationProcessor       AutowiredAnnotationBeanPostProcessor å¯¹è±¡   å¤ç @Autowired ä»¥å @Value æ³¨è§£\norg.springframework.context.annotation.internalCommonAnnotationProcessor          CommonAnnotationBeanPostProcessor å¯¹è±¡      ï¼æ¡ä»¶æ¿æ´»ï¼å¤ç JSR-250 æ³¨è§£ï¼å¦ @PostConstruct ç­\norg.springframework.context.event.internalEventListenerProcessor                  EventListenerMethodProcessor å¯¹è±¡           å¤çæ æ³¨ @EventListener ç Spring äºä»¶çå¬æ¹æ³\n\nSpring å§å»ºåä¾å¯¹è±¡\n\nBEAN åç§°                       BEAN å®ä¾                          ä½¿ç¨åºæ¯\nenvironment                   Environment å¯¹è±¡                   å¤é¨åéç½®ä»¥å Profiles\nsystemProperties              java.util.Properties å¯¹è±¡          Java ç³»ç»å±æ§\nsystemEnvironment             java.util.Map å¯¹è±¡                 æä½ç³»ç»ç¯å¢åé\nmessageSource                 MessageSource å¯¹è±¡                 å½éåææ¡\nlifecycleProcessor            LifecycleProcessor å¯¹è±¡            Lifecycle Bean å¤çå¨\napplicationEventMulticaster   ApplicationEventMulticaster å¯¹è±¡   Spring äºä»¶å¹¿æ­å¨\n\n\n# ä¾èµæ³¨å¥çæ¥æº\n\næ¥æº                      éç½®åæ°æ®\nSpring BeanDefinition   <bean id ="user" class="xxx.xxx.User">\n                        @Bean public User user() {...}\n                        BeanDefinitionBuilder\nåä¾å¯¹è±¡                    API å®ç°\né Spring å®¹å¨ç®¡çå¯¹è±¡         \n\n\n# Spring å®¹å¨ç®¡çåæ¸¸ç¦»å¯¹è±¡\n\næ¥æº                      SPRING BEAN å¯¹è±¡   çå½å¨æç®¡ç   éç½®åä¿¡æ¯   ä½¿ç¨åºæ¯\nSpring BeanDefinition   æ¯                æ¯        æ       ä¾èµæ¥æ¾ãä¾èµæ³¨å¥\nåä½å¯¹è±¡                    æ¯                å¦        æ        ä¾èµæ¥æ¾ãä¾èµæ³¨å¥\nResolvable Dependency   å¦                å¦        æ        ä¾èµæ³¨å¥\n\n\n# Spring BeanDefinition ä½ä¸ºä¾èµæ¥æº\n\n * åæ°æ®ï¼BeanDefinition\n * æ³¨åï¼BeanDefinitionRegistry#registerBeanDefinition\n * ç±»åï¼å»¶è¿åéå»¶è¿\n * é¡ºåºï¼Bean çå½å¨æé¡ºåºæç§æ³¨åé¡ºåº\n\n\n# åä¾å¯¹è±¡ä½ä¸ºä¾èµæ¥æº\n\n * è¦ç´ \n   * æ¥æºï¼å¤é¨æ®é Java å¯¹è±¡ï¼ä¸ä¸å®æ¯ POJOï¼\n   * æ³¨åï¼SingletonBeanRegistry#registerSingleton\n * éå¶\n   * æ çå½å¨æç®¡ç\n   * æ æ³å®ç°å»¶è¿åå§å Bean\n\n\n# é Spring å¯¹è±¡å®¹å¨ç®¡çå¯¹è±¡ä½ä¸ºä¾èµæ¥æº\n\n * è¦ç´ \n   * æ³¨åï¼ConfigurableListableBeanFactory#registerResolvableDependency\n * éå¶\n   * æ çå½å¨æç®¡ç\n   * æ æ³å®ç°å»¶è¿åå§å Bean\n   * æ æ³éè¿ä¾èµæ¥æ¾\n\n\n# å¤é¨åéç½®ä½ä¸ºä¾èµæ¥æº\n\n * è¦ç´ \n   * ç±»åï¼éå¸¸è§ Spring å¯¹è±¡ä¾èµæ¥æº\n * éå¶\n   * æ çå½å¨æç®¡ç\n   * æ æ³å®ç°å»¶è¿åå§å Bean\n   * æ æ³éè¿ä¾èµæ¥æ¾\n\n\n# é®é¢\n\næ³¨å¥åæ¥æ¾çä¾èµæ¥æºæ¯å¦ç¸åï¼\n\nå¦ï¼ä¾èµæ¥æ¾çæ¥æºä»éäº Spring BeanDefinition ä»¥ååä¾å¯¹è±¡ï¼èä¾èµæ³¨å¥çæ¥æºè¿åæ¬ Resolvable Dependency ä»¥å @Value ææ æ³¨çå¤é¨åéç½®\n\nåä¾å¯¹è±¡è½å¨ IoC å®¹å¨å¯å¨åæ³¨ååï¼\n\nå¯ä»¥çï¼åä¾å¯¹è±¡çæ³¨åä¸ BeanDefinition ä¸åï¼BeanDefinition ä¼è¢« ConfigurableListableBeanFactory#freezeConfiguration() æ¹æ³å½±åï¼ä»èå»ç»æ³¨åï¼åä¾å¯¹è±¡åæ²¡æè¿ä¸ªéå¶ã\n\nSpring ä¾èµæ³¨å¥çæ¥æºæåªäºï¼\n\n * Spring BeanDefinition\n * åä¾å¯¹è±¡\n * Resolvable Dependency\n * @Value å¤é¨åéç½®\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring ioc ä¾èµæ¥æº\n\n\n# ä¾èµæ¥æ¾çæ¥æº\n\næ¥æ¾æ¥æº\n\næ¥æº                      éç½®åæ°æ®\nspring beandefinition   <bean id ="user" class="xxx.xxx.user">\n                        @bean public user user() {...}\n                        beandefinitionbuilder\nåä¾å¯¹è±¡                    api å®ç°\n\nspring å§å»º beandefintion\n\nbean åç§°                                                                           bean å®ä¾                                   ä½¿ç¨åºæ¯\norg.springframework.context.annotation.internalconfigurationannotationprocessor   configurationclasspostprocessor å¯¹è±¡        å¤ç spring éç½®ç±»\norg.springframework.context.annotation.internalautowiredannotationprocessor       autowiredannotationbeanpostprocessor å¯¹è±¡   å¤ç @autowired ä»¥å @value æ³¨è§£\norg.springframework.context.annotation.internalcommonannotationprocessor          commonannotationbeanpostprocessor å¯¹è±¡      ï¼æ¡ä»¶æ¿æ´»ï¼å¤ç jsr-250 æ³¨è§£ï¼å¦ @postconstruct ç­\norg.springframework.context.event.internaleventlistenerprocessor                  eventlistenermethodprocessor å¯¹è±¡           å¤çæ æ³¨ @eventlistener ç spring äºä»¶çå¬æ¹æ³\n\nspring å§å»ºåä¾å¯¹è±¡\n\nbean åç§°                       bean å®ä¾                          ä½¿ç¨åºæ¯\nenvironment                   environment å¯¹è±¡                   å¤é¨åéç½®ä»¥å profiles\nsystemproperties              java.util.properties å¯¹è±¡          java ç³»ç»å±æ§\nsystemenvironment             java.util.map å¯¹è±¡                 æä½ç³»ç»ç¯å¢åé\nmessagesource                 messagesource å¯¹è±¡                 å½éåææ¡\nlifecycleprocessor            lifecycleprocessor å¯¹è±¡            lifecycle bean å¤çå¨\napplicationeventmulticaster   applicationeventmulticaster å¯¹è±¡   spring äºä»¶å¹¿æ­å¨\n\n\n# ä¾èµæ³¨å¥çæ¥æº\n\næ¥æº                      éç½®åæ°æ®\nspring beandefinition   <bean id ="user" class="xxx.xxx.user">\n                        @bean public user user() {...}\n                        beandefinitionbuilder\nåä¾å¯¹è±¡                    api å®ç°\né spring å®¹å¨ç®¡çå¯¹è±¡         \n\n\n# spring å®¹å¨ç®¡çåæ¸¸ç¦»å¯¹è±¡\n\næ¥æº                      spring bean å¯¹è±¡   çå½å¨æç®¡ç   éç½®åä¿¡æ¯   ä½¿ç¨åºæ¯\nspring beandefinition   æ¯                æ¯        æ       ä¾èµæ¥æ¾ãä¾èµæ³¨å¥\nåä½å¯¹è±¡                    æ¯                å¦        æ        ä¾èµæ¥æ¾ãä¾èµæ³¨å¥\nresolvable dependency   å¦                å¦        æ        ä¾èµæ³¨å¥\n\n\n# spring beandefinition ä½ä¸ºä¾èµæ¥æº\n\n * åæ°æ®ï¼beandefinition\n * æ³¨åï¼beandefinitionregistry#registerbeandefinition\n * ç±»åï¼å»¶è¿åéå»¶è¿\n * é¡ºåºï¼bean çå½å¨æé¡ºåºæç§æ³¨åé¡ºåº\n\n\n# åä¾å¯¹è±¡ä½ä¸ºä¾èµæ¥æº\n\n * è¦ç´ \n   * æ¥æºï¼å¤é¨æ®é java å¯¹è±¡ï¼ä¸ä¸å®æ¯ pojoï¼\n   * æ³¨åï¼singletonbeanregistry#registersingleton\n * éå¶\n   * æ çå½å¨æç®¡ç\n   * æ æ³å®ç°å»¶è¿åå§å bean\n\n\n# é spring å¯¹è±¡å®¹å¨ç®¡çå¯¹è±¡ä½ä¸ºä¾èµæ¥æº\n\n * è¦ç´ \n   * æ³¨åï¼configurablelistablebeanfactory#registerresolvabledependency\n * éå¶\n   * æ çå½å¨æç®¡ç\n   * æ æ³å®ç°å»¶è¿åå§å bean\n   * æ æ³éè¿ä¾èµæ¥æ¾\n\n\n# å¤é¨åéç½®ä½ä¸ºä¾èµæ¥æº\n\n * è¦ç´ \n   * ç±»åï¼éå¸¸è§ spring å¯¹è±¡ä¾èµæ¥æº\n * éå¶\n   * æ çå½å¨æç®¡ç\n   * æ æ³å®ç°å»¶è¿åå§å bean\n   * æ æ³éè¿ä¾èµæ¥æ¾\n\n\n# é®é¢\n\næ³¨å¥åæ¥æ¾çä¾èµæ¥æºæ¯å¦ç¸åï¼\n\nå¦ï¼ä¾èµæ¥æ¾çæ¥æºä»éäº spring beandefinition ä»¥ååä¾å¯¹è±¡ï¼èä¾èµæ³¨å¥çæ¥æºè¿åæ¬ resolvable dependency ä»¥å @value ææ æ³¨çå¤é¨åéç½®\n\nåä¾å¯¹è±¡è½å¨ ioc å®¹å¨å¯å¨åæ³¨ååï¼\n\nå¯ä»¥çï¼åä¾å¯¹è±¡çæ³¨åä¸ beandefinition ä¸åï¼beandefinition ä¼è¢« configurablelistablebeanfactory#freezeconfiguration() æ¹æ³å½±åï¼ä»èå»ç»æ³¨åï¼åä¾å¯¹è±¡åæ²¡æè¿ä¸ªéå¶ã\n\nspring ä¾èµæ³¨å¥çæ¥æºæåªäºï¼\n\n * spring beandefinition\n * åä¾å¯¹è±¡\n * resolvable dependency\n * @value å¤é¨åéç½®\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Bean ä½ç¨å",frontmatter:{title:"Spring Bean ä½ç¨å",date:"2022-12-21T11:42:00.000Z",order:6,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","Bean"],permalink:"/pages/8289f5/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/06.SpringBean%E4%BD%9C%E7%94%A8%E5%9F%9F.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/06.SpringBeanä½ç¨å.md",key:"v-359ace56",path:"/pages/8289f5/",headers:[{level:2,title:"Spring Bean ä½ç¨å",slug:"spring-bean-ä½ç¨å-2",normalizedTitle:"spring bean ä½ç¨å",charIndex:2},{level:2,title:'"singleton" Bean ä½ç¨å',slug:"singleton-bean-ä½ç¨å",normalizedTitle:"&quot;singleton&quot; bean ä½ç¨å",charIndex:null},{level:2,title:'"prototype" Bean ä½ç¨å',slug:"prototype-bean-ä½ç¨å",normalizedTitle:"&quot;prototype&quot; bean ä½ç¨å",charIndex:null},{level:2,title:'"request" Bean ä½ç¨å',slug:"request-bean-ä½ç¨å",normalizedTitle:"&quot;request&quot; bean ä½ç¨å",charIndex:null},{level:2,title:'"session" Bean ä½ç¨å',slug:"session-bean-ä½ç¨å",normalizedTitle:"&quot;session&quot; bean ä½ç¨å",charIndex:null},{level:2,title:'"application" Bean ä½ç¨å',slug:"application-bean-ä½ç¨å",normalizedTitle:"&quot;application&quot; bean ä½ç¨å",charIndex:null},{level:2,title:"èªå®ä¹ Bean ä½ç¨å",slug:"èªå®ä¹-bean-ä½ç¨å",normalizedTitle:"èªå®ä¹ bean ä½ç¨å",charIndex:1033},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:1452},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:1716}],headersStr:'Spring Bean ä½ç¨å "singleton" Bean ä½ç¨å "prototype" Bean ä½ç¨å "request" Bean ä½ç¨å "session" Bean ä½ç¨å "application" Bean ä½ç¨å èªå®ä¹ Bean ä½ç¨å é®é¢ åèèµæ',content:'# Spring Bean ä½ç¨å\n\n\n# Spring Bean ä½ç¨å\n\næ¥æº            è¯´æ\nsingleton     é»è®¤ Spring Bean ä½ç¨åï¼ä¸ä¸ª BeanFactory æä¸ä»æä¸ä¸ªå®ä¾\nprototype     ååä½ç¨åï¼æ¯æ¬¡ä¾èµæ¥æ¾åä¾èµæ³¨å¥çææ° Bean å¯¹è±¡\nrequest       å° Spring Bean å­å¨å¨ ServletRequest ä¸ä¸æä¸­\nsession       å° Spring Bean å­å¨å¨ HttpSession ä¸­\napplication   å° Spring Bean å­å¨å¨ ServletContext ä¸­\n\n\n# "singleton" Bean ä½ç¨å\n\n\n\n\n# "prototype" Bean ä½ç¨å\n\nSpring å®¹å¨æ²¡æåæ³ç®¡ç prototype Bean çå®æ´çå½å¨æï¼ä¹æ²¡æåæ³è®°å½å®ä¾çå­å¨ãéæ¯åè°æ¹æ³å°ä¸ä¼æ§è¡ï¼å¯ä»¥å©ç¨ BeanPostProcessor è¿è¡æ¸æ«å·¥ä½ã\n\n\n# "request" Bean ä½ç¨å\n\n * éç½®\n   * XML - <bean class="..." scope = ârequest" />\n   * Java æ³¨è§£ - @RequestScope æ @Scope(WebApplicationContext.SCOPE_REQUEST)\n * å®ç°\n   * API - RequestScope\n\n\n# "session" Bean ä½ç¨å\n\n * éç½®\n   * XML - <bean class="..." scope = âsession" />\n   * Java æ³¨è§£ - @SessionScope æ @Scope(WebApplicationContext.SCOPE_SESSION)\n * å®ç°\n   * API - SessionScope\n\n\n# "application" Bean ä½ç¨å\n\n * éç½®\n   * XML - <bean class="..." scope = âapplication" />\n   * Java æ³¨è§£ - @ApplicationScope æ @Scope(WebApplicationContext.SCOPE_APPLICATION)\n * å®ç°\n   * API - ServletContextScope\n\n\n# èªå®ä¹ Bean ä½ç¨å\n\n * å®ç° Scope\n   \n   * org.springframework.beans.factory.config.Scope\n\n * æ³¨å Scope\n   \n   * API - org.springframework.beans.factory.config.ConfigurableBeanFactory#registerScope\n\n * éç½®\n   \n   <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">\n     <property name="scopes">\n       <map>\n         <entry key="...">\n         </entry>\n       </map>\n     </property>\n   </bean>\n   \n\n\n# é®é¢\n\nSpring å§å»ºç Bean ä½ç¨åæå ç§ï¼\n\nsingletonãprototypeãrequestãsessionãapplication ä»¥å websocket\n\nsingleton Bean æ¯å¦å¨ä¸ä¸ªåºç¨æ¯å¯ä¸çï¼\n\nå¦ãsingleton bean ä»å¨å½å Spring IoC å®¹å¨ï¼BeanFactoryï¼ä¸­æ¯åä¾å¯¹è±¡ã\n\napplication Bean æ¯å¦å¯ä»¥è¢«å¶ä»æ¹æ¡æ¿ä»£ï¼\n\nå¯ä»¥çï¼å®éä¸ï¼âapplicationâ Bean ä¸âsingletonâ Bean æ²¡ææ¬è´¨åºå«\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring bean ä½ç¨å\n\n\n# spring bean ä½ç¨å\n\næ¥æº            è¯´æ\nsingleton     é»è®¤ spring bean ä½ç¨åï¼ä¸ä¸ª beanfactory æä¸ä»æä¸ä¸ªå®ä¾\nprototype     ååä½ç¨åï¼æ¯æ¬¡ä¾èµæ¥æ¾åä¾èµæ³¨å¥çææ° bean å¯¹è±¡\nrequest       å° spring bean å­å¨å¨ servletrequest ä¸ä¸æä¸­\nsession       å° spring bean å­å¨å¨ httpsession ä¸­\napplication   å° spring bean å­å¨å¨ servletcontext ä¸­\n\n\n# "singleton" bean ä½ç¨å\n\n\n\n\n# "prototype" bean ä½ç¨å\n\nspring å®¹å¨æ²¡æåæ³ç®¡ç prototype bean çå®æ´çå½å¨æï¼ä¹æ²¡æåæ³è®°å½å®ä¾çå­å¨ãéæ¯åè°æ¹æ³å°ä¸ä¼æ§è¡ï¼å¯ä»¥å©ç¨ beanpostprocessor è¿è¡æ¸æ«å·¥ä½ã\n\n\n# "request" bean ä½ç¨å\n\n * éç½®\n   * xml - <bean class="..." scope = ârequest" />\n   * java æ³¨è§£ - @requestscope æ @scope(webapplicationcontext.scope_request)\n * å®ç°\n   * api - requestscope\n\n\n# "session" bean ä½ç¨å\n\n * éç½®\n   * xml - <bean class="..." scope = âsession" />\n   * java æ³¨è§£ - @sessionscope æ @scope(webapplicationcontext.scope_session)\n * å®ç°\n   * api - sessionscope\n\n\n# "application" bean ä½ç¨å\n\n * éç½®\n   * xml - <bean class="..." scope = âapplication" />\n   * java æ³¨è§£ - @applicationscope æ @scope(webapplicationcontext.scope_application)\n * å®ç°\n   * api - servletcontextscope\n\n\n# èªå®ä¹ bean ä½ç¨å\n\n * å®ç° scope\n   \n   * org.springframework.beans.factory.config.scope\n\n * æ³¨å scope\n   \n   * api - org.springframework.beans.factory.config.configurablebeanfactory#registerscope\n\n * éç½®\n   \n   <bean class="org.springframework.beans.factory.config.customscopeconfigurer">\n     <property name="scopes">\n       <map>\n         <entry key="...">\n         </entry>\n       </map>\n     </property>\n   </bean>\n   \n\n\n# é®é¢\n\nspring å§å»ºç bean ä½ç¨åæå ç§ï¼\n\nsingletonãprototypeãrequestãsessionãapplication ä»¥å websocket\n\nsingleton bean æ¯å¦å¨ä¸ä¸ªåºç¨æ¯å¯ä¸çï¼\n\nå¦ãsingleton bean ä»å¨å½å spring ioc å®¹å¨ï¼beanfactoryï¼ä¸­æ¯åä¾å¯¹è±¡ã\n\napplication bean æ¯å¦å¯ä»¥è¢«å¶ä»æ¹æ¡æ¿ä»£ï¼\n\nå¯ä»¥çï¼å®éä¸ï¼âapplicationâ bean ä¸âsingletonâ bean æ²¡ææ¬è´¨åºå«\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Bean çå½å¨æ",frontmatter:{title:"Spring Bean çå½å¨æ",date:"2022-12-21T19:26:01.000Z",order:7,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","Bean"],permalink:"/pages/4ab176/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/07.SpringBean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/07.SpringBeançå½å¨æ.md",key:"v-0ef44af3",path:"/pages/4ab176/",headers:[{level:2,title:"Spring Bean åä¿¡æ¯éç½®é¶æ®µ",slug:"spring-bean-åä¿¡æ¯éç½®é¶æ®µ",normalizedTitle:"spring bean åä¿¡æ¯éç½®é¶æ®µ",charIndex:23},{level:2,title:"Spring Bean åä¿¡æ¯è§£æé¶æ®µ",slug:"spring-bean-åä¿¡æ¯è§£æé¶æ®µ",normalizedTitle:"spring bean åä¿¡æ¯è§£æé¶æ®µ",charIndex:126},{level:2,title:"Spring Bean æ³¨åé¶æ®µ",slug:"spring-bean-æ³¨åé¶æ®µ",normalizedTitle:"spring bean æ³¨åé¶æ®µ",charIndex:300},{level:2,title:"Spring BeanDefinition åå¹¶é¶æ®µ",slug:"spring-beandefinition-åå¹¶é¶æ®µ",normalizedTitle:"spring beandefinition åå¹¶é¶æ®µ",charIndex:365},{level:2,title:"Spring Bean Class å è½½é¶æ®µ",slug:"spring-bean-class-å è½½é¶æ®µ",normalizedTitle:"spring bean class å è½½é¶æ®µ",charIndex:481},{level:2,title:"Spring Bean å®ä¾ååé¶æ®µ",slug:"spring-bean-å®ä¾ååé¶æ®µ",normalizedTitle:"spring bean å®ä¾ååé¶æ®µ",charIndex:592},{level:2,title:"Spring Bean å®ä¾åé¶æ®µ",slug:"spring-bean-å®ä¾åé¶æ®µ",normalizedTitle:"spring bean å®ä¾åé¶æ®µ",charIndex:674},{level:2,title:"Spring Bean å®ä¾ååé¶æ®µ",slug:"spring-bean-å®ä¾ååé¶æ®µ",normalizedTitle:"spring bean å®ä¾ååé¶æ®µ",charIndex:787},{level:2,title:"Spring Bean å±æ§èµå¼åé¶æ®µ",slug:"spring-bean-å±æ§èµå¼åé¶æ®µ",normalizedTitle:"spring bean å±æ§èµå¼åé¶æ®µ",charIndex:900},{level:2,title:"Spring Bean Aware æ¥å£åè°é¶æ®µ",slug:"spring-bean-aware-æ¥å£åè°é¶æ®µ",normalizedTitle:"spring bean aware æ¥å£åè°é¶æ®µ",charIndex:1134},{level:2,title:"Spring Bean åå§ååé¶æ®µ",slug:"spring-bean-åå§ååé¶æ®µ",normalizedTitle:"spring bean åå§ååé¶æ®µ",charIndex:1399},{level:2,title:"Spring Bean åå§åé¶æ®µ",slug:"spring-bean-åå§åé¶æ®µ",normalizedTitle:"spring bean åå§åé¶æ®µ",charIndex:1536},{level:2,title:"Spring Bean åå§ååé¶æ®µ",slug:"spring-bean-åå§ååé¶æ®µ",normalizedTitle:"spring bean åå§ååé¶æ®µ",charIndex:1671},{level:2,title:"Spring Bean åå§åå®æé¶æ®µ",slug:"spring-bean-åå§åå®æé¶æ®µ",normalizedTitle:"spring bean åå§åå®æé¶æ®µ",charIndex:1749},{level:2,title:"Spring Bean éæ¯åé¶æ®µ",slug:"spring-bean-éæ¯åé¶æ®µ",normalizedTitle:"spring bean éæ¯åé¶æ®µ",charIndex:1847},{level:2,title:"Spring Bean éæ¯é¶æ®µ",slug:"spring-bean-éæ¯é¶æ®µ",normalizedTitle:"spring bean éæ¯é¶æ®µ",charIndex:1938},{level:2,title:"Spring Bean åå¾æ¶é",slug:"spring-bean-åå¾æ¶é",normalizedTitle:"spring bean åå¾æ¶é",charIndex:2047},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:2152},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:3358}],headersStr:"Spring Bean åä¿¡æ¯éç½®é¶æ®µ Spring Bean åä¿¡æ¯è§£æé¶æ®µ Spring Bean æ³¨åé¶æ®µ Spring BeanDefinition åå¹¶é¶æ®µ Spring Bean Class å è½½é¶æ®µ Spring Bean å®ä¾ååé¶æ®µ Spring Bean å®ä¾åé¶æ®µ Spring Bean å®ä¾ååé¶æ®µ Spring Bean å±æ§èµå¼åé¶æ®µ Spring Bean Aware æ¥å£åè°é¶æ®µ Spring Bean åå§ååé¶æ®µ Spring Bean åå§åé¶æ®µ Spring Bean åå§ååé¶æ®µ Spring Bean åå§åå®æé¶æ®µ Spring Bean éæ¯åé¶æ®µ Spring Bean éæ¯é¶æ®µ Spring Bean åå¾æ¶é é®é¢ åèèµæ",content:"# Spring Bean çå½å¨æ\n\n\n# Spring Bean åä¿¡æ¯éç½®é¶æ®µ\n\nBeanDefinition éç½®\n\n * é¢åèµæº\n   * XML éç½®\n   * Properties èµæºéç½®\n * é¢åæ³¨è§£\n * é¢å API\n\n\n# Spring Bean åä¿¡æ¯è§£æé¶æ®µ\n\n * é¢åèµæº BeanDefinition è§£æ\n   * BeanDefinitionReader\n   * XML è§£æå¨ - BeanDefinitionParser\n * é¢åæ³¨è§£ BeanDefinition è§£æ\n   * AnnotatedBeanDefinitionReader\n\n\n# Spring Bean æ³¨åé¶æ®µ\n\nBeanDefinition æ³¨åæ¥å£ï¼BeanDefinitionRegistry\n\n\n# Spring BeanDefinition åå¹¶é¶æ®µ\n\nBeanDefinition åå¹¶\n\nç¶å­ BeanDefinition åå¹¶\n\n * å½å BeanFactory æ¥æ¾\n * å±æ¬¡æ§ BeanFactory æ¥æ¾\n\n\n# Spring Bean Class å è½½é¶æ®µ\n\n * ClassLoader ç±»å è½½\n * Java Security å®å¨æ§å¶\n * ConfigurableBeanFactory ä¸´æ¶ ClassLoader\n\n\n# Spring Bean å®ä¾ååé¶æ®µ\n\nå®ä¾åæ¹å¼\n\n * ä¼ ç»å®ä¾åæ¹å¼ï¼å®ä¾åç­ç¥ï¼InstantiationStrategyï¼\n * æé å¨ä¾èµæ³¨å¥\n\n\n# Spring Bean å®ä¾åé¶æ®µ\n\néä¸»æµçå½å¨æ - Bean å®ä¾ååé¶æ®µ\n\nInstantiationAwareBeanPostProcessor#postProcessBeforeInstantiation\n\n\n# Spring Bean å®ä¾ååé¶æ®µ\n\nBean å±æ§èµå¼ï¼Populateï¼å¤æ­\n\nInstantiationAwareBeanPostProcessor#postProcessAfterInstantiation\n\n\n# Spring Bean å±æ§èµå¼åé¶æ®µ\n\n * Bean å±æ§å¼åä¿¡æ¯\n   * PropertyValues\n * Bean å±æ§èµå¼ååè°\n   * Spring 1.2 - 5.0ï¼InstantiationAwareBeanPostProcessor#postProcessPropertyValues\n   * Spring 5.1ï¼InstantiationAwareBeanPostProcessor#postProcessProperties\n\n\n# Spring Bean Aware æ¥å£åè°é¶æ®µ\n\nSpring Aware æ¥å£ï¼\n\n * BeanNameAware\n * BeanClassLoaderAware\n * BeanFactoryAware\n * EnvironmentAware\n * EmbeddedValueResolverAware\n * ResourceLoaderAware\n * ApplicationEventPublisherAware\n * MessageSourceAware\n * ApplicationContextAware\n\n\n# Spring Bean åå§ååé¶æ®µ\n\nå·²å®æï¼\n\n * Bean å®ä¾å\n\n * Bean å±æ§èµå¼\n\n * Bean Aware æ¥å£åè°\n\næ¹æ³åè°ï¼\n\n * BeanPostProcessor#postProcessBeforeInitialization\n\n\n# Spring Bean åå§åé¶æ®µ\n\nBean åå§åï¼Initializationï¼\n\n * @PostConstruct æ æ³¨æ¹æ³\n * å®ç° InitializingBean æ¥å£ç afterPropertiesSet() æ¹æ³\n * èªå®ä¹åå§åæ¹æ³\n\n\n# Spring Bean åå§ååé¶æ®µ\n\næ¹æ³åè°ï¼BeanPostProcessor#postProcessAfterInitialization\n\n\n# Spring Bean åå§åå®æé¶æ®µ\n\næ¹æ³åè°ï¼Spring 4.1 +ï¼SmartInitializingSingleton#afterSingletonsInstantiated\n\n\n# Spring Bean éæ¯åé¶æ®µ\n\næ¹æ³åè°ï¼DestructionAwareBeanPostProcessor#postProcessBeforeDestruction\n\n\n# Spring Bean éæ¯é¶æ®µ\n\nBean éæ¯ï¼Destroyï¼\n\n * @PreDestroy æ æ³¨æ¹æ³\n * å®ç° DisposableBean æ¥å£ç destroy() æ¹æ³\n * èªå®ä¹éæ¯æ¹æ³\n\n\n# Spring Bean åå¾æ¶é\n\nBean åå¾åæ¶ï¼GCï¼\n\n * å³é­ Spring å®¹å¨ï¼åºç¨ä¸ä¸æï¼\n * æ§è¡ GC\n * Spring Bean è¦çç finalize() æ¹æ³è¢«åè°\n\n\n# é®é¢\n\nBeanPostProcessor çä½¿ç¨åºæ¯æåªäºï¼\n\nBeanPostProcessor æä¾ Spring Bean åå§ååååå§ååççå½å¨æåè°ï¼åå«å¯¹åº postProcessBeforeInitialization ä»¥å postProcessAfterInitialization æ¹æ³ï¼åè®¸å¯¹å³å¿ç Bean è¿è¡æ©å±ï¼çè³æ¯æ¿æ¢ã\n\nå åé¡¹ï¼å¶ä¸­ï¼ApplicationContext ç¸å³ç Aware åè°ä¹æ¯åºäº BeanPostProcessor å®ç°ï¼å³ ApplicationContextAwareProcessorã\n\nBeanFactoryPostProcessor ä¸ BeanPostProcessor çåºå«ï¼\n\nBeanFactoryPostProcessor æ¯ Spring BeanFactoryï¼å®éä¸º ConfigurableListableBeanFactoryï¼ çåç½®å¤çå¨ï¼ç¨äºæ©å± BeanFactoryï¼æéè¿ BeanFactory è¿è¡ä¾èµæ¥æ¾åä¾èµæ³¨å¥ã\n\nBeanFactoryPostProcessor å¿é¡»æ Spring ApplicationContext æ§è¡ï¼BeanFactory æ æ³ä¸å¶ç´æ¥äº¤äºã\n\nè BeanPostProcessor åç´æ¥ä¸ BeanFactory å³èï¼å±äº N å¯¹ 1 çå³ç³»ã\n\nBeanFactory æ¯ææ ·å¤ç Bean çå½å¨æï¼\n\nBeanFactory çé»è®¤å®ç°ä¸º DefaultListableBeanFactoryï¼å¶ä¸­ Beançå½å¨æä¸æ¹æ³æ å°å¦ä¸ï¼\n\n * BeanDefinition æ³¨åé¶æ®µ - registerBeanDefinition\n * BeanDefinition åå¹¶é¶æ®µ - getMergedBeanDefinition\n * Bean å®ä¾ååé¶æ®µ - resolveBeforeInstantiation\n * Bean å®ä¾åé¶æ®µ - createBeanInstance\n * Bean åå§ååé¶æ®µ - populateBean\n * Bean å±æ§èµå¼åé¶æ®µ - populateBean\n * Bean å±æ§èµå¼é¶æ®µ - populateBean\n * Bean Aware æ¥å£åè°é¶æ®µ - initializeBean\n * Bean åå§ååé¶æ®µ - initializeBean\n * Bean åå§åé¶æ®µ - initializeBean\n * Bean åå§ååé¶æ®µ - initializeBean\n * Bean åå§åå®æé¶æ®µ - preInstantiateSingletons\n * Bean éæ¯åé¶æ®µ - destroyBean\n * Bean éæ¯é¶æ®µ - destroyBean\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring bean çå½å¨æ\n\n\n# spring bean åä¿¡æ¯éç½®é¶æ®µ\n\nbeandefinition éç½®\n\n * é¢åèµæº\n   * xml éç½®\n   * properties èµæºéç½®\n * é¢åæ³¨è§£\n * é¢å api\n\n\n# spring bean åä¿¡æ¯è§£æé¶æ®µ\n\n * é¢åèµæº beandefinition è§£æ\n   * beandefinitionreader\n   * xml è§£æå¨ - beandefinitionparser\n * é¢åæ³¨è§£ beandefinition è§£æ\n   * annotatedbeandefinitionreader\n\n\n# spring bean æ³¨åé¶æ®µ\n\nbeandefinition æ³¨åæ¥å£ï¼beandefinitionregistry\n\n\n# spring beandefinition åå¹¶é¶æ®µ\n\nbeandefinition åå¹¶\n\nç¶å­ beandefinition åå¹¶\n\n * å½å beanfactory æ¥æ¾\n * å±æ¬¡æ§ beanfactory æ¥æ¾\n\n\n# spring bean class å è½½é¶æ®µ\n\n * classloader ç±»å è½½\n * java security å®å¨æ§å¶\n * configurablebeanfactory ä¸´æ¶ classloader\n\n\n# spring bean å®ä¾ååé¶æ®µ\n\nå®ä¾åæ¹å¼\n\n * ä¼ ç»å®ä¾åæ¹å¼ï¼å®ä¾åç­ç¥ï¼instantiationstrategyï¼\n * æé å¨ä¾èµæ³¨å¥\n\n\n# spring bean å®ä¾åé¶æ®µ\n\néä¸»æµçå½å¨æ - bean å®ä¾ååé¶æ®µ\n\ninstantiationawarebeanpostprocessor#postprocessbeforeinstantiation\n\n\n# spring bean å®ä¾ååé¶æ®µ\n\nbean å±æ§èµå¼ï¼populateï¼å¤æ­\n\ninstantiationawarebeanpostprocessor#postprocessafterinstantiation\n\n\n# spring bean å±æ§èµå¼åé¶æ®µ\n\n * bean å±æ§å¼åä¿¡æ¯\n   * propertyvalues\n * bean å±æ§èµå¼ååè°\n   * spring 1.2 - 5.0ï¼instantiationawarebeanpostprocessor#postprocesspropertyvalues\n   * spring 5.1ï¼instantiationawarebeanpostprocessor#postprocessproperties\n\n\n# spring bean aware æ¥å£åè°é¶æ®µ\n\nspring aware æ¥å£ï¼\n\n * beannameaware\n * beanclassloaderaware\n * beanfactoryaware\n * environmentaware\n * embeddedvalueresolveraware\n * resourceloaderaware\n * applicationeventpublisheraware\n * messagesourceaware\n * applicationcontextaware\n\n\n# spring bean åå§ååé¶æ®µ\n\nå·²å®æï¼\n\n * bean å®ä¾å\n\n * bean å±æ§èµå¼\n\n * bean aware æ¥å£åè°\n\næ¹æ³åè°ï¼\n\n * beanpostprocessor#postprocessbeforeinitialization\n\n\n# spring bean åå§åé¶æ®µ\n\nbean åå§åï¼initializationï¼\n\n * @postconstruct æ æ³¨æ¹æ³\n * å®ç° initializingbean æ¥å£ç afterpropertiesset() æ¹æ³\n * èªå®ä¹åå§åæ¹æ³\n\n\n# spring bean åå§ååé¶æ®µ\n\næ¹æ³åè°ï¼beanpostprocessor#postprocessafterinitialization\n\n\n# spring bean åå§åå®æé¶æ®µ\n\næ¹æ³åè°ï¼spring 4.1 +ï¼smartinitializingsingleton#aftersingletonsinstantiated\n\n\n# spring bean éæ¯åé¶æ®µ\n\næ¹æ³åè°ï¼destructionawarebeanpostprocessor#postprocessbeforedestruction\n\n\n# spring bean éæ¯é¶æ®µ\n\nbean éæ¯ï¼destroyï¼\n\n * @predestroy æ æ³¨æ¹æ³\n * å®ç° disposablebean æ¥å£ç destroy() æ¹æ³\n * èªå®ä¹éæ¯æ¹æ³\n\n\n# spring bean åå¾æ¶é\n\nbean åå¾åæ¶ï¼gcï¼\n\n * å³é­ spring å®¹å¨ï¼åºç¨ä¸ä¸æï¼\n * æ§è¡ gc\n * spring bean è¦çç finalize() æ¹æ³è¢«åè°\n\n\n# é®é¢\n\nbeanpostprocessor çä½¿ç¨åºæ¯æåªäºï¼\n\nbeanpostprocessor æä¾ spring bean åå§ååååå§ååççå½å¨æåè°ï¼åå«å¯¹åº postprocessbeforeinitialization ä»¥å postprocessafterinitialization æ¹æ³ï¼åè®¸å¯¹å³å¿ç bean è¿è¡æ©å±ï¼çè³æ¯æ¿æ¢ã\n\nå åé¡¹ï¼å¶ä¸­ï¼applicationcontext ç¸å³ç aware åè°ä¹æ¯åºäº beanpostprocessor å®ç°ï¼å³ applicationcontextawareprocessorã\n\nbeanfactorypostprocessor ä¸ beanpostprocessor çåºå«ï¼\n\nbeanfactorypostprocessor æ¯ spring beanfactoryï¼å®éä¸º configurablelistablebeanfactoryï¼ çåç½®å¤çå¨ï¼ç¨äºæ©å± beanfactoryï¼æéè¿ beanfactory è¿è¡ä¾èµæ¥æ¾åä¾èµæ³¨å¥ã\n\nbeanfactorypostprocessor å¿é¡»æ spring applicationcontext æ§è¡ï¼beanfactory æ æ³ä¸å¶ç´æ¥äº¤äºã\n\nè beanpostprocessor åç´æ¥ä¸ beanfactory å³èï¼å±äº n å¯¹ 1 çå³ç³»ã\n\nbeanfactory æ¯ææ ·å¤ç bean çå½å¨æï¼\n\nbeanfactory çé»è®¤å®ç°ä¸º defaultlistablebeanfactoryï¼å¶ä¸­ beançå½å¨æä¸æ¹æ³æ å°å¦ä¸ï¼\n\n * beandefinition æ³¨åé¶æ®µ - registerbeandefinition\n * beandefinition åå¹¶é¶æ®µ - getmergedbeandefinition\n * bean å®ä¾ååé¶æ®µ - resolvebeforeinstantiation\n * bean å®ä¾åé¶æ®µ - createbeaninstance\n * bean åå§ååé¶æ®µ - populatebean\n * bean å±æ§èµå¼åé¶æ®µ - populatebean\n * bean å±æ§èµå¼é¶æ®µ - populatebean\n * bean aware æ¥å£åè°é¶æ®µ - initializebean\n * bean åå§ååé¶æ®µ - initializebean\n * bean åå§åé¶æ®µ - initializebean\n * bean åå§ååé¶æ®µ - initializebean\n * bean åå§åå®æé¶æ®µ - preinstantiatesingletons\n * bean éæ¯åé¶æ®µ - destroybean\n * bean éæ¯é¶æ®µ - destroybean\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring éç½®åæ°æ®",frontmatter:{title:"Spring éç½®åæ°æ®",date:"2022-12-21T19:49:48.000Z",order:"08",categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","Bean"],permalink:"/pages/55f315/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/08.Spring%E9%85%8D%E7%BD%AE%E5%85%83%E6%95%B0%E6%8D%AE.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/08.Springéç½®åæ°æ®.md",key:"v-ec12120a",path:"/pages/55f315/",headers:[{level:2,title:"Spring éç½®åä¿¡æ¯",slug:"spring-éç½®åä¿¡æ¯",normalizedTitle:"spring éç½®åä¿¡æ¯",charIndex:19},{level:2,title:"Spring Bean éç½®åä¿¡æ¯",slug:"spring-bean-éç½®åä¿¡æ¯",normalizedTitle:"spring bean éç½®åä¿¡æ¯",charIndex:36},{level:2,title:"Spring Bean å±æ§åä¿¡æ¯",slug:"spring-bean-å±æ§åä¿¡æ¯",normalizedTitle:"spring bean å±æ§åä¿¡æ¯",charIndex:74},{level:2,title:"Spring å®¹å¨éç½®åä¿¡æ¯",slug:"spring-å®¹å¨éç½®åä¿¡æ¯",normalizedTitle:"spring å®¹å¨éç½®åä¿¡æ¯",charIndex:112},{level:2,title:"åºäº XML æä»¶è£è½½ Spring Bean éç½®åä¿¡æ¯",slug:"åºäº-xml-æä»¶è£è½½-spring-bean-éç½®åä¿¡æ¯",normalizedTitle:"åºäº xml æä»¶è£è½½ spring bean éç½®åä¿¡æ¯",charIndex:1718},{level:2,title:"åºäº Properties æä»¶è£è½½ Spring Bean éç½®åä¿¡æ¯",slug:"åºäº-properties-æä»¶è£è½½-spring-bean-éç½®åä¿¡æ¯",normalizedTitle:"åºäº properties æä»¶è£è½½ spring bean éç½®åä¿¡æ¯",charIndex:2008},{level:2,title:"åºäº Java æ³¨è§£è£è½½ Spring Bean éç½®åä¿¡æ¯",slug:"åºäº-java-æ³¨è§£è£è½½-spring-bean-éç½®åä¿¡æ¯",normalizedTitle:"åºäº java æ³¨è§£è£è½½ spring bean éç½®åä¿¡æ¯",charIndex:2351},{level:2,title:"Spring Bean éç½®åä¿¡æ¯åºå±å®ç°",slug:"spring-bean-éç½®åä¿¡æ¯åºå±å®ç°",normalizedTitle:"spring bean éç½®åä¿¡æ¯åºå±å®ç°",charIndex:3854},{level:3,title:"Spring XML èµæº BeanDefinition è§£æä¸æ³¨å",slug:"spring-xml-èµæº-beandefinition-è§£æä¸æ³¨å",normalizedTitle:"spring xml èµæº beandefinition è§£æä¸æ³¨å",charIndex:3880},{level:3,title:"Spring Properties èµæº BeanDefinition è§£æä¸æ³¨å",slug:"spring-properties-èµæº-beandefinition-è§£æä¸æ³¨å",normalizedTitle:"spring properties èµæº beandefinition è§£æä¸æ³¨å",charIndex:4145},{level:3,title:"Spring Java æ³¨å BeanDefinition è§£æä¸æ³¨å",slug:"spring-java-æ³¨å-beandefinition-è§£æä¸æ³¨å",normalizedTitle:"spring java æ³¨å beandefinition è§£æä¸æ³¨å",charIndex:4404},{level:2,title:"åºäº XML æä»¶è£è½½ Spring IoC å®¹å¨éç½®åä¿¡æ¯",slug:"åºäº-xml-æä»¶è£è½½-spring-ioc-å®¹å¨éç½®åä¿¡æ¯",normalizedTitle:"åºäº xml æä»¶è£è½½ spring ioc å®¹å¨éç½®åä¿¡æ¯",charIndex:4759},{level:2,title:"åºäº Java æ³¨è§£è£è½½ Spring IoC å®¹å¨éç½®åä¿¡æ¯",slug:"åºäº-java-æ³¨è§£è£è½½-spring-ioc-å®¹å¨éç½®åä¿¡æ¯",normalizedTitle:"åºäº java æ³¨è§£è£è½½ spring ioc å®¹å¨éç½®åä¿¡æ¯",charIndex:5417},{level:2,title:"åºäº Extensible XML authoring æ©å± SpringXML åç´ ",slug:"åºäº-extensible-xml-authoring-æ©å±-springxml-åç´ ",normalizedTitle:"åºäº extensible xml authoring æ©å± springxml åç´ ",charIndex:5865},{level:2,title:"Extensible XML authoring æ©å±åç",slug:"extensible-xml-authoring-æ©å±åç",normalizedTitle:"extensible xml authoring æ©å±åç",charIndex:6083},{level:3,title:"è§¦åæ¶æº",slug:"è§¦åæ¶æº",normalizedTitle:"è§¦åæ¶æº",charIndex:6117},{level:3,title:"æ ¸å¿æµç¨",slug:"æ ¸å¿æµç¨",normalizedTitle:"æ ¸å¿æµç¨",charIndex:6449},{level:2,title:"åºäº Properties æä»¶è£è½½å¤é¨åéç½®",slug:"åºäº-properties-æä»¶è£è½½å¤é¨åéç½®",normalizedTitle:"åºäº properties æä»¶è£è½½å¤é¨åéç½®",charIndex:6644},{level:2,title:"åºäº YAML æä»¶è£è½½å¤é¨åéç½®",slug:"åºäº-yaml-æä»¶è£è½½å¤é¨åéç½®",normalizedTitle:"åºäº yaml æä»¶è£è½½å¤é¨åéç½®",charIndex:6900},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:7126},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:8247}],headersStr:"Spring éç½®åä¿¡æ¯ Spring Bean éç½®åä¿¡æ¯ Spring Bean å±æ§åä¿¡æ¯ Spring å®¹å¨éç½®åä¿¡æ¯ åºäº XML æä»¶è£è½½ Spring Bean éç½®åä¿¡æ¯ åºäº Properties æä»¶è£è½½ Spring Bean éç½®åä¿¡æ¯ åºäº Java æ³¨è§£è£è½½ Spring Bean éç½®åä¿¡æ¯ Spring Bean éç½®åä¿¡æ¯åºå±å®ç° Spring XML èµæº BeanDefinition è§£æä¸æ³¨å Spring Properties èµæº BeanDefinition è§£æä¸æ³¨å Spring Java æ³¨å BeanDefinition è§£æä¸æ³¨å åºäº XML æä»¶è£è½½ Spring IoC å®¹å¨éç½®åä¿¡æ¯ åºäº Java æ³¨è§£è£è½½ Spring IoC å®¹å¨éç½®åä¿¡æ¯ åºäº Extensible XML authoring æ©å± SpringXML åç´  Extensible XML authoring æ©å±åç è§¦åæ¶æº æ ¸å¿æµç¨ åºäº Properties æä»¶è£è½½å¤é¨åéç½® åºäº YAML æä»¶è£è½½å¤é¨åéç½® é®é¢ åèèµæ",content:'# Spring éç½®åæ°æ®\n\n\n# Spring éç½®åä¿¡æ¯\n\n * Spring Bean éç½®åä¿¡æ¯ - BeanDefinition\n * Spring Bean å±æ§åä¿¡æ¯ - PropertyValues\n * Spring å®¹å¨éç½®åä¿¡æ¯\n * Spring å¤é¨åéç½®åä¿¡æ¯ - PropertySource\n * Spring Profile åä¿¡æ¯ - @Profile\n\n\n# Spring Bean éç½®åä¿¡æ¯\n\nBean éç½®åä¿¡æ¯ - BeanDefinition\n\n * GenericBeanDefinitionï¼éç¨å BeanDefinition\n * RootBeanDefinitionï¼æ  Parent ç BeanDefinition æèåå¹¶å BeanDefinition\n * AnnotatedBeanDefinitionï¼æ³¨è§£æ æ³¨ç BeanDefinition\n\n\n# Spring Bean å±æ§åä¿¡æ¯\n\n * Bean å±æ§åä¿¡æ¯ - PropertyValues\n   * å¯ä¿®æ¹å®ç° - MutablePropertyValues\n   * åç´ æå - PropertyValue\n * Bean å±æ§ä¸ä¸æå­å¨ - AttributeAccessor\n * Bean åä¿¡æ¯åç´  - BeanMetadataElement\n\n\n# Spring å®¹å¨éç½®åä¿¡æ¯\n\nSpring XML éç½®åä¿¡æ¯ - beans åç´ ç¸å³\n\nBEANS åç´ å±æ§                    é»è®¤å¼        ä½¿ç¨åºæ¯\nprofile                       nullï¼çç©ºï¼   Spring Profiles éç½®å¼\ndefault-lazy-init             default    å½ outter beans âdefault-lazy-initâ å±æ§å­å¨æ¶ï¼ç»§æ¿è¯¥å¼ï¼å¦åä¸ºâfalseâ\ndefault-merge                 default    å½ outter beans âdefault-mergeâ å±æ§å­å¨æ¶ï¼ç»§æ¿è¯¥å¼ï¼å¦åä¸ºâfalseâ\ndefault-autowire              default    å½ outter beans âdefault-autowireâ å±æ§å­å¨æ¶ï¼ç»§æ¿è¯¥å¼ï¼å¦åä¸ºânoâ\ndefault-autowire-candidates   nullï¼çç©ºï¼   é»è®¤ Spring Beans åç§° pattern\ndefault-init-method           nullï¼çç©ºï¼   é»è®¤ Spring Beans èªå®ä¹åå§åæ¹æ³\ndefault-destroy-method        nullï¼çç©ºï¼   é»è®¤ Spring Beans èªå®ä¹éæ¯æ¹æ³\n\nSpring XML éç½®åä¿¡æ¯ - åºç¨ä¸ä¸æç¸å³\n\nXML åç´                              ä½¿ç¨åºæ¯\n<context:annotation-config />      æ¿æ´» Spring æ³¨è§£é©±å¨\n<context:component-scan />         Spring @Component ä»¥åèªå®ä¹æ³¨è§£æ«æ\n<context:load-time-weaver />       æ¿æ´» Spring LoadTimeWeaver\n<context:mbean-export />           æ´é² Spring Beans ä½ä¸º JMX Beans\n<context:mbean-server />           å°å½åå¹³å°ä½ä¸º MBeanServer\n<context:property-placeholder />   å è½½å¤é¨åéç½®èµæºä½ä¸º Spring å±æ§é\n<context:property-override />      å©ç¨å¤é¨åéç½®èµæºè¦ç Spring å±\n\n\n# åºäº XML æä»¶è£è½½ Spring Bean éç½®åä¿¡æ¯\n\nåºå±å®ç° - XmlBeanDefinitionReader\n\nXML åç´              ä½¿ç¨åºæ¯\n<beans:beans />    å XML èµæºä¸çå¤ä¸ª Spring Beans éç½®\n<beans:bean />     åä¸ª Spring Bean å®ä¹ï¼BeanDefinitionï¼éç½®\n<beans:alias />    ä¸º Spring Bean å®ä¹ï¼BeanDefinitionï¼æ å°å«å\n<beans:import />   å è½½å¤é¨ Spring XML éç½®èµæº\n\n\n# åºäº Properties æä»¶è£è½½ Spring Bean éç½®åä¿¡æ¯\n\nåºå±å®ç° - PropertiesBeanDefinitionReader\n\nPROPERTIES å±æ§å   ä½¿ç¨åºæ¯\nclass            Bean ç±»å¨ç§°éå®å\nabstract         æ¯å¦ä¸ºæ½è±¡ç BeanDefinition\nparent           æå® parent BeanDefinition åç§°\nlazy-init        æ¯å¦ä¸ºå»¶è¿åå§å\nref              å¼ç¨å¶ä» Bean çåç§°\nscope            è®¾ç½® Bean ç scope å±æ§\n${n}             n è¡¨ç¤ºç¬¬ n+1 ä¸ªæé å¨åæ°\n\n\n# åºäº Java æ³¨è§£è£è½½ Spring Bean éç½®åä¿¡æ¯\n\nSpring æ¨¡å¼æ³¨è§£\n\nSPRING æ³¨è§£        åºæ¯è¯´æ          èµ·å§çæ¬\n@Repository      æ°æ®ä»å¨æ¨¡å¼æ³¨è§£      2.0\n@Component       éç¨ç»ä»¶æ¨¡å¼æ³¨è§£      2.5\n@Service         æå¡æ¨¡å¼æ³¨è§£        2.5\n@Controller      Web æ§å¶å¨æ¨¡å¼æ³¨è§£   2.5\n@Configuration   éç½®ç±»æ¨¡å¼æ³¨è§£       3.0\n\nSpring Bean å®ä¹æ³¨è§£\n\nSPRING æ³¨è§£    åºæ¯è¯´æ                                           èµ·å§çæ¬\n@Bean        æ¿æ¢ XML åç´  <bean>                               3.0\n@DependsOn   æ¿ä»£ XML å±æ§ <bean depends-on="..."/>             3.0\n@Lazy        æ¿ä»£ XML å±æ§ <bean lazy-init="true | falses" />   3.0\n@Primary     æ¿æ¢ XML åç´  <bean primary="true | false" />      3.0\n@Role        æ¿æ¢ XML åç´  <bean role="..." />                  3.1\n@Lookup      æ¿ä»£ XML å±æ§ <bean lookup-method="...">           4.1\n\nSpring Bean ä¾èµæ³¨å¥æ³¨è§£\n\nSPRING æ³¨è§£    åºæ¯è¯´æ                   èµ·å§çæ¬\n@Autowired   Bean ä¾èµæ³¨å¥ï¼æ¯æå¤ç§ä¾èµæ¥æ¾æ¹å¼   2.5\n@Qualifier   ç»ç²åº¦ç @Autowired ä¾èµæ¥æ¾   2.5\n\nJAVA æ³¨è§£     åºæ¯è¯´æ             èµ·å§çæ¬\n@Resource   ç±»ä¼¼äº @Autowired   2.5\n@Inject     ç±»ä¼¼äº @Autowired   2.5\n\nSpring Bean æ¡ä»¶è£éæ³¨è§£\n\nSPRING æ³¨è§£      åºæ¯è¯´æ      èµ·å§çæ¬\n@Profile       éç½®åæ¡ä»¶è£é   3.1\n@Conditional   ç¼ç¨æ¡ä»¶è£é    4.0\n\nSpring Bean çå½å¨æåè°æ³¨è§£\n\nSPRING æ³¨è§£        åºæ¯è¯´æ                           èµ·å§çæ¬\n@PostConstruct   æ¿æ¢ XML åç´  æ InitializingBean   2.5\n@PreDestroy      æ¿æ¢ XML åç´  æ DisposableBean     2.5\n\nSpring BeanDefinition è§£æä¸æ³¨å\n\nSPRING æ³¨è§£       åºæ¯è¯´æ                             èµ·å§çæ¬\nXML èµæº          XmlBeanDefinitionReader          1.0\nProperties èµæº   PropertiesBeanDefinitionReader   1.0\nJava æ³¨è§£         AnnotatedBeanDefinitionReader    3.0\n\n\n# Spring Bean éç½®åä¿¡æ¯åºå±å®ç°\n\n\n# Spring XML èµæº BeanDefinition è§£æä¸æ³¨å\n\næ ¸å¿ API - XmlBeanDefinitionReader\n\n * èµæº - Resource\n * åºå± - BeanDefinitionDocumentReader\n   * XML è§£æ - Java DOM Level 3 API\n   * BeanDefinition è§£æ - BeanDefinitionParserDelegate\n   * BeanDefinition æ³¨å - BeanDefinitionRegistry\n\n\n# Spring Properties èµæº BeanDefinition è§£æä¸æ³¨å\n\næ ¸å¿ API - PropertiesBeanDefinitionReader\n\n * èµæº\n   * å­èæµ - Resource\n   * å­ç¬¦æµ - EncodedResouce\n * åºå±\n   * å­å¨ - java.util.Properties\n   * BeanDefinition è§£æ - API åé¨å®ç°\n   * BeanDefinition æ³¨å - BeanDefinitionRegistry\n\n\n# Spring Java æ³¨å BeanDefinition è§£æä¸æ³¨å\n\næ ¸å¿ API - AnnotatedBeanDefinitionReader\n\n * èµæº\n   * ç±»å¯¹è±¡ - java.lang.Class\n * åºå±\n   * æ¡ä»¶è¯ä¼° - ConditionEvaluator\n   * Bean èå´è§£æ - ScopeMetadataResolver\n   * BeanDefinition è§£æ - åé¨ API å®ç°\n   * BeanDefinition å¤ç - AnnotationConfigUtils.processCommonDefinitionAnnotations\n   * BeanDefinition æ³¨å - BeanDefinitionRegistry\n\n\n# åºäº XML æä»¶è£è½½ Spring IoC å®¹å¨éç½®åä¿¡æ¯\n\nSpring IoC å®¹å¨ç¸å³ XML éç½®\n\nå½åç©ºé´      æå±æ¨¡å             SCHEMA èµæº URL\nbeans     spring-beans     https://www.springframework.org/schema/beans/spring-beans.xsd\ncontext   spring-context   https://www.springframework.org/schema/context/spring-context.xsd\naop       spring-aop       https://www.springframework.org/schema/aop/spring-aop.xsd\ntx        spring-tx        https://www.springframework.org/schema/tx/spring-tx.xsd\nutil      spring-beans     beans\n                           https://www.springframework.org/schema/util/spring-util.xsd\ntool      spring-beans     https://www.springframework.org/schema/tool/spring-tool.xsd\n\n\n# åºäº Java æ³¨è§£è£è½½ Spring IoC å®¹å¨éç½®åä¿¡æ¯\n\nSpring IoC å®¹å¨è£éæ³¨è§£\n\nSPRING æ³¨è§£         åºæ¯è¯´æ                             èµ·å§çæ¬\n@ImportResource   æ¿æ¢ XML åç´  <import>               3.0\n@Import           å¯¼å¥ Configuration Class           3.0\n@ComponentScan    æ«ææå® package ä¸æ æ³¨ Spring æ¨¡å¼æ³¨è§£çç±»   3.1\n\nSpring IoC éå±å±æ§æ³¨è§£\n\nSPRING æ³¨è§£          åºæ¯è¯´æ                       èµ·å§çæ¬\n@PropertySource    éç½®å±æ§æ½è±¡ PropertySource æ³¨è§£   3.1\n@PropertySources   @PropertySource éåæ³¨è§£       4.0\n\n\n# åºäº Extensible XML authoring æ©å± SpringXML åç´ \n\nSpring XML æ©å±\n\n * ç¼å XML Schema æä»¶ï¼å®ä¹ XML ç»æ\n * èªå®ä¹ NamespaceHandler å®ç°ï¼å½åç©ºé´ç»å®\n * èªå®ä¹ BeanDefinitionParser å®ç°ï¼XML åç´ ä¸ BeanDefinition è§£æ\n * æ³¨å XML æ©å±ï¼å½åç©ºé´ä¸ XML Schema æ å°\n\n\n# Extensible XML authoring æ©å±åç\n\n\n# è§¦åæ¶æº\n\n * AbstractApplicationContext#obtainFreshBeanFactory\n   * AbstractRefreshableApplicationContext#refreshBeanFactory\n     * AbstractXmlApplicationContext#loadBeanDefinitions\n       * ...\n         * XmlBeanDefinitionReader#doLoadBeanDefinitions\n           * ...\n             * BeanDefinitionParserDelegate#parseCustomElement\n\n\n# æ ¸å¿æµç¨\n\nBeanDefinitionParserDelegate#parseCustomElement(org.w3c.dom.Element, BeanDefinition)\n\n * è·å namespace\n * éè¿ namespace è§£æ NamespaceHandler\n * æé  ParserContext\n * è§£æåç´ ï¼è·å BeanDefinintion\n\n\n# åºäº Properties æä»¶è£è½½å¤é¨åéç½®\n\næ³¨è§£é©±å¨\n\n * @org.springframework.context.annotation.PropertySource\n * @org.springframework.context.annotation.PropertySources\n\nAPI ç¼ç¨\n\n * org.springframework.core.env.PropertySource\n * org.springframework.core.env.PropertySources\n\n\n# åºäº YAML æä»¶è£è½½å¤é¨åéç½®\n\nAPI ç¼ç¨\n\n * org.springframework.beans.factory.config.YamlProcessor\n   * org.springframework.beans.factory.config.YamlMapFactoryBean\n   * org.springframework.beans.factory.config.YamlPropertiesFactoryBean\n\n\n# é®é¢\n\nSpring å§å»º XML Schema å¸¸è§æåªäºï¼\n\nå½åç©ºé´      æå±æ¨¡å             SCHEMA èµæº URL\nbeans     spring-beans     https://www.springframework.org/schema/beans/spring-beans.xsd\ncontext   spring-context   https://www.springframework.org/schema/context/spring-context.xsd\naop       spring-aop       https://www.springframework.org/schema/aop/spring-aop.xsd\ntx        spring-tx        https://www.springframework.org/schema/tx/spring-tx.xsd\nutil      spring-beans     beans\n                           https://www.springframework.org/schema/util/spring-util.xsd\ntool      spring-beans     https://www.springframework.org/schema/tool/spring-tool.xsd\n\nSpring éç½®åä¿¡æ¯å·ä½æåªäºï¼\n\n * Bean éç½®åä¿¡æ¯ï¼éè¿åªä»ï¼å¦ XMLãProeprties ç­ï¼ï¼è§£æ BeanDefinition\n * IoC å®¹å¨éç½®åä¿¡æ¯ï¼éè¿åªä»ï¼å¦ XMLãProeprties ç­ï¼ï¼æ§å¶ IoC å®¹å¨è¡ä¸ºï¼æ¯å¦æ³¨è§£é©±å¨ãAOP ç­\n * å¤é¨åéç½®ï¼éè¿èµæºæ½è±¡ï¼å¦ ProeprtiesãYAML ç­ï¼ï¼æ§å¶ PropertySource\n * Spring Profileï¼éè¿å¤é¨åéç½®ï¼æä¾æ¡ä»¶åæ¯æµç¨\n\nExtensible XML authoring çç¼ºç¹ï¼\n\n * é«å¤æåº¦ï¼å¼åäººåéè¦çæ XML Schemaï¼spring.handlersï¼spring.schemas ä»¥å Spring API\n * åµå¥åç´ æ¯æè¾å¼±ï¼éå¸¸éè¦ä½¿ç¨æ¹æ³éå½æèå¶åµå¥è§£æçæ¹å¼å¤çåµå¥ï¼å­ï¼åç´ \n * XML å¤çæ§è½è¾å·®ï¼Spring XML åºäº DOM Level 3 API å®ç°ï¼è¯¥ API ä¾¿äºçè§£ï¼ç¶èæ§è½è¾å·®\n * XML æ¡æ¶ç§»æ¤æ§å·®ï¼å¾é¾ééé«æ§è½åä¾¿å©æ§ç XML æ¡æ¶ï¼å¦ JAXB\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring éç½®åæ°æ®\n\n\n# spring éç½®åä¿¡æ¯\n\n * spring bean éç½®åä¿¡æ¯ - beandefinition\n * spring bean å±æ§åä¿¡æ¯ - propertyvalues\n * spring å®¹å¨éç½®åä¿¡æ¯\n * spring å¤é¨åéç½®åä¿¡æ¯ - propertysource\n * spring profile åä¿¡æ¯ - @profile\n\n\n# spring bean éç½®åä¿¡æ¯\n\nbean éç½®åä¿¡æ¯ - beandefinition\n\n * genericbeandefinitionï¼éç¨å beandefinition\n * rootbeandefinitionï¼æ  parent ç beandefinition æèåå¹¶å beandefinition\n * annotatedbeandefinitionï¼æ³¨è§£æ æ³¨ç beandefinition\n\n\n# spring bean å±æ§åä¿¡æ¯\n\n * bean å±æ§åä¿¡æ¯ - propertyvalues\n   * å¯ä¿®æ¹å®ç° - mutablepropertyvalues\n   * åç´ æå - propertyvalue\n * bean å±æ§ä¸ä¸æå­å¨ - attributeaccessor\n * bean åä¿¡æ¯åç´  - beanmetadataelement\n\n\n# spring å®¹å¨éç½®åä¿¡æ¯\n\nspring xml éç½®åä¿¡æ¯ - beans åç´ ç¸å³\n\nbeans åç´ å±æ§                    é»è®¤å¼        ä½¿ç¨åºæ¯\nprofile                       nullï¼çç©ºï¼   spring profiles éç½®å¼\ndefault-lazy-init             default    å½ outter beans âdefault-lazy-initâ å±æ§å­å¨æ¶ï¼ç»§æ¿è¯¥å¼ï¼å¦åä¸ºâfalseâ\ndefault-merge                 default    å½ outter beans âdefault-mergeâ å±æ§å­å¨æ¶ï¼ç»§æ¿è¯¥å¼ï¼å¦åä¸ºâfalseâ\ndefault-autowire              default    å½ outter beans âdefault-autowireâ å±æ§å­å¨æ¶ï¼ç»§æ¿è¯¥å¼ï¼å¦åä¸ºânoâ\ndefault-autowire-candidates   nullï¼çç©ºï¼   é»è®¤ spring beans åç§° pattern\ndefault-init-method           nullï¼çç©ºï¼   é»è®¤ spring beans èªå®ä¹åå§åæ¹æ³\ndefault-destroy-method        nullï¼çç©ºï¼   é»è®¤ spring beans èªå®ä¹éæ¯æ¹æ³\n\nspring xml éç½®åä¿¡æ¯ - åºç¨ä¸ä¸æç¸å³\n\nxml åç´                              ä½¿ç¨åºæ¯\n<context:annotation-config />      æ¿æ´» spring æ³¨è§£é©±å¨\n<context:component-scan />         spring @component ä»¥åèªå®ä¹æ³¨è§£æ«æ\n<context:load-time-weaver />       æ¿æ´» spring loadtimeweaver\n<context:mbean-export />           æ´é² spring beans ä½ä¸º jmx beans\n<context:mbean-server />           å°å½åå¹³å°ä½ä¸º mbeanserver\n<context:property-placeholder />   å è½½å¤é¨åéç½®èµæºä½ä¸º spring å±æ§é\n<context:property-override />      å©ç¨å¤é¨åéç½®èµæºè¦ç spring å±\n\n\n# åºäº xml æä»¶è£è½½ spring bean éç½®åä¿¡æ¯\n\nåºå±å®ç° - xmlbeandefinitionreader\n\nxml åç´              ä½¿ç¨åºæ¯\n<beans:beans />    å xml èµæºä¸çå¤ä¸ª spring beans éç½®\n<beans:bean />     åä¸ª spring bean å®ä¹ï¼beandefinitionï¼éç½®\n<beans:alias />    ä¸º spring bean å®ä¹ï¼beandefinitionï¼æ å°å«å\n<beans:import />   å è½½å¤é¨ spring xml éç½®èµæº\n\n\n# åºäº properties æä»¶è£è½½ spring bean éç½®åä¿¡æ¯\n\nåºå±å®ç° - propertiesbeandefinitionreader\n\nproperties å±æ§å   ä½¿ç¨åºæ¯\nclass            bean ç±»å¨ç§°éå®å\nabstract         æ¯å¦ä¸ºæ½è±¡ç beandefinition\nparent           æå® parent beandefinition åç§°\nlazy-init        æ¯å¦ä¸ºå»¶è¿åå§å\nref              å¼ç¨å¶ä» bean çåç§°\nscope            è®¾ç½® bean ç scope å±æ§\n${n}             n è¡¨ç¤ºç¬¬ n+1 ä¸ªæé å¨åæ°\n\n\n# åºäº java æ³¨è§£è£è½½ spring bean éç½®åä¿¡æ¯\n\nspring æ¨¡å¼æ³¨è§£\n\nspring æ³¨è§£        åºæ¯è¯´æ          èµ·å§çæ¬\n@repository      æ°æ®ä»å¨æ¨¡å¼æ³¨è§£      2.0\n@component       éç¨ç»ä»¶æ¨¡å¼æ³¨è§£      2.5\n@service         æå¡æ¨¡å¼æ³¨è§£        2.5\n@controller      web æ§å¶å¨æ¨¡å¼æ³¨è§£   2.5\n@configuration   éç½®ç±»æ¨¡å¼æ³¨è§£       3.0\n\nspring bean å®ä¹æ³¨è§£\n\nspring æ³¨è§£    åºæ¯è¯´æ                                           èµ·å§çæ¬\n@bean        æ¿æ¢ xml åç´  <bean>                               3.0\n@dependson   æ¿ä»£ xml å±æ§ <bean depends-on="..."/>             3.0\n@lazy        æ¿ä»£ xml å±æ§ <bean lazy-init="true | falses" />   3.0\n@primary     æ¿æ¢ xml åç´  <bean primary="true | false" />      3.0\n@role        æ¿æ¢ xml åç´  <bean role="..." />                  3.1\n@lookup      æ¿ä»£ xml å±æ§ <bean lookup-method="...">           4.1\n\nspring bean ä¾èµæ³¨å¥æ³¨è§£\n\nspring æ³¨è§£    åºæ¯è¯´æ                   èµ·å§çæ¬\n@autowired   bean ä¾èµæ³¨å¥ï¼æ¯æå¤ç§ä¾èµæ¥æ¾æ¹å¼   2.5\n@qualifier   ç»ç²åº¦ç @autowired ä¾èµæ¥æ¾   2.5\n\njava æ³¨è§£     åºæ¯è¯´æ             èµ·å§çæ¬\n@resource   ç±»ä¼¼äº @autowired   2.5\n@inject     ç±»ä¼¼äº @autowired   2.5\n\nspring bean æ¡ä»¶è£éæ³¨è§£\n\nspring æ³¨è§£      åºæ¯è¯´æ      èµ·å§çæ¬\n@profile       éç½®åæ¡ä»¶è£é   3.1\n@conditional   ç¼ç¨æ¡ä»¶è£é    4.0\n\nspring bean çå½å¨æåè°æ³¨è§£\n\nspring æ³¨è§£        åºæ¯è¯´æ                           èµ·å§çæ¬\n@postconstruct   æ¿æ¢ xml åç´  æ initializingbean   2.5\n@predestroy      æ¿æ¢ xml åç´  æ disposablebean     2.5\n\nspring beandefinition è§£æä¸æ³¨å\n\nspring æ³¨è§£       åºæ¯è¯´æ                             èµ·å§çæ¬\nxml èµæº          xmlbeandefinitionreader          1.0\nproperties èµæº   propertiesbeandefinitionreader   1.0\njava æ³¨è§£         annotatedbeandefinitionreader    3.0\n\n\n# spring bean éç½®åä¿¡æ¯åºå±å®ç°\n\n\n# spring xml èµæº beandefinition è§£æä¸æ³¨å\n\næ ¸å¿ api - xmlbeandefinitionreader\n\n * èµæº - resource\n * åºå± - beandefinitiondocumentreader\n   * xml è§£æ - java dom level 3 api\n   * beandefinition è§£æ - beandefinitionparserdelegate\n   * beandefinition æ³¨å - beandefinitionregistry\n\n\n# spring properties èµæº beandefinition è§£æä¸æ³¨å\n\næ ¸å¿ api - propertiesbeandefinitionreader\n\n * èµæº\n   * å­èæµ - resource\n   * å­ç¬¦æµ - encodedresouce\n * åºå±\n   * å­å¨ - java.util.properties\n   * beandefinition è§£æ - api åé¨å®ç°\n   * beandefinition æ³¨å - beandefinitionregistry\n\n\n# spring java æ³¨å beandefinition è§£æä¸æ³¨å\n\næ ¸å¿ api - annotatedbeandefinitionreader\n\n * èµæº\n   * ç±»å¯¹è±¡ - java.lang.class\n * åºå±\n   * æ¡ä»¶è¯ä¼° - conditionevaluator\n   * bean èå´è§£æ - scopemetadataresolver\n   * beandefinition è§£æ - åé¨ api å®ç°\n   * beandefinition å¤ç - annotationconfigutils.processcommondefinitionannotations\n   * beandefinition æ³¨å - beandefinitionregistry\n\n\n# åºäº xml æä»¶è£è½½ spring ioc å®¹å¨éç½®åä¿¡æ¯\n\nspring ioc å®¹å¨ç¸å³ xml éç½®\n\nå½åç©ºé´      æå±æ¨¡å             schema èµæº url\nbeans     spring-beans     https://www.springframework.org/schema/beans/spring-beans.xsd\ncontext   spring-context   https://www.springframework.org/schema/context/spring-context.xsd\naop       spring-aop       https://www.springframework.org/schema/aop/spring-aop.xsd\ntx        spring-tx        https://www.springframework.org/schema/tx/spring-tx.xsd\nutil      spring-beans     beans\n                           https://www.springframework.org/schema/util/spring-util.xsd\ntool      spring-beans     https://www.springframework.org/schema/tool/spring-tool.xsd\n\n\n# åºäº java æ³¨è§£è£è½½ spring ioc å®¹å¨éç½®åä¿¡æ¯\n\nspring ioc å®¹å¨è£éæ³¨è§£\n\nspring æ³¨è§£         åºæ¯è¯´æ                             èµ·å§çæ¬\n@importresource   æ¿æ¢ xml åç´  <import>               3.0\n@import           å¯¼å¥ configuration class           3.0\n@componentscan    æ«ææå® package ä¸æ æ³¨ spring æ¨¡å¼æ³¨è§£çç±»   3.1\n\nspring ioc éå±å±æ§æ³¨è§£\n\nspring æ³¨è§£          åºæ¯è¯´æ                       èµ·å§çæ¬\n@propertysource    éç½®å±æ§æ½è±¡ propertysource æ³¨è§£   3.1\n@propertysources   @propertysource éåæ³¨è§£       4.0\n\n\n# åºäº extensible xml authoring æ©å± springxml åç´ \n\nspring xml æ©å±\n\n * ç¼å xml schema æä»¶ï¼å®ä¹ xml ç»æ\n * èªå®ä¹ namespacehandler å®ç°ï¼å½åç©ºé´ç»å®\n * èªå®ä¹ beandefinitionparser å®ç°ï¼xml åç´ ä¸ beandefinition è§£æ\n * æ³¨å xml æ©å±ï¼å½åç©ºé´ä¸ xml schema æ å°\n\n\n# extensible xml authoring æ©å±åç\n\n\n# è§¦åæ¶æº\n\n * abstractapplicationcontext#obtainfreshbeanfactory\n   * abstractrefreshableapplicationcontext#refreshbeanfactory\n     * abstractxmlapplicationcontext#loadbeandefinitions\n       * ...\n         * xmlbeandefinitionreader#doloadbeandefinitions\n           * ...\n             * beandefinitionparserdelegate#parsecustomelement\n\n\n# æ ¸å¿æµç¨\n\nbeandefinitionparserdelegate#parsecustomelement(org.w3c.dom.element, beandefinition)\n\n * è·å namespace\n * éè¿ namespace è§£æ namespacehandler\n * æé  parsercontext\n * è§£æåç´ ï¼è·å beandefinintion\n\n\n# åºäº properties æä»¶è£è½½å¤é¨åéç½®\n\næ³¨è§£é©±å¨\n\n * @org.springframework.context.annotation.propertysource\n * @org.springframework.context.annotation.propertysources\n\napi ç¼ç¨\n\n * org.springframework.core.env.propertysource\n * org.springframework.core.env.propertysources\n\n\n# åºäº yaml æä»¶è£è½½å¤é¨åéç½®\n\napi ç¼ç¨\n\n * org.springframework.beans.factory.config.yamlprocessor\n   * org.springframework.beans.factory.config.yamlmapfactorybean\n   * org.springframework.beans.factory.config.yamlpropertiesfactorybean\n\n\n# é®é¢\n\nspring å§å»º xml schema å¸¸è§æåªäºï¼\n\nå½åç©ºé´      æå±æ¨¡å             schema èµæº url\nbeans     spring-beans     https://www.springframework.org/schema/beans/spring-beans.xsd\ncontext   spring-context   https://www.springframework.org/schema/context/spring-context.xsd\naop       spring-aop       https://www.springframework.org/schema/aop/spring-aop.xsd\ntx        spring-tx        https://www.springframework.org/schema/tx/spring-tx.xsd\nutil      spring-beans     beans\n                           https://www.springframework.org/schema/util/spring-util.xsd\ntool      spring-beans     https://www.springframework.org/schema/tool/spring-tool.xsd\n\nspring éç½®åä¿¡æ¯å·ä½æåªäºï¼\n\n * bean éç½®åä¿¡æ¯ï¼éè¿åªä»ï¼å¦ xmlãproeprties ç­ï¼ï¼è§£æ beandefinition\n * ioc å®¹å¨éç½®åä¿¡æ¯ï¼éè¿åªä»ï¼å¦ xmlãproeprties ç­ï¼ï¼æ§å¶ ioc å®¹å¨è¡ä¸ºï¼æ¯å¦æ³¨è§£é©±å¨ãaop ç­\n * å¤é¨åéç½®ï¼éè¿èµæºæ½è±¡ï¼å¦ proeprtiesãyaml ç­ï¼ï¼æ§å¶ propertysource\n * spring profileï¼éè¿å¤é¨åéç½®ï¼æä¾æ¡ä»¶åæ¯æµç¨\n\nextensible xml authoring çç¼ºç¹ï¼\n\n * é«å¤æåº¦ï¼å¼åäººåéè¦çæ xml schemaï¼spring.handlersï¼spring.schemas ä»¥å spring api\n * åµå¥åç´ æ¯æè¾å¼±ï¼éå¸¸éè¦ä½¿ç¨æ¹æ³éå½æèå¶åµå¥è§£æçæ¹å¼å¤çåµå¥ï¼å­ï¼åç´ \n * xml å¤çæ§è½è¾å·®ï¼spring xml åºäº dom level 3 api å®ç°ï¼è¯¥ api ä¾¿äºçè§£ï¼ç¶èæ§è½è¾å·®\n * xml æ¡æ¶ç§»æ¤æ§å·®ï¼å¾é¾ééé«æ§è½åä¾¿å©æ§ç xml æ¡æ¶ï¼å¦ jaxb\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring AOP",frontmatter:{title:"Spring AOP",date:"2020-02-26T23:47:47.000Z",order:10,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","AOP"],permalink:"/pages/53aedb/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/10.SpringAop.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/10.SpringAop.md",key:"v-a873abde",path:"/pages/53aedb/",headers:[{level:2,title:"AOP æ¦å¿µ",slug:"aop-æ¦å¿µ",normalizedTitle:"aop æ¦å¿µ",charIndex:17},{level:3,title:"ä»ä¹æ¯ AOP",slug:"ä»ä¹æ¯-aop",normalizedTitle:"ä»ä¹æ¯ aop",charIndex:28},{level:3,title:"æ¯è¯­",slug:"æ¯è¯­",normalizedTitle:"æ¯è¯­",charIndex:208},{level:4,title:"Aspect(åé¢)",slug:"aspect-åé¢",normalizedTitle:"aspect(åé¢)",charIndex:193},{level:4,title:"advice(å¢å¼º)",slug:"advice-å¢å¼º",normalizedTitle:"advice(å¢å¼º)",charIndex:480},{level:4,title:"è¿æ¥ç¹(join point)",slug:"è¿æ¥ç¹-join-point",normalizedTitle:"è¿æ¥ç¹(join point)",charIndex:832},{level:4,title:"åç¹(point cut)",slug:"åç¹-point-cut",normalizedTitle:"åç¹(point cut)",charIndex:1114},{level:4,title:"å³äº join point å point cut çåºå«",slug:"å³äº-join-point-å-point-cut-çåºå«",normalizedTitle:"å³äº join point å point cut çåºå«",charIndex:1424},{level:4,title:"introduction",slug:"introduction",normalizedTitle:"introduction",charIndex:1697},{level:4,title:"ç®æ å¯¹è±¡(Target)",slug:"ç®æ å¯¹è±¡-target",normalizedTitle:"ç®æ å¯¹è±¡(target)",charIndex:1839},{level:4,title:"AOP proxy",slug:"aop-proxy",normalizedTitle:"aop proxy",charIndex:2028},{level:4,title:"ç»å¥(Weaving)",slug:"ç»å¥-weaving",normalizedTitle:"ç»å¥(weaving)",charIndex:2144},{level:3,title:"advice çç±»å",slug:"advice-çç±»å",normalizedTitle:"advice çç±»å",charIndex:2365},{level:3,title:"å³äº AOP Proxy",slug:"å³äº-aop-proxy",normalizedTitle:"å³äº aop proxy",charIndex:2811},{level:3,title:"å½»åºçè§£ aspect, join point, point cut, advice",slug:"å½»åºçè§£-aspect-join-point-point-cut-advice",normalizedTitle:"å½»åºçè§£ aspect, join point, point cut, advice",charIndex:3113},{level:2,title:"@AspectJ æ¯æ",slug:"aspectj-æ¯æ",normalizedTitle:"@aspectj æ¯æ",charIndex:4839},{level:3,title:"ä½¿è½ @AspectJ æ¯æ",slug:"ä½¿è½-aspectj-æ¯æ",normalizedTitle:"ä½¿è½ @aspectj æ¯æ",charIndex:4980},{level:4,title:"ä½¿ç¨ Java Configuration æ¹å¼ä½¿è½@AspectJ",slug:"ä½¿ç¨-java-configuration-æ¹å¼ä½¿è½-aspectj",normalizedTitle:"ä½¿ç¨ java configuration æ¹å¼ä½¿è½@aspectj",charIndex:5093},{level:4,title:"ä½¿ç¨ XML æ¹å¼ä½¿è½@AspectJ",slug:"ä½¿ç¨-xml-æ¹å¼ä½¿è½-aspectj",normalizedTitle:"ä½¿ç¨ xml æ¹å¼ä½¿è½@aspectj",charIndex:5199},{level:3,title:"å®ä¹ aspect(åé¢)",slug:"å®ä¹-aspect-åé¢",normalizedTitle:"å®ä¹ aspect(åé¢)",charIndex:5250},{level:3,title:"å£°æ pointcut",slug:"å£°æ-pointcut",normalizedTitle:"å£°æ pointcut",charIndex:5576},{level:4,title:"åç¹æ å¿ç¬¦(designator)",slug:"åç¹æ å¿ç¬¦-designator",normalizedTitle:"åç¹æ å¿ç¬¦(designator)",charIndex:6017},{level:5,title:"execution",slug:"execution",normalizedTitle:"execution",charIndex:870},{level:5,title:"within",slug:"within",normalizedTitle:"within",charIndex:6276},{level:5,title:"this ä¸ target",slug:"this-ä¸-target",normalizedTitle:"this ä¸ target",charIndex:6446},{level:5,title:"bean",slug:"bean",normalizedTitle:"bean",charIndex:1793},{level:5,title:"args",slug:"args",normalizedTitle:"args",charIndex:6760},{level:5,title:"@annotation",slug:"annotation",normalizedTitle:"@annotation",charIndex:7769},{level:4,title:"å¸¸è§çåç¹è¡¨è¾¾å¼",slug:"å¸¸è§çåç¹è¡¨è¾¾å¼",normalizedTitle:"å¸¸è§çåç¹è¡¨è¾¾å¼",charIndex:7913},{level:5,title:"å¹éæ¹æ³ç­¾å",slug:"å¹éæ¹æ³ç­¾å",normalizedTitle:"å¹éæ¹æ³ç­¾å",charIndex:7925},{level:5,title:"å¹éç±»åç­¾å",slug:"å¹éç±»åç­¾å",normalizedTitle:"å¹éç±»åç­¾å",charIndex:8305},{level:5,title:"å¹é Bean åå­",slug:"å¹é-bean-åå­",normalizedTitle:"å¹é bean åå­",charIndex:8498},{level:5,title:"åç¹è¡¨è¾¾å¼ç»å",slug:"åç¹è¡¨è¾¾å¼ç»å",normalizedTitle:"åç¹è¡¨è¾¾å¼ç»å",charIndex:8555},{level:3,title:"å£°æ advice",slug:"å£°æ-advice",normalizedTitle:"å£°æ advice",charIndex:8733},{level:4,title:"Before advice",slug:"before-advice",normalizedTitle:"before advice",charIndex:8918},{level:4,title:"around advice",slug:"around-advice",normalizedTitle:"around advice",charIndex:2732},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:10705}],headersStr:"AOP æ¦å¿µ ä»ä¹æ¯ AOP æ¯è¯­ Aspect(åé¢) advice(å¢å¼º) è¿æ¥ç¹(join point) åç¹(point cut) å³äº join point å point cut çåºå« introduction ç®æ å¯¹è±¡(Target) AOP proxy ç»å¥(Weaving) advice çç±»å å³äº AOP Proxy å½»åºçè§£ aspect, join point, point cut, advice @AspectJ æ¯æ ä½¿è½ @AspectJ æ¯æ ä½¿ç¨ Java Configuration æ¹å¼ä½¿è½@AspectJ ä½¿ç¨ XML æ¹å¼ä½¿è½@AspectJ å®ä¹ aspect(åé¢) å£°æ pointcut åç¹æ å¿ç¬¦(designator) execution within this ä¸ target bean args @annotation å¸¸è§çåç¹è¡¨è¾¾å¼ å¹éæ¹æ³ç­¾å å¹éç±»åç­¾å å¹é Bean åå­ åç¹è¡¨è¾¾å¼ç»å å£°æ advice Before advice around advice åèèµæ",content:'# Spring AOP\n\n\n# AOP æ¦å¿µ\n\n\n# ä»ä¹æ¯ AOP\n\nAOP(Aspect-Oriented Programmingï¼å³ é¢ååé¢ç¼ç¨)ä¸ OOP( Object-Oriented Programmingï¼é¢åå¯¹è±¡ç¼ç¨) ç¸è¾ç¸æï¼æä¾äºä¸ OOP ä¸åçæ½è±¡è½¯ä»¶ç»æçè§è§ã\n\nå¨ OOP ä¸­ï¼æä»¬ä»¥ç±»(class)ä½ä¸ºæä»¬çåºæ¬ååï¼è AOP ä¸­çåºæ¬ååæ¯ Aspect(åé¢)\n\n\n# æ¯è¯­\n\n# Aspect(åé¢)\n\naspect ç± pointcount å advice ç»æ, å®æ¢åå«äºæ¨ªåé»è¾çå®ä¹, ä¹åæ¬äºè¿æ¥ç¹çå®ä¹. Spring AOP å°±æ¯è´è´£å®æ½åé¢çæ¡æ¶, å®å°åé¢æå®ä¹çæ¨ªåé»è¾ç»å¥å°åé¢ææå®çè¿æ¥ç¹ä¸­. AOP çå·¥ä½éå¿å¨äºå¦ä½å°å¢å¼ºç»å¥ç®æ å¯¹è±¡çè¿æ¥ç¹ä¸, è¿éåå«ä¸¤ä¸ªå·¥ä½:\n\n 1. å¦ä½éè¿ pointcut å advice å®ä½å°ç¹å®ç joinpoint ä¸\n 2. å¦ä½å¨ advice ä¸­ç¼ååé¢ä»£ç .\n\nå¯ä»¥ç®åå°è®¤ä¸º, ä½¿ç¨ @Aspect æ³¨è§£çç±»å°±æ¯åé¢.\n\n# advice(å¢å¼º)\n\nç± aspect æ·»å å°ç¹å®ç join point(å³æ»¡è¶³ point cut è§åç join point) çä¸æ®µä»£ç . è®¸å¤ AOP æ¡æ¶, åæ¬ Spring AOP, ä¼å° advice æ¨¡æä¸ºä¸ä¸ªæ¦æªå¨(interceptor), å¹¶ä¸å¨ join point ä¸ç»´æ¤å¤ä¸ª advice, è¿è¡å±å±æ¦æª. ä¾å¦ HTTP é´æçå®ç°, æä»¬å¯ä»¥ä¸ºæ¯ä¸ªä½¿ç¨ RequestMapping æ æ³¨çæ¹æ³ç»å¥ advice, å½ HTTP è¯·æ±å°æ¥æ¶, é¦åè¿å¥å° advice ä»£ç ä¸­, å¨è¿éæä»¬å¯ä»¥åæè¿ä¸ª HTTP è¯·æ±æ¯å¦æç¸åºçæé, å¦ææ, åæ§è¡ Controller, å¦ææ²¡æ, åæåºå¼å¸¸. è¿éç advice å°±æ®æ¼çé´ææ¦æªå¨çè§è²äº.\n\n# è¿æ¥ç¹(join point)\n\n> a point during the execution of a program, such as the execution of a method or the handling of an exception. In Spring AOP, a join point always represents a method execution.\n\nç¨åºè¿è¡ä¸­çä¸äºæ¶é´ç¹, ä¾å¦ä¸ä¸ªæ¹æ³çæ§è¡, æèæ¯ä¸ä¸ªå¼å¸¸çå¤ç. å¨ Spring AOP ä¸­, join point æ»æ¯æ¹æ³çæ§è¡ç¹, å³åªææ¹æ³è¿æ¥ç¹.\n\n# åç¹(point cut)\n\nå¹é join point çè°è¯(a predicate that matches join points). Advice æ¯åç¹å®ç point cut å³èç, å¹¶ä¸å¨ point cut ç¸å¹éç join point ä¸­æ§è¡. å¨ Spring ä¸­, ææçæ¹æ³é½å¯ä»¥è®¤ä¸ºæ¯ joinpoint, ä½æ¯æä»¬å¹¶ä¸å¸æå¨ææçæ¹æ³ä¸é½æ·»å  Advice, è pointcut çä½ç¨å°±æ¯æä¾ä¸ç»è§å(ä½¿ç¨ AspectJ pointcut expression language æ¥æè¿°) æ¥å¹éjoinpoint, ç»æ»¡è¶³è§åç joinpoint æ·»å  Advice.\n\n# å³äº join point å point cut çåºå«\n\nå¨ Spring AOP ä¸­, ææçæ¹æ³æ§è¡é½æ¯ join point. è point cut æ¯ä¸ä¸ªæè¿°ä¿¡æ¯, å®ä¿®é¥°çæ¯ join point, éè¿ point cut, æä»¬å°±å¯ä»¥ç¡®å®åªäº join point å¯ä»¥è¢«ç»å¥ Advice. å æ­¤ join point å point cut æ¬è´¨ä¸å°±æ¯ä¸¤ä¸ªä¸åçº¬åº¦ä¸çä¸è¥¿. advice æ¯å¨ join point ä¸æ§è¡ç, è point cut è§å®äºåªäº join point å¯ä»¥æ§è¡åªäº advice\n\n# introduction\n\nä¸ºä¸ä¸ªç±»åæ·»å é¢å¤çæ¹æ³æå­æ®µ. Spring AOP åè®¸æä»¬ä¸º ç®æ å¯¹è±¡ å¼å¥æ°çæ¥å£(åå¯¹åºçå®ç°). ä¾å¦æä»¬å¯ä»¥ä½¿ç¨ introduction æ¥ä¸ºä¸ä¸ª bean å®ç° IsModified æ¥å£, å¹¶ä»¥æ­¤æ¥ç®å caching çå®ç°.\n\n# ç®æ å¯¹è±¡(Target)\n\nç»å¥ advice çç®æ å¯¹è±¡. ç®æ å¯¹è±¡ä¹è¢«ç§°ä¸º advised object. å ä¸º Spring AOP ä½¿ç¨è¿è¡æ¶ä»£ççæ¹å¼æ¥å®ç° aspect, å æ­¤ adviced object æ»æ¯ä¸ä¸ªä»£çå¯¹è±¡(proxied object) æ³¨æ, adviced object æçä¸æ¯åæ¥çç±», èæ¯ç»å¥ advice åæäº§ççä»£çç±».\n\n# AOP proxy\n\nä¸ä¸ªç±»è¢« AOP ç»å¥ advice, å°±ä¼äº§çä¸ä¸ªç»æç±», å®æ¯èåäºåç±»åå¢å¼ºé»è¾çä»£çç±». å¨ Spring AOP ä¸­, ä¸ä¸ª AOP ä»£çæ¯ä¸ä¸ª JDK å¨æä»£çå¯¹è±¡æ CGLIB ä»£çå¯¹è±¡.\n\n# ç»å¥(Weaving)\n\nå° aspect åå¶ä»å¯¹è±¡è¿æ¥èµ·æ¥, å¹¶åå»º adviced object çè¿ç¨. æ ¹æ®ä¸åçå®ç°ææ¯, AOP ç»å¥æä¸ç§æ¹å¼:\n\n * ç¼è¯å¨ç»å¥, è¿è¦æ±æç¹æ®ç Java ç¼è¯å¨.\n * ç±»è£è½½æç»å¥, è¿éè¦æç¹æ®çç±»è£è½½å¨.\n * å¨æä»£çç»å¥, å¨è¿è¡æä¸ºç®æ ç±»æ·»å å¢å¼º(Advice)çæå­ç±»çæ¹å¼. Spring éç¨å¨æä»£çç»å¥, è AspectJ éç¨ç¼è¯å¨ç»å¥åç±»è£è½½æç»å¥.\n\n\n# advice çç±»å\n\n * before advice, å¨ join point åè¢«æ§è¡ç advice. è½ç¶ before advice æ¯å¨ join point åè¢«æ§è¡, ä½æ¯å®å¹¶ä¸è½å¤é»æ­¢ join point çæ§è¡, é¤éåçäºå¼å¸¸(å³æä»¬å¨ before advice ä»£ç ä¸­, ä¸è½äººä¸ºå°å³å®æ¯å¦ç»§ç»­æ§è¡ join point ä¸­çä»£ç )\n * after return advice, å¨ä¸ä¸ª join point æ­£å¸¸è¿ååæ§è¡ç advice\n * after throwing advice, å½ä¸ä¸ª join point æåºå¼å¸¸åæ§è¡ç advice\n * after(final) advice, æ è®ºä¸ä¸ª join point æ¯æ­£å¸¸éåºè¿æ¯åçäºå¼å¸¸, é½ä¼è¢«æ§è¡ç advice.\n * around advice, å¨ join point åå joint point éåºåé½æ§è¡ç advice. è¿ä¸ªæ¯æå¸¸ç¨ç advice.\n\n\n# å³äº AOP Proxy\n\nSpring AOP é»è®¤ä½¿ç¨æ åç JDK å¨æä»£ç(dynamic proxy)ææ¯æ¥å®ç° AOP ä»£ç, éè¿å®, æä»¬å¯ä»¥ä¸ºä»»æçæ¥å£å®ç°ä»£ç. å¦æéè¦ä¸ºä¸ä¸ªç±»å®ç°ä»£ç, é£ä¹å¯ä»¥ä½¿ç¨ CGLIB ä»£ç. å½ä¸ä¸ªä¸å¡é»è¾å¯¹è±¡æ²¡æå®ç°æ¥å£æ¶, é£ä¹ Spring AOP å°±é»è®¤ä½¿ç¨ CGLIB æ¥ä½ä¸º AOP ä»£çäº. å³å¦ææä»¬éè¦ä¸ºä¸ä¸ªæ¹æ³ç»å¥ advice, ä½æ¯è¿ä¸ªæ¹æ³ä¸æ¯ä¸ä¸ªæ¥å£ææä¾çæ¹æ³, åæ­¤æ¶ Spring AOP ä¼ä½¿ç¨ CGLIB æ¥å®ç°å¨æä»£ç. é´äºæ­¤, Spring AOP å»ºè®®åºäºæ¥å£ç¼ç¨, å¯¹æ¥å£è¿è¡ AOP èä¸æ¯ç±».\n\n\n# å½»åºçè§£ aspect, join point, point cut, advice\n\nçå®äºä¸é¢ççè®ºé¨åç¥è¯, æç¸ä¿¡è¿æ¯ä¼æä¸å°æåæè§å° AOP çæ¦å¿µè¿æ¯å¾æ¨¡ç³, å¯¹ AOP ä¸­çåç§æ¦å¿µçè§£çè¿ä¸æ¯å¾éå½». å¶å®è¿å¾æ­£å¸¸, å ä¸º AOP ä¸­çæ¦å¿µæ¯å¨æ¯å¤ªå¤äº, æå½æ¶ä¹æ¯è±äºèå¤§å²ææ¢³çæ¸æ¥ç. ä¸é¢æä»¥ä¸ä¸ªç®åçä¾å­æ¥æ¯å»ä¸ä¸ AOP ä¸­ aspect, jointpoint, pointcut ä¸ advice ä¹é´çå³ç³».\n\nè®©æä»¬æ¥åè®¾ä¸ä¸, ä»åæä¸ä¸ªå«çªåçå°å¿å, å¨ä¸ä¸ªæé»é£é«çæä¸, è¿ä¸ªå¿åä¸­åçäºå½æ¡. ä½æ¡çå¶æååç¡ç¾, ç°åºæ²¡æçä¸ä»ä¹æä»·å¼ççº¿ç´¢. ä¸è¿ä¸å¹¸çæ¯, åä»éå£åæ¥çèçæ°å¥½å¨è¿æ¶åæ æä¸­åç°äºå¶æè¡å¶çè¿ç¨, ä½æ¯ç±äºå¤©è²å·²æ, å ä¸å¶æèçé¢, èçå¹¶æ²¡æçæ¸å¶æçé¢ç®, åªç¥éå¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸. çªåå¿çå¿ä»¤æ ¹æ®èççæè¿°, å¯¹å®é¨çå£«åµä¸å½ä»¤è¯´: å¡æ¯åç°æèº«é«ä¸å°ºäºå¯¸çç·æ§, é½è¦æè¿æ¥å®¡é®. å£«åµå½ç¶ä¸æ¢è¿èå¿ä»¤çå½ä»¤, åªå¥½æè¿åºåçææç¬¦åæ¡ä»¶çäººé½æäºèµ·æ¥.\n\næ¥è®©æä»¬çä¸ä¸ä¸é¢çä¸ä¸ªå°æäºå AOP å°åºæä»ä¹å¯¹åºå³ç³». é¦åæä»¬ç¥é, å¨ Spring AOP ä¸­ join point æä»£çæ¯æææ¹æ³çæ§è¡ç¹, è point cut æ¯ä¸ä¸ªæè¿°ä¿¡æ¯, å®ä¿®é¥°çæ¯ join point, éè¿ point cut, æä»¬å°±å¯ä»¥ç¡®å®åªäº join point å¯ä»¥è¢«ç»å¥ Advice. å¯¹åºå°æä»¬å¨ä¸é¢ä¸¾çä¾å­, æä»¬å¯ä»¥åä¸ä¸ªç®åçç±»æ¯, join point å°±ç¸å½äº çªåçå°å¿åéçç¾å§, point cut å°±ç¸å½äº èçæåçææ§, å³å¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸, è advice åæ¯æ½å å¨ç¬¦åèçææè¿°çå«çäººçå¨ä½: æè¿æ¥å®¡é®. ä¸ºä»ä¹å¯ä»¥è¿æ ·ç±»æ¯å¢?\n\n * join point --\x3e çªåçå°å¿åéçç¾å§: å ä¸ºæ ¹æ®å®ä¹, join point æ¯ææå¯è½è¢«ç»å¥ advice çåéçç¹, å¨ Spring AOP ä¸­, åå¯ä»¥è®¤ä¸ºæææ¹æ³æ§è¡ç¹é½æ¯ join point. èå¨æä»¬ä¸é¢çä¾å­ä¸­, å½æ¡åçå¨å°å¿åä¸­, æçè¯´å¨æ­¤å¿åä¸­çææäººé½æå¯è½æ¯å«çäºº.\n * point cut --\x3e ç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸: æä»¬ç¥é, ææçæ¹æ³(joint point) é½å¯ä»¥ç»å¥ advice, ä½æ¯æä»¬å¹¶ä¸å¸æå¨æææ¹æ³ä¸é½ç»å¥ advice, è pointcut çä½ç¨å°±æ¯æä¾ä¸ç»è§åæ¥å¹é joinpoint, ç»æ»¡è¶³è§åç joinpoint æ·»å  advice. åç, å¯¹äºå¿ä»¤æ¥è¯´, ä»åæåº¸, ä¹ç¥éä¸è½æå¿åä¸­çææç¾å§é½æèµ·æ¥å®¡é®, èæ¯æ ¹æ®å¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸, æç¬¦åæ¡ä»¶çäººæèµ·æ¥. å¨è¿éå¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸ å°±æ¯ä¸ä¸ªä¿®é¥°è°è¯­, å®éå®äºå¶æçèå´, æ»¡è¶³æ­¤ä¿®é¥°è§åçç¾å§é½æ¯å«çäºº, é½éè¦æèµ·æ¥å®¡é®.\n * advice --\x3e æè¿æ¥å®¡é®, advice æ¯ä¸ä¸ªå¨ä½, å³ä¸æ®µ Java ä»£ç , è¿æ®µ Java ä»£ç æ¯ä½ç¨äº point cut æéå®çé£äº join point ä¸ç. åç, å¯¹æ¯å°æä»¬çä¾å­ä¸­, æè¿æ¥å®¡é® è¿ä¸ªå¨ä½å°±æ¯å¯¹ä½ç¨äºé£äºæ»¡è¶³ ç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸ ççªåçå°å¿åéçç¾å§.\n * aspect: aspect æ¯ point cut ä¸ advice çç»å, å æ­¤å¨è¿éæä»¬å°±å¯ä»¥ç±»æ¯: "æ ¹æ®èçççº¿ç´¢, å¡æ¯åç°æèº«é«ä¸å°ºäºå¯¸çç·æ§, é½è¦æè¿æ¥å®¡é®" è¿ä¸æ´ä¸ªå¨ä½å¯ä»¥è¢«è®¤ä¸ºæ¯ä¸ä¸ª aspect.\n\næåæä»¬ä¹å¯ä»¥ä»è¯­æ³çè§åº¦æ¥ç®åç±»æ¯ä¸ä¸. æä»¬å¨å­¦è±è¯­æ¶, ç»å¸¸ä¼æ¥è§¦ä»ä¹ å®è¯­, è¢«å¨å¥ ä¹ç±»çæ¦å¿µ, é£ä¹å¯ä»¥åä¸ä¸ªä¸ä¸¥è°¨çç±»æ¯, å³ joinpoint å¯ä»¥è®¤ä¸ºæ¯ä¸ä¸ª å®¾è¯­, è pointcut åå¯ä»¥ç±»æ¯ä¸ºä¿®é¥° joinpoint çå®è¯­, é£ä¹æ´ä¸ª aspect å°±å¯ä»¥æè¿°ä¸º: æ»¡è¶³ pointcut è§åç joinpoint ä¼è¢«æ·»å ç¸åºç advice æä½.\n\n\n# @AspectJ æ¯æ\n\n@AspectJ æ¯ä¸ç§ä½¿ç¨ Java æ³¨è§£æ¥å®ç° AOP çç¼ç é£æ ¼ã\n\n@AspectJ é£æ ¼ç AOP æ¯ AspectJ Project å¨ AspectJ 5 ä¸­å¼å¥ç, å¹¶ä¸ Spring ä¹æ¯æ @AspectJ ç AOP é£æ ¼.\n\n\n# ä½¿è½ @AspectJ æ¯æ\n\n@AspectJ å¯ä»¥ä»¥ XML çæ¹å¼æä»¥æ³¨è§£çæ¹å¼æ¥ä½¿è½, å¹¶ä¸ä¸è®ºä»¥åªç§æ¹å¼ä½¿è½@ASpectJ, æä»¬é½å¿é¡»ä¿è¯ aspectjweaver.jar å¨ classpath ä¸­.\n\n# ä½¿ç¨ Java Configuration æ¹å¼ä½¿è½@AspectJ\n\n@Configuration\n@EnableAspectJAutoProxy\npublic class AppConfig {\n}\n\n\n# ä½¿ç¨ XML æ¹å¼ä½¿è½@AspectJ\n\n<aop:aspectj-autoproxy/>\n\n\n\n# å®ä¹ aspect(åé¢)\n\nå½ä½¿ç¨æ³¨è§£ @Aspect æ æ³¨ä¸ä¸ª Bean å, é£ä¹ Spring æ¡æ¶ä¼èªå¨æ¶éè¿äº Bean, å¹¶æ·»å å° Spring AOP ä¸­, ä¾å¦:\n\n@Component\n@Aspect\npublic class MyTest {\n}\n\n\næ³¨æ, ä»ä»ä½¿ç¨@Aspect æ³¨è§£, å¹¶ä¸è½å°ä¸ä¸ª Java å¯¹è±¡è½¬æ¢ä¸º Bean, å æ­¤æä»¬è¿éè¦ä½¿ç¨ç±»ä¼¼ @Component ä¹ç±»çæ³¨è§£. æ³¨æ, å¦æä¸ä¸ª ç±»è¢«@Aspect æ æ³¨, åè¿ä¸ªç±»å°±ä¸è½æ¯å¶ä» aspect ç **advised object** äº, å ä¸ºä½¿ç¨ @Aspect å, è¿ä¸ªç±»å°±ä¼è¢«æé¤å¨ auto-proxying æºå¶ä¹å¤.\n\n\n# å£°æ pointcut\n\nä¸ä¸ª pointcut çå£°æç±ä¸¤é¨åç»æ:\n\n * ä¸ä¸ªæ¹æ³ç­¾å, åæ¬æ¹æ³ååç¸å³åæ°\n * ä¸ä¸ª pointcut è¡¨è¾¾å¼, ç¨æ¥æå®åªäºæ¹æ³æ§è¡æ¯æä»¬æå´è¶£ç(å³å æ­¤å¯ä»¥ç»å¥ advice).\n\nå¨@AspectJ é£æ ¼ç AOP ä¸­, æä»¬ä½¿ç¨ä¸ä¸ªæ¹æ³æ¥æè¿° pointcut, å³:\n\n@Pointcut("execution(* com.xys.service.UserService.*(..))") // åç¹è¡¨è¾¾å¼\nprivate void dataAccessOperation() {} // åç¹åé¢\n\n\nè¿ä¸ªæ¹æ³å¿é¡»æ è¿åå¼. è¿ä¸ªæ¹æ³æ¬èº«å°±æ¯ pointcut signature, pointcut è¡¨è¾¾å¼ä½¿ç¨@Pointcut æ³¨è§£æå®. ä¸é¢æä»¬ç®åå°å®ä¹äºä¸ä¸ª pointcut, è¿ä¸ª pointcut ææè¿°çæ¯: å¹éææå¨å com.xys.service.UserService ä¸çæææ¹æ³çæ§è¡.\n\n# åç¹æ å¿ç¬¦(designator)\n\nAspectJ5 çåç¹è¡¨è¾¾å¼ç±æ å¿ç¬¦(designator)åæä½åæ°ç»æ. å¦ "execution(* greetTo(..))" çåç¹è¡¨è¾¾å¼, **execution** å°±æ¯ æ å¿ç¬¦, èåæ¬å·éç *****greetTo(..) å°±æ¯æä½åæ°\n\n# execution\n\nå¹é join point çæ§è¡, ä¾å¦ "execution(* hello(..))" è¡¨ç¤ºå¹éææç®æ ç±»ä¸­ç hello() æ¹æ³. è¿ä¸ªæ¯æåºæ¬ç pointcut æ å¿ç¬¦.\n\n# within\n\nå¹éç¹å®åä¸çææ join point, ä¾å¦ within(com.xys.*) è¡¨ç¤º com.xys åä¸­çææè¿æ¥ç¹, å³åä¸­çææç±»çæææ¹æ³. èwithin(com.xys.service.*Service) è¡¨ç¤ºå¨ com.xys.service åä¸­ææä»¥ Service ç»å°¾çç±»çææçè¿æ¥ç¹.\n\n# this ä¸ target\n\nthis çä½ç¨æ¯å¹éä¸ä¸ª bean, è¿ä¸ª bean(Spring AOP proxy) æ¯ä¸ä¸ªç»å®ç±»åçå®ä¾(instance of). è target å¹éçæ¯ä¸ä¸ªç®æ å¯¹è±¡(target object, å³éè¦ç»å¥ advice çåå§çç±»), æ­¤å¯¹è±¡æ¯ä¸ä¸ªç»å®ç±»åçå®ä¾(instance of).\n\n# bean\n\nå¹é bean åå­ä¸ºæå®å¼ç bean ä¸çæææ¹æ³, ä¾å¦:\n\nbean(*Service) // å¹éåå­åç¼ä¸º Service ç bean ä¸çæææ¹æ³\nbean(myService) // å¹éåå­ä¸º myService ç bean ä¸çæææ¹æ³\n\n\n# args\n\nå¹éåæ°æ»¡è¶³è¦æ±ççæ¹æ³. ä¾å¦:\n\n@Pointcut("within(com.xys.demo2.*)")\npublic void pointcut2() {\n}\n\n@Before(value = "pointcut2()  &&  args(name)")\npublic void doSomething(String name) {\n    logger.info("---page: {}---", name);\n}\n\n\n@Service\npublic class NormalService {\n    private Logger logger = LoggerFactory.getLogger(getClass());\n\n    public void someMethod() {\n        logger.info("---NormalService: someMethod invoked---");\n    }\n\n    public String test(String name) {\n        logger.info("---NormalService: test invoked---");\n        return "æå¡ä¸åæ­£å¸¸";\n    }\n}\n\n\nå½ NormalService.test æ§è¡æ¶, å advice doSomething å°±ä¼æ§è¡, test æ¹æ³çåæ° name å°±ä¼ä¼ éå° doSomething ä¸­.\n\nå¸¸ç¨ä¾å­:\n\n// å¹éåªæä¸ä¸ªåæ° name çæ¹æ³\n@Before(value = "aspectMethod()  &&  args(name)")\npublic void doSomething(String name) {\n}\n\n// å¹éç¬¬ä¸ä¸ªåæ°ä¸º name çæ¹æ³\n@Before(value = "aspectMethod()  &&  args(name, ..)")\npublic void doSomething(String name) {\n}\n\n// å¹éç¬¬äºä¸ªåæ°ä¸º name çæ¹æ³\nBefore(value = "aspectMethod()  &&  args(*, name, ..)")\npublic void doSomething(String name) {\n}\n\n\n# @annotation\n\nå¹éç±æå®æ³¨è§£ææ æ³¨çæ¹æ³, ä¾å¦:\n\n@Pointcut("@annotation(com.xys.demo1.AuthChecker)")\npublic void pointcut() {\n}\n\n\nåå¹éç±æ³¨è§£ AuthChecker ææ æ³¨çæ¹æ³.\n\n# å¸¸è§çåç¹è¡¨è¾¾å¼\n\n# å¹éæ¹æ³ç­¾å\n\n// å¹éæå®åä¸­çææçæ¹æ³\nexecution(* com.xys.service.*(..))\n\n// å¹éå½ååä¸­çæå®ç±»çæææ¹æ³\nexecution(* UserService.*(..))\n\n// å¹éæå®åä¸­çææ public æ¹æ³\nexecution(public * com.xys.service.*(..))\n\n// å¹éæå®åä¸­çææ public æ¹æ³, å¹¶ä¸è¿åå¼æ¯ int ç±»åçæ¹æ³\nexecution(public int com.xys.service.*(..))\n\n// å¹éæå®åä¸­çææ public æ¹æ³, å¹¶ä¸ç¬¬ä¸ä¸ªåæ°æ¯ String, è¿åå¼æ¯ int ç±»åçæ¹æ³\nexecution(public int com.xys.service.*(String name, ..))\n\n\n# å¹éç±»åç­¾å\n\n// å¹éæå®åä¸­çææçæ¹æ³, ä½ä¸åæ¬å­å\nwithin(com.xys.service.*)\n\n// å¹éæå®åä¸­çææçæ¹æ³, åæ¬å­å\nwithin(com.xys.service..*)\n\n// å¹éå½ååä¸­çæå®ç±»ä¸­çæ¹æ³\nwithin(UserService)\n\n\n// å¹éä¸ä¸ªæ¥å£çææå®ç°ç±»ä¸­çå®ç°çæ¹æ³\nwithin(UserDao+)\n\n\n# å¹é Bean åå­\n\n// å¹éä»¥æå®åå­ç»å°¾ç Bean ä¸­çæææ¹æ³\nbean(*Service)\n\n\n# åç¹è¡¨è¾¾å¼ç»å\n\n// å¹éä»¥ Service æ ServiceImpl ç»å°¾ç bean\nbean(*Service || *ServiceImpl)\n\n// å¹éåå­ä»¥ Service ç»å°¾, å¹¶ä¸å¨å com.xys.service ä¸­ç bean\nbean(*Service) && within(com.xys.service.*)\n\n\n\n# å£°æ advice\n\nadvice æ¯åä¸ä¸ª pointcut è¡¨è¾¾å¼å³èå¨ä¸èµ·ç, å¹¶ä¸ä¼å¨å¹éç join point çæ¹æ³æ§è¡çå/å/å¨å´ è¿è¡. pointcut è¡¨è¾¾å¼å¯ä»¥æ¯ç®åçä¸ä¸ª pointcut åå­çå¼ç¨, æèæ¯å®æ´ç pointcut è¡¨è¾¾å¼. ä¸é¢æä»¬ä»¥å ä¸ªç®åç advice ä¸ºä¾å­, æ¥çä¸ä¸ä¸ä¸ª advice æ¯å¦ä½å£°æç.\n\n# Before advice\n\n/**\n * @author xiongyongshun\n * @version 1.0\n * @created 16/9/9 13:13\n */\n@Component\n@Aspect\npublic class BeforeAspectTest {\n    // å®ä¹ä¸ä¸ª Pointcut, ä½¿ç¨ åç¹è¡¨è¾¾å¼å½æ° æ¥æè¿°å¯¹åªäº Join point ä½¿ç¨ advise.\n    @Pointcut("execution(* com.xys.service.UserService.*(..))")\n    public void dataAccessOperation() {\n    }\n}\n\n\n@Component\n@Aspect\npublic class AdviseDefine {\n    // å®ä¹ advise\n    @Before("com.xys.aspect.PointcutDefine.dataAccessOperation()")\n    public void doBeforeAccessCheck(JoinPoint joinPoint) {\n        System.out.println("*****Before advise, method: " + joinPoint.getSignature().toShortString() + " *****");\n    }\n}\n\n\nè¿é, @Before å¼ç¨äºä¸ä¸ª pointcut, å³ "com.xys.aspect.PointcutDefine.dataAccessOperation()" æ¯ä¸ä¸ª pointcut çåå­. å¦ææä»¬å¨ advice å¨åç½® pointcut, åå¯ä»¥:\n\n@Component\n@Aspect\npublic class AdviseDefine {\n    // å° pointcut å advice åæ¶å®ä¹\n    @Before("within(com.xys.service..*)")\n    public void doAccessCheck(JoinPoint joinPoint) {\n        System.out.println("*****doAccessCheck, Before advise, method: " + joinPoint.getSignature().toShortString() + " *****");\n    }\n}\n\n\n# around advice\n\naround advice æ¯è¾ç¹å«, å®å¯ä»¥å¨ä¸ä¸ªæ¹æ³çä¹åä¹ååä¹åæ·»å ä¸åçæä½, å¹¶ä¸çè³å¯ä»¥å³å®ä½æ¶, å¦ä½, æ¯å¦è°ç¨å¹éå°çæ¹æ³.\n\n@Component\n@Aspect\npublic class AdviseDefine {\n    // å®ä¹ advise\n    @Around("com.xys.aspect.PointcutDefine.dataAccessOperation()")\n    public Object doAroundAccessCheck(ProceedingJoinPoint pjp) throws Throwable {\n        StopWatch stopWatch = new StopWatch();\n        stopWatch.start();\n        // å¼å§\n        Object retVal = pjp.proceed();\n        stopWatch.stop();\n        // ç»æ\n        System.out.println("invoke method: " + pjp.getSignature().getName() + ", elapsed time: " + stopWatch.getTotalTimeMillis());\n        return retVal;\n    }\n}\n\n\naround advice ååé¢ç before advice å·®ä¸å¤, åªæ¯æä»¬ææ³¨è§£ @Before æ¹ä¸ºäº @Around äº.\n\n\n# åèèµæ\n\n * ã Spring å®æï¼ç¬¬ 4 çï¼ã',normalizedContent:'# spring aop\n\n\n# aop æ¦å¿µ\n\n\n# ä»ä¹æ¯ aop\n\naop(aspect-oriented programmingï¼å³ é¢ååé¢ç¼ç¨)ä¸ oop( object-oriented programmingï¼é¢åå¯¹è±¡ç¼ç¨) ç¸è¾ç¸æï¼æä¾äºä¸ oop ä¸åçæ½è±¡è½¯ä»¶ç»æçè§è§ã\n\nå¨ oop ä¸­ï¼æä»¬ä»¥ç±»(class)ä½ä¸ºæä»¬çåºæ¬ååï¼è aop ä¸­çåºæ¬ååæ¯ aspect(åé¢)\n\n\n# æ¯è¯­\n\n# aspect(åé¢)\n\naspect ç± pointcount å advice ç»æ, å®æ¢åå«äºæ¨ªåé»è¾çå®ä¹, ä¹åæ¬äºè¿æ¥ç¹çå®ä¹. spring aop å°±æ¯è´è´£å®æ½åé¢çæ¡æ¶, å®å°åé¢æå®ä¹çæ¨ªåé»è¾ç»å¥å°åé¢ææå®çè¿æ¥ç¹ä¸­. aop çå·¥ä½éå¿å¨äºå¦ä½å°å¢å¼ºç»å¥ç®æ å¯¹è±¡çè¿æ¥ç¹ä¸, è¿éåå«ä¸¤ä¸ªå·¥ä½:\n\n 1. å¦ä½éè¿ pointcut å advice å®ä½å°ç¹å®ç joinpoint ä¸\n 2. å¦ä½å¨ advice ä¸­ç¼ååé¢ä»£ç .\n\nå¯ä»¥ç®åå°è®¤ä¸º, ä½¿ç¨ @aspect æ³¨è§£çç±»å°±æ¯åé¢.\n\n# advice(å¢å¼º)\n\nç± aspect æ·»å å°ç¹å®ç join point(å³æ»¡è¶³ point cut è§åç join point) çä¸æ®µä»£ç . è®¸å¤ aop æ¡æ¶, åæ¬ spring aop, ä¼å° advice æ¨¡æä¸ºä¸ä¸ªæ¦æªå¨(interceptor), å¹¶ä¸å¨ join point ä¸ç»´æ¤å¤ä¸ª advice, è¿è¡å±å±æ¦æª. ä¾å¦ http é´æçå®ç°, æä»¬å¯ä»¥ä¸ºæ¯ä¸ªä½¿ç¨ requestmapping æ æ³¨çæ¹æ³ç»å¥ advice, å½ http è¯·æ±å°æ¥æ¶, é¦åè¿å¥å° advice ä»£ç ä¸­, å¨è¿éæä»¬å¯ä»¥åæè¿ä¸ª http è¯·æ±æ¯å¦æç¸åºçæé, å¦ææ, åæ§è¡ controller, å¦ææ²¡æ, åæåºå¼å¸¸. è¿éç advice å°±æ®æ¼çé´ææ¦æªå¨çè§è²äº.\n\n# è¿æ¥ç¹(join point)\n\n> a point during the execution of a program, such as the execution of a method or the handling of an exception. in spring aop, a join point always represents a method execution.\n\nç¨åºè¿è¡ä¸­çä¸äºæ¶é´ç¹, ä¾å¦ä¸ä¸ªæ¹æ³çæ§è¡, æèæ¯ä¸ä¸ªå¼å¸¸çå¤ç. å¨ spring aop ä¸­, join point æ»æ¯æ¹æ³çæ§è¡ç¹, å³åªææ¹æ³è¿æ¥ç¹.\n\n# åç¹(point cut)\n\nå¹é join point çè°è¯(a predicate that matches join points). advice æ¯åç¹å®ç point cut å³èç, å¹¶ä¸å¨ point cut ç¸å¹éç join point ä¸­æ§è¡. å¨ spring ä¸­, ææçæ¹æ³é½å¯ä»¥è®¤ä¸ºæ¯ joinpoint, ä½æ¯æä»¬å¹¶ä¸å¸æå¨ææçæ¹æ³ä¸é½æ·»å  advice, è pointcut çä½ç¨å°±æ¯æä¾ä¸ç»è§å(ä½¿ç¨ aspectj pointcut expression language æ¥æè¿°) æ¥å¹éjoinpoint, ç»æ»¡è¶³è§åç joinpoint æ·»å  advice.\n\n# å³äº join point å point cut çåºå«\n\nå¨ spring aop ä¸­, ææçæ¹æ³æ§è¡é½æ¯ join point. è point cut æ¯ä¸ä¸ªæè¿°ä¿¡æ¯, å®ä¿®é¥°çæ¯ join point, éè¿ point cut, æä»¬å°±å¯ä»¥ç¡®å®åªäº join point å¯ä»¥è¢«ç»å¥ advice. å æ­¤ join point å point cut æ¬è´¨ä¸å°±æ¯ä¸¤ä¸ªä¸åçº¬åº¦ä¸çä¸è¥¿. advice æ¯å¨ join point ä¸æ§è¡ç, è point cut è§å®äºåªäº join point å¯ä»¥æ§è¡åªäº advice\n\n# introduction\n\nä¸ºä¸ä¸ªç±»åæ·»å é¢å¤çæ¹æ³æå­æ®µ. spring aop åè®¸æä»¬ä¸º ç®æ å¯¹è±¡ å¼å¥æ°çæ¥å£(åå¯¹åºçå®ç°). ä¾å¦æä»¬å¯ä»¥ä½¿ç¨ introduction æ¥ä¸ºä¸ä¸ª bean å®ç° ismodified æ¥å£, å¹¶ä»¥æ­¤æ¥ç®å caching çå®ç°.\n\n# ç®æ å¯¹è±¡(target)\n\nç»å¥ advice çç®æ å¯¹è±¡. ç®æ å¯¹è±¡ä¹è¢«ç§°ä¸º advised object. å ä¸º spring aop ä½¿ç¨è¿è¡æ¶ä»£ççæ¹å¼æ¥å®ç° aspect, å æ­¤ adviced object æ»æ¯ä¸ä¸ªä»£çå¯¹è±¡(proxied object) æ³¨æ, adviced object æçä¸æ¯åæ¥çç±», èæ¯ç»å¥ advice åæäº§ççä»£çç±».\n\n# aop proxy\n\nä¸ä¸ªç±»è¢« aop ç»å¥ advice, å°±ä¼äº§çä¸ä¸ªç»æç±», å®æ¯èåäºåç±»åå¢å¼ºé»è¾çä»£çç±». å¨ spring aop ä¸­, ä¸ä¸ª aop ä»£çæ¯ä¸ä¸ª jdk å¨æä»£çå¯¹è±¡æ cglib ä»£çå¯¹è±¡.\n\n# ç»å¥(weaving)\n\nå° aspect åå¶ä»å¯¹è±¡è¿æ¥èµ·æ¥, å¹¶åå»º adviced object çè¿ç¨. æ ¹æ®ä¸åçå®ç°ææ¯, aop ç»å¥æä¸ç§æ¹å¼:\n\n * ç¼è¯å¨ç»å¥, è¿è¦æ±æç¹æ®ç java ç¼è¯å¨.\n * ç±»è£è½½æç»å¥, è¿éè¦æç¹æ®çç±»è£è½½å¨.\n * å¨æä»£çç»å¥, å¨è¿è¡æä¸ºç®æ ç±»æ·»å å¢å¼º(advice)çæå­ç±»çæ¹å¼. spring éç¨å¨æä»£çç»å¥, è aspectj éç¨ç¼è¯å¨ç»å¥åç±»è£è½½æç»å¥.\n\n\n# advice çç±»å\n\n * before advice, å¨ join point åè¢«æ§è¡ç advice. è½ç¶ before advice æ¯å¨ join point åè¢«æ§è¡, ä½æ¯å®å¹¶ä¸è½å¤é»æ­¢ join point çæ§è¡, é¤éåçäºå¼å¸¸(å³æä»¬å¨ before advice ä»£ç ä¸­, ä¸è½äººä¸ºå°å³å®æ¯å¦ç»§ç»­æ§è¡ join point ä¸­çä»£ç )\n * after return advice, å¨ä¸ä¸ª join point æ­£å¸¸è¿ååæ§è¡ç advice\n * after throwing advice, å½ä¸ä¸ª join point æåºå¼å¸¸åæ§è¡ç advice\n * after(final) advice, æ è®ºä¸ä¸ª join point æ¯æ­£å¸¸éåºè¿æ¯åçäºå¼å¸¸, é½ä¼è¢«æ§è¡ç advice.\n * around advice, å¨ join point åå joint point éåºåé½æ§è¡ç advice. è¿ä¸ªæ¯æå¸¸ç¨ç advice.\n\n\n# å³äº aop proxy\n\nspring aop é»è®¤ä½¿ç¨æ åç jdk å¨æä»£ç(dynamic proxy)ææ¯æ¥å®ç° aop ä»£ç, éè¿å®, æä»¬å¯ä»¥ä¸ºä»»æçæ¥å£å®ç°ä»£ç. å¦æéè¦ä¸ºä¸ä¸ªç±»å®ç°ä»£ç, é£ä¹å¯ä»¥ä½¿ç¨ cglib ä»£ç. å½ä¸ä¸ªä¸å¡é»è¾å¯¹è±¡æ²¡æå®ç°æ¥å£æ¶, é£ä¹ spring aop å°±é»è®¤ä½¿ç¨ cglib æ¥ä½ä¸º aop ä»£çäº. å³å¦ææä»¬éè¦ä¸ºä¸ä¸ªæ¹æ³ç»å¥ advice, ä½æ¯è¿ä¸ªæ¹æ³ä¸æ¯ä¸ä¸ªæ¥å£ææä¾çæ¹æ³, åæ­¤æ¶ spring aop ä¼ä½¿ç¨ cglib æ¥å®ç°å¨æä»£ç. é´äºæ­¤, spring aop å»ºè®®åºäºæ¥å£ç¼ç¨, å¯¹æ¥å£è¿è¡ aop èä¸æ¯ç±».\n\n\n# å½»åºçè§£ aspect, join point, point cut, advice\n\nçå®äºä¸é¢ççè®ºé¨åç¥è¯, æç¸ä¿¡è¿æ¯ä¼æä¸å°æåæè§å° aop çæ¦å¿µè¿æ¯å¾æ¨¡ç³, å¯¹ aop ä¸­çåç§æ¦å¿µçè§£çè¿ä¸æ¯å¾éå½». å¶å®è¿å¾æ­£å¸¸, å ä¸º aop ä¸­çæ¦å¿µæ¯å¨æ¯å¤ªå¤äº, æå½æ¶ä¹æ¯è±äºèå¤§å²ææ¢³çæ¸æ¥ç. ä¸é¢æä»¥ä¸ä¸ªç®åçä¾å­æ¥æ¯å»ä¸ä¸ aop ä¸­ aspect, jointpoint, pointcut ä¸ advice ä¹é´çå³ç³».\n\nè®©æä»¬æ¥åè®¾ä¸ä¸, ä»åæä¸ä¸ªå«çªåçå°å¿å, å¨ä¸ä¸ªæé»é£é«çæä¸, è¿ä¸ªå¿åä¸­åçäºå½æ¡. ä½æ¡çå¶æååç¡ç¾, ç°åºæ²¡æçä¸ä»ä¹æä»·å¼ççº¿ç´¢. ä¸è¿ä¸å¹¸çæ¯, åä»éå£åæ¥çèçæ°å¥½å¨è¿æ¶åæ æä¸­åç°äºå¶æè¡å¶çè¿ç¨, ä½æ¯ç±äºå¤©è²å·²æ, å ä¸å¶æèçé¢, èçå¹¶æ²¡æçæ¸å¶æçé¢ç®, åªç¥éå¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸. çªåå¿çå¿ä»¤æ ¹æ®èççæè¿°, å¯¹å®é¨çå£«åµä¸å½ä»¤è¯´: å¡æ¯åç°æèº«é«ä¸å°ºäºå¯¸çç·æ§, é½è¦æè¿æ¥å®¡é®. å£«åµå½ç¶ä¸æ¢è¿èå¿ä»¤çå½ä»¤, åªå¥½æè¿åºåçææç¬¦åæ¡ä»¶çäººé½æäºèµ·æ¥.\n\næ¥è®©æä»¬çä¸ä¸ä¸é¢çä¸ä¸ªå°æäºå aop å°åºæä»ä¹å¯¹åºå³ç³». é¦åæä»¬ç¥é, å¨ spring aop ä¸­ join point æä»£çæ¯æææ¹æ³çæ§è¡ç¹, è point cut æ¯ä¸ä¸ªæè¿°ä¿¡æ¯, å®ä¿®é¥°çæ¯ join point, éè¿ point cut, æä»¬å°±å¯ä»¥ç¡®å®åªäº join point å¯ä»¥è¢«ç»å¥ advice. å¯¹åºå°æä»¬å¨ä¸é¢ä¸¾çä¾å­, æä»¬å¯ä»¥åä¸ä¸ªç®åçç±»æ¯, join point å°±ç¸å½äº çªåçå°å¿åéçç¾å§, point cut å°±ç¸å½äº èçæåçææ§, å³å¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸, è advice åæ¯æ½å å¨ç¬¦åèçææè¿°çå«çäººçå¨ä½: æè¿æ¥å®¡é®. ä¸ºä»ä¹å¯ä»¥è¿æ ·ç±»æ¯å¢?\n\n * join point --\x3e çªåçå°å¿åéçç¾å§: å ä¸ºæ ¹æ®å®ä¹, join point æ¯ææå¯è½è¢«ç»å¥ advice çåéçç¹, å¨ spring aop ä¸­, åå¯ä»¥è®¤ä¸ºæææ¹æ³æ§è¡ç¹é½æ¯ join point. èå¨æä»¬ä¸é¢çä¾å­ä¸­, å½æ¡åçå¨å°å¿åä¸­, æçè¯´å¨æ­¤å¿åä¸­çææäººé½æå¯è½æ¯å«çäºº.\n * point cut --\x3e ç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸: æä»¬ç¥é, ææçæ¹æ³(joint point) é½å¯ä»¥ç»å¥ advice, ä½æ¯æä»¬å¹¶ä¸å¸æå¨æææ¹æ³ä¸é½ç»å¥ advice, è pointcut çä½ç¨å°±æ¯æä¾ä¸ç»è§åæ¥å¹é joinpoint, ç»æ»¡è¶³è§åç joinpoint æ·»å  advice. åç, å¯¹äºå¿ä»¤æ¥è¯´, ä»åæåº¸, ä¹ç¥éä¸è½æå¿åä¸­çææç¾å§é½æèµ·æ¥å®¡é®, èæ¯æ ¹æ®å¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸, æç¬¦åæ¡ä»¶çäººæèµ·æ¥. å¨è¿éå¶ææ¯ä¸ªç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸ å°±æ¯ä¸ä¸ªä¿®é¥°è°è¯­, å®éå®äºå¶æçèå´, æ»¡è¶³æ­¤ä¿®é¥°è§åçç¾å§é½æ¯å«çäºº, é½éè¦æèµ·æ¥å®¡é®.\n * advice --\x3e æè¿æ¥å®¡é®, advice æ¯ä¸ä¸ªå¨ä½, å³ä¸æ®µ java ä»£ç , è¿æ®µ java ä»£ç æ¯ä½ç¨äº point cut æéå®çé£äº join point ä¸ç. åç, å¯¹æ¯å°æä»¬çä¾å­ä¸­, æè¿æ¥å®¡é® è¿ä¸ªå¨ä½å°±æ¯å¯¹ä½ç¨äºé£äºæ»¡è¶³ ç·æ§, èº«é«çº¦ä¸å°ºäºå¯¸ ççªåçå°å¿åéçç¾å§.\n * aspect: aspect æ¯ point cut ä¸ advice çç»å, å æ­¤å¨è¿éæä»¬å°±å¯ä»¥ç±»æ¯: "æ ¹æ®èçççº¿ç´¢, å¡æ¯åç°æèº«é«ä¸å°ºäºå¯¸çç·æ§, é½è¦æè¿æ¥å®¡é®" è¿ä¸æ´ä¸ªå¨ä½å¯ä»¥è¢«è®¤ä¸ºæ¯ä¸ä¸ª aspect.\n\næåæä»¬ä¹å¯ä»¥ä»è¯­æ³çè§åº¦æ¥ç®åç±»æ¯ä¸ä¸. æä»¬å¨å­¦è±è¯­æ¶, ç»å¸¸ä¼æ¥è§¦ä»ä¹ å®è¯­, è¢«å¨å¥ ä¹ç±»çæ¦å¿µ, é£ä¹å¯ä»¥åä¸ä¸ªä¸ä¸¥è°¨çç±»æ¯, å³ joinpoint å¯ä»¥è®¤ä¸ºæ¯ä¸ä¸ª å®¾è¯­, è pointcut åå¯ä»¥ç±»æ¯ä¸ºä¿®é¥° joinpoint çå®è¯­, é£ä¹æ´ä¸ª aspect å°±å¯ä»¥æè¿°ä¸º: æ»¡è¶³ pointcut è§åç joinpoint ä¼è¢«æ·»å ç¸åºç advice æä½.\n\n\n# @aspectj æ¯æ\n\n@aspectj æ¯ä¸ç§ä½¿ç¨ java æ³¨è§£æ¥å®ç° aop çç¼ç é£æ ¼ã\n\n@aspectj é£æ ¼ç aop æ¯ aspectj project å¨ aspectj 5 ä¸­å¼å¥ç, å¹¶ä¸ spring ä¹æ¯æ @aspectj ç aop é£æ ¼.\n\n\n# ä½¿è½ @aspectj æ¯æ\n\n@aspectj å¯ä»¥ä»¥ xml çæ¹å¼æä»¥æ³¨è§£çæ¹å¼æ¥ä½¿è½, å¹¶ä¸ä¸è®ºä»¥åªç§æ¹å¼ä½¿è½@aspectj, æä»¬é½å¿é¡»ä¿è¯ aspectjweaver.jar å¨ classpath ä¸­.\n\n# ä½¿ç¨ java configuration æ¹å¼ä½¿è½@aspectj\n\n@configuration\n@enableaspectjautoproxy\npublic class appconfig {\n}\n\n\n# ä½¿ç¨ xml æ¹å¼ä½¿è½@aspectj\n\n<aop:aspectj-autoproxy/>\n\n\n\n# å®ä¹ aspect(åé¢)\n\nå½ä½¿ç¨æ³¨è§£ @aspect æ æ³¨ä¸ä¸ª bean å, é£ä¹ spring æ¡æ¶ä¼èªå¨æ¶éè¿äº bean, å¹¶æ·»å å° spring aop ä¸­, ä¾å¦:\n\n@component\n@aspect\npublic class mytest {\n}\n\n\næ³¨æ, ä»ä»ä½¿ç¨@aspect æ³¨è§£, å¹¶ä¸è½å°ä¸ä¸ª java å¯¹è±¡è½¬æ¢ä¸º bean, å æ­¤æä»¬è¿éè¦ä½¿ç¨ç±»ä¼¼ @component ä¹ç±»çæ³¨è§£. æ³¨æ, å¦æä¸ä¸ª ç±»è¢«@aspect æ æ³¨, åè¿ä¸ªç±»å°±ä¸è½æ¯å¶ä» aspect ç **advised object** äº, å ä¸ºä½¿ç¨ @aspect å, è¿ä¸ªç±»å°±ä¼è¢«æé¤å¨ auto-proxying æºå¶ä¹å¤.\n\n\n# å£°æ pointcut\n\nä¸ä¸ª pointcut çå£°æç±ä¸¤é¨åç»æ:\n\n * ä¸ä¸ªæ¹æ³ç­¾å, åæ¬æ¹æ³ååç¸å³åæ°\n * ä¸ä¸ª pointcut è¡¨è¾¾å¼, ç¨æ¥æå®åªäºæ¹æ³æ§è¡æ¯æä»¬æå´è¶£ç(å³å æ­¤å¯ä»¥ç»å¥ advice).\n\nå¨@aspectj é£æ ¼ç aop ä¸­, æä»¬ä½¿ç¨ä¸ä¸ªæ¹æ³æ¥æè¿° pointcut, å³:\n\n@pointcut("execution(* com.xys.service.userservice.*(..))") // åç¹è¡¨è¾¾å¼\nprivate void dataaccessoperation() {} // åç¹åé¢\n\n\nè¿ä¸ªæ¹æ³å¿é¡»æ è¿åå¼. è¿ä¸ªæ¹æ³æ¬èº«å°±æ¯ pointcut signature, pointcut è¡¨è¾¾å¼ä½¿ç¨@pointcut æ³¨è§£æå®. ä¸é¢æä»¬ç®åå°å®ä¹äºä¸ä¸ª pointcut, è¿ä¸ª pointcut ææè¿°çæ¯: å¹éææå¨å com.xys.service.userservice ä¸çæææ¹æ³çæ§è¡.\n\n# åç¹æ å¿ç¬¦(designator)\n\naspectj5 çåç¹è¡¨è¾¾å¼ç±æ å¿ç¬¦(designator)åæä½åæ°ç»æ. å¦ "execution(* greetto(..))" çåç¹è¡¨è¾¾å¼, **execution** å°±æ¯ æ å¿ç¬¦, èåæ¬å·éç *****greetto(..) å°±æ¯æä½åæ°\n\n# execution\n\nå¹é join point çæ§è¡, ä¾å¦ "execution(* hello(..))" è¡¨ç¤ºå¹éææç®æ ç±»ä¸­ç hello() æ¹æ³. è¿ä¸ªæ¯æåºæ¬ç pointcut æ å¿ç¬¦.\n\n# within\n\nå¹éç¹å®åä¸çææ join point, ä¾å¦ within(com.xys.*) è¡¨ç¤º com.xys åä¸­çææè¿æ¥ç¹, å³åä¸­çææç±»çæææ¹æ³. èwithin(com.xys.service.*service) è¡¨ç¤ºå¨ com.xys.service åä¸­ææä»¥ service ç»å°¾çç±»çææçè¿æ¥ç¹.\n\n# this ä¸ target\n\nthis çä½ç¨æ¯å¹éä¸ä¸ª bean, è¿ä¸ª bean(spring aop proxy) æ¯ä¸ä¸ªç»å®ç±»åçå®ä¾(instance of). è target å¹éçæ¯ä¸ä¸ªç®æ å¯¹è±¡(target object, å³éè¦ç»å¥ advice çåå§çç±»), æ­¤å¯¹è±¡æ¯ä¸ä¸ªç»å®ç±»åçå®ä¾(instance of).\n\n# bean\n\nå¹é bean åå­ä¸ºæå®å¼ç bean ä¸çæææ¹æ³, ä¾å¦:\n\nbean(*service) // å¹éåå­åç¼ä¸º service ç bean ä¸çæææ¹æ³\nbean(myservice) // å¹éåå­ä¸º myservice ç bean ä¸çæææ¹æ³\n\n\n# args\n\nå¹éåæ°æ»¡è¶³è¦æ±ççæ¹æ³. ä¾å¦:\n\n@pointcut("within(com.xys.demo2.*)")\npublic void pointcut2() {\n}\n\n@before(value = "pointcut2()  &&  args(name)")\npublic void dosomething(string name) {\n    logger.info("---page: {}---", name);\n}\n\n\n@service\npublic class normalservice {\n    private logger logger = loggerfactory.getlogger(getclass());\n\n    public void somemethod() {\n        logger.info("---normalservice: somemethod invoked---");\n    }\n\n    public string test(string name) {\n        logger.info("---normalservice: test invoked---");\n        return "æå¡ä¸åæ­£å¸¸";\n    }\n}\n\n\nå½ normalservice.test æ§è¡æ¶, å advice dosomething å°±ä¼æ§è¡, test æ¹æ³çåæ° name å°±ä¼ä¼ éå° dosomething ä¸­.\n\nå¸¸ç¨ä¾å­:\n\n// å¹éåªæä¸ä¸ªåæ° name çæ¹æ³\n@before(value = "aspectmethod()  &&  args(name)")\npublic void dosomething(string name) {\n}\n\n// å¹éç¬¬ä¸ä¸ªåæ°ä¸º name çæ¹æ³\n@before(value = "aspectmethod()  &&  args(name, ..)")\npublic void dosomething(string name) {\n}\n\n// å¹éç¬¬äºä¸ªåæ°ä¸º name çæ¹æ³\nbefore(value = "aspectmethod()  &&  args(*, name, ..)")\npublic void dosomething(string name) {\n}\n\n\n# @annotation\n\nå¹éç±æå®æ³¨è§£ææ æ³¨çæ¹æ³, ä¾å¦:\n\n@pointcut("@annotation(com.xys.demo1.authchecker)")\npublic void pointcut() {\n}\n\n\nåå¹éç±æ³¨è§£ authchecker ææ æ³¨çæ¹æ³.\n\n# å¸¸è§çåç¹è¡¨è¾¾å¼\n\n# å¹éæ¹æ³ç­¾å\n\n// å¹éæå®åä¸­çææçæ¹æ³\nexecution(* com.xys.service.*(..))\n\n// å¹éå½ååä¸­çæå®ç±»çæææ¹æ³\nexecution(* userservice.*(..))\n\n// å¹éæå®åä¸­çææ public æ¹æ³\nexecution(public * com.xys.service.*(..))\n\n// å¹éæå®åä¸­çææ public æ¹æ³, å¹¶ä¸è¿åå¼æ¯ int ç±»åçæ¹æ³\nexecution(public int com.xys.service.*(..))\n\n// å¹éæå®åä¸­çææ public æ¹æ³, å¹¶ä¸ç¬¬ä¸ä¸ªåæ°æ¯ string, è¿åå¼æ¯ int ç±»åçæ¹æ³\nexecution(public int com.xys.service.*(string name, ..))\n\n\n# å¹éç±»åç­¾å\n\n// å¹éæå®åä¸­çææçæ¹æ³, ä½ä¸åæ¬å­å\nwithin(com.xys.service.*)\n\n// å¹éæå®åä¸­çææçæ¹æ³, åæ¬å­å\nwithin(com.xys.service..*)\n\n// å¹éå½ååä¸­çæå®ç±»ä¸­çæ¹æ³\nwithin(userservice)\n\n\n// å¹éä¸ä¸ªæ¥å£çææå®ç°ç±»ä¸­çå®ç°çæ¹æ³\nwithin(userdao+)\n\n\n# å¹é bean åå­\n\n// å¹éä»¥æå®åå­ç»å°¾ç bean ä¸­çæææ¹æ³\nbean(*service)\n\n\n# åç¹è¡¨è¾¾å¼ç»å\n\n// å¹éä»¥ service æ serviceimpl ç»å°¾ç bean\nbean(*service || *serviceimpl)\n\n// å¹éåå­ä»¥ service ç»å°¾, å¹¶ä¸å¨å com.xys.service ä¸­ç bean\nbean(*service) && within(com.xys.service.*)\n\n\n\n# å£°æ advice\n\nadvice æ¯åä¸ä¸ª pointcut è¡¨è¾¾å¼å³èå¨ä¸èµ·ç, å¹¶ä¸ä¼å¨å¹éç join point çæ¹æ³æ§è¡çå/å/å¨å´ è¿è¡. pointcut è¡¨è¾¾å¼å¯ä»¥æ¯ç®åçä¸ä¸ª pointcut åå­çå¼ç¨, æèæ¯å®æ´ç pointcut è¡¨è¾¾å¼. ä¸é¢æä»¬ä»¥å ä¸ªç®åç advice ä¸ºä¾å­, æ¥çä¸ä¸ä¸ä¸ª advice æ¯å¦ä½å£°æç.\n\n# before advice\n\n/**\n * @author xiongyongshun\n * @version 1.0\n * @created 16/9/9 13:13\n */\n@component\n@aspect\npublic class beforeaspecttest {\n    // å®ä¹ä¸ä¸ª pointcut, ä½¿ç¨ åç¹è¡¨è¾¾å¼å½æ° æ¥æè¿°å¯¹åªäº join point ä½¿ç¨ advise.\n    @pointcut("execution(* com.xys.service.userservice.*(..))")\n    public void dataaccessoperation() {\n    }\n}\n\n\n@component\n@aspect\npublic class advisedefine {\n    // å®ä¹ advise\n    @before("com.xys.aspect.pointcutdefine.dataaccessoperation()")\n    public void dobeforeaccesscheck(joinpoint joinpoint) {\n        system.out.println("*****before advise, method: " + joinpoint.getsignature().toshortstring() + " *****");\n    }\n}\n\n\nè¿é, @before å¼ç¨äºä¸ä¸ª pointcut, å³ "com.xys.aspect.pointcutdefine.dataaccessoperation()" æ¯ä¸ä¸ª pointcut çåå­. å¦ææä»¬å¨ advice å¨åç½® pointcut, åå¯ä»¥:\n\n@component\n@aspect\npublic class advisedefine {\n    // å° pointcut å advice åæ¶å®ä¹\n    @before("within(com.xys.service..*)")\n    public void doaccesscheck(joinpoint joinpoint) {\n        system.out.println("*****doaccesscheck, before advise, method: " + joinpoint.getsignature().toshortstring() + " *****");\n    }\n}\n\n\n# around advice\n\naround advice æ¯è¾ç¹å«, å®å¯ä»¥å¨ä¸ä¸ªæ¹æ³çä¹åä¹ååä¹åæ·»å ä¸åçæä½, å¹¶ä¸çè³å¯ä»¥å³å®ä½æ¶, å¦ä½, æ¯å¦è°ç¨å¹éå°çæ¹æ³.\n\n@component\n@aspect\npublic class advisedefine {\n    // å®ä¹ advise\n    @around("com.xys.aspect.pointcutdefine.dataaccessoperation()")\n    public object doaroundaccesscheck(proceedingjoinpoint pjp) throws throwable {\n        stopwatch stopwatch = new stopwatch();\n        stopwatch.start();\n        // å¼å§\n        object retval = pjp.proceed();\n        stopwatch.stop();\n        // ç»æ\n        system.out.println("invoke method: " + pjp.getsignature().getname() + ", elapsed time: " + stopwatch.gettotaltimemillis());\n        return retval;\n    }\n}\n\n\naround advice ååé¢ç before advice å·®ä¸å¤, åªæ¯æä»¬ææ³¨è§£ @before æ¹ä¸ºäº @around äº.\n\n\n# åèèµæ\n\n * ã spring å®æï¼ç¬¬ 4 çï¼ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring åºç¨ä¸ä¸æçå½å¨æ",frontmatter:{title:"Spring åºç¨ä¸ä¸æçå½å¨æ",date:"2022-12-23T09:58:09.000Z",order:"09",categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/ad472e/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/09.Spring%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/09.Springåºç¨ä¸ä¸æçå½å¨æ.md",key:"v-6447466a",path:"/pages/ad472e/",headers:[{level:2,title:"Spring åºç¨ä¸ä¸æå¯å¨åå¤é¶æ®µ",slug:"spring-åºç¨ä¸ä¸æå¯å¨åå¤é¶æ®µ",normalizedTitle:"spring åºç¨ä¸ä¸æå¯å¨åå¤é¶æ®µ",charIndex:23},{level:2,title:"BeanFactory åå»ºé¶æ®µ",slug:"beanfactory-åå»ºé¶æ®µ",normalizedTitle:"beanfactory åå»ºé¶æ®µ",charIndex:260},{level:2,title:"BeanFactory åå¤é¶æ®µ",slug:"beanfactory-åå¤é¶æ®µ",normalizedTitle:"beanfactory åå¤é¶æ®µ",charIndex:813},{level:2,title:"BeanFactory åç½®å¤çé¶æ®µ",slug:"beanfactory-åç½®å¤çé¶æ®µ",normalizedTitle:"beanfactory åç½®å¤çé¶æ®µ",charIndex:1351},{level:2,title:"BeanFactory æ³¨å BeanPostProcessor é¶æ®µ",slug:"beanfactory-æ³¨å-beanpostprocessor-é¶æ®µ",normalizedTitle:"beanfactory æ³¨å beanpostprocessor é¶æ®µ",charIndex:1680},{level:2,title:"åå§åå§å»º Beanï¼MessageSource",slug:"åå§åå§å»º-bean-messagesource",normalizedTitle:"åå§åå§å»º beanï¼messagesource",charIndex:2019},{level:2,title:"åå§åå§å»º Beanï¼Spring äºä»¶å¹¿æ­å¨",slug:"åå§åå§å»º-bean-spring-äºä»¶å¹¿æ­å¨",normalizedTitle:"åå§åå§å»º beanï¼spring äºä»¶å¹¿æ­å¨",charIndex:2099},{level:2,title:"Spring åºç¨ä¸ä¸æå·æ°é¶æ®µ",slug:"spring-åºç¨ä¸ä¸æå·æ°é¶æ®µ",normalizedTitle:"spring åºç¨ä¸ä¸æå·æ°é¶æ®µ",charIndex:2192},{level:2,title:"Spring äºä»¶çå¬å¨æ³¨åé¶æ®µ",slug:"spring-äºä»¶çå¬å¨æ³¨åé¶æ®µ",normalizedTitle:"spring äºä»¶çå¬å¨æ³¨åé¶æ®µ",charIndex:2721},{level:2,title:"BeanFactory åå§åå®æé¶æ®µ",slug:"beanfactory-åå§åå®æé¶æ®µ",normalizedTitle:"beanfactory åå§åå®æé¶æ®µ",charIndex:2904},{level:2,title:"Spring åºç¨ä¸ä¸å·æ°å®æé¶æ®µ",slug:"spring-åºç¨ä¸ä¸å·æ°å®æé¶æ®µ",normalizedTitle:"spring åºç¨ä¸ä¸å·æ°å®æé¶æ®µ",charIndex:3221},{level:2,title:"Spring åºç¨ä¸ä¸æå¯å¨é¶æ®µ",slug:"spring-åºç¨ä¸ä¸æå¯å¨é¶æ®µ",normalizedTitle:"spring åºç¨ä¸ä¸æå¯å¨é¶æ®µ",charIndex:3525},{level:2,title:"Spring åºç¨ä¸ä¸æåæ­¢é¶æ®µ",slug:"spring-åºç¨ä¸ä¸æåæ­¢é¶æ®µ",normalizedTitle:"spring åºç¨ä¸ä¸æåæ­¢é¶æ®µ",charIndex:3707},{level:2,title:"Spring åºç¨ä¸ä¸æå³é­é¶æ®µ",slug:"spring-åºç¨ä¸ä¸æå³é­é¶æ®µ",normalizedTitle:"spring åºç¨ä¸ä¸æå³é­é¶æ®µ",charIndex:3888},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:4290},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:4519}],headersStr:"Spring åºç¨ä¸ä¸æå¯å¨åå¤é¶æ®µ BeanFactory åå»ºé¶æ®µ BeanFactory åå¤é¶æ®µ BeanFactory åç½®å¤çé¶æ®µ BeanFactory æ³¨å BeanPostProcessor é¶æ®µ åå§åå§å»º Beanï¼MessageSource åå§åå§å»º Beanï¼Spring äºä»¶å¹¿æ­å¨ Spring åºç¨ä¸ä¸æå·æ°é¶æ®µ Spring äºä»¶çå¬å¨æ³¨åé¶æ®µ BeanFactory åå§åå®æé¶æ®µ Spring åºç¨ä¸ä¸å·æ°å®æé¶æ®µ Spring åºç¨ä¸ä¸æå¯å¨é¶æ®µ Spring åºç¨ä¸ä¸æåæ­¢é¶æ®µ Spring åºç¨ä¸ä¸æå³é­é¶æ®µ é®é¢ åèèµæ",content:"# Spring åºç¨ä¸ä¸æçå½å¨æ\n\n\n# Spring åºç¨ä¸ä¸æå¯å¨åå¤é¶æ®µ\n\nAbstractApplicationContext#prepareRefresh() æ¹æ³\n\n * å¯å¨æ¶é´ - startupDate\n * ç¶ææ è¯ - closed(false)ãactive(true)\n * åå§å PropertySources - initPropertySources()\n * æ£éª Environment ä¸­å¿é¡»å±æ§\n * åå§åäºä»¶çå¬å¨éå\n * åå§åæ©æ Spring äºä»¶éå\n\n\n# BeanFactory åå»ºé¶æ®µ\n\nAbstractApplicationContext#obtainFreshBeanFactory() æ¹æ³\n\n * å·æ° Spring åºç¨ä¸ä¸æåºå± BeanFactory - refreshBeanFactory()\n   * éæ¯æå³é­ BeanFactoryï¼å¦æå·²å­å¨çè¯\n   * åå»º BeanFactory - createBeanFactory()\n   * è®¾ç½® BeanFactory Id\n   * è®¾ç½®âæ¯å¦åè®¸ BeanDefinition éå¤å®ä¹â - customizeBeanFactory(DefaultListableBeanFactory)\n   * è®¾ç½®âæ¯å¦åè®¸å¾ªç¯å¼ç¨ï¼ä¾èµï¼â - customizeBeanFactory(DefaultListableBeanFactory)\n   * å è½½ BeanDefinition - loadBeanDefinitions(DefaultListableBeanFactory) æ¹æ³\n   * å³èæ°å»º BeanFactory å° Spring åºç¨ä¸ä¸æ\n * è¿å Spring åºç¨ä¸ä¸æåºå± BeanFactory - getBeanFactory()\n\n\n# BeanFactory åå¤é¶æ®µ\n\nAbstractApplicationContext#prepareBeanFactory(ConfigurableListableBeanFactory) æ¹æ³\n\n * å³è ClassLoader\n * è®¾ç½® Bean è¡¨è¾¾å¼å¤çå¨\n * æ·»å  PropertyEditorRegistrar å®ç° - ResourceEditorRegistrar\n * æ·»å  Aware åè°æ¥å£ BeanPostProcessor å®ç° - ApplicationContextAwareProcessor\n * å¿½ç¥ Aware åè°æ¥å£ä½ä¸ºä¾èµæ³¨å¥æ¥å£\n * æ³¨å ResolvableDependency å¯¹è±¡ - BeanFactoryãResourceLoaderãApplicationEventPublisher ä»¥å ApplicationContext\n * æ³¨å ApplicationListenerDetector å¯¹è±¡\n * æ³¨å LoadTimeWeaverAwareProcessor å¯¹è±¡\n * æ³¨ååä¾å¯¹è±¡ - EnvironmentãJava System Properties ä»¥å OS ç¯å¢åé\n\n\n# BeanFactory åç½®å¤çé¶æ®µ\n\n * AbstractApplicationContext#postProcessBeanFactory(ConfigurableListableBeanFactory) æ¹æ³\n   * ç±å­ç±»è¦çè¯¥æ¹æ³\n * AbstractApplicationContext#invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory æ¹æ³\n   * è°ç¨ BeanFactoryPostProcessor æ BeanDefinitionRegistry åç½®å¤çæ¹æ³\n   * æ³¨å LoadTimeWeaverAwareProcessor å¯¹è±¡\n\n\n# BeanFactory æ³¨å BeanPostProcessor é¶æ®µ\n\nAbstractApplicationContext#registerBeanPostProcessors(ConfigurableListableBeanFactory) æ¹æ³\n\n * æ³¨å PriorityOrdered ç±»åç BeanPostProcessor Beans\n * æ³¨å Ordered ç±»åç BeanPostProcessor Beans\n * æ³¨åæ®é BeanPostProcessor Beans\n * æ³¨å MergedBeanDefinitionPostProcessor Beans\n * æ³¨å ApplicationListenerDetector å¯¹è±¡\n\n\n# åå§åå§å»º Beanï¼MessageSource\n\nAbstractApplicationContext#initMessageSource() æ¹æ³\n\n\n# åå§åå§å»º Beanï¼Spring äºä»¶å¹¿æ­å¨\n\nAbstractApplicationContext#initApplicationEventMulticaster() æ¹æ³\n\n\n# Spring åºç¨ä¸ä¸æå·æ°é¶æ®µ\n\nAbstractApplicationContext#onRefresh() æ¹æ³\n\nå­ç±»è¦çè¯¥æ¹æ³\n\n * org.springframework.web.context.support.AbstractRefreshableWebApplicationContext#onRefresh()\n * org.springframework.web.context.support.GenericWebApplicationContext#onRefresh()\n * org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext#onRefresh()\n * org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext#onRefresh()\n * org.springframework.web.context.support.StaticWebApplicationContext#onRefresh()\n\n\n# Spring äºä»¶çå¬å¨æ³¨åé¶æ®µ\n\nAbstractApplicationContext#registerListeners() æ¹æ³\n\n * æ·»å å½ååºç¨ä¸ä¸ææå³èç ApplicationListener å¯¹è±¡ï¼éåï¼\n * æ·»å  BeanFactory ææ³¨å ApplicationListener Beans\n * å¹¿æ­æ©æ Spring äºä»¶\n\n\n# BeanFactory åå§åå®æé¶æ®µ\n\nAbstractApplicationContext#finishBeanFactoryInitialization(ConfigurableListableBeanFactory) æ¹æ³\n\n * BeanFactory å³è ConversionService Beanï¼å¦æå­å¨\n * æ·»å  StringValueResolver å¯¹è±¡\n * ä¾èµæ¥æ¾ LoadTimeWeaverAware Bean\n * BeanFactory ä¸´æ¶ ClassLoader ç½®ä¸º null\n * BeanFactory å»ç»éç½®\n * BeanFactory åå§åéå»¶è¿åä¾ Beans\n\n\n# Spring åºç¨ä¸ä¸å·æ°å®æé¶æ®µ\n\nAbstractApplicationContext#finishRefresh() æ¹æ³\n\n * æ¸é¤ ResourceLoader ç¼å­ - clearResourceCaches() @since 5.0\n * åå§å LifecycleProcessor å¯¹è±¡ - initLifecycleProcessor()\n * è°ç¨ LifecycleProcessor#onRefresh() æ¹æ³\n * åå¸ Spring åºç¨ä¸ä¸æå·²å·æ°äºä»¶ - ContextRefreshedEvent\n * å MBeanServer æç®¡ Live Beans\n\n\n# Spring åºç¨ä¸ä¸æå¯å¨é¶æ®µ\n\nAbstractApplicationContext#start() æ¹æ³\n\n * å¯å¨ LifecycleProcessor\n   * ä¾èµæ¥æ¾ Lifecycle Beans\n   * å¯å¨ Lifecycle Beans\n * åå¸ Spring åºç¨ä¸ä¸æå·²å¯å¨äºä»¶ - ContextStartedEvent\n\n\n# Spring åºç¨ä¸ä¸æåæ­¢é¶æ®µ\n\nAbstractApplicationContext#stop() æ¹æ³\n\n * åæ­¢ LifecycleProcessor\n   * ä¾èµæ¥æ¾ Lifecycle Beans\n   * åæ­¢ Lifecycle Beans\n * åå¸ Spring åºç¨ä¸ä¸æå·²åæ­¢äºä»¶ - ContextStoppedEvent\n\n\n# Spring åºç¨ä¸ä¸æå³é­é¶æ®µ\n\nAbstractApplicationContext#close() æ¹æ³\n\n * ç¶ææ è¯ï¼active(false)ãclosed(true)\n * Live Beans JMX æ¤éæç®¡\n   * LiveBeansView.unregisterApplicationContext(ConfigurableApplicationContext)\n * åå¸ Spring åºç¨ä¸ä¸æå·²å³é­äºä»¶ - ContextClosedEvent\n * å³é­ LifecycleProcessor\n   * ä¾èµæ¥æ¾ Lifecycle Beans\n   * åæ­¢ Lifecycle Beans\n * éæ¯ Spring Beans\n * å³é­ BeanFactory\n * åè° onClose()\n * æ³¨å Shutdown Hook çº¿ç¨ï¼å¦ææ¾æ³¨åï¼\n\n\n# é®é¢\n\nSpring åºç¨ä¸ä¸æçå½å¨ææåªäºé¶æ®µï¼\n\n * å·æ°é¶æ®µ - ConfigurableApplicationContext#refresh()\n * å¯å¨é¶æ®µ - ConfigurableApplicationContext#start()\n * åæ­¢é¶æ®µ - ConfigurableApplicationContext#stop()\n * å³é­é¶æ®µ - ConfigurableApplicationContext#close()\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring åºç¨ä¸ä¸æçå½å¨æ\n\n\n# spring åºç¨ä¸ä¸æå¯å¨åå¤é¶æ®µ\n\nabstractapplicationcontext#preparerefresh() æ¹æ³\n\n * å¯å¨æ¶é´ - startupdate\n * ç¶ææ è¯ - closed(false)ãactive(true)\n * åå§å propertysources - initpropertysources()\n * æ£éª environment ä¸­å¿é¡»å±æ§\n * åå§åäºä»¶çå¬å¨éå\n * åå§åæ©æ spring äºä»¶éå\n\n\n# beanfactory åå»ºé¶æ®µ\n\nabstractapplicationcontext#obtainfreshbeanfactory() æ¹æ³\n\n * å·æ° spring åºç¨ä¸ä¸æåºå± beanfactory - refreshbeanfactory()\n   * éæ¯æå³é­ beanfactoryï¼å¦æå·²å­å¨çè¯\n   * åå»º beanfactory - createbeanfactory()\n   * è®¾ç½® beanfactory id\n   * è®¾ç½®âæ¯å¦åè®¸ beandefinition éå¤å®ä¹â - customizebeanfactory(defaultlistablebeanfactory)\n   * è®¾ç½®âæ¯å¦åè®¸å¾ªç¯å¼ç¨ï¼ä¾èµï¼â - customizebeanfactory(defaultlistablebeanfactory)\n   * å è½½ beandefinition - loadbeandefinitions(defaultlistablebeanfactory) æ¹æ³\n   * å³èæ°å»º beanfactory å° spring åºç¨ä¸ä¸æ\n * è¿å spring åºç¨ä¸ä¸æåºå± beanfactory - getbeanfactory()\n\n\n# beanfactory åå¤é¶æ®µ\n\nabstractapplicationcontext#preparebeanfactory(configurablelistablebeanfactory) æ¹æ³\n\n * å³è classloader\n * è®¾ç½® bean è¡¨è¾¾å¼å¤çå¨\n * æ·»å  propertyeditorregistrar å®ç° - resourceeditorregistrar\n * æ·»å  aware åè°æ¥å£ beanpostprocessor å®ç° - applicationcontextawareprocessor\n * å¿½ç¥ aware åè°æ¥å£ä½ä¸ºä¾èµæ³¨å¥æ¥å£\n * æ³¨å resolvabledependency å¯¹è±¡ - beanfactoryãresourceloaderãapplicationeventpublisher ä»¥å applicationcontext\n * æ³¨å applicationlistenerdetector å¯¹è±¡\n * æ³¨å loadtimeweaverawareprocessor å¯¹è±¡\n * æ³¨ååä¾å¯¹è±¡ - environmentãjava system properties ä»¥å os ç¯å¢åé\n\n\n# beanfactory åç½®å¤çé¶æ®µ\n\n * abstractapplicationcontext#postprocessbeanfactory(configurablelistablebeanfactory) æ¹æ³\n   * ç±å­ç±»è¦çè¯¥æ¹æ³\n * abstractapplicationcontext#invokebeanfactorypostprocessors(configurablelistablebeanfactory æ¹æ³\n   * è°ç¨ beanfactorypostprocessor æ beandefinitionregistry åç½®å¤çæ¹æ³\n   * æ³¨å loadtimeweaverawareprocessor å¯¹è±¡\n\n\n# beanfactory æ³¨å beanpostprocessor é¶æ®µ\n\nabstractapplicationcontext#registerbeanpostprocessors(configurablelistablebeanfactory) æ¹æ³\n\n * æ³¨å priorityordered ç±»åç beanpostprocessor beans\n * æ³¨å ordered ç±»åç beanpostprocessor beans\n * æ³¨åæ®é beanpostprocessor beans\n * æ³¨å mergedbeandefinitionpostprocessor beans\n * æ³¨å applicationlistenerdetector å¯¹è±¡\n\n\n# åå§åå§å»º beanï¼messagesource\n\nabstractapplicationcontext#initmessagesource() æ¹æ³\n\n\n# åå§åå§å»º beanï¼spring äºä»¶å¹¿æ­å¨\n\nabstractapplicationcontext#initapplicationeventmulticaster() æ¹æ³\n\n\n# spring åºç¨ä¸ä¸æå·æ°é¶æ®µ\n\nabstractapplicationcontext#onrefresh() æ¹æ³\n\nå­ç±»è¦çè¯¥æ¹æ³\n\n * org.springframework.web.context.support.abstractrefreshablewebapplicationcontext#onrefresh()\n * org.springframework.web.context.support.genericwebapplicationcontext#onrefresh()\n * org.springframework.boot.web.reactive.context.reactivewebserverapplicationcontext#onrefresh()\n * org.springframework.boot.web.servlet.context.servletwebserverapplicationcontext#onrefresh()\n * org.springframework.web.context.support.staticwebapplicationcontext#onrefresh()\n\n\n# spring äºä»¶çå¬å¨æ³¨åé¶æ®µ\n\nabstractapplicationcontext#registerlisteners() æ¹æ³\n\n * æ·»å å½ååºç¨ä¸ä¸ææå³èç applicationlistener å¯¹è±¡ï¼éåï¼\n * æ·»å  beanfactory ææ³¨å applicationlistener beans\n * å¹¿æ­æ©æ spring äºä»¶\n\n\n# beanfactory åå§åå®æé¶æ®µ\n\nabstractapplicationcontext#finishbeanfactoryinitialization(configurablelistablebeanfactory) æ¹æ³\n\n * beanfactory å³è conversionservice beanï¼å¦æå­å¨\n * æ·»å  stringvalueresolver å¯¹è±¡\n * ä¾èµæ¥æ¾ loadtimeweaveraware bean\n * beanfactory ä¸´æ¶ classloader ç½®ä¸º null\n * beanfactory å»ç»éç½®\n * beanfactory åå§åéå»¶è¿åä¾ beans\n\n\n# spring åºç¨ä¸ä¸å·æ°å®æé¶æ®µ\n\nabstractapplicationcontext#finishrefresh() æ¹æ³\n\n * æ¸é¤ resourceloader ç¼å­ - clearresourcecaches() @since 5.0\n * åå§å lifecycleprocessor å¯¹è±¡ - initlifecycleprocessor()\n * è°ç¨ lifecycleprocessor#onrefresh() æ¹æ³\n * åå¸ spring åºç¨ä¸ä¸æå·²å·æ°äºä»¶ - contextrefreshedevent\n * å mbeanserver æç®¡ live beans\n\n\n# spring åºç¨ä¸ä¸æå¯å¨é¶æ®µ\n\nabstractapplicationcontext#start() æ¹æ³\n\n * å¯å¨ lifecycleprocessor\n   * ä¾èµæ¥æ¾ lifecycle beans\n   * å¯å¨ lifecycle beans\n * åå¸ spring åºç¨ä¸ä¸æå·²å¯å¨äºä»¶ - contextstartedevent\n\n\n# spring åºç¨ä¸ä¸æåæ­¢é¶æ®µ\n\nabstractapplicationcontext#stop() æ¹æ³\n\n * åæ­¢ lifecycleprocessor\n   * ä¾èµæ¥æ¾ lifecycle beans\n   * åæ­¢ lifecycle beans\n * åå¸ spring åºç¨ä¸ä¸æå·²åæ­¢äºä»¶ - contextstoppedevent\n\n\n# spring åºç¨ä¸ä¸æå³é­é¶æ®µ\n\nabstractapplicationcontext#close() æ¹æ³\n\n * ç¶ææ è¯ï¼active(false)ãclosed(true)\n * live beans jmx æ¤éæç®¡\n   * livebeansview.unregisterapplicationcontext(configurableapplicationcontext)\n * åå¸ spring åºç¨ä¸ä¸æå·²å³é­äºä»¶ - contextclosedevent\n * å³é­ lifecycleprocessor\n   * ä¾èµæ¥æ¾ lifecycle beans\n   * åæ­¢ lifecycle beans\n * éæ¯ spring beans\n * å³é­ beanfactory\n * åè° onclose()\n * æ³¨å shutdown hook çº¿ç¨ï¼å¦ææ¾æ³¨åï¼\n\n\n# é®é¢\n\nspring åºç¨ä¸ä¸æçå½å¨ææåªäºé¶æ®µï¼\n\n * å·æ°é¶æ®µ - configurableapplicationcontext#refresh()\n * å¯å¨é¶æ®µ - configurableapplicationcontext#start()\n * åæ­¢é¶æ®µ - configurableapplicationcontext#stop()\n * å³é­é¶æ®µ - configurableapplicationcontext#close()\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring èµæºç®¡ç",frontmatter:{title:"Spring èµæºç®¡ç",date:"2019-09-04T19:46:41.000Z",order:20,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","Resource"],permalink:"/pages/a1549f/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/20.Spring%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/20.Springèµæºç®¡ç.md",key:"v-bc19b5fc",path:"/pages/a1549f/",headers:[{level:2,title:"Resource æ¥å£",slug:"resource-æ¥å£",normalizedTitle:"resource æ¥å£",charIndex:35},{level:2,title:"åç½®ç Resource å®ç°",slug:"åç½®ç-resource-å®ç°",normalizedTitle:"åç½®ç resource å®ç°",charIndex:1403},{level:2,title:"ResourceLoader æ¥å£",slug:"resourceloader-æ¥å£",normalizedTitle:"resourceloader æ¥å£",charIndex:2964},{level:2,title:"ResourcePatternResolver æ¥å£",slug:"resourcepatternresolver-æ¥å£",normalizedTitle:"resourcepatternresolver æ¥å£",charIndex:4099},{level:2,title:"ResourceLoaderAware æ¥å£",slug:"resourceloaderaware-æ¥å£",normalizedTitle:"resourceloaderaware æ¥å£",charIndex:4743},{level:2,title:"èµæºä¾èµ",slug:"èµæºä¾èµ",normalizedTitle:"èµæºä¾èµ",charIndex:5654},{level:2,title:"åºç¨ä¸ä¸æåèµæºè·¯å¾",slug:"åºç¨ä¸ä¸æåèµæºè·¯å¾",normalizedTitle:"åºç¨ä¸ä¸æåèµæºè·¯å¾",charIndex:7137},{level:3,title:"æé åºç¨ä¸ä¸æ",slug:"æé åºç¨ä¸ä¸æ",normalizedTitle:"æé åºç¨ä¸ä¸æ",charIndex:7152},{level:3,title:"ä½¿ç¨ééç¬¦æé åºç¨ä¸ä¸æ",slug:"ä½¿ç¨ééç¬¦æé åºç¨ä¸ä¸æ",normalizedTitle:"ä½¿ç¨ééç¬¦æé åºç¨ä¸ä¸æ",charIndex:7646},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:8078},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:8146}],headersStr:"Resource æ¥å£ åç½®ç Resource å®ç° ResourceLoader æ¥å£ ResourcePatternResolver æ¥å£ ResourceLoaderAware æ¥å£ èµæºä¾èµ åºç¨ä¸ä¸æåèµæºè·¯å¾ æé åºç¨ä¸ä¸æ ä½¿ç¨ééç¬¦æé åºç¨ä¸ä¸æ é®é¢ åèèµæ",content:'# Spring èµæºç®¡ç\n\n> Version 6.0.3\n\n\n# Resource æ¥å£\n\nç¸å¯¹æ å URL è®¿é®æºå¶ï¼Spring ç org.springframework.core.io.Resource æ¥å£æ½è±¡äºå¯¹åºå±èµæºçè®¿é®æ¥å£ï¼æä¾äºä¸å¥æ´å¥½çè®¿é®æ¹å¼ã\n\npublic interface Resource extends InputStreamSource {\n\n    boolean exists();\n\n    boolean isReadable();\n\n    boolean isOpen();\n\n    boolean isFile();\n\n    URL getURL() throws IOException;\n\n    URI getURI() throws IOException;\n\n    File getFile() throws IOException;\n\n    ReadableByteChannel readableChannel() throws IOException;\n\n    long contentLength() throws IOException;\n\n    long lastModified() throws IOException;\n\n    Resource createRelative(String relativePath) throws IOException;\n\n    String getFilename();\n\n    String getDescription();\n}\n\n\næ­£å¦ Resource æ¥å£çå®ä¹æç¤ºï¼å®æ©å±äº InputStreamSource æ¥å£ãResource ææ ¸å¿çæ¹æ³å¦ä¸ï¼\n\n * getInputStream() - å®ä½å¹¶ä¸æå¼å½åèµæºï¼è¿åå½åèµæºç InputStreamãæ¯æ¬¡è°ç¨é½ä¼è¿åä¸ä¸ªæ°ç InputStreamãè°ç¨èéè¦è´è´£å³é­æµã\n * exists() - å¤æ­å½åèµæºæ¯å¦ççå­å¨ã\n * isOpen() - å¤æ­å½åèµæºæ¯å¦æ¯ä¸ä¸ªå·²æå¼ç InputStreamãå¦æä¸º trueï¼å InputStream ä¸è½è¢«å¤æ¬¡è¯»åï¼å¿é¡»åªè¯»åä¸æ¬¡ç¶åå³é­ä»¥é¿åèµæºæ³æ¼ãå¯¹ææå¸¸ç¨èµæºå®ç°è¿å falseï¼InputStreamResource é¤å¤ã\n * getDescription() - è¿åå½åèµæºçæè¿°ï¼å½å¤çèµæºåºéæ¶ï¼èµæºçæè¿°ä¼ç¨äºéè¯¯ä¿¡æ¯çè¾åºãä¸è¬æ¥è¯´ï¼èµæºçæè¿°æ¯ä¸ä¸ªå®å¨éå®çæä»¶åç§°ï¼æèæ¯å½åèµæºççå® URLã\n\nå¸¸è§ Spring èµæºæ¥å£ï¼\n\nç±»å      æ¥å£\nè¾å¥æµ     org.springframework.core.io.InputStreamSource\nåªè¯»èµæº    org.springframework.core.io.Resource\nå¯åèµæº    org.springframework.core.io.WritableResource\nç¼ç èµæº    org.springframework.core.io.support.EncodedResource\nä¸ä¸æèµæº   org.springframework.core.io.ContextResource\n\n\n\n\n# åç½®ç Resource å®ç°\n\nSpring åæ¬å ä¸ªåç½®ç Resource å®ç°ï¼\n\nèµæºæ¥æº                     åç¼                    è¯´æ\nUrlResource              file:ãhttps:ãftp: ç­   UrlResource å°è£äºä¸ä¸ª java.net.URL å¯¹è±¡ï¼ç¨äºè®¿é®å¯éè¿ URL\n                                               è®¿é®çä»»ä½å¯¹è±¡ï¼ä¾å¦æä»¶ãHTTPS ç®æ ãFTP ç®æ ç­ãææ URL\n                                               é½å¯ä»¥éè¿æ ååçå­ç¬¦ä¸²å½¢å¼è¡¨ç¤ºï¼å æ­¤å¯ä»¥ä½¿ç¨éå½çæ åååç¼æ¥æç¤ºä¸ç§ URL ç±»åä¸å¦ä¸ç§ URL ç±»åçåºå«ã\n                                               è¿åæ¬ï¼fileï¼ç¨äºè®¿é®æä»¶ç³»ç»è·¯å¾ï¼httpsï¼ç¨äºéè¿ HTTPS åè®®è®¿é®èµæºï¼ftpï¼ç¨äºéè¿ FTP\n                                               è®¿é®èµæºç­ç­ã\nClassPathResource        classpath:            ClassPathResource ä»ç±»è·¯å¾ä¸å è½½èµæºãå®ä½¿ç¨çº¿ç¨ä¸ä¸æå è½½å¨ãç»å®çç±»å è½½å¨ææå®ç class\n                                               ç±»åä¸­çä»»æä¸ä¸ªæ¥å è½½èµæºã\nFileSystemResource       file:                 FileSystemResource æ¯ java.io.File çèµæºå®ç°ãå®è¿æ¯æ\n                                               java.nio.file.Path ï¼åºç¨ Spring\n                                               çæ åå¯¹å­ç¬¦ä¸²è·¯å¾è¿è¡è½¬æ¢ãFileSystemResource æ¯æè§£æä¸ºæä»¶å URLã\nPathResource             æ                      PathResource æ¯ java.nio.file.Path çèµæºå®ç°ã\nServletContextResource   æ                      ServletContextResource æ¯ ServletContext çèµæºå®ç°ãå®è¡¨ç¤ºç¸åº Web\n                                               åºç¨ç¨åºæ ¹ç®å½ä¸­çç¸å¯¹è·¯å¾ã\nInputStreamResource      æ                      InputStreamResource æ¯æå® InputStream çèµæºå®ç°ãæ³¨æï¼å¦æè¯¥ InputStream\n                                               å·²è¢«æå¼ï¼åä¸å¯ä»¥å¤æ¬¡è¯»åè¯¥æµã\nByteArrayResource        æ                      ByteArrayResource æ¯æå®çäºè¿å¶æ°ç»çèµæºå®ç°ãå®ä¼ä¸ºç»å®çå­èæ°ç»åå»ºä¸ä¸ª\n                                               ByteArrayInputStreamã\n\n\n# ResourceLoader æ¥å£\n\nResourceLoader æ¥å£ç¨äºå è½½ Resource å¯¹è±¡ãå¶å®ä¹å¦ä¸ï¼\n\npublic interface ResourceLoader {\n\n    Resource getResource(String location);\n\n    ClassLoader getClassLoader();\n}\n\n\nSpring ä¸­ä¸»è¦ç ResourceLoader å®ç°ï¼\n\n\n\nSpring ä¸­ï¼ææç ApplicationContext é½å®ç°äº ResourceLoader æ¥å£ãå æ­¤ï¼ææ ApplicationContext é½å¯ä»¥éè¿ getResource() æ¹æ³è·å Resource å®ä¾ã\n\nãç¤ºä¾ã\n\n// å¦ææ²¡ææå®èµæºåç¼ï¼Spring ä¼å°è¯è¿ååéçèµæº\nResource template = ctx.getResource("some/resource/path/myTemplate.txt");\n// å¦ææå® classpath: åç¼ï¼Spring ä¼å¼ºå¶ä½¿ç¨ ClassPathResource\nResource template = ctx.getResource("classpath:some/resource/path/myTemplate.txt");\n// å¦ææå® file:ãhttp ç­ URL åç¼ï¼Spring ä¼å¼ºå¶ä½¿ç¨ UrlResource\nResource template = ctx.getResource("file:///some/resource/path/myTemplate.txt");\nResource template = ctx.getResource("http://myhost.com/resource/path/myTemplate.txt");\n\n\nä¸è¡¨åä¸¾äº Spring æ ¹æ®åç§ä½ç½®è·¯å¾å è½½èµæºçç­ç¥ï¼\n\nåç¼           æ ·ä¾                               è¯´æ\nclasspath:   classpath:com/myapp/config.xml   ä»ç±»è·¯å¾å è½½\nfile:        file:///data/config.xml          ä»¥ URL å½¢å¼ä»æä»¶ç³»ç»å è½½\nhttp:        http://myserver/logo.png         ä»¥ URL å½¢å¼å è½½\næ             /data/config.xml                 ç±åºå±ç ApplicationContext å®ç°å³å®\n\n\n# ResourcePatternResolver æ¥å£\n\nResourcePatternResolver æ¥å£æ¯ ResourceLoader æ¥å£çæ©å±ï¼å®çä½ç¨æ¯å®ä¹ç­ç¥ï¼æ ¹æ®ä½ç½®æ¨¡å¼è§£æ Resource å¯¹è±¡ã\n\npublic interface ResourcePatternResolver extends ResourceLoader {\n\n    String CLASSPATH_ALL_URL_PREFIX = "classpath*:";\n\n    Resource[] getResources(String locationPattern) throws IOException;\n}\n\n\nPathMatchingResourcePatternResolver æ¯ä¸ä¸ªç¬ç«çå®ç°ï¼å¯ä»¥å¨ ApplicationContext ä¹å¤ä½¿ç¨ï¼ä¹å¯ä»¥è¢« ResourceArrayPropertyEditor ç¨äºå¡«å Resource[] bean å±æ§ãPathMatchingResourcePatternResolver è½å¤å°æå®çèµæºä½ç½®è·¯å¾è§£æä¸ºä¸ä¸ªæå¤ä¸ªå¹éç Resource å¯¹è±¡ã\n\n> æ³¨æï¼ä»»ä½æ å ApplicationContext ä¸­çé»è®¤ ResourceLoader å®éä¸æ¯ PathMatchingResourcePatternResolver çä¸ä¸ªå®ä¾ï¼å®å®ç°äº ResourcePatternResolver æ¥å£ã\n\n\n# ResourceLoaderAware æ¥å£\n\nResourceLoaderAware æ¥å£æ¯ä¸ä¸ªç¹æ®çåè°æ¥å£ï¼ç¨æ¥æ è®°æä¾ ResourceLoader å¼ç¨çå¯¹è±¡ãResourceLoaderAware æ¥å£å®ä¹å¦ä¸ï¼\n\npublic interface ResourceLoaderAware {\n    void setResourceLoader(ResourceLoader resourceLoader);\n}\n\n\nå½ä¸ä¸ªç±»å®ç° ResourceLoaderAware å¹¶é¨ç½²å°åºç¨ç¨åºä¸ä¸æä¸­ï¼ä½ä¸º Spring ç®¡çç beanï¼æ¶ï¼å®ä¼è¢«åºç¨ç¨åºä¸ä¸æè¯å«ä¸º ResourceLoaderAwareï¼ç¶åï¼åºç¨ç¨åºä¸ä¸æä¼è°ç¨ setResourceLoader(ResourceLoader)ï¼å°èªèº«ä½ä¸ºåæ°æä¾ï¼è¯·è®°ä½ï¼Spring ä¸­çææåºç¨ç¨åºä¸ä¸æé½å®ç° ResourceLoader æ¥å£ï¼ã\n\nç±äº ApplicationContext æ¯ä¸ä¸ª ResourceLoaderï¼è¯¥ bean è¿å¯ä»¥å®ç° ApplicationContextAware æ¥å£å¹¶ç´æ¥ä½¿ç¨æä¾çåºç¨ç¨åºä¸ä¸ææ¥å è½½èµæºã ä½æ¯ï¼ä¸è¬æ¥è¯´ï¼å¦ææ¨åªéè¦è¿äºï¼æå¥½ä½¿ç¨ä¸é¨ç ResourceLoader æ¥å£ã è¯¥ä»£ç å°ä»è¦åå°èµæºå è½½æ¥å£ï¼å¯ä»¥è¢«è§ä¸ºå®ç¨ç¨åºæ¥å£ï¼ï¼èä¸è¦åå°æ´ä¸ª Spring ApplicationContext æ¥å£ã\n\nå¨åºç¨ç¨åºä¸­ï¼è¿å¯ä»¥ä½¿ç¨ ResourceLoader çèªå¨è£éä½ä¸ºå®ç° ResourceLoaderAware æ¥å£çæ¿ä»£æ¹æ³ãä¼ ç»çæé å½æ°å byType èªå¨è£éæ¨¡å¼è½å¤åå«ä¸ºæé å½æ°åæ°æ setter æ¹æ³åæ°æä¾ ResourceLoaderã ä¸ºäºè·å¾æ´å¤§ççµæ´»æ§ï¼åæ¬èªå¨è£éå­æ®µåå¤åæ°æ¹æ³çè½åï¼ï¼è¯·èèä½¿ç¨åºäºæ³¨è§£çèªå¨è£éåè½ã å¨è¿ç§æåµä¸ï¼ResourceLoader ä¼èªå¨è¿æ¥å°éè¦ ResourceLoader ç±»åçå­æ®µãæé å½æ°åæ°ææ¹æ³åæ°ä¸­ï¼åªè¦ç¸å³å­æ®µãæé å½æ°ææ¹æ³å¸¦æ @Autowired æ³¨è§£å³å¯ã\n\n\n# èµæºä¾èµ\n\nå¦æ bean æ¬èº«è¦éè¿æç§å¨æè¿ç¨æ¥ç¡®å®åæä¾èµæºè·¯å¾ï¼é£ä¹ bean å¯ä»¥ä½¿ç¨ ResourceLoader æ ResourcePatternResolver æ¥å£æ¥å è½½èµæºã ä¾å¦ï¼èèå è½½æç§æ¨¡æ¿ï¼å¶ä¸­æéçç¹å®èµæºåå³äºç¨æ·çè§è²ã å¦æèµæºæ¯éæçï¼å®å¨æ¶é¤ ResourceLoader æ¥å£ï¼æ ResourcePatternResolver æ¥å£ï¼çä½¿ç¨ï¼è®© bean å¬å¼å®éè¦ç Resource å±æ§ï¼å¹¶ææå°å®ä»¬æ³¨å¥å¶ä¸­æ¯ææä¹çã\n\nä½¿æ³¨å¥è¿äºå±æ§åå¾ç®åçåå æ¯ææåºç¨ç¨åºä¸ä¸æé½æ³¨åå¹¶ä½¿ç¨ä¸ä¸ªç¹æ®ç JavaBeans PropertyEditorï¼å®å¯ä»¥å° String è·¯å¾è½¬æ¢ä¸º Resource å¯¹è±¡ã ä¾å¦ï¼ä¸é¢ç MyBean ç±»æä¸ä¸ª Resource ç±»åçæ¨¡æ¿å±æ§ã\n\nãç¤ºä¾ã\n\n<bean id="myBean" class="example.MyBean">\n    <property name="template" value="some/resource/path/myTemplate.txt"/>\n</bean>\n\n\nè¯·æ³¨æï¼éç½®ä¸­å¼ç¨çæ¨¡æ¿èµæºè·¯å¾æ²¡æåç¼ï¼å ä¸ºåºç¨ç¨åºä¸ä¸ææ¬èº«å°ç¨ä½ ResourceLoaderï¼èµæºæ¬èº«å°æ ¹æ®éè¦éè¿ ClassPathResourceï¼FileSystemResource æ ServletContextResource å è½½ï¼å·ä½åå³äºä¸ä¸æçç¡®åç±»åã\n\nå¦æéè¦å¼ºå¶ä½¿ç¨ç¹å®çèµæºç±»åï¼åå¯ä»¥ä½¿ç¨åç¼ã ä»¥ä¸ä¸¤ä¸ªç¤ºä¾æ¾ç¤ºå¦ä½å¼ºå¶ä½¿ç¨ ClassPathResource å UrlResourceï¼åèç¨äºè®¿é®æä»¶ç³»ç»æä»¶ï¼ã\n\n<property name="template" value="classpath:some/resource/path/myTemplate.txt">\n<property name="template" value="file:///some/resource/path/myTemplate.txt"/>\n\n\nå¯ä»¥éè¿ @Value æ³¨è§£å è½½èµæºæä»¶ myTemplate.txtï¼ç¤ºä¾å¦ä¸ï¼\n\n@Component\npublic class MyBean {\n\n    private final Resource template;\n\n    public MyBean(@Value("${template.path}") Resource template) {\n        this.template = template;\n    }\n\n    // ...\n}\n\n\nSpring ç PropertyEditor ä¼æ ¹æ®èµæºæä»¶çè·¯å¾å­ç¬¦ä¸²ï¼å è½½ Resource å¯¹è±¡ï¼å¹¶å°å¶æ³¨å¥å° MyBean çæé æ¹æ³ã\n\nå¦ææ³è¦å è½½å¤ä¸ªèµæºæä»¶ï¼å¯ä»¥ä½¿ç¨ classpath*: åç¼ï¼ä¾å¦ï¼classpath*:/config/templates/*.txtã\n\n@Component\npublic class MyBean {\n\n    private final Resource[] templates;\n\n    public MyBean(@Value("${templates.path}") Resource[] templates) {\n        this.templates = templates;\n    }\n\n    // ...\n}\n\n\n\n# åºç¨ä¸ä¸æåèµæºè·¯å¾\n\n\n# æé åºç¨ä¸ä¸æ\n\nåºç¨ä¸ä¸ææé å½æ°ï¼éå¯¹ç¹å®çåºç¨ä¸ä¸æç±»åï¼éå¸¸å°å­ç¬¦ä¸²æå­ç¬¦ä¸²æ°ç»ä½ä¸ºèµæºçä½ç½®è·¯å¾ï¼ä¾å¦ææä¸ä¸æå®ä¹ç XML æä»¶ã\n\nãç¤ºä¾ã\n\nApplicationContext ctx = new ClassPathXmlApplicationContext("conf/appContext.xml");\nApplicationContext ctx = new FileSystemXmlApplicationContext("conf/appContext.xml");\nApplicationContext ctx = new FileSystemXmlApplicationContext("classpath:conf/appContext.xml");\nApplicationContext ctx = new ClassPathXmlApplicationContext(\n                new String[] {"services.xml", "daos.xml"}, MessengerService.class);\n\n\n\n# ä½¿ç¨ééç¬¦æé åºç¨ä¸ä¸æ\n\nApplicationContext æé å¨çä¸­çèµæºè·¯å¾å¯ä»¥æ¯åä¸çè·¯å¾ï¼å³ä¸å¯¹ä¸å°æ å°å°ç®æ èµæºï¼ï¼ä¹å¯ä»¥æ¯ééç¬¦å½¢å¼ââå¯åå« classpath*ï¼ä¹å¯ä»¥æ¯åç¼æ ant é£æ ¼çæ­£åè¡¨è¾¾å¼ï¼ä½¿ç¨ spring ç PathMatcher æ¥å¹éï¼ã\n\nç¤ºä¾ï¼\n\nApplicationContext ctx = new ClassPathXmlApplicationContext("classpath*:conf/appContext.xml");\n\n\nä½¿ç¨ classpath* è¡¨ç¤ºç±»è·¯å¾ä¸ææå¹éæä»¶åç§°çèµæºé½ä¼è¢«è·å(æ¬è´¨ä¸å°±æ¯è°ç¨äº ClassLoader.getResources(â¦) æ¹æ³ï¼ï¼æ¥çå°è·åå°çèµæºç»è£ææç»çåºç¨ä¸ä¸æã\n\nå¨ä½ç½®è·¯å¾çå¶ä½é¨åï¼classpath*: åç¼å¯ä»¥ä¸ PathMatcher ç»åä½¿ç¨ï¼å¦ï¼classpath*:META-INF/*-beans.xmlã\n\n\n# é®é¢\n\nSpring éç½®èµæºä¸­æåªäºå¸¸è§ç±»åï¼\n\n * XML èµæº\n * Properties èµæº\n * YAML èµæº\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring èµæºç®¡ç\n\n> version 6.0.3\n\n\n# resource æ¥å£\n\nç¸å¯¹æ å url è®¿é®æºå¶ï¼spring ç org.springframework.core.io.resource æ¥å£æ½è±¡äºå¯¹åºå±èµæºçè®¿é®æ¥å£ï¼æä¾äºä¸å¥æ´å¥½çè®¿é®æ¹å¼ã\n\npublic interface resource extends inputstreamsource {\n\n    boolean exists();\n\n    boolean isreadable();\n\n    boolean isopen();\n\n    boolean isfile();\n\n    url geturl() throws ioexception;\n\n    uri geturi() throws ioexception;\n\n    file getfile() throws ioexception;\n\n    readablebytechannel readablechannel() throws ioexception;\n\n    long contentlength() throws ioexception;\n\n    long lastmodified() throws ioexception;\n\n    resource createrelative(string relativepath) throws ioexception;\n\n    string getfilename();\n\n    string getdescription();\n}\n\n\næ­£å¦ resource æ¥å£çå®ä¹æç¤ºï¼å®æ©å±äº inputstreamsource æ¥å£ãresource ææ ¸å¿çæ¹æ³å¦ä¸ï¼\n\n * getinputstream() - å®ä½å¹¶ä¸æå¼å½åèµæºï¼è¿åå½åèµæºç inputstreamãæ¯æ¬¡è°ç¨é½ä¼è¿åä¸ä¸ªæ°ç inputstreamãè°ç¨èéè¦è´è´£å³é­æµã\n * exists() - å¤æ­å½åèµæºæ¯å¦ççå­å¨ã\n * isopen() - å¤æ­å½åèµæºæ¯å¦æ¯ä¸ä¸ªå·²æå¼ç inputstreamãå¦æä¸º trueï¼å inputstream ä¸è½è¢«å¤æ¬¡è¯»åï¼å¿é¡»åªè¯»åä¸æ¬¡ç¶åå³é­ä»¥é¿åèµæºæ³æ¼ãå¯¹ææå¸¸ç¨èµæºå®ç°è¿å falseï¼inputstreamresource é¤å¤ã\n * getdescription() - è¿åå½åèµæºçæè¿°ï¼å½å¤çèµæºåºéæ¶ï¼èµæºçæè¿°ä¼ç¨äºéè¯¯ä¿¡æ¯çè¾åºãä¸è¬æ¥è¯´ï¼èµæºçæè¿°æ¯ä¸ä¸ªå®å¨éå®çæä»¶åç§°ï¼æèæ¯å½åèµæºççå® urlã\n\nå¸¸è§ spring èµæºæ¥å£ï¼\n\nç±»å      æ¥å£\nè¾å¥æµ     org.springframework.core.io.inputstreamsource\nåªè¯»èµæº    org.springframework.core.io.resource\nå¯åèµæº    org.springframework.core.io.writableresource\nç¼ç èµæº    org.springframework.core.io.support.encodedresource\nä¸ä¸æèµæº   org.springframework.core.io.contextresource\n\n\n\n\n# åç½®ç resource å®ç°\n\nspring åæ¬å ä¸ªåç½®ç resource å®ç°ï¼\n\nèµæºæ¥æº                     åç¼                    è¯´æ\nurlresource              file:ãhttps:ãftp: ç­   urlresource å°è£äºä¸ä¸ª java.net.url å¯¹è±¡ï¼ç¨äºè®¿é®å¯éè¿ url\n                                               è®¿é®çä»»ä½å¯¹è±¡ï¼ä¾å¦æä»¶ãhttps ç®æ ãftp ç®æ ç­ãææ url\n                                               é½å¯ä»¥éè¿æ ååçå­ç¬¦ä¸²å½¢å¼è¡¨ç¤ºï¼å æ­¤å¯ä»¥ä½¿ç¨éå½çæ åååç¼æ¥æç¤ºä¸ç§ url ç±»åä¸å¦ä¸ç§ url ç±»åçåºå«ã\n                                               è¿åæ¬ï¼fileï¼ç¨äºè®¿é®æä»¶ç³»ç»è·¯å¾ï¼httpsï¼ç¨äºéè¿ https åè®®è®¿é®èµæºï¼ftpï¼ç¨äºéè¿ ftp\n                                               è®¿é®èµæºç­ç­ã\nclasspathresource        classpath:            classpathresource ä»ç±»è·¯å¾ä¸å è½½èµæºãå®ä½¿ç¨çº¿ç¨ä¸ä¸æå è½½å¨ãç»å®çç±»å è½½å¨ææå®ç class\n                                               ç±»åä¸­çä»»æä¸ä¸ªæ¥å è½½èµæºã\nfilesystemresource       file:                 filesystemresource æ¯ java.io.file çèµæºå®ç°ãå®è¿æ¯æ\n                                               java.nio.file.path ï¼åºç¨ spring\n                                               çæ åå¯¹å­ç¬¦ä¸²è·¯å¾è¿è¡è½¬æ¢ãfilesystemresource æ¯æè§£æä¸ºæä»¶å urlã\npathresource             æ                      pathresource æ¯ java.nio.file.path çèµæºå®ç°ã\nservletcontextresource   æ                      servletcontextresource æ¯ servletcontext çèµæºå®ç°ãå®è¡¨ç¤ºç¸åº web\n                                               åºç¨ç¨åºæ ¹ç®å½ä¸­çç¸å¯¹è·¯å¾ã\ninputstreamresource      æ                      inputstreamresource æ¯æå® inputstream çèµæºå®ç°ãæ³¨æï¼å¦æè¯¥ inputstream\n                                               å·²è¢«æå¼ï¼åä¸å¯ä»¥å¤æ¬¡è¯»åè¯¥æµã\nbytearrayresource        æ                      bytearrayresource æ¯æå®çäºè¿å¶æ°ç»çèµæºå®ç°ãå®ä¼ä¸ºç»å®çå­èæ°ç»åå»ºä¸ä¸ª\n                                               bytearrayinputstreamã\n\n\n# resourceloader æ¥å£\n\nresourceloader æ¥å£ç¨äºå è½½ resource å¯¹è±¡ãå¶å®ä¹å¦ä¸ï¼\n\npublic interface resourceloader {\n\n    resource getresource(string location);\n\n    classloader getclassloader();\n}\n\n\nspring ä¸­ä¸»è¦ç resourceloader å®ç°ï¼\n\n\n\nspring ä¸­ï¼ææç applicationcontext é½å®ç°äº resourceloader æ¥å£ãå æ­¤ï¼ææ applicationcontext é½å¯ä»¥éè¿ getresource() æ¹æ³è·å resource å®ä¾ã\n\nãç¤ºä¾ã\n\n// å¦ææ²¡ææå®èµæºåç¼ï¼spring ä¼å°è¯è¿ååéçèµæº\nresource template = ctx.getresource("some/resource/path/mytemplate.txt");\n// å¦ææå® classpath: åç¼ï¼spring ä¼å¼ºå¶ä½¿ç¨ classpathresource\nresource template = ctx.getresource("classpath:some/resource/path/mytemplate.txt");\n// å¦ææå® file:ãhttp ç­ url åç¼ï¼spring ä¼å¼ºå¶ä½¿ç¨ urlresource\nresource template = ctx.getresource("file:///some/resource/path/mytemplate.txt");\nresource template = ctx.getresource("http://myhost.com/resource/path/mytemplate.txt");\n\n\nä¸è¡¨åä¸¾äº spring æ ¹æ®åç§ä½ç½®è·¯å¾å è½½èµæºçç­ç¥ï¼\n\nåç¼           æ ·ä¾                               è¯´æ\nclasspath:   classpath:com/myapp/config.xml   ä»ç±»è·¯å¾å è½½\nfile:        file:///data/config.xml          ä»¥ url å½¢å¼ä»æä»¶ç³»ç»å è½½\nhttp:        http://myserver/logo.png         ä»¥ url å½¢å¼å è½½\næ             /data/config.xml                 ç±åºå±ç applicationcontext å®ç°å³å®\n\n\n# resourcepatternresolver æ¥å£\n\nresourcepatternresolver æ¥å£æ¯ resourceloader æ¥å£çæ©å±ï¼å®çä½ç¨æ¯å®ä¹ç­ç¥ï¼æ ¹æ®ä½ç½®æ¨¡å¼è§£æ resource å¯¹è±¡ã\n\npublic interface resourcepatternresolver extends resourceloader {\n\n    string classpath_all_url_prefix = "classpath*:";\n\n    resource[] getresources(string locationpattern) throws ioexception;\n}\n\n\npathmatchingresourcepatternresolver æ¯ä¸ä¸ªç¬ç«çå®ç°ï¼å¯ä»¥å¨ applicationcontext ä¹å¤ä½¿ç¨ï¼ä¹å¯ä»¥è¢« resourcearraypropertyeditor ç¨äºå¡«å resource[] bean å±æ§ãpathmatchingresourcepatternresolver è½å¤å°æå®çèµæºä½ç½®è·¯å¾è§£æä¸ºä¸ä¸ªæå¤ä¸ªå¹éç resource å¯¹è±¡ã\n\n> æ³¨æï¼ä»»ä½æ å applicationcontext ä¸­çé»è®¤ resourceloader å®éä¸æ¯ pathmatchingresourcepatternresolver çä¸ä¸ªå®ä¾ï¼å®å®ç°äº resourcepatternresolver æ¥å£ã\n\n\n# resourceloaderaware æ¥å£\n\nresourceloaderaware æ¥å£æ¯ä¸ä¸ªç¹æ®çåè°æ¥å£ï¼ç¨æ¥æ è®°æä¾ resourceloader å¼ç¨çå¯¹è±¡ãresourceloaderaware æ¥å£å®ä¹å¦ä¸ï¼\n\npublic interface resourceloaderaware {\n    void setresourceloader(resourceloader resourceloader);\n}\n\n\nå½ä¸ä¸ªç±»å®ç° resourceloaderaware å¹¶é¨ç½²å°åºç¨ç¨åºä¸ä¸æä¸­ï¼ä½ä¸º spring ç®¡çç beanï¼æ¶ï¼å®ä¼è¢«åºç¨ç¨åºä¸ä¸æè¯å«ä¸º resourceloaderawareï¼ç¶åï¼åºç¨ç¨åºä¸ä¸æä¼è°ç¨ setresourceloader(resourceloader)ï¼å°èªèº«ä½ä¸ºåæ°æä¾ï¼è¯·è®°ä½ï¼spring ä¸­çææåºç¨ç¨åºä¸ä¸æé½å®ç° resourceloader æ¥å£ï¼ã\n\nç±äº applicationcontext æ¯ä¸ä¸ª resourceloaderï¼è¯¥ bean è¿å¯ä»¥å®ç° applicationcontextaware æ¥å£å¹¶ç´æ¥ä½¿ç¨æä¾çåºç¨ç¨åºä¸ä¸ææ¥å è½½èµæºã ä½æ¯ï¼ä¸è¬æ¥è¯´ï¼å¦ææ¨åªéè¦è¿äºï¼æå¥½ä½¿ç¨ä¸é¨ç resourceloader æ¥å£ã è¯¥ä»£ç å°ä»è¦åå°èµæºå è½½æ¥å£ï¼å¯ä»¥è¢«è§ä¸ºå®ç¨ç¨åºæ¥å£ï¼ï¼èä¸è¦åå°æ´ä¸ª spring applicationcontext æ¥å£ã\n\nå¨åºç¨ç¨åºä¸­ï¼è¿å¯ä»¥ä½¿ç¨ resourceloader çèªå¨è£éä½ä¸ºå®ç° resourceloaderaware æ¥å£çæ¿ä»£æ¹æ³ãä¼ ç»çæé å½æ°å bytype èªå¨è£éæ¨¡å¼è½å¤åå«ä¸ºæé å½æ°åæ°æ setter æ¹æ³åæ°æä¾ resourceloaderã ä¸ºäºè·å¾æ´å¤§ççµæ´»æ§ï¼åæ¬èªå¨è£éå­æ®µåå¤åæ°æ¹æ³çè½åï¼ï¼è¯·èèä½¿ç¨åºäºæ³¨è§£çèªå¨è£éåè½ã å¨è¿ç§æåµä¸ï¼resourceloader ä¼èªå¨è¿æ¥å°éè¦ resourceloader ç±»åçå­æ®µãæé å½æ°åæ°ææ¹æ³åæ°ä¸­ï¼åªè¦ç¸å³å­æ®µãæé å½æ°ææ¹æ³å¸¦æ @autowired æ³¨è§£å³å¯ã\n\n\n# èµæºä¾èµ\n\nå¦æ bean æ¬èº«è¦éè¿æç§å¨æè¿ç¨æ¥ç¡®å®åæä¾èµæºè·¯å¾ï¼é£ä¹ bean å¯ä»¥ä½¿ç¨ resourceloader æ resourcepatternresolver æ¥å£æ¥å è½½èµæºã ä¾å¦ï¼èèå è½½æç§æ¨¡æ¿ï¼å¶ä¸­æéçç¹å®èµæºåå³äºç¨æ·çè§è²ã å¦æèµæºæ¯éæçï¼å®å¨æ¶é¤ resourceloader æ¥å£ï¼æ resourcepatternresolver æ¥å£ï¼çä½¿ç¨ï¼è®© bean å¬å¼å®éè¦ç resource å±æ§ï¼å¹¶ææå°å®ä»¬æ³¨å¥å¶ä¸­æ¯ææä¹çã\n\nä½¿æ³¨å¥è¿äºå±æ§åå¾ç®åçåå æ¯ææåºç¨ç¨åºä¸ä¸æé½æ³¨åå¹¶ä½¿ç¨ä¸ä¸ªç¹æ®ç javabeans propertyeditorï¼å®å¯ä»¥å° string è·¯å¾è½¬æ¢ä¸º resource å¯¹è±¡ã ä¾å¦ï¼ä¸é¢ç mybean ç±»æä¸ä¸ª resource ç±»åçæ¨¡æ¿å±æ§ã\n\nãç¤ºä¾ã\n\n<bean id="mybean" class="example.mybean">\n    <property name="template" value="some/resource/path/mytemplate.txt"/>\n</bean>\n\n\nè¯·æ³¨æï¼éç½®ä¸­å¼ç¨çæ¨¡æ¿èµæºè·¯å¾æ²¡æåç¼ï¼å ä¸ºåºç¨ç¨åºä¸ä¸ææ¬èº«å°ç¨ä½ resourceloaderï¼èµæºæ¬èº«å°æ ¹æ®éè¦éè¿ classpathresourceï¼filesystemresource æ servletcontextresource å è½½ï¼å·ä½åå³äºä¸ä¸æçç¡®åç±»åã\n\nå¦æéè¦å¼ºå¶ä½¿ç¨ç¹å®çèµæºç±»åï¼åå¯ä»¥ä½¿ç¨åç¼ã ä»¥ä¸ä¸¤ä¸ªç¤ºä¾æ¾ç¤ºå¦ä½å¼ºå¶ä½¿ç¨ classpathresource å urlresourceï¼åèç¨äºè®¿é®æä»¶ç³»ç»æä»¶ï¼ã\n\n<property name="template" value="classpath:some/resource/path/mytemplate.txt">\n<property name="template" value="file:///some/resource/path/mytemplate.txt"/>\n\n\nå¯ä»¥éè¿ @value æ³¨è§£å è½½èµæºæä»¶ mytemplate.txtï¼ç¤ºä¾å¦ä¸ï¼\n\n@component\npublic class mybean {\n\n    private final resource template;\n\n    public mybean(@value("${template.path}") resource template) {\n        this.template = template;\n    }\n\n    // ...\n}\n\n\nspring ç propertyeditor ä¼æ ¹æ®èµæºæä»¶çè·¯å¾å­ç¬¦ä¸²ï¼å è½½ resource å¯¹è±¡ï¼å¹¶å°å¶æ³¨å¥å° mybean çæé æ¹æ³ã\n\nå¦ææ³è¦å è½½å¤ä¸ªèµæºæä»¶ï¼å¯ä»¥ä½¿ç¨ classpath*: åç¼ï¼ä¾å¦ï¼classpath*:/config/templates/*.txtã\n\n@component\npublic class mybean {\n\n    private final resource[] templates;\n\n    public mybean(@value("${templates.path}") resource[] templates) {\n        this.templates = templates;\n    }\n\n    // ...\n}\n\n\n\n# åºç¨ä¸ä¸æåèµæºè·¯å¾\n\n\n# æé åºç¨ä¸ä¸æ\n\nåºç¨ä¸ä¸ææé å½æ°ï¼éå¯¹ç¹å®çåºç¨ä¸ä¸æç±»åï¼éå¸¸å°å­ç¬¦ä¸²æå­ç¬¦ä¸²æ°ç»ä½ä¸ºèµæºçä½ç½®è·¯å¾ï¼ä¾å¦ææä¸ä¸æå®ä¹ç xml æä»¶ã\n\nãç¤ºä¾ã\n\napplicationcontext ctx = new classpathxmlapplicationcontext("conf/appcontext.xml");\napplicationcontext ctx = new filesystemxmlapplicationcontext("conf/appcontext.xml");\napplicationcontext ctx = new filesystemxmlapplicationcontext("classpath:conf/appcontext.xml");\napplicationcontext ctx = new classpathxmlapplicationcontext(\n                new string[] {"services.xml", "daos.xml"}, messengerservice.class);\n\n\n\n# ä½¿ç¨ééç¬¦æé åºç¨ä¸ä¸æ\n\napplicationcontext æé å¨çä¸­çèµæºè·¯å¾å¯ä»¥æ¯åä¸çè·¯å¾ï¼å³ä¸å¯¹ä¸å°æ å°å°ç®æ èµæºï¼ï¼ä¹å¯ä»¥æ¯ééç¬¦å½¢å¼ââå¯åå« classpath*ï¼ä¹å¯ä»¥æ¯åç¼æ ant é£æ ¼çæ­£åè¡¨è¾¾å¼ï¼ä½¿ç¨ spring ç pathmatcher æ¥å¹éï¼ã\n\nç¤ºä¾ï¼\n\napplicationcontext ctx = new classpathxmlapplicationcontext("classpath*:conf/appcontext.xml");\n\n\nä½¿ç¨ classpath* è¡¨ç¤ºç±»è·¯å¾ä¸ææå¹éæä»¶åç§°çèµæºé½ä¼è¢«è·å(æ¬è´¨ä¸å°±æ¯è°ç¨äº classloader.getresources(â¦) æ¹æ³ï¼ï¼æ¥çå°è·åå°çèµæºç»è£ææç»çåºç¨ä¸ä¸æã\n\nå¨ä½ç½®è·¯å¾çå¶ä½é¨åï¼classpath*: åç¼å¯ä»¥ä¸ pathmatcher ç»åä½¿ç¨ï¼å¦ï¼classpath*:meta-inf/*-beans.xmlã\n\n\n# é®é¢\n\nspring éç½®èµæºä¸­æåªäºå¸¸è§ç±»åï¼\n\n * xml èµæº\n * properties èµæº\n * yaml èµæº\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring æ ¡éª",frontmatter:{title:"Spring æ ¡éª",date:"2022-12-22T17:42:28.000Z",order:21,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/fe6aad/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/21.Spring%E6%A0%A1%E9%AA%8C.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/21.Springæ ¡éª.md",key:"v-464c8937",path:"/pages/fe6aad/",headers:[{level:2,title:"å¿«éå¥é¨",slug:"å¿«éå¥é¨",normalizedTitle:"å¿«éå¥é¨",charIndex:193},{level:3,title:"å¼å¥ä¾èµ",slug:"å¼å¥ä¾èµ",normalizedTitle:"å¼å¥ä¾èµ",charIndex:202},{level:3,title:"æ ¡éªç¤ºä¾",slug:"æ ¡éªç¤ºä¾",normalizedTitle:"æ ¡éªç¤ºä¾",charIndex:739},{level:3,title:"ç»ä¸å¼å¸¸å¤ç",slug:"ç»ä¸å¼å¸¸å¤ç",normalizedTitle:"ç»ä¸å¼å¸¸å¤ç",charIndex:2072},{level:2,title:"è¿é¶ä½¿ç¨",slug:"è¿é¶ä½¿ç¨",normalizedTitle:"è¿é¶ä½¿ç¨",charIndex:4053},{level:3,title:"åç»æ ¡éª",slug:"åç»æ ¡éª",normalizedTitle:"åç»æ ¡éª",charIndex:4062},{level:3,title:"åµå¥æ ¡éª",slug:"åµå¥æ ¡éª",normalizedTitle:"åµå¥æ ¡éª",charIndex:5506},{level:3,title:"èªå®ä¹æ ¡éªæ³¨è§£",slug:"èªå®ä¹æ ¡éªæ³¨è§£",normalizedTitle:"èªå®ä¹æ ¡éªæ³¨è§£",charIndex:6978},{level:3,title:"èªå®ä¹æ ¡éª",slug:"èªå®ä¹æ ¡éª",normalizedTitle:"èªå®ä¹æ ¡éª",charIndex:6978},{level:3,title:"å¿«éå¤±è´¥(Fail Fast)",slug:"å¿«éå¤±è´¥-fail-fast",normalizedTitle:"å¿«éå¤±è´¥(fail fast)",charIndex:10519},{level:2,title:"Spring æ ¡éªåç",slug:"spring-æ ¡éªåç",normalizedTitle:"spring æ ¡éªåç",charIndex:10904},{level:3,title:"Spring æ ¡éªä½¿ç¨åºæ¯",slug:"spring-æ ¡éªä½¿ç¨åºæ¯",normalizedTitle:"spring æ ¡éªä½¿ç¨åºæ¯",charIndex:10920},{level:3,title:"Validator æ¥å£è®¾è®¡",slug:"validator-æ¥å£è®¾è®¡",normalizedTitle:"validator æ¥å£è®¾è®¡",charIndex:11060},{level:3,title:"Errors æ¥å£è®¾è®¡",slug:"errors-æ¥å£è®¾è®¡",normalizedTitle:"errors æ¥å£è®¾è®¡",charIndex:11343},{level:3,title:"Errors ææ¡æ¥æº",slug:"errors-ææ¡æ¥æº",normalizedTitle:"errors ææ¡æ¥æº",charIndex:11615},{level:3,title:"spring web æ ¡éªåç",slug:"spring-web-æ ¡éªåç",normalizedTitle:"spring web æ ¡éªåç",charIndex:11891},{level:4,title:"RequestBody åæ°æ ¡éªå®ç°åç",slug:"requestbody-åæ°æ ¡éªå®ç°åç",normalizedTitle:"requestbody åæ°æ ¡éªå®ç°åç",charIndex:11910},{level:4,title:"æ¹æ³çº§å«çåæ°æ ¡éªå®ç°åç",slug:"æ¹æ³çº§å«çåæ°æ ¡éªå®ç°åç",normalizedTitle:"æ¹æ³çº§å«çåæ°æ ¡éªå®ç°åç",charIndex:14619},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:4149},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:17299}],headersStr:"å¿«éå¥é¨ å¼å¥ä¾èµ æ ¡éªç¤ºä¾ ç»ä¸å¼å¸¸å¤ç è¿é¶ä½¿ç¨ åç»æ ¡éª åµå¥æ ¡éª èªå®ä¹æ ¡éªæ³¨è§£ èªå®ä¹æ ¡éª å¿«éå¤±è´¥(Fail Fast) Spring æ ¡éªåç Spring æ ¡éªä½¿ç¨åºæ¯ Validator æ¥å£è®¾è®¡ Errors æ¥å£è®¾è®¡ Errors ææ¡æ¥æº spring web æ ¡éªåç RequestBody åæ°æ ¡éªå®ç°åç æ¹æ³çº§å«çåæ°æ ¡éªå®ç°åç é®é¢ åèèµæ",content:'# Spring æ ¡éª\n\nJava API è§è(JSR303)å®ä¹äºBeanæ ¡éªçæ åvalidation-apiï¼ä½æ²¡ææä¾å®ç°ãhibernate validationæ¯å¯¹è¿ä¸ªè§èçå®ç°ï¼å¹¶å¢å äºæ ¡éªæ³¨è§£å¦@Emailã@Lengthç­ãSpring Validationæ¯å¯¹hibernate validationçäºæ¬¡å°è£ï¼ç¨äºæ¯æspring mvcåæ°èªå¨æ ¡éªã\n\n\n# å¿«éå¥é¨\n\n\n# å¼å¥ä¾èµ\n\nå¦æ spring-boot çæ¬å°äº 2.3.xï¼spring-boot-starter-web ä¼èªå¨ä¼ å¥ hibernate-validator ä¾èµãå¦æ spring-boot çæ¬å¤§äº 2.3.xï¼åéè¦æå¨å¼å¥ä¾èµï¼\n\n<dependency>\n  <groupId>org.hibernate.validator</groupId>\n  <artifactId>hibernate-validator-parent</artifactId>\n  <version>6.2.5.Final</version>\n</dependency>\n\n\nå¯¹äº web æå¡æ¥è¯´ï¼ä¸ºé²æ­¢éæ³åæ°å¯¹ä¸å¡é æå½±åï¼å¨ Controller å±ä¸å®è¦ååæ°æ ¡éªçï¼å¤§é¨åæåµä¸ï¼è¯·æ±åæ°åä¸ºå¦ä¸ä¸¤ç§å½¢å¼ï¼\n\n * POSTãPUT è¯·æ±ï¼ä½¿ç¨ requestBody ä¼ éåæ°ï¼\n * GET è¯·æ±ï¼ä½¿ç¨ requestParam/PathVariable ä¼ éåæ°ã\n\nå®éä¸ï¼ä¸ç®¡æ¯ requestBody åæ°æ ¡éªè¿æ¯æ¹æ³çº§å«çæ ¡éªï¼æç»é½æ¯è°ç¨ Hibernate Validator æ§è¡æ ¡éªï¼Spring Validation åªæ¯åäºä¸å±å°è£ã\n\n\n# æ ¡éªç¤ºä¾\n\nï¼1ï¼å¨å®ä½ä¸æ è®°æ ¡éªæ³¨è§£\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User implements Serializable {\n\n    @NotNull\n    private Long id;\n\n    @NotBlank\n    @Size(min = 2, max = 10)\n    private String name;\n\n    @Min(value = 1)\n    @Max(value = 100)\n    private Integer age;\n\n}\n\n\nï¼2ï¼å¨æ¹æ³åæ°ä¸å£°ææ ¡éªæ³¨è§£\n\n@Slf4j\n@Validated\n@RestController\n@RequestMapping("validate1")\npublic class ValidatorController {\n\n    /**\n     * {@link RequestBody} åæ°æ ¡éª\n     */\n    @PostMapping(value = "save")\n    public DataResult<Boolean> save(@Valid @RequestBody User entity) {\n        log.info("ä¿å­ä¸æ¡è®°å½ï¼{}", JSONUtil.toJsonStr(entity));\n        return DataResult.ok(true);\n    }\n\n    /**\n     * {@link RequestParam} åæ°æ ¡éª\n     */\n    @GetMapping(value = "queryByName")\n    public DataResult<User> queryByName(\n        @RequestParam("username")\n        @NotBlank\n        @Size(min = 2, max = 10)\n        String name\n    ) {\n        User user = new User(1L, name, 18);\n        return DataResult.ok(user);\n    }\n\n    /**\n     * {@link PathVariable} åæ°æ ¡éª\n     */\n    @GetMapping(value = "detail/{id}")\n    public DataResult<User> detail(@PathVariable("id") @Min(1L) Long id) {\n        User user = new User(id, "æå", 18);\n        return DataResult.ok(user);\n    }\n\n}\n\n\nï¼3ï¼å¦æè¯·æ±åæ°ä¸æ»¡è¶³æ ¡éªè§åï¼åä¼æåº ConstraintViolationException æ MethodArgumentNotValidException å¼å¸¸ã\n\n\n# ç»ä¸å¼å¸¸å¤ç\n\nå¨å®éé¡¹ç®å¼åä¸­ï¼éå¸¸ä¼ç¨ç»ä¸å¼å¸¸å¤çæ¥è¿åä¸ä¸ªæ´åå¥½çæç¤ºã\n\n@Slf4j\n@ControllerAdvice\npublic class GlobalExceptionHandler {\n\n    /**\n     * å¤çææä¸å¯ç¥çå¼å¸¸\n     */\n    @ResponseBody\n    @ResponseStatus(HttpStatus.OK)\n    @ExceptionHandler(Throwable.class)\n    public Result handleException(Throwable e) {\n        log.error("æªç¥å¼å¸¸", e);\n        return new Result(ResultStatus.HTTP_SERVER_ERROR.getCode(), e.getMessage());\n    }\n\n    /**\n     * ç»ä¸å¤çè¯·æ±åæ°æ ¡éªå¼å¸¸(æ®éä¼ å)\n     *\n     * @param e ConstraintViolationException\n     * @return {@link DataResult}\n     */\n    @ResponseBody\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    @ExceptionHandler({ ConstraintViolationException.class })\n    public Result handleConstraintViolationException(final ConstraintViolationException e) {\n        log.error("ConstraintViolationException", e);\n        List<String> errors = new ArrayList<>();\n        for (ConstraintViolation<?> violation : e.getConstraintViolations()) {\n            Path path = violation.getPropertyPath();\n            List<String> pathArr = StrUtil.split(path.toString(), \',\');\n            errors.add(pathArr.get(0) + " " + violation.getMessage());\n        }\n        return new Result(ResultStatus.REQUEST_ERROR.getCode(), CollectionUtil.join(errors, ","));\n    }\n\n    /**\n     * å¤çåæ°æ ¡éªå¼å¸¸\n     *\n     * @param e MethodArgumentNotValidException\n     * @return {@link DataResult}\n     */\n    @ResponseBody\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    @ExceptionHandler({ MethodArgumentNotValidException.class })\n    private Result handleMethodArgumentNotValidException(final MethodArgumentNotValidException e) {\n        log.error("MethodArgumentNotValidException", e);\n        List<String> errors = new ArrayList<>();\n        for (ObjectError error : e.getBindingResult().getAllErrors()) {\n            errors.add(((FieldError) error).getField() + " " + error.getDefaultMessage());\n        }\n        return new Result(ResultStatus.REQUEST_ERROR.getCode(), CollectionUtil.join(errors, ","));\n    }\n\n}\n\n\n\n# è¿é¶ä½¿ç¨\n\n\n# åç»æ ¡éª\n\nå¨å®éé¡¹ç®ä¸­ï¼å¯è½å¤ä¸ªæ¹æ³éè¦ä½¿ç¨åä¸ä¸ª DTO ç±»æ¥æ¥æ¶åæ°ï¼èä¸åæ¹æ³çæ ¡éªè§åå¾å¯è½æ¯ä¸ä¸æ ·çãè¿ä¸ªæ¶åï¼ç®åå°å¨ DTO ç±»çå­æ®µä¸å çº¦ææ³¨è§£æ æ³è§£å³è¿ä¸ªé®é¢ãå æ­¤ï¼spring-validation æ¯æäºåç»æ ¡éªçåè½ï¼ä¸é¨ç¨æ¥è§£å³è¿ç±»é®é¢ã\n\nï¼1ï¼å®ä¹åç»\n\n@Target({ ElementType.FIELD, ElementType.PARAMETER })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface AddCheck { }\n\n@Target({ ElementType.FIELD, ElementType.PARAMETER })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface EditCheck { }\n\n\nï¼2ï¼å¨å®ä½ä¸æ è®°æ ¡éªæ³¨è§£\n\n@Data\npublic class User2 {\n\n    @NotNull(groups = EditCheck.class)\n    private Long id;\n\n    @NotNull(groups = { AddCheck.class, EditCheck.class })\n    @Size(min = 2, max = 10, groups = { AddCheck.class, EditCheck.class })\n    private String name;\n\n    @IsMobile(message = "ä¸æ¯ææææºå·", groups = { AddCheck.class, EditCheck.class })\n    private String mobile;\n\n}\n\n\nï¼3ï¼å¨æ¹æ³ä¸æ ¹æ®ä¸ååºæ¯è¿è¡æ ¡éªåç»\n\n@Slf4j\n@Validated\n@RestController\n@RequestMapping("validate2")\npublic class ValidatorController2 {\n\n    /**\n     * {@link RequestBody} åæ°æ ¡éª\n     */\n    @PostMapping(value = "add")\n    public DataResult<Boolean> add(@Validated(AddCheck.class) @RequestBody User2 entity) {\n        log.info("æ·»å ä¸æ¡è®°å½ï¼{}", JSONUtil.toJsonStr(entity));\n        return DataResult.ok(true);\n    }\n\n    /**\n     * {@link RequestBody} åæ°æ ¡éª\n     */\n    @PostMapping(value = "edit")\n    public DataResult<Boolean> edit(@Validated(EditCheck.class) @RequestBody User2 entity) {\n        log.info("ç¼è¾ä¸æ¡è®°å½ï¼{}", JSONUtil.toJsonStr(entity));\n        return DataResult.ok(true);\n    }\n\n}\n\n\n\n# åµå¥æ ¡éª\n\nåé¢çç¤ºä¾ä¸­ï¼DTO ç±»éé¢çå­æ®µé½æ¯åºæ¬æ°æ®ç±»åå String ç±»åãä½æ¯å®éåºæ¯ä¸­ï¼æå¯è½æä¸ªå­æ®µä¹æ¯ä¸ä¸ªå¯¹è±¡ï¼è¿ç§æåµåï¼å¯ä»¥ä½¿ç¨åµå¥æ ¡éªã post æ¯å¦ï¼ä¸é¢ä¿å­ User ä¿¡æ¯çæ¶ååæ¶è¿å¸¦æ Job ä¿¡æ¯ãéè¦æ³¨æçæ¯ï¼æ­¤æ¶ DTO ç±»çå¯¹åºå­æ®µå¿é¡»æ è®°@Valid æ³¨è§£ã\n\n@Data\npublic class UserDTO {\n\n    @Min(value = 10000000000000000L, groups = Update.class)\n    private Long userId;\n\n    @NotNull(groups = {Save.class, Update.class})\n    @Length(min = 2, max = 10, groups = {Save.class, Update.class})\n    private String userName;\n\n    @NotNull(groups = {Save.class, Update.class})\n    @Length(min = 6, max = 20, groups = {Save.class, Update.class})\n    private String account;\n\n    @NotNull(groups = {Save.class, Update.class})\n    @Length(min = 6, max = 20, groups = {Save.class, Update.class})\n    private String password;\n\n    @NotNull(groups = {Save.class, Update.class})\n    @Valid\n    private Job job;\n\n    @Data\n    public static class Job {\n\n        @Min(value = 1, groups = Update.class)\n        private Long jobId;\n\n        @NotNull(groups = {Save.class, Update.class})\n        @Length(min = 2, max = 10, groups = {Save.class, Update.class})\n        private String jobName;\n\n        @NotNull(groups = {Save.class, Update.class})\n        @Length(min = 2, max = 10, groups = {Save.class, Update.class})\n        private String position;\n    }\n\n    /**\n     * ä¿å­çæ¶åæ ¡éªåç»\n     */\n    public interface Save {\n    }\n\n    /**\n     * æ´æ°çæ¶åæ ¡éªåç»\n     */\n    public interface Update {\n    }\n}\nå¤å¶ä»£ç \n\n\nåµå¥æ ¡éªå¯ä»¥ç»ååç»æ ¡éªä¸èµ·ä½¿ç¨ãè¿æå°±æ¯åµå¥éåæ ¡éªä¼å¯¹éåéé¢çæ¯ä¸é¡¹é½è¿è¡æ ¡éªï¼ä¾å¦List<Job>å­æ®µä¼å¯¹è¿ä¸ª list éé¢çæ¯ä¸ä¸ª Job å¯¹è±¡é½è¿è¡æ ¡éª\n\n\n# èªå®ä¹æ ¡éªæ³¨è§£\n\nï¼1ï¼èªå®ä¹æ ¡éªæ³¨è§£ @IsMobile\n\n@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE })\n@Retention(RUNTIME)\n@Constraint(validatedBy = MobileValidator.class)\npublic @interface IsMobile {\n\n    String message();\n\n    Class<?>[] groups() default {};\n\n    Class<? extends Payload>[] payload() default {};\n\n}\n\n\nï¼2ï¼å®ç° ConstraintValidator æ¥å£ï¼ç¼å @IsMobile æ ¡éªæ³¨è§£çè§£æå¨\n\nimport cn.hutool.core.util.StrUtil;\nimport io.github.dunwu.spring.core.validation.annotation.IsMobile;\nimport io.github.dunwu.tool.util.ValidatorUtil;\n\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\n\npublic class MobileValidator implements ConstraintValidator<IsMobile, String> {\n\n    @Override\n    public void initialize(IsMobile isMobile) { }\n\n    @Override\n    public boolean isValid(String s, ConstraintValidatorContext constraintValidatorContext) {\n        if (StrUtil.isBlank(s)) {\n            return false;\n        } else {\n            return ValidatorUtil.isMobile(s);\n        }\n    }\n\n}\n\n\n\n# èªå®ä¹æ ¡éª\n\nå¯ä»¥éè¿å®ç° org.springframework.validation.Validator æ¥å£æ¥èªå®ä¹æ ¡éªã\n\næä»¥ä¸è¦ç¹\n\n * å®ç° supports æ¹æ³\n * å®ç° validate æ¹æ³\n   * éè¿ Errors å¯¹è±¡æ¶ééè¯¯\n     * ObjectErrorï¼å¯¹è±¡ï¼Beanï¼éè¯¯ï¼\n     * FieldErrorï¼å¯¹è±¡ï¼Beanï¼å±æ§ï¼Propertyï¼éè¯¯\n   * éè¿ ObjectError å FieldError å³è MessageSource å®ç°è·åæç»çéè¯¯ææ¡\n\npackage io.github.dunwu.spring.core.validation;\n\nimport io.github.dunwu.spring.core.validation.annotation.Valid;\nimport io.github.dunwu.spring.core.validation.config.CustomValidatorConfig;\nimport io.github.dunwu.spring.core.validation.entity.Person;\nimport org.springframework.stereotype.Component;\nimport org.springframework.validation.Errors;\nimport org.springframework.validation.ValidationUtils;\nimport org.springframework.validation.Validator;\n\nimport java.lang.annotation.Annotation;\nimport java.lang.reflect.Field;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\n@Component\npublic class CustomValidator implements Validator {\n\n    private final CustomValidatorConfig validatorConfig;\n\n    public CustomValidator(CustomValidatorConfig validatorConfig) {\n        this.validatorConfig = validatorConfig;\n    }\n\n    /**\n     * æ¬æ ¡éªå¨åªéå¯¹ Person å¯¹è±¡è¿è¡æ ¡éª\n     */\n    @Override\n    public boolean supports(Class<?> clazz) {\n        return Person.class.equals(clazz);\n    }\n\n    @Override\n    public void validate(Object target, Errors errors) {\n        ValidationUtils.rejectIfEmpty(errors, "name", "name.empty");\n\n        List<Field> fields = getFields(target.getClass());\n        for (Field field : fields) {\n            Annotation[] annotations = field.getAnnotations();\n            for (Annotation annotation : annotations) {\n                if (annotation.annotationType().getAnnotation(Valid.class) != null) {\n                    try {\n                        ValidatorRule validatorRule = validatorConfig.findRule(annotation);\n                        if (validatorRule != null) {\n                            validatorRule.valid(annotation, target, field, errors);\n                        }\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n        }\n    }\n\n    private List<Field> getFields(Class<?> clazz) {\n        // å£°æFieldæ°ç»\n        List<Field> fields = new ArrayList<>();\n        // å¦æclassç±»åä¸ä¸ºç©º\n        while (clazz != null) {\n            // æ·»å å±æ§å°å±æ§æ°ç»\n            Collections.addAll(fields, clazz.getDeclaredFields());\n            clazz = clazz.getSuperclass();\n        }\n        return fields;\n    }\n\n}\n\n\n\n# å¿«éå¤±è´¥(Fail Fast)\n\nSpring Validation é»è®¤ä¼æ ¡éªå®ææå­æ®µï¼ç¶åææåºå¼å¸¸ãå¯ä»¥éè¿ä¸äºç®åçéç½®ï¼å¼å¯ Fali Fast æ¨¡å¼ï¼ä¸æ¦æ ¡éªå¤±è´¥å°±ç«å³è¿åã\n\n@Bean\npublic Validator validator() {\n    ValidatorFactory validatorFactory = Validation.byProvider(HibernateValidator.class)\n            .configure()\n            // å¿«éå¤±è´¥æ¨¡å¼\n            .failFast(true)\n            .buildValidatorFactory();\n    return validatorFactory.getValidator();\n}\n\n\n\n# Spring æ ¡éªåç\n\n\n# Spring æ ¡éªä½¿ç¨åºæ¯\n\n * Spring å¸¸è§æ ¡éªï¼Validatorï¼\n * Spring æ°æ®ç»å®ï¼DataBinderï¼\n * Spring Web åæ°ç»å®ï¼WebDataBinderï¼\n * Spring WebMVC/WebFlux å¤çæ¹æ³åæ°æ ¡éª\n\n\n# Validator æ¥å£è®¾è®¡\n\n * æ¥å£èè´£\n   * Spring åé¨æ ¡éªå¨æ¥å£ï¼éè¿ç¼ç¨çæ¹å¼æ ¡éªç®æ å¯¹è±¡\n * æ ¸å¿æ¹æ³\n   * supports(Class)ï¼æ ¡éªç®æ ç±»è½å¦æ ¡éª\n   * validate(Object,Errors)ï¼æ ¡éªç®æ å¯¹è±¡ï¼å¹¶å°æ ¡éªå¤±è´¥çåå®¹è¾åºè³ Errors å¯¹è±¡\n * éå¥ç»ä»¶\n   * éè¯¯æ¶éå¨ï¼org.springframework.validation.Errors\n   * Validator å·¥å·ç±»ï¼org.springframework.validation.ValidationUtils\n\n\n# Errors æ¥å£è®¾è®¡\n\n * æ¥å£èè´£\n   * æ°æ®ç»å®åæ ¡éªéè¯¯æ¶éæ¥å£ï¼ä¸ Java Bean åå¶å±æ§æå¼ºå³èæ§\n * æ ¸å¿æ¹æ³\n   * reject æ¹æ³ï¼éè½½ï¼ï¼æ¶ééè¯¯ææ¡\n   * rejectValue æ¹æ³ï¼éè½½ï¼ï¼æ¶éå¯¹è±¡å­æ®µä¸­çéè¯¯ææ¡\n * éå¥ç»ä»¶\n   * Java Bean éè¯¯æè¿°ï¼org.springframework.validation.ObjectError\n   * Java Bean å±æ§éè¯¯æè¿°ï¼org.springframework.validation.FieldError\n\n\n# Errors ææ¡æ¥æº\n\nErrors ææ¡çææ­¥éª¤\n\n * éæ© Errors å®ç°ï¼å¦ï¼org.springframework.validation.BeanPropertyBindingResultï¼\n * è°ç¨ reject æ rejectValue æ¹æ³\n * è·å Errors å¯¹è±¡ä¸­ ObjectError æ FieldError\n * å° ObjectError æ FieldError ä¸­ç code å argsï¼å³è MessageSource å®ç°ï¼å¦ï¼ResourceBundleMessageSourceï¼\n\n\n# spring web æ ¡éªåç\n\n# RequestBody åæ°æ ¡éªå®ç°åç\n\nå¨ spring-mvc ä¸­ï¼RequestResponseBodyMethodProcessor æ¯ç¨äºè§£æ @RequestBody æ æ³¨çåæ°ä»¥åå¤ç@ResponseBody æ æ³¨æ¹æ³çè¿åå¼çãå¶ä¸­ï¼æ§è¡åæ°æ ¡éªçé»è¾è¯å®å°±å¨è§£æåæ°çæ¹æ³ resolveArgument() ä¸­ï¼\n\n@Override\npublic Object resolveArgument(MethodParameter parameter, @Nullable ModelAndViewContainer mavContainer,\n    NativeWebRequest webRequest, @Nullable WebDataBinderFactory binderFactory) throws Exception {\n\n    parameter = parameter.nestedIfOptional();\n    Object arg = readWithMessageConverters(webRequest, parameter, parameter.getNestedGenericParameterType());\n    String name = Conventions.getVariableNameForParameter(parameter);\n\n    if (binderFactory != null) {\n        WebDataBinder binder = binderFactory.createBinder(webRequest, arg, name);\n        if (arg != null) {\n            // å°è¯è¿è¡åæ°æ ¡éª\n            validateIfApplicable(binder, parameter);\n            if (binder.getBindingResult().hasErrors() && isBindExceptionRequired(binder, parameter)) {\n                // å¦æå­å¨æ ¡éªéè¯¯ï¼åæåº MethodArgumentNotValidException\n                throw new MethodArgumentNotValidException(parameter, binder.getBindingResult());\n            }\n        }\n        if (mavContainer != null) {\n            mavContainer.addAttribute(BindingResult.MODEL_KEY_PREFIX + name, binder.getBindingResult());\n        }\n    }\n\n    return adaptArgumentIfNecessary(arg, parameter);\n}\n\n\nå¯ä»¥çå°ï¼resolveArgument()è°ç¨äº validateIfApplicable()è¿è¡åæ°æ ¡éªã\n\nprotected void validateIfApplicable(WebDataBinder binder, MethodParameter parameter) {\n    // è·ååæ°æ³¨è§£ï¼å¦ @RequestBodyã@Validã@Validated\n    Annotation[] annotations = parameter.getParameterAnnotations();\n    for (Annotation ann : annotations) {\n        // åå°è¯è·å @Validated æ³¨è§£\n        Validated validatedAnn = AnnotationUtils.getAnnotation(ann, Validated.class);\n        // å¦ææ æ³¨äº @Validatedï¼ç´æ¥å¼å§æ ¡éªã\n        // å¦ææ²¡æï¼é£ä¹å¤æ­åæ°åæ¯å¦æ Valid å¼å¤´çæ³¨è§£ã\n        if (validatedAnn != null || ann.annotationType().getSimpleName().startsWith("Valid")) {\n            Object hints = (validatedAnn != null ? validatedAnn.value() : AnnotationUtils.getValue(ann));\n            Object[] validationHints = (hints instanceof Object[] ? (Object[]) hints : new Object[] {hints});\n            // æ§è¡æ ¡éª\n            binder.validate(validationHints);\n            break;\n        }\n    }\n}\n\n\nä»¥ä¸ä»£ç ï¼å°±è§£éäº Spring ä¸ºä»ä¹è½åæ¶æ¯æ @Validatedã@Valid ä¸¤ä¸ªæ³¨è§£ã\n\næ¥ä¸æ¥ï¼çä¸ä¸ WebDataBinder.validate() çå®ç°ï¼\n\n@Override\npublic void validate(Object target, Errors errors, Object... validationHints) {\n    if (this.targetValidator != null) {\n        processConstraintViolations(\n            // æ­¤å¤è°ç¨ Hibernate Validator æ§è¡çæ­£çæ ¡éª\n            this.targetValidator.validate(target, asValidationGroups(validationHints)), errors);\n    }\n}\n\n\néè¿ä¸é¢ä»£ç ï¼å¯ä»¥çåº Spring æ ¡éªå®éä¸æ¯åºäº Hibernate Validator çå°è£ã\n\n# æ¹æ³çº§å«çåæ°æ ¡éªå®ç°åç\n\nSpring æ¯ææ ¹æ®æ¹æ³å»è¿è¡æ¦æªãæ ¡éªï¼åçå°±å¨äºåºç¨äº AOP ææ¯ãå·ä½æ¥è¯´ï¼æ¯éè¿ MethodValidationPostProcessor å¨ææ³¨å AOP åé¢ï¼ç¶åä½¿ç¨ MethodValidationInterceptor å¯¹åç¹æ¹æ³ç»å¥å¢å¼ºã\n\npublic class MethodValidationPostProcessor extends AbstractBeanFactoryAwareAdvisingPostProcessorimplements InitializingBean {\n    @Override\n    public void afterPropertiesSet() {\n        // ä¸ºææ @Validated æ æ³¨ç Bean åå»ºåé¢\n        Pointcut pointcut = new AnnotationMatchingPointcut(this.validatedAnnotationType, true);\n        // åå»º Advisor è¿è¡å¢å¼º\n        this.advisor = new DefaultPointcutAdvisor(pointcut, createMethodValidationAdvice(this.validator));\n    }\n\n    // åå»º Adviceï¼æ¬è´¨å°±æ¯ä¸ä¸ªæ¹æ³æ¦æªå¨\n    protected Advice createMethodValidationAdvice(@Nullable Validator validator) {\n        return (validator != null ? new MethodValidationInterceptor(validator) : new MethodValidationInterceptor());\n    }\n}\n\n\næ¥ççä¸ä¸ MethodValidationInterceptorï¼\n\npublic class MethodValidationInterceptor implements MethodInterceptor {\n    @Override\n    public Object invoke(MethodInvocation invocation) throws Throwable {\n        // æ éå¢å¼ºçæ¹æ³ï¼ç´æ¥è·³è¿\n        if (isFactoryBeanMetadataMethod(invocation.getMethod())) {\n            return invocation.proceed();\n        }\n        // è·ååç»ä¿¡æ¯\n        Class<?>[] groups = determineValidationGroups(invocation);\n        ExecutableValidator execVal = this.validator.forExecutables();\n        Method methodToValidate = invocation.getMethod();\n        Set<ConstraintViolation<Object>> result;\n        try {\n            // æ¹æ³å¥åæ ¡éªï¼æç»è¿æ¯å§æç» Hibernate Validator æ¥æ ¡éª\n            result = execVal.validateParameters(\n                invocation.getThis(), methodToValidate, invocation.getArguments(), groups);\n        }\n        catch (IllegalArgumentException ex) {\n            ...\n        }\n        // æå¼å¸¸ç´æ¥æåº\n        if (!result.isEmpty()) {\n            throw new ConstraintViolationException(result);\n        }\n        // çæ­£çæ¹æ³è°ç¨\n        Object returnValue = invocation.proceed();\n        // å¯¹è¿åå¼åæ ¡éªï¼æç»è¿æ¯å§æç»Hibernate Validatoræ¥æ ¡éª\n        result = execVal.validateReturnValue(invocation.getThis(), methodToValidate, returnValue, groups);\n        // æå¼å¸¸ç´æ¥æåº\n        if (!result.isEmpty()) {\n            throw new ConstraintViolationException(result);\n        }\n        return returnValue;\n    }\n}\n\n\nå®éä¸ï¼ä¸ç®¡æ¯ requestBody åæ°æ ¡éªè¿æ¯æ¹æ³çº§å«çæ ¡éªï¼æç»é½æ¯è°ç¨ Hibernate Validator æ§è¡æ ¡éªï¼Spring Validation åªæ¯åäºä¸å±å°è£ã\n\n\n# é®é¢\n\nSpring æåªäºæ ¡éªæ ¸å¿ç»ä»¶ï¼\n\n * æ£éªå¨ï¼org.springframework.validation.Validator\n * éè¯¯æ¶éå¨ï¼org.springframework.validation.Errors\n * Java Bean éè¯¯æè¿°ï¼org.springframework.validation.ObjectError\n * Java Bean å±æ§éè¯¯æè¿°ï¼org.springframework.validation.FieldError\n * Bean Validation ééï¼org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n * https://juejin.cn/post/6856541106626363399',normalizedContent:'# spring æ ¡éª\n\njava api è§è(jsr303)å®ä¹äºbeanæ ¡éªçæ åvalidation-apiï¼ä½æ²¡ææä¾å®ç°ãhibernate validationæ¯å¯¹è¿ä¸ªè§èçå®ç°ï¼å¹¶å¢å äºæ ¡éªæ³¨è§£å¦@emailã@lengthç­ãspring validationæ¯å¯¹hibernate validationçäºæ¬¡å°è£ï¼ç¨äºæ¯æspring mvcåæ°èªå¨æ ¡éªã\n\n\n# å¿«éå¥é¨\n\n\n# å¼å¥ä¾èµ\n\nå¦æ spring-boot çæ¬å°äº 2.3.xï¼spring-boot-starter-web ä¼èªå¨ä¼ å¥ hibernate-validator ä¾èµãå¦æ spring-boot çæ¬å¤§äº 2.3.xï¼åéè¦æå¨å¼å¥ä¾èµï¼\n\n<dependency>\n  <groupid>org.hibernate.validator</groupid>\n  <artifactid>hibernate-validator-parent</artifactid>\n  <version>6.2.5.final</version>\n</dependency>\n\n\nå¯¹äº web æå¡æ¥è¯´ï¼ä¸ºé²æ­¢éæ³åæ°å¯¹ä¸å¡é æå½±åï¼å¨ controller å±ä¸å®è¦ååæ°æ ¡éªçï¼å¤§é¨åæåµä¸ï¼è¯·æ±åæ°åä¸ºå¦ä¸ä¸¤ç§å½¢å¼ï¼\n\n * postãput è¯·æ±ï¼ä½¿ç¨ requestbody ä¼ éåæ°ï¼\n * get è¯·æ±ï¼ä½¿ç¨ requestparam/pathvariable ä¼ éåæ°ã\n\nå®éä¸ï¼ä¸ç®¡æ¯ requestbody åæ°æ ¡éªè¿æ¯æ¹æ³çº§å«çæ ¡éªï¼æç»é½æ¯è°ç¨ hibernate validator æ§è¡æ ¡éªï¼spring validation åªæ¯åäºä¸å±å°è£ã\n\n\n# æ ¡éªç¤ºä¾\n\nï¼1ï¼å¨å®ä½ä¸æ è®°æ ¡éªæ³¨è§£\n\n@data\n@noargsconstructor\n@allargsconstructor\npublic class user implements serializable {\n\n    @notnull\n    private long id;\n\n    @notblank\n    @size(min = 2, max = 10)\n    private string name;\n\n    @min(value = 1)\n    @max(value = 100)\n    private integer age;\n\n}\n\n\nï¼2ï¼å¨æ¹æ³åæ°ä¸å£°ææ ¡éªæ³¨è§£\n\n@slf4j\n@validated\n@restcontroller\n@requestmapping("validate1")\npublic class validatorcontroller {\n\n    /**\n     * {@link requestbody} åæ°æ ¡éª\n     */\n    @postmapping(value = "save")\n    public dataresult<boolean> save(@valid @requestbody user entity) {\n        log.info("ä¿å­ä¸æ¡è®°å½ï¼{}", jsonutil.tojsonstr(entity));\n        return dataresult.ok(true);\n    }\n\n    /**\n     * {@link requestparam} åæ°æ ¡éª\n     */\n    @getmapping(value = "querybyname")\n    public dataresult<user> querybyname(\n        @requestparam("username")\n        @notblank\n        @size(min = 2, max = 10)\n        string name\n    ) {\n        user user = new user(1l, name, 18);\n        return dataresult.ok(user);\n    }\n\n    /**\n     * {@link pathvariable} åæ°æ ¡éª\n     */\n    @getmapping(value = "detail/{id}")\n    public dataresult<user> detail(@pathvariable("id") @min(1l) long id) {\n        user user = new user(id, "æå", 18);\n        return dataresult.ok(user);\n    }\n\n}\n\n\nï¼3ï¼å¦æè¯·æ±åæ°ä¸æ»¡è¶³æ ¡éªè§åï¼åä¼æåº constraintviolationexception æ methodargumentnotvalidexception å¼å¸¸ã\n\n\n# ç»ä¸å¼å¸¸å¤ç\n\nå¨å®éé¡¹ç®å¼åä¸­ï¼éå¸¸ä¼ç¨ç»ä¸å¼å¸¸å¤çæ¥è¿åä¸ä¸ªæ´åå¥½çæç¤ºã\n\n@slf4j\n@controlleradvice\npublic class globalexceptionhandler {\n\n    /**\n     * å¤çææä¸å¯ç¥çå¼å¸¸\n     */\n    @responsebody\n    @responsestatus(httpstatus.ok)\n    @exceptionhandler(throwable.class)\n    public result handleexception(throwable e) {\n        log.error("æªç¥å¼å¸¸", e);\n        return new result(resultstatus.http_server_error.getcode(), e.getmessage());\n    }\n\n    /**\n     * ç»ä¸å¤çè¯·æ±åæ°æ ¡éªå¼å¸¸(æ®éä¼ å)\n     *\n     * @param e constraintviolationexception\n     * @return {@link dataresult}\n     */\n    @responsebody\n    @responsestatus(httpstatus.bad_request)\n    @exceptionhandler({ constraintviolationexception.class })\n    public result handleconstraintviolationexception(final constraintviolationexception e) {\n        log.error("constraintviolationexception", e);\n        list<string> errors = new arraylist<>();\n        for (constraintviolation<?> violation : e.getconstraintviolations()) {\n            path path = violation.getpropertypath();\n            list<string> patharr = strutil.split(path.tostring(), \',\');\n            errors.add(patharr.get(0) + " " + violation.getmessage());\n        }\n        return new result(resultstatus.request_error.getcode(), collectionutil.join(errors, ","));\n    }\n\n    /**\n     * å¤çåæ°æ ¡éªå¼å¸¸\n     *\n     * @param e methodargumentnotvalidexception\n     * @return {@link dataresult}\n     */\n    @responsebody\n    @responsestatus(httpstatus.bad_request)\n    @exceptionhandler({ methodargumentnotvalidexception.class })\n    private result handlemethodargumentnotvalidexception(final methodargumentnotvalidexception e) {\n        log.error("methodargumentnotvalidexception", e);\n        list<string> errors = new arraylist<>();\n        for (objecterror error : e.getbindingresult().getallerrors()) {\n            errors.add(((fielderror) error).getfield() + " " + error.getdefaultmessage());\n        }\n        return new result(resultstatus.request_error.getcode(), collectionutil.join(errors, ","));\n    }\n\n}\n\n\n\n# è¿é¶ä½¿ç¨\n\n\n# åç»æ ¡éª\n\nå¨å®éé¡¹ç®ä¸­ï¼å¯è½å¤ä¸ªæ¹æ³éè¦ä½¿ç¨åä¸ä¸ª dto ç±»æ¥æ¥æ¶åæ°ï¼èä¸åæ¹æ³çæ ¡éªè§åå¾å¯è½æ¯ä¸ä¸æ ·çãè¿ä¸ªæ¶åï¼ç®åå°å¨ dto ç±»çå­æ®µä¸å çº¦ææ³¨è§£æ æ³è§£å³è¿ä¸ªé®é¢ãå æ­¤ï¼spring-validation æ¯æäºåç»æ ¡éªçåè½ï¼ä¸é¨ç¨æ¥è§£å³è¿ç±»é®é¢ã\n\nï¼1ï¼å®ä¹åç»\n\n@target({ elementtype.field, elementtype.parameter })\n@retention(retentionpolicy.runtime)\npublic @interface addcheck { }\n\n@target({ elementtype.field, elementtype.parameter })\n@retention(retentionpolicy.runtime)\npublic @interface editcheck { }\n\n\nï¼2ï¼å¨å®ä½ä¸æ è®°æ ¡éªæ³¨è§£\n\n@data\npublic class user2 {\n\n    @notnull(groups = editcheck.class)\n    private long id;\n\n    @notnull(groups = { addcheck.class, editcheck.class })\n    @size(min = 2, max = 10, groups = { addcheck.class, editcheck.class })\n    private string name;\n\n    @ismobile(message = "ä¸æ¯ææææºå·", groups = { addcheck.class, editcheck.class })\n    private string mobile;\n\n}\n\n\nï¼3ï¼å¨æ¹æ³ä¸æ ¹æ®ä¸ååºæ¯è¿è¡æ ¡éªåç»\n\n@slf4j\n@validated\n@restcontroller\n@requestmapping("validate2")\npublic class validatorcontroller2 {\n\n    /**\n     * {@link requestbody} åæ°æ ¡éª\n     */\n    @postmapping(value = "add")\n    public dataresult<boolean> add(@validated(addcheck.class) @requestbody user2 entity) {\n        log.info("æ·»å ä¸æ¡è®°å½ï¼{}", jsonutil.tojsonstr(entity));\n        return dataresult.ok(true);\n    }\n\n    /**\n     * {@link requestbody} åæ°æ ¡éª\n     */\n    @postmapping(value = "edit")\n    public dataresult<boolean> edit(@validated(editcheck.class) @requestbody user2 entity) {\n        log.info("ç¼è¾ä¸æ¡è®°å½ï¼{}", jsonutil.tojsonstr(entity));\n        return dataresult.ok(true);\n    }\n\n}\n\n\n\n# åµå¥æ ¡éª\n\nåé¢çç¤ºä¾ä¸­ï¼dto ç±»éé¢çå­æ®µé½æ¯åºæ¬æ°æ®ç±»åå string ç±»åãä½æ¯å®éåºæ¯ä¸­ï¼æå¯è½æä¸ªå­æ®µä¹æ¯ä¸ä¸ªå¯¹è±¡ï¼è¿ç§æåµåï¼å¯ä»¥ä½¿ç¨åµå¥æ ¡éªã post æ¯å¦ï¼ä¸é¢ä¿å­ user ä¿¡æ¯çæ¶ååæ¶è¿å¸¦æ job ä¿¡æ¯ãéè¦æ³¨æçæ¯ï¼æ­¤æ¶ dto ç±»çå¯¹åºå­æ®µå¿é¡»æ è®°@valid æ³¨è§£ã\n\n@data\npublic class userdto {\n\n    @min(value = 10000000000000000l, groups = update.class)\n    private long userid;\n\n    @notnull(groups = {save.class, update.class})\n    @length(min = 2, max = 10, groups = {save.class, update.class})\n    private string username;\n\n    @notnull(groups = {save.class, update.class})\n    @length(min = 6, max = 20, groups = {save.class, update.class})\n    private string account;\n\n    @notnull(groups = {save.class, update.class})\n    @length(min = 6, max = 20, groups = {save.class, update.class})\n    private string password;\n\n    @notnull(groups = {save.class, update.class})\n    @valid\n    private job job;\n\n    @data\n    public static class job {\n\n        @min(value = 1, groups = update.class)\n        private long jobid;\n\n        @notnull(groups = {save.class, update.class})\n        @length(min = 2, max = 10, groups = {save.class, update.class})\n        private string jobname;\n\n        @notnull(groups = {save.class, update.class})\n        @length(min = 2, max = 10, groups = {save.class, update.class})\n        private string position;\n    }\n\n    /**\n     * ä¿å­çæ¶åæ ¡éªåç»\n     */\n    public interface save {\n    }\n\n    /**\n     * æ´æ°çæ¶åæ ¡éªåç»\n     */\n    public interface update {\n    }\n}\nå¤å¶ä»£ç \n\n\nåµå¥æ ¡éªå¯ä»¥ç»ååç»æ ¡éªä¸èµ·ä½¿ç¨ãè¿æå°±æ¯åµå¥éåæ ¡éªä¼å¯¹éåéé¢çæ¯ä¸é¡¹é½è¿è¡æ ¡éªï¼ä¾å¦list<job>å­æ®µä¼å¯¹è¿ä¸ª list éé¢çæ¯ä¸ä¸ª job å¯¹è±¡é½è¿è¡æ ¡éª\n\n\n# èªå®ä¹æ ¡éªæ³¨è§£\n\nï¼1ï¼èªå®ä¹æ ¡éªæ³¨è§£ @ismobile\n\n@target({ method, field, annotation_type, constructor, parameter, type_use })\n@retention(runtime)\n@constraint(validatedby = mobilevalidator.class)\npublic @interface ismobile {\n\n    string message();\n\n    class<?>[] groups() default {};\n\n    class<? extends payload>[] payload() default {};\n\n}\n\n\nï¼2ï¼å®ç° constraintvalidator æ¥å£ï¼ç¼å @ismobile æ ¡éªæ³¨è§£çè§£æå¨\n\nimport cn.hutool.core.util.strutil;\nimport io.github.dunwu.spring.core.validation.annotation.ismobile;\nimport io.github.dunwu.tool.util.validatorutil;\n\nimport javax.validation.constraintvalidator;\nimport javax.validation.constraintvalidatorcontext;\n\npublic class mobilevalidator implements constraintvalidator<ismobile, string> {\n\n    @override\n    public void initialize(ismobile ismobile) { }\n\n    @override\n    public boolean isvalid(string s, constraintvalidatorcontext constraintvalidatorcontext) {\n        if (strutil.isblank(s)) {\n            return false;\n        } else {\n            return validatorutil.ismobile(s);\n        }\n    }\n\n}\n\n\n\n# èªå®ä¹æ ¡éª\n\nå¯ä»¥éè¿å®ç° org.springframework.validation.validator æ¥å£æ¥èªå®ä¹æ ¡éªã\n\næä»¥ä¸è¦ç¹\n\n * å®ç° supports æ¹æ³\n * å®ç° validate æ¹æ³\n   * éè¿ errors å¯¹è±¡æ¶ééè¯¯\n     * objecterrorï¼å¯¹è±¡ï¼beanï¼éè¯¯ï¼\n     * fielderrorï¼å¯¹è±¡ï¼beanï¼å±æ§ï¼propertyï¼éè¯¯\n   * éè¿ objecterror å fielderror å³è messagesource å®ç°è·åæç»çéè¯¯ææ¡\n\npackage io.github.dunwu.spring.core.validation;\n\nimport io.github.dunwu.spring.core.validation.annotation.valid;\nimport io.github.dunwu.spring.core.validation.config.customvalidatorconfig;\nimport io.github.dunwu.spring.core.validation.entity.person;\nimport org.springframework.stereotype.component;\nimport org.springframework.validation.errors;\nimport org.springframework.validation.validationutils;\nimport org.springframework.validation.validator;\n\nimport java.lang.annotation.annotation;\nimport java.lang.reflect.field;\nimport java.util.arraylist;\nimport java.util.collections;\nimport java.util.list;\n\n@component\npublic class customvalidator implements validator {\n\n    private final customvalidatorconfig validatorconfig;\n\n    public customvalidator(customvalidatorconfig validatorconfig) {\n        this.validatorconfig = validatorconfig;\n    }\n\n    /**\n     * æ¬æ ¡éªå¨åªéå¯¹ person å¯¹è±¡è¿è¡æ ¡éª\n     */\n    @override\n    public boolean supports(class<?> clazz) {\n        return person.class.equals(clazz);\n    }\n\n    @override\n    public void validate(object target, errors errors) {\n        validationutils.rejectifempty(errors, "name", "name.empty");\n\n        list<field> fields = getfields(target.getclass());\n        for (field field : fields) {\n            annotation[] annotations = field.getannotations();\n            for (annotation annotation : annotations) {\n                if (annotation.annotationtype().getannotation(valid.class) != null) {\n                    try {\n                        validatorrule validatorrule = validatorconfig.findrule(annotation);\n                        if (validatorrule != null) {\n                            validatorrule.valid(annotation, target, field, errors);\n                        }\n                    } catch (exception e) {\n                        e.printstacktrace();\n                    }\n                }\n            }\n        }\n    }\n\n    private list<field> getfields(class<?> clazz) {\n        // å£°æfieldæ°ç»\n        list<field> fields = new arraylist<>();\n        // å¦æclassç±»åä¸ä¸ºç©º\n        while (clazz != null) {\n            // æ·»å å±æ§å°å±æ§æ°ç»\n            collections.addall(fields, clazz.getdeclaredfields());\n            clazz = clazz.getsuperclass();\n        }\n        return fields;\n    }\n\n}\n\n\n\n# å¿«éå¤±è´¥(fail fast)\n\nspring validation é»è®¤ä¼æ ¡éªå®ææå­æ®µï¼ç¶åææåºå¼å¸¸ãå¯ä»¥éè¿ä¸äºç®åçéç½®ï¼å¼å¯ fali fast æ¨¡å¼ï¼ä¸æ¦æ ¡éªå¤±è´¥å°±ç«å³è¿åã\n\n@bean\npublic validator validator() {\n    validatorfactory validatorfactory = validation.byprovider(hibernatevalidator.class)\n            .configure()\n            // å¿«éå¤±è´¥æ¨¡å¼\n            .failfast(true)\n            .buildvalidatorfactory();\n    return validatorfactory.getvalidator();\n}\n\n\n\n# spring æ ¡éªåç\n\n\n# spring æ ¡éªä½¿ç¨åºæ¯\n\n * spring å¸¸è§æ ¡éªï¼validatorï¼\n * spring æ°æ®ç»å®ï¼databinderï¼\n * spring web åæ°ç»å®ï¼webdatabinderï¼\n * spring webmvc/webflux å¤çæ¹æ³åæ°æ ¡éª\n\n\n# validator æ¥å£è®¾è®¡\n\n * æ¥å£èè´£\n   * spring åé¨æ ¡éªå¨æ¥å£ï¼éè¿ç¼ç¨çæ¹å¼æ ¡éªç®æ å¯¹è±¡\n * æ ¸å¿æ¹æ³\n   * supports(class)ï¼æ ¡éªç®æ ç±»è½å¦æ ¡éª\n   * validate(object,errors)ï¼æ ¡éªç®æ å¯¹è±¡ï¼å¹¶å°æ ¡éªå¤±è´¥çåå®¹è¾åºè³ errors å¯¹è±¡\n * éå¥ç»ä»¶\n   * éè¯¯æ¶éå¨ï¼org.springframework.validation.errors\n   * validator å·¥å·ç±»ï¼org.springframework.validation.validationutils\n\n\n# errors æ¥å£è®¾è®¡\n\n * æ¥å£èè´£\n   * æ°æ®ç»å®åæ ¡éªéè¯¯æ¶éæ¥å£ï¼ä¸ java bean åå¶å±æ§æå¼ºå³èæ§\n * æ ¸å¿æ¹æ³\n   * reject æ¹æ³ï¼éè½½ï¼ï¼æ¶ééè¯¯ææ¡\n   * rejectvalue æ¹æ³ï¼éè½½ï¼ï¼æ¶éå¯¹è±¡å­æ®µä¸­çéè¯¯ææ¡\n * éå¥ç»ä»¶\n   * java bean éè¯¯æè¿°ï¼org.springframework.validation.objecterror\n   * java bean å±æ§éè¯¯æè¿°ï¼org.springframework.validation.fielderror\n\n\n# errors ææ¡æ¥æº\n\nerrors ææ¡çææ­¥éª¤\n\n * éæ© errors å®ç°ï¼å¦ï¼org.springframework.validation.beanpropertybindingresultï¼\n * è°ç¨ reject æ rejectvalue æ¹æ³\n * è·å errors å¯¹è±¡ä¸­ objecterror æ fielderror\n * å° objecterror æ fielderror ä¸­ç code å argsï¼å³è messagesource å®ç°ï¼å¦ï¼resourcebundlemessagesourceï¼\n\n\n# spring web æ ¡éªåç\n\n# requestbody åæ°æ ¡éªå®ç°åç\n\nå¨ spring-mvc ä¸­ï¼requestresponsebodymethodprocessor æ¯ç¨äºè§£æ @requestbody æ æ³¨çåæ°ä»¥åå¤ç@responsebody æ æ³¨æ¹æ³çè¿åå¼çãå¶ä¸­ï¼æ§è¡åæ°æ ¡éªçé»è¾è¯å®å°±å¨è§£æåæ°çæ¹æ³ resolveargument() ä¸­ï¼\n\n@override\npublic object resolveargument(methodparameter parameter, @nullable modelandviewcontainer mavcontainer,\n    nativewebrequest webrequest, @nullable webdatabinderfactory binderfactory) throws exception {\n\n    parameter = parameter.nestedifoptional();\n    object arg = readwithmessageconverters(webrequest, parameter, parameter.getnestedgenericparametertype());\n    string name = conventions.getvariablenameforparameter(parameter);\n\n    if (binderfactory != null) {\n        webdatabinder binder = binderfactory.createbinder(webrequest, arg, name);\n        if (arg != null) {\n            // å°è¯è¿è¡åæ°æ ¡éª\n            validateifapplicable(binder, parameter);\n            if (binder.getbindingresult().haserrors() && isbindexceptionrequired(binder, parameter)) {\n                // å¦æå­å¨æ ¡éªéè¯¯ï¼åæåº methodargumentnotvalidexception\n                throw new methodargumentnotvalidexception(parameter, binder.getbindingresult());\n            }\n        }\n        if (mavcontainer != null) {\n            mavcontainer.addattribute(bindingresult.model_key_prefix + name, binder.getbindingresult());\n        }\n    }\n\n    return adaptargumentifnecessary(arg, parameter);\n}\n\n\nå¯ä»¥çå°ï¼resolveargument()è°ç¨äº validateifapplicable()è¿è¡åæ°æ ¡éªã\n\nprotected void validateifapplicable(webdatabinder binder, methodparameter parameter) {\n    // è·ååæ°æ³¨è§£ï¼å¦ @requestbodyã@validã@validated\n    annotation[] annotations = parameter.getparameterannotations();\n    for (annotation ann : annotations) {\n        // åå°è¯è·å @validated æ³¨è§£\n        validated validatedann = annotationutils.getannotation(ann, validated.class);\n        // å¦ææ æ³¨äº @validatedï¼ç´æ¥å¼å§æ ¡éªã\n        // å¦ææ²¡æï¼é£ä¹å¤æ­åæ°åæ¯å¦æ valid å¼å¤´çæ³¨è§£ã\n        if (validatedann != null || ann.annotationtype().getsimplename().startswith("valid")) {\n            object hints = (validatedann != null ? validatedann.value() : annotationutils.getvalue(ann));\n            object[] validationhints = (hints instanceof object[] ? (object[]) hints : new object[] {hints});\n            // æ§è¡æ ¡éª\n            binder.validate(validationhints);\n            break;\n        }\n    }\n}\n\n\nä»¥ä¸ä»£ç ï¼å°±è§£éäº spring ä¸ºä»ä¹è½åæ¶æ¯æ @validatedã@valid ä¸¤ä¸ªæ³¨è§£ã\n\næ¥ä¸æ¥ï¼çä¸ä¸ webdatabinder.validate() çå®ç°ï¼\n\n@override\npublic void validate(object target, errors errors, object... validationhints) {\n    if (this.targetvalidator != null) {\n        processconstraintviolations(\n            // æ­¤å¤è°ç¨ hibernate validator æ§è¡çæ­£çæ ¡éª\n            this.targetvalidator.validate(target, asvalidationgroups(validationhints)), errors);\n    }\n}\n\n\néè¿ä¸é¢ä»£ç ï¼å¯ä»¥çåº spring æ ¡éªå®éä¸æ¯åºäº hibernate validator çå°è£ã\n\n# æ¹æ³çº§å«çåæ°æ ¡éªå®ç°åç\n\nspring æ¯ææ ¹æ®æ¹æ³å»è¿è¡æ¦æªãæ ¡éªï¼åçå°±å¨äºåºç¨äº aop ææ¯ãå·ä½æ¥è¯´ï¼æ¯éè¿ methodvalidationpostprocessor å¨ææ³¨å aop åé¢ï¼ç¶åä½¿ç¨ methodvalidationinterceptor å¯¹åç¹æ¹æ³ç»å¥å¢å¼ºã\n\npublic class methodvalidationpostprocessor extends abstractbeanfactoryawareadvisingpostprocessorimplements initializingbean {\n    @override\n    public void afterpropertiesset() {\n        // ä¸ºææ @validated æ æ³¨ç bean åå»ºåé¢\n        pointcut pointcut = new annotationmatchingpointcut(this.validatedannotationtype, true);\n        // åå»º advisor è¿è¡å¢å¼º\n        this.advisor = new defaultpointcutadvisor(pointcut, createmethodvalidationadvice(this.validator));\n    }\n\n    // åå»º adviceï¼æ¬è´¨å°±æ¯ä¸ä¸ªæ¹æ³æ¦æªå¨\n    protected advice createmethodvalidationadvice(@nullable validator validator) {\n        return (validator != null ? new methodvalidationinterceptor(validator) : new methodvalidationinterceptor());\n    }\n}\n\n\næ¥ççä¸ä¸ methodvalidationinterceptorï¼\n\npublic class methodvalidationinterceptor implements methodinterceptor {\n    @override\n    public object invoke(methodinvocation invocation) throws throwable {\n        // æ éå¢å¼ºçæ¹æ³ï¼ç´æ¥è·³è¿\n        if (isfactorybeanmetadatamethod(invocation.getmethod())) {\n            return invocation.proceed();\n        }\n        // è·ååç»ä¿¡æ¯\n        class<?>[] groups = determinevalidationgroups(invocation);\n        executablevalidator execval = this.validator.forexecutables();\n        method methodtovalidate = invocation.getmethod();\n        set<constraintviolation<object>> result;\n        try {\n            // æ¹æ³å¥åæ ¡éªï¼æç»è¿æ¯å§æç» hibernate validator æ¥æ ¡éª\n            result = execval.validateparameters(\n                invocation.getthis(), methodtovalidate, invocation.getarguments(), groups);\n        }\n        catch (illegalargumentexception ex) {\n            ...\n        }\n        // æå¼å¸¸ç´æ¥æåº\n        if (!result.isempty()) {\n            throw new constraintviolationexception(result);\n        }\n        // çæ­£çæ¹æ³è°ç¨\n        object returnvalue = invocation.proceed();\n        // å¯¹è¿åå¼åæ ¡éªï¼æç»è¿æ¯å§æç»hibernate validatoræ¥æ ¡éª\n        result = execval.validatereturnvalue(invocation.getthis(), methodtovalidate, returnvalue, groups);\n        // æå¼å¸¸ç´æ¥æåº\n        if (!result.isempty()) {\n            throw new constraintviolationexception(result);\n        }\n        return returnvalue;\n    }\n}\n\n\nå®éä¸ï¼ä¸ç®¡æ¯ requestbody åæ°æ ¡éªè¿æ¯æ¹æ³çº§å«çæ ¡éªï¼æç»é½æ¯è°ç¨ hibernate validator æ§è¡æ ¡éªï¼spring validation åªæ¯åäºä¸å±å°è£ã\n\n\n# é®é¢\n\nspring æåªäºæ ¡éªæ ¸å¿ç»ä»¶ï¼\n\n * æ£éªå¨ï¼org.springframework.validation.validator\n * éè¯¯æ¶éå¨ï¼org.springframework.validation.errors\n * java bean éè¯¯æè¿°ï¼org.springframework.validation.objecterror\n * java bean å±æ§éè¯¯æè¿°ï¼org.springframework.validation.fielderror\n * bean validation ééï¼org.springframework.validation.beanvalidation.localvalidatorfactorybean\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n * https://juejin.cn/post/6856541106626363399',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring æ°æ®ç»å®",frontmatter:{title:"Spring æ°æ®ç»å®",date:"2022-12-22T19:26:57.000Z",order:22,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","æ°æ®ç»å®"],permalink:"/pages/267b4c/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/22.Spring%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/22.Springæ°æ®ç»å®.md",key:"v-12c0ceb0",path:"/pages/267b4c/",headers:[{level:2,title:"å¿«éå¥é¨",slug:"å¿«éå¥é¨",normalizedTitle:"å¿«éå¥é¨",charIndex:201},{level:2,title:"Spring æ°æ®ç»å®ä½¿ç¨åºæ¯",slug:"spring-æ°æ®ç»å®ä½¿ç¨åºæ¯",normalizedTitle:"spring æ°æ®ç»å®ä½¿ç¨åºæ¯",charIndex:848},{level:2,title:"DataBinder",slug:"databinder",normalizedTitle:"databinder",charIndex:120},{level:2,title:"Spring æ°æ®ç»å®åæ°æ®",slug:"spring-æ°æ®ç»å®åæ°æ®",normalizedTitle:"spring æ°æ®ç»å®åæ°æ®",charIndex:1607},{level:2,title:"Spring æ°æ®ç»å®æ§å¶åæ°",slug:"spring-æ°æ®ç»å®æ§å¶åæ°",normalizedTitle:"spring æ°æ®ç»å®æ§å¶åæ°",charIndex:1996},{level:3,title:"DataBinder ç»å®æ§å¶åæ°",slug:"databinder-ç»å®æ§å¶åæ°",normalizedTitle:"databinder ç»å®æ§å¶åæ°",charIndex:2303},{level:2,title:"BeanWrapper çä½¿ç¨åºæ¯",slug:"beanwrapper-çä½¿ç¨åºæ¯",normalizedTitle:"beanwrapper çä½¿ç¨åºæ¯",charIndex:2563},{level:2,title:"Spring åºå± Java Beans æ¿æ¢å®ç°",slug:"spring-åºå±-java-beans-æ¿æ¢å®ç°",normalizedTitle:"spring åºå± java beans æ¿æ¢å®ç°",charIndex:2796},{level:2,title:"DataBinder æ°æ®æ ¡éª",slug:"databinder-æ°æ®æ ¡éª",normalizedTitle:"databinder æ°æ®æ ¡éª",charIndex:3082},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:3212},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:3573}],headersStr:"å¿«éå¥é¨ Spring æ°æ®ç»å®ä½¿ç¨åºæ¯ DataBinder Spring æ°æ®ç»å®åæ°æ® Spring æ°æ®ç»å®æ§å¶åæ° DataBinder ç»å®æ§å¶åæ° BeanWrapper çä½¿ç¨åºæ¯ Spring åºå± Java Beans æ¿æ¢å®ç° DataBinder æ°æ®æ ¡éª é®é¢ åèèµæ",content:'# Spring æ°æ®ç»å®\n\nSpring æ°æ®ç»å®(Data Binding)çä½ç¨æ¯å°ç¨æ·çè¾å¥å¨æç»å®å° JavaBeanãæ¢å¥è¯è¯´ï¼Spring æ°æ®ç»å®æºå¶æ¯å°å±æ§å¼è®¾ç½®å°ç®æ å¯¹è±¡ä¸­ã\n\nå¨ Spring ä¸­ï¼æ°æ®ç»å®åè½ä¸»è¦ç± DataBinder ç±»å®ç°ãæ­¤å¤ï¼BeanWrapper ä¹å·æç±»ä¼¼çåè½ï¼ä½ DataBinder é¢å¤æ¯æå­æ®µéªè¯ãå­æ®µæ ¼å¼ååç»å®ç»æåæã\n\n\n\n\n# å¿«éå¥é¨\n\nå®ä¹ä¸ä¸ªç¨äºæµè¯ç JavaBean\n\npublic class TestBean {\n\n    private int num;\n\n    public int getNum() {\n        return num;\n    }\n\n    public void setNum(int num) {\n        this.num = num;\n    }\n\n    @Override\n    public String toString() {\n        return "TestBean{" + "num=" + num + \'}\';\n    }\n\n}\n\n\næ°æ®ç»å®ç¤ºä¾\n\npublic class DataBindingDemo {\n\n    public static void main(String[] args) {\n\n        MutablePropertyValues mpv = new MutablePropertyValues();\n        mpv.add("num", "10");\n\n        TestBean testBean = new TestBean();\n        DataBinder db = new DataBinder(testBean);\n\n        db.bind(mpv);\n        System.out.println(testBean);\n    }\n\n}\n\n\n\n# Spring æ°æ®ç»å®ä½¿ç¨åºæ¯\n\n * Spring BeanDefinition å° Bean å®ä¾åå»º\n * Spring æ°æ®ç»å®ï¼DataBinderï¼\n * Spring Web åæ°ç»å®ï¼WebDataBinderï¼\n\n\n# DataBinder\n\nå¨ Spring ä¸­ï¼DataBinder ç±»æ¯æ°æ®ç»å®åè½çåºç±»ãWebDataBinder æ¯ DataBinder çå­ç±»ï¼ä¸»è¦ç¨äº Spring Web æ°æ®ç»å®ï¼æ­¤å¤ï¼è¿æä¸äº WebDataBinder çæ©å±å­ç±»ï¼å¶ç±»æå¦ä¸å¾æç¤ºï¼\n\n\n\nDataBinder æ ¸å¿å±æ§ï¼\n\nå±æ§                     è¯´æ\ntarget                 å³èç®æ  Bean\nobjectName             ç®æ  Bean åç§°\nbindingResult          å±æ§ç»å®ç»æ\ntypeConverter          ç±»åè½¬æ¢å¨\nconversionService      ç±»åè½¬æ¢æå¡\nmessageCodesResolver   æ ¡éªéè¯¯ææ¡ Code å¤çå¨\nvalidators             å³èç Bean Validator å®ä¾éå\n\nDataBinder ç±»çæ ¸å¿æ¹æ³æ¯ bind(PropertyValues)ï¼å° PropertyValues Key-Value åå®¹æ å°å°å³è Beanï¼targetï¼ä¸­çå±æ§ä¸\n\n * åè®¾ PropertyValues ä¸­åå« name=dunwu çé®å¼å¯¹æ¶, åæ¶ Bean å¯¹è±¡ User ä¸­å­å¨ name å±æ§, å½ bind æ¹æ³æ§è¡æ¶, User å¯¹è±¡ä¸­ç name å±æ§å¼å°è¢«ç»å®ä¸º dunwu\n\n\n# Spring æ°æ®ç»å®åæ°æ®\n\nDataBinder åæ°æ® - PropertyValues\n\nç¹å¾         è¯´æ\næ°æ®æ¥æº       BeanDefinitionï¼ä¸»è¦æ¥æº XML èµæºéç½® BeanDefinition\næ°æ®ç»æ       ç±ä¸ä¸ªæå¤ä¸ª PropertyValue ç»æ\næåç»æ       PropertyValue åå«å±æ§åç§°ï¼ä»¥åå±æ§å¼ï¼åæ¬åå§å¼ãç±»åè½¬æ¢åçå¼ï¼\nå¸¸è§å®ç°       MutablePropertyValues\nWeb æ©å±å®ç°   ServletConfigPropertyValuesãServletRequestParameterPropertyValues\nç¸å³çå½å¨æ     InstantiationAwareBeanPostProcessor#postProcessProperties\n\n\n# Spring æ°æ®ç»å®æ§å¶åæ°\n\nDataBinder ç»å®ç¹æ®åºæ¯åæ\n\n * å½ PropertyValues ä¸­åå«åç§° x ç PropertyValueï¼ç®æ å¯¹è±¡ B ä¸å­å¨ x å±æ§ï¼å½ bind æ¹æ³æ§ è¡æ¶ï¼ä¼åçä»ä¹ï¼\n * å½ PropertyValues ä¸­åå«åç§° x ç PropertyValueï¼ç®æ å¯¹è±¡ B ä¸­å­å¨ x å±æ§ï¼å½ bind æ¹æ³æ§ è¡æ¶ï¼å¦ä½é¿å B å±æ§ x ä¸è¢«ç»å®ï¼\n * å½ PropertyValues ä¸­åå«åç§° x.y ç PropertyValueï¼ç®æ å¯¹è±¡ B ä¸­å­å¨ x å±æ§ï¼åµå¥ y å±æ§ï¼ ï¼å½ bind æ¹æ³æ§è¡æ¶ï¼ä¼åçä»ä¹ï¼\n\n\n# DataBinder ç»å®æ§å¶åæ°\n\nåæ°åç§°                  è¯´æ\nignoreUnknownFields   æ¯å¦å¿½ç¥æªç¥å­æ®µï¼é»è®¤å¼ï¼true\nignoreInvalidFields   æ¯å¦å¿½ç¥éæ³å­æ®µï¼é»è®¤å¼ï¼false\nautoGrowNestedPaths   æ¯å¦èªå¨å¢å åµå¥è·¯å¾ï¼é»è®¤å¼ï¼true\nallowedFields         ç»å®å­æ®µç½åå\ndisallowedFields      ç»å®å­æ®µé»åå\nrequiredFields        å¿é¡»ç»å®å­æ®µ\n\n\n# BeanWrapper çä½¿ç¨åºæ¯\n\n * Spring åºå± JavaBeans åºç¡è®¾æ½çä¸­å¿åæ¥å£\n * éå¸¸ä¸ä¼ç´æ¥ä½¿ç¨ï¼é´æ¥ç¨äº BeanFactory å DataBinder\n * æä¾æ å JavaBeans åæåæä½ï¼è½å¤åç¬ææ¹éå­å¨ Java Bean çå±æ§ï¼propertiesï¼\n * æ¯æåµå¥å±æ§è·¯å¾ï¼nested pathï¼\n * å®ç°ç±» org.springframework.beans.BeanWrapperImpl\n\n\n# Spring åºå± Java Beans æ¿æ¢å®ç°\n\nJavaBeans æ ¸å¿å®ç° - java.beans.BeanInfo\n\n * å±æ§ï¼Propertyï¼\n   * java.beans.PropertyEditor\n * æ¹æ³ï¼Methodï¼\n * äºä»¶ï¼Eventï¼\n * è¡¨è¾¾å¼ï¼Expressionï¼\n\nSpring æ¿ä»£å®ç° - org.springframework.beans.BeanWrapper\n\n * å±æ§ï¼Propertyï¼\n   * java.beans.PropertyEditor\n * åµå¥å±æ§è·¯å¾ï¼nested pathï¼\n\n\n# DataBinder æ°æ®æ ¡éª\n\nDataBinder ä¸ BeanWrapper\n\n * bind æ¹æ³çæ BeanPropertyBindingResult\n * BeanPropertyBindingResult å³è BeanWrapper\n\n\n# é®é¢\n\næ å JavaBeans æ¯å¦ä½æä½å±æ§çï¼\n\nAPI                             è¯´æ\njava.beans.Introspector         Java Beans åç API\njava.beans.BeanInfo             Java Bean åä¿¡æ¯ API\njava.beans.BeanDescriptor       Java Bean ä¿¡æ¯æè¿°ç¬¦\njava.beans.PropertyDescriptor   Java Bean å±æ§æè¿°ç¬¦\njava.beans.MethodDescriptor     Java Bean æ¹æ³æè¿°ç¬¦\njava.beans.EventSetDescriptor   Java Bean äºä»¶éåæè¿°ç¬¦\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring æ°æ®ç»å®\n\nspring æ°æ®ç»å®(data binding)çä½ç¨æ¯å°ç¨æ·çè¾å¥å¨æç»å®å° javabeanãæ¢å¥è¯è¯´ï¼spring æ°æ®ç»å®æºå¶æ¯å°å±æ§å¼è®¾ç½®å°ç®æ å¯¹è±¡ä¸­ã\n\nå¨ spring ä¸­ï¼æ°æ®ç»å®åè½ä¸»è¦ç± databinder ç±»å®ç°ãæ­¤å¤ï¼beanwrapper ä¹å·æç±»ä¼¼çåè½ï¼ä½ databinder é¢å¤æ¯æå­æ®µéªè¯ãå­æ®µæ ¼å¼ååç»å®ç»æåæã\n\n\n\n\n# å¿«éå¥é¨\n\nå®ä¹ä¸ä¸ªç¨äºæµè¯ç javabean\n\npublic class testbean {\n\n    private int num;\n\n    public int getnum() {\n        return num;\n    }\n\n    public void setnum(int num) {\n        this.num = num;\n    }\n\n    @override\n    public string tostring() {\n        return "testbean{" + "num=" + num + \'}\';\n    }\n\n}\n\n\næ°æ®ç»å®ç¤ºä¾\n\npublic class databindingdemo {\n\n    public static void main(string[] args) {\n\n        mutablepropertyvalues mpv = new mutablepropertyvalues();\n        mpv.add("num", "10");\n\n        testbean testbean = new testbean();\n        databinder db = new databinder(testbean);\n\n        db.bind(mpv);\n        system.out.println(testbean);\n    }\n\n}\n\n\n\n# spring æ°æ®ç»å®ä½¿ç¨åºæ¯\n\n * spring beandefinition å° bean å®ä¾åå»º\n * spring æ°æ®ç»å®ï¼databinderï¼\n * spring web åæ°ç»å®ï¼webdatabinderï¼\n\n\n# databinder\n\nå¨ spring ä¸­ï¼databinder ç±»æ¯æ°æ®ç»å®åè½çåºç±»ãwebdatabinder æ¯ databinder çå­ç±»ï¼ä¸»è¦ç¨äº spring web æ°æ®ç»å®ï¼æ­¤å¤ï¼è¿æä¸äº webdatabinder çæ©å±å­ç±»ï¼å¶ç±»æå¦ä¸å¾æç¤ºï¼\n\n\n\ndatabinder æ ¸å¿å±æ§ï¼\n\nå±æ§                     è¯´æ\ntarget                 å³èç®æ  bean\nobjectname             ç®æ  bean åç§°\nbindingresult          å±æ§ç»å®ç»æ\ntypeconverter          ç±»åè½¬æ¢å¨\nconversionservice      ç±»åè½¬æ¢æå¡\nmessagecodesresolver   æ ¡éªéè¯¯ææ¡ code å¤çå¨\nvalidators             å³èç bean validator å®ä¾éå\n\ndatabinder ç±»çæ ¸å¿æ¹æ³æ¯ bind(propertyvalues)ï¼å° propertyvalues key-value åå®¹æ å°å°å³è beanï¼targetï¼ä¸­çå±æ§ä¸\n\n * åè®¾ propertyvalues ä¸­åå« name=dunwu çé®å¼å¯¹æ¶, åæ¶ bean å¯¹è±¡ user ä¸­å­å¨ name å±æ§, å½ bind æ¹æ³æ§è¡æ¶, user å¯¹è±¡ä¸­ç name å±æ§å¼å°è¢«ç»å®ä¸º dunwu\n\n\n# spring æ°æ®ç»å®åæ°æ®\n\ndatabinder åæ°æ® - propertyvalues\n\nç¹å¾         è¯´æ\næ°æ®æ¥æº       beandefinitionï¼ä¸»è¦æ¥æº xml èµæºéç½® beandefinition\næ°æ®ç»æ       ç±ä¸ä¸ªæå¤ä¸ª propertyvalue ç»æ\næåç»æ       propertyvalue åå«å±æ§åç§°ï¼ä»¥åå±æ§å¼ï¼åæ¬åå§å¼ãç±»åè½¬æ¢åçå¼ï¼\nå¸¸è§å®ç°       mutablepropertyvalues\nweb æ©å±å®ç°   servletconfigpropertyvaluesãservletrequestparameterpropertyvalues\nç¸å³çå½å¨æ     instantiationawarebeanpostprocessor#postprocessproperties\n\n\n# spring æ°æ®ç»å®æ§å¶åæ°\n\ndatabinder ç»å®ç¹æ®åºæ¯åæ\n\n * å½ propertyvalues ä¸­åå«åç§° x ç propertyvalueï¼ç®æ å¯¹è±¡ b ä¸å­å¨ x å±æ§ï¼å½ bind æ¹æ³æ§ è¡æ¶ï¼ä¼åçä»ä¹ï¼\n * å½ propertyvalues ä¸­åå«åç§° x ç propertyvalueï¼ç®æ å¯¹è±¡ b ä¸­å­å¨ x å±æ§ï¼å½ bind æ¹æ³æ§ è¡æ¶ï¼å¦ä½é¿å b å±æ§ x ä¸è¢«ç»å®ï¼\n * å½ propertyvalues ä¸­åå«åç§° x.y ç propertyvalueï¼ç®æ å¯¹è±¡ b ä¸­å­å¨ x å±æ§ï¼åµå¥ y å±æ§ï¼ ï¼å½ bind æ¹æ³æ§è¡æ¶ï¼ä¼åçä»ä¹ï¼\n\n\n# databinder ç»å®æ§å¶åæ°\n\nåæ°åç§°                  è¯´æ\nignoreunknownfields   æ¯å¦å¿½ç¥æªç¥å­æ®µï¼é»è®¤å¼ï¼true\nignoreinvalidfields   æ¯å¦å¿½ç¥éæ³å­æ®µï¼é»è®¤å¼ï¼false\nautogrownestedpaths   æ¯å¦èªå¨å¢å åµå¥è·¯å¾ï¼é»è®¤å¼ï¼true\nallowedfields         ç»å®å­æ®µç½åå\ndisallowedfields      ç»å®å­æ®µé»åå\nrequiredfields        å¿é¡»ç»å®å­æ®µ\n\n\n# beanwrapper çä½¿ç¨åºæ¯\n\n * spring åºå± javabeans åºç¡è®¾æ½çä¸­å¿åæ¥å£\n * éå¸¸ä¸ä¼ç´æ¥ä½¿ç¨ï¼é´æ¥ç¨äº beanfactory å databinder\n * æä¾æ å javabeans åæåæä½ï¼è½å¤åç¬ææ¹éå­å¨ java bean çå±æ§ï¼propertiesï¼\n * æ¯æåµå¥å±æ§è·¯å¾ï¼nested pathï¼\n * å®ç°ç±» org.springframework.beans.beanwrapperimpl\n\n\n# spring åºå± java beans æ¿æ¢å®ç°\n\njavabeans æ ¸å¿å®ç° - java.beans.beaninfo\n\n * å±æ§ï¼propertyï¼\n   * java.beans.propertyeditor\n * æ¹æ³ï¼methodï¼\n * äºä»¶ï¼eventï¼\n * è¡¨è¾¾å¼ï¼expressionï¼\n\nspring æ¿ä»£å®ç° - org.springframework.beans.beanwrapper\n\n * å±æ§ï¼propertyï¼\n   * java.beans.propertyeditor\n * åµå¥å±æ§è·¯å¾ï¼nested pathï¼\n\n\n# databinder æ°æ®æ ¡éª\n\ndatabinder ä¸ beanwrapper\n\n * bind æ¹æ³çæ beanpropertybindingresult\n * beanpropertybindingresult å³è beanwrapper\n\n\n# é®é¢\n\næ å javabeans æ¯å¦ä½æä½å±æ§çï¼\n\napi                             è¯´æ\njava.beans.introspector         java beans åç api\njava.beans.beaninfo             java bean åä¿¡æ¯ api\njava.beans.beandescriptor       java bean ä¿¡æ¯æè¿°ç¬¦\njava.beans.propertydescriptor   java bean å±æ§æè¿°ç¬¦\njava.beans.methoddescriptor     java bean æ¹æ³æè¿°ç¬¦\njava.beans.eventsetdescriptor   java bean äºä»¶éåæè¿°ç¬¦\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring EL è¡¨è¾¾å¼",frontmatter:{title:"Spring EL è¡¨è¾¾å¼",date:"2023-01-12T20:26:46.000Z",order:24,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/1f743f/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/24.SpringEL.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/24.SpringEL.md",key:"v-32803cf9",path:"/pages/1f743f/",headers:[{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:20}],headersStr:"åèèµæ",content:"# Spring EL è¡¨è¾¾å¼\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring el è¡¨è¾¾å¼\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ç±»åè½¬æ¢",frontmatter:{title:"Spring ç±»åè½¬æ¢",date:"2022-12-22T19:43:59.000Z",order:23,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/6662dc/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/23.Spring%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/23.Springç±»åè½¬æ¢.md",key:"v-1a5daf91",path:"/pages/6662dc/",headers:[{level:2,title:"Spring ç±»åè½¬æ¢çå®ç°",slug:"spring-ç±»åè½¬æ¢çå®ç°",normalizedTitle:"spring ç±»åè½¬æ¢çå®ç°",charIndex:18},{level:2,title:"ä½¿ç¨åºæ¯",slug:"ä½¿ç¨åºæ¯",normalizedTitle:"ä½¿ç¨åºæ¯",charIndex:127},{level:2,title:"åºäº JavaBeans æ¥å£çç±»åè½¬æ¢",slug:"åºäº-javabeans-æ¥å£çç±»åè½¬æ¢",normalizedTitle:"åºäº javabeans æ¥å£çç±»åè½¬æ¢",charIndex:37},{level:2,title:"Spring å§å»º PropertyEditor æ©å±",slug:"spring-å§å»º-propertyeditor-æ©å±",normalizedTitle:"spring å§å»º propertyeditor æ©å±",charIndex:711},{level:2,title:"èªå®ä¹ PropertyEditor æ©å±",slug:"èªå®ä¹-propertyeditor-æ©å±",normalizedTitle:"èªå®ä¹ propertyeditor æ©å±",charIndex:1326},{level:2,title:"Spring PropertyEditor çè®¾è®¡ç¼ºé·",slug:"spring-propertyeditor-çè®¾è®¡ç¼ºé·",normalizedTitle:"spring propertyeditor çè®¾è®¡ç¼ºé·",charIndex:1792},{level:2,title:"Spring 3 éç¨ç±»åè½¬æ¢æ¥å£",slug:"spring-3-éç¨ç±»åè½¬æ¢æ¥å£",normalizedTitle:"spring 3 éç¨ç±»åè½¬æ¢æ¥å£",charIndex:2044},{level:2,title:"Spring å§å»ºç±»åè½¬æ¢å¨",slug:"spring-å§å»ºç±»åè½¬æ¢å¨",normalizedTitle:"spring å§å»ºç±»åè½¬æ¢å¨",charIndex:2448},{level:2,title:"Converter æ¥å£çå±éæ§",slug:"converter-æ¥å£çå±éæ§",normalizedTitle:"converter æ¥å£çå±éæ§",charIndex:2681},{level:2,title:"GenericConverter æ¥å£",slug:"genericconverter-æ¥å£",normalizedTitle:"genericconverter æ¥å£",charIndex:2930},{level:2,title:"ä¼å GenericConverter æ¥å£",slug:"ä¼å-genericconverter-æ¥å£",normalizedTitle:"ä¼å genericconverter æ¥å£",charIndex:3309},{level:2,title:"æ©å± Spring ç±»åè½¬æ¢å¨",slug:"æ©å±-spring-ç±»åè½¬æ¢å¨",normalizedTitle:"æ©å± spring ç±»åè½¬æ¢å¨",charIndex:3608},{level:2,title:"ç»ä¸ç±»åè½¬æ¢æå¡",slug:"ç»ä¸ç±»åè½¬æ¢æå¡",normalizedTitle:"ç»ä¸ç±»åè½¬æ¢æå¡",charIndex:3938},{level:2,title:"ConversionService ä½ä¸ºä¾èµ",slug:"conversionservice-ä½ä¸ºä¾èµ",normalizedTitle:"conversionservice ä½ä¸ºä¾èµ",charIndex:4480},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:5315},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:5723}],headersStr:"Spring ç±»åè½¬æ¢çå®ç° ä½¿ç¨åºæ¯ åºäº JavaBeans æ¥å£çç±»åè½¬æ¢ Spring å§å»º PropertyEditor æ©å± èªå®ä¹ PropertyEditor æ©å± Spring PropertyEditor çè®¾è®¡ç¼ºé· Spring 3 éç¨ç±»åè½¬æ¢æ¥å£ Spring å§å»ºç±»åè½¬æ¢å¨ Converter æ¥å£çå±éæ§ GenericConverter æ¥å£ ä¼å GenericConverter æ¥å£ æ©å± Spring ç±»åè½¬æ¢å¨ ç»ä¸ç±»åè½¬æ¢æå¡ ConversionService ä½ä¸ºä¾èµ é®é¢ åèèµæ",content:"# Spring ç±»åè½¬æ¢\n\n\n# Spring ç±»åè½¬æ¢çå®ç°\n\n * åºäº JavaBeans æ¥å£çç±»åè½¬æ¢å®ç°\n   * åºäº java.beans.PropertyEditor æ¥å£æ©å±\n * Spring 3.0+ éç¨ç±»åè½¬æ¢å®ç°\n\n\n# ä½¿ç¨åºæ¯\n\nåºæ¯            åºäº JAVABEANS æ¥å£çç±»åè½¬æ¢å®ç°   SPRING 3.0+ éç¨ç±»åè½¬æ¢å®ç°\næ°æ®ç»å®          YES                      YES\nBeanWrapper   YES                      YES\nBean å±æ§ç±»åè½¬æ¢   YES                      YES\nå¤é¨åå±æ§ç±»åè½¬æ¢     NO                       YES\n\n\n# åºäº JavaBeans æ¥å£çç±»åè½¬æ¢\n\næ ¸å¿èè´£\n\n * å° String ç±»åçåå®¹è½¬åä¸ºç®æ ç±»åçå¯¹è±¡\n\næ©å±åç\n\n * Spring æ¡æ¶å°ææ¬åå®¹ä¼ éå° PropertyEditor å®ç°ç setAsText(String) æ¹æ³\n * PropertyEditor#setAsText(String) æ¹æ³å®ç°å° String ç±»åè½¬åä¸ºç®æ ç±»åçå¯¹è±¡\n * å°ç®æ ç±»åçå¯¹è±¡ä¼ å¥ PropertyEditor#setValue(Object) æ¹æ³\n * PropertyEditor#setValue(Object) æ¹æ³å®ç°éè¦ä¸´æ¶å­å¨ä¼ å¥å¯¹è±¡\n * Spring æ¡æ¶å°éè¿ PropertyEditor#getValue() è·åç±»åè½¬æ¢åçå¯¹è±¡\n\n\n# Spring å§å»º PropertyEditor æ©å±\n\nå§å»ºæ©å±ï¼org.springframework.beans.propertyeditors åä¸ï¼\n\nè½¬æ¢åºæ¯                 å®ç°ç±»\nString -> Byte æ°ç»    org.springframework.beans.propertyeditors.ByteArrayPropertyEditor\nString -> Char       org.springframework.beans.propertyeditors.CharacterEditor\nString -> Char æ°ç»    org.springframework.beans.propertyeditors.CharArrayPropertyEditor\nString -> Charset    org.springframework.beans.propertyeditors.CharsetEditor\nString -> Class      org.springframework.beans.propertyeditors.ClassEditor\nString -> Currency   org.springframework.beans.propertyeditors.CurrencyEditor\n                     \n\n\n# èªå®ä¹ PropertyEditor æ©å±\n\næ©å±æ¨¡å¼\n\n * æ©å± java.beans.PropertyEditorSupport ç±»\n\nå®ç° org.springframework.beans.PropertyEditorRegistrar\n\n * å®ç° registerCustomEditors(org.springframework.beans.PropertyEditorRegistry) æ¹æ³\n * å° PropertyEditorRegistrar å®ç°æ³¨åä¸º Spring Bean\n\nå org.springframework.beans.PropertyEditorRegistry æ³¨åèªå®ä¹ PropertyEditor å®ç°\n\n * éç¨ç±»åå®ç° registerCustomEditor(Class<?>, PropertyEditor)\n * Java Bean å±æ§ç±»åå®ç°ï¼registerCustomEditor(Class<?>, String, PropertyEditor)\n\n\n# Spring PropertyEditor çè®¾è®¡ç¼ºé·\n\nè¿åèè´£åä¸åå\n\n * java.beans.PropertyEditor æ¥å£èè´£å¤ªå¤ï¼é¤äºç±»åè½¬æ¢ï¼è¿åæ¬ Java Beans äºä»¶å Java GUI äº¤ äº\n\njava.beans.PropertyEditor å®ç°ç±»åå±é\n\n * æ¥æºç±»ååªè½ä¸º java.lang.String ç±»å\n\njava.beans.PropertyEditor å®ç°ç¼ºå°ç±»åå®å¨\n\n * é¤äºå®ç°ç±»å½åå¯ä»¥è¡¨è¾¾è¯­ä¹ï¼å®ç°ç±»æ æ³æç¥ç®æ è½¬æ¢ç±»å\n\n\n# Spring 3 éç¨ç±»åè½¬æ¢æ¥å£\n\nç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.Converter<S,T>\n\n * æ³ååæ° Sï¼æ¥æºç±»åï¼åæ° Tï¼ç®æ ç±»å\n * æ ¸å¿æ¹æ³ï¼T convert(S)\n\néç¨ç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.GenericConverter\n\n * æ ¸å¿æ¹æ³ï¼convert(Object,TypeDescriptor,TypeDescriptor)\n * éå¯¹ç±»åï¼org.springframework.core.convert.converter.GenericConverter.ConvertiblePair\n * ç±»åæè¿°ï¼org.springframework.core.convert.TypeDescriptor\n\n\n# Spring å§å»ºç±»åè½¬æ¢å¨\n\nå§å»ºæ©å±\n\nè½¬æ¢åºæ¯             å®ç°ç±»æå¨ååï¼PACKAGEï¼\næ¥æ/æ¶é´ç¸å³          org.springframework.format.datetime\nJava 8 æ¥æ/æ¶é´ç¸å³   org.springframework.format.datetime.standard\néç¨å®ç°             org.springframework.core.convert.support\n\n\n# Converter æ¥å£çå±éæ§\n\nå±éä¸ï¼ç¼ºå° Source Type å Target Type åç½®å¤æ­\n\n * åºå¯¹ï¼å¢å  org.springframework.core.convert.converter.ConditionalConverter å®ç°\n\nå±éäºï¼ä»è½è½¬æ¢åä¸ç Source Type å Target Type\n\n * åºå¯¹ï¼ä½¿ç¨ org.springframework.core.convert.converter.GenericConverter ä»£æ¿\n\n\n# GenericConverter æ¥å£\n\norg.springframework.core.convert.converter.GenericConverter\n\næ ¸å¿è¦ç´    è¯´æ\nä½¿ç¨åºæ¯   ç¨äºâå¤åâç±»åè½¬æ¢åºæ¯ï¼æ¯å¦ CollectionãMapãæ°ç»ç­\nè½¬æ¢èå´   Set<ConvertiblePair> getConvertibleTypes()\néå¯¹ç±»å   org.springframework.core.convert.converter.GenericConverter.ConvertiblePair\nè½¬æ¢æ¹æ³   convert(Object,TypeDescriptor,TypeDescriptor)\nç±»åæè¿°   org.springframework.core.convert.TypeDescriptor\n\n\n# ä¼å GenericConverter æ¥å£\n\nGenericConverter å±éæ§\n\n * ç¼ºå° Source Type å Target Type åç½®å¤æ­\n * åä¸ç±»åè½¬æ¢å®ç°å¤æ\n\nGenericConverter ä¼åæ¥å£ - ConditionalGenericConverter\n\n * å¤åç±»åè½¬æ¢ï¼org.springframework.core.convert.converter.GenericConverter\n * ç±»åæ¡ä»¶å¤æ­ï¼org.springframework.core.convert.converter.ConditionalConverter\n\n\n# æ©å± Spring ç±»åè½¬æ¢å¨\n\nå®ç°è½¬æ¢å¨æ¥å£\n\n * org.springframework.core.convert.converter.Converter\n * org.springframework.core.convert.converter.ConverterFactory\n * org.springframework.core.convert.converter.GenericConverter\n\næ³¨åè½¬æ¢å¨å®ç°\n\n * éè¿ ConversionServiceFactoryBean Spring Bean\n * éè¿ org.springframework.core.convert.ConversionService API\n\n\n# ç»ä¸ç±»åè½¬æ¢æå¡\n\norg.springframework.core.convert.ConversionService\n\nå®ç°ç±»å                                 è¯´æ\nGenericConversionService             éç¨ ConversionService æ¨¡æ¿å®ç°ï¼ä¸åç½®è½¬åå¨å®ç°\nDefaultConversionService             åºç¡ ConversionService å®ç°ï¼åç½®å¸¸ç¨è½¬åå¨å®ç°\nFormattingConversionService          éç¨ Formatter + GenericConversionService å®ç°ï¼ä¸åç½®è½¬åå¨å Formatter\n                                     å®ç°\nDefaultFormattingConversionService   DefaultConversionService + æ ¼å¼å å®ç°ï¼å¦ï¼JSR-354 Money &\n                                     Currency, JSR-310 Date-Timeï¼\n\n\n# ConversionService ä½ä¸ºä¾èµ\n\nç±»åè½¬æ¢å¨åºå±æ¥å£ - org.springframework.beans.TypeConverter\n\n * èµ·å§çæ¬ï¼Spring 2.0\n * æ ¸å¿æ¹æ³ - convertIfNecessary éè½½æ¹æ³\n * æ½è±¡å®ç° - org.springframework.beans.TypeConverterSupport\n * ç®åå®ç° - org.springframework.beans.SimpleTypeConverter\n\nç±»åè½¬æ¢å¨åºå±æ½è±¡å®ç° - org.springframework.beans.TypeConverterSupport\n\n * å®ç°æ¥å£ - org.springframework.beans.TypeConverter\n * æ©å±å®ç° - org.springframework.beans.PropertyEditorRegistrySupport\n * å§æ´¾å®ç° - org.springframework.beans.TypeConverterDelegate\n\nç±»åè½¬æ¢å¨åºå±å§æ´¾å®ç° - org.springframework.beans.TypeConverterDelegate\n\n * æé æ¥æº - org.springframework.beans.AbstractNestablePropertyAccessor å®ç°\n   * org.springframework.beans.BeanWrapperImpl\n * ä¾èµ - java.beans.PropertyEditor å®ç°\n   * é»è®¤å§å»ºå®ç° - PropertyEditorRegistrySupport#registerDefaultEditors\n * å¯éä¾èµ - org.springframework.core.convert.ConversionService å®ç°\n\n\n# é®é¢\n\nSpring ç±»åè½¬æ¢å®ç°æåªäºï¼\n\n * åºäº JavaBeans PropertyEditor æ¥å£å®ç°\n * Spring 3.0+ éç¨ç±»åè½¬æ¢å®ç°\n\nSpring ç±»åè½¬æ¢å¨æ¥å£æåªäºï¼\n\n * ç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.Converter\n * éç¨ç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.GenericConverter\n * ç±»åæ¡ä»¶æ¥å£ - org.springframework.core.convert.converter.ConditionalConverter\n * ç»¼åç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.ConditionalGenericConverter\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring ç±»åè½¬æ¢\n\n\n# spring ç±»åè½¬æ¢çå®ç°\n\n * åºäº javabeans æ¥å£çç±»åè½¬æ¢å®ç°\n   * åºäº java.beans.propertyeditor æ¥å£æ©å±\n * spring 3.0+ éç¨ç±»åè½¬æ¢å®ç°\n\n\n# ä½¿ç¨åºæ¯\n\nåºæ¯            åºäº javabeans æ¥å£çç±»åè½¬æ¢å®ç°   spring 3.0+ éç¨ç±»åè½¬æ¢å®ç°\næ°æ®ç»å®          yes                      yes\nbeanwrapper   yes                      yes\nbean å±æ§ç±»åè½¬æ¢   yes                      yes\nå¤é¨åå±æ§ç±»åè½¬æ¢     no                       yes\n\n\n# åºäº javabeans æ¥å£çç±»åè½¬æ¢\n\næ ¸å¿èè´£\n\n * å° string ç±»åçåå®¹è½¬åä¸ºç®æ ç±»åçå¯¹è±¡\n\næ©å±åç\n\n * spring æ¡æ¶å°ææ¬åå®¹ä¼ éå° propertyeditor å®ç°ç setastext(string) æ¹æ³\n * propertyeditor#setastext(string) æ¹æ³å®ç°å° string ç±»åè½¬åä¸ºç®æ ç±»åçå¯¹è±¡\n * å°ç®æ ç±»åçå¯¹è±¡ä¼ å¥ propertyeditor#setvalue(object) æ¹æ³\n * propertyeditor#setvalue(object) æ¹æ³å®ç°éè¦ä¸´æ¶å­å¨ä¼ å¥å¯¹è±¡\n * spring æ¡æ¶å°éè¿ propertyeditor#getvalue() è·åç±»åè½¬æ¢åçå¯¹è±¡\n\n\n# spring å§å»º propertyeditor æ©å±\n\nå§å»ºæ©å±ï¼org.springframework.beans.propertyeditors åä¸ï¼\n\nè½¬æ¢åºæ¯                 å®ç°ç±»\nstring -> byte æ°ç»    org.springframework.beans.propertyeditors.bytearraypropertyeditor\nstring -> char       org.springframework.beans.propertyeditors.charactereditor\nstring -> char æ°ç»    org.springframework.beans.propertyeditors.chararraypropertyeditor\nstring -> charset    org.springframework.beans.propertyeditors.charseteditor\nstring -> class      org.springframework.beans.propertyeditors.classeditor\nstring -> currency   org.springframework.beans.propertyeditors.currencyeditor\n                     \n\n\n# èªå®ä¹ propertyeditor æ©å±\n\næ©å±æ¨¡å¼\n\n * æ©å± java.beans.propertyeditorsupport ç±»\n\nå®ç° org.springframework.beans.propertyeditorregistrar\n\n * å®ç° registercustomeditors(org.springframework.beans.propertyeditorregistry) æ¹æ³\n * å° propertyeditorregistrar å®ç°æ³¨åä¸º spring bean\n\nå org.springframework.beans.propertyeditorregistry æ³¨åèªå®ä¹ propertyeditor å®ç°\n\n * éç¨ç±»åå®ç° registercustomeditor(class<?>, propertyeditor)\n * java bean å±æ§ç±»åå®ç°ï¼registercustomeditor(class<?>, string, propertyeditor)\n\n\n# spring propertyeditor çè®¾è®¡ç¼ºé·\n\nè¿åèè´£åä¸åå\n\n * java.beans.propertyeditor æ¥å£èè´£å¤ªå¤ï¼é¤äºç±»åè½¬æ¢ï¼è¿åæ¬ java beans äºä»¶å java gui äº¤ äº\n\njava.beans.propertyeditor å®ç°ç±»åå±é\n\n * æ¥æºç±»ååªè½ä¸º java.lang.string ç±»å\n\njava.beans.propertyeditor å®ç°ç¼ºå°ç±»åå®å¨\n\n * é¤äºå®ç°ç±»å½åå¯ä»¥è¡¨è¾¾è¯­ä¹ï¼å®ç°ç±»æ æ³æç¥ç®æ è½¬æ¢ç±»å\n\n\n# spring 3 éç¨ç±»åè½¬æ¢æ¥å£\n\nç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.converter<s,t>\n\n * æ³ååæ° sï¼æ¥æºç±»åï¼åæ° tï¼ç®æ ç±»å\n * æ ¸å¿æ¹æ³ï¼t convert(s)\n\néç¨ç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.genericconverter\n\n * æ ¸å¿æ¹æ³ï¼convert(object,typedescriptor,typedescriptor)\n * éå¯¹ç±»åï¼org.springframework.core.convert.converter.genericconverter.convertiblepair\n * ç±»åæè¿°ï¼org.springframework.core.convert.typedescriptor\n\n\n# spring å§å»ºç±»åè½¬æ¢å¨\n\nå§å»ºæ©å±\n\nè½¬æ¢åºæ¯             å®ç°ç±»æå¨ååï¼packageï¼\næ¥æ/æ¶é´ç¸å³          org.springframework.format.datetime\njava 8 æ¥æ/æ¶é´ç¸å³   org.springframework.format.datetime.standard\néç¨å®ç°             org.springframework.core.convert.support\n\n\n# converter æ¥å£çå±éæ§\n\nå±éä¸ï¼ç¼ºå° source type å target type åç½®å¤æ­\n\n * åºå¯¹ï¼å¢å  org.springframework.core.convert.converter.conditionalconverter å®ç°\n\nå±éäºï¼ä»è½è½¬æ¢åä¸ç source type å target type\n\n * åºå¯¹ï¼ä½¿ç¨ org.springframework.core.convert.converter.genericconverter ä»£æ¿\n\n\n# genericconverter æ¥å£\n\norg.springframework.core.convert.converter.genericconverter\n\næ ¸å¿è¦ç´    è¯´æ\nä½¿ç¨åºæ¯   ç¨äºâå¤åâç±»åè½¬æ¢åºæ¯ï¼æ¯å¦ collectionãmapãæ°ç»ç­\nè½¬æ¢èå´   set<convertiblepair> getconvertibletypes()\néå¯¹ç±»å   org.springframework.core.convert.converter.genericconverter.convertiblepair\nè½¬æ¢æ¹æ³   convert(object,typedescriptor,typedescriptor)\nç±»åæè¿°   org.springframework.core.convert.typedescriptor\n\n\n# ä¼å genericconverter æ¥å£\n\ngenericconverter å±éæ§\n\n * ç¼ºå° source type å target type åç½®å¤æ­\n * åä¸ç±»åè½¬æ¢å®ç°å¤æ\n\ngenericconverter ä¼åæ¥å£ - conditionalgenericconverter\n\n * å¤åç±»åè½¬æ¢ï¼org.springframework.core.convert.converter.genericconverter\n * ç±»åæ¡ä»¶å¤æ­ï¼org.springframework.core.convert.converter.conditionalconverter\n\n\n# æ©å± spring ç±»åè½¬æ¢å¨\n\nå®ç°è½¬æ¢å¨æ¥å£\n\n * org.springframework.core.convert.converter.converter\n * org.springframework.core.convert.converter.converterfactory\n * org.springframework.core.convert.converter.genericconverter\n\næ³¨åè½¬æ¢å¨å®ç°\n\n * éè¿ conversionservicefactorybean spring bean\n * éè¿ org.springframework.core.convert.conversionservice api\n\n\n# ç»ä¸ç±»åè½¬æ¢æå¡\n\norg.springframework.core.convert.conversionservice\n\nå®ç°ç±»å                                 è¯´æ\ngenericconversionservice             éç¨ conversionservice æ¨¡æ¿å®ç°ï¼ä¸åç½®è½¬åå¨å®ç°\ndefaultconversionservice             åºç¡ conversionservice å®ç°ï¼åç½®å¸¸ç¨è½¬åå¨å®ç°\nformattingconversionservice          éç¨ formatter + genericconversionservice å®ç°ï¼ä¸åç½®è½¬åå¨å formatter\n                                     å®ç°\ndefaultformattingconversionservice   defaultconversionservice + æ ¼å¼å å®ç°ï¼å¦ï¼jsr-354 money &\n                                     currency, jsr-310 date-timeï¼\n\n\n# conversionservice ä½ä¸ºä¾èµ\n\nç±»åè½¬æ¢å¨åºå±æ¥å£ - org.springframework.beans.typeconverter\n\n * èµ·å§çæ¬ï¼spring 2.0\n * æ ¸å¿æ¹æ³ - convertifnecessary éè½½æ¹æ³\n * æ½è±¡å®ç° - org.springframework.beans.typeconvertersupport\n * ç®åå®ç° - org.springframework.beans.simpletypeconverter\n\nç±»åè½¬æ¢å¨åºå±æ½è±¡å®ç° - org.springframework.beans.typeconvertersupport\n\n * å®ç°æ¥å£ - org.springframework.beans.typeconverter\n * æ©å±å®ç° - org.springframework.beans.propertyeditorregistrysupport\n * å§æ´¾å®ç° - org.springframework.beans.typeconverterdelegate\n\nç±»åè½¬æ¢å¨åºå±å§æ´¾å®ç° - org.springframework.beans.typeconverterdelegate\n\n * æé æ¥æº - org.springframework.beans.abstractnestablepropertyaccessor å®ç°\n   * org.springframework.beans.beanwrapperimpl\n * ä¾èµ - java.beans.propertyeditor å®ç°\n   * é»è®¤å§å»ºå®ç° - propertyeditorregistrysupport#registerdefaulteditors\n * å¯éä¾èµ - org.springframework.core.convert.conversionservice å®ç°\n\n\n# é®é¢\n\nspring ç±»åè½¬æ¢å®ç°æåªäºï¼\n\n * åºäº javabeans propertyeditor æ¥å£å®ç°\n * spring 3.0+ éç¨ç±»åè½¬æ¢å®ç°\n\nspring ç±»åè½¬æ¢å¨æ¥å£æåªäºï¼\n\n * ç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.converter\n * éç¨ç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.genericconverter\n * ç±»åæ¡ä»¶æ¥å£ - org.springframework.core.convert.converter.conditionalconverter\n * ç»¼åç±»åè½¬æ¢æ¥å£ - org.springframework.core.convert.converter.conditionalgenericconverter\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring äºä»¶",frontmatter:{title:"Spring äºä»¶",date:"2022-12-22T20:31:02.000Z",order:25,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/cca414/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/25.Spring%E4%BA%8B%E4%BB%B6.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/25.Springäºä»¶.md",key:"v-26a96ffb",path:"/pages/cca414/",headers:[{level:2,title:"Java äºä»¶/çå¬å¨ç¼ç¨æ¨¡å",slug:"java-äºä»¶-çå¬å¨ç¼ç¨æ¨¡å",normalizedTitle:"java äºä»¶/çå¬å¨ç¼ç¨æ¨¡å",charIndex:16},{level:2,title:"é¢åæ¥å£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼",slug:"é¢åæ¥å£çäºä»¶-çå¬å¨è®¾è®¡æ¨¡å¼",normalizedTitle:"é¢åæ¥å£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼",charIndex:195},{level:2,title:"é¢åæ³¨è§£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼",slug:"é¢åæ³¨è§£çäºä»¶-çå¬å¨è®¾è®¡æ¨¡å¼",normalizedTitle:"é¢åæ³¨è§£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼",charIndex:659},{level:2,title:"Spring æ åäºä»¶ - ApplicationEvent",slug:"spring-æ åäºä»¶-applicationevent",normalizedTitle:"spring æ åäºä»¶ - applicationevent",charIndex:1030},{level:2,title:"åºäºæ¥å£ç Spring äºä»¶çå¬å¨",slug:"åºäºæ¥å£ç-spring-äºä»¶çå¬å¨",normalizedTitle:"åºäºæ¥å£ç spring äºä»¶çå¬å¨",charIndex:1458},{level:2,title:"åºäºæ³¨è§£ç Spring äºä»¶çå¬å¨",slug:"åºäºæ³¨è§£ç-spring-äºä»¶çå¬å¨",normalizedTitle:"åºäºæ³¨è§£ç spring äºä»¶çå¬å¨",charIndex:1696},{level:2,title:"æ³¨å Spring ApplicationListener",slug:"æ³¨å-spring-applicationlistener",normalizedTitle:"æ³¨å spring applicationlistener",charIndex:1921},{level:2,title:"Spring äºä»¶åå¸å¨",slug:"spring-äºä»¶åå¸å¨",normalizedTitle:"spring äºä»¶åå¸å¨",charIndex:2049},{level:2,title:"Spring å±æ¬¡æ§ä¸ä¸æäºä»¶ä¼ æ­",slug:"spring-å±æ¬¡æ§ä¸ä¸æäºä»¶ä¼ æ­",normalizedTitle:"spring å±æ¬¡æ§ä¸ä¸æäºä»¶ä¼ æ­",charIndex:2273},{level:2,title:"Spring åå»ºäºä»¶",slug:"spring-åå»ºäºä»¶",normalizedTitle:"spring åå»ºäºä»¶",charIndex:2536},{level:2,title:"Spring 4.2 Payload äºä»¶",slug:"spring-4-2-payload-äºä»¶",normalizedTitle:"spring 4.2 payload äºä»¶",charIndex:2748},{level:2,title:"èªå®ä¹ Spring äºä»¶",slug:"èªå®ä¹-spring-äºä»¶",normalizedTitle:"èªå®ä¹ spring äºä»¶",charIndex:2944},{level:2,title:"ä¾èµæ³¨å¥ ApplicationEventPublisher",slug:"ä¾èµæ³¨å¥-applicationeventpublisher",normalizedTitle:"ä¾èµæ³¨å¥ applicationeventpublisher",charIndex:3122},{level:2,title:"ä¾èµæ¥æ¾ ApplicationEventMulticaster",slug:"ä¾èµæ¥æ¾-applicationeventmulticaster",normalizedTitle:"ä¾èµæ¥æ¾ applicationeventmulticaster",charIndex:3243},{level:2,title:"ApplicationEventPublisher åºå±å®ç°",slug:"applicationeventpublisher-åºå±å®ç°",normalizedTitle:"applicationeventpublisher åºå±å®ç°",charIndex:3401},{level:2,title:"åæ­¥åå¼æ­¥ Spring äºä»¶å¹¿æ­",slug:"åæ­¥åå¼æ­¥-spring-äºä»¶å¹¿æ­",normalizedTitle:"åæ­¥åå¼æ­¥ spring äºä»¶å¹¿æ­",charIndex:3657},{level:2,title:"Spring 4.1 äºä»¶å¼å¸¸å¤ç",slug:"spring-4-1-äºä»¶å¼å¸¸å¤ç",normalizedTitle:"spring 4.1 äºä»¶å¼å¸¸å¤ç",charIndex:4063},{level:2,title:"Spring äºä»¶/çå¬å¨å®ç°åç",slug:"spring-äºä»¶-çå¬å¨å®ç°åç",normalizedTitle:"spring äºä»¶/çå¬å¨å®ç°åç",charIndex:4396},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:4761},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:6092}],headersStr:"Java äºä»¶/çå¬å¨ç¼ç¨æ¨¡å é¢åæ¥å£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼ é¢åæ³¨è§£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼ Spring æ åäºä»¶ - ApplicationEvent åºäºæ¥å£ç Spring äºä»¶çå¬å¨ åºäºæ³¨è§£ç Spring äºä»¶çå¬å¨ æ³¨å Spring ApplicationListener Spring äºä»¶åå¸å¨ Spring å±æ¬¡æ§ä¸ä¸æäºä»¶ä¼ æ­ Spring åå»ºäºä»¶ Spring 4.2 Payload äºä»¶ èªå®ä¹ Spring äºä»¶ ä¾èµæ³¨å¥ ApplicationEventPublisher ä¾èµæ¥æ¾ ApplicationEventMulticaster ApplicationEventPublisher åºå±å®ç° åæ­¥åå¼æ­¥ Spring äºä»¶å¹¿æ­ Spring 4.1 äºä»¶å¼å¸¸å¤ç Spring äºä»¶/çå¬å¨å®ç°åç é®é¢ åèèµæ",content:'# Spring äºä»¶\n\n\n# Java äºä»¶/çå¬å¨ç¼ç¨æ¨¡å\n\nè®¾è®¡æ¨¡å¼ - è§å¯èæ¨¡å¼æ©å±\n\n * å¯è§èå¯¹è±¡ï¼æ¶æ¯åéèï¼ - java.util.Observable\n * è§å¯è - java.util.Observer\n\næ ååæ¥å£\n\n * äºä»¶å¯¹è±¡ - java.util.EventObject\n * äºä»¶çå¬å¨ - java.util.EventListener\n\n\n# é¢åæ¥å£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼\n\näºä»¶/çå¬å¨åºæ¯ä¸¾ä¾\n\nJAVA ææ¯è§è         äºä»¶æ¥å£                                    çå¬å¨æ¥å£\nJavaBeans         java.beans.PropertyChangeEvent          java.beans.PropertyChangeListener\nJava AWT          java.awt.event.MouseEvent               java.awt.event.MouseListener\nJava Swing        javax.swing.event.MenuEvent             javax.swing.event.MenuListener\nJava Preference   java.util.prefs.PreferenceChangeEvent   java.util.prefs.PreferenceChangeListener\n\n\n# é¢åæ³¨è§£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼\n\näºä»¶/çå¬å¨æ³¨è§£åºæ¯ä¸¾ä¾\n\nJAVA ææ¯è§è      äºä»¶æ³¨è§£                             çå¬å¨æ³¨è§£\nServlet 3.0+                                    @javax.servlet.annotation.WebListener\nJPA 1.0+       @javax.persistence.PostPersist   \nJava Common    @PostConstruct                   \nEJB 3.0+       @javax.ejb.PrePassivate          \nJSF 2.0+       @javax.faces.event.ListenerFor   \n\n\n# Spring æ åäºä»¶ - ApplicationEvent\n\nJava æ åäºä»¶ java.util.EventObject æ©å±\n\n * æ©å±ç¹æ§ï¼äºä»¶åçäºä»¶æ³\n * Spring åºç¨ä¸ä¸æ ApplicationEvent æ©å± - ApplicationContextEvent\n * Spring åºç¨ä¸ä¸æï¼ApplicationContextï¼ä½ä¸ºäºä»¶æº\n\nå·ä½å®ç°ï¼\n\n * org.springframework.context.event.ContextClosedEvent\n * org.springframework.context.event.ContextRefreshedEvent\n * org.springframework.context.event.ContextStartedEvent\n * org.springframework.context.event.ContextStoppedEvent\n\n\n# åºäºæ¥å£ç Spring äºä»¶çå¬å¨\n\nJava æ åäºä»¶çå¬å¨ java.util.EventListener æ©å±\n\n * æ©å±æ¥å£ - org.springframework.context.ApplicationListener\n * è®¾è®¡ç¹ç¹ï¼åä¸ç±»åäºä»¶å¤ç\n * å¤çæ¹æ³ï¼onApplicationEvent(ApplicationEvent)\n * äºä»¶ç±»åï¼org.springframework.context.ApplicationEvent\n\n\n# åºäºæ³¨è§£ç Spring äºä»¶çå¬å¨\n\nSpring æ³¨è§£ - @org.springframework.context.event.EventListener\n\nç¹æ§           è¯´æ\nè®¾è®¡ç¹ç¹         æ¯æå¤ ApplicationEvent ç±»åï¼æ éæ¥å£çº¦æ\næ³¨è§£ç®æ          æ¹æ³\næ¯å¦æ¯æå¼æ­¥æ§è¡     æ¯æ\næ¯å¦æ¯ææ³åç±»åäºä»¶   æ¯æ\næ¯ææ¯æé¡ºåºæ§å¶     æ¯æï¼éå @Order æ³¨è§£æ§å¶\n\n\n# æ³¨å Spring ApplicationListener\n\n * æ¹æ³ä¸ï¼ApplicationListener ä½ä¸º Spring Bean æ³¨å\n * æ¹æ³äºï¼éè¿ ConfigurableApplicationContext API æ³¨å\n\n\n# Spring äºä»¶åå¸å¨\n\n * æ¹æ³ä¸ï¼éè¿ ApplicationEventPublisher åå¸ Spring äºä»¶\n   * è·å ApplicationEventPublisher\n     * ä¾èµæ³¨å¥\n * æ¹æ³äºï¼éè¿ ApplicationEventMulticaster åå¸ Spring äºä»¶\n   * è·å ApplicationEventMulticaster\n     * ä¾èµæ³¨å¥\n     * ä¾èµæ¥æ¾\n\n\n# Spring å±æ¬¡æ§ä¸ä¸æäºä»¶ä¼ æ­\n\n * åçè¯´æ\n * å½ Spring åºç¨åºç°å¤å±æ¬¡ Spring åºç¨ä¸ä¸æï¼ApplicationContextï¼æ¶ï¼å¦ Spring WebMVCãSpring Boot æ Spring Cloud åºæ¯ä¸ï¼ç±å­ ApplicationContext åèµ· Spring äºä»¶å¯è½ä¼ä¼ éå°å¶ Parent ApplicationContextï¼ç´å° Rootï¼çè¿ç¨\n * å¦ä½é¿å\n * å®ä½ Spring äºä»¶æºï¼ApplicationContextï¼è¿è¡è¿æ»¤å¤ç\n\n\n# Spring åå»ºäºä»¶\n\nApplicationContextEvent æ´¾çäºä»¶\n\n * ContextRefreshedEvent ï¼Spring åºç¨ä¸ä¸æå°±ç»ªäºä»¶\n * ContextStartedEvent ï¼Spring åºç¨ä¸ä¸æå¯å¨äºä»¶\n * ContextStoppedEvent ï¼Spring åºç¨ä¸ä¸æåæ­¢äºä»¶\n * ContextClosedEvent ï¼Spring åºç¨ä¸ä¸æå³é­äºä»¶\n\n\n# Spring 4.2 Payload äºä»¶\n\nSpring Payload äºä»¶ - org.springframework.context.PayloadApplicationEvent\n\n * ä½¿ç¨åºæ¯ï¼ç®å Spring äºä»¶åéï¼å³æ³¨äºä»¶æºä¸»ä½\n * åéæ¹æ³ï¼ApplicationEventPublisher#publishEvent(java.lang.Object)\n\n\n# èªå®ä¹ Spring äºä»¶\n\n * æ©å± org.springframework.context.ApplicationEvent\n * å®ç° org.springframework.context.ApplicationListener\n * æ³¨å org.springframework.context.ApplicationListener\n\n\n# ä¾èµæ³¨å¥ ApplicationEventPublisher\n\n * éè¿ ApplicationEventPublisherAware åè°æ¥å£\n * éè¿ @Autowired ApplicationEventPublisher\n\n\n# ä¾èµæ¥æ¾ ApplicationEventMulticaster\n\næ¥æ¾æ¡ä»¶\n\n * Bean åç§°ï¼"applicationEventMulticaster"\n * Bean ç±»åï¼org.springframework.context.event.ApplicationEventMulticaster\n\n\n# ApplicationEventPublisher åºå±å®ç°\n\n * æ¥å£ï¼org.springframework.context.event.ApplicationEventMulticaster\n * æ½è±¡ç±»ï¼org.springframework.context.event.AbstractApplicationEventMulticaster\n * å®ç°ç±»ï¼org.springframework.context.event.SimpleApplicationEventMulticaster\n\n\n# åæ­¥åå¼æ­¥ Spring äºä»¶å¹¿æ­\n\nåºäºå®ç°ç±» - org.springframework.context.event.SimpleApplicationEventMulticaster\n\n * æ¨¡å¼åæ¢ï¼setTaskExecutor(java.util.concurrent.Executor) æ¹æ³\n   * é»è®¤æ¨¡å¼ï¼åæ­¥\n   * å¼æ­¥æ¨¡å¼ï¼å¦ java.util.concurrent.ThreadPoolExecutor\n * è®¾è®¡ç¼ºé·ï¼éåºäºæ¥å£å¥çº¦ç¼ç¨\n\nåºäºæ³¨è§£ - @org.springframework.context.event.EventListener\n\n * æ¨¡å¼åæ¢\n   * é»è®¤æ¨¡å¼ï¼åæ­¥\n   * å¼æ­¥æ¨¡å¼ï¼æ æ³¨ @org.springframework.scheduling.annotation.Async\n * å®ç°éå¶ï¼æ æ³ç´æ¥å®ç°åæ­¥/å¼æ­¥å¨æåæ¢\n\n\n# Spring 4.1 äºä»¶å¼å¸¸å¤ç\n\nSpring 3.0 éè¯¯å¤çæ¥å£ - org.springframework.util.ErrorHandler\n\nä½¿ç¨åºæ¯\n\n * Spring äºä»¶ï¼Eventsï¼\n   * SimpleApplicationEventMulticaster Spring 4.1 å¼å§æ¯æ\n * Spring æ¬å°è°åº¦ï¼Schedulingï¼\n   * org.springframework.scheduling.concurrent.ConcurrentTaskScheduler\n   * org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler\n\n\n# Spring äºä»¶/çå¬å¨å®ç°åç\n\næ ¸å¿ç±» - org.springframework.context.event.SimpleApplicationEventMulticaster\n\n * è®¾è®¡æ¨¡å¼ï¼è§å¯èæ¨¡å¼æ©å±\n   * è¢«è§å¯è - org.springframework.context.ApplicationListener\n     * API æ·»å \n     * ä¾èµæ¥æ¾\n   * éç¥å¯¹è±¡ - org.springframework.context.ApplicationEvent\n * æ§è¡æ¨¡å¼ï¼åæ­¥/å¼æ­¥\n * å¼å¸¸å¤çï¼org.springframework.util.ErrorHandler\n * æ³åå¤çï¼org.springframework.core.ResolvableType\n\n\n# é®é¢\n\nSpring Boot äºä»¶\n\näºä»¶ç±»å                                  åçæ¶æº\nApplicationStartingEvent              å½ Spring Boot åºç¨å·²å¯å¨æ¶\nApplicationStartedEvent               å½ Spring Boot åºç¨å·²å¯å¨æ¶\nApplicationEnvironmentPreparedEvent   å½ Spring Boot Environment å®ä¾å·²åå¤æ¶\nApplicationPreparedEvent              å½ Spring Boot åºç¨é¢å¤æ¶\nApplicationReadyEvent                 å½ Spring Boot åºç¨å®å¨å¯ç¨æ¶\nApplicationFailedEvent                å½ Spring Boot åºç¨å¯å¨å¤±è´¥æ¶\n\nSpring Cloud äºä»¶\n\näºä»¶ç±»å                         åçæ¶æº\nEnvironmentChangeEvent       å½ Environment ç¤ºä¾éç½®å±æ§åçååæ¶\nHeartbeatEvent               å½ DiscoveryClient å®¢æ·ç«¯åéå¿è·³æ¶\nInstancePreRegisteredEvent   å½æå¡å®ä¾æ³¨åå\nInstanceRegisteredEvent      å½æå¡å®ä¾æ³¨åå\nRefreshEvent                 å½ RefreshEndpoint è¢«è°ç¨æ¶\nRefreshScopeRefreshedEvent   å½ Refresh Scope Bean å·æ°å\n\nSpring äºä»¶æ ¸å¿æ¥å£/ç»ä»¶ï¼\n\n * Spring äºä»¶ - org.springframework.context.ApplicationEvent\n * Spring äºä»¶çå¬å¨ - org.springframework.context.ApplicationListener\n * Spring äºä»¶åå¸å¨ - org.springframework.context.ApplicationEventPublisher\n * Spring äºä»¶å¹¿æ­å¨ - org.springframework.context.event.ApplicationEventMulticaster\n\nSpring åæ­¥åå¼æ­¥äºä»¶å¤ççä½¿ç¨åºæ¯ï¼\n\n * Spring åæ­¥äºä»¶ - ç»å¤§å¤æ° Spring ä½¿ç¨åºæ¯ï¼å¦ ContextRefreshedEvent\n * Spring å¼æ­¥äºä»¶ - ä¸»è¦ @EventListener ä¸ @Async éåï¼å®ç°å¼æ­¥å¤çï¼ä¸é»å¡ä¸»çº¿ç¨ï¼æ¯å¦é¿æ¶é´çæ°æ®è®¡ç®ä»»å¡ç­ãä¸è¦è½»æè°æ´ SimpleApplicationEventMulticaster ä¸­å³èç taskExecutor å¯¹è±¡ï¼é¤éä½¿ç¨èéå¸¸äºè§£ Spring äºä»¶æºå¶ï¼å¦åå®¹æåºç°å¼å¸¸è¡ä¸ºã\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã',normalizedContent:'# spring äºä»¶\n\n\n# java äºä»¶/çå¬å¨ç¼ç¨æ¨¡å\n\nè®¾è®¡æ¨¡å¼ - è§å¯èæ¨¡å¼æ©å±\n\n * å¯è§èå¯¹è±¡ï¼æ¶æ¯åéèï¼ - java.util.observable\n * è§å¯è - java.util.observer\n\næ ååæ¥å£\n\n * äºä»¶å¯¹è±¡ - java.util.eventobject\n * äºä»¶çå¬å¨ - java.util.eventlistener\n\n\n# é¢åæ¥å£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼\n\näºä»¶/çå¬å¨åºæ¯ä¸¾ä¾\n\njava ææ¯è§è         äºä»¶æ¥å£                                    çå¬å¨æ¥å£\njavabeans         java.beans.propertychangeevent          java.beans.propertychangelistener\njava awt          java.awt.event.mouseevent               java.awt.event.mouselistener\njava swing        javax.swing.event.menuevent             javax.swing.event.menulistener\njava preference   java.util.prefs.preferencechangeevent   java.util.prefs.preferencechangelistener\n\n\n# é¢åæ³¨è§£çäºä»¶/çå¬å¨è®¾è®¡æ¨¡å¼\n\näºä»¶/çå¬å¨æ³¨è§£åºæ¯ä¸¾ä¾\n\njava ææ¯è§è      äºä»¶æ³¨è§£                             çå¬å¨æ³¨è§£\nservlet 3.0+                                    @javax.servlet.annotation.weblistener\njpa 1.0+       @javax.persistence.postpersist   \njava common    @postconstruct                   \nejb 3.0+       @javax.ejb.prepassivate          \njsf 2.0+       @javax.faces.event.listenerfor   \n\n\n# spring æ åäºä»¶ - applicationevent\n\njava æ åäºä»¶ java.util.eventobject æ©å±\n\n * æ©å±ç¹æ§ï¼äºä»¶åçäºä»¶æ³\n * spring åºç¨ä¸ä¸æ applicationevent æ©å± - applicationcontextevent\n * spring åºç¨ä¸ä¸æï¼applicationcontextï¼ä½ä¸ºäºä»¶æº\n\nå·ä½å®ç°ï¼\n\n * org.springframework.context.event.contextclosedevent\n * org.springframework.context.event.contextrefreshedevent\n * org.springframework.context.event.contextstartedevent\n * org.springframework.context.event.contextstoppedevent\n\n\n# åºäºæ¥å£ç spring äºä»¶çå¬å¨\n\njava æ åäºä»¶çå¬å¨ java.util.eventlistener æ©å±\n\n * æ©å±æ¥å£ - org.springframework.context.applicationlistener\n * è®¾è®¡ç¹ç¹ï¼åä¸ç±»åäºä»¶å¤ç\n * å¤çæ¹æ³ï¼onapplicationevent(applicationevent)\n * äºä»¶ç±»åï¼org.springframework.context.applicationevent\n\n\n# åºäºæ³¨è§£ç spring äºä»¶çå¬å¨\n\nspring æ³¨è§£ - @org.springframework.context.event.eventlistener\n\nç¹æ§           è¯´æ\nè®¾è®¡ç¹ç¹         æ¯æå¤ applicationevent ç±»åï¼æ éæ¥å£çº¦æ\næ³¨è§£ç®æ          æ¹æ³\næ¯å¦æ¯æå¼æ­¥æ§è¡     æ¯æ\næ¯å¦æ¯ææ³åç±»åäºä»¶   æ¯æ\næ¯ææ¯æé¡ºåºæ§å¶     æ¯æï¼éå @order æ³¨è§£æ§å¶\n\n\n# æ³¨å spring applicationlistener\n\n * æ¹æ³ä¸ï¼applicationlistener ä½ä¸º spring bean æ³¨å\n * æ¹æ³äºï¼éè¿ configurableapplicationcontext api æ³¨å\n\n\n# spring äºä»¶åå¸å¨\n\n * æ¹æ³ä¸ï¼éè¿ applicationeventpublisher åå¸ spring äºä»¶\n   * è·å applicationeventpublisher\n     * ä¾èµæ³¨å¥\n * æ¹æ³äºï¼éè¿ applicationeventmulticaster åå¸ spring äºä»¶\n   * è·å applicationeventmulticaster\n     * ä¾èµæ³¨å¥\n     * ä¾èµæ¥æ¾\n\n\n# spring å±æ¬¡æ§ä¸ä¸æäºä»¶ä¼ æ­\n\n * åçè¯´æ\n * å½ spring åºç¨åºç°å¤å±æ¬¡ spring åºç¨ä¸ä¸æï¼applicationcontextï¼æ¶ï¼å¦ spring webmvcãspring boot æ spring cloud åºæ¯ä¸ï¼ç±å­ applicationcontext åèµ· spring äºä»¶å¯è½ä¼ä¼ éå°å¶ parent applicationcontextï¼ç´å° rootï¼çè¿ç¨\n * å¦ä½é¿å\n * å®ä½ spring äºä»¶æºï¼applicationcontextï¼è¿è¡è¿æ»¤å¤ç\n\n\n# spring åå»ºäºä»¶\n\napplicationcontextevent æ´¾çäºä»¶\n\n * contextrefreshedevent ï¼spring åºç¨ä¸ä¸æå°±ç»ªäºä»¶\n * contextstartedevent ï¼spring åºç¨ä¸ä¸æå¯å¨äºä»¶\n * contextstoppedevent ï¼spring åºç¨ä¸ä¸æåæ­¢äºä»¶\n * contextclosedevent ï¼spring åºç¨ä¸ä¸æå³é­äºä»¶\n\n\n# spring 4.2 payload äºä»¶\n\nspring payload äºä»¶ - org.springframework.context.payloadapplicationevent\n\n * ä½¿ç¨åºæ¯ï¼ç®å spring äºä»¶åéï¼å³æ³¨äºä»¶æºä¸»ä½\n * åéæ¹æ³ï¼applicationeventpublisher#publishevent(java.lang.object)\n\n\n# èªå®ä¹ spring äºä»¶\n\n * æ©å± org.springframework.context.applicationevent\n * å®ç° org.springframework.context.applicationlistener\n * æ³¨å org.springframework.context.applicationlistener\n\n\n# ä¾èµæ³¨å¥ applicationeventpublisher\n\n * éè¿ applicationeventpublisheraware åè°æ¥å£\n * éè¿ @autowired applicationeventpublisher\n\n\n# ä¾èµæ¥æ¾ applicationeventmulticaster\n\næ¥æ¾æ¡ä»¶\n\n * bean åç§°ï¼"applicationeventmulticaster"\n * bean ç±»åï¼org.springframework.context.event.applicationeventmulticaster\n\n\n# applicationeventpublisher åºå±å®ç°\n\n * æ¥å£ï¼org.springframework.context.event.applicationeventmulticaster\n * æ½è±¡ç±»ï¼org.springframework.context.event.abstractapplicationeventmulticaster\n * å®ç°ç±»ï¼org.springframework.context.event.simpleapplicationeventmulticaster\n\n\n# åæ­¥åå¼æ­¥ spring äºä»¶å¹¿æ­\n\nåºäºå®ç°ç±» - org.springframework.context.event.simpleapplicationeventmulticaster\n\n * æ¨¡å¼åæ¢ï¼settaskexecutor(java.util.concurrent.executor) æ¹æ³\n   * é»è®¤æ¨¡å¼ï¼åæ­¥\n   * å¼æ­¥æ¨¡å¼ï¼å¦ java.util.concurrent.threadpoolexecutor\n * è®¾è®¡ç¼ºé·ï¼éåºäºæ¥å£å¥çº¦ç¼ç¨\n\nåºäºæ³¨è§£ - @org.springframework.context.event.eventlistener\n\n * æ¨¡å¼åæ¢\n   * é»è®¤æ¨¡å¼ï¼åæ­¥\n   * å¼æ­¥æ¨¡å¼ï¼æ æ³¨ @org.springframework.scheduling.annotation.async\n * å®ç°éå¶ï¼æ æ³ç´æ¥å®ç°åæ­¥/å¼æ­¥å¨æåæ¢\n\n\n# spring 4.1 äºä»¶å¼å¸¸å¤ç\n\nspring 3.0 éè¯¯å¤çæ¥å£ - org.springframework.util.errorhandler\n\nä½¿ç¨åºæ¯\n\n * spring äºä»¶ï¼eventsï¼\n   * simpleapplicationeventmulticaster spring 4.1 å¼å§æ¯æ\n * spring æ¬å°è°åº¦ï¼schedulingï¼\n   * org.springframework.scheduling.concurrent.concurrenttaskscheduler\n   * org.springframework.scheduling.concurrent.threadpooltaskscheduler\n\n\n# spring äºä»¶/çå¬å¨å®ç°åç\n\næ ¸å¿ç±» - org.springframework.context.event.simpleapplicationeventmulticaster\n\n * è®¾è®¡æ¨¡å¼ï¼è§å¯èæ¨¡å¼æ©å±\n   * è¢«è§å¯è - org.springframework.context.applicationlistener\n     * api æ·»å \n     * ä¾èµæ¥æ¾\n   * éç¥å¯¹è±¡ - org.springframework.context.applicationevent\n * æ§è¡æ¨¡å¼ï¼åæ­¥/å¼æ­¥\n * å¼å¸¸å¤çï¼org.springframework.util.errorhandler\n * æ³åå¤çï¼org.springframework.core.resolvabletype\n\n\n# é®é¢\n\nspring boot äºä»¶\n\näºä»¶ç±»å                                  åçæ¶æº\napplicationstartingevent              å½ spring boot åºç¨å·²å¯å¨æ¶\napplicationstartedevent               å½ spring boot åºç¨å·²å¯å¨æ¶\napplicationenvironmentpreparedevent   å½ spring boot environment å®ä¾å·²åå¤æ¶\napplicationpreparedevent              å½ spring boot åºç¨é¢å¤æ¶\napplicationreadyevent                 å½ spring boot åºç¨å®å¨å¯ç¨æ¶\napplicationfailedevent                å½ spring boot åºç¨å¯å¨å¤±è´¥æ¶\n\nspring cloud äºä»¶\n\näºä»¶ç±»å                         åçæ¶æº\nenvironmentchangeevent       å½ environment ç¤ºä¾éç½®å±æ§åçååæ¶\nheartbeatevent               å½ discoveryclient å®¢æ·ç«¯åéå¿è·³æ¶\ninstancepreregisteredevent   å½æå¡å®ä¾æ³¨åå\ninstanceregisteredevent      å½æå¡å®ä¾æ³¨åå\nrefreshevent                 å½ refreshendpoint è¢«è°ç¨æ¶\nrefreshscoperefreshedevent   å½ refresh scope bean å·æ°å\n\nspring äºä»¶æ ¸å¿æ¥å£/ç»ä»¶ï¼\n\n * spring äºä»¶ - org.springframework.context.applicationevent\n * spring äºä»¶çå¬å¨ - org.springframework.context.applicationlistener\n * spring äºä»¶åå¸å¨ - org.springframework.context.applicationeventpublisher\n * spring äºä»¶å¹¿æ­å¨ - org.springframework.context.event.applicationeventmulticaster\n\nspring åæ­¥åå¼æ­¥äºä»¶å¤ççä½¿ç¨åºæ¯ï¼\n\n * spring åæ­¥äºä»¶ - ç»å¤§å¤æ° spring ä½¿ç¨åºæ¯ï¼å¦ contextrefreshedevent\n * spring å¼æ­¥äºä»¶ - ä¸»è¦ @eventlistener ä¸ @async éåï¼å®ç°å¼æ­¥å¤çï¼ä¸é»å¡ä¸»çº¿ç¨ï¼æ¯å¦é¿æ¶é´çæ°æ®è®¡ç®ä»»å¡ç­ãä¸è¦è½»æè°æ´ simpleapplicationeventmulticaster ä¸­å³èç taskexecutor å¯¹è±¡ï¼é¤éä½¿ç¨èéå¸¸äºè§£ spring äºä»¶æºå¶ï¼å¦åå®¹æåºç°å¼å¸¸è¡ä¸ºã\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring å½éå",frontmatter:{title:"Spring å½éå",date:"2022-12-22T11:44:54.000Z",order:26,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/b5b8ad/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/26.Spring%E5%9B%BD%E9%99%85%E5%8C%96.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/26.Springå½éå.md",key:"v-77b7c09e",path:"/pages/b5b8ad/",headers:[{level:2,title:"Spring å½éåä½¿ç¨åºæ¯",slug:"spring-å½éåä½¿ç¨åºæ¯",normalizedTitle:"spring å½éåä½¿ç¨åºæ¯",charIndex:17},{level:2,title:"Spring å½éåæ¥å£",slug:"spring-å½éåæ¥å£",normalizedTitle:"spring å½éåæ¥å£",charIndex:107},{level:2,title:"å±æ¬¡æ§ MessageSource",slug:"å±æ¬¡æ§-messagesource",normalizedTitle:"å±æ¬¡æ§ messagesource",charIndex:235},{level:2,title:"Java å½éåæ åå®ç°",slug:"java-å½éåæ åå®ç°",normalizedTitle:"java å½éåæ åå®ç°",charIndex:530},{level:2,title:"Java ææ¬æ ¼å¼å",slug:"java-ææ¬æ ¼å¼å",normalizedTitle:"java ææ¬æ ¼å¼å",charIndex:871},{level:2,title:"MessageSource å¼ç®±å³ç¨å®ç°",slug:"messagesource-å¼ç®±å³ç¨å®ç°",normalizedTitle:"messagesource å¼ç®±å³ç¨å®ç°",charIndex:1288},{level:2,title:"MessageSource å§å»ºä¾èµ",slug:"messagesource-å§å»ºä¾èµ",normalizedTitle:"messagesource å§å»ºä¾èµ",charIndex:1569},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:1740},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2541}],headersStr:"Spring å½éåä½¿ç¨åºæ¯ Spring å½éåæ¥å£ å±æ¬¡æ§ MessageSource Java å½éåæ åå®ç° Java ææ¬æ ¼å¼å MessageSource å¼ç®±å³ç¨å®ç° MessageSource å§å»ºä¾èµ é®é¢ åèèµæ",content:"# Spring å½éå\n\n\n# Spring å½éåä½¿ç¨åºæ¯\n\n * æ®éå½éåææ¡\n * Bean Validation æ ¡éªå½éåææ¡\n * Web ç«ç¹é¡µé¢æ¸²æ\n * Web MVC éè¯¯æ¶æ¯æç¤º\n\n\n# Spring å½éåæ¥å£\n\n * æ ¸å¿æ¥å£ï¼org.springframework.context.MessageSource\n * ä¸»è¦æ¦å¿µ\n   * ææ¡æ¨¡æ¿ç¼ç ï¼codeï¼\n   * ææ¡æ¨¡æ¿åæ°ï¼argsï¼\n   * åºåï¼Localeï¼\n\n\n# å±æ¬¡æ§ MessageSource\n\n * Spring å±æ¬¡æ§æ¥å£åé¡¾\n   * org.springframework.beans.factory.HierarchicalBeanFactory\n   * org.springframework.context.ApplicationContext\n   * org.springframework.beans.factory.config.BeanDefinition\n * Spring å±æ¬¡æ§å½éåæ¥å£\n   * org.springframework.context.HierarchicalMessageSource\n\n\n# Java å½éåæ åå®ç°\n\næ ¸å¿æ¥å£ï¼\n\n * æ½è±¡å®ç° - java.util.ResourceBundle\n * Properties èµæºå®ç° - java.util.PropertyResourceBundle\n * ä¾ä¸¾å®ç° - java.util.ListResourceBundle\n\nResourceBundle æ ¸å¿ç¹æ§\n\n * Key-Value è®¾è®¡\n * å±æ¬¡æ§è®¾è®¡\n * ç¼å­è®¾è®¡\n * å­ç¬¦ç¼ç æ§å¶ - java.util.ResourceBundle.Controlï¼@since 1.6ï¼\n * Control SPI æ©å± - java.util.spi.ResourceBundleControlProviderï¼@since 1.8ï¼\n\n\n# Java ææ¬æ ¼å¼å\n\n * æ ¸å¿æ¥å£\n   * java.text.MessageFormat\n * åºæ¬ç¨æ³\n   * è®¾ç½®æ¶æ¯æ ¼å¼æ¨¡å¼- new MessageFormat(...)\n   * æ ¼å¼å - format(new Object[]{...})\n * æ¶æ¯æ ¼å¼æ¨¡å¼\n   * æ ¼å¼åç´ ï¼{ArgumentIndex (,FormatType,(FormatStyle))}\n   * FormatTypeï¼æ¶æ¯æ ¼å¼ç±»åï¼å¯éé¡¹ï¼æ¯ç§ç±»åå¨ numberãdateãtime å choice ç±»åéå¶ä¸\n   * FormatStyleï¼æ¶æ¯æ ¼å¼é£æ ¼ï¼å¯éé¡¹ï¼åæ¬ï¼shortãmediumãlongãfullãintegerãcurrencyã percent\n * é«çº§ç¹æ§\n   * éç½®æ¶æ¯æ ¼å¼æ¨¡å¼\n   * éç½® java.util.Locale\n   * éç½® java.text.Format\n\n\n# MessageSource å¼ç®±å³ç¨å®ç°\n\n * åºäº ResourceBundle + MessageFormat ç»å MessageSource å®ç°\n * org.springframework.context.support.ResourceBundleMessageSource\n * å¯éè½½ Properties + MessageFormat ç»å MessageSource å®ç°\n * org.springframework.context.support.ReloadableResourceBundleMessageSource\n\n\n# MessageSource å§å»ºä¾èµ\n\n * MessageSource å§å»º Bean å¯è½æ¥æº\n * é¢æ³¨å Bean åç§°ä¸ºï¼âmessageSourceâï¼ç±»åä¸ºï¼MessageSource Bean\n * é»è®¤å§å»ºå®ç° - DelegatingMessageSource\n * å±æ¬¡æ§æ¥æ¾ MessageSource å¯¹è±¡\n\n\n# é®é¢\n\nSpring Boot ä¸ºä»ä¹è¦æ°å»º MessageSource Beanï¼\n\n * AbstractApplicationContext çå®ç°å³å®äº MessageSource å§å»ºå®ç°\n * Spring Boot éè¿å¤é¨åéç½®ç®å MessageSource Bean æå»º\n * Spring Boot åºäº Bean Validation æ ¡éªéå¸¸æ®é\n\nSpring å½éåæ¥å£æåªäºï¼\n\n * æ ¸å¿æ¥å£ - MessageSource\n * å±æ¬¡æ§æ¥å£ - org.springframework.context.HierarchicalMessageSource\n\nSpring æåªäº MessageSource å§å»ºå®ç°ï¼\n\n * org.springframework.context.support.ResourceBundleMessageSource\n * org.springframework.context.support.ReloadableResourceBundleMessageSource\n * org.springframework.context.support.StaticMessageSource\n * org.springframework.context.support.DelegatingMessageSource\n\nå¦ä½å®ç°éç½®èªå¨æ´æ° MessageSourceï¼\n\nä¸»è¦ææ¯\n\n * Java NIO 2ï¼java.nio.file.WatchService\n * Java Concurrency : java.util.concurrent.ExecutorService\n * Springï¼org.springframework.context.support.AbstractMessageSource\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring å½éå\n\n\n# spring å½éåä½¿ç¨åºæ¯\n\n * æ®éå½éåææ¡\n * bean validation æ ¡éªå½éåææ¡\n * web ç«ç¹é¡µé¢æ¸²æ\n * web mvc éè¯¯æ¶æ¯æç¤º\n\n\n# spring å½éåæ¥å£\n\n * æ ¸å¿æ¥å£ï¼org.springframework.context.messagesource\n * ä¸»è¦æ¦å¿µ\n   * ææ¡æ¨¡æ¿ç¼ç ï¼codeï¼\n   * ææ¡æ¨¡æ¿åæ°ï¼argsï¼\n   * åºåï¼localeï¼\n\n\n# å±æ¬¡æ§ messagesource\n\n * spring å±æ¬¡æ§æ¥å£åé¡¾\n   * org.springframework.beans.factory.hierarchicalbeanfactory\n   * org.springframework.context.applicationcontext\n   * org.springframework.beans.factory.config.beandefinition\n * spring å±æ¬¡æ§å½éåæ¥å£\n   * org.springframework.context.hierarchicalmessagesource\n\n\n# java å½éåæ åå®ç°\n\næ ¸å¿æ¥å£ï¼\n\n * æ½è±¡å®ç° - java.util.resourcebundle\n * properties èµæºå®ç° - java.util.propertyresourcebundle\n * ä¾ä¸¾å®ç° - java.util.listresourcebundle\n\nresourcebundle æ ¸å¿ç¹æ§\n\n * key-value è®¾è®¡\n * å±æ¬¡æ§è®¾è®¡\n * ç¼å­è®¾è®¡\n * å­ç¬¦ç¼ç æ§å¶ - java.util.resourcebundle.controlï¼@since 1.6ï¼\n * control spi æ©å± - java.util.spi.resourcebundlecontrolproviderï¼@since 1.8ï¼\n\n\n# java ææ¬æ ¼å¼å\n\n * æ ¸å¿æ¥å£\n   * java.text.messageformat\n * åºæ¬ç¨æ³\n   * è®¾ç½®æ¶æ¯æ ¼å¼æ¨¡å¼- new messageformat(...)\n   * æ ¼å¼å - format(new object[]{...})\n * æ¶æ¯æ ¼å¼æ¨¡å¼\n   * æ ¼å¼åç´ ï¼{argumentindex (,formattype,(formatstyle))}\n   * formattypeï¼æ¶æ¯æ ¼å¼ç±»åï¼å¯éé¡¹ï¼æ¯ç§ç±»åå¨ numberãdateãtime å choice ç±»åéå¶ä¸\n   * formatstyleï¼æ¶æ¯æ ¼å¼é£æ ¼ï¼å¯éé¡¹ï¼åæ¬ï¼shortãmediumãlongãfullãintegerãcurrencyã percent\n * é«çº§ç¹æ§\n   * éç½®æ¶æ¯æ ¼å¼æ¨¡å¼\n   * éç½® java.util.locale\n   * éç½® java.text.format\n\n\n# messagesource å¼ç®±å³ç¨å®ç°\n\n * åºäº resourcebundle + messageformat ç»å messagesource å®ç°\n * org.springframework.context.support.resourcebundlemessagesource\n * å¯éè½½ properties + messageformat ç»å messagesource å®ç°\n * org.springframework.context.support.reloadableresourcebundlemessagesource\n\n\n# messagesource å§å»ºä¾èµ\n\n * messagesource å§å»º bean å¯è½æ¥æº\n * é¢æ³¨å bean åç§°ä¸ºï¼âmessagesourceâï¼ç±»åä¸ºï¼messagesource bean\n * é»è®¤å§å»ºå®ç° - delegatingmessagesource\n * å±æ¬¡æ§æ¥æ¾ messagesource å¯¹è±¡\n\n\n# é®é¢\n\nspring boot ä¸ºä»ä¹è¦æ°å»º messagesource beanï¼\n\n * abstractapplicationcontext çå®ç°å³å®äº messagesource å§å»ºå®ç°\n * spring boot éè¿å¤é¨åéç½®ç®å messagesource bean æå»º\n * spring boot åºäº bean validation æ ¡éªéå¸¸æ®é\n\nspring å½éåæ¥å£æåªäºï¼\n\n * æ ¸å¿æ¥å£ - messagesource\n * å±æ¬¡æ§æ¥å£ - org.springframework.context.hierarchicalmessagesource\n\nspring æåªäº messagesource å§å»ºå®ç°ï¼\n\n * org.springframework.context.support.resourcebundlemessagesource\n * org.springframework.context.support.reloadableresourcebundlemessagesource\n * org.springframework.context.support.staticmessagesource\n * org.springframework.context.support.delegatingmessagesource\n\nå¦ä½å®ç°éç½®èªå¨æ´æ° messagesourceï¼\n\nä¸»è¦ææ¯\n\n * java nio 2ï¼java.nio.file.watchservice\n * java concurrency : java.util.concurrent.executorservice\n * springï¼org.springframework.context.support.abstractmessagesource\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring æ³åå¤ç",frontmatter:{title:"Spring æ³åå¤ç",date:"2022-12-22T20:11:52.000Z",order:27,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/175cbd/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/27.Spring%E6%B3%9B%E5%9E%8B%E5%A4%84%E7%90%86.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/27.Springæ³åå¤ç.md",key:"v-60d8b9e6",path:"/pages/175cbd/",headers:[{level:2,title:"Java æ³ååºç¡",slug:"java-æ³ååºç¡",normalizedTitle:"java æ³ååºç¡",charIndex:18},{level:2,title:"Java 5 ç±»åæ¥å£",slug:"java-5-ç±»åæ¥å£",normalizedTitle:"java 5 ç±»åæ¥å£",charIndex:332},{level:2,title:"Spring æ³åç±»åè¾å©ç±»",slug:"spring-æ³åç±»åè¾å©ç±»",normalizedTitle:"spring æ³åç±»åè¾å©ç±»",charIndex:1075},{level:2,title:"Spring æ³åéåç±»åè¾å©ç±»",slug:"spring-æ³åéåç±»åè¾å©ç±»",normalizedTitle:"spring æ³åéåç±»åè¾å©ç±»",charIndex:1400},{level:2,title:"Spring æ¹æ³åæ°å°è£ - MethodParameter",slug:"spring-æ¹æ³åæ°å°è£-methodparameter",normalizedTitle:"spring æ¹æ³åæ°å°è£ - methodparameter",charIndex:1654},{level:2,title:"Spring 4.0 æ³åä¼åå®ç° - ResolvableType",slug:"spring-4-0-æ³åä¼åå®ç°-resolvabletype",normalizedTitle:"spring 4.0 æ³åä¼åå®ç° - resolvabletype",charIndex:1980},{level:2,title:"ResolvableType çå±éæ§",slug:"resolvabletype-çå±éæ§",normalizedTitle:"resolvabletype çå±éæ§",charIndex:2202},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:2308},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2682}],headersStr:"Java æ³ååºç¡ Java 5 ç±»åæ¥å£ Spring æ³åç±»åè¾å©ç±» Spring æ³åéåç±»åè¾å©ç±» Spring æ¹æ³åæ°å°è£ - MethodParameter Spring 4.0 æ³åä¼åå®ç° - ResolvableType ResolvableType çå±éæ§ é®é¢ åèèµæ",content:"# Spring æ³åå¤ç\n\n\n# Java æ³ååºç¡\n\næ³åç±»å\n\n * æ³åç±»åæ¯å¨ç±»åä¸åæ°åçæ³åç±»ææ¥å£\n\næ³åä½¿ç¨åºæ¯\n\n * ç¼è¯æ¶å¼ºç±»åæ£æ¥\n * é¿åç±»åå¼ºè½¬\n * å®ç°éç¨ç®æ³\n\næ³åç±»åæ¦å\n\n * æ³åè¢«å¼å¥å° Java è¯­è¨ä¸­ï¼ä»¥ä¾¿å¨ç¼è¯æ¶æä¾æ´ä¸¥æ ¼çç±»åæ£æ¥å¹¶æ¯ææ³åç¼ç¨ãç±»åæ¦é¤ç¡®ä¿ä¸ä¼ ä¸ºåæ°åç±»ååå»ºæ°ç±»ï¼å æ­¤ï¼æ³åä¸ä¼äº§çè¿è¡æ¶å¼éãä¸ºäºå®ç°æ³åï¼ç¼è¯å¨å°ç±»åæ¦é¤åºç¨äºï¼\n   * å°æ³åç±»åä¸­çææç±»ååæ°æ¿æ¢ä¸ºå¶è¾¹çï¼å¦æç±»ååæ°æ¯æ è¾¹ççï¼åå°å¶æ¿æ¢ä¸º âObjectâãå æ­¤ï¼çæçå­èç åªåå«æ®éç±»ãæ¥å£åæ¹æ³\n   * å¿è¦æ¶æå¥ç±»åè½¬æ¢ä»¥ä¿æç±»åå®å¨\n   * çææ¡¥æ¹æ³ä»¥ä¿çæ©å±æ³åç±»åä¸­çå¤ææ§\n\n\n# Java 5 ç±»åæ¥å£\n\nJava 5 ç±»åæ¥å£ - java.lang.reflect.Type\n\næ´¾çç±»ææ¥å£                                è¯´æ\njava.lang.Class                       Java ç±» APIï¼å¦ java.lang.String\njava.lang.reflect.GenericArrayType    æ³åæ°ç»ç±»å\njava.lang.reflect.ParameterizedType   æ³ååæ°ç±»å\njava.lang.reflect.TypeVariable        æ³åç±»ååéï¼å¦ Collection<E> ä¸­ç E\njava.lang.reflect.WildcardType        æ³åééç±»å\n\nJava æ³ååå° API\n\nç±»å                           API\næ³åä¿¡æ¯ï¼Generics Infoï¼          java.lang.Class#getGenericInfo()\næ³ååæ°ï¼Parametersï¼             java.lang.reflect.ParameterizedType\næ³åç¶ç±»ï¼Super Classesï¼          java.lang.Class#getGenericSuperclass()\næ³åæ¥å£ï¼Interfacesï¼             java.lang.Class#getGenericInterfaces()\næ³åå£°æï¼Generics Declarationï¼   java.lang.reflect.GenericDeclaration\n\n\n# Spring æ³åç±»åè¾å©ç±»\n\næ ¸å¿ API - org.springframework.core.GenericTypeResolver\n\n * çæ¬æ¯æï¼[2.5.2 , )\n * å¤çç±»åç¸å³ï¼Typeï¼ç¸å³æ¹æ³\n   * resolveReturnType\n   * resolveType\n * å¤çæ³ååæ°ç±»åï¼ParameterizedTypeï¼ç¸å³æ¹æ³\n   * resolveReturnTypeArgument\n   * resolveTypeArgument\n   * resolveTypeArguments\n * å¤çæ³åç±»ååéï¼TypeVariableï¼ç¸å³æ¹æ³\n   * getTypeVariableMap\n\n\n# Spring æ³åéåç±»åè¾å©ç±»\n\næ ¸å¿ API - org.springframework.core.GenericCollectionTypeResolver\n\n * çæ¬æ¯æï¼[2.0 , 4.3]\n * æ¿æ¢å®ç°ï¼org.springframework.core.ResolvableType\n * å¤ç Collection ç¸å³\n   * getCollection*Type\n * å¤ç Map ç¸å³\n   * getMapKey*Type\n   * getMapValue*Type\n\n\n# Spring æ¹æ³åæ°å°è£ - MethodParameter\n\næ ¸å¿ API - org.springframework.core.MethodParameter\n\n * èµ·å§çæ¬ï¼[2.0 , )\n * åä¿¡æ¯\n   * å³èçæ¹æ³ - Method\n   * å³èçæé å¨ - Constructor\n   * æé å¨ææ¹æ³åæ°ç´¢å¼ - parameterIndex\n   * æé å¨ææ¹æ³åæ°ç±»å - parameterType\n   * æé å¨ææ¹æ³åæ°æ³åç±»å - genericParameterType\n   * æé å¨ææ¹æ³åæ°åæ°åç§° - parameterName\n   * æå¨çç±» - containingClass\n\n\n# Spring 4.0 æ³åä¼åå®ç° - ResolvableType\n\næ ¸å¿ API - org.springframework.core.ResolvableType\n\n * èµ·å§çæ¬ï¼[4.0 , )\n * æ®æ¼è§è²ï¼GenericTypeResolver å GenericCollectionTypeResolver æ¿ä»£è\n * å·¥åæ¹æ³ï¼for* æ¹æ³\n * è½¬æ¢æ¹æ³ï¼as* æ¹æ³\n * å¤çæ¹æ³ï¼resolve* æ¹æ³\n\n\n# ResolvableType çå±éæ§\n\n * å±éä¸ï¼ResolvableType æ æ³å¤çæ³åæ¦å\n * å±éäºï¼ResolvableType æ æ³å¤çéå·ä½åç ParameterizedType\n\n\n# é®é¢\n\nJava æ³åæ¦ååçå¨ç¼è¯æ¶è¿æ¯è¿è¡æ¶ï¼\n\nè¿è¡æ¶\n\nè¯·ä»ç» Java 5 Type ç±»åçæ´¾çç±»ææ¥å£\n\n * java.lang.Class\n * java.lang.reflect.GenericArrayType\n * java.lang.reflect.ParameterizedType\n * java.lang.reflect.TypeVariable\n * java.lang.reflect.WildcardType\n\nè¯·è¯´æ ResolvableType çè®¾è®¡ä¼å¿ï¼\n\n * ç®å Java 5 Type API å¼åï¼å±è½å¤æ API çè¿ç¨ï¼å¦ ParameterizedType\n * ä¸åæ§è®¾è®¡ï¼Immutabilityï¼\n * Fluent API è®¾è®¡ï¼Builder æ¨¡å¼ï¼ï¼é¾å¼ï¼æµå¼ï¼ç¼ç¨\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring æ³åå¤ç\n\n\n# java æ³ååºç¡\n\næ³åç±»å\n\n * æ³åç±»åæ¯å¨ç±»åä¸åæ°åçæ³åç±»ææ¥å£\n\næ³åä½¿ç¨åºæ¯\n\n * ç¼è¯æ¶å¼ºç±»åæ£æ¥\n * é¿åç±»åå¼ºè½¬\n * å®ç°éç¨ç®æ³\n\næ³åç±»åæ¦å\n\n * æ³åè¢«å¼å¥å° java è¯­è¨ä¸­ï¼ä»¥ä¾¿å¨ç¼è¯æ¶æä¾æ´ä¸¥æ ¼çç±»åæ£æ¥å¹¶æ¯ææ³åç¼ç¨ãç±»åæ¦é¤ç¡®ä¿ä¸ä¼ ä¸ºåæ°åç±»ååå»ºæ°ç±»ï¼å æ­¤ï¼æ³åä¸ä¼äº§çè¿è¡æ¶å¼éãä¸ºäºå®ç°æ³åï¼ç¼è¯å¨å°ç±»åæ¦é¤åºç¨äºï¼\n   * å°æ³åç±»åä¸­çææç±»ååæ°æ¿æ¢ä¸ºå¶è¾¹çï¼å¦æç±»ååæ°æ¯æ è¾¹ççï¼åå°å¶æ¿æ¢ä¸º âobjectâãå æ­¤ï¼çæçå­èç åªåå«æ®éç±»ãæ¥å£åæ¹æ³\n   * å¿è¦æ¶æå¥ç±»åè½¬æ¢ä»¥ä¿æç±»åå®å¨\n   * çææ¡¥æ¹æ³ä»¥ä¿çæ©å±æ³åç±»åä¸­çå¤ææ§\n\n\n# java 5 ç±»åæ¥å£\n\njava 5 ç±»åæ¥å£ - java.lang.reflect.type\n\næ´¾çç±»ææ¥å£                                è¯´æ\njava.lang.class                       java ç±» apiï¼å¦ java.lang.string\njava.lang.reflect.genericarraytype    æ³åæ°ç»ç±»å\njava.lang.reflect.parameterizedtype   æ³ååæ°ç±»å\njava.lang.reflect.typevariable        æ³åç±»ååéï¼å¦ collection<e> ä¸­ç e\njava.lang.reflect.wildcardtype        æ³åééç±»å\n\njava æ³ååå° api\n\nç±»å                           api\næ³åä¿¡æ¯ï¼generics infoï¼          java.lang.class#getgenericinfo()\næ³ååæ°ï¼parametersï¼             java.lang.reflect.parameterizedtype\næ³åç¶ç±»ï¼super classesï¼          java.lang.class#getgenericsuperclass()\næ³åæ¥å£ï¼interfacesï¼             java.lang.class#getgenericinterfaces()\næ³åå£°æï¼generics declarationï¼   java.lang.reflect.genericdeclaration\n\n\n# spring æ³åç±»åè¾å©ç±»\n\næ ¸å¿ api - org.springframework.core.generictyperesolver\n\n * çæ¬æ¯æï¼[2.5.2 , )\n * å¤çç±»åç¸å³ï¼typeï¼ç¸å³æ¹æ³\n   * resolvereturntype\n   * resolvetype\n * å¤çæ³ååæ°ç±»åï¼parameterizedtypeï¼ç¸å³æ¹æ³\n   * resolvereturntypeargument\n   * resolvetypeargument\n   * resolvetypearguments\n * å¤çæ³åç±»ååéï¼typevariableï¼ç¸å³æ¹æ³\n   * gettypevariablemap\n\n\n# spring æ³åéåç±»åè¾å©ç±»\n\næ ¸å¿ api - org.springframework.core.genericcollectiontyperesolver\n\n * çæ¬æ¯æï¼[2.0 , 4.3]\n * æ¿æ¢å®ç°ï¼org.springframework.core.resolvabletype\n * å¤ç collection ç¸å³\n   * getcollection*type\n * å¤ç map ç¸å³\n   * getmapkey*type\n   * getmapvalue*type\n\n\n# spring æ¹æ³åæ°å°è£ - methodparameter\n\næ ¸å¿ api - org.springframework.core.methodparameter\n\n * èµ·å§çæ¬ï¼[2.0 , )\n * åä¿¡æ¯\n   * å³èçæ¹æ³ - method\n   * å³èçæé å¨ - constructor\n   * æé å¨ææ¹æ³åæ°ç´¢å¼ - parameterindex\n   * æé å¨ææ¹æ³åæ°ç±»å - parametertype\n   * æé å¨ææ¹æ³åæ°æ³åç±»å - genericparametertype\n   * æé å¨ææ¹æ³åæ°åæ°åç§° - parametername\n   * æå¨çç±» - containingclass\n\n\n# spring 4.0 æ³åä¼åå®ç° - resolvabletype\n\næ ¸å¿ api - org.springframework.core.resolvabletype\n\n * èµ·å§çæ¬ï¼[4.0 , )\n * æ®æ¼è§è²ï¼generictyperesolver å genericcollectiontyperesolver æ¿ä»£è\n * å·¥åæ¹æ³ï¼for* æ¹æ³\n * è½¬æ¢æ¹æ³ï¼as* æ¹æ³\n * å¤çæ¹æ³ï¼resolve* æ¹æ³\n\n\n# resolvabletype çå±éæ§\n\n * å±éä¸ï¼resolvabletype æ æ³å¤çæ³åæ¦å\n * å±éäºï¼resolvabletype æ æ³å¤çéå·ä½åç parameterizedtype\n\n\n# é®é¢\n\njava æ³åæ¦ååçå¨ç¼è¯æ¶è¿æ¯è¿è¡æ¶ï¼\n\nè¿è¡æ¶\n\nè¯·ä»ç» java 5 type ç±»åçæ´¾çç±»ææ¥å£\n\n * java.lang.class\n * java.lang.reflect.genericarraytype\n * java.lang.reflect.parameterizedtype\n * java.lang.reflect.typevariable\n * java.lang.reflect.wildcardtype\n\nè¯·è¯´æ resolvabletype çè®¾è®¡ä¼å¿ï¼\n\n * ç®å java 5 type api å¼åï¼å±è½å¤æ api çè¿ç¨ï¼å¦ parameterizedtype\n * ä¸åæ§è®¾è®¡ï¼immutabilityï¼\n * fluent api è®¾è®¡ï¼builder æ¨¡å¼ï¼ï¼é¾å¼ï¼æµå¼ï¼ç¼ç¨\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Environment æ½è±¡",frontmatter:{title:"Spring Environment æ½è±¡",date:"2022-12-23T09:27:44.000Z",order:29,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/03d838/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/29.SpringEnvironment%E6%8A%BD%E8%B1%A1.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/29.SpringEnvironmentæ½è±¡.md",key:"v-8f04575e",path:"/pages/03d838/",headers:[{level:2,title:"çè§£ Spring Environment æ½è±¡",slug:"çè§£-spring-environment-æ½è±¡",normalizedTitle:"çè§£ spring environment æ½è±¡",charIndex:28},{level:2,title:"Spring Environment æ¥å£ä½¿ç¨åºæ¯",slug:"spring-environment-æ¥å£ä½¿ç¨åºæ¯",normalizedTitle:"spring environment æ¥å£ä½¿ç¨åºæ¯",charIndex:295},{level:2,title:"Environment å ä½ç¬¦å¤ç",slug:"environment-å ä½ç¬¦å¤ç",normalizedTitle:"environment å ä½ç¬¦å¤ç",charIndex:419},{level:2,title:"çè§£æ¡ä»¶éç½® Spring Profiles",slug:"çè§£æ¡ä»¶éç½®-spring-profiles",normalizedTitle:"çè§£æ¡ä»¶éç½® spring profiles",charIndex:758},{level:2,title:"Spring 4 éæ @Profile",slug:"spring-4-éæ-profile",normalizedTitle:"spring 4 éæ @profile",charIndex:1120},{level:2,title:"ä¾èµæ³¨å¥ Environment",slug:"ä¾èµæ³¨å¥-environment",normalizedTitle:"ä¾èµæ³¨å¥ environment",charIndex:1269},{level:2,title:"ä¾èµæ¥æ¾ Environment",slug:"ä¾èµæ¥æ¾-environment",normalizedTitle:"ä¾èµæ¥æ¾ environment",charIndex:1442},{level:2,title:"ä¾èµæ³¨å¥ @Value",slug:"ä¾èµæ³¨å¥-value",normalizedTitle:"ä¾èµæ³¨å¥ @value",charIndex:1648},{level:2,title:"Spring ç±»åè½¬æ¢å¨ Environment ä¸­çè¿ç¨",slug:"spring-ç±»åè½¬æ¢å¨-environment-ä¸­çè¿ç¨",normalizedTitle:"spring ç±»åè½¬æ¢å¨ environment ä¸­çè¿ç¨",charIndex:1765},{level:2,title:"Spring ç±»åè½¬æ¢å¨ @Value ä¸­çè¿ç¨",slug:"spring-ç±»åè½¬æ¢å¨-value-ä¸­çè¿ç¨",normalizedTitle:"spring ç±»åè½¬æ¢å¨ @value ä¸­çè¿ç¨",charIndex:2074},{level:2,title:"Spring éç½®å±æ§æº PropertySource",slug:"spring-éç½®å±æ§æº-propertysource",normalizedTitle:"spring éç½®å±æ§æº propertysource",charIndex:2504},{level:2,title:"Spring å§å»ºçéç½®å±æ§æº",slug:"spring-å§å»ºçéç½®å±æ§æº",normalizedTitle:"spring å§å»ºçéç½®å±æ§æº",charIndex:2962},{level:2,title:"åºäºæ³¨è§£æ©å± Spring éç½®å±æ§æº",slug:"åºäºæ³¨è§£æ©å±-spring-éç½®å±æ§æº",normalizedTitle:"åºäºæ³¨è§£æ©å± spring éç½®å±æ§æº",charIndex:3584},{level:2,title:"åºäº API æ©å± Spring éç½®å±æ§æº",slug:"åºäº-api-æ©å±-spring-éç½®å±æ§æº",normalizedTitle:"åºäº api æ©å± spring éç½®å±æ§æº",charIndex:4024},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:4124},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:4376}],headersStr:"çè§£ Spring Environment æ½è±¡ Spring Environment æ¥å£ä½¿ç¨åºæ¯ Environment å ä½ç¬¦å¤ç çè§£æ¡ä»¶éç½® Spring Profiles Spring 4 éæ @Profile ä¾èµæ³¨å¥ Environment ä¾èµæ¥æ¾ Environment ä¾èµæ³¨å¥ @Value Spring ç±»åè½¬æ¢å¨ Environment ä¸­çè¿ç¨ Spring ç±»åè½¬æ¢å¨ @Value ä¸­çè¿ç¨ Spring éç½®å±æ§æº PropertySource Spring å§å»ºçéç½®å±æ§æº åºäºæ³¨è§£æ©å± Spring éç½®å±æ§æº åºäº API æ©å± Spring éç½®å±æ§æº é®é¢ åèèµæ",content:"# Spring Environment æ½è±¡\n\n\n# çè§£ Spring Environment æ½è±¡\n\nç»ä¸ç Spring éç½®å±æ§ç®¡ç\n\nSpring Framework 3.1 å¼å§å¼å¥ Environment æ½è±¡ï¼å®ç»ä¸ Spring éç½®å±æ§çå­å¨ï¼åæ¬å ä½ç¬¦å¤çåç±»åè½¬æ¢ï¼ä¸ä»å®æ´å°æ¿æ¢ PropertyPlaceholderConfigurerï¼èä¸è¿æ¯ææ´ä¸°å¯çéç½®å±æ§æºï¼PropertySourceï¼\n\næ¡ä»¶å Spring Bean è£éç®¡ç\n\néè¿ Environment Profiles ä¿¡æ¯ï¼å¸®å© Spring å®¹å¨æä¾æ¡ä»¶åå°è£é Bean\n\n\n# Spring Environment æ¥å£ä½¿ç¨åºæ¯\n\n * â½¤äºå±æ§å ä½ç¬¦å¤ç\n * ç¨äºè½¬æ¢ Spring éç½®å±æ§ç±»å\n * ç¨äºå­å¨ Spring éç½®å±æ§æºï¼PropertySourceï¼\n * ç¨äº Profiles ç¶æçç»´æ¤\n\n\n# Environment å ä½ç¬¦å¤ç\n\nSpring 3.1 åå ä½ç¬¦å¤ç\n\n * ç»ä»¶ï¼org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\n * æ¥å£ï¼org.springframework.util.StringValueResolver\n\nSpring 3.1 + å ä½ç¬¦å¤ç\n\n * ç»ä»¶ï¼org.springframework.context.support.PropertySourcesPlaceholderConfigurer\n * æ¥å£ï¼org.springframework.beans.factory.config.EmbeddedValueResolver\n\n\n# çè§£æ¡ä»¶éç½® Spring Profiles\n\nSpring 3.1 æ¡ä»¶éç½®\n\n * APIï¼org.springframework.core.env.ConfigurableEnvironment\n * ä¿®æ¹ï¼addActiveProfile(String)ãsetActiveProfiles(String...) å setDefaultProfiles(String...)\n * è·åï¼getActiveProfiles() å getDefaultProfiles()\n * å¹éï¼#acceptsProfiles(String...) å acceptsProfiles(Profiles)\n * æ³¨è§£ï¼@org.springframework.context.annotation.Profile\n\n\n# Spring 4 éæ @Profile\n\nåºäº Spring 4 org.springframework.context.annotation.Condition æ¥å£å®ç°\n\norg.springframework.context.annotation.ProfileCondition\n\n\n# ä¾èµæ³¨å¥ Environment\n\nç´æ¥ä¾èµæ³¨å¥\n\n * éè¿ EnvironmentAware æ¥å£åè°\n * éè¿ @Autowired æ³¨å¥ Environment\n\né´æ¥ä¾èµæ³¨å¥\n\n * éè¿ ApplicationContextAware æ¥å£åè°\n * éè¿ @Autowired æ³¨å¥ ApplicationContext\n\n\n# ä¾èµæ¥æ¾ Environment\n\nç´æ¥ä¾èµæ¥æ¾\n\n * éè¿ org.springframework.context.ConfigurableApplicationContext#ENVIRONMENT_BEAN_NAME\n\né´æ¥ä¾èµæ¥æ¾\n\n * éè¿ org.springframework.context.ConfigurableApplicationContext#getEnvironment\n\n\n# ä¾èµæ³¨å¥ @Value\n\néè¿æ³¨å¥ @Value\n\nå®ç° - org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor\n\n\n# Spring ç±»åè½¬æ¢å¨ Environment ä¸­çè¿ç¨\n\nEnvironment åºå±å®ç°\n\n * åºå±å®ç° - org.springframework.core.env.PropertySourcesPropertyResolver\n * æ ¸å¿æ¹æ³ - convertValueIfNecessary(Object,Class)\n * åºå±æå¡ - org.springframework.core.convert.ConversionService\n * é»è®¤å®ç° - org.springframework.core.convert.support.DefaultConversionService\n\n\n# Spring ç±»åè½¬æ¢å¨ @Value ä¸­çè¿ç¨\n\n@Value åºå±å®ç°\n\n * åºå±å®ç° - org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor\n   * org.springframework.beans.factory.support.DefaultListableBeanFactory#doResolveDependency\n * åºå±æå¡ - org.springframework.beans.TypeConverter\n   * é»è®¤å®ç° - org.springframework.beans.TypeConverterDelegate\n     * java.beans.PropertyEditor\n     * org.springframework.core.convert.ConversionService\n\n\n# Spring éç½®å±æ§æº PropertySource\n\n * API\n   * åéç½®å±æ§æº - org.springframework.core.env.PropertySource\n   * å¤éç½®å±æ§æº - org.springframework.core.env.PropertySources\n * æ³¨è§£\n   * åéç½®å±æ§æº - @org.springframework.context.annotation.PropertySource\n   * å¤éç½®å±æ§æº - @org.springframework.context.annotation.PropertySources\n * å³è\n   * å­å¨å¯¹è±¡ - org.springframework.core.env.MutablePropertySources\n   * å³èæ¹æ³ - org.springframework.core.env.ConfigurableEnvironment#getPropertySources()\n\n\n# Spring å§å»ºçéç½®å±æ§æº\n\nå§å»º PropertySource\n\nPROPERTYSOURCE ç±»å                                                      è¯´æ\norg.springframework.core.env.CommandLinePropertySource                 å½ä»¤è¡éç½®å±æ§æº\norg.springframework.jndi.JndiPropertySource                            JDNI éç½®å±æ§æº\norg.springframework.core.env.PropertiesPropertySource                  Properties éç½®å±æ§æº\norg.springframework.web.context.support.ServletConfigPropertySource    Servlet éç½®å±æ§æº\norg.springframework.web.context.support.ServletContextPropertySource   ServletContext éç½®å±æ§æº\norg.springframework.core.env.SystemEnvironmentPropertySource           ç¯å¢åééç½®å±æ§æº\n\n\n# åºäºæ³¨è§£æ©å± Spring éç½®å±æ§æº\n\n@org.springframework.context.annotation.PropertySource å®ç°åç\n\n * å¥å£ - org.springframework.context.annotation.ConfigurationClassParser#doProcessConfigurationClass\n   * org.springframework.context.annotation.ConfigurationClassParser#processPropertySource\n * 4.3 æ°å¢è¯­ä¹\n   * éç½®å±æ§å­ç¬¦ç¼ç  - encoding\n   * org.springframework.core.io.support.PropertySourceFactory\n * ééå¯¹è±¡ - org.springframework.core.env.CompositePropertySource\n\n\n# åºäº API æ©å± Spring éç½®å±æ§æº\n\n * Spring åºç¨ä¸ä¸æå¯å¨åè£é PropertySource\n * Spring åºç¨ä¸ä¸æå¯å¨åè£é PropertySource\n\n\n# é®é¢\n\nç®åä»ç» Spring Environment æ¥å£ï¼\n\n * æ ¸å¿æ¥å£ - org.springframework.core.env.Environment\n * ç¶æ¥å£ - org.springframework.core.env.PropertyResolver\n * å¯éç½®æ¥å£ - org.springframework.core.env.ConfigurableEnvironment\n * èè´£ï¼\n   * ç®¡ç Spring éç½®å±æ§æº\n   * ç®¡ç Profiles\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring environment æ½è±¡\n\n\n# çè§£ spring environment æ½è±¡\n\nç»ä¸ç spring éç½®å±æ§ç®¡ç\n\nspring framework 3.1 å¼å§å¼å¥ environment æ½è±¡ï¼å®ç»ä¸ spring éç½®å±æ§çå­å¨ï¼åæ¬å ä½ç¬¦å¤çåç±»åè½¬æ¢ï¼ä¸ä»å®æ´å°æ¿æ¢ propertyplaceholderconfigurerï¼èä¸è¿æ¯ææ´ä¸°å¯çéç½®å±æ§æºï¼propertysourceï¼\n\næ¡ä»¶å spring bean è£éç®¡ç\n\néè¿ environment profiles ä¿¡æ¯ï¼å¸®å© spring å®¹å¨æä¾æ¡ä»¶åå°è£é bean\n\n\n# spring environment æ¥å£ä½¿ç¨åºæ¯\n\n * â½¤äºå±æ§å ä½ç¬¦å¤ç\n * ç¨äºè½¬æ¢ spring éç½®å±æ§ç±»å\n * ç¨äºå­å¨ spring éç½®å±æ§æºï¼propertysourceï¼\n * ç¨äº profiles ç¶æçç»´æ¤\n\n\n# environment å ä½ç¬¦å¤ç\n\nspring 3.1 åå ä½ç¬¦å¤ç\n\n * ç»ä»¶ï¼org.springframework.beans.factory.config.propertyplaceholderconfigurer\n * æ¥å£ï¼org.springframework.util.stringvalueresolver\n\nspring 3.1 + å ä½ç¬¦å¤ç\n\n * ç»ä»¶ï¼org.springframework.context.support.propertysourcesplaceholderconfigurer\n * æ¥å£ï¼org.springframework.beans.factory.config.embeddedvalueresolver\n\n\n# çè§£æ¡ä»¶éç½® spring profiles\n\nspring 3.1 æ¡ä»¶éç½®\n\n * apiï¼org.springframework.core.env.configurableenvironment\n * ä¿®æ¹ï¼addactiveprofile(string)ãsetactiveprofiles(string...) å setdefaultprofiles(string...)\n * è·åï¼getactiveprofiles() å getdefaultprofiles()\n * å¹éï¼#acceptsprofiles(string...) å acceptsprofiles(profiles)\n * æ³¨è§£ï¼@org.springframework.context.annotation.profile\n\n\n# spring 4 éæ @profile\n\nåºäº spring 4 org.springframework.context.annotation.condition æ¥å£å®ç°\n\norg.springframework.context.annotation.profilecondition\n\n\n# ä¾èµæ³¨å¥ environment\n\nç´æ¥ä¾èµæ³¨å¥\n\n * éè¿ environmentaware æ¥å£åè°\n * éè¿ @autowired æ³¨å¥ environment\n\né´æ¥ä¾èµæ³¨å¥\n\n * éè¿ applicationcontextaware æ¥å£åè°\n * éè¿ @autowired æ³¨å¥ applicationcontext\n\n\n# ä¾èµæ¥æ¾ environment\n\nç´æ¥ä¾èµæ¥æ¾\n\n * éè¿ org.springframework.context.configurableapplicationcontext#environment_bean_name\n\né´æ¥ä¾èµæ¥æ¾\n\n * éè¿ org.springframework.context.configurableapplicationcontext#getenvironment\n\n\n# ä¾èµæ³¨å¥ @value\n\néè¿æ³¨å¥ @value\n\nå®ç° - org.springframework.beans.factory.annotation.autowiredannotationbeanpostprocessor\n\n\n# spring ç±»åè½¬æ¢å¨ environment ä¸­çè¿ç¨\n\nenvironment åºå±å®ç°\n\n * åºå±å®ç° - org.springframework.core.env.propertysourcespropertyresolver\n * æ ¸å¿æ¹æ³ - convertvalueifnecessary(object,class)\n * åºå±æå¡ - org.springframework.core.convert.conversionservice\n * é»è®¤å®ç° - org.springframework.core.convert.support.defaultconversionservice\n\n\n# spring ç±»åè½¬æ¢å¨ @value ä¸­çè¿ç¨\n\n@value åºå±å®ç°\n\n * åºå±å®ç° - org.springframework.beans.factory.annotation.autowiredannotationbeanpostprocessor\n   * org.springframework.beans.factory.support.defaultlistablebeanfactory#doresolvedependency\n * åºå±æå¡ - org.springframework.beans.typeconverter\n   * é»è®¤å®ç° - org.springframework.beans.typeconverterdelegate\n     * java.beans.propertyeditor\n     * org.springframework.core.convert.conversionservice\n\n\n# spring éç½®å±æ§æº propertysource\n\n * api\n   * åéç½®å±æ§æº - org.springframework.core.env.propertysource\n   * å¤éç½®å±æ§æº - org.springframework.core.env.propertysources\n * æ³¨è§£\n   * åéç½®å±æ§æº - @org.springframework.context.annotation.propertysource\n   * å¤éç½®å±æ§æº - @org.springframework.context.annotation.propertysources\n * å³è\n   * å­å¨å¯¹è±¡ - org.springframework.core.env.mutablepropertysources\n   * å³èæ¹æ³ - org.springframework.core.env.configurableenvironment#getpropertysources()\n\n\n# spring å§å»ºçéç½®å±æ§æº\n\nå§å»º propertysource\n\npropertysource ç±»å                                                      è¯´æ\norg.springframework.core.env.commandlinepropertysource                 å½ä»¤è¡éç½®å±æ§æº\norg.springframework.jndi.jndipropertysource                            jdni éç½®å±æ§æº\norg.springframework.core.env.propertiespropertysource                  properties éç½®å±æ§æº\norg.springframework.web.context.support.servletconfigpropertysource    servlet éç½®å±æ§æº\norg.springframework.web.context.support.servletcontextpropertysource   servletcontext éç½®å±æ§æº\norg.springframework.core.env.systemenvironmentpropertysource           ç¯å¢åééç½®å±æ§æº\n\n\n# åºäºæ³¨è§£æ©å± spring éç½®å±æ§æº\n\n@org.springframework.context.annotation.propertysource å®ç°åç\n\n * å¥å£ - org.springframework.context.annotation.configurationclassparser#doprocessconfigurationclass\n   * org.springframework.context.annotation.configurationclassparser#processpropertysource\n * 4.3 æ°å¢è¯­ä¹\n   * éç½®å±æ§å­ç¬¦ç¼ç  - encoding\n   * org.springframework.core.io.support.propertysourcefactory\n * ééå¯¹è±¡ - org.springframework.core.env.compositepropertysource\n\n\n# åºäº api æ©å± spring éç½®å±æ§æº\n\n * spring åºç¨ä¸ä¸æå¯å¨åè£é propertysource\n * spring åºç¨ä¸ä¸æå¯å¨åè£é propertysource\n\n\n# é®é¢\n\nç®åä»ç» spring environment æ¥å£ï¼\n\n * æ ¸å¿æ¥å£ - org.springframework.core.env.environment\n * ç¶æ¥å£ - org.springframework.core.env.propertyresolver\n * å¯éç½®æ¥å£ - org.springframework.core.env.configurableenvironment\n * èè´£ï¼\n   * ç®¡ç spring éç½®å±æ§æº\n   * ç®¡ç profiles\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring æ³¨è§£",frontmatter:{title:"Spring æ³¨è§£",date:"2022-12-23T09:08:15.000Z",order:28,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/b6556f/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/28.Spring%E6%B3%A8%E8%A7%A3.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/28.Springæ³¨è§£.md",key:"v-6cd7991c",path:"/pages/b6556f/",headers:[{level:2,title:"Spring æ³¨è§£é©±å¨ç¼ç¨åå±åç¨",slug:"spring-æ³¨è§£é©±å¨ç¼ç¨åå±åç¨",normalizedTitle:"spring æ³¨è§£é©±å¨ç¼ç¨åå±åç¨",charIndex:16},{level:2,title:"Spring æ ¸å¿æ³¨è§£åºæ¯åç±»",slug:"spring-æ ¸å¿æ³¨è§£åºæ¯åç±»",normalizedTitle:"spring æ ¸å¿æ³¨è§£åºæ¯åç±»",charIndex:204},{level:2,title:"Spring æ³¨è§£ç¼ç¨æ¨¡å",slug:"spring-æ³¨è§£ç¼ç¨æ¨¡å",normalizedTitle:"spring æ³¨è§£ç¼ç¨æ¨¡å",charIndex:807},{level:2,title:"Spring åæ³¨è§£ï¼Meta-Annotationsï¼",slug:"spring-åæ³¨è§£-meta-annotations",normalizedTitle:"spring åæ³¨è§£ï¼meta-annotationsï¼",charIndex:980},{level:2,title:"Spring æ¨¡å¼æ³¨è§£ï¼Stereotype Annotationsï¼",slug:"spring-æ¨¡å¼æ³¨è§£-stereotype-annotations",normalizedTitle:"spring æ¨¡å¼æ³¨è§£ï¼stereotype annotationsï¼",charIndex:850},{level:2,title:"Spring ç»åæ³¨è§£ï¼Composed Annotationsï¼",slug:"spring-ç»åæ³¨è§£-composed-annotations",normalizedTitle:"spring ç»åæ³¨è§£ï¼composed annotationsï¼",charIndex:889},{level:2,title:"Spring æ³¨è§£å±æ§å«åï¼Attribute Aliasesï¼",slug:"spring-æ³¨è§£å±æ§å«å-attribute-aliases",normalizedTitle:"spring æ³¨è§£å±æ§å«åï¼attribute aliasesï¼",charIndex:2312},{level:2,title:"Spring æ³¨è§£å±æ§è¦çï¼Attribute Overridesï¼",slug:"spring-æ³¨è§£å±æ§è¦ç-attribute-overrides",normalizedTitle:"spring æ³¨è§£å±æ§è¦çï¼attribute overridesï¼",charIndex:2349},{level:2,title:"Spring @Enable æ¨¡åé©±å¨",slug:"spring-enable-æ¨¡åé©±å¨",normalizedTitle:"spring @enable æ¨¡åé©±å¨",charIndex:2388},{level:2,title:"Spring æ¡ä»¶æ³¨è§£",slug:"spring-æ¡ä»¶æ³¨è§£",normalizedTitle:"spring æ¡ä»¶æ³¨è§£",charIndex:2844},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:3564}],headersStr:"Spring æ³¨è§£é©±å¨ç¼ç¨åå±åç¨ Spring æ ¸å¿æ³¨è§£åºæ¯åç±» Spring æ³¨è§£ç¼ç¨æ¨¡å Spring åæ³¨è§£ï¼Meta-Annotationsï¼ Spring æ¨¡å¼æ³¨è§£ï¼Stereotype Annotationsï¼ Spring ç»åæ³¨è§£ï¼Composed Annotationsï¼ Spring æ³¨è§£å±æ§å«åï¼Attribute Aliasesï¼ Spring æ³¨è§£å±æ§è¦çï¼Attribute Overridesï¼ Spring @Enable æ¨¡åé©±å¨ Spring æ¡ä»¶æ³¨è§£ åèèµæ",content:"# Spring æ³¨è§£\n\n\n# Spring æ³¨è§£é©±å¨ç¼ç¨åå±åç¨\n\n * æ³¨è§£é©±å¨å¯èæ¶ä»£ï¼Spring Framework 1.x\n * æ³¨è§£é©±å¨è¿æ¸¡æ¶ä»£ï¼Spring Framework 2.x\n * æ³¨è§£é©±å¨é»éæ¶ä»£ï¼Spring Framework 3.x\n * æ³¨è§£é©±å¨å®åæ¶ä»£ï¼Spring Framework 4.x\n * æ³¨è§£é©±å¨å½ä¸æ¶ä»£ï¼Spring Framework 5.x\n\n\n# Spring æ ¸å¿æ³¨è§£åºæ¯åç±»\n\nSpring æ¨¡å¼æ³¨è§£\n\nSPRING æ³¨è§£        åºæ¯è¯´æ          èµ·å§çæ¬\n@Repository      æ°æ®ä»å¨æ¨¡å¼æ³¨è§£      2.0\n@Component       éç¨ç»ä»¶æ¨¡å¼æ³¨è§£      2.5\n@Service         æå¡æ¨¡å¼æ³¨è§£        2.5\n@Controller      Web æ§å¶å¨æ¨¡å¼æ³¨è§£   2.5\n@Configuration   éç½®ç±»æ¨¡å¼æ³¨è§£       3.0\n\nè£éæ³¨è§£\n\nSPRING æ³¨è§£         åºæ¯è¯´æ                             èµ·å§çæ¬\n@ImportResource   æ¿æ¢ XML åç´  <import>               2.5\n@Import           å¯¼å¥ Configuration ç±»               2.5\n@ComponentScan    æ«ææå® package ä¸æ æ³¨ Spring æ¨¡å¼æ³¨è§£çç±»   3.1\n\nä¾èµæ³¨å¥æ³¨è§£\n\nSPRING æ³¨è§£    åºæ¯è¯´æ                   èµ·å§çæ¬\n@Autowired   Bean ä¾èµæ³¨å¥ï¼æ¯æå¤ç§ä¾èµæ¥æ¾æ¹å¼   2.5\n@Qualifier   ç»ç²åº¦ç @Autowired ä¾èµæ¥æ¾   2.5\n\n\n# Spring æ³¨è§£ç¼ç¨æ¨¡å\n\n * åæ³¨è§£ï¼Meta-Annotationsï¼\n * Spring æ¨¡å¼æ³¨è§£ï¼Stereotype Annotationsï¼\n * Spring ç»åæ³¨è§£ï¼Composed Annotationsï¼\n * Spring æ³¨è§£å±æ§å«ååè¦çï¼Attribute Aliases and Overridesï¼\n\n\n# Spring åæ³¨è§£ï¼Meta-Annotationsï¼\n\n * java.lang.annotation.Documented\n * java.lang.annotation.Inherited\n * java.lang.annotation.Repeatable\n\n\n# Spring æ¨¡å¼æ³¨è§£ï¼Stereotype Annotationsï¼\n\nçè§£ @Component âæ´¾â½£æ§âï¼åæ æ³¨ @Component çæ³¨è§£å¨ XML åç´  context:component-scan ææ³¨è§£ @ComponentScan æ«æä¸­âæ´¾çâäº @Component çç¹æ§ï¼å¹¶ä¸ä» Spring Framework 4.0 å¼å§æ¯æå¤å±æ¬¡âæ´¾â½£æ§âã\n\nä¸¾ä¾è¯´æï¼\n\n * @Repository\n * @Service\n * @Controller\n * @Configuration\n * @SpringBootConfigurationï¼Spring Bootï¼\n\n@Component âæ´¾â½£æ§âåç\n\n * æ ¸å¿ç»ä»¶ - org.springframework.context.annotation.ClassPathBeanDefinitionScanner\n * org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider\n * èµæºå¤ç - org.springframework.core.io.support.ResourcePatternResolver\n * èµæº-ç±»åä¿¡æ¯\n * org.springframework.core.type.classreading.MetadataReaderFactory\n * ç±»åä¿¡æ¯ - org.springframework.core.type.ClassMetadata\n * ASM å®ç° - org.springframework.core.type.classreading.ClassMetadataReadingVisitor\n * åå°å®ç° - org.springframework.core.type.StandardAnnotationMetadata\n * æ³¨è§£åä¿¡æ¯ - org.springframework.core.type.AnnotationMetadata\n * ASM å®ç° - org.springframework.core.type.classreading.AnnotationMetadataReadingVisitor\n * åå°å®ç° - org.springframework.core.type.StandardAnnotationMetadata\n\n\n# Spring ç»åæ³¨è§£ï¼Composed Annotationsï¼\n\nSpring ç»åæ³¨è§£ï¼Composed Annotationsï¼ä¸­çåæ³¨åè®¸æ¯ Spring æ¨¡å¼æ³¨è§£ï¼Stereotype Annotationï¼ä¸å¶ä» Spring åè½æ§æ³¨è§£çä»»æç»åã\n\n\n# Spring æ³¨è§£å±æ§å«åï¼Attribute Aliasesï¼\n\n\n# Spring æ³¨è§£å±æ§è¦çï¼Attribute Overridesï¼\n\n\n# Spring @Enable æ¨¡åé©±å¨\n\n@Enable æ¨¡åé©±å¨\n\n@Enable æ¨¡åé©±å¨æ¯ä»¥ @Enable ä¸ºåç¼çæ³¨è§£é©±å¨ç¼ç¨æ¨¡åãæè°âæ¨¡åâæ¯æå·å¤ç¸åé¢åçåè½ç»ä»¶éåï¼ç»åæå½¢æâ¼ä¸ªç¬â½´çååãâ½å¦ Web MVC æ¨¡åãAspectJ ä»£çæ¨¡åãCachingï¼ç¼å­ï¼æ¨¡åãJMXï¼Java ç®¡çæ©å±ï¼æ¨¡åãAsyncï¼å¼æ­¥å¤çï¼æ¨¡åç­ã\n\nä¸¾ä¾è¯´æ\n\n * @EnableWebMvc\n * @EnableTransactionManagement\n * @EnableCaching\n * @EnableMBeanExport\n * @EnableAsync\n\n@Enable æ¨¡åé©±å¨ç¼ç¨æ¨¡å¼\n\n * é©±å¨æ³¨è§£ï¼@EnableXXX\n * å¯¼å¥æ³¨è§£ï¼@Import å·ä½å®ç°\n * å·ä½å®ç°\n * åºäº Configuration Class\n * åºäº ImportSelector æ¥å£å®ç°\n * åºäº ImportBeanDefinitionRegistrar æ¥å£å®ç°\n\n\n# Spring æ¡ä»¶æ³¨è§£\n\nåºäºéç½®æ¡ä»¶æ³¨è§£ - @org.springframework.context.annotation.Profile\n\n * å³èå¯¹è±¡ - org.springframework.core.env.Environment ä¸­ç Profiles\n * å®ç°ååï¼ä» Spring 4.0 å¼å§ï¼@Profile åºäº @Conditional å®ç°\n\nåºäºç¼ç¨æ¡ä»¶æ³¨è§£ - @org.springframework.context.annotation.Conditional\n\n * å³èå¯¹è±¡ - org.springframework.context.annotation.Condition å·ä½å®ç°\n\n@Conditional å®ç°åç\n\n * ä¸ä¸æå¯¹è±¡ - org.springframework.context.annotation.ConditionContext\n * æ¡ä»¶å¤æ­ - org.springframework.context.annotation.ConditionEvaluator\n * éç½®é¶æ®µ - org.springframework.context.annotation.ConfigurationCondition.ConfigurationPhase\n * å¤æ­å¥å£\n   * org.springframework.context.annotation.ConfigurationClassPostProcessor\n   * org.springframework.context.annotation.ConfigurationClassParser\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Core Technologies\n * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã",normalizedContent:"# spring æ³¨è§£\n\n\n# spring æ³¨è§£é©±å¨ç¼ç¨åå±åç¨\n\n * æ³¨è§£é©±å¨å¯èæ¶ä»£ï¼spring framework 1.x\n * æ³¨è§£é©±å¨è¿æ¸¡æ¶ä»£ï¼spring framework 2.x\n * æ³¨è§£é©±å¨é»éæ¶ä»£ï¼spring framework 3.x\n * æ³¨è§£é©±å¨å®åæ¶ä»£ï¼spring framework 4.x\n * æ³¨è§£é©±å¨å½ä¸æ¶ä»£ï¼spring framework 5.x\n\n\n# spring æ ¸å¿æ³¨è§£åºæ¯åç±»\n\nspring æ¨¡å¼æ³¨è§£\n\nspring æ³¨è§£        åºæ¯è¯´æ          èµ·å§çæ¬\n@repository      æ°æ®ä»å¨æ¨¡å¼æ³¨è§£      2.0\n@component       éç¨ç»ä»¶æ¨¡å¼æ³¨è§£      2.5\n@service         æå¡æ¨¡å¼æ³¨è§£        2.5\n@controller      web æ§å¶å¨æ¨¡å¼æ³¨è§£   2.5\n@configuration   éç½®ç±»æ¨¡å¼æ³¨è§£       3.0\n\nè£éæ³¨è§£\n\nspring æ³¨è§£         åºæ¯è¯´æ                             èµ·å§çæ¬\n@importresource   æ¿æ¢ xml åç´  <import>               2.5\n@import           å¯¼å¥ configuration ç±»               2.5\n@componentscan    æ«ææå® package ä¸æ æ³¨ spring æ¨¡å¼æ³¨è§£çç±»   3.1\n\nä¾èµæ³¨å¥æ³¨è§£\n\nspring æ³¨è§£    åºæ¯è¯´æ                   èµ·å§çæ¬\n@autowired   bean ä¾èµæ³¨å¥ï¼æ¯æå¤ç§ä¾èµæ¥æ¾æ¹å¼   2.5\n@qualifier   ç»ç²åº¦ç @autowired ä¾èµæ¥æ¾   2.5\n\n\n# spring æ³¨è§£ç¼ç¨æ¨¡å\n\n * åæ³¨è§£ï¼meta-annotationsï¼\n * spring æ¨¡å¼æ³¨è§£ï¼stereotype annotationsï¼\n * spring ç»åæ³¨è§£ï¼composed annotationsï¼\n * spring æ³¨è§£å±æ§å«ååè¦çï¼attribute aliases and overridesï¼\n\n\n# spring åæ³¨è§£ï¼meta-annotationsï¼\n\n * java.lang.annotation.documented\n * java.lang.annotation.inherited\n * java.lang.annotation.repeatable\n\n\n# spring æ¨¡å¼æ³¨è§£ï¼stereotype annotationsï¼\n\nçè§£ @component âæ´¾â½£æ§âï¼åæ æ³¨ @component çæ³¨è§£å¨ xml åç´  context:component-scan ææ³¨è§£ @componentscan æ«æä¸­âæ´¾çâäº @component çç¹æ§ï¼å¹¶ä¸ä» spring framework 4.0 å¼å§æ¯æå¤å±æ¬¡âæ´¾â½£æ§âã\n\nä¸¾ä¾è¯´æï¼\n\n * @repository\n * @service\n * @controller\n * @configuration\n * @springbootconfigurationï¼spring bootï¼\n\n@component âæ´¾â½£æ§âåç\n\n * æ ¸å¿ç»ä»¶ - org.springframework.context.annotation.classpathbeandefinitionscanner\n * org.springframework.context.annotation.classpathscanningcandidatecomponentprovider\n * èµæºå¤ç - org.springframework.core.io.support.resourcepatternresolver\n * èµæº-ç±»åä¿¡æ¯\n * org.springframework.core.type.classreading.metadatareaderfactory\n * ç±»åä¿¡æ¯ - org.springframework.core.type.classmetadata\n * asm å®ç° - org.springframework.core.type.classreading.classmetadatareadingvisitor\n * åå°å®ç° - org.springframework.core.type.standardannotationmetadata\n * æ³¨è§£åä¿¡æ¯ - org.springframework.core.type.annotationmetadata\n * asm å®ç° - org.springframework.core.type.classreading.annotationmetadatareadingvisitor\n * åå°å®ç° - org.springframework.core.type.standardannotationmetadata\n\n\n# spring ç»åæ³¨è§£ï¼composed annotationsï¼\n\nspring ç»åæ³¨è§£ï¼composed annotationsï¼ä¸­çåæ³¨åè®¸æ¯ spring æ¨¡å¼æ³¨è§£ï¼stereotype annotationï¼ä¸å¶ä» spring åè½æ§æ³¨è§£çä»»æç»åã\n\n\n# spring æ³¨è§£å±æ§å«åï¼attribute aliasesï¼\n\n\n# spring æ³¨è§£å±æ§è¦çï¼attribute overridesï¼\n\n\n# spring @enable æ¨¡åé©±å¨\n\n@enable æ¨¡åé©±å¨\n\n@enable æ¨¡åé©±å¨æ¯ä»¥ @enable ä¸ºåç¼çæ³¨è§£é©±å¨ç¼ç¨æ¨¡åãæè°âæ¨¡åâæ¯æå·å¤ç¸åé¢åçåè½ç»ä»¶éåï¼ç»åæå½¢æâ¼ä¸ªç¬â½´çååãâ½å¦ web mvc æ¨¡åãaspectj ä»£çæ¨¡åãcachingï¼ç¼å­ï¼æ¨¡åãjmxï¼java ç®¡çæ©å±ï¼æ¨¡åãasyncï¼å¼æ­¥å¤çï¼æ¨¡åç­ã\n\nä¸¾ä¾è¯´æ\n\n * @enablewebmvc\n * @enabletransactionmanagement\n * @enablecaching\n * @enablembeanexport\n * @enableasync\n\n@enable æ¨¡åé©±å¨ç¼ç¨æ¨¡å¼\n\n * é©±å¨æ³¨è§£ï¼@enablexxx\n * å¯¼å¥æ³¨è§£ï¼@import å·ä½å®ç°\n * å·ä½å®ç°\n * åºäº configuration class\n * åºäº importselector æ¥å£å®ç°\n * åºäº importbeandefinitionregistrar æ¥å£å®ç°\n\n\n# spring æ¡ä»¶æ³¨è§£\n\nåºäºéç½®æ¡ä»¶æ³¨è§£ - @org.springframework.context.annotation.profile\n\n * å³èå¯¹è±¡ - org.springframework.core.env.environment ä¸­ç profiles\n * å®ç°ååï¼ä» spring 4.0 å¼å§ï¼@profile åºäº @conditional å®ç°\n\nåºäºç¼ç¨æ¡ä»¶æ³¨è§£ - @org.springframework.context.annotation.conditional\n\n * å³èå¯¹è±¡ - org.springframework.context.annotation.condition å·ä½å®ç°\n\n@conditional å®ç°åç\n\n * ä¸ä¸æå¯¹è±¡ - org.springframework.context.annotation.conditioncontext\n * æ¡ä»¶å¤æ­ - org.springframework.context.annotation.conditionevaluator\n * éç½®é¶æ®µ - org.springframework.context.annotation.configurationcondition.configurationphase\n * å¤æ­å¥å£\n   * org.springframework.context.annotation.configurationclasspostprocessor\n   * org.springframework.context.annotation.configurationclassparser\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ core technologies\n * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹å¿«éå¥é¨",frontmatter:{title:"SpringBoot ä¹å¿«éå¥é¨",date:"2021-12-10T18:22:26.000Z",order:31,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/950e4d/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/31.SpringBoot%E4%B9%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/31.SpringBootä¹å¿«éå¥é¨.md",key:"v-11054c30",path:"/pages/950e4d/",headers:[{level:2,title:"Spring Boot ç®ä»",slug:"spring-boot-ç®ä»",normalizedTitle:"spring boot ç®ä»",charIndex:23},{level:2,title:"Spring Boot ç³»ç»è¦æ±",slug:"spring-boot-ç³»ç»è¦æ±",normalizedTitle:"spring boot ç³»ç»è¦æ±",charIndex:211},{level:2,title:"é¨ç½²ç¬¬ä¸ä¸ª Spring Boot é¡¹ç®",slug:"é¨ç½²ç¬¬ä¸ä¸ª-spring-boot-é¡¹ç®",normalizedTitle:"é¨ç½²ç¬¬ä¸ä¸ª spring boot é¡¹ç®",charIndex:466},{level:3,title:"ç¯å¢æ£æ¥",slug:"ç¯å¢æ£æ¥",normalizedTitle:"ç¯å¢æ£æ¥",charIndex:589},{level:3,title:"åå»º pom",slug:"åå»º-pom",normalizedTitle:"åå»º pom",charIndex:1043},{level:3,title:"æ·»å ä¾èµ",slug:"æ·»å ä¾èµ",normalizedTitle:"æ·»å ä¾èµ",charIndex:1779},{level:3,title:"ç¼åä»£ç ",slug:"ç¼åä»£ç ",normalizedTitle:"ç¼åä»£ç ",charIndex:2522},{level:3,title:"è¿è¡ç¤ºä¾",slug:"è¿è¡ç¤ºä¾",normalizedTitle:"è¿è¡ç¤ºä¾",charIndex:3485},{level:3,title:"åå»ºå¯æ§è¡ jar",slug:"åå»ºå¯æ§è¡-jar",normalizedTitle:"åå»ºå¯æ§è¡ jar",charIndex:4145},{level:2,title:"éè¿ SPRING INITIALIZR åå»º Spring Boot é¡¹ç®",slug:"éè¿-spring-initializr-åå»º-spring-boot-é¡¹ç®",normalizedTitle:"éè¿ spring initializr åå»º spring boot é¡¹ç®",charIndex:5952},{level:3,title:"åå»ºé¡¹ç®",slug:"åå»ºé¡¹ç®",normalizedTitle:"åå»ºé¡¹ç®",charIndex:5995},{level:3,title:"é¡¹ç®è¯´æ",slug:"é¡¹ç®è¯´æ",normalizedTitle:"é¡¹ç®è¯´æ",charIndex:6250},{level:3,title:"ç¼å REST æå¡",slug:"ç¼å-rest-æå¡",normalizedTitle:"ç¼å rest æå¡",charIndex:7790},{level:3,title:"ç¼åååæµè¯ç¨ä¾",slug:"ç¼åååæµè¯ç¨ä¾",normalizedTitle:"ç¼åååæµè¯ç¨ä¾",charIndex:8129},{level:3,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:9205},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:9249}],headersStr:"Spring Boot ç®ä» Spring Boot ç³»ç»è¦æ± é¨ç½²ç¬¬ä¸ä¸ª Spring Boot é¡¹ç® ç¯å¢æ£æ¥ åå»º pom æ·»å ä¾èµ ç¼åä»£ç  è¿è¡ç¤ºä¾ åå»ºå¯æ§è¡ jar éè¿ SPRING INITIALIZR åå»º Spring Boot é¡¹ç® åå»ºé¡¹ç® é¡¹ç®è¯´æ ç¼å REST æå¡ ç¼åååæµè¯ç¨ä¾ ç¤ºä¾æºç  åèèµæ",content:'# SpringBoot ä¹å¿«éå¥é¨\n\n\n# Spring Boot ç®ä»\n\nSpring Boot å¯ä»¥è®©ä½¿ç¨èéå¸¸æ¹ä¾¿çåå»º Spring åºç¨ã\n\nSpring Boot çç®æ æ¯ï¼\n\n * ä¸ºææ Spring å¼åèæä¾æ´å¿«ä¸å¯å¹¿æ³è®¿é®çå¥é¨ä½éªã\n * å¼ç®±å³ç¨\n * æä¾ä¸ç³»åéç¨çéåè½ç¹æ§ï¼ä¾å¦åµå¥å¼æå¡ãå®å¨ãææ ãå¥åº·æ£æ¥åå¤é¨åéç½®ï¼\n * å®å¨ä¸éè¦ä»£ç çæï¼ä¹ä¸éè¦ XML éç½®ã\n\n\n# Spring Boot ç³»ç»è¦æ±\n\nSpring Boot çæå»ºå·¥å·è¦æ±ï¼\n\nBUILD TOOL   VERSION\nMaven        3.5+\nGradle       6.8.x, 6.9.x, and 7.x\n\nSpring Boot æ¯æç Servlet å®¹å¨ï¼\n\nNAME           SERVLET VERSION\nTomcat 9.0     4.0\nJetty 9.4      3.1\nJetty 10.0     4.0\nUndertow 2.0   4.0\n\n\n# é¨ç½²ç¬¬ä¸ä¸ª Spring Boot é¡¹ç®\n\n> æ¬èä»ç»å¦ä½å¼åä¸ä¸ªå°çâHello World!â web åºç¨ç¤ºä¾ï¼æ¥å±ç¤º Spring Boot çä¸äºå³é®åè½ãæä»¬ä½¿ç¨ Maven æ¥æå»ºè¿ä¸ªé¡¹ç®ï¼å ä¸ºå¤§å¤æ° IDE é½æ¯æå®ã\n\n\n# ç¯å¢æ£æ¥\n\nSpring Boot é¡¹ç®ä¾èµäº Java ç¯å¢å Maveï¼å¼å§é¡¹ç®ä¹åéè¦åæ£æ¥ä¸ä¸ç¯å¢ã\n\næ¬å°æ¯å¦å·²å®è£ Javaï¼\n\n$ java -version\njava version "1.8.0_102"\nJava(TM) SE Runtime Environment (build 1.8.0_102-b14)\nJava HotSpot(TM) 64-Bit Server VM (build 25.102-b14, mixed mode)\n\n\næ¬å°æ¯å¦å·²å®è£ Mavenï¼\n\n$ mvn -v\nApache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17T14:33:14-04:00)\nMaven home: /usr/local/Cellar/maven/3.3.9/libexec\nJava version: 1.8.0_102, vendor: Oracle Corporation\n\n\n\n# åå»º pom\n\næä»¬éè¦ä»åå»º Maven pom.xml æä»¶å¼å§ã pom.xml æ¯ Maven ç¨äºæå»ºé¡¹ç®çéç½®æä»¶ã\n\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.example</groupId>\n    <artifactId>myproject</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.6.1</version>\n    </parent>\n\n    \x3c!-- Additional lines to be added here... --\x3e\n\n</project>\n\n\nä½¿ç¨èå¯ä»¥éè¿è¿è¡ mvn package æ¥æµè¯å®\n\n\n# æ·»å ä¾èµ\n\nSpring Boot æä¾äºè®¸å¤å¯å¨å¨ï¼Startersï¼ä»¥åºå¯¹ä¸åçä½¿ç¨åºæ¯ãä½¿ç¨èå¯å° jars æ·»å å°ç±»è·¯å¾ä¸­ãæä»¬çç¤ºä¾ç¨åºå¨ POM ç parent ä½¿ç¨ spring-boot-starter-parentã spring-boot-starter-parent æ¯ä¸ä¸ªç¹æ®çå¯å¨å¨ï¼æä¾æç¨ç Maven é»è®¤å¼ãå®è¿æä¾äºä¸ä¸ªä¾èµé¡¹ççæ¬ç®¡çï¼å¯ä»¥è®©ä½¿ç¨èä½¿ç¨æ¶ä¸å¿æ¾ç¤ºæå®çæ¬ã\n\nå¶ä»å¯å¨å¨ï¼Startersï¼æä¾äºåç§éå¯¹ä¸åä½¿ç¨åºæ¯çåè½ãæ¯å¦ï¼æä»¬éè¦å¼åä¸ä¸ª Web åºç¨ç¨åºï¼å°±å¯ä»¥æ·»å äºä¸ä¸ª spring-boot-starter-web ä¾èµé¡¹ãå¨æ­¤ä¹åï¼æä»¬å¯ä»¥éè¿è¿è¡ä»¥ä¸å½ä»¤æ¥æ¥çæä»¬å½åæ¥æç maven ä¾èµï¼\n\n$ mvn dependency:tree\n\n[INFO] com.example:myproject:jar:0.0.1-SNAPSHOT\n\n\nmvn dependency:tree å½ä»¤æå°é¡¹ç®ä¾èµé¡¹çå±çº§ç»æãå¯ä»¥çå° spring-boot-starter-parent æ¬èº«æ²¡ææä¾ä»»ä½ä¾èµãè¦æ·»å å¿è¦çä¾èµï¼éè¦ç¼è¾ pom.xml å¹¶å¨ <dependencies> é¨åæ·»å  spring-boot-starter-web ä¾èµé¡¹ï¼\n\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n</dependencies>\n\n\n\n# ç¼åä»£ç \n\nè¦è¿è¡åºç¨ç¨åºï¼æä»¬éè¦åå»ºä¸ä¸ªå¯å¨ç±»ãé»è®¤æåµä¸ï¼Maven ä» src/main/java ç¼è¯æºä»£ç ï¼å æ­¤æ¨éè¦åå»ºè¯¥ç®å½ç»æï¼ç¶åæ·»å ä¸ä¸ªåä¸º src/main/java/MyApplication.java çæä»¶ä»¥åå«ä»¥ä¸ä»£ç ï¼\n\n@RestController\n@EnableAutoConfiguration\npublic class MyApplication {\n\n    @RequestMapping("/")\n    String home() {\n        return "Hello World!";\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n\n}\n\n\nè¯´æï¼\n\n@RestController æ³¨è§£åè¯ Springï¼è¿ä¸ªç±»æ¯ç¨æ¥å¤ç Rest è¯·æ±çã\n\n@RequestMapping æ³¨è§£æä¾äºâè·¯ç±âä¿¡æ¯ãå®åè¯ Spring ä»»ä½å¸¦æ / è·¯å¾ç HTTP è¯·æ±é½åºè¯¥æ å°å° home æ¹æ³ã @RestController æ³¨è§£åè¯ Spring å°ç»æå­ç¬¦ä¸²ç´æ¥åç°ç»è°ç¨èã\n\n@EnableAutoConfiguration æ³¨è§£åè¯ Spring Boot æ ¹æ®ä½ æ·»å ç jar ä¾èµå»èªå¨è£é Springã\n\n> èªå¨éç½®æ¨å¨ä¸âStartersâéåä½¿ç¨ï¼ä½è¿ä¸¤ä¸ªæ¦å¿µå¹¶æ²¡æç´æ¥èç³»ãæ¨å¯ä»¥èªç±éæ© starters ä¹å¤ç jar ä¾èµé¡¹ã Spring Boot ä»ç¶å°½åèªå¨éç½®æ¨çåºç¨ç¨åºã\n\nSpring Boot ç main æ¹æ³éè¿è°ç¨ run å§æç» Spring Boot ç SpringApplication ç±»ã SpringApplication å¼å¯¼æä»¬çåºç¨ç¨åºï¼å¯å¨ Springï¼è¿èå¯å¨èªå¨éç½®ç Tomcat Web æå¡å¨ãæä»¬éè¦å° MyApplication.class ä½ä¸ºåæ°ä¼ éç» run æ¹æ³ï¼ä»¥åè¯ SpringApplication åªä¸ªæ¯å¥å£ç±»ãè¿ä¼ é args æ°ç»ä»¥å¬å¼ä»»ä½å½ä»¤è¡åæ°ã\n\n\n# è¿è¡ç¤ºä¾\n\næ­¤æ¶ï¼æ¨çåºç¨ç¨åºåºè¯¥å¯ä»¥å·¥ä½äºãç±äºæ¨ä½¿ç¨äº spring-boot-starter-parent POMï¼å æ­¤æ¨æä¸ä¸ªæç¨çè¿è¡ç®æ ï¼å¯ç¨äºå¯å¨åºç¨ç¨åºãä»é¡¹ç®æ ¹ç®å½é®å¥ mvn spring-boot:run ä»¥å¯å¨åºç¨ç¨åºãæ¨åºè¯¥ä¼çå°ç±»ä¼¼äºä»¥ä¸åå®¹çè¾åºï¼\n\n$ mvn spring-boot:run\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::  (v2.6.1)\n....... . . .\n....... . . . (log output here)\n....... . . .\n........ Started MyApplication in 2.222 seconds (JVM running for 6.514)\n\n\nå¦ææ¨æå¼ Web æµè§å¨è®¿é® localhost:8080ï¼æ¨åºè¯¥ä¼çå°ä»¥ä¸è¾åºï¼\n\nHello World!\n\n\nè¦æ­£å¸¸éåºåºç¨ç¨åºï¼è¯·æ ctrl-cã\n\n\n# åå»ºå¯æ§è¡ jar\n\nè¦åå»ºä¸ä¸ªå¯æ§è¡ç jarï¼æä»¬éè¦å° spring-boot-maven-plugin æ·»å å°æä»¬ç pom.xml ä¸­ãä¸ºæ­¤ï¼è¯·å¨ä¾èµé¡¹é¨åä¸æ¹æå¥ä»¥ä¸è¡ï¼\n\n<build>\n    <plugins>\n        <plugin>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-maven-plugin</artifactId>\n        </plugin>\n    </plugins>\n</build>\n\n\nä¿å­ pom.xml å¹¶ä»å½ä»¤è¡è¿è¡ mvn packageï¼å¦ä¸æç¤ºï¼\n\n$ mvn package\n\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building myproject 0.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] .... ..\n[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ myproject ---\n[INFO] Building jar: /Users/developer/example/spring-boot-example/target/myproject-0.0.1-SNAPSHOT.jar\n[INFO]\n[INFO] --- spring-boot-maven-plugin:2.6.1:repackage (default) @ myproject ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n\n\nå¦ææ¨æ¥ç target ç®å½ï¼åºè¯¥ä¼çå° myproject-0.0.1-SNAPSHOT.jarãè¯¥æä»¶çå¤§å°åºçº¦ä¸º 10 MBãå¦ææ³çéé¢ï¼å¯ä»¥ä½¿ç¨ jar tvfï¼å¦ä¸ï¼\n\n$ jar tvf target/myproject-0.0.1-SNAPSHOT.jar\n\n\næ¨è¿åºè¯¥å¨ç®æ ç®å½ä¸­çå°ä¸ä¸ªæ´å°çåä¸º myproject-0.0.1-SNAPSHOT.jar.original çæä»¶ãè¿æ¯ Maven å¨ Spring Boot éæ°æåä¹ååå»ºçåå§ jar æä»¶ã\n\nè¦è¿è¡è¯¥åºç¨ç¨åºï¼è¯·ä½¿ç¨ java -jar å½ä»¤ï¼å¦ä¸æç¤ºï¼\n\n$ java -jar target/myproject-0.0.1-SNAPSHOT.jar\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::  (v2.6.1)\n....... . . .\n....... . . . (log output here)\n....... . . .\n........ Started MyApplication in 2.536 seconds (JVM running for 2.864)\n\n\nåä»¥åä¸æ ·ï¼è¦éåºåºç¨ç¨åºï¼è¯·æ ctrl-cã\n\n\n# éè¿ SPRING INITIALIZR åå»º Spring Boot é¡¹ç®\n\n\n# åå»ºé¡¹ç®\n\néè¿ SPRING INITIALIZR å·¥å·äº§çåºç¡é¡¹ç®\n\n 1. è®¿é®ï¼http://start.spring.io/\n 2. éæ©æå»ºå·¥å·Maven ProjectãSpring Boot çæ¬ 1.5.10 ä»¥åä¸äºå·¥ç¨åºæ¬ä¿¡æ¯ï¼å¯åèä¸å¾æç¤ºï¼\n\n\n\n 3. ç¹å»Generate Projectä¸è½½é¡¹ç®åç¼©å\n 4. è§£ååç¼©åï¼åä¸­å·²æ¯ä¸ä¸ªå®æ´çé¡¹ç®ã\n\nå¦æä½ ä½¿ç¨ Intellij ä½ä¸º IDEï¼é£ä¹ä½ å¯ä»¥ç´æ¥ä½¿ç¨ SPRING INITIALIZRï¼åèä¸å¾æä½ï¼\n\n\n\n\n# é¡¹ç®è¯´æ\n\néè¦æä»¶\n\n * src/main/java è·¯å¾ä¸ç Chapter1Application ç±» ï¼ç¨åºå¥å£\n * src/main/resources è·¯å¾ä¸ç application.properties ï¼é¡¹ç®éç½®æä»¶\n * src/test/java è·¯å¾ä¸ç Chapter01ApplicationTests ï¼ç¨åºæµè¯å¥å£\n\npom.xml\n\npom ä¸­æå® parent ä¸ºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ­¤é¡¹ç®ç»§æ¿äº spring-boot-starter-parent ç maven éç½®ï¼ä¸»è¦æ¯æå®äºå¸¸ç¨ä¾èµãæä»¶ççæ¬ï¼ã\n\n<parent>\n <groupId>org.springframework.boot</groupId>\n <artifactId>spring-boot-starter-parent</artifactId>\n <version>1.5.10.RELEASE</version>\n <relativePath/> \x3c!-- lookup parent from repository --\x3e\n</parent>\n\n\næ­¤å¤ï¼pom ä¸­é»è®¤å¼å¥ä¸¤ä¸ªä¾èµåï¼åä¸ä¸ªæä»¶ã\n\n<dependencies>\n <dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-web</artifactId>\n </dependency>\n\n <dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-test</artifactId>\n  <scope>test</scope>\n </dependency>\n</dependencies>\n\n<build>\n <plugins>\n  <plugin>\n   <groupId>org.springframework.boot</groupId>\n   <artifactId>spring-boot-maven-plugin</artifactId>\n  </plugin>\n </plugins>\n</build>\n\n\n * spring-boot-starter-webï¼æ ¸å¿æ¨¡åï¼åæ¬èªå¨éç½®æ¯æãæ¥å¿å YAMLã\n * spring-boot-starter-testï¼æµè¯æ¨¡åï¼åæ¬ JUnitãHamcrestãMockitoã\n * spring-boot-maven-pluginï¼spring boot æä»¶ï¼ æä¾äºä¸ç³»å spring boot ç¸å³ç maven æä½ã\n   * spring-boot:build-infoï¼çæ Actuator ä½¿ç¨çæå»ºä¿¡æ¯æä»¶ build-info.properties\n   * spring-boot:repackageï¼é»è®¤ goalãå¨ mvn package ä¹åï¼åæ¬¡æåå¯æ§è¡ç jar/warï¼åæ¶ä¿ç mvn package çæç jar/war ä¸º.origin\n   * spring-boot:runï¼è¿è¡ Spring Boot åºç¨\n   * spring-boot:startï¼å¨ mvn integration-test é¶æ®µï¼è¿è¡ Spring Boot åºç¨çå½å¨æçç®¡ç\n   * spring-boot:stopï¼å¨ mvn integration-test é¶æ®µï¼è¿è¡ Spring Boot åºç¨çå½å¨æçç®¡ç\n\n\n# ç¼å REST æå¡\n\n * åå»º package ï¼åä¸º io.github.zp.springboot.chapter1.webï¼æ ¹æ®é¡¹ç®æåµä¿®æ¹ï¼\n * åå»º HelloController ç±»ï¼åå®¹å¦ä¸ï¼\n\n@RestController\npublic class HelloController {\n\n    @RequestMapping("/hello")\n    public String index() {\n        return "Hello World";\n    }\n\n}\n\n\n * å¯å¨ä¸»ç¨åº XXXApplicationï¼æå¼æµè§å¨è®¿é®http://localhost:8080/hello ï¼å¯ä»¥çå°é¡µé¢è¾åºHello World\n\n\n# ç¼åååæµè¯ç¨ä¾\n\nå¨ XXXApplicationTests ç±»ä¸­ç¼åä¸ä¸ªç®åçååæµè¯æ¥æ¨¡æ HTTP è¯·æ±ï¼å·ä½å¦ä¸ï¼\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@SpringApplicationConfiguration(classes = MockServletContext.class)\n@WebAppConfiguration\npublic class SpringBootHelloWorldApplicationTest {\n\n\tprivate MockMvc mvc;\n\n\t@Before\n\tpublic void setUp() {\n\t\tmvc = MockMvcBuilders.standaloneSetup(new HelloController()).build();\n\t}\n\n\t@Test\n\tpublic void getHello() throws Exception {\n\t\tmvc.perform(MockMvcRequestBuilders.get("/hello").accept(MediaType.APPLICATION_JSON))\n\t\t\t\t.andExpect(status().isOk())\n\t\t\t\t.andExpect(content().string(equalTo("Hello World")));\n\t}\n\n}\n\n\nä½¿ç¨MockServletContextæ¥æå»ºä¸ä¸ªç©ºçWebApplicationContextï¼è¿æ ·æä»¬åå»ºçHelloControllerå°±å¯ä»¥å¨@Beforeå½æ°ä¸­åå»ºå¹¶ä¼ éå°MockMvcBuilders.standaloneSetupï¼ï¼å½æ°ä¸­ã\n\n * æ³¨æå¼å¥ä¸é¢åå®¹ï¼è®©statusãcontentãequalToå½æ°å¯ç¨\n\nimport static org.hamcrest.Matchers.equalTo;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\n\nè³æ­¤å·²å®æç®æ ï¼éè¿ Maven æå»ºäºä¸ä¸ªç©ºç½ Spring Boot é¡¹ç®ï¼åéè¿å¼å¥ web æ¨¡åå®ç°äºä¸ä¸ªç®åçè¯·æ±å¤çã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-web-helloworld\n\n\n# åèèµæ\n\n * Spring Boot å®æ¹ææ¡£ä¹ Getting Started',normalizedContent:'# springboot ä¹å¿«éå¥é¨\n\n\n# spring boot ç®ä»\n\nspring boot å¯ä»¥è®©ä½¿ç¨èéå¸¸æ¹ä¾¿çåå»º spring åºç¨ã\n\nspring boot çç®æ æ¯ï¼\n\n * ä¸ºææ spring å¼åèæä¾æ´å¿«ä¸å¯å¹¿æ³è®¿é®çå¥é¨ä½éªã\n * å¼ç®±å³ç¨\n * æä¾ä¸ç³»åéç¨çéåè½ç¹æ§ï¼ä¾å¦åµå¥å¼æå¡ãå®å¨ãææ ãå¥åº·æ£æ¥åå¤é¨åéç½®ï¼\n * å®å¨ä¸éè¦ä»£ç çæï¼ä¹ä¸éè¦ xml éç½®ã\n\n\n# spring boot ç³»ç»è¦æ±\n\nspring boot çæå»ºå·¥å·è¦æ±ï¼\n\nbuild tool   version\nmaven        3.5+\ngradle       6.8.x, 6.9.x, and 7.x\n\nspring boot æ¯æç servlet å®¹å¨ï¼\n\nname           servlet version\ntomcat 9.0     4.0\njetty 9.4      3.1\njetty 10.0     4.0\nundertow 2.0   4.0\n\n\n# é¨ç½²ç¬¬ä¸ä¸ª spring boot é¡¹ç®\n\n> æ¬èä»ç»å¦ä½å¼åä¸ä¸ªå°çâhello world!â web åºç¨ç¤ºä¾ï¼æ¥å±ç¤º spring boot çä¸äºå³é®åè½ãæä»¬ä½¿ç¨ maven æ¥æå»ºè¿ä¸ªé¡¹ç®ï¼å ä¸ºå¤§å¤æ° ide é½æ¯æå®ã\n\n\n# ç¯å¢æ£æ¥\n\nspring boot é¡¹ç®ä¾èµäº java ç¯å¢å maveï¼å¼å§é¡¹ç®ä¹åéè¦åæ£æ¥ä¸ä¸ç¯å¢ã\n\næ¬å°æ¯å¦å·²å®è£ javaï¼\n\n$ java -version\njava version "1.8.0_102"\njava(tm) se runtime environment (build 1.8.0_102-b14)\njava hotspot(tm) 64-bit server vm (build 25.102-b14, mixed mode)\n\n\næ¬å°æ¯å¦å·²å®è£ mavenï¼\n\n$ mvn -v\napache maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17t14:33:14-04:00)\nmaven home: /usr/local/cellar/maven/3.3.9/libexec\njava version: 1.8.0_102, vendor: oracle corporation\n\n\n\n# åå»º pom\n\næä»¬éè¦ä»åå»º maven pom.xml æä»¶å¼å§ã pom.xml æ¯ maven ç¨äºæå»ºé¡¹ç®çéç½®æä»¶ã\n\n<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://maven.apache.org/pom/4.0.0" xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://maven.apache.org/pom/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelversion>4.0.0</modelversion>\n\n    <groupid>com.example</groupid>\n    <artifactid>myproject</artifactid>\n    <version>0.0.1-snapshot</version>\n\n    <parent>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-parent</artifactid>\n        <version>2.6.1</version>\n    </parent>\n\n    \x3c!-- additional lines to be added here... --\x3e\n\n</project>\n\n\nä½¿ç¨èå¯ä»¥éè¿è¿è¡ mvn package æ¥æµè¯å®\n\n\n# æ·»å ä¾èµ\n\nspring boot æä¾äºè®¸å¤å¯å¨å¨ï¼startersï¼ä»¥åºå¯¹ä¸åçä½¿ç¨åºæ¯ãä½¿ç¨èå¯å° jars æ·»å å°ç±»è·¯å¾ä¸­ãæä»¬çç¤ºä¾ç¨åºå¨ pom ç parent ä½¿ç¨ spring-boot-starter-parentã spring-boot-starter-parent æ¯ä¸ä¸ªç¹æ®çå¯å¨å¨ï¼æä¾æç¨ç maven é»è®¤å¼ãå®è¿æä¾äºä¸ä¸ªä¾èµé¡¹ççæ¬ç®¡çï¼å¯ä»¥è®©ä½¿ç¨èä½¿ç¨æ¶ä¸å¿æ¾ç¤ºæå®çæ¬ã\n\nå¶ä»å¯å¨å¨ï¼startersï¼æä¾äºåç§éå¯¹ä¸åä½¿ç¨åºæ¯çåè½ãæ¯å¦ï¼æä»¬éè¦å¼åä¸ä¸ª web åºç¨ç¨åºï¼å°±å¯ä»¥æ·»å äºä¸ä¸ª spring-boot-starter-web ä¾èµé¡¹ãå¨æ­¤ä¹åï¼æä»¬å¯ä»¥éè¿è¿è¡ä»¥ä¸å½ä»¤æ¥æ¥çæä»¬å½åæ¥æç maven ä¾èµï¼\n\n$ mvn dependency:tree\n\n[info] com.example:myproject:jar:0.0.1-snapshot\n\n\nmvn dependency:tree å½ä»¤æå°é¡¹ç®ä¾èµé¡¹çå±çº§ç»æãå¯ä»¥çå° spring-boot-starter-parent æ¬èº«æ²¡ææä¾ä»»ä½ä¾èµãè¦æ·»å å¿è¦çä¾èµï¼éè¦ç¼è¾ pom.xml å¹¶å¨ <dependencies> é¨åæ·»å  spring-boot-starter-web ä¾èµé¡¹ï¼\n\n<dependencies>\n    <dependency>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-web</artifactid>\n    </dependency>\n</dependencies>\n\n\n\n# ç¼åä»£ç \n\nè¦è¿è¡åºç¨ç¨åºï¼æä»¬éè¦åå»ºä¸ä¸ªå¯å¨ç±»ãé»è®¤æåµä¸ï¼maven ä» src/main/java ç¼è¯æºä»£ç ï¼å æ­¤æ¨éè¦åå»ºè¯¥ç®å½ç»æï¼ç¶åæ·»å ä¸ä¸ªåä¸º src/main/java/myapplication.java çæä»¶ä»¥åå«ä»¥ä¸ä»£ç ï¼\n\n@restcontroller\n@enableautoconfiguration\npublic class myapplication {\n\n    @requestmapping("/")\n    string home() {\n        return "hello world!";\n    }\n\n    public static void main(string[] args) {\n        springapplication.run(myapplication.class, args);\n    }\n\n}\n\n\nè¯´æï¼\n\n@restcontroller æ³¨è§£åè¯ springï¼è¿ä¸ªç±»æ¯ç¨æ¥å¤ç rest è¯·æ±çã\n\n@requestmapping æ³¨è§£æä¾äºâè·¯ç±âä¿¡æ¯ãå®åè¯ spring ä»»ä½å¸¦æ / è·¯å¾ç http è¯·æ±é½åºè¯¥æ å°å° home æ¹æ³ã @restcontroller æ³¨è§£åè¯ spring å°ç»æå­ç¬¦ä¸²ç´æ¥åç°ç»è°ç¨èã\n\n@enableautoconfiguration æ³¨è§£åè¯ spring boot æ ¹æ®ä½ æ·»å ç jar ä¾èµå»èªå¨è£é springã\n\n> èªå¨éç½®æ¨å¨ä¸âstartersâéåä½¿ç¨ï¼ä½è¿ä¸¤ä¸ªæ¦å¿µå¹¶æ²¡æç´æ¥èç³»ãæ¨å¯ä»¥èªç±éæ© starters ä¹å¤ç jar ä¾èµé¡¹ã spring boot ä»ç¶å°½åèªå¨éç½®æ¨çåºç¨ç¨åºã\n\nspring boot ç main æ¹æ³éè¿è°ç¨ run å§æç» spring boot ç springapplication ç±»ã springapplication å¼å¯¼æä»¬çåºç¨ç¨åºï¼å¯å¨ springï¼è¿èå¯å¨èªå¨éç½®ç tomcat web æå¡å¨ãæä»¬éè¦å° myapplication.class ä½ä¸ºåæ°ä¼ éç» run æ¹æ³ï¼ä»¥åè¯ springapplication åªä¸ªæ¯å¥å£ç±»ãè¿ä¼ é args æ°ç»ä»¥å¬å¼ä»»ä½å½ä»¤è¡åæ°ã\n\n\n# è¿è¡ç¤ºä¾\n\næ­¤æ¶ï¼æ¨çåºç¨ç¨åºåºè¯¥å¯ä»¥å·¥ä½äºãç±äºæ¨ä½¿ç¨äº spring-boot-starter-parent pomï¼å æ­¤æ¨æä¸ä¸ªæç¨çè¿è¡ç®æ ï¼å¯ç¨äºå¯å¨åºç¨ç¨åºãä»é¡¹ç®æ ¹ç®å½é®å¥ mvn spring-boot:run ä»¥å¯å¨åºç¨ç¨åºãæ¨åºè¯¥ä¼çå°ç±»ä¼¼äºä»¥ä¸åå®¹çè¾åºï¼\n\n$ mvn spring-boot:run\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: spring boot ::  (v2.6.1)\n....... . . .\n....... . . . (log output here)\n....... . . .\n........ started myapplication in 2.222 seconds (jvm running for 6.514)\n\n\nå¦ææ¨æå¼ web æµè§å¨è®¿é® localhost:8080ï¼æ¨åºè¯¥ä¼çå°ä»¥ä¸è¾åºï¼\n\nhello world!\n\n\nè¦æ­£å¸¸éåºåºç¨ç¨åºï¼è¯·æ ctrl-cã\n\n\n# åå»ºå¯æ§è¡ jar\n\nè¦åå»ºä¸ä¸ªå¯æ§è¡ç jarï¼æä»¬éè¦å° spring-boot-maven-plugin æ·»å å°æä»¬ç pom.xml ä¸­ãä¸ºæ­¤ï¼è¯·å¨ä¾èµé¡¹é¨åä¸æ¹æå¥ä»¥ä¸è¡ï¼\n\n<build>\n    <plugins>\n        <plugin>\n            <groupid>org.springframework.boot</groupid>\n            <artifactid>spring-boot-maven-plugin</artifactid>\n        </plugin>\n    </plugins>\n</build>\n\n\nä¿å­ pom.xml å¹¶ä»å½ä»¤è¡è¿è¡ mvn packageï¼å¦ä¸æç¤ºï¼\n\n$ mvn package\n\n[info] scanning for projects...\n[info]\n[info] ------------------------------------------------------------------------\n[info] building myproject 0.0.1-snapshot\n[info] ------------------------------------------------------------------------\n[info] .... ..\n[info] --- maven-jar-plugin:2.4:jar (default-jar) @ myproject ---\n[info] building jar: /users/developer/example/spring-boot-example/target/myproject-0.0.1-snapshot.jar\n[info]\n[info] --- spring-boot-maven-plugin:2.6.1:repackage (default) @ myproject ---\n[info] ------------------------------------------------------------------------\n[info] build success\n[info] ------------------------------------------------------------------------\n\n\nå¦ææ¨æ¥ç target ç®å½ï¼åºè¯¥ä¼çå° myproject-0.0.1-snapshot.jarãè¯¥æä»¶çå¤§å°åºçº¦ä¸º 10 mbãå¦ææ³çéé¢ï¼å¯ä»¥ä½¿ç¨ jar tvfï¼å¦ä¸ï¼\n\n$ jar tvf target/myproject-0.0.1-snapshot.jar\n\n\næ¨è¿åºè¯¥å¨ç®æ ç®å½ä¸­çå°ä¸ä¸ªæ´å°çåä¸º myproject-0.0.1-snapshot.jar.original çæä»¶ãè¿æ¯ maven å¨ spring boot éæ°æåä¹ååå»ºçåå§ jar æä»¶ã\n\nè¦è¿è¡è¯¥åºç¨ç¨åºï¼è¯·ä½¿ç¨ java -jar å½ä»¤ï¼å¦ä¸æç¤ºï¼\n\n$ java -jar target/myproject-0.0.1-snapshot.jar\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: spring boot ::  (v2.6.1)\n....... . . .\n....... . . . (log output here)\n....... . . .\n........ started myapplication in 2.536 seconds (jvm running for 2.864)\n\n\nåä»¥åä¸æ ·ï¼è¦éåºåºç¨ç¨åºï¼è¯·æ ctrl-cã\n\n\n# éè¿ spring initializr åå»º spring boot é¡¹ç®\n\n\n# åå»ºé¡¹ç®\n\néè¿ spring initializr å·¥å·äº§çåºç¡é¡¹ç®\n\n 1. è®¿é®ï¼http://start.spring.io/\n 2. éæ©æå»ºå·¥å·maven projectãspring boot çæ¬ 1.5.10 ä»¥åä¸äºå·¥ç¨åºæ¬ä¿¡æ¯ï¼å¯åèä¸å¾æç¤ºï¼\n\n\n\n 3. ç¹å»generate projectä¸è½½é¡¹ç®åç¼©å\n 4. è§£ååç¼©åï¼åä¸­å·²æ¯ä¸ä¸ªå®æ´çé¡¹ç®ã\n\nå¦æä½ ä½¿ç¨ intellij ä½ä¸º ideï¼é£ä¹ä½ å¯ä»¥ç´æ¥ä½¿ç¨ spring initializrï¼åèä¸å¾æä½ï¼\n\n\n\n\n# é¡¹ç®è¯´æ\n\néè¦æä»¶\n\n * src/main/java è·¯å¾ä¸ç chapter1application ç±» ï¼ç¨åºå¥å£\n * src/main/resources è·¯å¾ä¸ç application.properties ï¼é¡¹ç®éç½®æä»¶\n * src/test/java è·¯å¾ä¸ç chapter01applicationtests ï¼ç¨åºæµè¯å¥å£\n\npom.xml\n\npom ä¸­æå® parent ä¸ºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ­¤é¡¹ç®ç»§æ¿äº spring-boot-starter-parent ç maven éç½®ï¼ä¸»è¦æ¯æå®äºå¸¸ç¨ä¾èµãæä»¶ççæ¬ï¼ã\n\n<parent>\n <groupid>org.springframework.boot</groupid>\n <artifactid>spring-boot-starter-parent</artifactid>\n <version>1.5.10.release</version>\n <relativepath/> \x3c!-- lookup parent from repository --\x3e\n</parent>\n\n\næ­¤å¤ï¼pom ä¸­é»è®¤å¼å¥ä¸¤ä¸ªä¾èµåï¼åä¸ä¸ªæä»¶ã\n\n<dependencies>\n <dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-web</artifactid>\n </dependency>\n\n <dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-test</artifactid>\n  <scope>test</scope>\n </dependency>\n</dependencies>\n\n<build>\n <plugins>\n  <plugin>\n   <groupid>org.springframework.boot</groupid>\n   <artifactid>spring-boot-maven-plugin</artifactid>\n  </plugin>\n </plugins>\n</build>\n\n\n * spring-boot-starter-webï¼æ ¸å¿æ¨¡åï¼åæ¬èªå¨éç½®æ¯æãæ¥å¿å yamlã\n * spring-boot-starter-testï¼æµè¯æ¨¡åï¼åæ¬ junitãhamcrestãmockitoã\n * spring-boot-maven-pluginï¼spring boot æä»¶ï¼ æä¾äºä¸ç³»å spring boot ç¸å³ç maven æä½ã\n   * spring-boot:build-infoï¼çæ actuator ä½¿ç¨çæå»ºä¿¡æ¯æä»¶ build-info.properties\n   * spring-boot:repackageï¼é»è®¤ goalãå¨ mvn package ä¹åï¼åæ¬¡æåå¯æ§è¡ç jar/warï¼åæ¶ä¿ç mvn package çæç jar/war ä¸º.origin\n   * spring-boot:runï¼è¿è¡ spring boot åºç¨\n   * spring-boot:startï¼å¨ mvn integration-test é¶æ®µï¼è¿è¡ spring boot åºç¨çå½å¨æçç®¡ç\n   * spring-boot:stopï¼å¨ mvn integration-test é¶æ®µï¼è¿è¡ spring boot åºç¨çå½å¨æçç®¡ç\n\n\n# ç¼å rest æå¡\n\n * åå»º package ï¼åä¸º io.github.zp.springboot.chapter1.webï¼æ ¹æ®é¡¹ç®æåµä¿®æ¹ï¼\n * åå»º hellocontroller ç±»ï¼åå®¹å¦ä¸ï¼\n\n@restcontroller\npublic class hellocontroller {\n\n    @requestmapping("/hello")\n    public string index() {\n        return "hello world";\n    }\n\n}\n\n\n * å¯å¨ä¸»ç¨åº xxxapplicationï¼æå¼æµè§å¨è®¿é®http://localhost:8080/hello ï¼å¯ä»¥çå°é¡µé¢è¾åºhello world\n\n\n# ç¼åååæµè¯ç¨ä¾\n\nå¨ xxxapplicationtests ç±»ä¸­ç¼åä¸ä¸ªç®åçååæµè¯æ¥æ¨¡æ http è¯·æ±ï¼å·ä½å¦ä¸ï¼\n\n@runwith(springjunit4classrunner.class)\n@springapplicationconfiguration(classes = mockservletcontext.class)\n@webappconfiguration\npublic class springboothelloworldapplicationtest {\n\n\tprivate mockmvc mvc;\n\n\t@before\n\tpublic void setup() {\n\t\tmvc = mockmvcbuilders.standalonesetup(new hellocontroller()).build();\n\t}\n\n\t@test\n\tpublic void gethello() throws exception {\n\t\tmvc.perform(mockmvcrequestbuilders.get("/hello").accept(mediatype.application_json))\n\t\t\t\t.andexpect(status().isok())\n\t\t\t\t.andexpect(content().string(equalto("hello world")));\n\t}\n\n}\n\n\nä½¿ç¨mockservletcontextæ¥æå»ºä¸ä¸ªç©ºçwebapplicationcontextï¼è¿æ ·æä»¬åå»ºçhellocontrollerå°±å¯ä»¥å¨@beforeå½æ°ä¸­åå»ºå¹¶ä¼ éå°mockmvcbuilders.standalonesetupï¼ï¼å½æ°ä¸­ã\n\n * æ³¨æå¼å¥ä¸é¢åå®¹ï¼è®©statusãcontentãequaltoå½æ°å¯ç¨\n\nimport static org.hamcrest.matchers.equalto;\nimport static org.springframework.test.web.servlet.result.mockmvcresultmatchers.content;\nimport static org.springframework.test.web.servlet.result.mockmvcresultmatchers.status;\n\n\nè³æ­¤å·²å®æç®æ ï¼éè¿ maven æå»ºäºä¸ä¸ªç©ºç½ spring boot é¡¹ç®ï¼åéè¿å¼å¥ web æ¨¡åå®ç°äºä¸ä¸ªç®åçè¯·æ±å¤çã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-web-helloworld\n\n\n# åèèµæ\n\n * spring boot å®æ¹ææ¡£ä¹ getting started',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹å±æ§å è½½è¯¦è§£",frontmatter:{title:"SpringBoot ä¹å±æ§å è½½è¯¦è§£",date:"2019-01-10T11:55:54.000Z",order:32,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/0fb992/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/32.SpringBoot%E4%B9%8B%E5%B1%9E%E6%80%A7%E5%8A%A0%E8%BD%BD.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/32.SpringBootä¹å±æ§å è½½.md",key:"v-5bd37d3c",path:"/pages/0fb992/",headers:[{level:2,title:"å è½½ property é¡ºåº",slug:"å è½½-property-é¡ºåº",normalizedTitle:"å è½½ property é¡ºåº",charIndex:25},{level:2,title:"éæºå±æ§",slug:"éæºå±æ§",normalizedTitle:"éæºå±æ§",charIndex:839},{level:2,title:"å½ä»¤è¡å±æ§",slug:"å½ä»¤è¡å±æ§",normalizedTitle:"å½ä»¤è¡å±æ§",charIndex:1080},{level:2,title:"Application å±æ§æä»¶",slug:"application-å±æ§æä»¶",normalizedTitle:"application å±æ§æä»¶",charIndex:1267},{level:2,title:"Profile ç¹å®å±æ§",slug:"profile-ç¹å®å±æ§",normalizedTitle:"profile ç¹å®å±æ§",charIndex:1837},{level:2,title:"å±æ§ä¸­çå ä½ç¬¦",slug:"å±æ§ä¸­çå ä½ç¬¦",normalizedTitle:"å±æ§ä¸­çå ä½ç¬¦",charIndex:2026},{level:2,title:"YAML å±æ§",slug:"yaml-å±æ§",normalizedTitle:"yaml å±æ§",charIndex:2262},{level:3,title:"è®¿é®å±æ§",slug:"è®¿é®å±æ§",normalizedTitle:"è®¿é®å±æ§",charIndex:2889},{level:3,title:"å¤ profile éç½®",slug:"å¤-profile-éç½®",normalizedTitle:"å¤ profile éç½®",charIndex:3036},{level:3,title:"YAML çç¼ºç¹",slug:"yaml-çç¼ºç¹",normalizedTitle:"yaml çç¼ºç¹",charIndex:3234},{level:2,title:"å±æ§åç¼",slug:"å±æ§åç¼",normalizedTitle:"å±æ§åç¼",charIndex:3323},{level:2,title:"å±æ§æ¾æ£ç»å®è§å",slug:"å±æ§æ¾æ£ç»å®è§å",normalizedTitle:"å±æ§æ¾æ£ç»å®è§å",charIndex:4709},{level:2,title:"å±æ§è½¬æ¢",slug:"å±æ§è½¬æ¢",normalizedTitle:"å±æ§è½¬æ¢",charIndex:4969},{level:3,title:"æ¶é´åä½è½¬æ¢",slug:"æ¶é´åä½è½¬æ¢",normalizedTitle:"æ¶é´åä½è½¬æ¢",charIndex:5158},{level:3,title:"æ°æ®å¤§å°è½¬æ¢",slug:"æ°æ®å¤§å°è½¬æ¢",normalizedTitle:"æ°æ®å¤§å°è½¬æ¢",charIndex:5978},{level:2,title:"æ ¡éªå±æ§",slug:"æ ¡éªå±æ§",normalizedTitle:"æ ¡éªå±æ§",charIndex:6650},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:7071},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:7109}],headersStr:"å è½½ property é¡ºåº éæºå±æ§ å½ä»¤è¡å±æ§ Application å±æ§æä»¶ Profile ç¹å®å±æ§ å±æ§ä¸­çå ä½ç¬¦ YAML å±æ§ è®¿é®å±æ§ å¤ profile éç½® YAML çç¼ºç¹ å±æ§åç¼ å±æ§æ¾æ£ç»å®è§å å±æ§è½¬æ¢ æ¶é´åä½è½¬æ¢ æ°æ®å¤§å°è½¬æ¢ æ ¡éªå±æ§ ç¤ºä¾æºç  åèèµæ",content:'# SpringBoot ä¹å±æ§å è½½è¯¦è§£\n\n\n# å è½½ property é¡ºåº\n\nSpring Boot å è½½ property é¡ºåºå¦ä¸ï¼\n\n 1.  Devtools å¨å±éç½® (å½ devtools è¢«æ¿æ´» ~/.spring-boot-devtools.properties).\n 2.  æµè¯ç¯å¢ä¸­ç @TestPropertySource æ³¨è§£éç½®\n 3.  æµè¯ç¯å¢ä¸­çå±æ§ propertiesï¼@SpringBootTest å æµè¯æ³¨è§£.\n 4.  å½ä»¤è¡åæ°\n 5.  SPRING_APPLICATION_JSON å±æ§\n 6.  ServletConfig åå§ååæ°\n 7.  ServletContext åå§ååæ°\n 8.  JNDI attributes from éè¿ java:comp/env éç½®ç JNDI å±æ§\n 9.  Java ç³»ç»å±æ§ (System.getProperties())\n 10. æä½ç³»ç»ç¯å¢æ¯é£é\n 11. RandomValuePropertySource å è½½ random.* å½¢å¼çå±æ§\n 12. jar åå¤ç application-{profile}.properties æ application-{profile}.yml éç½®\n 13. jar ååç application-{profile}.properties æ application-{profile}.yml éç½®\n 14. jar åå¤ç application.properties æ application.yml éç½®\n 15. jar ååç application.properties æ application.yml éç½®\n 16. @PropertySource ç»å®çéç½®\n 17. é»è®¤å±æ§ (éè¿ SpringApplication.setDefaultProperties æå®)\n\n\n# éæºå±æ§\n\nRandomValuePropertySource ç±»ç¨äºéç½®éæºå¼ã\n\nç¤ºä¾ï¼\n\nmy.secret=${random.value}\nmy.number=${random.int}\nmy.bignumber=${random.long}\nmy.uuid=${random.uuid}\nmy.number.less.than.ten=${random.int(10)}\nmy.number.in.range=${random.int[1024,65536]}\n\n\n\n# å½ä»¤è¡å±æ§\n\né»è®¤æåµä¸ï¼ SpringApplication ä¼è·å -- åæ°ï¼ä¾å¦ --server.port=9000 ï¼ï¼å¹¶å°è¿ä¸ª property æ·»å å° Spring ç Environment ä¸­ã\n\nå¦æä¸æ³å è½½å½ä»¤è¡å±æ§ï¼å¯ä»¥éè¿ SpringApplication.setAddCommandLineProperties(false) ç¦ç¨ã\n\n\n# Application å±æ§æä»¶\n\nSpringApplication ä¼èªå¨å è½½ä»¥ä¸è·¯å¾ä¸ç application.properties éç½®æä»¶ï¼å°å¶ä¸­çå±æ§è¯»å° Spring ç Environment ä¸­ã\n\n 1. å½åç®å½ç /config å­ç®å½\n 2. å½åç®å½\n 3. classpath è·¯å¾ä¸ç /config package\n 4. classpath æ ¹è·¯å¾\n\n> æ³¨ï¼\n> \n> ä»¥ä¸åè¡¨çéç½®æä»¶ä¼æ ¹æ®é¡ºåºï¼ååºçéç½®ä¼è¦çååºçéç½®ã\n> \n> ä½ å¯ä»¥éæ© YAML(yml) éç½®æä»¶æ¿æ¢ properties éç½®æä»¶ã\n\nå¦æä¸åæ¬¢ application.properties ä½ä¸ºéç½®æä»¶åï¼å¯ä»¥ä½¿ç¨ spring.config.name ç¯å¢åéæ¿æ¢ï¼\n\n$ java -jar myproject.jar --spring.config.name=myproject\n\n\nå¯ä»¥ä½¿ç¨ spring.config.location ç¯å¢åéæå®éç½®æä»¶è·¯å¾ï¼\n\n$ java -jar myproject.jar --spring.config.location=classpath:/default.properties,classpath:/override.properties\n\n\n\n# Profile ç¹å®å±æ§\n\nå¦æå®ä¹ application-{profile}.properties å½¢å¼çéç½®æä»¶ï¼å°è¢«è§ä¸º profile ç¯å¢ä¸çç¹å®éç½®ã\n\nå¯ä»¥éè¿ spring.profiles.active åæ°æ¥æ¿æ´» profileï¼å¦ææ²¡ææ¿æ´»ç profile,é»è®¤ä¼å è½½ application-default.properties ä¸­çéç½®ã\n\n\n# å±æ§ä¸­çå ä½ç¬¦\n\napplication.properties ä¸­çå¼ä¼è¢« Environment è¿æ»¤ï¼æä»¥ï¼å¯ä»¥å¼ç¨ä¹åå®ä¹çå±æ§ã\n\napp.name=MyApp\napp.description=${app.name} is a Spring Boot application\n\n\n> æ³¨ï¼ä½ å¯ä»¥ä½¿ç¨æ­¤ææ¯æ¥åå»º Spring Boot å±æ§åéãè¯·åèï¼ Section 77.4, âUse âShortâ Command Line Arguments\n\n\n# YAML å±æ§\n\nSpring æ¡æ¶æä¸¤ä¸ªç±»æ¯æå è½½ YAML æä»¶ã\n\n * YamlPropertiesFactoryBean å° YAML æä»¶çéç½®å è½½ä¸º Properties ã\n * YamlMapFactoryBean å° YAML æä»¶çéç½®å è½½ä¸º Map ã\n\nç¤ºä¾ 1\n\nenvironments:\n\tdev:\n\t\turl: http://dev.example.com\n\t\tname: Developer Setup\n\tprod:\n\t\turl: http://another.example.com\n\t\tname: My Cool App\n\n\nç­ä»·äºï¼\n\nenvironments.dev.url=http://dev.example.com\nenvironments.dev.name=Developer Setup\nenvironments.prod.url=http://another.example.com\nenvironments.prod.name=My Cool App\n\n\nYAML æ¯æåè¡¨å½¢å¼ï¼ç­ä»·äº property ä¸­ç [index] ï¼\n\nmy:\nservers:\n\t- dev.example.com\n\t- another.example.com\n\n\nç­ä»·äº\n\nmy.servers[0]=dev.example.com\nmy.servers[1]=another.example.com\n\n\n\n# è®¿é®å±æ§\n\nYamlPropertySourceLoader ç±»ä¼å° YAML éç½®è½¬åä¸º Spring Environment ç±»ä¸­ç PropertySource ãç¶åï¼ä½ å¯ä»¥å¦å properties æä»¶ä¸­çå±æ§ä¸æ ·ï¼ä½¿ç¨ @Value æ³¨è§£æ¥è®¿é® YAML ä¸­éç½®çå±æ§ã\n\n\n# å¤ profile éç½®\n\nserver:\n  address: 192.168.1.100\n---\nspring:\n  profiles: development\nserver:\n  address: 127.0.0.1\n---\nspring:\n  profiles: production & eu-central\nserver:\n  address: 192.168.1.120\n\n\n\n# YAML çç¼ºç¹\n\næ³¨ï¼YAML æ³¨è§£ä¸­çå±æ§ä¸è½éè¿ @PropertySource æ³¨è§£æ¥è®¿é®ãæä»¥ï¼å¦æä½ çé¡¹ç®ä¸­ä½¿ç¨äºä¸äºèªå®ä¹å±æ§æä»¶ï¼å»ºè®®ä¸è¦ç¨ YAMLã\n\n\n# å±æ§åç¼\n\npackage com.example;\n\nimport java.net.InetAddress;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\n\n@ConfigurationProperties(prefix="acme")\npublic class AcmeProperties {\n\n\tprivate boolean enabled;\n\n\tprivate InetAddress remoteAddress;\n\n\tprivate final Security security = new Security();\n\n\tpublic boolean isEnabled() { ... }\n\n\tpublic void setEnabled(boolean enabled) { ... }\n\n\tpublic InetAddress getRemoteAddress() { ... }\n\n\tpublic void setRemoteAddress(InetAddress remoteAddress) { ... }\n\n\tpublic Security getSecurity() { ... }\n\n\tpublic static class Security {\n\n\t\tprivate String username;\n\n\t\tprivate String password;\n\n\t\tprivate List<String> roles = new ArrayList<>(Collections.singleton("USER"));\n\n\t\tpublic String getUsername() { ... }\n\n\t\tpublic void setUsername(String username) { ... }\n\n\t\tpublic String getPassword() { ... }\n\n\t\tpublic void setPassword(String password) { ... }\n\n\t\tpublic List<String> getRoles() { ... }\n\n\t\tpublic void setRoles(List<String> roles) { ... }\n\n\t}\n}\n\n\nç¸å½äºæ¯æéç½®ä»¥ä¸å±æ§ï¼\n\n * acme.enabled\n * acme.remote-address\n * acme.security.username\n * acme.security.password\n * acme.security.roles\n\nç¶åï¼ä½ éè¦ä½¿ç¨ @EnableConfigurationProperties æ³¨è§£å°å±æ§ç±»æ³¨å¥éç½®ç±»ä¸­ã\n\n@Configuration\n@EnableConfigurationProperties(AcmeProperties.class)\npublic class MyConfiguration {\n}\n\n\n\n# å±æ§æ¾æ£ç»å®è§å\n\nSpring Boot å±æ§åç»å®æ¯è¾æ¾æ£ã\n\nä»¥ä¸å±æ§ key é½æ¯ç­ä»·çï¼\n\nPROPERTY                            NOTE\nacme.my-project.person.first-name   - åé\nacme.myProject.person.firstName     é©¼å³°å½å\nacme.my_project.person.first_name   _ åé\nACME_MYPROJECT_PERSON_FIRSTNAME     å¤§åå­æ¯\n\n\n# å±æ§è½¬æ¢\n\nå¦æéè¦ç±»åè½¬æ¢ï¼ä½ å¯ä»¥æä¾ä¸ä¸ª ConversionService bean (ä¸ä¸ªåå« conversionService ç bean) æèªå®ä¹å±æ§éç½® (ä¸ä¸ª CustomEditorConfigurer bean) æèªå®ä¹ç Converters (è¢« @ConfigurationPropertiesBinding æ³¨è§£ä¿®é¥°ç bena)ã\n\n\n# æ¶é´åä½è½¬æ¢\n\nSpring ä½¿ç¨ java.time.Duration ç±»ä»£è¡¨æ¶é´å¤§å°ï¼ä»¥ä¸åºæ¯éç¨ï¼\n\n * é¤éæå® @DurationUnit ï¼å¦åä¸ä¸ª long ä»£è¡¨çæ¶é´ä¸ºæ¯«ç§ã\n * ISO-8601 æ åæ ¼å¼ï¼ java.time.Duration çå®ç°å°±æ¯åç§æ­¤æ åï¼\n * ä½ ä¹å¯ä»¥ä½¿ç¨ä»¥ä¸æ¯æçåä½ï¼\n   * ns - çº³ç§\n   * us - å¾®ç§\n   * ms - æ¯«ç§\n   * s - ç§\n   * m - å\n   * h - æ¶\n   * d - å¤©\n\nç¤ºä¾ï¼\n\n@ConfigurationProperties("app.system")\npublic class AppSystemProperties {\n\n\t@DurationUnit(ChronoUnit.SECONDS)\n\tprivate Duration sessionTimeout = Duration.ofSeconds(30);\n\n\tprivate Duration readTimeout = Duration.ofMillis(1000);\n\n\tpublic Duration getSessionTimeout() {\n\t\treturn this.sessionTimeout;\n\t}\n\n\tpublic void setSessionTimeout(Duration sessionTimeout) {\n\t\tthis.sessionTimeout = sessionTimeout;\n\t}\n\n\tpublic Duration getReadTimeout() {\n\t\treturn this.readTimeout;\n\t}\n\n\tpublic void setReadTimeout(Duration readTimeout) {\n\t\tthis.readTimeout = readTimeout;\n\t}\n\n}\n\n\n\n# æ°æ®å¤§å°è½¬æ¢\n\nSpring ä½¿ç¨ DataSize ç±»ä»£è¡¨æ°æ®å¤§å°ï¼ä»¥ä¸åºæ¯éç¨ï¼\n\n * long å¼ï¼é»è®¤è§ä¸º byteï¼\n * ä½ ä¹å¯ä»¥ä½¿ç¨ä»¥ä¸æ¯æçåä½ï¼\n   * B\n   * KB\n   * MB\n   * GB\n   * TB\n\nç¤ºä¾ï¼\n\n@ConfigurationProperties("app.io")\npublic class AppIoProperties {\n\n\t@DataSizeUnit(DataUnit.MEGABYTES)\n\tprivate DataSize bufferSize = DataSize.ofMegabytes(2);\n\n\tprivate DataSize sizeThreshold = DataSize.ofBytes(512);\n\n\tpublic DataSize getBufferSize() {\n\t\treturn this.bufferSize;\n\t}\n\n\tpublic void setBufferSize(DataSize bufferSize) {\n\t\tthis.bufferSize = bufferSize;\n\t}\n\n\tpublic DataSize getSizeThreshold() {\n\t\treturn this.sizeThreshold;\n\t}\n\n\tpublic void setSizeThreshold(DataSize sizeThreshold) {\n\t\tthis.sizeThreshold = sizeThreshold;\n\t}\n\n}\n\n\n\n# æ ¡éªå±æ§\n\n@ConfigurationProperties(prefix="acme")\n@Validated\npublic class AcmeProperties {\n\n\t@NotNull\n\tprivate InetAddress remoteAddress;\n\n\t@Valid\n\tprivate final Security security = new Security();\n\n\t// ... getters and setters\n\n\tpublic static class Security {\n\n\t\t@NotEmpty\n\t\tpublic String username;\n\n\t\t// ... getters and setters\n\n\t}\n\n}\n\n\nä½ ä¹å¯ä»¥èªå®ä¹ä¸ä¸ªåä¸º configurationPropertiesValidator çæ ¡éªå¨ Beanãè·åè¿ä¸ª @Bean çæ¹æ³å¿é¡»å£°æä¸º staticã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-property\n\n\n# åèèµæ\n\n * Spring Boot å®æ¹ææ¡£ä¹ boot-features-external-config',normalizedContent:'# springboot ä¹å±æ§å è½½è¯¦è§£\n\n\n# å è½½ property é¡ºåº\n\nspring boot å è½½ property é¡ºåºå¦ä¸ï¼\n\n 1.  devtools å¨å±éç½® (å½ devtools è¢«æ¿æ´» ~/.spring-boot-devtools.properties).\n 2.  æµè¯ç¯å¢ä¸­ç @testpropertysource æ³¨è§£éç½®\n 3.  æµè¯ç¯å¢ä¸­çå±æ§ propertiesï¼@springboottest å æµè¯æ³¨è§£.\n 4.  å½ä»¤è¡åæ°\n 5.  spring_application_json å±æ§\n 6.  servletconfig åå§ååæ°\n 7.  servletcontext åå§ååæ°\n 8.  jndi attributes from éè¿ java:comp/env éç½®ç jndi å±æ§\n 9.  java ç³»ç»å±æ§ (system.getproperties())\n 10. æä½ç³»ç»ç¯å¢æ¯é£é\n 11. randomvaluepropertysource å è½½ random.* å½¢å¼çå±æ§\n 12. jar åå¤ç application-{profile}.properties æ application-{profile}.yml éç½®\n 13. jar ååç application-{profile}.properties æ application-{profile}.yml éç½®\n 14. jar åå¤ç application.properties æ application.yml éç½®\n 15. jar ååç application.properties æ application.yml éç½®\n 16. @propertysource ç»å®çéç½®\n 17. é»è®¤å±æ§ (éè¿ springapplication.setdefaultproperties æå®)\n\n\n# éæºå±æ§\n\nrandomvaluepropertysource ç±»ç¨äºéç½®éæºå¼ã\n\nç¤ºä¾ï¼\n\nmy.secret=${random.value}\nmy.number=${random.int}\nmy.bignumber=${random.long}\nmy.uuid=${random.uuid}\nmy.number.less.than.ten=${random.int(10)}\nmy.number.in.range=${random.int[1024,65536]}\n\n\n\n# å½ä»¤è¡å±æ§\n\né»è®¤æåµä¸ï¼ springapplication ä¼è·å -- åæ°ï¼ä¾å¦ --server.port=9000 ï¼ï¼å¹¶å°è¿ä¸ª property æ·»å å° spring ç environment ä¸­ã\n\nå¦æä¸æ³å è½½å½ä»¤è¡å±æ§ï¼å¯ä»¥éè¿ springapplication.setaddcommandlineproperties(false) ç¦ç¨ã\n\n\n# application å±æ§æä»¶\n\nspringapplication ä¼èªå¨å è½½ä»¥ä¸è·¯å¾ä¸ç application.properties éç½®æä»¶ï¼å°å¶ä¸­çå±æ§è¯»å° spring ç environment ä¸­ã\n\n 1. å½åç®å½ç /config å­ç®å½\n 2. å½åç®å½\n 3. classpath è·¯å¾ä¸ç /config package\n 4. classpath æ ¹è·¯å¾\n\n> æ³¨ï¼\n> \n> ä»¥ä¸åè¡¨çéç½®æä»¶ä¼æ ¹æ®é¡ºåºï¼ååºçéç½®ä¼è¦çååºçéç½®ã\n> \n> ä½ å¯ä»¥éæ© yaml(yml) éç½®æä»¶æ¿æ¢ properties éç½®æä»¶ã\n\nå¦æä¸åæ¬¢ application.properties ä½ä¸ºéç½®æä»¶åï¼å¯ä»¥ä½¿ç¨ spring.config.name ç¯å¢åéæ¿æ¢ï¼\n\n$ java -jar myproject.jar --spring.config.name=myproject\n\n\nå¯ä»¥ä½¿ç¨ spring.config.location ç¯å¢åéæå®éç½®æä»¶è·¯å¾ï¼\n\n$ java -jar myproject.jar --spring.config.location=classpath:/default.properties,classpath:/override.properties\n\n\n\n# profile ç¹å®å±æ§\n\nå¦æå®ä¹ application-{profile}.properties å½¢å¼çéç½®æä»¶ï¼å°è¢«è§ä¸º profile ç¯å¢ä¸çç¹å®éç½®ã\n\nå¯ä»¥éè¿ spring.profiles.active åæ°æ¥æ¿æ´» profileï¼å¦ææ²¡ææ¿æ´»ç profile,é»è®¤ä¼å è½½ application-default.properties ä¸­çéç½®ã\n\n\n# å±æ§ä¸­çå ä½ç¬¦\n\napplication.properties ä¸­çå¼ä¼è¢« environment è¿æ»¤ï¼æä»¥ï¼å¯ä»¥å¼ç¨ä¹åå®ä¹çå±æ§ã\n\napp.name=myapp\napp.description=${app.name} is a spring boot application\n\n\n> æ³¨ï¼ä½ å¯ä»¥ä½¿ç¨æ­¤ææ¯æ¥åå»º spring boot å±æ§åéãè¯·åèï¼ section 77.4, âuse âshortâ command line arguments\n\n\n# yaml å±æ§\n\nspring æ¡æ¶æä¸¤ä¸ªç±»æ¯æå è½½ yaml æä»¶ã\n\n * yamlpropertiesfactorybean å° yaml æä»¶çéç½®å è½½ä¸º properties ã\n * yamlmapfactorybean å° yaml æä»¶çéç½®å è½½ä¸º map ã\n\nç¤ºä¾ 1\n\nenvironments:\n\tdev:\n\t\turl: http://dev.example.com\n\t\tname: developer setup\n\tprod:\n\t\turl: http://another.example.com\n\t\tname: my cool app\n\n\nç­ä»·äºï¼\n\nenvironments.dev.url=http://dev.example.com\nenvironments.dev.name=developer setup\nenvironments.prod.url=http://another.example.com\nenvironments.prod.name=my cool app\n\n\nyaml æ¯æåè¡¨å½¢å¼ï¼ç­ä»·äº property ä¸­ç [index] ï¼\n\nmy:\nservers:\n\t- dev.example.com\n\t- another.example.com\n\n\nç­ä»·äº\n\nmy.servers[0]=dev.example.com\nmy.servers[1]=another.example.com\n\n\n\n# è®¿é®å±æ§\n\nyamlpropertysourceloader ç±»ä¼å° yaml éç½®è½¬åä¸º spring environment ç±»ä¸­ç propertysource ãç¶åï¼ä½ å¯ä»¥å¦å properties æä»¶ä¸­çå±æ§ä¸æ ·ï¼ä½¿ç¨ @value æ³¨è§£æ¥è®¿é® yaml ä¸­éç½®çå±æ§ã\n\n\n# å¤ profile éç½®\n\nserver:\n  address: 192.168.1.100\n---\nspring:\n  profiles: development\nserver:\n  address: 127.0.0.1\n---\nspring:\n  profiles: production & eu-central\nserver:\n  address: 192.168.1.120\n\n\n\n# yaml çç¼ºç¹\n\næ³¨ï¼yaml æ³¨è§£ä¸­çå±æ§ä¸è½éè¿ @propertysource æ³¨è§£æ¥è®¿é®ãæä»¥ï¼å¦æä½ çé¡¹ç®ä¸­ä½¿ç¨äºä¸äºèªå®ä¹å±æ§æä»¶ï¼å»ºè®®ä¸è¦ç¨ yamlã\n\n\n# å±æ§åç¼\n\npackage com.example;\n\nimport java.net.inetaddress;\nimport java.util.arraylist;\nimport java.util.collections;\nimport java.util.list;\n\nimport org.springframework.boot.context.properties.configurationproperties;\n\n@configurationproperties(prefix="acme")\npublic class acmeproperties {\n\n\tprivate boolean enabled;\n\n\tprivate inetaddress remoteaddress;\n\n\tprivate final security security = new security();\n\n\tpublic boolean isenabled() { ... }\n\n\tpublic void setenabled(boolean enabled) { ... }\n\n\tpublic inetaddress getremoteaddress() { ... }\n\n\tpublic void setremoteaddress(inetaddress remoteaddress) { ... }\n\n\tpublic security getsecurity() { ... }\n\n\tpublic static class security {\n\n\t\tprivate string username;\n\n\t\tprivate string password;\n\n\t\tprivate list<string> roles = new arraylist<>(collections.singleton("user"));\n\n\t\tpublic string getusername() { ... }\n\n\t\tpublic void setusername(string username) { ... }\n\n\t\tpublic string getpassword() { ... }\n\n\t\tpublic void setpassword(string password) { ... }\n\n\t\tpublic list<string> getroles() { ... }\n\n\t\tpublic void setroles(list<string> roles) { ... }\n\n\t}\n}\n\n\nç¸å½äºæ¯æéç½®ä»¥ä¸å±æ§ï¼\n\n * acme.enabled\n * acme.remote-address\n * acme.security.username\n * acme.security.password\n * acme.security.roles\n\nç¶åï¼ä½ éè¦ä½¿ç¨ @enableconfigurationproperties æ³¨è§£å°å±æ§ç±»æ³¨å¥éç½®ç±»ä¸­ã\n\n@configuration\n@enableconfigurationproperties(acmeproperties.class)\npublic class myconfiguration {\n}\n\n\n\n# å±æ§æ¾æ£ç»å®è§å\n\nspring boot å±æ§åç»å®æ¯è¾æ¾æ£ã\n\nä»¥ä¸å±æ§ key é½æ¯ç­ä»·çï¼\n\nproperty                            note\nacme.my-project.person.first-name   - åé\nacme.myproject.person.firstname     é©¼å³°å½å\nacme.my_project.person.first_name   _ åé\nacme_myproject_person_firstname     å¤§åå­æ¯\n\n\n# å±æ§è½¬æ¢\n\nå¦æéè¦ç±»åè½¬æ¢ï¼ä½ å¯ä»¥æä¾ä¸ä¸ª conversionservice bean (ä¸ä¸ªåå« conversionservice ç bean) æèªå®ä¹å±æ§éç½® (ä¸ä¸ª customeditorconfigurer bean) æèªå®ä¹ç converters (è¢« @configurationpropertiesbinding æ³¨è§£ä¿®é¥°ç bena)ã\n\n\n# æ¶é´åä½è½¬æ¢\n\nspring ä½¿ç¨ java.time.duration ç±»ä»£è¡¨æ¶é´å¤§å°ï¼ä»¥ä¸åºæ¯éç¨ï¼\n\n * é¤éæå® @durationunit ï¼å¦åä¸ä¸ª long ä»£è¡¨çæ¶é´ä¸ºæ¯«ç§ã\n * iso-8601 æ åæ ¼å¼ï¼ java.time.duration çå®ç°å°±æ¯åç§æ­¤æ åï¼\n * ä½ ä¹å¯ä»¥ä½¿ç¨ä»¥ä¸æ¯æçåä½ï¼\n   * ns - çº³ç§\n   * us - å¾®ç§\n   * ms - æ¯«ç§\n   * s - ç§\n   * m - å\n   * h - æ¶\n   * d - å¤©\n\nç¤ºä¾ï¼\n\n@configurationproperties("app.system")\npublic class appsystemproperties {\n\n\t@durationunit(chronounit.seconds)\n\tprivate duration sessiontimeout = duration.ofseconds(30);\n\n\tprivate duration readtimeout = duration.ofmillis(1000);\n\n\tpublic duration getsessiontimeout() {\n\t\treturn this.sessiontimeout;\n\t}\n\n\tpublic void setsessiontimeout(duration sessiontimeout) {\n\t\tthis.sessiontimeout = sessiontimeout;\n\t}\n\n\tpublic duration getreadtimeout() {\n\t\treturn this.readtimeout;\n\t}\n\n\tpublic void setreadtimeout(duration readtimeout) {\n\t\tthis.readtimeout = readtimeout;\n\t}\n\n}\n\n\n\n# æ°æ®å¤§å°è½¬æ¢\n\nspring ä½¿ç¨ datasize ç±»ä»£è¡¨æ°æ®å¤§å°ï¼ä»¥ä¸åºæ¯éç¨ï¼\n\n * long å¼ï¼é»è®¤è§ä¸º byteï¼\n * ä½ ä¹å¯ä»¥ä½¿ç¨ä»¥ä¸æ¯æçåä½ï¼\n   * b\n   * kb\n   * mb\n   * gb\n   * tb\n\nç¤ºä¾ï¼\n\n@configurationproperties("app.io")\npublic class appioproperties {\n\n\t@datasizeunit(dataunit.megabytes)\n\tprivate datasize buffersize = datasize.ofmegabytes(2);\n\n\tprivate datasize sizethreshold = datasize.ofbytes(512);\n\n\tpublic datasize getbuffersize() {\n\t\treturn this.buffersize;\n\t}\n\n\tpublic void setbuffersize(datasize buffersize) {\n\t\tthis.buffersize = buffersize;\n\t}\n\n\tpublic datasize getsizethreshold() {\n\t\treturn this.sizethreshold;\n\t}\n\n\tpublic void setsizethreshold(datasize sizethreshold) {\n\t\tthis.sizethreshold = sizethreshold;\n\t}\n\n}\n\n\n\n# æ ¡éªå±æ§\n\n@configurationproperties(prefix="acme")\n@validated\npublic class acmeproperties {\n\n\t@notnull\n\tprivate inetaddress remoteaddress;\n\n\t@valid\n\tprivate final security security = new security();\n\n\t// ... getters and setters\n\n\tpublic static class security {\n\n\t\t@notempty\n\t\tpublic string username;\n\n\t\t// ... getters and setters\n\n\t}\n\n}\n\n\nä½ ä¹å¯ä»¥èªå®ä¹ä¸ä¸ªåä¸º configurationpropertiesvalidator çæ ¡éªå¨ beanãè·åè¿ä¸ª @bean çæ¹æ³å¿é¡»å£°æä¸º staticã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-property\n\n\n# åèèµæ\n\n * spring boot å®æ¹ææ¡£ä¹ boot-features-external-config',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹ Profile",frontmatter:{title:"SpringBoot ä¹ Profile",date:"2019-11-18T14:55:01.000Z",order:33,categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/cb598e/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/33.SpringBoot%E4%B9%8BProfile.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/33.SpringBootä¹Profile.md",key:"v-ca7af3d6",path:"/pages/cb598e/",headers:[{level:2,title:"åºåç¯å¢çéç½®",slug:"åºåç¯å¢çéç½®",normalizedTitle:"åºåç¯å¢çéç½®",charIndex:129},{level:3,title:"properties éç½®",slug:"properties-éç½®",normalizedTitle:"properties éç½®",charIndex:141},{level:3,title:"yml éç½®",slug:"yml-éç½®",normalizedTitle:"yml éç½®",charIndex:441},{level:2,title:"åºåç¯å¢çä»£ç ",slug:"åºåç¯å¢çä»£ç ",normalizedTitle:"åºåç¯å¢çä»£ç ",charIndex:1110},{level:3,title:"ä¿®é¥°ç±»",slug:"ä¿®é¥°ç±»",normalizedTitle:"ä¿®é¥°ç±»",charIndex:1164},{level:3,title:"ä¿®é¥°æ³¨è§£",slug:"ä¿®é¥°æ³¨è§£",normalizedTitle:"ä¿®é¥°æ³¨è§£",charIndex:1450},{level:3,title:"ä¿®é¥°æ¹æ³",slug:"ä¿®é¥°æ¹æ³",normalizedTitle:"ä¿®é¥°æ¹æ³",charIndex:1579},{level:2,title:"æ¿æ´» profile",slug:"æ¿æ´»-profile",normalizedTitle:"æ¿æ´» profile",charIndex:393},{level:3,title:"æä»¶æ¿æ´» profile",slug:"æä»¶æ¿æ´»-profile",normalizedTitle:"æä»¶æ¿æ´» profile",charIndex:2238},{level:3,title:"main æ¹æ³æ¿æ´» profile",slug:"main-æ¹æ³æ¿æ´»-profile",normalizedTitle:"main æ¹æ³æ¿æ´» profile",charIndex:2293},{level:3,title:"jar æ¿æ´» profile",slug:"jar-æ¿æ´»-profile",normalizedTitle:"jar æ¿æ´» profile",charIndex:2347},{level:3,title:"å¨ Java ä»£ç ä¸­æ¿æ´» profile",slug:"å¨-java-ä»£ç ä¸­æ¿æ´»-profile",normalizedTitle:"å¨ java ä»£ç ä¸­æ¿æ´» profile",charIndex:2414},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:2779},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2816}],headersStr:"åºåç¯å¢çéç½® properties éç½® yml éç½® åºåç¯å¢çä»£ç  ä¿®é¥°ç±» ä¿®é¥°æ³¨è§£ ä¿®é¥°æ¹æ³ æ¿æ´» profile æä»¶æ¿æ´» profile main æ¹æ³æ¿æ´» profile jar æ¿æ´» profile å¨ Java ä»£ç ä¸­æ¿æ´» profile ç¤ºä¾æºç  åèèµæ",content:'# SpringBoot ä¹ Profile\n\n> ä¸ä¸ªåºç¨ä¸ºäºå¨ä¸åçç¯å¢ä¸å·¥ä½ï¼å¸¸å¸¸ä¼æä¸åçéç½®ï¼ä»£ç é»è¾å¤çãSpring Boot å¯¹æ­¤æä¾äºç®ä¾¿çæ¯æã\n> \n> å³é®è¯ï¼ @Profileãspring.profiles.active\n\n\n# åºåç¯å¢çéç½®\n\n\n# properties éç½®\n\nåè®¾ï¼ä¸ä¸ªåºç¨çå·¥ä½ç¯å¢æï¼devãtestãprod\n\né£ä¹ï¼æä»¬å¯ä»¥æ·»å  4 ä¸ªéç½®æä»¶ï¼\n\n * applcation.properties - å¬å±éç½®\n * application-dev.properties - å¼åç¯å¢éç½®\n * application-test.properties - æµè¯ç¯å¢éç½®\n * application-prod.properties - çäº§ç¯å¢éç½®\n\nå¨ applcation.properties æä»¶ä¸­å¯ä»¥éè¿ä»¥ä¸éç½®æ¥æ¿æ´» profileï¼\n\nspring.profiles.active = test\n\n\n\n# yml éç½®\n\nä¸ properties æä»¶ç±»ä¼¼ï¼æä»¬ä¹å¯ä»¥æ·»å  4 ä¸ªéç½®æä»¶ï¼\n\n * applcation.yml - å¬å±éç½®\n * application-dev.yml - å¼åç¯å¢éç½®\n * application-test.yml - æµè¯ç¯å¢éç½®\n * application-prod.yml - çäº§ç¯å¢éç½®\n\nå¨ applcation.yml æä»¶ä¸­å¯ä»¥éè¿ä»¥ä¸éç½®æ¥æ¿æ´» profileï¼\n\nspring:\n  profiles:\n    active: prod\n\n\næ­¤å¤ï¼yml æä»¶ä¹å¯ä»¥å¨ä¸ä¸ªæä»¶ä¸­å®æææ profile çéç½®ï¼\n\n# æ¿æ´» prod\nspring:\n  profiles:\n    active: prod\n# ä¹å¯ä»¥åæ¶æ¿æ´»å¤ä¸ª profile\n# spring.profiles.active: prod,proddb,prodlog\n---\n# dev éç½®\nspring:\n  profiles: dev\n\n# ç¥å»éç½®\n\n---\nspring:\n  profiles: test\n\n# ç¥å»éç½®\n\n---\nspring.profiles: prod\nspring.profiles.include:\n  - proddb\n  - prodlog\n\n---\nspring:\n  profiles: proddb\n\n# ç¥å»éç½®\n\n---\nspring:\n  profiles: prodlog\n# ç¥å»éç½®\n\n\næ³¨æï¼ä¸å profile ä¹é´éè¿ --- åå²\n\n\n# åºåç¯å¢çä»£ç \n\nä½¿ç¨ @Profile æ³¨è§£å¯ä»¥æå®ç±»ææ¹æ³å¨ç¹å®ç Profile ç¯å¢çæã\n\n\n# ä¿®é¥°ç±»\n\n@Configuration\n@Profile("production")\npublic class JndiDataConfig {\n\n    @Bean(destroyMethod="")\n    public DataSource dataSource() throws Exception {\n        Context ctx = new InitialContext();\n        return (DataSource) ctx.lookup("java:comp/env/jdbc/datasource");\n    }\n}\n\n\n\n# ä¿®é¥°æ³¨è§£\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Profile("production")\npublic @interface Production {\n}\n\n\n\n# ä¿®é¥°æ¹æ³\n\n@Configuration\npublic class AppConfig {\n\n    @Bean("dataSource")\n    @Profile("development")\n    public DataSource standaloneDataSource() {\n        return new EmbeddedDatabaseBuilder()\n            .setType(EmbeddedDatabaseType.HSQL)\n            .addScript("classpath:com/bank/config/sql/schema.sql")\n            .addScript("classpath:com/bank/config/sql/test-data.sql")\n            .build();\n    }\n\n    @Bean("dataSource")\n    @Profile("production")\n    public DataSource jndiDataSource() throws Exception {\n        Context ctx = new InitialContext();\n        return (DataSource) ctx.lookup("java:comp/env/jdbc/datasource");\n    }\n}\n\n\n\n# æ¿æ´» profile\n\n\n# æä»¶æ¿æ´» profile\n\nspring-boot:run -Drun.profiles=prod\n\n\n\n# main æ¹æ³æ¿æ´» profile\n\n--spring.profiles.active=prod\n\n\n\n# jar æ¿æ´» profile\n\njava -jar -Dspring.profiles.active=prod *.jar\n\n\n\n# å¨ Java ä»£ç ä¸­æ¿æ´» profile\n\nç´æ¥æå®ç¯å¢åéæ¥æ¿æ´» profileï¼\n\nSystem.setProperty("spring.profiles.active", "test");\n\n\nå¨ Spring å®¹å¨ä¸­æ¿æ´» profileï¼\n\nAnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\nctx.getEnvironment().setActiveProfiles("development");\nctx.register(SomeConfig.class, StandaloneDataConfig.class, JndiDataConfig.class);\nctx.refresh();\n\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-profile\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ Bean Definition Profiles\n * Spring Boot å®æ¹ææ¡£ä¹ boot-features-profiles',normalizedContent:'# springboot ä¹ profile\n\n> ä¸ä¸ªåºç¨ä¸ºäºå¨ä¸åçç¯å¢ä¸å·¥ä½ï¼å¸¸å¸¸ä¼æä¸åçéç½®ï¼ä»£ç é»è¾å¤çãspring boot å¯¹æ­¤æä¾äºç®ä¾¿çæ¯æã\n> \n> å³é®è¯ï¼ @profileãspring.profiles.active\n\n\n# åºåç¯å¢çéç½®\n\n\n# properties éç½®\n\nåè®¾ï¼ä¸ä¸ªåºç¨çå·¥ä½ç¯å¢æï¼devãtestãprod\n\né£ä¹ï¼æä»¬å¯ä»¥æ·»å  4 ä¸ªéç½®æä»¶ï¼\n\n * applcation.properties - å¬å±éç½®\n * application-dev.properties - å¼åç¯å¢éç½®\n * application-test.properties - æµè¯ç¯å¢éç½®\n * application-prod.properties - çäº§ç¯å¢éç½®\n\nå¨ applcation.properties æä»¶ä¸­å¯ä»¥éè¿ä»¥ä¸éç½®æ¥æ¿æ´» profileï¼\n\nspring.profiles.active = test\n\n\n\n# yml éç½®\n\nä¸ properties æä»¶ç±»ä¼¼ï¼æä»¬ä¹å¯ä»¥æ·»å  4 ä¸ªéç½®æä»¶ï¼\n\n * applcation.yml - å¬å±éç½®\n * application-dev.yml - å¼åç¯å¢éç½®\n * application-test.yml - æµè¯ç¯å¢éç½®\n * application-prod.yml - çäº§ç¯å¢éç½®\n\nå¨ applcation.yml æä»¶ä¸­å¯ä»¥éè¿ä»¥ä¸éç½®æ¥æ¿æ´» profileï¼\n\nspring:\n  profiles:\n    active: prod\n\n\næ­¤å¤ï¼yml æä»¶ä¹å¯ä»¥å¨ä¸ä¸ªæä»¶ä¸­å®æææ profile çéç½®ï¼\n\n# æ¿æ´» prod\nspring:\n  profiles:\n    active: prod\n# ä¹å¯ä»¥åæ¶æ¿æ´»å¤ä¸ª profile\n# spring.profiles.active: prod,proddb,prodlog\n---\n# dev éç½®\nspring:\n  profiles: dev\n\n# ç¥å»éç½®\n\n---\nspring:\n  profiles: test\n\n# ç¥å»éç½®\n\n---\nspring.profiles: prod\nspring.profiles.include:\n  - proddb\n  - prodlog\n\n---\nspring:\n  profiles: proddb\n\n# ç¥å»éç½®\n\n---\nspring:\n  profiles: prodlog\n# ç¥å»éç½®\n\n\næ³¨æï¼ä¸å profile ä¹é´éè¿ --- åå²\n\n\n# åºåç¯å¢çä»£ç \n\nä½¿ç¨ @profile æ³¨è§£å¯ä»¥æå®ç±»ææ¹æ³å¨ç¹å®ç profile ç¯å¢çæã\n\n\n# ä¿®é¥°ç±»\n\n@configuration\n@profile("production")\npublic class jndidataconfig {\n\n    @bean(destroymethod="")\n    public datasource datasource() throws exception {\n        context ctx = new initialcontext();\n        return (datasource) ctx.lookup("java:comp/env/jdbc/datasource");\n    }\n}\n\n\n\n# ä¿®é¥°æ³¨è§£\n\n@target(elementtype.type)\n@retention(retentionpolicy.runtime)\n@profile("production")\npublic @interface production {\n}\n\n\n\n# ä¿®é¥°æ¹æ³\n\n@configuration\npublic class appconfig {\n\n    @bean("datasource")\n    @profile("development")\n    public datasource standalonedatasource() {\n        return new embeddeddatabasebuilder()\n            .settype(embeddeddatabasetype.hsql)\n            .addscript("classpath:com/bank/config/sql/schema.sql")\n            .addscript("classpath:com/bank/config/sql/test-data.sql")\n            .build();\n    }\n\n    @bean("datasource")\n    @profile("production")\n    public datasource jndidatasource() throws exception {\n        context ctx = new initialcontext();\n        return (datasource) ctx.lookup("java:comp/env/jdbc/datasource");\n    }\n}\n\n\n\n# æ¿æ´» profile\n\n\n# æä»¶æ¿æ´» profile\n\nspring-boot:run -drun.profiles=prod\n\n\n\n# main æ¹æ³æ¿æ´» profile\n\n--spring.profiles.active=prod\n\n\n\n# jar æ¿æ´» profile\n\njava -jar -dspring.profiles.active=prod *.jar\n\n\n\n# å¨ java ä»£ç ä¸­æ¿æ´» profile\n\nç´æ¥æå®ç¯å¢åéæ¥æ¿æ´» profileï¼\n\nsystem.setproperty("spring.profiles.active", "test");\n\n\nå¨ spring å®¹å¨ä¸­æ¿æ´» profileï¼\n\nannotationconfigapplicationcontext ctx = new annotationconfigapplicationcontext();\nctx.getenvironment().setactiveprofiles("development");\nctx.register(someconfig.class, standalonedataconfig.class, jndidataconfig.class);\nctx.refresh();\n\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-profile\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ bean definition profiles\n * spring boot å®æ¹ææ¡£ä¹ boot-features-profiles',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring æ ¸å¿",frontmatter:{title:"Spring æ ¸å¿",date:"2020-02-26T23:47:47.000Z",categories:["Java","æ¡æ¶","Spring","Springæ ¸å¿"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/5e7c20/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/01.Spring%E6%A0%B8%E5%BF%83/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/README.md",key:"v-4d1c67ea",path:"/pages/5e7c20/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:99},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:453},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:632}],headersStr:"ð åå®¹ ð èµæ ðª ä¼ é",content:"# Spring æ ¸å¿\n\n> ç« èä¸»è¦éå¯¹ï¼Spring & Spring Boot æ¡æ¶çæ ¸å¿ææ¯ãå¦ï¼Spring BeanãIoCãä¾èµæ¥æ¾ãä¾èµæ³¨å¥ãAOPãæ°æ®ç»å®ãèµæºç®¡çç­ã\n\n\n# ð åå®¹\n\n * Spring Bean\n * Spring IoC\n * Spring ä¾èµæ¥æ¾\n * Spring ä¾èµæ³¨å¥\n * Spring IoC ä¾èµæ¥æº\n * Spring Bean ä½ç¨å\n * Spring Bean çå½å¨æ\n * Spring éç½®åæ°æ®\n * Spring AOP\n * Spring èµæºç®¡ç\n * Spring æ ¡éª\n * Spring æ°æ®ç»å®\n * Spring ç±»åè½¬æ¢\n * Spring EL è¡¨è¾¾å¼\n * Spring äºä»¶\n * Spring å½éå\n * Spring æ³åå¤ç\n * Spring æ³¨è§£\n * SpringBoot æç¨ä¹å¿«éå¥é¨\n * SpringBoot ä¹å±æ§å è½½\n * SpringBoot ä¹ Profile\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",normalizedContent:"# spring æ ¸å¿\n\n> ç« èä¸»è¦éå¯¹ï¼spring & spring boot æ¡æ¶çæ ¸å¿ææ¯ãå¦ï¼spring beanãiocãä¾èµæ¥æ¾ãä¾èµæ³¨å¥ãaopãæ°æ®ç»å®ãèµæºç®¡çç­ã\n\n\n# ð åå®¹\n\n * spring bean\n * spring ioc\n * spring ä¾èµæ¥æ¾\n * spring ä¾èµæ³¨å¥\n * spring ioc ä¾èµæ¥æº\n * spring bean ä½ç¨å\n * spring bean çå½å¨æ\n * spring éç½®åæ°æ®\n * spring aop\n * spring èµæºç®¡ç\n * spring æ ¡éª\n * spring æ°æ®ç»å®\n * spring ç±»åè½¬æ¢\n * spring el è¡¨è¾¾å¼\n * spring äºä»¶\n * spring å½éå\n * spring æ³åå¤ç\n * spring æ³¨è§£\n * springboot æç¨ä¹å¿«éå¥é¨\n * springboot ä¹å±æ§å è½½\n * springboot ä¹ profile\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ä¹ JDBC",frontmatter:{title:"Spring ä¹ JDBC",date:"2019-02-18T14:33:55.000Z",order:2,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","JDBC","JdbcTemplate"],permalink:"/pages/cf19fd/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/02.Spring%E4%B9%8BJDBC.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/02.Springä¹JDBC.md",key:"v-9a6a8e22",path:"/pages/cf19fd/",headers:[{level:2,title:"JDBC å¥é¨ç¤ºä¾",slug:"jdbc-å¥é¨ç¤ºä¾",normalizedTitle:"jdbc å¥é¨ç¤ºä¾",charIndex:78},{level:3,title:"å®ä¹å®ä½",slug:"å®ä¹å®ä½",normalizedTitle:"å®ä¹å®ä½",charIndex:996},{level:3,title:"å®ä¹ DAO æ¥å£",slug:"å®ä¹-dao-æ¥å£",normalizedTitle:"å®ä¹ dao æ¥å£",charIndex:1348},{level:3,title:"å®ä¹ DAO å®ç°ç±»",slug:"å®ä¹-dao-å®ç°ç±»",normalizedTitle:"å®ä¹ dao å®ç°ç±»",charIndex:2078},{level:3,title:"æµè¯ç±»",slug:"æµè¯ç±»",normalizedTitle:"æµè¯ç±»",charIndex:5742},{level:2,title:"Spring Boot JDBC",slug:"spring-boot-jdbc",normalizedTitle:"spring boot jdbc",charIndex:8153},{level:3,title:"å¼å¥ Spring Boot ä¾èµ",slug:"å¼å¥-spring-boot-ä¾èµ",normalizedTitle:"å¼å¥ spring boot ä¾èµ",charIndex:8204},{level:3,title:"éç½®æ°æ®æº",slug:"éç½®æ°æ®æº",normalizedTitle:"éç½®æ°æ®æº",charIndex:8783},{level:3,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:5742},{level:2,title:"Spring JDBC",slug:"spring-jdbc",normalizedTitle:"spring jdbc",charIndex:10623},{level:3,title:"å¼å¥ Spring ä¾èµ",slug:"å¼å¥-spring-ä¾èµ",normalizedTitle:"å¼å¥ spring ä¾èµ",charIndex:10739},{level:3,title:"åºäº JDBC é©±å¨çæ°æ®æºéç½®",slug:"åºäº-jdbc-é©±å¨çæ°æ®æºéç½®",normalizedTitle:"åºäº jdbc é©±å¨çæ°æ®æºéç½®",charIndex:11536},{level:3,title:"æµè¯",slug:"æµè¯-2",normalizedTitle:"æµè¯",charIndex:5742},{level:2,title:"JdbcTemplate API",slug:"jdbctemplate-api",normalizedTitle:"jdbctemplate api",charIndex:14871},{level:3,title:"execute æ¹æ³",slug:"execute-æ¹æ³",normalizedTitle:"execute æ¹æ³",charIndex:15360},{level:3,title:"update æ¹æ³",slug:"update-æ¹æ³",normalizedTitle:"update æ¹æ³",charIndex:15405},{level:3,title:"query æ¹æ³",slug:"query-æ¹æ³",normalizedTitle:"query æ¹æ³",charIndex:15486},{level:2,title:"SpringBoot JDBC éç½®",slug:"springboot-jdbc-éç½®",normalizedTitle:"springboot jdbc éç½®",charIndex:17896},{level:3,title:"JdbcTemplateAutoConfiguration ç±»",slug:"jdbctemplateautoconfiguration-ç±»",normalizedTitle:"jdbctemplateautoconfiguration ç±»",charIndex:17919},{level:3,title:"JdbcTemplateConfiguration ç±»",slug:"jdbctemplateconfiguration-ç±»",normalizedTitle:"jdbctemplateconfiguration ç±»",charIndex:18947},{level:3,title:"NamedParameterJdbcTemplateConfiguration ç±»",slug:"namedparameterjdbctemplateconfiguration-ç±»",normalizedTitle:"namedparameterjdbctemplateconfiguration ç±»",charIndex:19729},{level:2,title:"spring-data-jdbc",slug:"spring-data-jdbc",normalizedTitle:"spring-data-jdbc",charIndex:10643},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:20696}],headersStr:"JDBC å¥é¨ç¤ºä¾ å®ä¹å®ä½ å®ä¹ DAO æ¥å£ å®ä¹ DAO å®ç°ç±» æµè¯ç±» Spring Boot JDBC å¼å¥ Spring Boot ä¾èµ éç½®æ°æ®æº æµè¯ Spring JDBC å¼å¥ Spring ä¾èµ åºäº JDBC é©±å¨çæ°æ®æºéç½® æµè¯ JdbcTemplate API execute æ¹æ³ update æ¹æ³ query æ¹æ³ SpringBoot JDBC éç½® JdbcTemplateAutoConfiguration ç±» JdbcTemplateConfiguration ç±» NamedParameterJdbcTemplateConfiguration ç±» spring-data-jdbc åèèµæ",content:'# Spring ä¹ JDBC\n\nJDBC æ¯ Java è¯­è¨ä¸­ç¨æ¥è§èå®¢æ·ç«¯ç¨åºå¦ä½è®¿é®æ°æ®åºçåºç¨ç¨åºæ¥å£ï¼æä¾äºå¢ãå ãæ¹ãæ¥æ°æ®åºçæ¹æ³ã\n\n\n# JDBC å¥é¨ç¤ºä¾\n\nJDBC çå·¥ä½æ­¥éª¤å¤§è´å¦ä¸ï¼\n\n 1. åå»ºå®ä½ç±»ã\n 2. å£°ææ°æ®åºè¯»åæ¥å£ç DAO æ¥å£ãå®ä¹ DAO çå¥½å¤å¨äºå¯¹äºæ°æ®å±ä¸å±çä¸å¡ï¼è°ç¨ DAO æ¶ä»å³æ³¨å¯¹å¤æ´é²çè¯»åæ¹æ³ï¼èä¸èèåºå±çå·ä½æä¹åæ¹å¼ãè¿æ ·ï¼ä¾¿äºæ¿æ¢æä¹åæ¹å¼ã\n 3. åå»ºä¸ä¸ª DAO æ¥å£çå®ç°ç±»ï¼ä½¿ç¨ Spring ç JDBC æ¨¡æ¿å»å®ç°æ¥å£ã\n 4. æåï¼å®ä¹ä¸ä¸ª DAO æ¥å£çå®ç°ç±»ç JavaBeanï¼å¹¶å°æ°æ®æºæ³¨å¥è¿å»ã\n\nåè®¾ï¼æä»¬è¦éè¿ Spring + JDBC è®¿é®ä¸å¼  Mysql æ°æ®è¡¨ userï¼user è¡¨çæ°æ®ç»æå¦ä¸ï¼\n\n-- åå»ºç¨æ·è¡¨\nCREATE TABLE `user` (\n    `id`      BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT \'ID\',\n    `name`    VARCHAR(255)        NOT NULL DEFAULT \'\' COMMENT \'ç¨æ·å\',\n    `age`     INT(3)              NOT NULL DEFAULT 0 COMMENT \'å¹´é¾\',\n    `address` VARCHAR(255)        NOT NULL DEFAULT \'\' COMMENT \'å°å\',\n    `email`   VARCHAR(255)        NOT NULL DEFAULT \'\' COMMENT \'é®ä»¶\',\n    PRIMARY KEY (`id`),\n    UNIQUE (`name`)\n) COMMENT = \'ç¨æ·è¡¨\';\n\nINSERT INTO `user` (`name`, `age`, `address`, `email`)\nVALUES (\'å¼ ä¸\', 18, \'åäº¬\', \'xxx@163.com\');\nINSERT INTO `user` (`name`, `age`, `address`, `email`)\nVALUES (\'æå\', 19, \'ä¸æµ·\', \'xxx@163.com\');\n\n\n\n# å®ä¹å®ä½\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.ToString;\n\nimport java.util.Objects;\n\n@Data\n@ToString\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User {\n    private Long id;\n    private String name;\n    private Integer age;\n    private String address;\n    private String email;\n}\n\n\n\n# å®ä¹ DAO æ¥å£\n\nimport org.springframework.jdbc.core.JdbcTemplate;\n\nimport java.util.List;\n\n/**\n * user è¡¨ Dao æ¥å£\n *\n * @author <a href="mailto:forbreak@163.com">Zhang Peng</a>\n * @since 2019-11-18\n */\npublic interface UserDao {\n\n    // DML\n    // -------------------------------------------------------------------\n    void insert(User user);\n\n    void batchInsert(List<User> users);\n\n    void deleteByName(String name);\n\n    void deleteAll();\n\n    void update(User user);\n\n    Integer count();\n\n    List<User> list();\n\n    User queryByName(String name);\n\n    JdbcTemplate getJdbcTemplate();\n\n    // DDL\n    // -------------------------------------------------------------------\n    void truncate();\n\n    void recreateTable();\n\n}\n\n\n\n# å®ä¹ DAO å®ç°ç±»\n\néè¿ JdbcTemplate æ§è¡å¯¹åºæ°æ®æºç¬¦åè¯­æ³ç SQLï¼å³å¯å®æåç§æ°æ®åºè®¿é®ã\n\npackage io.github.dunwu.springboot.core.data.jdbc;\n\nimport org.springframework.dao.EmptyResultDataAccessException;\nimport org.springframework.jdbc.core.BeanPropertyRowMapper;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * user è¡¨ Dao æ¥å£å®ç°ç±»\n *\n * @author <a href="mailto:forbreak@163.com">Zhang Peng</a>\n * @since 2019-11-18\n */\n@Repository\npublic class UserDaoImpl implements UserDao {\n\n    private JdbcTemplate jdbcTemplate;\n\n    public UserDaoImpl(JdbcTemplate jdbcTemplate) {\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    @Override\n    public void insert(User user) {\n        jdbcTemplate.update("INSERT INTO user(name, age, address, email) VALUES(?, ?, ?, ?)",\n            user.getName(), user.getAge(), user.getAddress(), user.getEmail());\n    }\n\n    @Override\n    @Transactional(rollbackFor = Exception.class)\n    public void batchInsert(List<User> users) {\n        String sql = "INSERT INTO user(name, age, address, email) VALUES(?, ?, ?, ?)";\n\n        List<Object[]> params = new ArrayList<>();\n\n        users.forEach(user -> {\n            params.add(new Object[] { user.getName(), user.getAge(), user.getAddress(), user.getEmail() });\n        });\n        jdbcTemplate.batchUpdate(sql, params);\n    }\n\n    @Override\n    public void deleteByName(String name) {\n        jdbcTemplate.update("DELETE FROM user WHERE name = ?", name);\n    }\n\n    @Override\n    @Transactional(rollbackFor = Exception.class)\n    public void deleteAll() {\n        jdbcTemplate.execute("DELETE FROM user");\n    }\n\n    @Override\n    public void update(User user) {\n        jdbcTemplate.update("UPDATE user SET name=?, age=?, address=?, email=? WHERE id=?",\n            user.getName(), user.getAge(), user.getAddress(), user.getEmail(), user.getId());\n    }\n\n    @Override\n    public Integer count() {\n        try {\n            return jdbcTemplate.queryForObject("SELECT COUNT(*) FROM user", Integer.class);\n        } catch (EmptyResultDataAccessException e) {\n            return null;\n        }\n    }\n\n    @Override\n    public List<User> list() {\n        return jdbcTemplate.query("SELECT * FROM user", new BeanPropertyRowMapper<>(User.class));\n    }\n\n    @Override\n    public User queryByName(String name) {\n        try {\n            return jdbcTemplate.queryForObject("SELECT * FROM user WHERE name = ?",\n                new BeanPropertyRowMapper<>(User.class), name);\n        } catch (EmptyResultDataAccessException e) {\n            return null;\n        }\n    }\n\n    @Override\n    public JdbcTemplate getJdbcTemplate() {\n        return jdbcTemplate;\n    }\n\n    @Override\n    public void truncate() {\n        jdbcTemplate.execute("TRUNCATE TABLE user");\n    }\n\n    @Override\n    public void recreateTable() {\n        jdbcTemplate.execute("DROP TABLE IF EXISTS user");\n\n        String sqlStatement =\n            "CREATE TABLE IF NOT EXISTS user (\\n"\n                + "    id      BIGINT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT \'Id\',\\n"\n                + "    name    VARCHAR(255)         NOT NULL DEFAULT \'\' COMMENT \'ç¨æ·å\',\\n"\n                + "    age     INT(3)              NOT NULL DEFAULT 0 COMMENT \'å¹´é¾\',\\n"\n                + "    address VARCHAR(255)         NOT NULL DEFAULT \'\' COMMENT \'å°å\',\\n"\n                + "    email   VARCHAR(255)         NOT NULL DEFAULT \'\' COMMENT \'é®ä»¶\',\\n"\n                + "    PRIMARY KEY (id)\\n"\n                + ") COMMENT = \'ç¨æ·è¡¨\';";\n        jdbcTemplate.execute(sqlStatement);\n    }\n\n}\n\n\n\n# æµè¯ç±»\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.annotation.Rollback;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@Slf4j\n@Rollback\n@SpringBootTest(classes = { SpringBootDataJdbcApplication.class })\npublic class DataJdbcMysqlDataSourceTest {\n\n    @Autowired\n    private UserDao userDAO;\n\n    @BeforeEach\n    public void before() {\n        userDAO.truncate();\n    }\n\n    @Test\n    public void insert() {\n        userDAO.insert(new User("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        User linda = userDAO.queryByName("å¼ ä¸");\n        assertThat(linda).isNotNull();\n    }\n\n    @Test\n    public void batchInsert() {\n        List<User> users = new ArrayList<>();\n        users.add(new User("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new User("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n\n        userDAO.batchInsert(users);\n        int count = userDAO.count();\n        assertThat(count).isEqualTo(4);\n\n        List<User> list = userDAO.list();\n        assertThat(list).isNotEmpty().hasSize(4);\n        list.forEach(user -> {\n            log.info(user.toString());\n        });\n    }\n\n    @Test\n    public void delete() {\n        List<User> users = new ArrayList<>();\n        users.add(new User("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new User("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        userDAO.batchInsert(users);\n\n        userDAO.deleteByName("å¼ ä¸");\n        User user = userDAO.queryByName("å¼ ä¸");\n        assertThat(user).isNull();\n\n        userDAO.deleteAll();\n        List<User> list = userDAO.list();\n        assertThat(list).isEmpty();\n    }\n\n    @Test\n    public void update() {\n        userDAO.insert(new User("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        User oldUser = userDAO.queryByName("å¼ ä¸");\n        oldUser.setName("å¼ ä¸ä¸°");\n        userDAO.update(oldUser);\n        User newUser = userDAO.queryByName("å¼ ä¸ä¸°");\n        assertThat(newUser).isNotNull();\n    }\n\n}\n\n\n\n# Spring Boot JDBC\n\n> å®æ´ç¤ºä¾ï¼spring-boot-data-jdbc\n\n\n# å¼å¥ Spring Boot ä¾èµ\n\nä½ å¯ä»¥éè¿ Spring Boot å®æ¹çåå§åå¨ï¼Spring Initializrï¼éæ©éè¦çç»ä»¶æ¥åå»ºä¸ä¸ª Spring Boot å·¥ç¨ãæèï¼ç´æ¥å¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n  <parent>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-parent</artifactId>\n    <version>2.7.7</version>\n  </parent>\n\n  <dependencies>\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-data-jdbc</artifactId>\n    </dependency>\n    <dependency>\n      <groupId>mysql</groupId>\n      <artifactId>mysql-connector-java</artifactId>\n    </dependency>\n  </dependencies>\n\n\n\n# éç½®æ°æ®æº\n\nå¼å¥ä¾èµåï¼éè¦å¨ application.properties æ application.yml æä»¶ä¸­æå®æ°æ®æºéç½®ã\n\nä¸é¢æ¯ä¸ä¸ªæåºæ¬çæ°æ®æºéç½®ç¤ºä¾ï¼\n\nspring.datasource.url = jdbc:mysql://localhost:3306/spring_tutorial?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver\nspring.datasource.username = root\nspring.datasource.password = root\n\n\néè¦æ ¹æ®å®éæåµï¼æ¿æ¢ urlãusernameãpasswordã\n\n\n# æµè¯\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\nimport java.sql.Connection;\nimport javax.sql.DataSource;\n\n@Slf4j\n@SpringBootApplication\npublic class SpringBootDataJdbcApplication implements CommandLineRunner {\n\n    private final JdbcTemplate jdbcTemplate;\n\n    public SpringBootDataJdbcApplication(JdbcTemplate jdbcTemplate) {\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootDataJdbcApplication.class, args);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        DataSource dataSource = jdbcTemplate.getDataSource();\n\n        Connection connection;\n        if (dataSource != null) {\n            connection = dataSource.getConnection();\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n            return;\n        }\n\n        if (connection != null) {\n            log.info("æ°æ®æº Url: {}", connection.getMetaData().getURL());\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n        }\n    }\n\n}\n\n\nè¿è¡ main æ¹æ³åï¼æ§å¶å°ä¼è¾åºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ°æ®æºè¿æ¥æåï¼\n\n20:50:18.449 [main] [INFO ] i.g.d.s.d.SpringBootDataJdbcApplication.run - æ°æ®æº Url: jdbc:mysql://localhost:3306/spring_tutorial?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8\n\n\n\n# Spring JDBC\n\n> å®æ´ç¤ºä¾ï¼spring-data-jdbc\n\nspring-boot-starter-data-jdbc å¼å¥äº spring-jdbc ï¼å¶ JDBC ç¹æ§å°±æ¯åºäº spring-jdbcã\n\n\n# å¼å¥ Spring ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n    <dependencies>\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>druid</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-context-support</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-jdbc</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-tx</artifactId>\n        </dependency>\n    </dependencies>\n</project>\n\n\n\n# åºäº JDBC é©±å¨çæ°æ®æºéç½®\n\nä¸é¢æ¯ä¸ä¸ª mysql ç JDBC æ°æ®æºéç½®å®ä¾ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xmlns:jdbc="http://www.springframework.org/schema/jdbc"\n    xmlns="http://www.springframework.org/schema/beans"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans.xsd\n            http://www.springframework.org/schema/context\n            http://www.springframework.org/schema/context/spring-context.xsd\n            http://www.springframework.org/schema/jdbc\n            http://www.springframework.org/schema/jdbc/spring-jdbc.xsd">\n\n    \x3c!-- å¼å¥éç½®æä»¶ --\x3e\n    <context:property-placeholder location="classpath:properties/mysql.properties" />\n\n    \x3c!-- ä½¿ç¨JDBCé©±å¨çæ°æ®æº --\x3e\n    \x3c!-- (1)å¨æ¯ä¸ªè¿æ¥è¯·æ±æ¶é½ä¼è¿åä¸ä¸ªæ°å»ºçè¿æ¥ãæ§è½ä¸é« --\x3e\n    <bean id="dataSource1" class="org.springframework.jdbc.datasource.DriverManagerDataSource">\n        <property name="driverClassName" value="${jdbc.driver}" />\n        <property name="url" value="${jdbc.url}" />\n        <property name="username" value="${jdbc.username}" />\n        <property name="password" value="${jdbc.password}" />\n    </bean>\n\n    \x3c!-- (2)å¨æ¯ä¸ªè¿æ¥è¯·æ±æ¶é½ä¼è¿ååä¸ä¸ªè¿æ¥ãä¸éç¨äºå¤çº¿ç¨ --\x3e\n    <bean id="dataSource2" class="org.springframework.jdbc.datasource.SingleConnectionDataSource">\n        <property name="driverClassName" value="${jdbc.driver}" />\n        <property name="url" value="${jdbc.url}" />\n        <property name="username" value="${jdbc.username}" />\n        <property name="password" value="${jdbc.password}" />\n    </bean>\n\n    \x3c!-- JDBCæ¨¡æ¿ --\x3e\n    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">\n        <constructor-arg ref="dataSource1" />\n    </bean>\n    <bean id="userDao" class="io.github.dunwu.springboot.data.jdbc.UserDaoImpl">\n        <constructor-arg ref="jdbcTemplate" />\n    </bean>\n\n    \x3c!-- åå§åæ°æ®è¡¨ç»æ --\x3e\n    <jdbc:initialize-database data-source="dataSource1" ignore-failures="ALL">\n        <jdbc:script location="classpath:sql/schema.sql" />\n        <jdbc:script location="classpath:sql/data.sql" />\n    </jdbc:initialize-database>\n</beans>\n\n\n\n# æµè¯\n\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n\nimport java.io.IOException;\nimport java.sql.SQLException;\n\n@SuppressWarnings("all")\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { "classpath:data/spring-mysql.xml" })\npublic class MysqlJdbcTest {\n\n    @Autowired\n    private ApplicationContext ctx;\n\n    @Before\n    public void before() {\n        ctx = JdbcDemo.getMysqlApplicationContext();\n    }\n\n    @Test\n    public void testExecJdbcOper() throws SQLException, IOException {\n        UserDao userDao = (UserDaoImpl) ctx.getBean("userDao");\n        JdbcDemo.execJdbcOper(userDao);\n    }\n\n    @After\n    public void after() {\n        ((ClassPathXmlApplicationContext) ctx).close();\n    }\n\n}\n\n\n\n# JdbcTemplate API\n\nSpring å°æ°æ®è®¿é®çæ ·æ¿å¼ä»£ç æåå°æ¨¡æ¿ç±»ä¸­ãSpring æä¾äº 3 ä¸ª JDBC æ¨¡æ¿ç±»ï¼\n\n * JdbcTemplateï¼æåºæ¬ç Spring JDBC æ¨¡æ¿ï¼è¿ä¸ªæ¨¡æ¿æ¯ææç®åç JDBC æ°æ®åºè®¿é®åè½ä»¥åç®åçç´¢å¼åæ°æ¥è¯¢ã\n * SimpleJdbcTemplateï¼æ¹æ¨¡æ¿ç±»å©ç¨ Java 5 çä¸äºç¹æ§ï¼å¦èªå¨è£ç®±ãæ³åä»¥åå¯ååæ°åè¡¨æ¥ç®å JDBC æ¨¡æ¿çä½¿ç¨ã\n * NamedParameterJdbcTemplateï¼ä½¿ç¨è¯¥æ¨¡æ¿ç±»æ§è¡æ¥è¯¢æ¶ï¼å¯ä»¥å°æ¥è¯¢å¼ä»¥å½ååæ°çå½¢å¼ç»å®å° SQL ä¸­ï¼èä¸æ¯ä½¿ç¨ç®åçç´¢å¼åæ°ã\n\nspring-jdbc ææ ¸å¿ç API æ çå°±æ¯ JdbcTemplateï¼å¯ä»¥è¯´ææç JDBC æ°æ®è®¿é®ï¼å ä¹é½æ¯å´ç»çè¿ä¸ªç±»å»å·¥ä½çãSpring å¯¹æ°æ®åºçæä½å¨ Jdbc å±é¢åäºæ·±å±æ¬¡çå°è£ï¼å©ç¨ä¾èµæ³¨å¥ï¼ææ°æ®æºéç½®è£éå° JdbcTemplate ä¸­ï¼åç± JdbcTemplate è´è´£å·ä½çæ°æ®è®¿é®ã\n\nJdbcTemplate ä¸»è¦æä¾ä»¥ä¸å ç±»æ¹æ³ï¼\n\n * execute æ¹æ³ï¼å¯ä»¥ç¨äºæ§è¡ä»»ä½ SQL è¯­å¥ï¼ä¸è¬ç¨äºæ§è¡ DDL è¯­å¥ï¼\n * update æ¹æ³å batchUpdate æ¹æ³ï¼update æ¹æ³ç¨äºæ§è¡æ°å¢ãä¿®æ¹ãå é¤ç­è¯­å¥ï¼batchUpdate æ¹æ³ç¨äºæ§è¡æ¹å¤çç¸å³è¯­å¥ï¼\n * query æ¹æ³å queryForXXX æ¹æ³ï¼ç¨äºæ§è¡æ¥è¯¢ç¸å³è¯­å¥ï¼\n * call æ¹æ³ï¼ç¨äºæ§è¡å­å¨è¿ç¨ãå½æ°ç¸å³è¯­å¥ã\n\nä¸ºäºæ¹ä¾¿æ¼ç¤ºï¼ä»¥ä¸å¢å æ¹æ¥æä½é½å´ç»ä¸ä¸ªåä¸º user çè¡¨ï¼è¯¥è¡¨çä¸»é® id æ¯èªå¢åºåï¼è¿è¡ï¼è¯¥è¡¨çæ°æ®å®ä½å¦ä¸ï¼\n\npublic class User {\n    private Integer id;\n    private String name;\n    private Integer age;\n\n    // çç¥ getter/setter\n}\n\n\næ°æ®å®ä½åªè¦æ¯ä¸ä¸ªçº¯ç²¹ç Java Bean å³å¯ï¼æ éä»»ä½æ³¨è§£ä¿®é¥°ã\n\n\n# execute æ¹æ³\n\nä½¿ç¨ execute æ§è¡ DDL è¯­å¥ï¼åå»ºä¸ä¸ªåä¸º test çæ°æ®åºï¼å¹¶å¨æ­¤æ°æ®åºä¸æ°å»ºä¸ä¸ªåä¸º user çè¡¨ã\n\npublic void recreateTable() {\n    jdbcTemplate.execute("DROP DATABASE IF EXISTS test");\n    jdbcTemplate.execute("CREATE DATABASE test");\n    jdbcTemplate.execute("USE test");\n    jdbcTemplate.execute("DROP TABLE if EXISTS user");\n    jdbcTemplate.execute("DROP TABLE if EXISTS user");\n    // @formatter:off\n    StringBuilder sb = new StringBuilder();\n    sb.append("CREATE TABLE user (id int (10) unsigned NOT NULL AUTO_INCREMENT,\\n")\n        .append("name varchar (64) NOT NULL DEFAULT \'\',\\n")\n        .append("age tinyint (3) NOT NULL DEFAULT 0,\\n")\n        .append("PRIMARY KEY (ID));\\n");\n    // @formatter:on\n    jdbcTemplate.execute(sb.toString());\n}\n\n\n\n# update æ¹æ³\n\næ°å¢æ°æ®\n\npublic void insert(String name, Integer age) {\n    jdbcTemplate.update("INSERT INTO user(name, age) VALUES(?, ?)", name, age);\n}\n\n\nå é¤æ°æ®\n\npublic void delete(String name) {\n    jdbcTemplate.update("DELETE FROM user WHERE name = ?", name);\n}\n\n\nä¿®æ¹æ°æ®\n\npublic void update(User user) {\n    jdbcTemplate.update("UPDATE USER SET name=?, age=? WHERE id=?", user.getName(), user.getAge(), user.getId());\n}\n\n\næ¹å¤ç\n\npublic void batchInsert(List<User> users) {\n    String sql = "INSERT INTO user(name, age) VALUES(?, ?)";\n\n    List<Object[]> params = new ArrayList<>();\n\n    users.forEach(item -> {\n        params.add(new Object[] {item.getName(), item.getAge()});\n    });\n    jdbcTemplate.batchUpdate(sql, params);\n}\n\n\n\n# query æ¹æ³\n\næ¥åä¸ªå¯¹è±¡\n\npublic User queryByName(String name) {\n    try {\n        return jdbcTemplate\n            .queryForObject("SELECT * FROM user WHERE name = ?", new BeanPropertyRowMapper<>(User.class), name);\n    } catch (EmptyResultDataAccessException e) {\n        return null;\n    }\n}\n\n\næ¥å¤ä¸ªå¯¹è±¡\n\npublic List<User> list() {\n    return jdbcTemplate.query("select * from USER", new BeanPropertyRowMapper(User.class));\n}\n\n\nè·åæä¸ªè®°å½æåæè countãavgãsum ç­å½æ°è¿åå¯ä¸å¼\n\npublic Integer count() {\n    try {\n        return jdbcTemplate.queryForObject("SELECT COUNT(*) FROM user", Integer.class);\n    } catch (EmptyResultDataAccessException e) {\n        return null;\n    }\n}\n\n\n\n# SpringBoot JDBC éç½®\n\n\n# JdbcTemplateAutoConfiguration ç±»\n\nJdbcTemplateAutoConfiguration æ¯ JdbcTemplate èªå¨éç½®ç±»ï¼å®è´è´£å®ä¾å JdbcTemplateã\n\n@Configuration(proxyBeanMethods = false)\n@ConditionalOnClass({ DataSource.class, JdbcTemplate.class })\n@ConditionalOnSingleCandidate(DataSource.class)\n@AutoConfigureAfter(DataSourceAutoConfiguration.class)\n@EnableConfigurationProperties(JdbcProperties.class)\n@Import({ JdbcTemplateConfiguration.class, NamedParameterJdbcTemplateConfiguration.class })\npublic class JdbcTemplateAutoConfiguration {\n\n}\n\n\nJdbcTemplateAutoConfiguration ç±»çæºç è§£è¯»ï¼\n\n * @AutoConfigureAfter(DataSourceAutoConfiguration.class) è¡¨æ JdbcTemplateAutoConfiguration å¿é¡»å¨ DataSourceAutoConfiguration æ§è¡å®ä¹åæå¼å§å·¥ä½ï¼è¿æå³çï¼JdbcTemplate çåå§åå¿é¡»å¨ DataSource åå§åä¹åã\n * JdbcProperties æ¯ JdbcTemplateAutoConfiguration çéç½®éé¡¹ç±»ï¼åè®¸ä½¿ç¨èéè¿è®¾ç½®éé¡¹æ§å¶ JdbcTemplate åå§åè¡ä¸ºã\n * @Import({ JdbcTemplateConfiguration.class, NamedParameterJdbcTemplateConfiguration.class }) è¡¨æå¼å¥ JdbcTemplateConfigurationãNamedParameterJdbcTemplateConfiguration ä¸¤ä¸ªéç½®ç±»ï¼å·ä½çå®ä¾å JdbcTemplate çå·¥ä½ä¹æ¯æ¾å¨è¿ä¸¤ä¸ªéç½®ä¸­å®æã\n\n\n# JdbcTemplateConfiguration ç±»\n\nJdbcTemplateConfiguration æºç å¦ä¸ï¼\n\n@Configuration(proxyBeanMethods = false)\n@ConditionalOnMissingBean(JdbcOperations.class)\nclass JdbcTemplateConfiguration {\n\n\t@Bean\n\t@Primary\n\tJdbcTemplate jdbcTemplate(DataSource dataSource, JdbcProperties properties) {\n\t\tJdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n\t\tJdbcProperties.Template template = properties.getTemplate();\n\t\tjdbcTemplate.setFetchSize(template.getFetchSize());\n\t\tjdbcTemplate.setMaxRows(template.getMaxRows());\n\t\tif (template.getQueryTimeout() != null) {\n\t\t\tjdbcTemplate.setQueryTimeout((int) template.getQueryTimeout().getSeconds());\n\t\t}\n\t\treturn jdbcTemplate;\n\t}\n\n}\n\n\nJdbcTemplateConfiguration æºç è§£è¯»ï¼JdbcTemplateConfiguration ä¸­æ ¹æ® DataSource å JdbcProperties å®ä¾åäºä¸ä¸ª JdbcTemplateã\n\n\n# NamedParameterJdbcTemplateConfiguration ç±»\n\nNamedParameterJdbcTemplateConfiguration æºç å¦ä¸ï¼\n\n@Configuration(proxyBeanMethods = false)\n@ConditionalOnSingleCandidate(JdbcTemplate.class)\n@ConditionalOnMissingBean(NamedParameterJdbcOperations.class)\nclass NamedParameterJdbcTemplateConfiguration {\n\n\t@Bean\n\t@Primary\n\tNamedParameterJdbcTemplate namedParameterJdbcTemplate(JdbcTemplate jdbcTemplate) {\n\t\treturn new NamedParameterJdbcTemplate(jdbcTemplate);\n\t}\n\n}\n\n\nNamedParameterJdbcTemplateConfiguration æºç è§£è¯»ï¼NamedParameterJdbcTemplateConfiguration ä¸­æ ¹æ® JdbcTemplate å®ä¾åäºä¸ä¸ª NamedParameterJdbcTemplateã\n\n\n# spring-data-jdbc\n\nSpring Data é¡¹ç®åå«äºå¯¹ JDBC çå­å¨åºæ¯æï¼å¹¶å°èªå¨ä¸º CrudRepository ä¸çæ¹æ³çæ SQLãå¯¹äºæ´é«çº§çæ¥è¯¢ï¼æä¾äº @Query æ³¨è§£ã\n\nå½ classpath ä¸å­å¨å¿è¦çä¾èµé¡¹æ¶ï¼Spring Boot å°èªå¨éç½® Spring Data ç JDBC å­å¨åºãå®ä»¬å¯ä»¥éè¿ spring-boot-starter-data-jdbc çåä¸ä¾èµé¡¹æ·»å å°é¡¹ç®ä¸­ãå¦æå¿è¦ï¼å¯ä»¥éè¿å° @EnableJdbcRepositories æ¹æ³¨æ JdbcConfiguration å­ç±»æ·»å å°åºç¨ç¨åºæ¥æ§å¶ Spring Data JDBC çéç½®ã\n\n> æ´å¤ Spring Data JDBC ç»èï¼å¯ä»¥åè Spring Data JDBC å®æ¹ææ¡£ã\n\n\n# åèèµæ\n\n * Spring å®ç½\n * Spring Framework å®æ¹ææ¡£\n * Spring Boot å®æ¹ææ¡£',normalizedContent:'# spring ä¹ jdbc\n\njdbc æ¯ java è¯­è¨ä¸­ç¨æ¥è§èå®¢æ·ç«¯ç¨åºå¦ä½è®¿é®æ°æ®åºçåºç¨ç¨åºæ¥å£ï¼æä¾äºå¢ãå ãæ¹ãæ¥æ°æ®åºçæ¹æ³ã\n\n\n# jdbc å¥é¨ç¤ºä¾\n\njdbc çå·¥ä½æ­¥éª¤å¤§è´å¦ä¸ï¼\n\n 1. åå»ºå®ä½ç±»ã\n 2. å£°ææ°æ®åºè¯»åæ¥å£ç dao æ¥å£ãå®ä¹ dao çå¥½å¤å¨äºå¯¹äºæ°æ®å±ä¸å±çä¸å¡ï¼è°ç¨ dao æ¶ä»å³æ³¨å¯¹å¤æ´é²çè¯»åæ¹æ³ï¼èä¸èèåºå±çå·ä½æä¹åæ¹å¼ãè¿æ ·ï¼ä¾¿äºæ¿æ¢æä¹åæ¹å¼ã\n 3. åå»ºä¸ä¸ª dao æ¥å£çå®ç°ç±»ï¼ä½¿ç¨ spring ç jdbc æ¨¡æ¿å»å®ç°æ¥å£ã\n 4. æåï¼å®ä¹ä¸ä¸ª dao æ¥å£çå®ç°ç±»ç javabeanï¼å¹¶å°æ°æ®æºæ³¨å¥è¿å»ã\n\nåè®¾ï¼æä»¬è¦éè¿ spring + jdbc è®¿é®ä¸å¼  mysql æ°æ®è¡¨ userï¼user è¡¨çæ°æ®ç»æå¦ä¸ï¼\n\n-- åå»ºç¨æ·è¡¨\ncreate table `user` (\n    `id`      bigint(20) unsigned not null auto_increment comment \'id\',\n    `name`    varchar(255)        not null default \'\' comment \'ç¨æ·å\',\n    `age`     int(3)              not null default 0 comment \'å¹´é¾\',\n    `address` varchar(255)        not null default \'\' comment \'å°å\',\n    `email`   varchar(255)        not null default \'\' comment \'é®ä»¶\',\n    primary key (`id`),\n    unique (`name`)\n) comment = \'ç¨æ·è¡¨\';\n\ninsert into `user` (`name`, `age`, `address`, `email`)\nvalues (\'å¼ ä¸\', 18, \'åäº¬\', \'xxx@163.com\');\ninsert into `user` (`name`, `age`, `address`, `email`)\nvalues (\'æå\', 19, \'ä¸æµ·\', \'xxx@163.com\');\n\n\n\n# å®ä¹å®ä½\n\nimport lombok.allargsconstructor;\nimport lombok.data;\nimport lombok.noargsconstructor;\nimport lombok.tostring;\n\nimport java.util.objects;\n\n@data\n@tostring\n@noargsconstructor\n@allargsconstructor\npublic class user {\n    private long id;\n    private string name;\n    private integer age;\n    private string address;\n    private string email;\n}\n\n\n\n# å®ä¹ dao æ¥å£\n\nimport org.springframework.jdbc.core.jdbctemplate;\n\nimport java.util.list;\n\n/**\n * user è¡¨ dao æ¥å£\n *\n * @author <a href="mailto:forbreak@163.com">zhang peng</a>\n * @since 2019-11-18\n */\npublic interface userdao {\n\n    // dml\n    // -------------------------------------------------------------------\n    void insert(user user);\n\n    void batchinsert(list<user> users);\n\n    void deletebyname(string name);\n\n    void deleteall();\n\n    void update(user user);\n\n    integer count();\n\n    list<user> list();\n\n    user querybyname(string name);\n\n    jdbctemplate getjdbctemplate();\n\n    // ddl\n    // -------------------------------------------------------------------\n    void truncate();\n\n    void recreatetable();\n\n}\n\n\n\n# å®ä¹ dao å®ç°ç±»\n\néè¿ jdbctemplate æ§è¡å¯¹åºæ°æ®æºç¬¦åè¯­æ³ç sqlï¼å³å¯å®æåç§æ°æ®åºè®¿é®ã\n\npackage io.github.dunwu.springboot.core.data.jdbc;\n\nimport org.springframework.dao.emptyresultdataaccessexception;\nimport org.springframework.jdbc.core.beanpropertyrowmapper;\nimport org.springframework.jdbc.core.jdbctemplate;\nimport org.springframework.stereotype.repository;\nimport org.springframework.transaction.annotation.transactional;\n\nimport java.util.arraylist;\nimport java.util.list;\n\n/**\n * user è¡¨ dao æ¥å£å®ç°ç±»\n *\n * @author <a href="mailto:forbreak@163.com">zhang peng</a>\n * @since 2019-11-18\n */\n@repository\npublic class userdaoimpl implements userdao {\n\n    private jdbctemplate jdbctemplate;\n\n    public userdaoimpl(jdbctemplate jdbctemplate) {\n        this.jdbctemplate = jdbctemplate;\n    }\n\n    @override\n    public void insert(user user) {\n        jdbctemplate.update("insert into user(name, age, address, email) values(?, ?, ?, ?)",\n            user.getname(), user.getage(), user.getaddress(), user.getemail());\n    }\n\n    @override\n    @transactional(rollbackfor = exception.class)\n    public void batchinsert(list<user> users) {\n        string sql = "insert into user(name, age, address, email) values(?, ?, ?, ?)";\n\n        list<object[]> params = new arraylist<>();\n\n        users.foreach(user -> {\n            params.add(new object[] { user.getname(), user.getage(), user.getaddress(), user.getemail() });\n        });\n        jdbctemplate.batchupdate(sql, params);\n    }\n\n    @override\n    public void deletebyname(string name) {\n        jdbctemplate.update("delete from user where name = ?", name);\n    }\n\n    @override\n    @transactional(rollbackfor = exception.class)\n    public void deleteall() {\n        jdbctemplate.execute("delete from user");\n    }\n\n    @override\n    public void update(user user) {\n        jdbctemplate.update("update user set name=?, age=?, address=?, email=? where id=?",\n            user.getname(), user.getage(), user.getaddress(), user.getemail(), user.getid());\n    }\n\n    @override\n    public integer count() {\n        try {\n            return jdbctemplate.queryforobject("select count(*) from user", integer.class);\n        } catch (emptyresultdataaccessexception e) {\n            return null;\n        }\n    }\n\n    @override\n    public list<user> list() {\n        return jdbctemplate.query("select * from user", new beanpropertyrowmapper<>(user.class));\n    }\n\n    @override\n    public user querybyname(string name) {\n        try {\n            return jdbctemplate.queryforobject("select * from user where name = ?",\n                new beanpropertyrowmapper<>(user.class), name);\n        } catch (emptyresultdataaccessexception e) {\n            return null;\n        }\n    }\n\n    @override\n    public jdbctemplate getjdbctemplate() {\n        return jdbctemplate;\n    }\n\n    @override\n    public void truncate() {\n        jdbctemplate.execute("truncate table user");\n    }\n\n    @override\n    public void recreatetable() {\n        jdbctemplate.execute("drop table if exists user");\n\n        string sqlstatement =\n            "create table if not exists user (\\n"\n                + "    id      bigint(10) unsigned not null auto_increment comment \'id\',\\n"\n                + "    name    varchar(255)         not null default \'\' comment \'ç¨æ·å\',\\n"\n                + "    age     int(3)              not null default 0 comment \'å¹´é¾\',\\n"\n                + "    address varchar(255)         not null default \'\' comment \'å°å\',\\n"\n                + "    email   varchar(255)         not null default \'\' comment \'é®ä»¶\',\\n"\n                + "    primary key (id)\\n"\n                + ") comment = \'ç¨æ·è¡¨\';";\n        jdbctemplate.execute(sqlstatement);\n    }\n\n}\n\n\n\n# æµè¯ç±»\n\nimport lombok.extern.slf4j.slf4j;\nimport org.junit.jupiter.api.beforeeach;\nimport org.junit.jupiter.api.test;\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.boot.test.context.springboottest;\nimport org.springframework.test.annotation.rollback;\n\nimport java.util.arraylist;\nimport java.util.list;\n\nimport static org.assertj.core.api.assertions.assertthat;\n\n@slf4j\n@rollback\n@springboottest(classes = { springbootdatajdbcapplication.class })\npublic class datajdbcmysqldatasourcetest {\n\n    @autowired\n    private userdao userdao;\n\n    @beforeeach\n    public void before() {\n        userdao.truncate();\n    }\n\n    @test\n    public void insert() {\n        userdao.insert(new user("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        user linda = userdao.querybyname("å¼ ä¸");\n        assertthat(linda).isnotnull();\n    }\n\n    @test\n    public void batchinsert() {\n        list<user> users = new arraylist<>();\n        users.add(new user("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new user("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n\n        userdao.batchinsert(users);\n        int count = userdao.count();\n        assertthat(count).isequalto(4);\n\n        list<user> list = userdao.list();\n        assertthat(list).isnotempty().hassize(4);\n        list.foreach(user -> {\n            log.info(user.tostring());\n        });\n    }\n\n    @test\n    public void delete() {\n        list<user> users = new arraylist<>();\n        users.add(new user("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new user("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        userdao.batchinsert(users);\n\n        userdao.deletebyname("å¼ ä¸");\n        user user = userdao.querybyname("å¼ ä¸");\n        assertthat(user).isnull();\n\n        userdao.deleteall();\n        list<user> list = userdao.list();\n        assertthat(list).isempty();\n    }\n\n    @test\n    public void update() {\n        userdao.insert(new user("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        user olduser = userdao.querybyname("å¼ ä¸");\n        olduser.setname("å¼ ä¸ä¸°");\n        userdao.update(olduser);\n        user newuser = userdao.querybyname("å¼ ä¸ä¸°");\n        assertthat(newuser).isnotnull();\n    }\n\n}\n\n\n\n# spring boot jdbc\n\n> å®æ´ç¤ºä¾ï¼spring-boot-data-jdbc\n\n\n# å¼å¥ spring boot ä¾èµ\n\nä½ å¯ä»¥éè¿ spring boot å®æ¹çåå§åå¨ï¼spring initializrï¼éæ©éè¦çç»ä»¶æ¥åå»ºä¸ä¸ª spring boot å·¥ç¨ãæèï¼ç´æ¥å¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n  <parent>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-parent</artifactid>\n    <version>2.7.7</version>\n  </parent>\n\n  <dependencies>\n    <dependency>\n      <groupid>org.springframework.boot</groupid>\n      <artifactid>spring-boot-starter-data-jdbc</artifactid>\n    </dependency>\n    <dependency>\n      <groupid>mysql</groupid>\n      <artifactid>mysql-connector-java</artifactid>\n    </dependency>\n  </dependencies>\n\n\n\n# éç½®æ°æ®æº\n\nå¼å¥ä¾èµåï¼éè¦å¨ application.properties æ application.yml æä»¶ä¸­æå®æ°æ®æºéç½®ã\n\nä¸é¢æ¯ä¸ä¸ªæåºæ¬çæ°æ®æºéç½®ç¤ºä¾ï¼\n\nspring.datasource.url = jdbc:mysql://localhost:3306/spring_tutorial?servertimezone=utc&useunicode=true&characterencoding=utf8\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.driver\nspring.datasource.username = root\nspring.datasource.password = root\n\n\néè¦æ ¹æ®å®éæåµï¼æ¿æ¢ urlãusernameãpasswordã\n\n\n# æµè¯\n\nimport lombok.extern.slf4j.slf4j;\nimport org.springframework.boot.commandlinerunner;\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\nimport org.springframework.jdbc.core.jdbctemplate;\n\nimport java.sql.connection;\nimport javax.sql.datasource;\n\n@slf4j\n@springbootapplication\npublic class springbootdatajdbcapplication implements commandlinerunner {\n\n    private final jdbctemplate jdbctemplate;\n\n    public springbootdatajdbcapplication(jdbctemplate jdbctemplate) {\n        this.jdbctemplate = jdbctemplate;\n    }\n\n    public static void main(string[] args) {\n        springapplication.run(springbootdatajdbcapplication.class, args);\n    }\n\n    @override\n    public void run(string... args) throws exception {\n        datasource datasource = jdbctemplate.getdatasource();\n\n        connection connection;\n        if (datasource != null) {\n            connection = datasource.getconnection();\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n            return;\n        }\n\n        if (connection != null) {\n            log.info("æ°æ®æº url: {}", connection.getmetadata().geturl());\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n        }\n    }\n\n}\n\n\nè¿è¡ main æ¹æ³åï¼æ§å¶å°ä¼è¾åºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ°æ®æºè¿æ¥æåï¼\n\n20:50:18.449 [main] [info ] i.g.d.s.d.springbootdatajdbcapplication.run - æ°æ®æº url: jdbc:mysql://localhost:3306/spring_tutorial?servertimezone=utc&useunicode=true&characterencoding=utf8\n\n\n\n# spring jdbc\n\n> å®æ´ç¤ºä¾ï¼spring-data-jdbc\n\nspring-boot-starter-data-jdbc å¼å¥äº spring-jdbc ï¼å¶ jdbc ç¹æ§å°±æ¯åºäº spring-jdbcã\n\n\n# å¼å¥ spring ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n    <dependencies>\n        <dependency>\n            <groupid>com.alibaba</groupid>\n            <artifactid>druid</artifactid>\n        </dependency>\n        <dependency>\n            <groupid>mysql</groupid>\n            <artifactid>mysql-connector-java</artifactid>\n        </dependency>\n\n        <dependency>\n            <groupid>org.springframework</groupid>\n            <artifactid>spring-context-support</artifactid>\n        </dependency>\n        <dependency>\n            <groupid>org.springframework</groupid>\n            <artifactid>spring-jdbc</artifactid>\n        </dependency>\n        <dependency>\n            <groupid>org.springframework</groupid>\n            <artifactid>spring-tx</artifactid>\n        </dependency>\n    </dependencies>\n</project>\n\n\n\n# åºäº jdbc é©±å¨çæ°æ®æºéç½®\n\nä¸é¢æ¯ä¸ä¸ª mysql ç jdbc æ°æ®æºéç½®å®ä¾ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xmlns:jdbc="http://www.springframework.org/schema/jdbc"\n    xmlns="http://www.springframework.org/schema/beans"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans.xsd\n            http://www.springframework.org/schema/context\n            http://www.springframework.org/schema/context/spring-context.xsd\n            http://www.springframework.org/schema/jdbc\n            http://www.springframework.org/schema/jdbc/spring-jdbc.xsd">\n\n    \x3c!-- å¼å¥éç½®æä»¶ --\x3e\n    <context:property-placeholder location="classpath:properties/mysql.properties" />\n\n    \x3c!-- ä½¿ç¨jdbcé©±å¨çæ°æ®æº --\x3e\n    \x3c!-- (1)å¨æ¯ä¸ªè¿æ¥è¯·æ±æ¶é½ä¼è¿åä¸ä¸ªæ°å»ºçè¿æ¥ãæ§è½ä¸é« --\x3e\n    <bean id="datasource1" class="org.springframework.jdbc.datasource.drivermanagerdatasource">\n        <property name="driverclassname" value="${jdbc.driver}" />\n        <property name="url" value="${jdbc.url}" />\n        <property name="username" value="${jdbc.username}" />\n        <property name="password" value="${jdbc.password}" />\n    </bean>\n\n    \x3c!-- (2)å¨æ¯ä¸ªè¿æ¥è¯·æ±æ¶é½ä¼è¿ååä¸ä¸ªè¿æ¥ãä¸éç¨äºå¤çº¿ç¨ --\x3e\n    <bean id="datasource2" class="org.springframework.jdbc.datasource.singleconnectiondatasource">\n        <property name="driverclassname" value="${jdbc.driver}" />\n        <property name="url" value="${jdbc.url}" />\n        <property name="username" value="${jdbc.username}" />\n        <property name="password" value="${jdbc.password}" />\n    </bean>\n\n    \x3c!-- jdbcæ¨¡æ¿ --\x3e\n    <bean id="jdbctemplate" class="org.springframework.jdbc.core.jdbctemplate">\n        <constructor-arg ref="datasource1" />\n    </bean>\n    <bean id="userdao" class="io.github.dunwu.springboot.data.jdbc.userdaoimpl">\n        <constructor-arg ref="jdbctemplate" />\n    </bean>\n\n    \x3c!-- åå§åæ°æ®è¡¨ç»æ --\x3e\n    <jdbc:initialize-database data-source="datasource1" ignore-failures="all">\n        <jdbc:script location="classpath:sql/schema.sql" />\n        <jdbc:script location="classpath:sql/data.sql" />\n    </jdbc:initialize-database>\n</beans>\n\n\n\n# æµè¯\n\n\nimport org.junit.after;\nimport org.junit.before;\nimport org.junit.test;\nimport org.junit.runner.runwith;\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.context.applicationcontext;\nimport org.springframework.context.support.classpathxmlapplicationcontext;\nimport org.springframework.test.context.contextconfiguration;\nimport org.springframework.test.context.junit4.springjunit4classrunner;\n\nimport java.io.ioexception;\nimport java.sql.sqlexception;\n\n@suppresswarnings("all")\n@runwith(springjunit4classrunner.class)\n@contextconfiguration(locations = { "classpath:data/spring-mysql.xml" })\npublic class mysqljdbctest {\n\n    @autowired\n    private applicationcontext ctx;\n\n    @before\n    public void before() {\n        ctx = jdbcdemo.getmysqlapplicationcontext();\n    }\n\n    @test\n    public void testexecjdbcoper() throws sqlexception, ioexception {\n        userdao userdao = (userdaoimpl) ctx.getbean("userdao");\n        jdbcdemo.execjdbcoper(userdao);\n    }\n\n    @after\n    public void after() {\n        ((classpathxmlapplicationcontext) ctx).close();\n    }\n\n}\n\n\n\n# jdbctemplate api\n\nspring å°æ°æ®è®¿é®çæ ·æ¿å¼ä»£ç æåå°æ¨¡æ¿ç±»ä¸­ãspring æä¾äº 3 ä¸ª jdbc æ¨¡æ¿ç±»ï¼\n\n * jdbctemplateï¼æåºæ¬ç spring jdbc æ¨¡æ¿ï¼è¿ä¸ªæ¨¡æ¿æ¯ææç®åç jdbc æ°æ®åºè®¿é®åè½ä»¥åç®åçç´¢å¼åæ°æ¥è¯¢ã\n * simplejdbctemplateï¼æ¹æ¨¡æ¿ç±»å©ç¨ java 5 çä¸äºç¹æ§ï¼å¦èªå¨è£ç®±ãæ³åä»¥åå¯ååæ°åè¡¨æ¥ç®å jdbc æ¨¡æ¿çä½¿ç¨ã\n * namedparameterjdbctemplateï¼ä½¿ç¨è¯¥æ¨¡æ¿ç±»æ§è¡æ¥è¯¢æ¶ï¼å¯ä»¥å°æ¥è¯¢å¼ä»¥å½ååæ°çå½¢å¼ç»å®å° sql ä¸­ï¼èä¸æ¯ä½¿ç¨ç®åçç´¢å¼åæ°ã\n\nspring-jdbc ææ ¸å¿ç api æ çå°±æ¯ jdbctemplateï¼å¯ä»¥è¯´ææç jdbc æ°æ®è®¿é®ï¼å ä¹é½æ¯å´ç»çè¿ä¸ªç±»å»å·¥ä½çãspring å¯¹æ°æ®åºçæä½å¨ jdbc å±é¢åäºæ·±å±æ¬¡çå°è£ï¼å©ç¨ä¾èµæ³¨å¥ï¼ææ°æ®æºéç½®è£éå° jdbctemplate ä¸­ï¼åç± jdbctemplate è´è´£å·ä½çæ°æ®è®¿é®ã\n\njdbctemplate ä¸»è¦æä¾ä»¥ä¸å ç±»æ¹æ³ï¼\n\n * execute æ¹æ³ï¼å¯ä»¥ç¨äºæ§è¡ä»»ä½ sql è¯­å¥ï¼ä¸è¬ç¨äºæ§è¡ ddl è¯­å¥ï¼\n * update æ¹æ³å batchupdate æ¹æ³ï¼update æ¹æ³ç¨äºæ§è¡æ°å¢ãä¿®æ¹ãå é¤ç­è¯­å¥ï¼batchupdate æ¹æ³ç¨äºæ§è¡æ¹å¤çç¸å³è¯­å¥ï¼\n * query æ¹æ³å queryforxxx æ¹æ³ï¼ç¨äºæ§è¡æ¥è¯¢ç¸å³è¯­å¥ï¼\n * call æ¹æ³ï¼ç¨äºæ§è¡å­å¨è¿ç¨ãå½æ°ç¸å³è¯­å¥ã\n\nä¸ºäºæ¹ä¾¿æ¼ç¤ºï¼ä»¥ä¸å¢å æ¹æ¥æä½é½å´ç»ä¸ä¸ªåä¸º user çè¡¨ï¼è¯¥è¡¨çä¸»é® id æ¯èªå¢åºåï¼è¿è¡ï¼è¯¥è¡¨çæ°æ®å®ä½å¦ä¸ï¼\n\npublic class user {\n    private integer id;\n    private string name;\n    private integer age;\n\n    // çç¥ getter/setter\n}\n\n\næ°æ®å®ä½åªè¦æ¯ä¸ä¸ªçº¯ç²¹ç java bean å³å¯ï¼æ éä»»ä½æ³¨è§£ä¿®é¥°ã\n\n\n# execute æ¹æ³\n\nä½¿ç¨ execute æ§è¡ ddl è¯­å¥ï¼åå»ºä¸ä¸ªåä¸º test çæ°æ®åºï¼å¹¶å¨æ­¤æ°æ®åºä¸æ°å»ºä¸ä¸ªåä¸º user çè¡¨ã\n\npublic void recreatetable() {\n    jdbctemplate.execute("drop database if exists test");\n    jdbctemplate.execute("create database test");\n    jdbctemplate.execute("use test");\n    jdbctemplate.execute("drop table if exists user");\n    jdbctemplate.execute("drop table if exists user");\n    // @formatter:off\n    stringbuilder sb = new stringbuilder();\n    sb.append("create table user (id int (10) unsigned not null auto_increment,\\n")\n        .append("name varchar (64) not null default \'\',\\n")\n        .append("age tinyint (3) not null default 0,\\n")\n        .append("primary key (id));\\n");\n    // @formatter:on\n    jdbctemplate.execute(sb.tostring());\n}\n\n\n\n# update æ¹æ³\n\næ°å¢æ°æ®\n\npublic void insert(string name, integer age) {\n    jdbctemplate.update("insert into user(name, age) values(?, ?)", name, age);\n}\n\n\nå é¤æ°æ®\n\npublic void delete(string name) {\n    jdbctemplate.update("delete from user where name = ?", name);\n}\n\n\nä¿®æ¹æ°æ®\n\npublic void update(user user) {\n    jdbctemplate.update("update user set name=?, age=? where id=?", user.getname(), user.getage(), user.getid());\n}\n\n\næ¹å¤ç\n\npublic void batchinsert(list<user> users) {\n    string sql = "insert into user(name, age) values(?, ?)";\n\n    list<object[]> params = new arraylist<>();\n\n    users.foreach(item -> {\n        params.add(new object[] {item.getname(), item.getage()});\n    });\n    jdbctemplate.batchupdate(sql, params);\n}\n\n\n\n# query æ¹æ³\n\næ¥åä¸ªå¯¹è±¡\n\npublic user querybyname(string name) {\n    try {\n        return jdbctemplate\n            .queryforobject("select * from user where name = ?", new beanpropertyrowmapper<>(user.class), name);\n    } catch (emptyresultdataaccessexception e) {\n        return null;\n    }\n}\n\n\næ¥å¤ä¸ªå¯¹è±¡\n\npublic list<user> list() {\n    return jdbctemplate.query("select * from user", new beanpropertyrowmapper(user.class));\n}\n\n\nè·åæä¸ªè®°å½æåæè countãavgãsum ç­å½æ°è¿åå¯ä¸å¼\n\npublic integer count() {\n    try {\n        return jdbctemplate.queryforobject("select count(*) from user", integer.class);\n    } catch (emptyresultdataaccessexception e) {\n        return null;\n    }\n}\n\n\n\n# springboot jdbc éç½®\n\n\n# jdbctemplateautoconfiguration ç±»\n\njdbctemplateautoconfiguration æ¯ jdbctemplate èªå¨éç½®ç±»ï¼å®è´è´£å®ä¾å jdbctemplateã\n\n@configuration(proxybeanmethods = false)\n@conditionalonclass({ datasource.class, jdbctemplate.class })\n@conditionalonsinglecandidate(datasource.class)\n@autoconfigureafter(datasourceautoconfiguration.class)\n@enableconfigurationproperties(jdbcproperties.class)\n@import({ jdbctemplateconfiguration.class, namedparameterjdbctemplateconfiguration.class })\npublic class jdbctemplateautoconfiguration {\n\n}\n\n\njdbctemplateautoconfiguration ç±»çæºç è§£è¯»ï¼\n\n * @autoconfigureafter(datasourceautoconfiguration.class) è¡¨æ jdbctemplateautoconfiguration å¿é¡»å¨ datasourceautoconfiguration æ§è¡å®ä¹åæå¼å§å·¥ä½ï¼è¿æå³çï¼jdbctemplate çåå§åå¿é¡»å¨ datasource åå§åä¹åã\n * jdbcproperties æ¯ jdbctemplateautoconfiguration çéç½®éé¡¹ç±»ï¼åè®¸ä½¿ç¨èéè¿è®¾ç½®éé¡¹æ§å¶ jdbctemplate åå§åè¡ä¸ºã\n * @import({ jdbctemplateconfiguration.class, namedparameterjdbctemplateconfiguration.class }) è¡¨æå¼å¥ jdbctemplateconfigurationãnamedparameterjdbctemplateconfiguration ä¸¤ä¸ªéç½®ç±»ï¼å·ä½çå®ä¾å jdbctemplate çå·¥ä½ä¹æ¯æ¾å¨è¿ä¸¤ä¸ªéç½®ä¸­å®æã\n\n\n# jdbctemplateconfiguration ç±»\n\njdbctemplateconfiguration æºç å¦ä¸ï¼\n\n@configuration(proxybeanmethods = false)\n@conditionalonmissingbean(jdbcoperations.class)\nclass jdbctemplateconfiguration {\n\n\t@bean\n\t@primary\n\tjdbctemplate jdbctemplate(datasource datasource, jdbcproperties properties) {\n\t\tjdbctemplate jdbctemplate = new jdbctemplate(datasource);\n\t\tjdbcproperties.template template = properties.gettemplate();\n\t\tjdbctemplate.setfetchsize(template.getfetchsize());\n\t\tjdbctemplate.setmaxrows(template.getmaxrows());\n\t\tif (template.getquerytimeout() != null) {\n\t\t\tjdbctemplate.setquerytimeout((int) template.getquerytimeout().getseconds());\n\t\t}\n\t\treturn jdbctemplate;\n\t}\n\n}\n\n\njdbctemplateconfiguration æºç è§£è¯»ï¼jdbctemplateconfiguration ä¸­æ ¹æ® datasource å jdbcproperties å®ä¾åäºä¸ä¸ª jdbctemplateã\n\n\n# namedparameterjdbctemplateconfiguration ç±»\n\nnamedparameterjdbctemplateconfiguration æºç å¦ä¸ï¼\n\n@configuration(proxybeanmethods = false)\n@conditionalonsinglecandidate(jdbctemplate.class)\n@conditionalonmissingbean(namedparameterjdbcoperations.class)\nclass namedparameterjdbctemplateconfiguration {\n\n\t@bean\n\t@primary\n\tnamedparameterjdbctemplate namedparameterjdbctemplate(jdbctemplate jdbctemplate) {\n\t\treturn new namedparameterjdbctemplate(jdbctemplate);\n\t}\n\n}\n\n\nnamedparameterjdbctemplateconfiguration æºç è§£è¯»ï¼namedparameterjdbctemplateconfiguration ä¸­æ ¹æ® jdbctemplate å®ä¾åäºä¸ä¸ª namedparameterjdbctemplateã\n\n\n# spring-data-jdbc\n\nspring data é¡¹ç®åå«äºå¯¹ jdbc çå­å¨åºæ¯æï¼å¹¶å°èªå¨ä¸º crudrepository ä¸çæ¹æ³çæ sqlãå¯¹äºæ´é«çº§çæ¥è¯¢ï¼æä¾äº @query æ³¨è§£ã\n\nå½ classpath ä¸å­å¨å¿è¦çä¾èµé¡¹æ¶ï¼spring boot å°èªå¨éç½® spring data ç jdbc å­å¨åºãå®ä»¬å¯ä»¥éè¿ spring-boot-starter-data-jdbc çåä¸ä¾èµé¡¹æ·»å å°é¡¹ç®ä¸­ãå¦æå¿è¦ï¼å¯ä»¥éè¿å° @enablejdbcrepositories æ¹æ³¨æ jdbcconfiguration å­ç±»æ·»å å°åºç¨ç¨åºæ¥æ§å¶ spring data jdbc çéç½®ã\n\n> æ´å¤ spring data jdbc ç»èï¼å¯ä»¥åè spring data jdbc å®æ¹ææ¡£ã\n\n\n# åèèµæ\n\n * spring å®ç½\n * spring framework å®æ¹ææ¡£\n * spring boot å®æ¹ææ¡£',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ä¹æ°æ®æº",frontmatter:{title:"Spring ä¹æ°æ®æº",date:"2017-10-20T09:27:55.000Z",order:1,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","æ°æ®åº","DataSource"],permalink:"/pages/1b774c/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/01.Spring%E4%B9%8B%E6%95%B0%E6%8D%AE%E6%BA%90.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/01.Springä¹æ°æ®æº.md",key:"v-b009604a",path:"/pages/1b774c/",headers:[{level:2,title:"Spring Boot æ°æ®æºåºæ¬éç½®",slug:"spring-boot-æ°æ®æºåºæ¬éç½®",normalizedTitle:"spring boot æ°æ®æºåºæ¬éç½®",charIndex:48},{level:2,title:"Spring Boot è¿æ¥åµå¥å¼æ°æ®æº",slug:"spring-boot-è¿æ¥åµå¥å¼æ°æ®æº",normalizedTitle:"spring boot è¿æ¥åµå¥å¼æ°æ®æº",charIndex:601},{level:2,title:"Spring Boot è¿æ¥æ± åæ°æ®æº",slug:"spring-boot-è¿æ¥æ± åæ°æ®æº",normalizedTitle:"spring boot è¿æ¥æ± åæ°æ®æº",charIndex:1467},{level:3,title:"å¼å¥ Spring Boot ä¾èµ",slug:"å¼å¥-spring-boot-ä¾èµ",normalizedTitle:"å¼å¥ spring boot ä¾èµ",charIndex:2883},{level:3,title:"æµè¯åæ°æ®æºè¿æ¥",slug:"æµè¯åæ°æ®æºè¿æ¥",normalizedTitle:"æµè¯åæ°æ®æºè¿æ¥",charIndex:3238},{level:2,title:"Spring Boot è¿æ¥å¤æ°æ®æº",slug:"spring-boot-è¿æ¥å¤æ°æ®æº",normalizedTitle:"spring boot è¿æ¥å¤æ°æ®æº",charIndex:4696},{level:3,title:"å¤æ°æ®æºéç½®",slug:"å¤æ°æ®æºéç½®",normalizedTitle:"å¤æ°æ®æºéç½®",charIndex:4986},{level:3,title:"æµè¯å¤æ°æ®æºè¿æ¥",slug:"æµè¯å¤æ°æ®æºè¿æ¥",normalizedTitle:"æµè¯å¤æ°æ®æºè¿æ¥",charIndex:6930},{level:2,title:"Spring ä¹æ°æ®æº",slug:"spring-ä¹æ°æ®æº-2",normalizedTitle:"spring ä¹æ°æ®æº",charIndex:2},{level:3,title:"å¼å¥ Spring ä¾èµ",slug:"å¼å¥-spring-ä¾èµ",normalizedTitle:"å¼å¥ spring ä¾èµ",charIndex:10151},{level:3,title:"Spring éç½®æ°æ®æº",slug:"spring-éç½®æ°æ®æº",normalizedTitle:"spring éç½®æ°æ®æº",charIndex:10948},{level:4,title:"ä½¿ç¨ JNDI æ°æ®æº",slug:"ä½¿ç¨-jndi-æ°æ®æº",normalizedTitle:"ä½¿ç¨ jndi æ°æ®æº",charIndex:10991},{level:4,title:"ä½¿ç¨æ°æ®åºè¿æ¥æ± ",slug:"ä½¿ç¨æ°æ®åºè¿æ¥æ± ",normalizedTitle:"ä½¿ç¨æ°æ®åºè¿æ¥æ± ",charIndex:11868},{level:4,title:"åºäº JDBC é©±å¨çæ°æ®æº",slug:"åºäº-jdbc-é©±å¨çæ°æ®æº",normalizedTitle:"åºäº jdbc é©±å¨çæ°æ®æº",charIndex:13361},{level:2,title:"SpringBoot æ°æ®æºéç½®",slug:"springboot-æ°æ®æºéç½®",normalizedTitle:"springboot æ°æ®æºéç½®",charIndex:13696},{level:2,title:"DataSourceAutoConfiguration ç±»",slug:"datasourceautoconfiguration-ç±»",normalizedTitle:"datasourceautoconfiguration ç±»",charIndex:4934},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:17118}],headersStr:"Spring Boot æ°æ®æºåºæ¬éç½® Spring Boot è¿æ¥åµå¥å¼æ°æ®æº Spring Boot è¿æ¥æ± åæ°æ®æº å¼å¥ Spring Boot ä¾èµ æµè¯åæ°æ®æºè¿æ¥ Spring Boot è¿æ¥å¤æ°æ®æº å¤æ°æ®æºéç½® æµè¯å¤æ°æ®æºè¿æ¥ Spring ä¹æ°æ®æº å¼å¥ Spring ä¾èµ Spring éç½®æ°æ®æº ä½¿ç¨ JNDI æ°æ®æº ä½¿ç¨æ°æ®åºè¿æ¥æ±  åºäº JDBC é©±å¨çæ°æ®æº SpringBoot æ°æ®æºéç½® DataSourceAutoConfiguration ç±» åèèµæ",content:'# Spring ä¹æ°æ®æº\n\n> æ¬æåºäº Spring Boot 2.7.3 çæ¬ã\n\n\n# Spring Boot æ°æ®æºåºæ¬éç½®\n\nSpring Boot æä¾äºä¸ç³»å spring.datasource.* éç½®æ¥æ§å¶ DataSource çéç½®ãç¨æ·å¯ä»¥å¨ application.properties æ application.yml æä»¶ä¸­æå®æ°æ®æºéç½®ãè¿äºéç½®é¡¹ç»´æ¤å¨ DataSourceProperties ã\n\nä¸é¢æ¯ä¸ä¸ªæåºæ¬ç mysql æ°æ®æºéç½®ç¤ºä¾ï¼é½æ¯å¿å¡«é¡¹ï¼ï¼\n\n# æ°æ®åºè®¿é®å°å\nspring.datasource.url = jdbc:mysql://localhost:3306/spring_tutorial?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8\n# æ°æ®åºé©±å¨ç±»ï¼å¿é¡»ä¿è¯é©±å¨ç±»æ¯å¯å è½½ç\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver\n# æ°æ®åºè´¦å·\nspring.datasource.username = root\n# æ°æ®åºè´¦å·å¯ç \nspring.datasource.password = root\n\n\néè¦æ ¹æ®å®éæåµï¼æ¿æ¢ urlãusernameãpasswordã\n\n\n# Spring Boot è¿æ¥åµå¥å¼æ°æ®æº\n\nä½¿ç¨åå­åµå¥å¼æ°æ®åºå¼ååºç¨ç¨åºéå¸¸å¾æ¹ä¾¿ãæ¾ç¶ï¼åå­æ°æ®åºä¸æä¾æä¹å­å¨ãä½¿ç¨èéè¦å¨åºç¨ç¨åºå¯å¨æ¶å¡«åæ°æ®åºï¼å¹¶åå¤å¨åºç¨ç¨åºç»ææ¶ä¸¢å¼æ°æ®ã\n\nSpring Boot å¯ä»¥èªå¨éç½®åµå¥å¼æ°æ®åº H2ãHSQL å Derbyãä½¿ç¨èæ éæä¾ä»»ä½è¿æ¥ URLï¼åªéè¦åå«å¯¹è¦ä½¿ç¨çåµå¥å¼æ°æ®åºçæå»ºä¾èµé¡¹ãå¦æç±»è·¯å¾ä¸æå¤ä¸ªåµå¥å¼æ°æ®åºï¼éè¦è®¾ç½® spring.datasource.embedded-database-connection éç½®å±æ§æ¥æ§å¶ä½¿ç¨åªä¸ä¸ªãå°è¯¥å±æ§è®¾ç½®ä¸º none ä¼ç¦ç¨åµå¥å¼æ°æ®åºçèªå¨éç½®ã\n\n> æ³¨æï¼å¦æå¨æµè¯ä¸­ä½¿ç¨æ­¤åè½ï¼æ è®ºä½¿ç¨å¤å°åºç¨ç¨åºä¸ä¸æï¼æ´ä¸ªæµè¯å¥ä»¶é½ä¼éç¨åä¸ä¸ªæ°æ®åºãå¦æè¦ç¡®ä¿æ¯ä¸ªä¸ä¸æé½æä¸ä¸ªåç¬çåµå¥å¼æ°æ®åºï¼ååºå° spring.datasource.generate-unique-name è®¾ç½®ä¸º trueã\n\nä¸é¢ï¼éè¿ä¸ä¸ªå®ä¾å±ç¤ºå¦ä½è¿æ¥ H2 åµå¥å¼æ°æ®åºã\n\nï¼1ï¼å¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-data-jdbc</artifactId>\n</dependency>\n<dependency>\n  <groupId>com.h2database</groupId>\n  <artifactId>h2</artifactId>\n</dependency>\n\n\nï¼2ï¼æ°æ®æºéç½®\n\nspring.datasource.jdbc-url = jdbc:h2:mem:test\nspring.datasource.driver-class-name = org.h2.Driver\nspring.datasource.username = sa\nspring.datasource.password =\n\n\n\n# Spring Boot è¿æ¥æ± åæ°æ®æº\n\n> å®æ´ç¤ºä¾ï¼spring-boot-data-jdbc\n\nå¨çäº§ç¯å¢ä¸­ï¼åºäºæ§è½èèï¼ä¸è¬ä¼éè¿æ°æ®åºè¿æ¥æ± è¿æ¥æ°æ®æºã\n\né¤äº DataSourceProperties ä¸­çæ°æ®æºéç¨éç½®ä»¥å¤ï¼Spring Boot è¿æ¯æéè¿ä½¿ç¨ç±»ä¼¼spring.datasource.hikari.*ãspring.datasource.tomcat.*ãspring.datasource.dbcp2.* å spring.datasource.oracleucp.* çåç¼æ¥éç½®æå®çæ°æ®åºè¿æ¥æ± å±æ§ã\n\nä¸é¢ï¼å°±æ¯ä¸ä»½ hikari çè¿æ¥æ± éç½®ç¤ºä¾ï¼\n\n# è¿æ¥æ± åç§°\nspring.datasource.hikari.pool-name = SpringTutorialHikariPool\n# æå¤§è¿æ¥æ°ï¼å°äºç­äº 0 ä¼è¢«éç½®ä¸ºé»è®¤å¼ 10ï¼å¤§äºé¶å°äº 1 ä¼è¢«éç½®ä¸º minimum-idle çå¼\nspring.datasource.hikari.maximum-pool-size = 10\n# æå°ç©ºé²è¿æ¥ï¼é»è®¤å¼10ï¼å°äº 0 æå¤§äº maximum-pool-sizeï¼é½ä¼éç½®ä¸º maximum-pool-size\nspring.datasource.hikari.minimum-idle = 10\n# è¿æ¥è¶æ¶æ¶é´ï¼åä½ï¼æ¯«ç§ï¼ï¼å°äº 250 æ¯«ç§ï¼ä¼è¢«éç½®ä¸ºé»è®¤å¼ 30 ç§\nspring.datasource.hikari.connection-timeout = 60000\n# ç©ºé²è¿æ¥è¶æ¶æ¶é´ï¼é»è®¤å¼ 600000ï¼10åéï¼ï¼å¤§äºç­äº max-lifetime ä¸ max-lifetime>0ï¼ä¼è¢«éç½®ä¸º0ï¼ä¸ç­äº 0 ä¸å°äº 10 ç§ï¼ä¼è¢«éç½®ä¸º 10 ç§\n# åªæç©ºé²è¿æ¥æ°å¤§äºæå¤§è¿æ¥æ°ä¸ç©ºé²æ¶é´è¶è¿è¯¥å¼ï¼æä¼è¢«éæ¾\nspring.datasource.hikari.idle-timeout = 600000\n# è¿æ¥æå¤§å­æ´»æ¶é´ï¼ä¸ç­äº 0 ä¸å°äº 30 ç§ï¼ä¼è¢«éç½®ä¸ºé»è®¤å¼ 30 åéãè¯¥å¼åºè¯¥æ¯æ°æ®åºæè®¾ç½®çè¶æ¶æ¶é´ç­\nspring.datasource.hikari.max-lifetime = 540000\n\n\nSpring Boot ä¼æä»¥ä¸é¡ºåºæ£æµè¿æ¥æ± æ¯å¦å¯ç¨ï¼å¦æå¯ç¨å°±éæ©å¯¹åºçæ± å DataSourceï¼\n\nHikariCP -> Tomcat pooling DataSource -> DBCP2 -> Oracle UCP\n\nç¨æ·ä¹å¯ä»¥éè¿ spring.datasource.type æ¥æå®æ°æ®æºç±»åã\n\næ­¤å¤ï¼ä¹å¯ä»¥ä½¿ç¨ DataSourceBuilder æå¨éç½®å¶ä»è¿æ¥æ± ãå¦æèªå®ä¹ DataSource beanï¼åä¸ä¼åçèªå¨éç½®ã DataSourceBuilder æ¯æä»¥ä¸è¿æ¥æ± ï¼\n\n * HikariCP\n * Tomcat pooling Datasource\n * Commons DBCP2\n * Oracle UCP & OracleDataSource\n * Spring Frameworkâs SimpleDriverDataSource\n * H2 JdbcDataSource\n * PostgreSQL PGSimpleDataSource\n * C3P0\n\n\n# å¼å¥ Spring Boot ä¾èµ\n\nä½ å¯ä»¥éè¿ Spring Boot å®æ¹çåå§åå¨ï¼Spring Initializrï¼éæ©éè¦çç»ä»¶æ¥åå»ºä¸ä¸ª Spring Boot å·¥ç¨ãæèï¼ç´æ¥å¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-data-jdbc</artifactId>\n</dependency>\n<dependency>\n  <groupId>mysql</groupId>\n  <artifactId>mysql-connector-java</artifactId>\n</dependency>\n\n\n\n# æµè¯åæ°æ®æºè¿æ¥\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\nimport java.sql.Connection;\nimport javax.sql.DataSource;\n\n@Slf4j\n@SpringBootApplication\npublic class SpringBootDataJdbcApplication implements CommandLineRunner {\n\n    private final JdbcTemplate jdbcTemplate;\n\n    public SpringBootDataJdbcApplication(JdbcTemplate jdbcTemplate) {\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootDataJdbcApplication.class, args);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        DataSource dataSource = jdbcTemplate.getDataSource();\n\n        Connection connection;\n        if (dataSource != null) {\n            connection = dataSource.getConnection();\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n            return;\n        }\n\n        if (connection != null) {\n            log.info("æ°æ®æº Url: {}", connection.getMetaData().getURL());\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n        }\n    }\n\n}\n\n\nè¿è¡ main æ¹æ³åï¼æ§å¶å°ä¼è¾åºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ°æ®æºè¿æ¥æåï¼\n\n20:50:18.449 [main] [INFO ] i.g.d.s.d.SpringBootDataJdbcApplication.run - æ°æ®æº Url: jdbc:mysql://localhost:3306/spring_tutorial?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8\n\n\n\n# Spring Boot è¿æ¥å¤æ°æ®æº\n\n> å®æ´ç¤ºä¾ï¼spring-boot-data-jdbc-multi-datasource\n\nSpring Boot è¿æ¥å¤æ°æ®æºæéè¦çä¾èµå¹¶æ ä¸åï¼ä¸»è¦å·®å¼å¨äºæ°æ®æºçéç½®ãSpring Boot é»è®¤çæ°æ®æºéç½®ç±»ä¸º org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfigurationãä½¿ç¨èåªè¦æå®ä¸äºå¿è¦ç spring.datasource éç½®ï¼DataSourceAutoConfiguration ç±»å°±ä¼èªå¨å®æå©ä¸çæ°æ®æºå®ä¾åå·¥ä½ã\n\n\n# å¤æ°æ®æºéç½®\n\nä¸é¢çç¤ºä¾ä¸­ï¼èªå®ä¹äºä¸ä¸ªæ°æ®æºéç½®ç±»ï¼éè¿è¯»åä¸åç spring.datasource.xxx æ¥å®æå¯¹äºä¸åæ°æ®æºçå®ä¾åå·¥ä½ãå¯¹äº JDBC æ¥è¯´ï¼æéè¦çï¼å°±æ¯å®ä¾å DataSource å JdbcTemplateã\n\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.boot.jdbc.DataSourceBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\n@Configuration\npublic class DataSourceConfig {\n\n    @Primary\n    @Bean("mysqlDataSource")\n    @ConfigurationProperties(prefix = "spring.datasource.mysql")\n    public DataSource mysqlDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Primary\n    @Bean("mysqlJdbcTemplate")\n    public JdbcTemplate mysqlJdbcTemplate(@Qualifier("mysqlDataSource") DataSource dataSource) {\n        return new JdbcTemplate(dataSource);\n    }\n\n    @Bean("h2DataSource")\n    @ConfigurationProperties(prefix = "spring.datasource.h2")\n    public DataSource h2DataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = "h2JdbcTemplate")\n    public JdbcTemplate h2JdbcTemplate(@Qualifier("h2DataSource") DataSource dataSource) {\n        return new JdbcTemplate(dataSource);\n    }\n\n}\n\n\napplication.properties æ application.yml éç½®æä»¶ä¸­ä¹å¿é¡»ä»¥ @ConfigurationProperties ææå®çéç½®åç¼è¿è¡éç½®ï¼\n\n# æ°æ®æºä¸ï¼Mysql\nspring.datasource.mysql.jdbc-url = jdbc:mysql://localhost:3306/spring_tutorial?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8&useSSL=false\nspring.datasource.mysql.driver-class-name = com.mysql.cj.jdbc.Driver\nspring.datasource.mysql.username = root\nspring.datasource.mysql.password = root\n# æ°æ®æºä¸ï¼H2\nspring.datasource.h2.jdbc-url = jdbc:h2:mem:test\nspring.datasource.h2.driver-class-name = org.h2.Driver\nspring.datasource.h2.username = sa\nspring.datasource.h2.password =\n\n\n\n# æµè¯å¤æ°æ®æºè¿æ¥\n\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport javax.sql.DataSource;\n\n@SpringBootApplication\npublic class SpringBootDataJdbcMultiDataSourceApplication implements CommandLineRunner {\n\n    private static final Logger log = LoggerFactory.getLogger(SpringBootDataJdbcMultiDataSourceApplication.class);\n\n    private final UserDao mysqlUserDao;\n\n    private final UserDao h2UserDao;\n\n    public SpringBootDataJdbcMultiDataSourceApplication(@Qualifier("mysqlUserDao") UserDao mysqlUserDao,\n        @Qualifier("h2UserDao") UserDao h2UserDao) {\n        this.mysqlUserDao = mysqlUserDao;\n        this.h2UserDao = h2UserDao;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootDataJdbcMultiDataSourceApplication.class, args);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n\n        if (mysqlUserDao != null && mysqlUserDao.getJdbcTemplate() != null) {\n            printDataSourceInfo(mysqlUserDao.getJdbcTemplate());\n            log.info("Connect to mysql datasource success.");\n        } else {\n            log.error("Connect to mysql datasource failed!");\n            return;\n        }\n\n        if (h2UserDao != null) {\n            printDataSourceInfo(h2UserDao.getJdbcTemplate());\n            log.info("Connect to h2 datasource success.");\n        } else {\n            log.error("Connect to h2 datasource failed!");\n            return;\n        }\n\n        // ä¸»æ°æ®æºæ§è¡ JDBC SQL\n        mysqlUserDao.recreateTable();\n\n        // æ¬¡æ°æ®æºæ§è¡ JDBC SQL\n        h2UserDao.recreateTable();\n    }\n\n    private void printDataSourceInfo(JdbcTemplate jdbcTemplate) throws SQLException {\n\n        DataSource dataSource = jdbcTemplate.getDataSource();\n\n        Connection connection;\n        if (dataSource != null) {\n            connection = dataSource.getConnection();\n        } else {\n            log.error("Get dataSource failed!");\n            return;\n        }\n\n        if (connection != null) {\n            log.info("DataSource Url: {}", connection.getMetaData().getURL());\n        } else {\n            log.error("Connect to datasource failed!");\n        }\n    }\n\n}\n\n\nè¿è¡ main æ¹æ³åï¼æ§å¶å°ä¼è¾åºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ°æ®æºè¿æ¥æåï¼\n\n21:16:44.654 [main] [INFO ] i.g.d.s.d.SpringBootDataJdbcMultiDataSourceApplication.printDataSourceInfo - DataSource Url: jdbc:mysql://localhost:3306/spring_tutorial?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8&useSSL=false\n21:16:44.654 [main] [INFO ] i.g.d.s.d.SpringBootDataJdbcMultiDataSourceApplication.run - Connect to mysql datasource success.\n\n21:16:44.726 [main] [INFO ] i.g.d.s.d.SpringBootDataJdbcMultiDataSourceApplication.printDataSourceInfo - DataSource Url: jdbc:h2:mem:test\n21:16:44.726 [main] [INFO ] i.g.d.s.d.SpringBootDataJdbcMultiDataSourceApplication.run - Connect to h2 datasource success.\n\n\n\n# Spring ä¹æ°æ®æº\n\nå¦æä½ çé¡¹ç®æ¯ä¼ ç»ç Spring é¡¹ç®ï¼å½ç¶ä¹å¯ä»¥è½»æ¾å»ºç«æ°æ®æºè¿æ¥ï¼åªæ¯éè¦èªè¡è®¾ç½®çéç½®æ´å¤ä¸äºã\n\n\n# å¼å¥ Spring ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n    <dependencies>\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>druid</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n        </dependency>\n\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-context-support</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-jdbc</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-tx</artifactId>\n        </dependency>\n    </dependencies>\n</project>\n\n\n\n# Spring éç½®æ°æ®æº\n\nSpring éç½®æ°æ®æºæå¤ç§æ¹å¼ï¼ä¸é¢ä¸ä¸åä¸¾ï¼\n\n# ä½¿ç¨ JNDI æ°æ®æº\n\nå¦æ Spring åºç¨é¨ç½²å¨æ¯æ JNDI ç WEB æå¡å¨ä¸ï¼å¦ WebSphereãJBossãTomcat ç­ï¼ï¼å°±å¯ä»¥ä½¿ç¨ JNDI è·åæ°æ®æºã\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns:jee="http://www.springframework.org/schema/jee"\n  xsi:schemaLocation="http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans-3.2.xsd\nhttp://www.springframework.org/schema/jee\nhttp://www.springframework.org/schema/jee/spring-jee-3.2.xsd">\n\n  \x3c!-- 1.ä½¿ç¨beanéç½®jndiæ°æ®æº --\x3e\n  <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">\n    <property name="jndiName" value="java:comp/env/jdbc/orclight" />\n  </bean>\n\n  \x3c!-- 2.ä½¿ç¨jeeæ ç­¾éç½®jndiæ°æ®æºï¼ä¸1ç­ä»·ï¼ä½æ¯éè¦å¼å¥å½åç©ºé´ --\x3e\n  <jee:jndi-lookup id="dataSource" jndi-name=" java:comp/env/jdbc/orclight" />\n</beans>\n\n\n# ä½¿ç¨æ°æ®åºè¿æ¥æ± \n\nSpring æ¬èº«å¹¶æ²¡ææä¾æ°æ®åºè¿æ¥æ± çå®ç°ï¼éè¦èªè¡éæ©åéçæ°æ®åºè¿æ¥æ± ãä¸é¢æ¯ä¸ä¸ªä½¿ç¨ Druid ä½ä¸ºæ°æ®åºè¿æ¥æ± çç¤ºä¾ï¼\n\n<bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource"\n        init-method="init" destroy-method="close">\n    <property name="driverClassName" value="${jdbc.driver}"/>\n    <property name="url" value="${jdbc.url}"/>\n    <property name="username" value="${jdbc.username}"/>\n    <property name="password" value="${jdbc.password}"/>\n\n    \x3c!-- éç½®åå§åå¤§å°ãæå°ãæå¤§ --\x3e\n    <property name="initialSize" value="1"/>\n    <property name="minIdle" value="1"/>\n    <property name="maxActive" value="10"/>\n\n    \x3c!-- éç½®è·åè¿æ¥ç­å¾è¶æ¶çæ¶é´ --\x3e\n    <property name="maxWait" value="10000"/>\n\n    \x3c!-- éç½®é´éå¤ä¹æè¿è¡ä¸æ¬¡æ£æµï¼æ£æµéè¦å³é­çç©ºé²è¿æ¥ï¼åä½æ¯æ¯«ç§ --\x3e\n    <property name="timeBetweenEvictionRunsMillis" value="60000"/>\n\n    \x3c!-- éç½®ä¸ä¸ªè¿æ¥å¨æ± ä¸­æå°çå­çæ¶é´ï¼åä½æ¯æ¯«ç§ --\x3e\n    <property name="minEvictableIdleTimeMillis" value="300000"/>\n\n    <property name="testWhileIdle" value="true"/>\n\n    \x3c!-- è¿éå»ºè®®éç½®ä¸ºTRUEï¼é²æ­¢åå°çè¿æ¥ä¸å¯ç¨ --\x3e\n    <property name="testOnBorrow" value="true"/>\n    <property name="testOnReturn" value="false"/>\n\n    \x3c!-- æå¼PSCacheï¼å¹¶ä¸æå®æ¯ä¸ªè¿æ¥ä¸PSCacheçå¤§å° --\x3e\n    <property name="poolPreparedStatements" value="true"/>\n    <property name="maxPoolPreparedStatementPerConnectionSize"\n              value="20"/>\n\n    \x3c!-- è¿ééç½®æäº¤æ¹å¼ï¼é»è®¤å°±æ¯TRUEï¼å¯ä»¥ä¸ç¨éç½® --\x3e\n\n    <property name="defaultAutoCommit" value="true"/>\n\n    \x3c!-- éªè¯è¿æ¥ææä¸å¦çSQLï¼ä¸åçæ°æ®éç½®ä¸å --\x3e\n    <property name="validationQuery" value="select 1 "/>\n    <property name="filters" value="stat"/>\n  </bean>\n\n\n# åºäº JDBC é©±å¨çæ°æ®æº\n\n<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">\n  <property name="driverClassName" value="${jdbc.driver}"/>\n  <property name="url" value="${jdbc.url}"/>\n  <property name="username" value="${jdbc.username}"/>\n  <property name="password" value="${jdbc.password}"/>\n</bean>\n\n\n\n# SpringBoot æ°æ®æºéç½®\n\n> Spring Boot æ°æ®åºéç½®å®æ¹ææ¡£ï¼https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql\n\néè¿åé¢çå®æï¼æä»¬å·²ç»ç¥éäº SpringãSpring Boot æ¯å¦ä½è¿æ¥æ°æ®æºï¼å¹¶éè¿ JDBC æ¹å¼è®¿é®æ°æ®åºã\n\nSpringBoot æ°æ®æºçéç½®æ¹å¼æ¯å¨ application.properties æ application.yml æä»¶ä¸­æå® spring.datasource.* çéç½®ã\n\nï¼1ï¼æ°æ®æºåºæ¬éç½®æ¹å¼æ¯æå® urlãç¨æ·åãå¯ç \n\nspring.datasource.url=jdbc:mysql://localhost/test\nspring.datasource.username=dbuser\nspring.datasource.password=dbpass\n\n\nï¼2ï¼éç½® JNDI\n\nå¦ææ³è¦éè¿ JNDI æ¹å¼è¿æ¥æ°æ®æºï¼å¯ä»¥éç¨å¦ä¸æ¹å¼ï¼\n\nspring.datasource.jndi-name=java:jboss/datasources/customers\n\n\n\n# DataSourceAutoConfiguration ç±»\n\næ¾èæè§ï¼Spring Boot çéç½®æ´å ç®åï¼é£ä¹ï¼ Spring Boot åäºåªäºå·¥ä½ï¼ä½¿å¾æ¥å¥æ´å ä¾¿æ·å¢ï¼å¥¥ç§å°±å¨äº spring-boot-autoconfigure jar åï¼å¶ä¸­å®ä¹äºå¤§éç Spring Boot èªå¨éç½®ç±»ãå¶ä¸­ï¼ä¸æ°æ®åºè®¿é®ç¸å³çæ¯è¾æ ¸å¿çéç½®ç±»æï¼\n\n * DataSourceAutoConfigurationï¼æ°æ®æºèªå¨éç½®ç±»\n * JdbcTemplateAutoConfigurationï¼JdbcTemplate èªå¨éç½®ç±»\n * DataSourceTransactionManagerAutoConfigurationï¼æ°æ®æºäºå¡ç®¡çèªå¨éç½®ç±»\n * JndiDataSourceAutoConfigurationï¼JNDI æ°æ®æºèªå¨éç½®ç±»\n * EmbeddedDataSourceConfigurationï¼åµå¥å¼æ°æ®åºæ°æ®æºèªå¨éç½®ç±»\n * ç­ç­\n\nè¿äºèªå¨éç½®ç±»ä¼æ ¹æ®åç§æ¡ä»¶æ§å¶æ ¸å¿ç±»çå®ä¾åã\n\nDataSourceAutoConfiguration æ¯æ°æ®æºèªå¨éç½®ç±»ï¼å®è´è´£å®ä¾å DataSourceã\n\nDataSourceAutoConfiguration çæºç å¦ä¸ï¼çç¥é¨åä»£ç ï¼ï¼\n\n@AutoConfiguration(before = SqlInitializationAutoConfiguration.class)\n@ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })\n@ConditionalOnMissingBean(type = "io.r2dbc.spi.ConnectionFactory")\n@EnableConfigurationProperties(DataSourceProperties.class)\n@Import(DataSourcePoolMetadataProvidersConfiguration.class)\npublic class DataSourceAutoConfiguration {\n\n\t@Configuration(proxyBeanMethods = false)\n\t@Conditional(EmbeddedDatabaseCondition.class)\n\t@ConditionalOnMissingBean({ DataSource.class, XADataSource.class })\n\t@Import(EmbeddedDataSourceConfiguration.class)\n\tprotected static class EmbeddedDatabaseConfiguration {\n\t}\n\n\t@Configuration(proxyBeanMethods = false)\n\t@Conditional(PooledDataSourceCondition.class)\n\t@ConditionalOnMissingBean({ DataSource.class, XADataSource.class })\n\t@Import({ DataSourceConfiguration.Hikari.class, DataSourceConfiguration.Tomcat.class,\n\t\t\tDataSourceConfiguration.Dbcp2.class, DataSourceConfiguration.OracleUcp.class,\n\t\t\tDataSourceConfiguration.Generic.class, DataSourceJmxConfiguration.class })\n\tprotected static class PooledDataSourceConfiguration {\n  }\n\n\tstatic class PooledDataSourceCondition extends AnyNestedCondition {\n    // ç¥\n\t}\n\n\tstatic class PooledDataSourceAvailableCondition extends SpringBootCondition {\n    // ç¥\n\t}\n\n\tstatic class EmbeddedDatabaseCondition extends SpringBootCondition {\n    // ç¥\n\t}\n}\n\n\nDataSourceAutoConfiguration ç±»çæºç è§£è¯»ï¼\n\n * DataSourceProperties æ¯ DataSourceAutoConfiguration çéç½®éé¡¹ç±»ï¼åè®¸ä½¿ç¨èéè¿è®¾ç½®éé¡¹æ§å¶ DataSource åå§åè¡ä¸ºã\n * DataSourceAutoConfiguration éè¿ @Import æ³¨è§£å¼å¥ DataSourcePoolMetadataProvidersConfiguration ç±»ã\n * DataSourceAutoConfiguration ä¸­å®ä¹äºä¸¤ä¸ªåé¨ç±»ï¼åµå¥å¼æ°æ®æºéç½®ç±» EmbeddedDatabaseConfiguration å æ± åæ°æ®æºéç½®ç±» PooledDataSourceConfigurationï¼åå«æ è®°äºä¸åçå®ä¾åæ¡ä»¶ã\n   * å½æ»¡è¶³ EmbeddedDatabaseConfiguration çç¤ºä¾åæ¡ä»¶æ¶ï¼å°å¼å¥ EmbeddedDataSourceConfiguration ç±»åå§åæ°æ®æºï¼è¿ä¸ªç±»å®éä¸æ¯å è½½åµå¥å¼æ°æ®æºé©±å¨ç ClassLoader å»è¿è¡åå§åã\n   * å½æ»¡è¶³ PooledDataSourceConfiguration çç¤ºä¾åæ¡ä»¶æ¶ï¼å°å¼å¥ DataSourceConfiguration.Hikari.classãDataSourceConfiguration.Tomcat.classãDataSourceConfiguration.Dbcp2.classãDataSourceConfiguration.OracleUcp.classãDataSourceConfiguration.Generic.classãDataSourceJmxConfiguration.class è¿äºéç½®ç±»ï¼åå«å¯¹åºä¸åçæ°æ®åºè¿æ¥æ± æ¹å¼ãå·ä½éç¨åªç§æ°æ®åºè¿æ¥æ± ï¼å¯ä»¥éè¿ spring.datasource.type éç½®æå®ãå¶ä¸­ï¼Hikari æ¯ Spring Boot é»è®¤çæ°æ®åºè¿æ¥æ± ï¼spring-boot-starter-data-jdbc ä¸­åç½®äº Hikari è¿æ¥æ± é©±å¨åãå¦ææ³è¦æ¿æ¢å¶ä»æ°æ®åºè¿æ¥æ± ï¼åææ¯å¿é¡»åæå¨å¼å¥å¯¹åºçè¿æ¥æ± é©±å¨åã\n\n\n# åèèµæ\n\n * Spring å®ç½\n * Spring Framework å®æ¹ææ¡£\n * Spring Boot å®æ¹ææ¡£',normalizedContent:'# spring ä¹æ°æ®æº\n\n> æ¬æåºäº spring boot 2.7.3 çæ¬ã\n\n\n# spring boot æ°æ®æºåºæ¬éç½®\n\nspring boot æä¾äºä¸ç³»å spring.datasource.* éç½®æ¥æ§å¶ datasource çéç½®ãç¨æ·å¯ä»¥å¨ application.properties æ application.yml æä»¶ä¸­æå®æ°æ®æºéç½®ãè¿äºéç½®é¡¹ç»´æ¤å¨ datasourceproperties ã\n\nä¸é¢æ¯ä¸ä¸ªæåºæ¬ç mysql æ°æ®æºéç½®ç¤ºä¾ï¼é½æ¯å¿å¡«é¡¹ï¼ï¼\n\n# æ°æ®åºè®¿é®å°å\nspring.datasource.url = jdbc:mysql://localhost:3306/spring_tutorial?servertimezone=utc&useunicode=true&characterencoding=utf8\n# æ°æ®åºé©±å¨ç±»ï¼å¿é¡»ä¿è¯é©±å¨ç±»æ¯å¯å è½½ç\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.driver\n# æ°æ®åºè´¦å·\nspring.datasource.username = root\n# æ°æ®åºè´¦å·å¯ç \nspring.datasource.password = root\n\n\néè¦æ ¹æ®å®éæåµï¼æ¿æ¢ urlãusernameãpasswordã\n\n\n# spring boot è¿æ¥åµå¥å¼æ°æ®æº\n\nä½¿ç¨åå­åµå¥å¼æ°æ®åºå¼ååºç¨ç¨åºéå¸¸å¾æ¹ä¾¿ãæ¾ç¶ï¼åå­æ°æ®åºä¸æä¾æä¹å­å¨ãä½¿ç¨èéè¦å¨åºç¨ç¨åºå¯å¨æ¶å¡«åæ°æ®åºï¼å¹¶åå¤å¨åºç¨ç¨åºç»ææ¶ä¸¢å¼æ°æ®ã\n\nspring boot å¯ä»¥èªå¨éç½®åµå¥å¼æ°æ®åº h2ãhsql å derbyãä½¿ç¨èæ éæä¾ä»»ä½è¿æ¥ urlï¼åªéè¦åå«å¯¹è¦ä½¿ç¨çåµå¥å¼æ°æ®åºçæå»ºä¾èµé¡¹ãå¦æç±»è·¯å¾ä¸æå¤ä¸ªåµå¥å¼æ°æ®åºï¼éè¦è®¾ç½® spring.datasource.embedded-database-connection éç½®å±æ§æ¥æ§å¶ä½¿ç¨åªä¸ä¸ªãå°è¯¥å±æ§è®¾ç½®ä¸º none ä¼ç¦ç¨åµå¥å¼æ°æ®åºçèªå¨éç½®ã\n\n> æ³¨æï¼å¦æå¨æµè¯ä¸­ä½¿ç¨æ­¤åè½ï¼æ è®ºä½¿ç¨å¤å°åºç¨ç¨åºä¸ä¸æï¼æ´ä¸ªæµè¯å¥ä»¶é½ä¼éç¨åä¸ä¸ªæ°æ®åºãå¦æè¦ç¡®ä¿æ¯ä¸ªä¸ä¸æé½æä¸ä¸ªåç¬çåµå¥å¼æ°æ®åºï¼ååºå° spring.datasource.generate-unique-name è®¾ç½®ä¸º trueã\n\nä¸é¢ï¼éè¿ä¸ä¸ªå®ä¾å±ç¤ºå¦ä½è¿æ¥ h2 åµå¥å¼æ°æ®åºã\n\nï¼1ï¼å¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n<dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-data-jdbc</artifactid>\n</dependency>\n<dependency>\n  <groupid>com.h2database</groupid>\n  <artifactid>h2</artifactid>\n</dependency>\n\n\nï¼2ï¼æ°æ®æºéç½®\n\nspring.datasource.jdbc-url = jdbc:h2:mem:test\nspring.datasource.driver-class-name = org.h2.driver\nspring.datasource.username = sa\nspring.datasource.password =\n\n\n\n# spring boot è¿æ¥æ± åæ°æ®æº\n\n> å®æ´ç¤ºä¾ï¼spring-boot-data-jdbc\n\nå¨çäº§ç¯å¢ä¸­ï¼åºäºæ§è½èèï¼ä¸è¬ä¼éè¿æ°æ®åºè¿æ¥æ± è¿æ¥æ°æ®æºã\n\né¤äº datasourceproperties ä¸­çæ°æ®æºéç¨éç½®ä»¥å¤ï¼spring boot è¿æ¯æéè¿ä½¿ç¨ç±»ä¼¼spring.datasource.hikari.*ãspring.datasource.tomcat.*ãspring.datasource.dbcp2.* å spring.datasource.oracleucp.* çåç¼æ¥éç½®æå®çæ°æ®åºè¿æ¥æ± å±æ§ã\n\nä¸é¢ï¼å°±æ¯ä¸ä»½ hikari çè¿æ¥æ± éç½®ç¤ºä¾ï¼\n\n# è¿æ¥æ± åç§°\nspring.datasource.hikari.pool-name = springtutorialhikaripool\n# æå¤§è¿æ¥æ°ï¼å°äºç­äº 0 ä¼è¢«éç½®ä¸ºé»è®¤å¼ 10ï¼å¤§äºé¶å°äº 1 ä¼è¢«éç½®ä¸º minimum-idle çå¼\nspring.datasource.hikari.maximum-pool-size = 10\n# æå°ç©ºé²è¿æ¥ï¼é»è®¤å¼10ï¼å°äº 0 æå¤§äº maximum-pool-sizeï¼é½ä¼éç½®ä¸º maximum-pool-size\nspring.datasource.hikari.minimum-idle = 10\n# è¿æ¥è¶æ¶æ¶é´ï¼åä½ï¼æ¯«ç§ï¼ï¼å°äº 250 æ¯«ç§ï¼ä¼è¢«éç½®ä¸ºé»è®¤å¼ 30 ç§\nspring.datasource.hikari.connection-timeout = 60000\n# ç©ºé²è¿æ¥è¶æ¶æ¶é´ï¼é»è®¤å¼ 600000ï¼10åéï¼ï¼å¤§äºç­äº max-lifetime ä¸ max-lifetime>0ï¼ä¼è¢«éç½®ä¸º0ï¼ä¸ç­äº 0 ä¸å°äº 10 ç§ï¼ä¼è¢«éç½®ä¸º 10 ç§\n# åªæç©ºé²è¿æ¥æ°å¤§äºæå¤§è¿æ¥æ°ä¸ç©ºé²æ¶é´è¶è¿è¯¥å¼ï¼æä¼è¢«éæ¾\nspring.datasource.hikari.idle-timeout = 600000\n# è¿æ¥æå¤§å­æ´»æ¶é´ï¼ä¸ç­äº 0 ä¸å°äº 30 ç§ï¼ä¼è¢«éç½®ä¸ºé»è®¤å¼ 30 åéãè¯¥å¼åºè¯¥æ¯æ°æ®åºæè®¾ç½®çè¶æ¶æ¶é´ç­\nspring.datasource.hikari.max-lifetime = 540000\n\n\nspring boot ä¼æä»¥ä¸é¡ºåºæ£æµè¿æ¥æ± æ¯å¦å¯ç¨ï¼å¦æå¯ç¨å°±éæ©å¯¹åºçæ± å datasourceï¼\n\nhikaricp -> tomcat pooling datasource -> dbcp2 -> oracle ucp\n\nç¨æ·ä¹å¯ä»¥éè¿ spring.datasource.type æ¥æå®æ°æ®æºç±»åã\n\næ­¤å¤ï¼ä¹å¯ä»¥ä½¿ç¨ datasourcebuilder æå¨éç½®å¶ä»è¿æ¥æ± ãå¦æèªå®ä¹ datasource beanï¼åä¸ä¼åçèªå¨éç½®ã datasourcebuilder æ¯æä»¥ä¸è¿æ¥æ± ï¼\n\n * hikaricp\n * tomcat pooling datasource\n * commons dbcp2\n * oracle ucp & oracledatasource\n * spring frameworkâs simpledriverdatasource\n * h2 jdbcdatasource\n * postgresql pgsimpledatasource\n * c3p0\n\n\n# å¼å¥ spring boot ä¾èµ\n\nä½ å¯ä»¥éè¿ spring boot å®æ¹çåå§åå¨ï¼spring initializrï¼éæ©éè¦çç»ä»¶æ¥åå»ºä¸ä¸ª spring boot å·¥ç¨ãæèï¼ç´æ¥å¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n<dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-data-jdbc</artifactid>\n</dependency>\n<dependency>\n  <groupid>mysql</groupid>\n  <artifactid>mysql-connector-java</artifactid>\n</dependency>\n\n\n\n# æµè¯åæ°æ®æºè¿æ¥\n\nimport lombok.extern.slf4j.slf4j;\nimport org.springframework.boot.commandlinerunner;\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\nimport org.springframework.jdbc.core.jdbctemplate;\n\nimport java.sql.connection;\nimport javax.sql.datasource;\n\n@slf4j\n@springbootapplication\npublic class springbootdatajdbcapplication implements commandlinerunner {\n\n    private final jdbctemplate jdbctemplate;\n\n    public springbootdatajdbcapplication(jdbctemplate jdbctemplate) {\n        this.jdbctemplate = jdbctemplate;\n    }\n\n    public static void main(string[] args) {\n        springapplication.run(springbootdatajdbcapplication.class, args);\n    }\n\n    @override\n    public void run(string... args) throws exception {\n        datasource datasource = jdbctemplate.getdatasource();\n\n        connection connection;\n        if (datasource != null) {\n            connection = datasource.getconnection();\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n            return;\n        }\n\n        if (connection != null) {\n            log.info("æ°æ®æº url: {}", connection.getmetadata().geturl());\n        } else {\n            log.error("è¿æ¥æ°æ®æºå¤±è´¥ï¼");\n        }\n    }\n\n}\n\n\nè¿è¡ main æ¹æ³åï¼æ§å¶å°ä¼è¾åºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ°æ®æºè¿æ¥æåï¼\n\n20:50:18.449 [main] [info ] i.g.d.s.d.springbootdatajdbcapplication.run - æ°æ®æº url: jdbc:mysql://localhost:3306/spring_tutorial?servertimezone=utc&useunicode=true&characterencoding=utf8\n\n\n\n# spring boot è¿æ¥å¤æ°æ®æº\n\n> å®æ´ç¤ºä¾ï¼spring-boot-data-jdbc-multi-datasource\n\nspring boot è¿æ¥å¤æ°æ®æºæéè¦çä¾èµå¹¶æ ä¸åï¼ä¸»è¦å·®å¼å¨äºæ°æ®æºçéç½®ãspring boot é»è®¤çæ°æ®æºéç½®ç±»ä¸º org.springframework.boot.autoconfigure.jdbc.datasourceautoconfigurationãä½¿ç¨èåªè¦æå®ä¸äºå¿è¦ç spring.datasource éç½®ï¼datasourceautoconfiguration ç±»å°±ä¼èªå¨å®æå©ä¸çæ°æ®æºå®ä¾åå·¥ä½ã\n\n\n# å¤æ°æ®æºéç½®\n\nä¸é¢çç¤ºä¾ä¸­ï¼èªå®ä¹äºä¸ä¸ªæ°æ®æºéç½®ç±»ï¼éè¿è¯»åä¸åç spring.datasource.xxx æ¥å®æå¯¹äºä¸åæ°æ®æºçå®ä¾åå·¥ä½ãå¯¹äº jdbc æ¥è¯´ï¼æéè¦çï¼å°±æ¯å®ä¾å datasource å jdbctemplateã\n\nimport org.springframework.beans.factory.annotation.qualifier;\nimport org.springframework.boot.context.properties.configurationproperties;\nimport org.springframework.boot.jdbc.datasourcebuilder;\nimport org.springframework.context.annotation.bean;\nimport org.springframework.context.annotation.configuration;\nimport org.springframework.context.annotation.primary;\nimport org.springframework.jdbc.core.jdbctemplate;\n\n@configuration\npublic class datasourceconfig {\n\n    @primary\n    @bean("mysqldatasource")\n    @configurationproperties(prefix = "spring.datasource.mysql")\n    public datasource mysqldatasource() {\n        return datasourcebuilder.create().build();\n    }\n\n    @primary\n    @bean("mysqljdbctemplate")\n    public jdbctemplate mysqljdbctemplate(@qualifier("mysqldatasource") datasource datasource) {\n        return new jdbctemplate(datasource);\n    }\n\n    @bean("h2datasource")\n    @configurationproperties(prefix = "spring.datasource.h2")\n    public datasource h2datasource() {\n        return datasourcebuilder.create().build();\n    }\n\n    @bean(name = "h2jdbctemplate")\n    public jdbctemplate h2jdbctemplate(@qualifier("h2datasource") datasource datasource) {\n        return new jdbctemplate(datasource);\n    }\n\n}\n\n\napplication.properties æ application.yml éç½®æä»¶ä¸­ä¹å¿é¡»ä»¥ @configurationproperties ææå®çéç½®åç¼è¿è¡éç½®ï¼\n\n# æ°æ®æºä¸ï¼mysql\nspring.datasource.mysql.jdbc-url = jdbc:mysql://localhost:3306/spring_tutorial?servertimezone=utc&useunicode=true&characterencoding=utf8&usessl=false\nspring.datasource.mysql.driver-class-name = com.mysql.cj.jdbc.driver\nspring.datasource.mysql.username = root\nspring.datasource.mysql.password = root\n# æ°æ®æºä¸ï¼h2\nspring.datasource.h2.jdbc-url = jdbc:h2:mem:test\nspring.datasource.h2.driver-class-name = org.h2.driver\nspring.datasource.h2.username = sa\nspring.datasource.h2.password =\n\n\n\n# æµè¯å¤æ°æ®æºè¿æ¥\n\n\nimport org.slf4j.logger;\nimport org.slf4j.loggerfactory;\nimport org.springframework.beans.factory.annotation.qualifier;\nimport org.springframework.boot.commandlinerunner;\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\nimport org.springframework.jdbc.core.jdbctemplate;\n\nimport java.sql.connection;\nimport java.sql.sqlexception;\nimport javax.sql.datasource;\n\n@springbootapplication\npublic class springbootdatajdbcmultidatasourceapplication implements commandlinerunner {\n\n    private static final logger log = loggerfactory.getlogger(springbootdatajdbcmultidatasourceapplication.class);\n\n    private final userdao mysqluserdao;\n\n    private final userdao h2userdao;\n\n    public springbootdatajdbcmultidatasourceapplication(@qualifier("mysqluserdao") userdao mysqluserdao,\n        @qualifier("h2userdao") userdao h2userdao) {\n        this.mysqluserdao = mysqluserdao;\n        this.h2userdao = h2userdao;\n    }\n\n    public static void main(string[] args) {\n        springapplication.run(springbootdatajdbcmultidatasourceapplication.class, args);\n    }\n\n    @override\n    public void run(string... args) throws exception {\n\n        if (mysqluserdao != null && mysqluserdao.getjdbctemplate() != null) {\n            printdatasourceinfo(mysqluserdao.getjdbctemplate());\n            log.info("connect to mysql datasource success.");\n        } else {\n            log.error("connect to mysql datasource failed!");\n            return;\n        }\n\n        if (h2userdao != null) {\n            printdatasourceinfo(h2userdao.getjdbctemplate());\n            log.info("connect to h2 datasource success.");\n        } else {\n            log.error("connect to h2 datasource failed!");\n            return;\n        }\n\n        // ä¸»æ°æ®æºæ§è¡ jdbc sql\n        mysqluserdao.recreatetable();\n\n        // æ¬¡æ°æ®æºæ§è¡ jdbc sql\n        h2userdao.recreatetable();\n    }\n\n    private void printdatasourceinfo(jdbctemplate jdbctemplate) throws sqlexception {\n\n        datasource datasource = jdbctemplate.getdatasource();\n\n        connection connection;\n        if (datasource != null) {\n            connection = datasource.getconnection();\n        } else {\n            log.error("get datasource failed!");\n            return;\n        }\n\n        if (connection != null) {\n            log.info("datasource url: {}", connection.getmetadata().geturl());\n        } else {\n            log.error("connect to datasource failed!");\n        }\n    }\n\n}\n\n\nè¿è¡ main æ¹æ³åï¼æ§å¶å°ä¼è¾åºä»¥ä¸åå®¹ï¼è¡¨ç¤ºæ°æ®æºè¿æ¥æåï¼\n\n21:16:44.654 [main] [info ] i.g.d.s.d.springbootdatajdbcmultidatasourceapplication.printdatasourceinfo - datasource url: jdbc:mysql://localhost:3306/spring_tutorial?servertimezone=utc&useunicode=true&characterencoding=utf8&usessl=false\n21:16:44.654 [main] [info ] i.g.d.s.d.springbootdatajdbcmultidatasourceapplication.run - connect to mysql datasource success.\n\n21:16:44.726 [main] [info ] i.g.d.s.d.springbootdatajdbcmultidatasourceapplication.printdatasourceinfo - datasource url: jdbc:h2:mem:test\n21:16:44.726 [main] [info ] i.g.d.s.d.springbootdatajdbcmultidatasourceapplication.run - connect to h2 datasource success.\n\n\n\n# spring ä¹æ°æ®æº\n\nå¦æä½ çé¡¹ç®æ¯ä¼ ç»ç spring é¡¹ç®ï¼å½ç¶ä¹å¯ä»¥è½»æ¾å»ºç«æ°æ®æºè¿æ¥ï¼åªæ¯éè¦èªè¡è®¾ç½®çéç½®æ´å¤ä¸äºã\n\n\n# å¼å¥ spring ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥æéè¦çä¾èµï¼\n\n    <dependencies>\n        <dependency>\n            <groupid>com.alibaba</groupid>\n            <artifactid>druid</artifactid>\n        </dependency>\n        <dependency>\n            <groupid>mysql</groupid>\n            <artifactid>mysql-connector-java</artifactid>\n        </dependency>\n\n        <dependency>\n            <groupid>org.springframework</groupid>\n            <artifactid>spring-context-support</artifactid>\n        </dependency>\n        <dependency>\n            <groupid>org.springframework</groupid>\n            <artifactid>spring-jdbc</artifactid>\n        </dependency>\n        <dependency>\n            <groupid>org.springframework</groupid>\n            <artifactid>spring-tx</artifactid>\n        </dependency>\n    </dependencies>\n</project>\n\n\n\n# spring éç½®æ°æ®æº\n\nspring éç½®æ°æ®æºæå¤ç§æ¹å¼ï¼ä¸é¢ä¸ä¸åä¸¾ï¼\n\n# ä½¿ç¨ jndi æ°æ®æº\n\nå¦æ spring åºç¨é¨ç½²å¨æ¯æ jndi ç web æå¡å¨ä¸ï¼å¦ websphereãjbossãtomcat ç­ï¼ï¼å°±å¯ä»¥ä½¿ç¨ jndi è·åæ°æ®æºã\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n  xmlns:jee="http://www.springframework.org/schema/jee"\n  xsi:schemalocation="http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans-3.2.xsd\nhttp://www.springframework.org/schema/jee\nhttp://www.springframework.org/schema/jee/spring-jee-3.2.xsd">\n\n  \x3c!-- 1.ä½¿ç¨beanéç½®jndiæ°æ®æº --\x3e\n  <bean id="datasource" class="org.springframework.jndi.jndiobjectfactorybean">\n    <property name="jndiname" value="java:comp/env/jdbc/orclight" />\n  </bean>\n\n  \x3c!-- 2.ä½¿ç¨jeeæ ç­¾éç½®jndiæ°æ®æºï¼ä¸1ç­ä»·ï¼ä½æ¯éè¦å¼å¥å½åç©ºé´ --\x3e\n  <jee:jndi-lookup id="datasource" jndi-name=" java:comp/env/jdbc/orclight" />\n</beans>\n\n\n# ä½¿ç¨æ°æ®åºè¿æ¥æ± \n\nspring æ¬èº«å¹¶æ²¡ææä¾æ°æ®åºè¿æ¥æ± çå®ç°ï¼éè¦èªè¡éæ©åéçæ°æ®åºè¿æ¥æ± ãä¸é¢æ¯ä¸ä¸ªä½¿ç¨ druid ä½ä¸ºæ°æ®åºè¿æ¥æ± çç¤ºä¾ï¼\n\n<bean id="datasource" class="com.alibaba.druid.pool.druiddatasource"\n        init-method="init" destroy-method="close">\n    <property name="driverclassname" value="${jdbc.driver}"/>\n    <property name="url" value="${jdbc.url}"/>\n    <property name="username" value="${jdbc.username}"/>\n    <property name="password" value="${jdbc.password}"/>\n\n    \x3c!-- éç½®åå§åå¤§å°ãæå°ãæå¤§ --\x3e\n    <property name="initialsize" value="1"/>\n    <property name="minidle" value="1"/>\n    <property name="maxactive" value="10"/>\n\n    \x3c!-- éç½®è·åè¿æ¥ç­å¾è¶æ¶çæ¶é´ --\x3e\n    <property name="maxwait" value="10000"/>\n\n    \x3c!-- éç½®é´éå¤ä¹æè¿è¡ä¸æ¬¡æ£æµï¼æ£æµéè¦å³é­çç©ºé²è¿æ¥ï¼åä½æ¯æ¯«ç§ --\x3e\n    <property name="timebetweenevictionrunsmillis" value="60000"/>\n\n    \x3c!-- éç½®ä¸ä¸ªè¿æ¥å¨æ± ä¸­æå°çå­çæ¶é´ï¼åä½æ¯æ¯«ç§ --\x3e\n    <property name="minevictableidletimemillis" value="300000"/>\n\n    <property name="testwhileidle" value="true"/>\n\n    \x3c!-- è¿éå»ºè®®éç½®ä¸ºtrueï¼é²æ­¢åå°çè¿æ¥ä¸å¯ç¨ --\x3e\n    <property name="testonborrow" value="true"/>\n    <property name="testonreturn" value="false"/>\n\n    \x3c!-- æå¼pscacheï¼å¹¶ä¸æå®æ¯ä¸ªè¿æ¥ä¸pscacheçå¤§å° --\x3e\n    <property name="poolpreparedstatements" value="true"/>\n    <property name="maxpoolpreparedstatementperconnectionsize"\n              value="20"/>\n\n    \x3c!-- è¿ééç½®æäº¤æ¹å¼ï¼é»è®¤å°±æ¯trueï¼å¯ä»¥ä¸ç¨éç½® --\x3e\n\n    <property name="defaultautocommit" value="true"/>\n\n    \x3c!-- éªè¯è¿æ¥ææä¸å¦çsqlï¼ä¸åçæ°æ®éç½®ä¸å --\x3e\n    <property name="validationquery" value="select 1 "/>\n    <property name="filters" value="stat"/>\n  </bean>\n\n\n# åºäº jdbc é©±å¨çæ°æ®æº\n\n<bean id="datasource" class="org.springframework.jdbc.datasource.drivermanagerdatasource">\n  <property name="driverclassname" value="${jdbc.driver}"/>\n  <property name="url" value="${jdbc.url}"/>\n  <property name="username" value="${jdbc.username}"/>\n  <property name="password" value="${jdbc.password}"/>\n</bean>\n\n\n\n# springboot æ°æ®æºéç½®\n\n> spring boot æ°æ®åºéç½®å®æ¹ææ¡£ï¼https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql\n\néè¿åé¢çå®æï¼æä»¬å·²ç»ç¥éäº springãspring boot æ¯å¦ä½è¿æ¥æ°æ®æºï¼å¹¶éè¿ jdbc æ¹å¼è®¿é®æ°æ®åºã\n\nspringboot æ°æ®æºçéç½®æ¹å¼æ¯å¨ application.properties æ application.yml æä»¶ä¸­æå® spring.datasource.* çéç½®ã\n\nï¼1ï¼æ°æ®æºåºæ¬éç½®æ¹å¼æ¯æå® urlãç¨æ·åãå¯ç \n\nspring.datasource.url=jdbc:mysql://localhost/test\nspring.datasource.username=dbuser\nspring.datasource.password=dbpass\n\n\nï¼2ï¼éç½® jndi\n\nå¦ææ³è¦éè¿ jndi æ¹å¼è¿æ¥æ°æ®æºï¼å¯ä»¥éç¨å¦ä¸æ¹å¼ï¼\n\nspring.datasource.jndi-name=java:jboss/datasources/customers\n\n\n\n# datasourceautoconfiguration ç±»\n\næ¾èæè§ï¼spring boot çéç½®æ´å ç®åï¼é£ä¹ï¼ spring boot åäºåªäºå·¥ä½ï¼ä½¿å¾æ¥å¥æ´å ä¾¿æ·å¢ï¼å¥¥ç§å°±å¨äº spring-boot-autoconfigure jar åï¼å¶ä¸­å®ä¹äºå¤§éç spring boot èªå¨éç½®ç±»ãå¶ä¸­ï¼ä¸æ°æ®åºè®¿é®ç¸å³çæ¯è¾æ ¸å¿çéç½®ç±»æï¼\n\n * datasourceautoconfigurationï¼æ°æ®æºèªå¨éç½®ç±»\n * jdbctemplateautoconfigurationï¼jdbctemplate èªå¨éç½®ç±»\n * datasourcetransactionmanagerautoconfigurationï¼æ°æ®æºäºå¡ç®¡çèªå¨éç½®ç±»\n * jndidatasourceautoconfigurationï¼jndi æ°æ®æºèªå¨éç½®ç±»\n * embeddeddatasourceconfigurationï¼åµå¥å¼æ°æ®åºæ°æ®æºèªå¨éç½®ç±»\n * ç­ç­\n\nè¿äºèªå¨éç½®ç±»ä¼æ ¹æ®åç§æ¡ä»¶æ§å¶æ ¸å¿ç±»çå®ä¾åã\n\ndatasourceautoconfiguration æ¯æ°æ®æºèªå¨éç½®ç±»ï¼å®è´è´£å®ä¾å datasourceã\n\ndatasourceautoconfiguration çæºç å¦ä¸ï¼çç¥é¨åä»£ç ï¼ï¼\n\n@autoconfiguration(before = sqlinitializationautoconfiguration.class)\n@conditionalonclass({ datasource.class, embeddeddatabasetype.class })\n@conditionalonmissingbean(type = "io.r2dbc.spi.connectionfactory")\n@enableconfigurationproperties(datasourceproperties.class)\n@import(datasourcepoolmetadataprovidersconfiguration.class)\npublic class datasourceautoconfiguration {\n\n\t@configuration(proxybeanmethods = false)\n\t@conditional(embeddeddatabasecondition.class)\n\t@conditionalonmissingbean({ datasource.class, xadatasource.class })\n\t@import(embeddeddatasourceconfiguration.class)\n\tprotected static class embeddeddatabaseconfiguration {\n\t}\n\n\t@configuration(proxybeanmethods = false)\n\t@conditional(pooleddatasourcecondition.class)\n\t@conditionalonmissingbean({ datasource.class, xadatasource.class })\n\t@import({ datasourceconfiguration.hikari.class, datasourceconfiguration.tomcat.class,\n\t\t\tdatasourceconfiguration.dbcp2.class, datasourceconfiguration.oracleucp.class,\n\t\t\tdatasourceconfiguration.generic.class, datasourcejmxconfiguration.class })\n\tprotected static class pooleddatasourceconfiguration {\n  }\n\n\tstatic class pooleddatasourcecondition extends anynestedcondition {\n    // ç¥\n\t}\n\n\tstatic class pooleddatasourceavailablecondition extends springbootcondition {\n    // ç¥\n\t}\n\n\tstatic class embeddeddatabasecondition extends springbootcondition {\n    // ç¥\n\t}\n}\n\n\ndatasourceautoconfiguration ç±»çæºç è§£è¯»ï¼\n\n * datasourceproperties æ¯ datasourceautoconfiguration çéç½®éé¡¹ç±»ï¼åè®¸ä½¿ç¨èéè¿è®¾ç½®éé¡¹æ§å¶ datasource åå§åè¡ä¸ºã\n * datasourceautoconfiguration éè¿ @import æ³¨è§£å¼å¥ datasourcepoolmetadataprovidersconfiguration ç±»ã\n * datasourceautoconfiguration ä¸­å®ä¹äºä¸¤ä¸ªåé¨ç±»ï¼åµå¥å¼æ°æ®æºéç½®ç±» embeddeddatabaseconfiguration å æ± åæ°æ®æºéç½®ç±» pooleddatasourceconfigurationï¼åå«æ è®°äºä¸åçå®ä¾åæ¡ä»¶ã\n   * å½æ»¡è¶³ embeddeddatabaseconfiguration çç¤ºä¾åæ¡ä»¶æ¶ï¼å°å¼å¥ embeddeddatasourceconfiguration ç±»åå§åæ°æ®æºï¼è¿ä¸ªç±»å®éä¸æ¯å è½½åµå¥å¼æ°æ®æºé©±å¨ç classloader å»è¿è¡åå§åã\n   * å½æ»¡è¶³ pooleddatasourceconfiguration çç¤ºä¾åæ¡ä»¶æ¶ï¼å°å¼å¥ datasourceconfiguration.hikari.classãdatasourceconfiguration.tomcat.classãdatasourceconfiguration.dbcp2.classãdatasourceconfiguration.oracleucp.classãdatasourceconfiguration.generic.classãdatasourcejmxconfiguration.class è¿äºéç½®ç±»ï¼åå«å¯¹åºä¸åçæ°æ®åºè¿æ¥æ± æ¹å¼ãå·ä½éç¨åªç§æ°æ®åºè¿æ¥æ± ï¼å¯ä»¥éè¿ spring.datasource.type éç½®æå®ãå¶ä¸­ï¼hikari æ¯ spring boot é»è®¤çæ°æ®åºè¿æ¥æ± ï¼spring-boot-starter-data-jdbc ä¸­åç½®äº hikari è¿æ¥æ± é©±å¨åãå¦ææ³è¦æ¿æ¢å¶ä»æ°æ®åºè¿æ¥æ± ï¼åææ¯å¿é¡»åæå¨å¼å¥å¯¹åºçè¿æ¥æ± é©±å¨åã\n\n\n# åèèµæ\n\n * spring å®ç½\n * spring framework å®æ¹ææ¡£\n * spring boot å®æ¹ææ¡£',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ä¹äºå¡",frontmatter:{title:"Spring ä¹äºå¡",date:"2022-09-22T07:46:49.000Z",order:3,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","äºå¡"],permalink:"/pages/128c54/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/03.Spring%E4%B9%8B%E4%BA%8B%E5%8A%A1.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/03.Springä¹äºå¡.md",key:"v-ab53d220",path:"/pages/128c54/",headers:[{level:2,title:"çè§£äºå¡",slug:"çè§£äºå¡",normalizedTitle:"çè§£äºå¡",charIndex:234},{level:3,title:"äºå¡çç¹æ§",slug:"äºå¡çç¹æ§",normalizedTitle:"äºå¡çç¹æ§",charIndex:360},{level:3,title:"å¨å±äºå¡",slug:"å¨å±äºå¡",normalizedTitle:"å¨å±äºå¡",charIndex:334},{level:3,title:"æ¬å°äºå¡",slug:"æ¬å°äºå¡",normalizedTitle:"æ¬å°äºå¡",charIndex:339},{level:3,title:"Spring å¯¹äºå¡çæ¯æ",slug:"spring-å¯¹äºå¡çæ¯æ",normalizedTitle:"spring å¯¹äºå¡çæ¯æ",charIndex:1371},{level:3,title:"Spring äºå¡çä¼ç¹",slug:"spring-äºå¡çä¼ç¹",normalizedTitle:"spring äºå¡çä¼ç¹",charIndex:1727},{level:2,title:"æ ¸å¿ API",slug:"æ ¸å¿-api",normalizedTitle:"æ ¸å¿ api",charIndex:1950},{level:3,title:"TransactionManager",slug:"transactionmanager",normalizedTitle:"transactionmanager",charIndex:1961},{level:4,title:"PlatformTransactionManager",slug:"platformtransactionmanager",normalizedTitle:"platformtransactionmanager",charIndex:2078},{level:4,title:"JDBC äºå¡",slug:"jdbc-äºå¡",normalizedTitle:"jdbc äºå¡",charIndex:3408},{level:4,title:"Hibernate äºå¡",slug:"hibernate-äºå¡",normalizedTitle:"hibernate äºå¡",charIndex:3858},{level:4,title:"Java æä¹å API äºå¡ï¼JPAï¼",slug:"java-æä¹å-api-äºå¡-jpa",normalizedTitle:"java æä¹å api äºå¡ï¼jpaï¼",charIndex:4402},{level:4,title:"Java åç API äºå¡ï¼JTAï¼",slug:"java-åç-api-äºå¡-jta",normalizedTitle:"java åç api äºå¡ï¼jtaï¼",charIndex:4907},{level:4,title:"ReactiveTransactionManager",slug:"reactivetransactionmanager",normalizedTitle:"reactivetransactionmanager",charIndex:2151},{level:3,title:"TransactionDefinition",slug:"transactiondefinition",normalizedTitle:"transactiondefinition",charIndex:2371},{level:4,title:"ä¼ æ­è¡ä¸º",slug:"ä¼ æ­è¡ä¸º",normalizedTitle:"ä¼ æ­è¡ä¸º",charIndex:6300},{level:4,title:"éç¦»çº§å«",slug:"éç¦»çº§å«",normalizedTitle:"éç¦»çº§å«",charIndex:6342},{level:4,title:"åªè¯»",slug:"åªè¯»",normalizedTitle:"åªè¯»",charIndex:6451},{level:4,title:"äºå¡è¶æ¶",slug:"äºå¡è¶æ¶",normalizedTitle:"äºå¡è¶æ¶",charIndex:15e3},{level:4,title:"åæ»è§å",slug:"åæ»è§å",normalizedTitle:"åæ»è§å",charIndex:15126},{level:3,title:"TransactionStatus",slug:"transactionstatus",normalizedTitle:"transactionstatus",charIndex:2338},{level:3,title:"TransactionTemplate",slug:"transactiontemplate",normalizedTitle:"transactiontemplate",charIndex:15827},{level:2,title:"å£°æå¼äºå¡ç®¡ç",slug:"å£°æå¼äºå¡ç®¡ç",normalizedTitle:"å£°æå¼äºå¡ç®¡ç",charIndex:936},{level:3,title:"Spring å£°æå¼äºå¡ç®¡ççå®ç°",slug:"spring-å£°æå¼äºå¡ç®¡ççå®ç°",normalizedTitle:"spring å£°æå¼äºå¡ç®¡ççå®ç°",charIndex:17682},{level:3,title:"å£°æå¼äºå¡ç¤ºä¾",slug:"å£°æå¼äºå¡ç¤ºä¾",normalizedTitle:"å£°æå¼äºå¡ç¤ºä¾",charIndex:18398},{level:3,title:"åæ»ä¸ä¸ªå£°ææ§äºå¡",slug:"åæ»ä¸ä¸ªå£°ææ§äºå¡",normalizedTitle:"åæ»ä¸ä¸ªå£°ææ§äºå¡",charIndex:23170},{level:3,title:"ä¸ºä¸åç Bean éç½®ä¸åçäºå¡è¯­ä¹",slug:"ä¸ºä¸åç-bean-éç½®ä¸åçäºå¡è¯­ä¹",normalizedTitle:"ä¸ºä¸åç bean éç½®ä¸åçäºå¡è¯­ä¹",charIndex:25286},{level:3,title:"<tx:advice/> éç½®",slug:"tx-advice-éç½®",normalizedTitle:'<routerlink to="./tx:advice/">tx:advice/</routerlink> éç½®',charIndex:null},{level:3,title:"ä½¿ç¨ @Transactional æ³¨è§£",slug:"ä½¿ç¨-transactional-æ³¨è§£",normalizedTitle:"ä½¿ç¨ @transactional æ³¨è§£",charIndex:29784},{level:4,title:"@Transactional éç½®",slug:"transactional-éç½®",normalizedTitle:"@transactional éç½®",charIndex:31864},{level:4,title:"å¤äºå¡ç®¡çå¨åºæ¯ä¸ä½¿ç¨ @Transactional",slug:"å¤äºå¡ç®¡çå¨åºæ¯ä¸ä½¿ç¨-transactional",normalizedTitle:"å¤äºå¡ç®¡çå¨åºæ¯ä¸ä½¿ç¨ @transactional",charIndex:34797},{level:4,title:"èªå®ä¹ç»åæ³¨è§£",slug:"èªå®ä¹ç»åæ³¨è§£",normalizedTitle:"èªå®ä¹ç»åæ³¨è§£",charIndex:36024},{level:4,title:"äºå¡ä¼ æ­",slug:"äºå¡ä¼ æ­",normalizedTitle:"äºå¡ä¼ æ­",charIndex:13015},{level:2,title:"JDBC å¼å¸¸æ½è±¡",slug:"jdbc-å¼å¸¸æ½è±¡",normalizedTitle:"jdbc å¼å¸¸æ½è±¡",charIndex:37551},{level:2,title:"Spring äºå¡æä½³å®è·µ",slug:"spring-äºå¡æä½³å®è·µ",normalizedTitle:"spring äºå¡æä½³å®è·µ",charIndex:37710},{level:3,title:"Spring äºå¡æªçæ",slug:"spring-äºå¡æªçæ",normalizedTitle:"spring äºå¡æªçæ",charIndex:37730},{level:4,title:"@Transactional æ¹æ³å¿é¡»æ¯ public",slug:"transactional-æ¹æ³å¿é¡»æ¯-public",normalizedTitle:"@transactional æ¹æ³å¿é¡»æ¯ public",charIndex:37821},{level:4,title:"å¿é¡»éè¿ Spring æ³¨å¥ç Bean è¿è¡è°ç¨",slug:"å¿é¡»éè¿-spring-æ³¨å¥ç-bean-è¿è¡è°ç¨",normalizedTitle:"å¿é¡»éè¿ spring æ³¨å¥ç bean è¿è¡è°ç¨",charIndex:38538},{level:3,title:"äºå¡è½ç¶çæä½æªåæ»",slug:"äºå¡è½ç¶çæä½æªåæ»",normalizedTitle:"äºå¡è½ç¶çæä½æªåæ»",charIndex:39195},{level:3,title:"ç»åäºå¡ä¼ æ­æ¹å¼",slug:"ç»åäºå¡ä¼ æ­æ¹å¼",normalizedTitle:"ç»åäºå¡ä¼ æ­æ¹å¼",charIndex:41141},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:41582}],headersStr:"çè§£äºå¡ äºå¡çç¹æ§ å¨å±äºå¡ æ¬å°äºå¡ Spring å¯¹äºå¡çæ¯æ Spring äºå¡çä¼ç¹ æ ¸å¿ API TransactionManager PlatformTransactionManager JDBC äºå¡ Hibernate äºå¡ Java æä¹å API äºå¡ï¼JPAï¼ Java åç API äºå¡ï¼JTAï¼ ReactiveTransactionManager TransactionDefinition ä¼ æ­è¡ä¸º éç¦»çº§å« åªè¯» äºå¡è¶æ¶ åæ»è§å TransactionStatus TransactionTemplate å£°æå¼äºå¡ç®¡ç Spring å£°æå¼äºå¡ç®¡ççå®ç° å£°æå¼äºå¡ç¤ºä¾ åæ»ä¸ä¸ªå£°ææ§äºå¡ ä¸ºä¸åç Bean éç½®ä¸åçäºå¡è¯­ä¹ <tx:advice/> éç½® ä½¿ç¨ @Transactional æ³¨è§£ @Transactional éç½® å¤äºå¡ç®¡çå¨åºæ¯ä¸ä½¿ç¨ @Transactional èªå®ä¹ç»åæ³¨è§£ äºå¡ä¼ æ­ JDBC å¼å¸¸æ½è±¡ Spring äºå¡æä½³å®è·µ Spring äºå¡æªçæ @Transactional æ¹æ³å¿é¡»æ¯ public å¿é¡»éè¿ Spring æ³¨å¥ç Bean è¿è¡è°ç¨ äºå¡è½ç¶çæä½æªåæ» ç»åäºå¡ä¼ æ­æ¹å¼ åèèµæ",content:'# Spring ä¹äºå¡\n\nSpring éå¯¹ Java Transaction API (JTA)ãJDBCãHibernate å Java Persistence API(JPA) ç­äºå¡ APIï¼å®ç°äºä¸è´çç¼ç¨æ¨¡åï¼è Spring çå£°æå¼äºå¡åè½æ´æ¯æä¾äºæå¶æ¹ä¾¿çäºå¡éç½®æ¹å¼ï¼éå Spring Boot çèªå¨éç½®ï¼å¤§å¤æ° Spring Boot é¡¹ç®åªéè¦å¨æ¹æ³ä¸æ è®° @Transactional æ³¨è§£ï¼å³å¯ä¸é®å¼å¯æ¹æ³çäºå¡æ§éç½®ã\n\n\n# çè§£äºå¡\n\nå¨è½¯ä»¶å¼åé¢åï¼å¨ææå¨æ çæä½è¢«ç§°ä¸ºäºå¡ï¼transactionï¼ãäºå¡åè®¸ä½ å°å ä¸ªæä½ç»åæä¸ä¸ªè¦ä¹å¨é¨åçè¦ä¹å¨é¨ä¸åççå·¥ä½ååãä¼ ç»ä¸ Java EE å¼åå¯¹äºå¡ç®¡çæä¸¤ç§éæ©ï¼å¨å±äºå¡ææ¬å°äºå¡ï¼ä¸¤èé½æå¾å¤§çå±éæ§ã\n\n\n# äºå¡çç¹æ§\n\näºå¡åºè¯¥å·æ 4 ä¸ªå±æ§ï¼åå­æ§ãä¸è´æ§ãéç¦»æ§ãæä¹æ§ãè¿åä¸ªå±æ§éå¸¸ç§°ä¸º ACIDã\n\n * åå­æ§ï¼Atomicï¼ï¼ä¸ä¸ªäºå¡æ¯ä¸ä¸ªä¸å¯åå²çå·¥ä½åä½ï¼äºå¡ä¸­åæ¬çè¯¸æä½è¦ä¹é½åï¼è¦ä¹é½ä¸åã\n * ä¸è´æ§ï¼Consistentï¼ï¼äºå¡å¿é¡»æ¯ä½¿æ°æ®åºä»ä¸ä¸ªä¸è´æ§ç¶æåå°å¦ä¸ä¸ªä¸è´æ§ç¶æãä¸è´æ§ä¸åå­æ§æ¯å¯åç¸å³çã\n * éç¦»æ§ï¼Isolatedï¼ï¼ä¸ä¸ªäºå¡çæ§è¡ä¸è½è¢«å¶ä»äºå¡å¹²æ°ãå³ä¸ä¸ªäºå¡åé¨çæä½åä½¿ç¨çæ°æ®å¯¹å¹¶åçå¶ä»äºå¡æ¯éç¦»çï¼å¹¶åæ§è¡çåä¸ªäºå¡ä¹é´ä¸è½äºç¸å¹²æ°ã\n * æä¹æ§ï¼Durableï¼ï¼æä¹æ§ä¹ç§°æ°¸ä¹æ§ï¼permanenceï¼ï¼æä¸ä¸ªäºå¡ä¸æ¦æäº¤ï¼å®å¯¹æ°æ®åºä¸­æ°æ®çæ¹åå°±åºè¯¥æ¯æ°¸ä¹æ§çãæ¥ä¸æ¥çå¶ä»æä½ææéä¸åºè¯¥å¯¹å¶æä»»ä½å½±åã\n\n\n# å¨å±äºå¡\n\nå¨å±äºå¡åè®¸æ¨ä½¿ç¨å¤ä¸ªäºå¡èµæºï¼éå¸¸æ¯å³ç³»æ°æ®åºåæ¶æ¯éåãåºç¨æå¡å¨éè¿ JTA ç®¡çå¨å±äºå¡ï¼è¿æ¯ä¸ä¸ªç¹çç APIï¼é¨ååå å¨äºå¶å¼å¸¸æ¨¡åï¼ãæ­¤å¤ï¼JTA UserTransaction éå¸¸éè¦æ¥èª JNDIï¼è¿æå³çæ¨è¿éè¦ä½¿ç¨ JNDI æè½ä½¿ç¨ JTAãå¨å±äºå¡çä½¿ç¨éå¶äºåºç¨ç¨åºä»£ç çä»»ä½æ½å¨éç¨ï¼å ä¸º JTA éå¸¸ä»å¨åºç¨ç¨åºæå¡å¨ç¯å¢ä¸­å¯ç¨ã\n\nä»¥åï¼ä½¿ç¨å¨å±äºå¡çé¦éæ¹å¼æ¯éè¿ EJB CMTï¼å®¹å¨ç®¡çäºå¡ï¼ã CMT æ¯ä¸ç§å£°æå¼äºå¡ç®¡çï¼ä¸åäºç¨åºåäºå¡ç®¡çï¼ã EJB CMT æ¶é¤äºå¯¹ä¸äºå¡ç¸å³ç JNDI æ¥æ¾çéè¦ï¼å°½ç®¡ä½¿ç¨ EJB æ¬èº«å°±éè¦ä½¿ç¨ JNDIãå®æ¶é¤äºå¤§é¨åï¼ä½ä¸æ¯å¨é¨ï¼ç¼å Java ä»£ç æ¥æ§å¶äºå¡çéè¦ãå¶ææ¾çç¼ºç¹æ¯ CMT ä¸ JTA ååºç¨ç¨åºæå¡å¨ç¯å¢ç¸å³èãæ­¤å¤ï¼å®ä»å¨éæ©å¨ EJB ä¸­å®ç°ä¸å¡é»è¾ï¼æè³å°å¨äºå¡æ§ EJB å¤è§ä¹åï¼æ¶æå¯ç¨ãä¸è¬æ¥è¯´ï¼EJB çè´é¢å½±åæ¯å¦æ­¤ä¹å¤§ï¼ä»¥è³äºè¿ä¸æ¯ä¸ä¸ªæå¸å¼åçæè®®ï¼å°¤å¶æ¯å¨é¢å¯¹å£°æå¼äºå¡ç®¡ççå¼äººæ³¨ç®çæ¿ä»£æ¹æ¡æ¶ã\n\n\n# æ¬å°äºå¡\n\næ¬å°äºå¡æ¯æå®èµæºçï¼ä¾å¦ä¸ JDBC è¿æ¥å³èçäºå¡ãæ¬å°äºå¡å¯è½æ´å®¹æä½¿ç¨ï¼ä½æä¸ä¸ªææ¾çç¼ºç¹ï¼å®ä»¬ä¸è½è·¨å¤ä¸ªäºå¡èµæºå·¥ä½ãä¾å¦ï¼ä½¿ç¨ JDBC è¿æ¥ç®¡çäºå¡çä»£ç ä¸è½å¨å¨å± JTA äºå¡ä¸­è¿è¡ãå ä¸ºåºç¨æå¡å¨ä¸åä¸äºå¡ç®¡çï¼å®ä¸è½ç¡®ä¿è·¨å¤ä¸ªèµæºçæ­£ç¡®æ§ï¼å¼å¾æ³¨æçæ¯ï¼å¤§å¤æ°åºç¨ç¨åºä½¿ç¨åä¸ªäºå¡èµæºãï¼ãå¦ä¸ä¸ªç¼ºç¹æ¯æ¬å°äºå¡å¯¹ç¼ç¨æ¨¡åå·æä¾µå¥æ§ã\n\n\n# Spring å¯¹äºå¡çæ¯æ\n\nSpring éè¿åè°æºå¶å°å®éçäºå¡å®ç°ä»äºå¡æ§çä»£ç ä¸­æ½è±¡åºæ¥ãSpring è§£å³äºå¨å±åæ¬å°äºå¡çç¼ºç¹ãå®åè®¸å¼åäººåå¨ä»»ä½ç¯å¢ä¸­ä½¿ç¨ä¸è´çç¼ç¨æ¨¡åãæ¨åªéç¼åä¸æ¬¡ä»£ç ï¼å®å°±å¯ä»¥ä»ä¸åç¯å¢ä¸­çä¸åäºå¡ç®¡çç­ç¥ä¸­åçãSpring æä¾äºå¯¹ç¼ç å¼åå£°æå¼äºå¡ç®¡ççæ¯æï¼å¤§å¤æ°æåµä¸é½æ¨èä½¿ç¨å£°æå¼äºå¡ç®¡çã\n\n * ç¼ç å¼äºå¡åè®¸ç¨æ·å¨ä»£ç ä¸­ç²¾ç¡®å®ä¹äºå¡çè¾¹ç\n * å£°æå¼äºå¡ï¼åºäº AOPï¼æå©äºç¨æ·å°æä½ä¸äºå¡è§åè¿è¡è§£è¦\n\néè¿ç¨åºåäºå¡ç®¡çï¼å¼åäººåå¯ä»¥ä½¿ç¨ Spring äºå¡æ½è±¡ï¼å®å¯ä»¥å¨ä»»ä½åºå±äºå¡åºç¡ä¸è¿è¡ãä½¿ç¨é¦éçå£°ææ§æ¨¡åï¼å¼åäººåéå¸¸ç¼åå¾å°ææ ¹æ¬ä¸ç¼åä¸äºå¡ç®¡çç¸å³çä»£ç ï¼å æ­¤ä¸ä¾èµ Spring äºå¡ API æä»»ä½å¶ä»äºå¡ APIã\n\n\n# Spring äºå¡çä¼ç¹\n\nSpring æ¡æ¶ä¸ºäºå¡ç®¡çæä¾äºä¸è´çæ½è±¡ï¼å·æä»¥ä¸å¥½å¤ï¼\n\n * è·¨ä¸åäºå¡ API çä¸è´ç¼ç¨æ¨¡åï¼ä¾å¦ Java Transaction API (JTA)ãJDBCãHibernate å Java Persistence API (JPA)ã\n * æ¯æå£°æå¼äºå¡ç®¡çã\n * ç¨äºç¼ç¨äºå¡ç®¡çç API æ¯å¤æäºå¡ APIï¼å¦ JTAï¼æ´ç®åã\n * ä¸ Spring çæ°æ®è®¿é®æ½è±¡å®ç¾éæã\n\n\n# æ ¸å¿ API\n\n\n# TransactionManager\n\nSpring äºå¡æ½è±¡çå³é®æ¯äºå¡ç­ç¥çæ¦å¿µãäºå¡ç­ç¥ç± TransactionManager å®ä¹ï¼ç¹å«æ¯ç¨äºå½ä»¤å¼äºå¡ç®¡çç org.springframework.transaction.PlatformTransactionManager æ¥å£åç¨äºååºå¼äºå¡ç®¡çç org.springframework.transaction.ReactiveTransactionManager æ¥å£ã\n\n\n\n# PlatformTransactionManager\n\nä»¥ä¸æ¸åæ¾ç¤ºäº PlatformTransactionManager API çå®ä¹ï¼\n\npublic interface PlatformTransactionManager extends TransactionManager {\n\n    TransactionStatus getTransaction(TransactionDefinition definition) throws TransactionException;\n\n    void commit(TransactionStatus status) throws TransactionException;\n\n    void rollback(TransactionStatus status) throws TransactionException;\n}\n\n\nPlatformTransactionManager æ¯ä¸ä¸ª SPI æ¥å£ï¼æä»¥ä½¿ç¨èå¯ä»¥ä»¥ç¼ç¨æ¹å¼ä½¿ç¨å®ãå ä¸º PlatformTransactionManager æ¯ä¸ä¸ªæ¥å£ï¼æä»¥å¯ä»¥æ ¹æ®éè¦è½»æ¾å° MOCK æå­æ ¹ãå®ä¸ä¾èµäºæ¥æ¾ç­ç¥ï¼ä¾å¦ JNDIã PlatformTransactionManager å®ç°çå®ä¹ä¸ Spring IoC å®¹å¨ä¸­çä»»ä½å¶ä»å¯¹è±¡ï¼æ beanï¼ä¸æ ·ãä»æ­¤ä¸é¡¹ä¼å¿å°±ä½¿ Spring äºå¡æä¸ºæä»·å¼çæ½è±¡ï¼å³ä½¿æ¨ä½¿ç¨ JTA ä¹æ¯å¦æ­¤ãä¸ç´æ¥ä½¿ç¨ JTA ç¸æ¯ï¼æ¨å¯ä»¥æ´è½»æ¾å°æµè¯äºå¡ä»£ç ã\n\nåæ ·ï¼ä¸ºäºä¸ Spring ççå¿µä¿æä¸è´ï¼ä»»ä½ PlatformTransactionManager æ¥å£çæ¹æ³å¯ä»¥æåºç TransactionException é½æ¯æªç»æ£æ¥çï¼ä¹å°±æ¯è¯´ï¼å®æ©å±äº java.lang.RuntimeException ç±»ï¼ãäºå¡æ¶ææéå ä¹æ»æ¯è´å½çãæå°æ°æåµä¸ï¼åºç¨ç¨åºå¯ä»¥ä»äºå¡å¤±è´¥ä¸­æ¢å¤ï¼å¼åäººåå¯ä»¥éæ©æè·åå¤ç TransactionExceptionãéç¹æ¯å¼åäººåå¹¶éè¢«è¿«è¿æ ·åã\n\ngetTransaction(..) æ¹æ³æ ¹æ® TransactionDefinition åæ°è¿åä¸ä¸ª TransactionStatus å¯¹è±¡ãå¦æå½åè°ç¨å æ ä¸­å­å¨å¹éçäºå¡ï¼åè¿åç TransactionStatus å¯è½è¡¨ç¤ºæ°äºå¡æå¯ä»¥è¡¨ç¤ºç°æäºå¡ãåä¸ç§æåµçå«ä¹æ¯ï¼ä¸ Java EE äºå¡ä¸ä¸æä¸æ ·ï¼TransactionStatus ä¸æ§è¡çº¿ç¨ç¸å³èã\n\nä»ä»¥ä¸å¯ä»¥çåºï¼å·ä½çäºå¡ç®¡çæºå¶å¯¹ Spring æ¥è¯´æ¯éæçï¼å®å¹¶ä¸å³å¿é£äºï¼é£äºæ¯å¯¹åºåä¸ªå¹³å°éè¦å³å¿çï¼æä»¥ Spring äºå¡ç®¡ççä¸ä¸ªä¼ç¹å°±æ¯ä¸ºä¸åçäºå¡ API æä¾ä¸è´çç¼ç¨æ¨¡åï¼å¦ JTAãJDBCãHibernateãJPAãä¸é¢åå«ä»ç»åä¸ªå¹³å°æ¡æ¶å®ç°äºå¡ç®¡ççæºå¶ã\n\n# JDBC äºå¡\n\nå¦æåºç¨ç¨åºä¸­ç´æ¥ä½¿ç¨ JDBC æ¥è¿è¡æä¹åï¼DataSourceTransactionManager ä¼ä¸ºä½ å¤çäºå¡è¾¹çãä¸ºäºä½¿ç¨ DataSourceTransactionManagerï¼ä½ éè¦ä½¿ç¨å¦ä¸ç XML å°å¶è£éå°åºç¨ç¨åºçä¸ä¸æå®ä¹ä¸­ï¼\n\n<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n  <property name="dataSource" ref="dataSource" />\n</bean>\n\n\nå®éä¸ï¼DataSourceTransactionManager æ¯éè¿è°ç¨ java.sql.Connection æ¥ç®¡çäºå¡ï¼èåèæ¯éè¿ DataSource è·åå°çãéè¿è°ç¨è¿æ¥ç commit() æ¹æ³æ¥æäº¤äºå¡ï¼åæ ·ï¼äºå¡å¤±è´¥åéè¿è°ç¨ rollback() æ¹æ³è¿è¡åæ»ã\n\n# Hibernate äºå¡\n\nå¦æåºç¨ç¨åºçæä¹åæ¯éè¿ Hibernate å®ç°çï¼é£ä¹ä½ éè¦ä½¿ç¨ HibernateTransactionManagerãå¯¹äº Hibernate3ï¼éè¦å¨ Spring ä¸ä¸æå®ä¹ä¸­æ·»å å¦ä¸ç bean å£°æï¼\n\n<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">\n  <property name="sessionFactory" ref="sessionFactory" />\n</bean>\n\n\nsessionFactory å±æ§éè¦è£éä¸ä¸ª Hibernate ç session å·¥åï¼HibernateTransactionManager çå®ç°ç»èæ¯å®å°äºå¡ç®¡ççèè´£å§æç» org.hibernate.Transaction å¯¹è±¡ï¼èåèæ¯ä» Hibernate Session ä¸­è·åå°çãå½äºå¡æåå®ææ¶ï¼HibernateTransactionManager å°ä¼è°ç¨ Transaction å¯¹è±¡ç commit() æ¹æ³ï¼åä¹ï¼å°ä¼è°ç¨ rollback() æ¹æ³ã\n\n# Java æä¹å API äºå¡ï¼JPAï¼\n\nHibernate å¤å¹´æ¥ä¸ç´æ¯äºå®ä¸ç Java æä¹åæ åï¼ä½æ¯ç°å¨ Java æä¹å API ä½ä¸ºçæ­£ç Java æä¹åæ åè¿å¥å¤§å®¶çè§éãå¦æä½ è®¡åä½¿ç¨ JPA çè¯ï¼é£ä½ éè¦ä½¿ç¨ Spring ç JpaTransactionManager æ¥å¤çäºå¡ãä½ éè¦å¨ Spring ä¸­è¿æ ·éç½® JpaTransactionManagerï¼\n\n<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">\n  <property name="sessionFactory" ref="sessionFactory" />\n</bean>\n\n\nJpaTransactionManager åªéè¦è£éä¸ä¸ª JPA å®ä½ç®¡çå·¥åï¼javax.persistence.EntityManagerFactory æ¥å£çä»»æå®ç°ï¼ãJpaTransactionManager å°ä¸ç±å·¥åæäº§çç JPA EntityManager åä½æ¥æå»ºäºå¡ã\n\n# Java åç API äºå¡ï¼JTAï¼\n\nå¦æä½ æ²¡æä½¿ç¨ä»¥ä¸æè¿°çäºå¡ç®¡çï¼æèæ¯è·¨è¶äºå¤ä¸ªäºå¡ç®¡çæºï¼æ¯å¦ä¸¤ä¸ªæèæ¯å¤ä¸ªä¸åçæ°æ®æºï¼ï¼ä½ å°±éè¦ä½¿ç¨JtaTransactionManagerï¼\n\n<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">\n  <property name="transactionManagerName" value="java:/TransactionManager" />\n</bean>\n\n\nJtaTransactionManager å°äºå¡ç®¡ççè´£ä»»å§æç» javax.transaction.UserTransaction å javax.transaction.TransactionManager å¯¹è±¡ï¼å¶ä¸­äºå¡æåå®æéè¿ UserTransaction.commit() æ¹æ³æäº¤ï¼äºå¡å¤±è´¥éè¿ UserTransaction.rollback() æ¹æ³åæ»ã\n\n# ReactiveTransactionManager\n\nSpring è¿ä¸ºä½¿ç¨ååºå¼ç±»åæ Kotlin åç¨çååºå¼åºç¨ç¨åºæä¾äºäºå¡ç®¡çæ½è±¡ãä»¥ä¸æ¸åæ¾ç¤ºäº org.springframework.transaction.ReactiveTransactionManager å®ä¹çäºå¡ç­ç¥ï¼\n\npublic interface ReactiveTransactionManager extends TransactionManager {\n\n    Mono<ReactiveTransaction> getReactiveTransaction(TransactionDefinition definition) throws TransactionException;\n\n    Mono<Void> commit(ReactiveTransaction status) throws TransactionException;\n\n    Mono<Void> rollback(ReactiveTransaction status) throws TransactionException;\n}\n\n\nååºå¼äºå¡ç®¡çå¨ä¸»è¦æ¯ä¸ä¸ª SPIï¼æä»¥ä½¿ç¨èå¯ä»¥ä»¥ç¼ç¨æ¹å¼ä½¿ç¨å®ãå ä¸º ReactiveTransactionManager æ¯ä¸ä¸ªæ¥å£ï¼æä»¥å¯ä»¥æ ¹æ®éè¦è½»æ¾å° MOCK æå­æ ¹ã\n\n\n# TransactionDefinition\n\nPlatformTransactionManager éè¿ getTransaction(TransactionDefinition definition) æ¹æ³æ¥å¾å°äºå¡ï¼è¿ä¸ªæ¹æ³éé¢çåæ°æ¯ TransactionDefinition ç±»ï¼è¿ä¸ªç±»å°±å®ä¹äºä¸äºåºæ¬çäºå¡å±æ§ãäºå¡å±æ§å¯ä»¥çè§£æäºå¡çä¸äºåºæ¬éç½®ï¼æè¿°äºäºå¡ç­ç¥å¦ä½åºç¨å°æ¹æ³ä¸ã\n\nTransactionDefinition æ¥å£åå®¹å¦ä¸ï¼\n\npublic interface TransactionDefinition {\n    int getPropagationBehavior(); // è¿åäºå¡çä¼ æ­è¡ä¸º\n    int getIsolationLevel(); // è¿åäºå¡çéç¦»çº§å«ï¼äºå¡ç®¡çå¨æ ¹æ®å®æ¥æ§å¶å¦å¤ä¸ä¸ªäºå¡å¯ä»¥çå°æ¬äºå¡åçåªäºæ°æ®\n    int getTimeout();  // è¿åäºå¡å¿é¡»å¨å¤å°ç§åå®æ\n    boolean isReadOnly(); // äºå¡æ¯å¦åªè¯»ï¼äºå¡ç®¡çå¨è½å¤æ ¹æ®è¿ä¸ªè¿åå¼è¿è¡ä¼åï¼ç¡®ä¿äºå¡æ¯åªè¯»ç\n}\n\n\næä»¬å¯ä»¥åç° TransactionDefinition æ­£å¥½ç¨æ¥å®ä¹äºå¡å±æ§ï¼ä¸é¢è¯¦ç»ä»ç»ä¸ä¸åä¸ªäºå¡å±æ§ã\n\n# ä¼ æ­è¡ä¸º\n\näºå¡çä¼ æ­è¡ä¸ºï¼propagation behaviorï¼æ¯æï¼å½äºå¡æ¹æ³è¢«å¦ä¸ä¸ªäºå¡æ¹æ³è°ç¨æ¶ï¼å¿é¡»æå®äºå¡åºè¯¥å¦ä½ä¼ æ­ãä¾å¦ï¼æ¹æ³å¯è½ç»§ç»­å¨ç°æäºå¡ä¸­è¿è¡ï¼ä¹å¯è½å¼å¯ä¸ä¸ªæ°äºå¡ï¼å¹¶å¨èªå·±çäºå¡ä¸­è¿è¡ãSpring å®ä¹äºä¸ç§ä¼ æ­è¡ä¸ºï¼\n\nä¼ æ­è¡ä¸º                        å«ä¹\nPROPAGATION_REQUIRED        è¡¨ç¤ºå½åæ¹æ³å¿é¡»è¿è¡å¨äºå¡ä¸­ãå¦æå½åäºå¡å­å¨ï¼æ¹æ³å°ä¼å¨è¯¥äºå¡ä¸­è¿è¡ãå¦åï¼ä¼å¯å¨ä¸ä¸ªæ°çäºå¡\nPROPAGATION_SUPPORTS        è¡¨ç¤ºå½åæ¹æ³ä¸éè¦äºå¡ä¸ä¸æï¼ä½æ¯å¦æå­å¨å½åäºå¡çè¯ï¼é£ä¹è¯¥æ¹æ³ä¼å¨è¿ä¸ªäºå¡ä¸­è¿è¡\nPROPAGATION_MANDATORY       è¡¨ç¤ºè¯¥æ¹æ³å¿é¡»å¨äºå¡ä¸­è¿è¡ï¼å¦æå½åäºå¡ä¸å­å¨ï¼åä¼æåºä¸ä¸ªå¼å¸¸\nPROPAGATION_REQUIRED_NEW    è¡¨ç¤ºå½åæ¹æ³å¿é¡»è¿è¡å¨å®èªå·±çäºå¡ä¸­ãä¸ä¸ªæ°çäºå¡å°è¢«å¯å¨ãå¦æå­å¨å½åäºå¡ï¼å¨è¯¥æ¹æ³æ§è¡æé´ï¼å½åäºå¡ä¼è¢«æèµ·ãå¦æä½¿ç¨\n                            JTATransactionManager çè¯ï¼åéè¦è®¿é® TransactionManager\nPROPAGATION_NOT_SUPPORTED   è¡¨ç¤ºè¯¥æ¹æ³ä¸åºè¯¥è¿è¡å¨äºå¡ä¸­ãå¦æå­å¨å½åäºå¡ï¼å¨è¯¥æ¹æ³è¿è¡æé´ï¼å½åäºå¡å°è¢«æèµ·ãå¦æä½¿ç¨\n                            JTATransactionManager çè¯ï¼åéè¦è®¿é® TransactionManager\nPROPAGATION_NEVER           è¡¨ç¤ºå½åæ¹æ³ä¸åºè¯¥è¿è¡å¨äºå¡ä¸ä¸æä¸­ãå¦æå½åæ­£æä¸ä¸ªäºå¡å¨è¿è¡ï¼åä¼æåºå¼å¸¸\nPROPAGATION_NESTED          è¡¨ç¤ºå¦æå½åå·²ç»å­å¨ä¸ä¸ªäºå¡ï¼é£ä¹è¯¥æ¹æ³å°ä¼å¨åµå¥äºå¡ä¸­è¿è¡ãåµå¥çäºå¡å¯ä»¥ç¬ç«äºå½åäºå¡è¿è¡åç¬å°æäº¤æåæ»ãå¦æå½åäºå¡ä¸å­å¨ï¼é£ä¹å¶è¡ä¸ºä¸\n                            PROPAGATION_REQUIRED\n                            ä¸æ ·ãæ³¨æåååå¯¹è¿ç§ä¼ æ­è¡ä¸ºçæ¯ææ¯ææå·®å¼çãå¯ä»¥åèèµæºç®¡çå¨çææ¡£æ¥ç¡®è®¤å®ä»¬æ¯å¦æ¯æåµå¥äºå¡\n\næ³¨ï¼ä»¥ä¸å·ä½è®²è§£ä¼ æ­è¡ä¸ºçåå®¹åèèª Spring äºå¡æºå¶è¯¦è§£\n\n 1. PROPAGATION_REQUIRED å¦æå­å¨ä¸ä¸ªäºå¡ï¼åæ¯æå½åäºå¡ãå¦ææ²¡æäºå¡åå¼å¯ä¸ä¸ªæ°çäºå¡ã\n\n// äºå¡å±æ§ PROPAGATION_REQUIRED\nmethodA {\n    â¦â¦\n    methodB();\n    â¦â¦\n}\n\n\n// äºå¡å±æ§ PROPAGATION_REQUIRED\nmethodB {\n   â¦â¦\n}\n\n\nä½¿ç¨ spring å£°æå¼äºå¡ï¼spring ä½¿ç¨ AOP æ¥æ¯æå£°æå¼äºå¡ï¼ä¼æ ¹æ®äºå¡å±æ§ï¼èªå¨å¨æ¹æ³è°ç¨ä¹åå³å®æ¯å¦å¼å¯ä¸ä¸ªäºå¡ï¼å¹¶å¨æ¹æ³æ§è¡ä¹åå³å®äºå¡æäº¤æåæ»äºå¡ã\n\nåç¬è°ç¨ methodB æ¹æ³ï¼\n\nmain {\n    metodB();\n}\n\n\nç¸å½äº\n\nMain {\n    Connection con=null;\n    try{\n        con = getConnection();\n        con.setAutoCommit(false);\n\n        //æ¹æ³è°ç¨\n        methodB();\n\n        //æäº¤äºå¡\n        con.commit();\n    } Catch(RuntimeException ex) {\n        //åæ»äºå¡\n        con.rollback();\n    } finally {\n        //éæ¾èµæº\n        closeCon();\n    }\n}\n\n\nSpring ä¿è¯å¨ methodB æ¹æ³ä¸­ææçè°ç¨é½è·å¾å°ä¸ä¸ªç¸åçè¿æ¥ãå¨è°ç¨ methodB æ¶ï¼æ²¡æä¸ä¸ªå­å¨çäºå¡ï¼æä»¥è·å¾ä¸ä¸ªæ°çè¿æ¥ï¼å¼å¯äºä¸ä¸ªæ°çäºå¡ã åç¬è°ç¨ MethodA æ¶ï¼å¨ MethodA ååä¼è°ç¨ MethodB.\n\næ§è¡ææç¸å½äºï¼\n\nmain{\n    Connection con = null;\n    try{\n        con = getConnection();\n        methodA();\n        con.commit();\n    } catch(RuntimeException ex) {\n        con.rollback();\n    } finally {\n        closeCon();\n    }\n}\n\n\nè°ç¨ MethodA æ¶ï¼ç¯å¢ä¸­æ²¡æäºå¡ï¼æä»¥å¼å¯ä¸ä¸ªæ°çäºå¡.å½å¨ MethodA ä¸­è°ç¨ MethodB æ¶ï¼ç¯å¢ä¸­å·²ç»æäºä¸ä¸ªäºå¡ï¼æä»¥ methodB å°±å å¥å½åäºå¡ã\n\n 2. PROPAGATION_SUPPORTS å¦æå­å¨ä¸ä¸ªäºå¡ï¼æ¯æå½åäºå¡ãå¦ææ²¡æäºå¡ï¼åéäºå¡çæ§è¡ãä½æ¯å¯¹äºäºå¡åæ­¥çäºå¡ç®¡çå¨ï¼PROPAGATION_SUPPORTS ä¸ä¸ä½¿ç¨äºå¡æå°è®¸ä¸åã\n\n//äºå¡å±æ§ PROPAGATION_REQUIRED\nmethodA(){\n  methodB();\n}\n\n//äºå¡å±æ§ PROPAGATION_SUPPORTS\nmethodB(){\n  â¦â¦\n}\n\n\nåçº¯çè°ç¨ methodB æ¶ï¼methodB æ¹æ³æ¯éäºå¡çæ§è¡çãå½è°ç¨ methdA æ¶,methodB åå å¥äº methodA çäºå¡ä¸­,äºå¡å°æ§è¡ã\n\n 3. PROPAGATION_MANDATORY å¦æå·²ç»å­å¨ä¸ä¸ªäºå¡ï¼æ¯æå½åäºå¡ãå¦ææ²¡æä¸ä¸ªæ´»å¨çäºå¡ï¼åæåºå¼å¸¸ã\n\n//äºå¡å±æ§ PROPAGATION_REQUIRED\nmethodA(){\n    methodB();\n}\n\n//äºå¡å±æ§ PROPAGATION_MANDATORY\n    methodB(){\n    â¦â¦\n}\n\n\nå½åç¬è°ç¨ methodB æ¶ï¼å ä¸ºå½åæ²¡æä¸ä¸ªæ´»å¨çäºå¡ï¼åä¼æåºå¼å¸¸ throw new IllegalTransactionStateException(âTransaction propagation âmandatoryâ but no existing transaction foundâ);å½è°ç¨ methodA æ¶ï¼methodB åå å¥å° methodA çäºå¡ä¸­ï¼äºå¡å°æ§è¡ã\n\n 4. PROPAGATION_REQUIRES_NEW æ»æ¯å¼å¯ä¸ä¸ªæ°çäºå¡ãå¦æä¸ä¸ªäºå¡å·²ç»å­å¨ï¼åå°è¿ä¸ªå­å¨çäºå¡æèµ·ã\n\n//äºå¡å±æ§ PROPAGATION_REQUIRED\nmethodA(){\n    doSomeThingA();\n    methodB();\n    doSomeThingB();\n}\n\n//äºå¡å±æ§ PROPAGATION_REQUIRES_NEW\nmethodB(){\n    â¦â¦\n}\n\n\nè°ç¨ A æ¹æ³ï¼\n\nmain(){\n    methodA();\n}\n\n\nç¸å½äº\n\nmain(){\n    TransactionManager tm = null;\n    try{\n        //è·å¾ä¸ä¸ªJTAäºå¡ç®¡çå¨\n        tm = getTransactionManager();\n        tm.begin();//å¼å¯ä¸ä¸ªæ°çäºå¡\n        Transaction ts1 = tm.getTransaction();\n        doSomeThing();\n        tm.suspend();//æèµ·å½åäºå¡\n        try{\n            tm.begin();//éæ°å¼å¯ç¬¬äºä¸ªäºå¡\n            Transaction ts2 = tm.getTransaction();\n            methodB();\n            ts2.commit();//æäº¤ç¬¬äºä¸ªäºå¡\n        } Catch(RunTimeException ex) {\n            ts2.rollback();//åæ»ç¬¬äºä¸ªäºå¡\n        } finally {\n            //éæ¾èµæº\n        }\n        //methodBæ§è¡å®åï¼æ¢å¤ç¬¬ä¸ä¸ªäºå¡\n        tm.resume(ts1);\n        doSomeThingB();\n        ts1.commit();//æäº¤ç¬¬ä¸ä¸ªäºå¡\n    } catch(RunTimeException ex) {\n        ts1.rollback();//åæ»ç¬¬ä¸ä¸ªäºå¡\n    } finally {\n        //éæ¾èµæº\n    }\n}\n\n\nå¨è¿éï¼ææ ts1 ç§°ä¸ºå¤å±äºå¡ï¼ts2 ç§°ä¸ºåå±äºå¡ãä»ä¸é¢çä»£ç å¯ä»¥çåºï¼ts2 ä¸ ts1 æ¯ä¸¤ä¸ªç¬ç«çäºå¡ï¼äºä¸ç¸å¹²ãTs2 æ¯å¦æåå¹¶ä¸ä¾èµäº ts1ãå¦æ methodA æ¹æ³å¨è°ç¨ methodB æ¹æ³åç doSomeThingB æ¹æ³å¤±è´¥äºï¼è methodB æ¹æ³æåçç»æä¾ç¶è¢«æäº¤ãèé¤äº methodB ä¹å¤çå¶å®ä»£ç å¯¼è´çç»æå´è¢«åæ»äºãä½¿ç¨ PROPAGATION_REQUIRES_NEW,éè¦ä½¿ç¨ JtaTransactionManager ä½ä¸ºäºå¡ç®¡çå¨ã\n\n 5. PROPAGATION_NOT_SUPPORTED æ»æ¯éäºå¡å°æ§è¡ï¼å¹¶æèµ·ä»»ä½å­å¨çäºå¡ãä½¿ç¨ PROPAGATION_NOT_SUPPORTED,ä¹éè¦ä½¿ç¨ JtaTransactionManager ä½ä¸ºäºå¡ç®¡çå¨ãï¼ä»£ç ç¤ºä¾åä¸ï¼å¯åçæ¨åºï¼\n 6. PROPAGATION_NEVER æ»æ¯éäºå¡å°æ§è¡ï¼å¦æå­å¨ä¸ä¸ªæ´»å¨äºå¡ï¼åæåºå¼å¸¸ã\n 7. PROPAGATION_NESTED å¦æä¸ä¸ªæ´»å¨çäºå¡å­å¨ï¼åè¿è¡å¨ä¸ä¸ªåµå¥çäºå¡ä¸­. å¦ææ²¡ææ´»å¨äºå¡, åæ TransactionDefinition.PROPAGATION_REQUIRED å±æ§æ§è¡ãè¿æ¯ä¸ä¸ªåµå¥äºå¡,ä½¿ç¨ JDBC 3.0 é©±å¨æ¶,ä»ä»æ¯æ DataSourceTransactionManager ä½ä¸ºäºå¡ç®¡çå¨ãéè¦ JDBC é©±å¨ç java.sql.Savepoint ç±»ãæä¸äº JTA çäºå¡ç®¡çå¨å®ç°å¯è½ä¹æä¾äºåæ ·çåè½ãä½¿ç¨ PROPAGATION_NESTEDï¼è¿éè¦æ PlatformTransactionManager ç nestedTransactionAllowed å±æ§è®¾ä¸º true;è nestedTransactionAllowed å±æ§å¼é»è®¤ä¸º falseã\n\n//äºå¡å±æ§ PROPAGATION_REQUIRED\nmethodA(){\n    doSomeThingA();\n    methodB();\n    doSomeThingB();\n}\n\n//äºå¡å±æ§ PROPAGATION_NESTED\nmethodB(){\n    â¦â¦\n}\n\n\nå¦æåç¬è°ç¨ methodB æ¹æ³ï¼åæ REQUIRED å±æ§æ§è¡ãå¦æè°ç¨ methodA æ¹æ³ï¼ç¸å½äºä¸é¢çææï¼\n\nmain(){\n    Connection con = null;\n    Savepoint savepoint = null;\n    try{\n        con = getConnection();\n        con.setAutoCommit(false);\n        doSomeThingA();\n        savepoint = con2.setSavepoint();\n        try{\n            methodB();\n        } catch(RuntimeException ex) {\n            con.rollback(savepoint);\n        } finally {\n            //éæ¾èµæº\n        }\n        doSomeThingB();\n        con.commit();\n    } catch(RuntimeException ex) {\n        con.rollback();\n    } finally {\n        //éæ¾èµæº\n    }\n}\n\n\nå½ methodB æ¹æ³è°ç¨ä¹åï¼è°ç¨ setSavepoint æ¹æ³ï¼ä¿å­å½åçç¶æå° savepointãå¦æ methodB æ¹æ³è°ç¨å¤±è´¥ï¼åæ¢å¤å°ä¹åä¿å­çç¶æãä½æ¯éè¦æ³¨æçæ¯ï¼è¿æ¶çäºå¡å¹¶æ²¡æè¿è¡æäº¤ï¼å¦æåç»­çä»£ç (doSomeThingB()æ¹æ³)è°ç¨å¤±è´¥ï¼ååæ»åæ¬ methodB æ¹æ³çæææä½ã\n\nåµå¥äºå¡ä¸ä¸ªéå¸¸éè¦çæ¦å¿µå°±æ¯åå±äºå¡ä¾èµäºå¤å±äºå¡ãå¤å±äºå¡å¤±è´¥æ¶ï¼ä¼åæ»åå±äºå¡æåçå¨ä½ãèåå±äºå¡æä½å¤±è´¥å¹¶ä¸ä¼å¼èµ·å¤å±äºå¡çåæ»ã\n\nPROPAGATION_NESTED ä¸ PROPAGATION_REQUIRES_NEW çåºå«:å®ä»¬éå¸¸ç±»ä¼¼,é½åä¸ä¸ªåµå¥äºå¡ï¼å¦æä¸å­å¨ä¸ä¸ªæ´»å¨çäºå¡ï¼é½ä¼å¼å¯ä¸ä¸ªæ°çäºå¡ãä½¿ç¨ PROPAGATION_REQUIRES_NEW æ¶ï¼åå±äºå¡ä¸å¤å±äºå¡å°±åä¸¤ä¸ªç¬ç«çäºå¡ä¸æ ·ï¼ä¸æ¦åå±äºå¡è¿è¡äºæäº¤åï¼å¤å±äºå¡ä¸è½å¯¹å¶è¿è¡åæ»ãä¸¤ä¸ªäºå¡äºä¸å½±åãä¸¤ä¸ªäºå¡ä¸æ¯ä¸ä¸ªçæ­£çåµå¥äºå¡ãåæ¶å®éè¦ JTA äºå¡ç®¡çå¨çæ¯æã\n\nä½¿ç¨ PROPAGATION_NESTED æ¶ï¼å¤å±äºå¡çåæ»å¯ä»¥å¼èµ·åå±äºå¡çåæ»ãèåå±äºå¡çå¼å¸¸å¹¶ä¸ä¼å¯¼è´å¤å±äºå¡çåæ»ï¼å®æ¯ä¸ä¸ªçæ­£çåµå¥äºå¡ãDataSourceTransactionManager ä½¿ç¨ savepoint æ¯æ PROPAGATION_NESTED æ¶ï¼éè¦ JDBC 3.0 ä»¥ä¸é©±å¨å 1.4 ä»¥ä¸ç JDK çæ¬æ¯æãå¶å®ç JTA TrasactionManager å®ç°å¯è½æä¸åçæ¯ææ¹å¼ã\n\nPROPAGATION_REQUIRES_NEW å¯å¨ä¸ä¸ªæ°ç, ä¸ä¾èµäºç¯å¢ç âåé¨â äºå¡. è¿ä¸ªäºå¡å°è¢«å®å¨ commited æ rolled back èä¸ä¾èµäºå¤é¨äºå¡, å®æ¥æèªå·±çéç¦»èå´, èªå·±çé, ç­ç­. å½åé¨äºå¡å¼å§æ§è¡æ¶, å¤é¨äºå¡å°è¢«æèµ·, åå¡äºå¡ç»ææ¶, å¤é¨äºå¡å°ç»§ç»­æ§è¡ã\n\nå¦ä¸æ¹é¢, PROPAGATION_NESTED å¼å§ä¸ä¸ª âåµå¥çâ äºå¡, å®æ¯å·²ç»å­å¨äºå¡çä¸ä¸ªçæ­£çå­äºå¡. æ½å¥äºå¡å¼å§æ§è¡æ¶, å®å°åå¾ä¸ä¸ª savepoint. å¦æè¿ä¸ªåµå¥äºå¡å¤±è´¥, æä»¬å°åæ»å°æ­¤ savepoint. æ½å¥äºå¡æ¯å¤é¨äºå¡çä¸é¨å, åªæå¤é¨äºå¡ç»æåå®æä¼è¢«æäº¤ã\n\nç±æ­¤å¯è§, PROPAGATION_REQUIRES_NEW å PROPAGATION_NESTED çæå¤§åºå«å¨äº, PROPAGATION_REQUIRES_NEW å®å¨æ¯ä¸ä¸ªæ°çäºå¡, è PROPAGATION_NESTED åæ¯å¤é¨äºå¡çå­äºå¡, å¦æå¤é¨äºå¡ commit, åµå¥äºå¡ä¹ä¼è¢« commit, è¿ä¸ªè§ååæ ·éç¨äº roll back.\n\nPROPAGATION_REQUIRED åºè¯¥æ¯æä»¬é¦åçäºå¡ä¼ æ­è¡ä¸ºãå®è½å¤æ»¡è¶³æä»¬å¤§å¤æ°çäºå¡éæ±ã\n\n# éç¦»çº§å«\n\näºå¡çç¬¬äºä¸ªç»´åº¦å°±æ¯éç¦»çº§å«ï¼isolation levelï¼ãéç¦»çº§å«å®ä¹äºä¸ä¸ªäºå¡å¯è½åå¶ä»å¹¶åäºå¡å½±åçç¨åº¦ã\n\n 1. å¹¶åäºå¡å¼èµ·çé®é¢\n\nå¨å¸åçåºç¨ç¨åºä¸­ï¼å¤ä¸ªäºå¡å¹¶åè¿è¡ï¼ç»å¸¸ä¼æä½ç¸åçæ°æ®æ¥å®æåèªçä»»å¡ãå¹¶åè½ç¶æ¯å¿é¡»çï¼ä½å¯è½ä¼å¯¼è´ä¸ä¸çé®é¢ã\n\n * èè¯»ï¼Dirty readsï¼ââèè¯»åçå¨ä¸ä¸ªäºå¡è¯»åäºå¦ä¸ä¸ªäºå¡æ¹åä½å°æªæäº¤çæ°æ®æ¶ãå¦ææ¹åå¨ç¨åè¢«åæ»äºï¼é£ä¹ç¬¬ä¸ä¸ªäºå¡è·åçæ°æ®å°±æ¯æ æçã\n * ä¸å¯éå¤è¯»ï¼Nonrepeatable readï¼ââä¸å¯éå¤è¯»åçå¨ä¸ä¸ªäºå¡æ§è¡ç¸åçæ¥è¯¢ä¸¤æ¬¡æä¸¤æ¬¡ä»¥ä¸ï¼ä½æ¯æ¯æ¬¡é½å¾å°ä¸åçæ°æ®æ¶ãè¿éå¸¸æ¯å ä¸ºå¦ä¸ä¸ªå¹¶åäºå¡å¨ä¸¤æ¬¡æ¥è¯¢æé´è¿è¡äºæ´æ°ã\n * å¹»è¯»ï¼Phantom readï¼ââå¹»è¯»ä¸ä¸å¯éå¤è¯»ç±»ä¼¼ãå®åçå¨ä¸ä¸ªäºå¡ï¼T1ï¼è¯»åäºå è¡æ°æ®ï¼æ¥çå¦ä¸ä¸ªå¹¶åäºå¡ï¼T2ï¼æå¥äºä¸äºæ°æ®æ¶ãå¨éåçæ¥è¯¢ä¸­ï¼ç¬¬ä¸ä¸ªäºå¡ï¼T1ï¼å°±ä¼åç°å¤äºä¸äºåæ¬ä¸å­å¨çè®°å½ã\n\nä¸å¯éå¤è¯»ä¸å¹»è¯»çåºå«\n\nä¸å¯éå¤è¯»çéç¹æ¯ä¿®æ¹: åæ ·çæ¡ä»¶, ä½ è¯»åè¿çæ°æ®, åæ¬¡è¯»ååºæ¥åç°å¼ä¸ä¸æ ·äº ä¾å¦ï¼å¨äºå¡ 1 ä¸­ï¼Mary è¯»åäºèªå·±çå·¥èµä¸º 1000,æä½å¹¶æ²¡æå®æ\n\n    con1 = getConnection();\n    select salary from employee empId ="Mary";\n\n\nå¨äºå¡ 2 ä¸­ï¼è¿æ¶è´¢å¡äººåä¿®æ¹äº Mary çå·¥èµä¸º 2000,å¹¶æäº¤äºäºå¡.\n\n    con2 = getConnection();\n    update employee set salary = 2000;\n    con2.commit();\n\n\nå¨äºå¡ 1 ä¸­ï¼Mary åæ¬¡è¯»åèªå·±çå·¥èµæ¶ï¼å·¥èµåä¸ºäº 2000\n\n    //con1\n    select salary from employee empId ="Mary";\n\n\nå¨ä¸ä¸ªäºå¡ä¸­ååä¸¤æ¬¡è¯»åçç»æå¹¶ä¸ä¸è´ï¼å¯¼è´äºä¸å¯éå¤è¯»ã\n\nå¹»è¯»çéç¹å¨äºæ°å¢æèå é¤ï¼ åæ ·çæ¡ä»¶, ç¬¬ 1 æ¬¡åç¬¬ 2 æ¬¡è¯»åºæ¥çè®°å½æ°ä¸ä¸æ · ä¾å¦ï¼ç®åå·¥èµä¸º 1000 çåå·¥æ 10 äººãäºå¡ 1,è¯»åææå·¥èµä¸º 1000 çåå·¥ã\n\n    con1 = getConnection();\n    Select * from employee where salary =1000;\n\n\nå±è¯»å 10 æ¡è®°å½\n\nè¿æ¶å¦ä¸ä¸ªäºå¡å employee è¡¨æå¥äºä¸æ¡åå·¥è®°å½ï¼å·¥èµä¹ä¸º 1000\n\n    con2 = getConnection();\n    Insert into employee(empId,salary) values("Lili",1000);\n    con2.commit();\n\n\näºå¡ 1 åæ¬¡è¯»åææå·¥èµä¸º 1000 çåå·¥\n\n    //con1\n    select * from employee where salary =1000;\n\n\nå±è¯»åå°äº 11 æ¡è®°å½ï¼è¿å°±äº§çäºå¹»åè¯»ã\n\nä»æ»çç»ææ¥ç, ä¼¼ä¹ä¸å¯éå¤è¯»åå¹»è¯»é½è¡¨ç°ä¸ºä¸¤æ¬¡è¯»åçç»æä¸ä¸è´ãä½å¦æä½ ä»æ§å¶çè§åº¦æ¥ç, ä¸¤èçåºå«å°±æ¯è¾å¤§ã å¯¹äºåè, åªéè¦éä½æ»¡è¶³æ¡ä»¶çè®°å½ã å¯¹äºåè, è¦éä½æ»¡è¶³æ¡ä»¶åå¶ç¸è¿çè®°å½ã\n\n 2. éç¦»çº§å«\n\néç¦»çº§å«                         å«ä¹\nISOLATION_DEFAULT            ä½¿ç¨åç«¯æ°æ®åºé»è®¤çéç¦»çº§å«\nISOLATION_READ_UNCOMMITTED   æä½çéç¦»çº§å«ï¼åè®¸è¯»åå°æªæäº¤çæ°æ®åæ´ï¼å¯è½ä¼å¯¼è´èè¯»ãå¹»è¯»æä¸å¯éå¤è¯»\nISOLATION_READ_COMMITTED     åè®¸è¯»åå¹¶åäºå¡å·²ç»æäº¤çæ°æ®ï¼å¯ä»¥é»æ­¢èè¯»ï¼ä½æ¯å¹»è¯»æä¸å¯éå¤è¯»ä»æå¯è½åç\nISOLATION_REPEATABLE_READ    å¯¹åä¸å­æ®µçå¤æ¬¡è¯»åç»æé½æ¯ä¸è´çï¼é¤éæ°æ®æ¯è¢«æ¬èº«äºå¡èªå·±æä¿®æ¹ï¼å¯ä»¥é»æ­¢èè¯»åä¸å¯éå¤è¯»ï¼ä½å¹»è¯»ä»æå¯è½åç\nISOLATION_SERIALIZABLE       æé«çéç¦»çº§å«ï¼å®å¨æä» ACID\n                             çéç¦»çº§å«ï¼ç¡®ä¿é»æ­¢èè¯»ãä¸å¯éå¤è¯»ä»¥åå¹»è¯»ï¼ä¹æ¯ææ¢çäºå¡éç¦»çº§å«ï¼å ä¸ºå®éå¸¸æ¯éè¿å®å¨éå®äºå¡ç¸å³çæ°æ®åºè¡¨æ¥å®ç°ç\n\n# åªè¯»\n\näºå¡çç¬¬ä¸ä¸ªç¹æ§æ¯å®æ¯å¦ä¸ºåªè¯»äºå¡ãå¦æäºå¡åªå¯¹åç«¯çæ°æ®åºè¿è¡è¯¥æä½ï¼æ°æ®åºå¯ä»¥å©ç¨äºå¡çåªè¯»ç¹æ§æ¥è¿è¡ä¸äºç¹å®çä¼åãéè¿å°äºå¡è®¾ç½®ä¸ºåªè¯»ï¼ä½ å°±å¯ä»¥ç»æ°æ®åºä¸ä¸ªæºä¼ï¼è®©å®åºç¨å®è®¤ä¸ºåéçä¼åæªæ½ã\n\n# äºå¡è¶æ¶\n\nä¸ºäºä½¿åºç¨ç¨åºå¾å¥½å°è¿è¡ï¼äºå¡ä¸è½è¿è¡å¤ªé¿çæ¶é´ãå ä¸ºäºå¡å¯è½æ¶åå¯¹åç«¯æ°æ®åºçéå®ï¼æä»¥é¿æ¶é´çäºå¡ä¼ä¸å¿è¦çå ç¨æ°æ®åºèµæºãäºå¡è¶æ¶å°±æ¯äºå¡çä¸ä¸ªå®æ¶å¨ï¼å¨ç¹å®æ¶é´åäºå¡å¦ææ²¡ææ§è¡å®æ¯ï¼é£ä¹å°±ä¼èªå¨åæ»ï¼èä¸æ¯ä¸ç´ç­å¾å¶ç»æã\n\n# åæ»è§å\n\näºå¡äºè¾¹å½¢çæåä¸ä¸ªæ¹é¢æ¯ä¸ç»è§åï¼è¿äºè§åå®ä¹äºåªäºå¼å¸¸ä¼å¯¼è´äºå¡åæ»èåªäºä¸ä¼ãé»è®¤æåµä¸ï¼äºå¡åªæéå°è¿è¡æå¼å¸¸æ¶æä¼åæ»ï¼èå¨éå°æ£æ¥åå¼å¸¸æ¶ä¸ä¼åæ»ï¼è¿ä¸è¡ä¸ºä¸ EJB çåæ»è¡ä¸ºæ¯ä¸è´çï¼ ä½æ¯ä½ å¯ä»¥å£°æäºå¡å¨éå°ç¹å®çæ£æ¥åå¼å¸¸æ¶åéå°è¿è¡æå¼å¸¸é£æ ·åæ»ãåæ ·ï¼ä½ è¿å¯ä»¥å£°æäºå¡éå°ç¹å®çå¼å¸¸ä¸åæ»ï¼å³ä½¿è¿äºå¼å¸¸æ¯è¿è¡æå¼å¸¸ã\n\n\n# TransactionStatus\n\nTransactionStatus æ¥å£ä¸ºäºå¡ä»£ç æä¾äºä¸ç§ç®åçæ¹å¼æ¥æ§å¶äºå¡æ§è¡åæ¥è¯¢äºå¡ç¶æãè¿äºæ¦å¿µåºè¯¥å¾çæï¼å ä¸ºå®ä»¬å¯¹ææäºå¡ API é½æ¯éç¨çãä»¥ä¸æ¸åæ¾ç¤ºäº TransactionStatus æ¥å£ï¼\n\npublic interface TransactionStatus extends TransactionExecution, SavepointManager, Flushable {\n\n    @Override\n    boolean isNewTransaction();\n\n    boolean hasSavepoint();\n\n    @Override\n    void setRollbackOnly();\n\n    @Override\n    boolean isRollbackOnly();\n\n    void flush();\n\n    @Override\n    boolean isCompleted();\n}\n\n\nå¯ä»¥åç°è¿ä¸ªæ¥å£æè¿°çæ¯ä¸äºå¤çäºå¡æä¾ç®åçæ§å¶äºå¡æ§è¡åæ¥è¯¢äºå¡ç¶æçæ¹æ³ï¼å¨åæ»ææäº¤çæ¶åéè¦åºç¨å¯¹åºçäºå¡ç¶æã\n\n\n# TransactionTemplate\n\nSpring æä¾äºå¯¹ç¼ç¨å¼äºå¡åå£°æå¼äºå¡çæ¯æãç¼ç¨å¼äºå¡åè®¸ç¨æ·å¨ä»£ç ä¸­ç²¾ç¡®å®ä¹äºå¡çè¾¹çï¼èå£°æå¼äºå¡ï¼åºäº AOPï¼æå©äºç¨æ·å°æä½ä¸äºå¡è§åè¿è¡è§£è¦ãTransactionTemplate å°±æ¯ç¨äºæ¯æç¼ç¨å¼äºå¡çæ ¸å¿ APIã\n\néç¨ TransactionTemplate åéç¨å¶ä» Spring æ¨¡æ¿ï¼å¦ JdbcTempalte å HibernateTemplate æ¯ä¸æ ·çæ¹æ³ãå®ä½¿ç¨åè°æ¹æ³ï¼æåºç¨ç¨åºä»å¤çåå¾åéæ¾èµæºä¸­è§£è±åºæ¥ãå¦åå¶ä»æ¨¡æ¿ï¼TransactionTemplate æ¯çº¿ç¨å®å¨çãä»£ç çæ®µï¼\n\n    TransactionTemplate tt = new TransactionTemplate(); // æ°å»ºä¸ä¸ªTransactionTemplate\n    Object result = tt.execute(\n        new TransactionCallback(){\n            public Object doTransaction(TransactionStatus status){\n                updateOperation();\n                return resultOfUpdateOperation();\n            }\n    }); // æ§è¡executeæ¹æ³è¿è¡äºå¡ç®¡ç\n\n\nä½¿ç¨ TransactionCallback()å¯ä»¥è¿åä¸ä¸ªå¼ãå¦æä½¿ç¨ TransactionCallbackWithoutResult åæ²¡æè¿åå¼ã\n\n\n# å£°æå¼äºå¡ç®¡ç\n\n> å¤§å¤æ° Spring ç¨æ·éæ©å£°æå¼äºå¡ç®¡çãæ­¤éé¡¹å¯¹åºç¨ç¨åºä»£ç çå½±åæå°ï¼å æ­¤æç¬¦åéä¾µå¥å¼è½»éçº§å®¹å¨ççæ³ã\n\nSpring æ¡æ¶çå£°æå¼äºå¡ç®¡çæ¯éè¿ Spring AOP å®ç°çãç¶èï¼ç±äºäºå¡æ¹é¢ä»£ç é Spring åè¡çä¸èµ·æä¾å¹¶ä¸å¯ä»¥ä»¥æ ·æ¿æ¹å¼ä½¿ç¨ï¼å æ­¤éå¸¸ä¸å¿çè§£ AOP æ¦å¿µå³å¯ææå°ä½¿ç¨æ­¤ä»£ç ã\n\nSpring æ¡æ¶çå£°æå¼äºå¡ç®¡çç±»ä¼¼äº EJB CMTï¼å ä¸ºæ¨å¯ä»¥æå®äºå¡è¡ä¸ºï¼æç¼ºå°å®ï¼å°åä¸ªæ¹æ³çº§å«ãå¦æå¿è¦ï¼æ¨å¯ä»¥å¨äºå¡ä¸ä¸æä¸­è¿è¡ setRollbackOnly() è°ç¨ãä¸¤ç§ç±»åçäºå¡ç®¡çä¹é´çåºå«æ¯ï¼\n\n * ä¸ç»å®å° JTA ç EJB CMT ä¸åï¼Spring æ¡æ¶çå£°æå¼äºå¡ç®¡çéç¨äºä»»ä½ç¯å¢ãéè¿è°æ´éç½®æä»¶ï¼å®å¯ä»¥ä½¿ç¨ JDBCãJPA æ Hibernate å¤ç JTA äºå¡ææ¬å°äºå¡ã\n * æ¨å¯ä»¥å° Spring å£°æå¼äºå¡ç®¡çåºç¨äºä»»ä½ç±»ï¼èä¸ä»ä»æ¯è¯¸å¦ EJB ä¹ç±»çç¹æ®ç±»ã\n * Spring æä¾å£°ææ§åæ»è§åï¼è¿æ¯ä¸ä¸ªæ²¡æ EJB ç­æåè½çç¹æ§ãæä¾äºå¯¹åæ»è§åçç¼ç¨åå£°ææ§æ¯æã\n * Spring åè®¸æ¨ä½¿ç¨ AOP èªå®ä¹äºå¡è¡ä¸ºãä¾å¦ï¼æ¨å¯ä»¥å¨äºå¡åæ»çæåµä¸æå¥èªå®ä¹è¡ä¸ºãæ¨è¿å¯ä»¥æ·»å ä»»æ advice ä»¥åäºå¡æ§ adviceãä½¿ç¨ EJB CMTï¼æ¨æ æ³å½±åå®¹å¨çäºå¡ç®¡çï¼é¤éä½¿ç¨ setRollbackOnly()ã\n * Spring ä¸åé«ç«¯åºç¨æå¡å¨é£æ ·æ¯æè·¨è¿ç¨è°ç¨ä¼ æ­äºå¡ä¸ä¸æãå¦ææ¨éè¦æ­¤åè½ï¼æä»¬å»ºè®®æ¨ä½¿ç¨ EJBãä½æ¯ï¼å¨ä½¿ç¨è¿ç§ç¹æ§ä¹åè¦ä»ç»èèï¼å ä¸ºéå¸¸æåµä¸ï¼ä¸å¸æäºå¡è·¨è¶è¿ç¨è°ç¨ã\n\nåæ»è§åçæ¦å¿µå¾éè¦ãå®ä»¬è®©æ¨æå®åªäºå¼å¸¸ï¼å throwableï¼åºè¯¥å¯¼è´èªå¨åæ»ãæ¨å¯ä»¥å¨éç½®ä¸­ä»¥å£°ææ¹å¼æå®å®ï¼èä¸æ¯å¨ Java ä»£ç ä¸­ãå æ­¤ï¼å°½ç®¡æ¨ä»ç¶å¯ä»¥å¨ TransactionStatus å¯¹è±¡ä¸è°ç¨ setRollbackOnly() æ¥åæ»å½åäºå¡ï¼ä½éå¸¸æ¨å¯ä»¥æå® MyApplicationException å¿é¡»å§ç»å¯¼è´åæ»çè§åãæ­¤éé¡¹çæ¾çä¼å¿æ¯ä¸å¡å¯¹è±¡ä¸ä¾èµäºäºå¡åºç¡æ¶æãä¾å¦ï¼å®ä»¬éå¸¸ä¸éè¦å¯¼å¥ Spring äºå¡ API æå¶ä» Spring APIã\n\nå°½ç®¡ EJB å®¹å¨é»è®¤è¡ä¸ºä¼å¨ç³»ç»å¼å¸¸ï¼éå¸¸æ¯è¿è¡æ¶å¼å¸¸ï¼ä¸èªå¨åæ»äºå¡ï¼ä½ EJB CMT ä¸ä¼å¨åºç¨ç¨åºå¼å¸¸ï¼å³é¤ java.rmi.RemoteException ä¹å¤çæ£æ¥å¼å¸¸ï¼ä¸èªå¨åæ»äºå¡ãè½ç¶å£°æå¼äºå¡ç®¡çç Spring é»è®¤è¡ä¸ºéµå¾ª EJB çº¦å®ï¼åæ»ä»å¨æªç»æ£æ¥çå¼å¸¸ä¸èªå¨ï¼ï¼ä½èªå®ä¹æ­¤è¡ä¸ºéå¸¸å¾æç¨ã\n\n\n# Spring å£°æå¼äºå¡ç®¡ççå®ç°\n\nå³äº Spring æ¡æ¶çå£°æå¼äºå¡æ¯æï¼æéè¦çæ¦å¿µæ¯è¿ç§æ¯ææ¯éè¿ AOP ä»£çå¯ç¨çï¼å¹¶ä¸äºå¡ advice æ¯ç±åæ°æ®é©±å¨çï¼ç®åæ¯åºäº XML æåºäºæ³¨éçï¼ã AOP ä¸äºå¡åæ°æ®çç»åäº§çäºä¸ä¸ª AOP ä»£çï¼å®ä½¿ç¨ TransactionInterceptor åéå½ç TransactionManager å®ç°æ¥é©±å¨å´ç»æ¹æ³è°ç¨çäºå¡ã\n\nSpring ç TransactionInterceptor ä¸ºå½ä»¤å¼åååºå¼ç¼ç¨æ¨¡åæä¾äºå¡ç®¡çãæ¦æªå¨éè¿æ£æ¥æ¹æ³è¿åç±»åæ¥æ£æµæéçäºå¡ç®¡çé£æ ¼ãè¿åååºå¼ç±»åçæ¹æ³ï¼ä¾å¦ Publisher æ Kotlin Flowï¼æå®ä»¬çå­ç±»åï¼æèµæ ¼è¿è¡ååºå¼äºå¡ç®¡çãåæ¬ void å¨åçææå¶ä»è¿åç±»åé½ä½¿ç¨ä»£ç è·¯å¾è¿è¡å½ä»¤å¼äºå¡ç®¡çã\n\näºå¡ç®¡çé£æ ¼ä¼å½±åéè¦åªä¸ªäºå¡ç®¡çå¨ãå½ä»¤å¼äºå¡éè¦ PlatformTransactionManagerï¼èååºå¼äºå¡ä½¿ç¨ ReactiveTransactionManager å®ç°ã\n\n> @Transactional éå¸¸ä¸ PlatformTransactionManager ç®¡çççº¿ç¨ç»å®äºå¡ä¸èµ·ä½¿ç¨ï¼å°äºå¡å¬å¼ç»å½åæ§è¡çº¿ç¨ä¸­çæææ°æ®è®¿é®æä½ãæ³¨æï¼è¿ä¸ä¼ä¼ æ­å°æ¹æ³ä¸­æ°å¯å¨ççº¿ç¨ã\n> \n> ç± ReactiveTransactionManager ç®¡ççååºå¼äºå¡ä½¿ç¨ Reactor ä¸ä¸æèä¸æ¯çº¿ç¨æ¬å°å±æ§ãå æ­¤ï¼ææåä¸çæ°æ®è®¿é®æä½é½éè¦å¨åä¸ä¸ªååºå¼ç®¡éä¸­çåä¸ä¸ª Reactor ä¸ä¸æä¸­æ§è¡ã\n\nä¸å¾æ¾ç¤ºäºå¨äºå¡ä»£çä¸è°ç¨æ¹æ³çæ¦å¿µè§å¾ï¼\n\n\n\n\n# å£°æå¼äºå¡ç¤ºä¾\n\nèèä»¥ä¸æ¥å£åå¶ä¼´éçå®ç°ãæ­¤ç¤ºä¾ä½¿ç¨ Foo å Bar ç±»ä½ä¸ºå ä½ç¬¦ï¼ä»¥ä¾¿æ¨å¯ä»¥ä¸æ³¨äºäºå¡ä½¿ç¨ï¼èæ éå³æ³¨ç¹å®çåæ¨¡åãå°±æ¬ç¤ºä¾èè¨ï¼DefaultFooService ç±»å¨æ¯ä¸ªå·²å®ç°æ¹æ³çä¸»ä½ä¸­æåº UnsupportedOperationException å®ä¾è¿ä¸äºå®å¾å¥½ãè¯¥è¡ä¸ºä½¿æ¨å¯ä»¥çå°æ­£å¨åå»ºçäºå¡ï¼ç¶ååæ»ä»¥ååº UnsupportedOperationException å®ä¾ã\n\nä»¥ä¸æ¸åæ¾ç¤ºäº FooService æ¥å£ï¼\n\n// the service interface that we want to make transactional\n\npackage x.y.service;\n\npublic interface FooService {\n\n    Foo getFoo(String fooName);\n\n    Foo getFoo(String fooName, String barName);\n\n    void insertFoo(Foo foo);\n\n    void updateFoo(Foo foo);\n\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸è¿°æ¥å£çå®ç°ï¼\n\npackage x.y.service;\n\npublic class DefaultFooService implements FooService {\n\n    @Override\n    public Foo getFoo(String fooName) {\n        // ...\n    }\n\n    @Override\n    public Foo getFoo(String fooName, String barName) {\n        // ...\n    }\n\n    @Override\n    public void insertFoo(Foo foo) {\n        // ...\n    }\n\n    @Override\n    public void updateFoo(Foo foo) {\n        // ...\n    }\n}\n\n\nåè®¾ FooService æ¥å£çåä¸¤ä¸ªæ¹æ³ getFoo(String) å getFoo(String, String) å¿é¡»å¨å·æåªè¯»è¯­ä¹çäºå¡ä¸ä¸æä¸­è¿è¡ï¼å¹¶ä¸å¶ä»æ¹æ³ insertFoo(Foo) å updateFoo(Foo )ï¼å¿é¡»å¨å·æè¯»åè¯­ä¹çäºå¡ä¸ä¸æä¸­è¿è¡ãä»¥ä¸éç½®å°å¨æ¥ä¸æ¥çå æ®µä¸­è¯¦ç»è¯´æï¼\n\n\x3c!-- from the file \'context.xml\' --\x3e\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemaLocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- this is the service object that we want to make transactional --\x3e\n    <bean id="fooService" class="x.y.service.DefaultFooService"/>\n\n    \x3c!-- the transactional advice (what \'happens\'; see the <aop:advisor/> bean below) --\x3e\n    <tx:advice id="txAdvice" transaction-manager="txManager">\n        \x3c!-- the transactional semantics... --\x3e\n        <tx:attributes>\n            \x3c!-- all methods starting with \'get\' are read-only --\x3e\n            <tx:method name="get*" read-only="true"/>\n            \x3c!-- other methods use the default transaction settings (see below) --\x3e\n            <tx:method name="*"/>\n        </tx:attributes>\n    </tx:advice>\n\n    \x3c!-- ensure that the above transactional advice runs for any execution\n        of an operation defined by the FooService interface --\x3e\n    <aop:config>\n        <aop:pointcut id="fooServiceOperation" expression="execution(* x.y.service.FooService.*(..))"/>\n        <aop:advisor advice-ref="txAdvice" pointcut-ref="fooServiceOperation"/>\n    </aop:config>\n\n    \x3c!-- don\'t forget the DataSource --\x3e\n    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">\n        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>\n        <property name="url" value="jdbc:oracle:thin:@rj-t42:1521:elvis"/>\n        <property name="username" value="scott"/>\n        <property name="password" value="tiger"/>\n    </bean>\n\n    \x3c!-- similarly, don\'t forget the TransactionManager --\x3e\n    <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n        <property name="dataSource" ref="dataSource"/>\n    </bean>\n\n    \x3c!-- other <bean/> definitions here --\x3e\n\n</beans>\n\n\næ£æ¥åé¢çéç½®ãå®åå®æ¨è¦ä½¿æå¡å¯¹è±¡ fooService bean å·æäºå¡æ§ãè¦åºç¨çäºå¡è¯­ä¹å°è£å¨ <tx:advice/> å®ä¹ä¸­ã<tx:advice/> å®ä¹è¯»ä½âææä»¥ get å¼å¤´çæ¹æ³é½å°å¨åªè¯»äºå¡çä¸ä¸æä¸­è¿è¡ï¼ææå¶ä»æ¹æ³é½å°ä»¥é»è®¤äºå¡è¯­ä¹è¿è¡âã<tx:advice/> æ ç­¾ç transaction-manager å±æ§è®¾ç½®ä¸ºå°é©±å¨äºå¡ç TransactionManager bean çåç§°ï¼å¨æ¬ä¾ä¸­ä¸º txManager beanï¼ã\n\n> å¦æè¦è¿æ¥ç TransactionManager ç bean åç§°å·æåç§° transactionManagerï¼åå¯ä»¥çç¥äºå¡ advice (tx:advice/) ä¸­ç transaction-manager å±æ§ãå¦æè¦è¿æ¥ç TransactionManager bean æä»»ä½å¶ä»åç§°ï¼åå¿é¡»æ¾å¼ä½¿ç¨ transaction-manager å±æ§ï¼å¦åé¢çç¤ºä¾æç¤ºã\n\n<aop:config/> å®ä¹ç¡®ä¿ç± txAdvice bean å®ä¹çäºå¡æ§å»ºè®®å¨ç¨åºä¸­çéå½ä½ç½®è¿è¡ãé¦åï¼æ¨å®ä¹ä¸ä¸ªåå¥ç¹ï¼è¯¥åå¥ç¹ä¸ FooService æ¥å£ (fooServiceOperation) ä¸­å®ä¹çä»»ä½æä½çæ§è¡ç¸å¹éãç¶åï¼æ¨ä½¿ç¨ä¸ä¸ª adviser å°åå¥ç¹ä¸ txAdvice ç¸å³èãç»æè¡¨æï¼å¨æ§è¡ fooServiceOperation æ¶ï¼ä¼è¿è¡ txAdvice å®ä¹çå»ºè®®ã\n\nä¸ä¸ªå¸¸è§çè¦æ±æ¯ä½¿æ´ä¸ªæå¡å±å·æäºå¡æ§ãæå¥½çæ¹æ³æ¯æ´æ¹åå¥ç¹è¡¨è¾¾å¼ä»¥å¹éæå¡å±ä¸­çä»»ä½æä½ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n<aop:config>\n    <aop:pointcut id="fooServiceMethods" expression="execution(* x.y.service.*.*(..))"/>\n    <aop:advisor advice-ref="txAdvice" pointcut-ref="fooServiceMethods"/>\n</aop:config>\n\n\nåé¢æ¾ç¤ºçéç½®ç¨äºå´ç»ä» fooService bean å®ä¹åå»ºçå¯¹è±¡åå»ºäºå¡ä»£çãä»£çéç½®äºäºå¡ adviceï¼ä»¥ä¾¿å¨ä»£çä¸è°ç¨éå½çæ¹æ³æ¶ï¼æ ¹æ®ä¸è¯¥æ¹æ³å³èçäºå¡éç½®ï¼å¯å¨ãæåãæ è®°ä¸ºåªè¯»ç­äºå¡ãèèä»¥ä¸æµè¯é©±å¨åé¢æ¾ç¤ºçéç½®çç¨åºï¼\n\npublic final class Boot {\n\n    public static void main(final String[] args) throws Exception {\n        ApplicationContext ctx = new ClassPathXmlApplicationContext("context.xml");\n        FooService fooService = ctx.getBean(FooService.class);\n        fooService.insertFoo(new Foo());\n    }\n}\n\n\n\n# åæ»ä¸ä¸ªå£°ææ§äºå¡\n\nSpring æ¡æ¶ä¸­ï¼è§¦åäºå¡åæ»çæ¨èæ¹å¼æ¯å¨äºå¡ä¸ä¸æçä»£ç ä¸­æåºå¼å¸¸ãSpring äºå¡æ¡æ¶ä¼æè·ä»»ä½æªå¤ççå¼å¸¸ï¼å¹¶ç¡®å®æ¯å¦å°äºå¡æ è®°ä¸ºåæ»ã\n\nå¨å¶é»è®¤éç½®ä¸­ï¼Spring äºå¡æ¡æ¶åªä¼å°å­å¨è¿è¡æ¶ä¸æªç»æ£æ¥å¼å¸¸çäºå¡æ è®°ä¸ºåæ»ãä¹å°±æ¯è¯´ï¼å½æåºçå¼å¸¸æ¯ RuntimeException çå®ä¾æå­ç±»æ¶ã ï¼é»è®¤æåµä¸ï¼éè¯¯å®ä¾ä¹ä¼å¯¼è´åæ»ï¼ãä»äºå¡æ¹æ³æåºçæ£æ¥å¼å¸¸ä¸ä¼å¯¼è´é»è®¤éç½®ä¸­çåæ»ã\n\næ¨å¯ä»¥éè¿æå®åæ»è§åï¼æç¡®æå®åªäºå¼å¸¸ç±»åå°å¯¼è´äºå¡åæ»ã\n\n> åæ»è§åçº¦å®å¨æåºæå®å¼å¸¸æ¶æ¯å¦åºåæ»äºå¡ï¼å¹¶ä¸è§ååºäºæ¨¡å¼ãæ¨¡å¼å¯ä»¥æ¯å®å¨éå®çç±»åæå¼å¸¸ç±»åçå®å¨éå®ç±»åçå­å­ç¬¦ä¸²ï¼å¿é¡»æ¯ Throwable çå­ç±»ï¼ï¼ç®åä¸æ¯æééç¬¦ãä¾å¦ï¼javax.servlet.ServletException æ ServletException çå¼å°å¹é javax.servlet.ServletException åå¶å­ç±»ã\n> \n> åæ»è§åå¯ä»¥éè¿ rollback-for å no-rollback-for å±æ§å¨ XML ä¸­éç½®ï¼è¿åè®¸å°æ¨¡å¼æå®ä¸ºå­ç¬¦ä¸²ãä½¿ç¨ @Transactional æ¶ï¼å¯ä»¥éè¿ rollbackFor / noRollbackFor årollbackForClassName / noRollbackForClassName å±æ§éç½®åæ»è§åï¼å®ä»¬åè®¸å°æ¨¡å¼åå«æå®ä¸ºç±»å¼ç¨æå­ç¬¦ä¸²ãå½å¼å¸¸ç±»åè¢«æå®ä¸ºç±»å¼ç¨æ¶ï¼å¶å®å¨éå®åç§°å°ç¨ä½æ¨¡å¼ãå æ­¤ï¼@Transactional(rollbackFor = example.CustomException.class) ç­ä»·äº @Transactional(rollbackForClassName = \'example.CustomException\')ã\n\nä»¥ä¸ XML çæ®µæ¼ç¤ºäºå¦ä½éè¿ rollback-for å±æ§æä¾å¼å¸¸æ¨¡å¼æ¥ä¸ºå·²æ£æ¥çãç¹å®ç Exception ç±»åéç½®åæ»ï¼\n\n<tx:advice id="txAdvice" transaction-manager="txManager">\n    <tx:attributes>\n    <tx:method name="get*" read-only="true" rollback-for="NoProductInStockException"/>\n    <tx:method name="*"/>\n    </tx:attributes>\n</tx:advice>\n\n\nå¦ææ¨ä¸å¸æå¨æåºå¼å¸¸æ¶åæ»äºå¡ï¼æ¨è¿å¯ä»¥æå®âä¸åæ»âè§åãä¸é¢çä¾å­åè¯ Spring äºå¡æ¡æ¶ï¼å³ä½¿å¨é¢å¯¹æªå¤çç InstrumentNotFoundException æ¶ä¹è¦æäº¤ä¼´éäºå¡ã\n\n<tx:advice id="txAdvice">\n    <tx:attributes>\n    <tx:method name="updateStock" no-rollback-for="InstrumentNotFoundException"/>\n    <tx:method name="*"/>\n    </tx:attributes>\n</tx:advice>\n\n\nå½ Spring Framework äºå¡æ¡æ¶æè·å°å¼å¸¸ï¼å¹¶æ£æ¥éç½®çåæ»è§åä»¥ç¡®å®æ¯å¦å°äºå¡æ è®°ä¸ºåæ»æ¶ï¼ç±æéè¦çå¹éè§åå³å®ãå æ­¤ï¼å¨ä»¥ä¸éç½®çæåµä¸ï¼é¤ InstrumentNotFoundException ä¹å¤çä»»ä½å¼å¸¸é½ä¼å¯¼è´ä¼´éäºå¡çåæ»ã\n\n<tx:advice id="txAdvice">\n    <tx:attributes>\n    <tx:method name="*" rollback-for="Throwable" no-rollback-for="InstrumentNotFoundException"/>\n    </tx:attributes>\n</tx:advice>\n\n\næ¨è¿å¯ä»¥ä»¥ç¼ç¨æ¹å¼æç¤ºæéçåæ»ãè½ç¶å¾ç®åï¼ä½è¿ä¸ªè¿ç¨éå¸¸å·æä¾µå¥æ§ï¼å¹¶ä¸å°æ¨çä»£ç ä¸ Spring Framework çäºå¡åºç¡è®¾æ½ç´§å¯è¦åãä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½ä»¥ç¼ç¨æ¹å¼æç¤ºæéçåæ»ã\n\npublic void resolvePosition() {\n    try {\n        // some business logic...\n    } catch (NoProductInStockException ex) {\n        // trigger rollback programmatically\n        TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();\n    }\n}\n\n\nå¦æå¯è½çè¯ï¼å¼ºçå»ºè®®æ¨ä½¿ç¨å£°ææ§æ¹æ³è¿è¡åæ»ãå¦ææ¨ç»å¯¹éè¦ï¼å¯ä»¥ä½¿ç¨ç¨åºååæ»ï¼ä½å®çä½¿ç¨ä¸å®ç°å¹²åçåºäº POJO çæ¶æèéèé©°ã\n\n\n# ä¸ºä¸åç Bean éç½®ä¸åçäºå¡è¯­ä¹\n\nèèæ¨æè®¸å¤æå¡å±å¯¹è±¡çåºæ¯ï¼å¹¶ä¸æ¨å¸æå¯¹æ¯ä¸ªå¯¹è±¡åºç¨å®å¨ä¸åçäºå¡éç½®ãæ¨å¯ä»¥éè¿å®ä¹å·æä¸å <aop:advisor/> åç´ åä¸å advice-ref å±æ§å¼çåç¹æ¥å®ç°è¿ä¸ç¹ã\n\nä½ä¸ºä¸ä¸ªæ¯è¾ç¹ï¼é¦ååè®¾æ¨çæææå¡å±ç±»é½å®ä¹å¨æ ¹ x.y.service åä¸­ã è¦ä½¿ä½ä¸ºè¯¥åï¼æå­åï¼ä¸­å®ä¹çç±»çå®ä¾å¹¶ä¸åç§°ä»¥ Service ç»å°¾çææ bean é½å·æé»è®¤çäºå¡éç½®ï¼æ¨å¯ä»¥ç¼åä»¥ä¸åå®¹ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemaLocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <aop:config>\n\n        <aop:pointcut id="serviceOperation"\n                expression="execution(* x.y.service..*Service.*(..))"/>\n\n        <aop:advisor pointcut-ref="serviceOperation" advice-ref="txAdvice"/>\n\n    </aop:config>\n\n    \x3c!-- these two beans will be transactional... --\x3e\n    <bean id="fooService" class="x.y.service.DefaultFooService"/>\n    <bean id="barService" class="x.y.service.extras.SimpleBarService"/>\n\n    \x3c!-- ... and these two beans won\'t --\x3e\n    <bean id="anotherService" class="org.xyz.SomeService"/> \x3c!-- (not in the right package) --\x3e\n    <bean id="barManager" class="x.y.service.SimpleBarManager"/> \x3c!-- (doesn\'t end in \'Service\') --\x3e\n\n    <tx:advice id="txAdvice">\n        <tx:attributes>\n            <tx:method name="get*" read-only="true"/>\n            <tx:method name="*"/>\n        </tx:attributes>\n    </tx:advice>\n\n    \x3c!-- other transaction infrastructure beans such as a TransactionManager omitted... --\x3e\n\n</beans>\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨å®å¨ä¸åçäºå¡è®¾ç½®éç½®ä¸¤ä¸ªä¸åç bean\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemaLocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <aop:config>\n\n        <aop:pointcut id="defaultServiceOperation"\n                expression="execution(* x.y.service.*Service.*(..))"/>\n\n        <aop:pointcut id="noTxServiceOperation"\n                expression="execution(* x.y.service.ddl.DefaultDdlManager.*(..))"/>\n\n        <aop:advisor pointcut-ref="defaultServiceOperation" advice-ref="defaultTxAdvice"/>\n\n        <aop:advisor pointcut-ref="noTxServiceOperation" advice-ref="noTxAdvice"/>\n\n    </aop:config>\n\n    \x3c!-- this bean will be transactional (see the \'defaultServiceOperation\' pointcut) --\x3e\n    <bean id="fooService" class="x.y.service.DefaultFooService"/>\n\n    \x3c!-- this bean will also be transactional, but with totally different transactional settings --\x3e\n    <bean id="anotherFooService" class="x.y.service.ddl.DefaultDdlManager"/>\n\n    <tx:advice id="defaultTxAdvice">\n        <tx:attributes>\n            <tx:method name="get*" read-only="true"/>\n            <tx:method name="*"/>\n        </tx:attributes>\n    </tx:advice>\n\n    <tx:advice id="noTxAdvice">\n        <tx:attributes>\n            <tx:method name="*" propagation="NEVER"/>\n        </tx:attributes>\n    </tx:advice>\n\n    \x3c!-- other transaction infrastructure beans such as a TransactionManager omitted... --\x3e\n\n</beans>\n\n\n\n# <tx:advice/> éç½®\n\n<tx:advice/> çé»è®¤éç½®ä¸ºï¼\n\n * ä¼ æ­è®¾ç½®æ¯ REQUIRED\n\n * éç¦»çº§å«ä¸º DEFAULT\n\n * äºå¡æ¯ read-write\n\n * äºå¡è¶æ¶é»è®¤ä¸ºåºå±äºå¡ç³»ç»çé»è®¤è¶æ¶ï¼å¦æä¸æ¯æè¶æ¶ï¼åä¸ºæ ã\n\n * ä»»ä½ RuntimeException é½ä¼è§¦ååæ»ï¼èä»»ä½å·²æ£æ¥ç Exception é½ä¸ä¼\n\n<tx:advice/> éç½®å±æ§\n\nå±æ§                æ¯å¦å¿è¦   é»è®¤å¼        æè¿°\nname              Yes               ä¸äºå¡å±æ§å³èçæ¹æ³åç§°ãæ¯æééç¬¦ï¼å¦ï¼get*ãhandle*ãon*Event\npropagation       No     REQUIRED   äºå¡ä¼ æ­è¡ä¸º\nisolation         No     DEFAULT    äºå¡éç¦»çº§å«ãä»éç¨äº REQUIRED æ REQUIRES_NEW çä¼ æ­è®¾ç½®ã\ntimeout           No     -1         äºå¡è¶æ¶æ¶é´ï¼åä½ï¼ç§ï¼ãä»éç¨äº REQUIRED æ REQUIRES_NEW çä¼ æ­è®¾ç½®ã\nread-only         No     false      read-write æ read-only äºå¡ã\nrollback-for      No                è§¦ååæ»ç Exception å®ä¾åè¡¨ï¼éè¿éå·åéï¼ã\nno-rollback-for   No                ä¸è§¦ååæ»ç Exception å®ä¾åè¡¨ï¼éè¿éå·åéï¼ã\n\n\n# ä½¿ç¨ @Transactional æ³¨è§£\n\né¤äºåºäº XML çå£°æå¼äºå¡éç½®æ¹æ³ä¹å¤ï¼æ¨è¿å¯ä»¥ä½¿ç¨åºäºæ³¨è§£çæ¹æ³ã\n\nä¸é¢æ¯ä¸ä¸ªä½¿ç¨ @Transactional æ³¨è§£çç¤ºä¾ï¼\n\n@Transactional\npublic class DefaultFooService implements FooService {\n\n    @Override\n    public Foo getFoo(String fooName) {\n        // ...\n    }\n\n    @Override\n    public Foo getFoo(String fooName, String barName) {\n        // ...\n    }\n\n    @Override\n    public void insertFoo(Foo foo) {\n        // ...\n    }\n\n    @Override\n    public void updateFoo(Foo foo) {\n        // ...\n    }\n}\n\n\nå¦ä¸æè¿°å¨ç±»çº§å«ä½¿ç¨ï¼@Transactional æ³¨è§£è¡¨æå£°æç±»ï¼åå¶å­ç±»ï¼çæææ¹æ³é½ä½¿ç¨é»è®¤äºå¡éç½®ã æèï¼å¯ä»¥åç¬ä¸ºæ¯ä¸ªæ¹æ³æå®æ³¨è§£ãè¯·æ³¨æï¼ç±»çº§å«çæ³¨è§£ä¸éç¨äºç±»å±æ¬¡ç»æä¸­çç¥åç±»ï¼ å¨è¿ç§æåµä¸ï¼ç»§æ¿çæ¹æ³éè¦å¨æ¬å°éæ°å£°ææè½åä¸å­ç±»çº§å«çæ³¨è§£ã\n\nå½ä¸é¢ç POJO ç±»å¨ Spring ä¸ä¸æä¸­å®ä¹ä¸º bean æ¶ï¼æ¨å¯ä»¥éè¿ @Configuration ç±»ä¸­ç @EnableTransactionManagement æ³¨è§£ä½¿ bean å®ä¾å·æäºå¡æ§ã\n\nå¨ XML éç½®ä¸­ï¼ <tx:annotation-driven/> æ ç­¾æä¾äºç±»ä¼¼çä¾¿å©ï¼\n\n\x3c!-- from the file \'context.xml\' --\x3e\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemaLocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- this is the service object that we want to make transactional --\x3e\n    <bean id="fooService" class="x.y.service.DefaultFooService"/>\n\n    \x3c!-- enable the configuration of transactional behavior based on annotations --\x3e\n    \x3c!-- a TransactionManager is still required --\x3e\n    <tx:annotation-driven transaction-manager="txManager"/>\n\n    <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n        \x3c!-- (this dependency is defined somewhere else) --\x3e\n        <property name="dataSource" ref="dataSource"/>\n    </bean>\n\n    \x3c!-- other <bean/> definitions here --\x3e\n\n</beans>\n\n\n# @Transactional éç½®\n\nPROPERTY                 TYPE                                                         DESCRIPTION\nvalue                    String                                                       Optional qualifier that specifies the transaction manager to\n                                                                                      be used.\ntransactionManager       String                                                       Alias for value.\nlabel                    Array of String labels to add an expressive description to   Labels may be evaluated by transaction managers to associate\n                         the transaction.                                             implementation-specific behavior with the actual\n                                                                                      transaction.\npropagation              enum: Propagation                                            Optional propagation setting.\nisolation                enum: Isolation                                              Optional isolation level. Applies only to propagation values\n                                                                                      of REQUIRED or REQUIRES_NEW.\ntimeout                  int (in seconds of granularity)                              Optional transaction timeout. Applies only to propagation\n                                                                                      values of REQUIRED or REQUIRES_NEW.\ntimeoutString            String (in seconds of granularity)                           Alternative for specifying the timeout in seconds as a\n                                                                                      String valueâââfor example, as a placeholder.\nreadOnly                 boolean                                                      Read-write versus read-only transaction. Only applicable to\n                                                                                      values of REQUIRED or REQUIRES_NEW.\nrollbackFor              Array of Class objects, which must be derived from           Optional array of exception types that must cause rollback.\n                         Throwable.\nrollbackForClassName     Array of exception name patterns.                            Optional array of exception name patterns that must cause\n                                                                                      rollback.\nnoRollbackFor            Array of Class objects, which must be derived from           Optional array of exception types that must not cause\n                         Throwable.                                                   rollback.\nnoRollbackForClassName   Array of exception name patterns.                            Optional array of exception name patterns that must not\n                                                                                      cause rollback.\n\n# å¤äºå¡ç®¡çå¨åºæ¯ä¸ä½¿ç¨ @Transactional\n\næäºæåµä¸ï¼åºç¨ç¨åºä¸­å¯è½éè¦æ¥å¥å¤ä¸ªæ°æ®æºï¼ç¸åºçï¼ä¹éè¦å¤ä¸ªç¬ç«çäºå¡ç®¡çå¨ãä½¿ç¨èå¯ä»¥ä½¿ç¨ @Transactional æ³¨éç value æ transactionManager å±æ§æ¥éæ©æ§å°æå®è¦ä½¿ç¨ç TransactionManager çæ è¯ãè¿å¯ä»¥æ¯ bean åç§°æäºå¡ç®¡çå¨ bean çéå®ç¬¦å¼ã\n\npublic class TransactionalService {\n\n    @Transactional("order")\n    public void setSomething(String name) { ... }\n\n    @Transactional("account")\n    public void doSomething() { ... }\n\n    @Transactional("reactive-account")\n    public Mono<Void> doSomethingReactive() { ... }\n}\n\n\nä¸é¢å±ç¤ºå¦ä½å®ä¹ TransactionManagerï¼\n\n<tx:annotation-driven/>\n\n    <bean id="transactionManager1" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n        ...\n        <qualifier value="order"/>\n    </bean>\n\n    <bean id="transactionManager2" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n        ...\n        <qualifier value="account"/>\n    </bean>\n\n    <bean id="transactionManager3" class="org.springframework.data.r2dbc.connectionfactory.R2dbcTransactionManager">\n        ...\n        <qualifier value="reactive-account"/>\n    </bean>\n\n\nå¨è¿ç§æåµä¸ï¼TransactionalService ä¸çåä¸ªæ¹æ³å¨åç¬çäºå¡ç®¡çå¨ä¸è¿è¡ï¼ç± orderãaccount å reactive-account éå®ç¬¦åºåã å¦ææ²¡ææ¾å°æç¡®æå®ç TransactionManager beanï¼åä»ä½¿ç¨é»è®¤ç <tx:annotation-driven> ç®æ  bean åç§°ã\n\n# èªå®ä¹ç»åæ³¨è§£\n\nå¦ææ¨åç°å¨è®¸å¤ä¸åçæ¹æ³ä¸éå¤ä½¿ç¨ @Transactional ç¸åçå±æ§ï¼å¯ä»¥ä½¿ç¨ Spring çåæ³¨è§£èªå®ä¹ç»åæ³¨è§£ã\n\n@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Transactional(transactionManager = "order", label = "causal-consistency")\npublic @interface OrderTx {\n}\n\n@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Transactional(transactionManager = "account", label = "retryable")\npublic @interface AccountTx {\n}\n\n\nä½¿ç¨ç¤ºä¾ï¼\n\npublic class TransactionalService {\n\n    @OrderTx\n    public void setSomething(String name) {\n        // ...\n    }\n\n    @AccountTx\n    public void doSomething() {\n        // ...\n    }\n}\n\n\nå¨ä¸é¢çç¤ºä¾ä¸­ï¼æä»¬ä½¿ç¨è¯­æ³æ¥å®ä¹äºå¡ç®¡çå¨éå®ç¬¦åäºå¡æ ç­¾ï¼ä½æä»¬ä¹å¯ä»¥åæ¬ä¼ æ­è¡ä¸ºãåæ»è§åãè¶æ¶åå¶ä»ç¹æ§ã\n\n# äºå¡ä¼ æ­\n\nå¨ Spring ç®¡ççäºå¡ä¸­ï¼è¯·æ³¨æç©çäºå¡åé»è¾äºå¡ä¹é´çå·®å¼ï¼ä»¥åä¼ æ­è®¾ç½®å¦ä½åºç¨äºè¿ç§å·®å¼ã\n\n\n\nPROPAGATION_REQUIRED å¼ºå¶æ§è¡ç©çäºå¡ï¼å¦æå°ä¸å­å¨äºå¡ï¼åå¨å½åèå´çæ¬å°æ§è¡æåä¸æ´å¤§èå´å®ä¹çç°æâå¤é¨âäºå¡ã è¿æ¯åä¸çº¿ç¨åçå¸¸è§è°ç¨å æ å®æä¸­çä¸ä¸ªå¾å¥½çé»è®¤è®¾ç½®ï¼ä¾å¦ï¼å§æç»å¤ä¸ªå­å¨åºæ¹æ³çæå¡å¤è§ï¼å¶ä¸­ææåºå±èµæºé½å¿é¡»åä¸æå¡çº§äºå¡ï¼ã\n\nå½ä¼ æ­è®¾ç½®ä¸º PROPAGATION_REQUIRED æ¶ï¼å°ä¸ºåºç¨è¯¥è®¾ç½®çæ¯ä¸ªæ¹æ³åå»ºä¸ä¸ªé»è¾äºå¡èå´ãæ¯ä¸ªè¿æ ·çé»è¾äºå¡èå´å¯ä»¥åç¬ç¡®å®ä»åæ»ç¶æï¼å¤é¨äºå¡èå´å¨é»è¾ä¸ç¬ç«äºåé¨äºå¡èå´ãå¨æ å PROPAGATION_REQUIRED è¡ä¸ºçæåµä¸ï¼ææè¿äºèå´é½æ å°å°åä¸ä¸ªç©çäºå¡ãå æ­¤ï¼å¨åé¨äºå¡èå´åè®¾ç½®çä»åæ»æ è®°ç¡®å®ä¼å½±åå¤é¨äºå¡å®éæäº¤çæºä¼ã\n\nä½æ¯ï¼å¨åé¨äºå¡èå´è®¾ç½®äºä»åæ»æ è®°çæåµä¸ï¼å¤é¨äºå¡å°æªå³å®åæ»æ¬èº«ï¼å æ­¤åæ»ï¼ç±åé¨äºå¡èå´éé»è§¦åï¼æ¯æå¤çãæ­¤æ¶ä¼å¼åç¸åºç UnexpectedRollbackExceptionãè¿æ¯é¢æçè¡ä¸ºï¼å æ­¤äºå¡çè°ç¨èæ°¸è¿ä¸ä¼è¢«è¯¯å¯¼ä»¥ä¸ºæ§è¡äºæäº¤ï¼èå®éä¸å¹¶æ²¡ææ§è¡ãå æ­¤ï¼å¦æåé¨äºå¡ï¼å¤é¨è°ç¨èä¸ç¥éï¼é»é»å°å°äºå¡æ è®°ä¸ºä»åæ»ï¼å¤é¨è°ç¨èä»ä¼è°ç¨æäº¤ãå¤é¨è°ç¨èéè¦æ¥æ¶ UnexpectedRollbackException ä»¥æ¸æ¥å°æç¤ºæ§è¡äºåæ»ã\n\n\n\nPROPAGATION_REQUIRES_NEW ä¸ PROPAGATION_REQUIRED ç¸æ¯ï¼å§ç»ä¸ºæ¯ä¸ªåå½±åçäºå¡èå´ä½¿ç¨ç¬ç«çç©çäºå¡ï¼ä»ä¸åä¸å¤é¨èå´çç°æäºå¡ã å¨è¿ç§å®æä¸ï¼åºå±èµæºäºå¡æ¯ä¸åçï¼å æ­¤å¯ä»¥ç¬ç«æäº¤æåæ»ï¼å¤é¨äºå¡ä¸ååé¨äºå¡åæ»ç¶æçå½±åï¼åé¨äºå¡çéå¨å®æåç«å³éæ¾ã è¿æ ·ä¸ä¸ªç¬ç«çåé¨äºå¡ä¹å¯ä»¥å£°æèªå·±çéç¦»çº§å«ãè¶æ¶ååªè¯»è®¾ç½®ï¼èä¸æ¯ç»§æ¿å¤é¨äºå¡çç¹æ§ã\n\n\n# JDBC å¼å¸¸æ½è±¡\n\nSpring ä¼å°æ°æ®æä½çå¼å¸¸è½¬æ¢ä¸º DataAccessExceptionã\n\nSpring æ¯æä¹è®¤è¯é£äºéè¯¯ç ç\n\néè¿ SQLErrorCodeSQLExceptionTranslator è§£æéè¯¯ç \n\nErrorCode å®ä¹ï¼sql-error-codes.xml æä»¶ï¼\n\n\n# Spring äºå¡æä½³å®è·µ\n\n\n\n\n# Spring äºå¡æªçæ\n\nä½¿ç¨ @Transactional æ³¨è§£å¼å¯å£°æå¼äºå¡æ¶ï¼ æå®¹æå¿½ç¥çé®é¢æ¯ï¼å¾å¯è½äºå¡å¹¶æ²¡æçæã\n\n@Transactional çæååï¼\n\n# @Transactional æ¹æ³å¿é¡»æ¯ public\n\nååä¸ï¼é¤éç¹æ®éç½®ï¼æ¯å¦ä½¿ç¨ AspectJ éæç»å¥å®ç° AOPï¼ï¼å¦ååªæå®ä¹å¨ public æ¹æ³ä¸ç @Transactional æè½çæãåå æ¯ï¼Spring é»è®¤éè¿å¨æä»£ççæ¹å¼å®ç° AOPï¼å¯¹ç®æ æ¹æ³è¿è¡å¢å¼ºï¼private æ¹æ³æ æ³ä»£çå°ï¼Spring èªç¶ä¹æ æ³å¨æå¢å¼ºäºå¡å¤çé»è¾ã\n\nãç¤ºä¾ãéè¯¯ä½¿ç¨ @Transactional æ¡ä¾ä¸\n\n\t@Transactional\n\tvoid createUserPrivate(UserEntity entity) {\n\t\tuserRepository.save(entity);\n\t\tif (entity.getName().contains("test")) { throw new RuntimeException("invalid username!"); }\n\t}\n\n\t//ç§ææ¹æ³\n\tpublic int createUserWrong1(String name) {\n\t\ttry {\n\t\t\tthis.createUserPrivate(new UserEntity(name));\n\t\t} catch (Exception ex) {\n\t\t\tlog.error("create user failed because {}", ex.getMessage());\n\t\t}\n\t\treturn userRepository.findByName(name).size();\n\t}\n\n\nå½ä¼ å¥åä¸º test çç¨æ·å®ä½ï¼ä¼æåºå¼å¸¸ï¼ä½ @Transactional æªçæï¼ä¸ä¼è§¦ååæ»ã\n\n# å¿é¡»éè¿ Spring æ³¨å¥ç Bean è¿è¡è°ç¨\n\nååäºï¼å¿é¡»éè¿ä»£çè¿çç±»ä»å¤é¨è°ç¨ç®æ æ¹æ³æè½çæã\n\nãç¤ºä¾ãéè¯¯ä½¿ç¨ @Transactional æ¡ä¾äº\n\n\t//èªè°ç¨\n\tpublic int createUserWrong2(String name) {\n\t\ttry {\n\t\t\tthis.createUserPublic(new UserEntity(name));\n\t\t} catch (Exception ex) {\n\t\t\tlog.error("create user failed because {}", ex.getMessage());\n\t\t}\n\t\treturn userRepository.findByName(name).size();\n\t}\n\n\t//å¯ä»¥ä¼ æ­åºå¼å¸¸\n\t@Transactional\n\tpublic void createUserPublic(UserEntity entity) {\n\t\tuserRepository.save(entity);\n\t\tif (entity.getName().contains("test")) { throw new RuntimeException("invalid username!"); }\n\t}\n\n\nå½ä¼ å¥åä¸º test çç¨æ·å®ä½ï¼ä¼æåºå¼å¸¸ï¼ä½ @Transactional æªçæï¼ä¸ä¼è§¦ååæ»ã\n\nè¯´æï¼Spring éè¿ AOP ææ¯å¯¹æ¹æ³è¿è¡å­èç å¢å¼ºï¼è¦è°ç¨å¢å¼ºè¿çæ¹æ³å¿ç¶æ¯è°ç¨ä»£çåçå¯¹è±¡ã\n\n\n# äºå¡è½ç¶çæä½æªåæ»\n\néè¿ AOP å®ç°äºå¡å¤çå¯ä»¥çè§£ä¸ºï¼ä½¿ç¨ tryâ¦catchâ¦ æ¥åè£¹æ è®°äº @Transactional æ³¨è§£çæ¹æ³ï¼å½æ¹æ³åºç°äºå¼å¸¸å¹¶ä¸æ»¡è¶³ä¸å®æ¡ä»¶çæ¶åï¼å¨ catch éé¢æä»¬å¯ä»¥è®¾ç½®äºå¡åæ»ï¼æ²¡æå¼å¸¸åç´æ¥æäº¤äºå¡ã\n\nâä¸å®æ¡ä»¶âï¼ä¸»è¦åæ¬ä¸¤ç¹ï¼\n\nç¬¬ä¸ï¼åªæå¼å¸¸ä¼ æ­åºäºæ è®°äº @Transactional æ³¨è§£çæ¹æ³ï¼äºå¡æè½åæ»ãå¨ Spring ç TransactionAspectSupport éæä¸ª invokeWithinTransaction æ¹æ³ï¼éé¢å°±æ¯å¤çäºå¡çé»è¾ã\n\nç¬¬äºï¼é»è®¤æåµä¸ï¼åºç° RuntimeExceptionï¼éåæ£å¼å¸¸ï¼æ Error çæ¶åï¼Spring æä¼åæ»äºå¡ã\n\n@Service\n@Slf4j\npublic class UserService {\n\n\t@Autowired\n\tprivate UserRepository userRepository;\n\n\t//å¼å¸¸æ æ³ä¼ æ­åºæ¹æ³ï¼å¯¼è´äºå¡æ æ³åæ»\n\t@Transactional\n\tpublic void createUserWrong1(String name) {\n\t\ttry {\n\t\t\tuserRepository.save(new UserEntity(name));\n\t\t\tthrow new RuntimeException("error");\n\t\t} catch (Exception ex) {\n\t\t\tlog.error("create user failed", ex);\n\t\t}\n\t}\n\n\t//å³ä½¿åºäºåæ£å¼å¸¸ä¹æ æ³è®©äºå¡åæ»\n\t@Transactional\n\tpublic void createUserWrong2(String name) throws IOException {\n\t\tuserRepository.save(new UserEntity(name));\n\t\totherTask();\n\t}\n\n\t//å ä¸ºæä»¶ä¸å­å¨ï¼ä¸å®ä¼æåºä¸ä¸ªIOException\n\tprivate void otherTask() throws IOException {\n\t\tFiles.readAllLines(Paths.get("file-that-not-exist"));\n\t}\n\n}\n\n\nå¨ createUserWrong1 æ¹æ³ä¸­ä¼æåºä¸ä¸ª RuntimeExceptionï¼ä½ç±äºæ¹æ³å catch äºææå¼å¸¸ï¼å¼å¸¸æ æ³ä»æ¹æ³ä¼ æ­åºå»ï¼äºå¡èªç¶æ æ³åæ»ã\n\nå¨ createUserWrong2 æ¹æ³ä¸­ï¼æ³¨åç¨æ·çåæ¶ä¼æä¸æ¬¡ otherTask æä»¶è¯»åæä½ï¼å¦ææä»¶è¯»åå¤±è´¥ï¼æä»¬å¸æç¨æ·æ³¨åçæ°æ®åºæä½åæ»ãè½ç¶è¿éæ²¡ææè·å¼å¸¸ï¼ä½å ä¸º otherTask æ¹æ³æåºçæ¯åæ£å¼å¸¸ï¼createUserWrong2 ä¼ æ­åºå»çä¹æ¯åæ£å¼å¸¸ï¼äºå¡åæ ·ä¸ä¼åæ»ã\n\nãè§£å³æ¹æ¡ä¸ãå¦æä½ å¸æèªå·±æè·å¼å¸¸è¿è¡å¤ççè¯ï¼ä¹æ²¡å³ç³»ï¼å¯ä»¥æå¨è®¾ç½® TransactionAspectSupport.currentTransactionStatus().setRollbackOnly(); è®©å½åäºå¡å¤äºåæ»ç¶æï¼\n\n@Transactional\npublic void createUserRight1(String name) {\n   try {\n      userRepository.save(new UserEntity(name));\n      throw new RuntimeException("error");\n   } catch (Exception ex) {\n      log.error("create user failed", ex);\n      TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();\n   }\n}\n\n\nãè§£å³æ¹æ¡äºãå¨æ³¨è§£ä¸­å£°æ @Transactional(rollbackFor = Exception.class)ï¼ææéå°ææç Exception é½åæ»äºå¡ï¼æ¥çªç ´é»è®¤ä¸åæ»åæ£å¼å¸¸çéå¶ï¼ï¼\n\n@Transactional(rollbackFor = Exception.class)\npublic void createUserRight2(String name) throws IOException {\n   userRepository.save(new UserEntity(name));\n   otherTask();\n}\n\n\n\n# ç»åäºå¡ä¼ æ­æ¹å¼\n\nå¦ææ¹æ³æ¶åå¤æ¬¡æ°æ®åºæä½ï¼å¹¶å¸æå°å®ä»¬ä½ä¸ºç¬ç«çäºå¡è¿è¡æäº¤æåæ»ï¼é£ä¹ æä»¬éè¦èèè¿ä¸æ­¥ç»åéç½®äºå¡ä¼ æ­æ¹å¼ï¼ä¹å°±æ¯ @Transactional æ³¨è§£ç Propagation å±æ§ã\n\n/**\n * {@link Propagation#REQUIRES_NEW} è¡¨ç¤ºæ§è¡å°è¿ä¸ªæ¹æ³æ¶éè¦å¼å¯æ°çäºå¡ï¼å¹¶æèµ·å½åäºå¡\n */\n@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void createSubUserWithExceptionRight(UserEntity entity) {\n   log.info("createSubUserWithExceptionRight start");\n   userRepository.save(entity);\n   throw new RuntimeException("invalid status");\n}\n\n\n\n# åèèµæ\n\n * Spring å®ç½\n * Spring å®æ¹ææ¡£\n * Spring Boot å®æ¹ææ¡£\n * ãJava ä¸å¡å¼åå¸¸è§éè¯¯ 100 ä¾ã',normalizedContent:'# spring ä¹äºå¡\n\nspring éå¯¹ java transaction api (jta)ãjdbcãhibernate å java persistence api(jpa) ç­äºå¡ apiï¼å®ç°äºä¸è´çç¼ç¨æ¨¡åï¼è spring çå£°æå¼äºå¡åè½æ´æ¯æä¾äºæå¶æ¹ä¾¿çäºå¡éç½®æ¹å¼ï¼éå spring boot çèªå¨éç½®ï¼å¤§å¤æ° spring boot é¡¹ç®åªéè¦å¨æ¹æ³ä¸æ è®° @transactional æ³¨è§£ï¼å³å¯ä¸é®å¼å¯æ¹æ³çäºå¡æ§éç½®ã\n\n\n# çè§£äºå¡\n\nå¨è½¯ä»¶å¼åé¢åï¼å¨ææå¨æ çæä½è¢«ç§°ä¸ºäºå¡ï¼transactionï¼ãäºå¡åè®¸ä½ å°å ä¸ªæä½ç»åæä¸ä¸ªè¦ä¹å¨é¨åçè¦ä¹å¨é¨ä¸åççå·¥ä½ååãä¼ ç»ä¸ java ee å¼åå¯¹äºå¡ç®¡çæä¸¤ç§éæ©ï¼å¨å±äºå¡ææ¬å°äºå¡ï¼ä¸¤èé½æå¾å¤§çå±éæ§ã\n\n\n# äºå¡çç¹æ§\n\näºå¡åºè¯¥å·æ 4 ä¸ªå±æ§ï¼åå­æ§ãä¸è´æ§ãéç¦»æ§ãæä¹æ§ãè¿åä¸ªå±æ§éå¸¸ç§°ä¸º acidã\n\n * åå­æ§ï¼atomicï¼ï¼ä¸ä¸ªäºå¡æ¯ä¸ä¸ªä¸å¯åå²çå·¥ä½åä½ï¼äºå¡ä¸­åæ¬çè¯¸æä½è¦ä¹é½åï¼è¦ä¹é½ä¸åã\n * ä¸è´æ§ï¼consistentï¼ï¼äºå¡å¿é¡»æ¯ä½¿æ°æ®åºä»ä¸ä¸ªä¸è´æ§ç¶æåå°å¦ä¸ä¸ªä¸è´æ§ç¶æãä¸è´æ§ä¸åå­æ§æ¯å¯åç¸å³çã\n * éç¦»æ§ï¼isolatedï¼ï¼ä¸ä¸ªäºå¡çæ§è¡ä¸è½è¢«å¶ä»äºå¡å¹²æ°ãå³ä¸ä¸ªäºå¡åé¨çæä½åä½¿ç¨çæ°æ®å¯¹å¹¶åçå¶ä»äºå¡æ¯éç¦»çï¼å¹¶åæ§è¡çåä¸ªäºå¡ä¹é´ä¸è½äºç¸å¹²æ°ã\n * æä¹æ§ï¼durableï¼ï¼æä¹æ§ä¹ç§°æ°¸ä¹æ§ï¼permanenceï¼ï¼æä¸ä¸ªäºå¡ä¸æ¦æäº¤ï¼å®å¯¹æ°æ®åºä¸­æ°æ®çæ¹åå°±åºè¯¥æ¯æ°¸ä¹æ§çãæ¥ä¸æ¥çå¶ä»æä½ææéä¸åºè¯¥å¯¹å¶æä»»ä½å½±åã\n\n\n# å¨å±äºå¡\n\nå¨å±äºå¡åè®¸æ¨ä½¿ç¨å¤ä¸ªäºå¡èµæºï¼éå¸¸æ¯å³ç³»æ°æ®åºåæ¶æ¯éåãåºç¨æå¡å¨éè¿ jta ç®¡çå¨å±äºå¡ï¼è¿æ¯ä¸ä¸ªç¹çç apiï¼é¨ååå å¨äºå¶å¼å¸¸æ¨¡åï¼ãæ­¤å¤ï¼jta usertransaction éå¸¸éè¦æ¥èª jndiï¼è¿æå³çæ¨è¿éè¦ä½¿ç¨ jndi æè½ä½¿ç¨ jtaãå¨å±äºå¡çä½¿ç¨éå¶äºåºç¨ç¨åºä»£ç çä»»ä½æ½å¨éç¨ï¼å ä¸º jta éå¸¸ä»å¨åºç¨ç¨åºæå¡å¨ç¯å¢ä¸­å¯ç¨ã\n\nä»¥åï¼ä½¿ç¨å¨å±äºå¡çé¦éæ¹å¼æ¯éè¿ ejb cmtï¼å®¹å¨ç®¡çäºå¡ï¼ã cmt æ¯ä¸ç§å£°æå¼äºå¡ç®¡çï¼ä¸åäºç¨åºåäºå¡ç®¡çï¼ã ejb cmt æ¶é¤äºå¯¹ä¸äºå¡ç¸å³ç jndi æ¥æ¾çéè¦ï¼å°½ç®¡ä½¿ç¨ ejb æ¬èº«å°±éè¦ä½¿ç¨ jndiãå®æ¶é¤äºå¤§é¨åï¼ä½ä¸æ¯å¨é¨ï¼ç¼å java ä»£ç æ¥æ§å¶äºå¡çéè¦ãå¶ææ¾çç¼ºç¹æ¯ cmt ä¸ jta ååºç¨ç¨åºæå¡å¨ç¯å¢ç¸å³èãæ­¤å¤ï¼å®ä»å¨éæ©å¨ ejb ä¸­å®ç°ä¸å¡é»è¾ï¼æè³å°å¨äºå¡æ§ ejb å¤è§ä¹åï¼æ¶æå¯ç¨ãä¸è¬æ¥è¯´ï¼ejb çè´é¢å½±åæ¯å¦æ­¤ä¹å¤§ï¼ä»¥è³äºè¿ä¸æ¯ä¸ä¸ªæå¸å¼åçæè®®ï¼å°¤å¶æ¯å¨é¢å¯¹å£°æå¼äºå¡ç®¡ççå¼äººæ³¨ç®çæ¿ä»£æ¹æ¡æ¶ã\n\n\n# æ¬å°äºå¡\n\næ¬å°äºå¡æ¯æå®èµæºçï¼ä¾å¦ä¸ jdbc è¿æ¥å³èçäºå¡ãæ¬å°äºå¡å¯è½æ´å®¹æä½¿ç¨ï¼ä½æä¸ä¸ªææ¾çç¼ºç¹ï¼å®ä»¬ä¸è½è·¨å¤ä¸ªäºå¡èµæºå·¥ä½ãä¾å¦ï¼ä½¿ç¨ jdbc è¿æ¥ç®¡çäºå¡çä»£ç ä¸è½å¨å¨å± jta äºå¡ä¸­è¿è¡ãå ä¸ºåºç¨æå¡å¨ä¸åä¸äºå¡ç®¡çï¼å®ä¸è½ç¡®ä¿è·¨å¤ä¸ªèµæºçæ­£ç¡®æ§ï¼å¼å¾æ³¨æçæ¯ï¼å¤§å¤æ°åºç¨ç¨åºä½¿ç¨åä¸ªäºå¡èµæºãï¼ãå¦ä¸ä¸ªç¼ºç¹æ¯æ¬å°äºå¡å¯¹ç¼ç¨æ¨¡åå·æä¾µå¥æ§ã\n\n\n# spring å¯¹äºå¡çæ¯æ\n\nspring éè¿åè°æºå¶å°å®éçäºå¡å®ç°ä»äºå¡æ§çä»£ç ä¸­æ½è±¡åºæ¥ãspring è§£å³äºå¨å±åæ¬å°äºå¡çç¼ºç¹ãå®åè®¸å¼åäººåå¨ä»»ä½ç¯å¢ä¸­ä½¿ç¨ä¸è´çç¼ç¨æ¨¡åãæ¨åªéç¼åä¸æ¬¡ä»£ç ï¼å®å°±å¯ä»¥ä»ä¸åç¯å¢ä¸­çä¸åäºå¡ç®¡çç­ç¥ä¸­åçãspring æä¾äºå¯¹ç¼ç å¼åå£°æå¼äºå¡ç®¡ççæ¯æï¼å¤§å¤æ°æåµä¸é½æ¨èä½¿ç¨å£°æå¼äºå¡ç®¡çã\n\n * ç¼ç å¼äºå¡åè®¸ç¨æ·å¨ä»£ç ä¸­ç²¾ç¡®å®ä¹äºå¡çè¾¹ç\n * å£°æå¼äºå¡ï¼åºäº aopï¼æå©äºç¨æ·å°æä½ä¸äºå¡è§åè¿è¡è§£è¦\n\néè¿ç¨åºåäºå¡ç®¡çï¼å¼åäººåå¯ä»¥ä½¿ç¨ spring äºå¡æ½è±¡ï¼å®å¯ä»¥å¨ä»»ä½åºå±äºå¡åºç¡ä¸è¿è¡ãä½¿ç¨é¦éçå£°ææ§æ¨¡åï¼å¼åäººåéå¸¸ç¼åå¾å°ææ ¹æ¬ä¸ç¼åä¸äºå¡ç®¡çç¸å³çä»£ç ï¼å æ­¤ä¸ä¾èµ spring äºå¡ api æä»»ä½å¶ä»äºå¡ apiã\n\n\n# spring äºå¡çä¼ç¹\n\nspring æ¡æ¶ä¸ºäºå¡ç®¡çæä¾äºä¸è´çæ½è±¡ï¼å·æä»¥ä¸å¥½å¤ï¼\n\n * è·¨ä¸åäºå¡ api çä¸è´ç¼ç¨æ¨¡åï¼ä¾å¦ java transaction api (jta)ãjdbcãhibernate å java persistence api (jpa)ã\n * æ¯æå£°æå¼äºå¡ç®¡çã\n * ç¨äºç¼ç¨äºå¡ç®¡çç api æ¯å¤æäºå¡ apiï¼å¦ jtaï¼æ´ç®åã\n * ä¸ spring çæ°æ®è®¿é®æ½è±¡å®ç¾éæã\n\n\n# æ ¸å¿ api\n\n\n# transactionmanager\n\nspring äºå¡æ½è±¡çå³é®æ¯äºå¡ç­ç¥çæ¦å¿µãäºå¡ç­ç¥ç± transactionmanager å®ä¹ï¼ç¹å«æ¯ç¨äºå½ä»¤å¼äºå¡ç®¡çç org.springframework.transaction.platformtransactionmanager æ¥å£åç¨äºååºå¼äºå¡ç®¡çç org.springframework.transaction.reactivetransactionmanager æ¥å£ã\n\n\n\n# platformtransactionmanager\n\nä»¥ä¸æ¸åæ¾ç¤ºäº platformtransactionmanager api çå®ä¹ï¼\n\npublic interface platformtransactionmanager extends transactionmanager {\n\n    transactionstatus gettransaction(transactiondefinition definition) throws transactionexception;\n\n    void commit(transactionstatus status) throws transactionexception;\n\n    void rollback(transactionstatus status) throws transactionexception;\n}\n\n\nplatformtransactionmanager æ¯ä¸ä¸ª spi æ¥å£ï¼æä»¥ä½¿ç¨èå¯ä»¥ä»¥ç¼ç¨æ¹å¼ä½¿ç¨å®ãå ä¸º platformtransactionmanager æ¯ä¸ä¸ªæ¥å£ï¼æä»¥å¯ä»¥æ ¹æ®éè¦è½»æ¾å° mock æå­æ ¹ãå®ä¸ä¾èµäºæ¥æ¾ç­ç¥ï¼ä¾å¦ jndiã platformtransactionmanager å®ç°çå®ä¹ä¸ spring ioc å®¹å¨ä¸­çä»»ä½å¶ä»å¯¹è±¡ï¼æ beanï¼ä¸æ ·ãä»æ­¤ä¸é¡¹ä¼å¿å°±ä½¿ spring äºå¡æä¸ºæä»·å¼çæ½è±¡ï¼å³ä½¿æ¨ä½¿ç¨ jta ä¹æ¯å¦æ­¤ãä¸ç´æ¥ä½¿ç¨ jta ç¸æ¯ï¼æ¨å¯ä»¥æ´è½»æ¾å°æµè¯äºå¡ä»£ç ã\n\nåæ ·ï¼ä¸ºäºä¸ spring ççå¿µä¿æä¸è´ï¼ä»»ä½ platformtransactionmanager æ¥å£çæ¹æ³å¯ä»¥æåºç transactionexception é½æ¯æªç»æ£æ¥çï¼ä¹å°±æ¯è¯´ï¼å®æ©å±äº java.lang.runtimeexception ç±»ï¼ãäºå¡æ¶ææéå ä¹æ»æ¯è´å½çãæå°æ°æåµä¸ï¼åºç¨ç¨åºå¯ä»¥ä»äºå¡å¤±è´¥ä¸­æ¢å¤ï¼å¼åäººåå¯ä»¥éæ©æè·åå¤ç transactionexceptionãéç¹æ¯å¼åäººåå¹¶éè¢«è¿«è¿æ ·åã\n\ngettransaction(..) æ¹æ³æ ¹æ® transactiondefinition åæ°è¿åä¸ä¸ª transactionstatus å¯¹è±¡ãå¦æå½åè°ç¨å æ ä¸­å­å¨å¹éçäºå¡ï¼åè¿åç transactionstatus å¯è½è¡¨ç¤ºæ°äºå¡æå¯ä»¥è¡¨ç¤ºç°æäºå¡ãåä¸ç§æåµçå«ä¹æ¯ï¼ä¸ java ee äºå¡ä¸ä¸æä¸æ ·ï¼transactionstatus ä¸æ§è¡çº¿ç¨ç¸å³èã\n\nä»ä»¥ä¸å¯ä»¥çåºï¼å·ä½çäºå¡ç®¡çæºå¶å¯¹ spring æ¥è¯´æ¯éæçï¼å®å¹¶ä¸å³å¿é£äºï¼é£äºæ¯å¯¹åºåä¸ªå¹³å°éè¦å³å¿çï¼æä»¥ spring äºå¡ç®¡ççä¸ä¸ªä¼ç¹å°±æ¯ä¸ºä¸åçäºå¡ api æä¾ä¸è´çç¼ç¨æ¨¡åï¼å¦ jtaãjdbcãhibernateãjpaãä¸é¢åå«ä»ç»åä¸ªå¹³å°æ¡æ¶å®ç°äºå¡ç®¡ççæºå¶ã\n\n# jdbc äºå¡\n\nå¦æåºç¨ç¨åºä¸­ç´æ¥ä½¿ç¨ jdbc æ¥è¿è¡æä¹åï¼datasourcetransactionmanager ä¼ä¸ºä½ å¤çäºå¡è¾¹çãä¸ºäºä½¿ç¨ datasourcetransactionmanagerï¼ä½ éè¦ä½¿ç¨å¦ä¸ç xml å°å¶è£éå°åºç¨ç¨åºçä¸ä¸æå®ä¹ä¸­ï¼\n\n<bean id="transactionmanager" class="org.springframework.jdbc.datasource.datasourcetransactionmanager">\n  <property name="datasource" ref="datasource" />\n</bean>\n\n\nå®éä¸ï¼datasourcetransactionmanager æ¯éè¿è°ç¨ java.sql.connection æ¥ç®¡çäºå¡ï¼èåèæ¯éè¿ datasource è·åå°çãéè¿è°ç¨è¿æ¥ç commit() æ¹æ³æ¥æäº¤äºå¡ï¼åæ ·ï¼äºå¡å¤±è´¥åéè¿è°ç¨ rollback() æ¹æ³è¿è¡åæ»ã\n\n# hibernate äºå¡\n\nå¦æåºç¨ç¨åºçæä¹åæ¯éè¿ hibernate å®ç°çï¼é£ä¹ä½ éè¦ä½¿ç¨ hibernatetransactionmanagerãå¯¹äº hibernate3ï¼éè¦å¨ spring ä¸ä¸æå®ä¹ä¸­æ·»å å¦ä¸ç bean å£°æï¼\n\n<bean id="transactionmanager" class="org.springframework.orm.hibernate3.hibernatetransactionmanager">\n  <property name="sessionfactory" ref="sessionfactory" />\n</bean>\n\n\nsessionfactory å±æ§éè¦è£éä¸ä¸ª hibernate ç session å·¥åï¼hibernatetransactionmanager çå®ç°ç»èæ¯å®å°äºå¡ç®¡ççèè´£å§æç» org.hibernate.transaction å¯¹è±¡ï¼èåèæ¯ä» hibernate session ä¸­è·åå°çãå½äºå¡æåå®ææ¶ï¼hibernatetransactionmanager å°ä¼è°ç¨ transaction å¯¹è±¡ç commit() æ¹æ³ï¼åä¹ï¼å°ä¼è°ç¨ rollback() æ¹æ³ã\n\n# java æä¹å api äºå¡ï¼jpaï¼\n\nhibernate å¤å¹´æ¥ä¸ç´æ¯äºå®ä¸ç java æä¹åæ åï¼ä½æ¯ç°å¨ java æä¹å api ä½ä¸ºçæ­£ç java æä¹åæ åè¿å¥å¤§å®¶çè§éãå¦æä½ è®¡åä½¿ç¨ jpa çè¯ï¼é£ä½ éè¦ä½¿ç¨ spring ç jpatransactionmanager æ¥å¤çäºå¡ãä½ éè¦å¨ spring ä¸­è¿æ ·éç½® jpatransactionmanagerï¼\n\n<bean id="transactionmanager" class="org.springframework.orm.jpa.jpatransactionmanager">\n  <property name="sessionfactory" ref="sessionfactory" />\n</bean>\n\n\njpatransactionmanager åªéè¦è£éä¸ä¸ª jpa å®ä½ç®¡çå·¥åï¼javax.persistence.entitymanagerfactory æ¥å£çä»»æå®ç°ï¼ãjpatransactionmanager å°ä¸ç±å·¥åæäº§çç jpa entitymanager åä½æ¥æå»ºäºå¡ã\n\n# java åç api äºå¡ï¼jtaï¼\n\nå¦æä½ æ²¡æä½¿ç¨ä»¥ä¸æè¿°çäºå¡ç®¡çï¼æèæ¯è·¨è¶äºå¤ä¸ªäºå¡ç®¡çæºï¼æ¯å¦ä¸¤ä¸ªæèæ¯å¤ä¸ªä¸åçæ°æ®æºï¼ï¼ä½ å°±éè¦ä½¿ç¨jtatransactionmanagerï¼\n\n<bean id="transactionmanager" class="org.springframework.transaction.jta.jtatransactionmanager">\n  <property name="transactionmanagername" value="java:/transactionmanager" />\n</bean>\n\n\njtatransactionmanager å°äºå¡ç®¡ççè´£ä»»å§æç» javax.transaction.usertransaction å javax.transaction.transactionmanager å¯¹è±¡ï¼å¶ä¸­äºå¡æåå®æéè¿ usertransaction.commit() æ¹æ³æäº¤ï¼äºå¡å¤±è´¥éè¿ usertransaction.rollback() æ¹æ³åæ»ã\n\n# reactivetransactionmanager\n\nspring è¿ä¸ºä½¿ç¨ååºå¼ç±»åæ kotlin åç¨çååºå¼åºç¨ç¨åºæä¾äºäºå¡ç®¡çæ½è±¡ãä»¥ä¸æ¸åæ¾ç¤ºäº org.springframework.transaction.reactivetransactionmanager å®ä¹çäºå¡ç­ç¥ï¼\n\npublic interface reactivetransactionmanager extends transactionmanager {\n\n    mono<reactivetransaction> getreactivetransaction(transactiondefinition definition) throws transactionexception;\n\n    mono<void> commit(reactivetransaction status) throws transactionexception;\n\n    mono<void> rollback(reactivetransaction status) throws transactionexception;\n}\n\n\nååºå¼äºå¡ç®¡çå¨ä¸»è¦æ¯ä¸ä¸ª spiï¼æä»¥ä½¿ç¨èå¯ä»¥ä»¥ç¼ç¨æ¹å¼ä½¿ç¨å®ãå ä¸º reactivetransactionmanager æ¯ä¸ä¸ªæ¥å£ï¼æä»¥å¯ä»¥æ ¹æ®éè¦è½»æ¾å° mock æå­æ ¹ã\n\n\n# transactiondefinition\n\nplatformtransactionmanager éè¿ gettransaction(transactiondefinition definition) æ¹æ³æ¥å¾å°äºå¡ï¼è¿ä¸ªæ¹æ³éé¢çåæ°æ¯ transactiondefinition ç±»ï¼è¿ä¸ªç±»å°±å®ä¹äºä¸äºåºæ¬çäºå¡å±æ§ãäºå¡å±æ§å¯ä»¥çè§£æäºå¡çä¸äºåºæ¬éç½®ï¼æè¿°äºäºå¡ç­ç¥å¦ä½åºç¨å°æ¹æ³ä¸ã\n\ntransactiondefinition æ¥å£åå®¹å¦ä¸ï¼\n\npublic interface transactiondefinition {\n    int getpropagationbehavior(); // è¿åäºå¡çä¼ æ­è¡ä¸º\n    int getisolationlevel(); // è¿åäºå¡çéç¦»çº§å«ï¼äºå¡ç®¡çå¨æ ¹æ®å®æ¥æ§å¶å¦å¤ä¸ä¸ªäºå¡å¯ä»¥çå°æ¬äºå¡åçåªäºæ°æ®\n    int gettimeout();  // è¿åäºå¡å¿é¡»å¨å¤å°ç§åå®æ\n    boolean isreadonly(); // äºå¡æ¯å¦åªè¯»ï¼äºå¡ç®¡çå¨è½å¤æ ¹æ®è¿ä¸ªè¿åå¼è¿è¡ä¼åï¼ç¡®ä¿äºå¡æ¯åªè¯»ç\n}\n\n\næä»¬å¯ä»¥åç° transactiondefinition æ­£å¥½ç¨æ¥å®ä¹äºå¡å±æ§ï¼ä¸é¢è¯¦ç»ä»ç»ä¸ä¸åä¸ªäºå¡å±æ§ã\n\n# ä¼ æ­è¡ä¸º\n\näºå¡çä¼ æ­è¡ä¸ºï¼propagation behaviorï¼æ¯æï¼å½äºå¡æ¹æ³è¢«å¦ä¸ä¸ªäºå¡æ¹æ³è°ç¨æ¶ï¼å¿é¡»æå®äºå¡åºè¯¥å¦ä½ä¼ æ­ãä¾å¦ï¼æ¹æ³å¯è½ç»§ç»­å¨ç°æäºå¡ä¸­è¿è¡ï¼ä¹å¯è½å¼å¯ä¸ä¸ªæ°äºå¡ï¼å¹¶å¨èªå·±çäºå¡ä¸­è¿è¡ãspring å®ä¹äºä¸ç§ä¼ æ­è¡ä¸ºï¼\n\nä¼ æ­è¡ä¸º                        å«ä¹\npropagation_required        è¡¨ç¤ºå½åæ¹æ³å¿é¡»è¿è¡å¨äºå¡ä¸­ãå¦æå½åäºå¡å­å¨ï¼æ¹æ³å°ä¼å¨è¯¥äºå¡ä¸­è¿è¡ãå¦åï¼ä¼å¯å¨ä¸ä¸ªæ°çäºå¡\npropagation_supports        è¡¨ç¤ºå½åæ¹æ³ä¸éè¦äºå¡ä¸ä¸æï¼ä½æ¯å¦æå­å¨å½åäºå¡çè¯ï¼é£ä¹è¯¥æ¹æ³ä¼å¨è¿ä¸ªäºå¡ä¸­è¿è¡\npropagation_mandatory       è¡¨ç¤ºè¯¥æ¹æ³å¿é¡»å¨äºå¡ä¸­è¿è¡ï¼å¦æå½åäºå¡ä¸å­å¨ï¼åä¼æåºä¸ä¸ªå¼å¸¸\npropagation_required_new    è¡¨ç¤ºå½åæ¹æ³å¿é¡»è¿è¡å¨å®èªå·±çäºå¡ä¸­ãä¸ä¸ªæ°çäºå¡å°è¢«å¯å¨ãå¦æå­å¨å½åäºå¡ï¼å¨è¯¥æ¹æ³æ§è¡æé´ï¼å½åäºå¡ä¼è¢«æèµ·ãå¦æä½¿ç¨\n                            jtatransactionmanager çè¯ï¼åéè¦è®¿é® transactionmanager\npropagation_not_supported   è¡¨ç¤ºè¯¥æ¹æ³ä¸åºè¯¥è¿è¡å¨äºå¡ä¸­ãå¦æå­å¨å½åäºå¡ï¼å¨è¯¥æ¹æ³è¿è¡æé´ï¼å½åäºå¡å°è¢«æèµ·ãå¦æä½¿ç¨\n                            jtatransactionmanager çè¯ï¼åéè¦è®¿é® transactionmanager\npropagation_never           è¡¨ç¤ºå½åæ¹æ³ä¸åºè¯¥è¿è¡å¨äºå¡ä¸ä¸æä¸­ãå¦æå½åæ­£æä¸ä¸ªäºå¡å¨è¿è¡ï¼åä¼æåºå¼å¸¸\npropagation_nested          è¡¨ç¤ºå¦æå½åå·²ç»å­å¨ä¸ä¸ªäºå¡ï¼é£ä¹è¯¥æ¹æ³å°ä¼å¨åµå¥äºå¡ä¸­è¿è¡ãåµå¥çäºå¡å¯ä»¥ç¬ç«äºå½åäºå¡è¿è¡åç¬å°æäº¤æåæ»ãå¦æå½åäºå¡ä¸å­å¨ï¼é£ä¹å¶è¡ä¸ºä¸\n                            propagation_required\n                            ä¸æ ·ãæ³¨æåååå¯¹è¿ç§ä¼ æ­è¡ä¸ºçæ¯ææ¯ææå·®å¼çãå¯ä»¥åèèµæºç®¡çå¨çææ¡£æ¥ç¡®è®¤å®ä»¬æ¯å¦æ¯æåµå¥äºå¡\n\næ³¨ï¼ä»¥ä¸å·ä½è®²è§£ä¼ æ­è¡ä¸ºçåå®¹åèèª spring äºå¡æºå¶è¯¦è§£\n\n 1. propagation_required å¦æå­å¨ä¸ä¸ªäºå¡ï¼åæ¯æå½åäºå¡ãå¦ææ²¡æäºå¡åå¼å¯ä¸ä¸ªæ°çäºå¡ã\n\n// äºå¡å±æ§ propagation_required\nmethoda {\n    â¦â¦\n    methodb();\n    â¦â¦\n}\n\n\n// äºå¡å±æ§ propagation_required\nmethodb {\n   â¦â¦\n}\n\n\nä½¿ç¨ spring å£°æå¼äºå¡ï¼spring ä½¿ç¨ aop æ¥æ¯æå£°æå¼äºå¡ï¼ä¼æ ¹æ®äºå¡å±æ§ï¼èªå¨å¨æ¹æ³è°ç¨ä¹åå³å®æ¯å¦å¼å¯ä¸ä¸ªäºå¡ï¼å¹¶å¨æ¹æ³æ§è¡ä¹åå³å®äºå¡æäº¤æåæ»äºå¡ã\n\nåç¬è°ç¨ methodb æ¹æ³ï¼\n\nmain {\n    metodb();\n}\n\n\nç¸å½äº\n\nmain {\n    connection con=null;\n    try{\n        con = getconnection();\n        con.setautocommit(false);\n\n        //æ¹æ³è°ç¨\n        methodb();\n\n        //æäº¤äºå¡\n        con.commit();\n    } catch(runtimeexception ex) {\n        //åæ»äºå¡\n        con.rollback();\n    } finally {\n        //éæ¾èµæº\n        closecon();\n    }\n}\n\n\nspring ä¿è¯å¨ methodb æ¹æ³ä¸­ææçè°ç¨é½è·å¾å°ä¸ä¸ªç¸åçè¿æ¥ãå¨è°ç¨ methodb æ¶ï¼æ²¡æä¸ä¸ªå­å¨çäºå¡ï¼æä»¥è·å¾ä¸ä¸ªæ°çè¿æ¥ï¼å¼å¯äºä¸ä¸ªæ°çäºå¡ã åç¬è°ç¨ methoda æ¶ï¼å¨ methoda ååä¼è°ç¨ methodb.\n\næ§è¡ææç¸å½äºï¼\n\nmain{\n    connection con = null;\n    try{\n        con = getconnection();\n        methoda();\n        con.commit();\n    } catch(runtimeexception ex) {\n        con.rollback();\n    } finally {\n        closecon();\n    }\n}\n\n\nè°ç¨ methoda æ¶ï¼ç¯å¢ä¸­æ²¡æäºå¡ï¼æä»¥å¼å¯ä¸ä¸ªæ°çäºå¡.å½å¨ methoda ä¸­è°ç¨ methodb æ¶ï¼ç¯å¢ä¸­å·²ç»æäºä¸ä¸ªäºå¡ï¼æä»¥ methodb å°±å å¥å½åäºå¡ã\n\n 2. propagation_supports å¦æå­å¨ä¸ä¸ªäºå¡ï¼æ¯æå½åäºå¡ãå¦ææ²¡æäºå¡ï¼åéäºå¡çæ§è¡ãä½æ¯å¯¹äºäºå¡åæ­¥çäºå¡ç®¡çå¨ï¼propagation_supports ä¸ä¸ä½¿ç¨äºå¡æå°è®¸ä¸åã\n\n//äºå¡å±æ§ propagation_required\nmethoda(){\n  methodb();\n}\n\n//äºå¡å±æ§ propagation_supports\nmethodb(){\n  â¦â¦\n}\n\n\nåçº¯çè°ç¨ methodb æ¶ï¼methodb æ¹æ³æ¯éäºå¡çæ§è¡çãå½è°ç¨ methda æ¶,methodb åå å¥äº methoda çäºå¡ä¸­,äºå¡å°æ§è¡ã\n\n 3. propagation_mandatory å¦æå·²ç»å­å¨ä¸ä¸ªäºå¡ï¼æ¯æå½åäºå¡ãå¦ææ²¡æä¸ä¸ªæ´»å¨çäºå¡ï¼åæåºå¼å¸¸ã\n\n//äºå¡å±æ§ propagation_required\nmethoda(){\n    methodb();\n}\n\n//äºå¡å±æ§ propagation_mandatory\n    methodb(){\n    â¦â¦\n}\n\n\nå½åç¬è°ç¨ methodb æ¶ï¼å ä¸ºå½åæ²¡æä¸ä¸ªæ´»å¨çäºå¡ï¼åä¼æåºå¼å¸¸ throw new illegaltransactionstateexception(âtransaction propagation âmandatoryâ but no existing transaction foundâ);å½è°ç¨ methoda æ¶ï¼methodb åå å¥å° methoda çäºå¡ä¸­ï¼äºå¡å°æ§è¡ã\n\n 4. propagation_requires_new æ»æ¯å¼å¯ä¸ä¸ªæ°çäºå¡ãå¦æä¸ä¸ªäºå¡å·²ç»å­å¨ï¼åå°è¿ä¸ªå­å¨çäºå¡æèµ·ã\n\n//äºå¡å±æ§ propagation_required\nmethoda(){\n    dosomethinga();\n    methodb();\n    dosomethingb();\n}\n\n//äºå¡å±æ§ propagation_requires_new\nmethodb(){\n    â¦â¦\n}\n\n\nè°ç¨ a æ¹æ³ï¼\n\nmain(){\n    methoda();\n}\n\n\nç¸å½äº\n\nmain(){\n    transactionmanager tm = null;\n    try{\n        //è·å¾ä¸ä¸ªjtaäºå¡ç®¡çå¨\n        tm = gettransactionmanager();\n        tm.begin();//å¼å¯ä¸ä¸ªæ°çäºå¡\n        transaction ts1 = tm.gettransaction();\n        dosomething();\n        tm.suspend();//æèµ·å½åäºå¡\n        try{\n            tm.begin();//éæ°å¼å¯ç¬¬äºä¸ªäºå¡\n            transaction ts2 = tm.gettransaction();\n            methodb();\n            ts2.commit();//æäº¤ç¬¬äºä¸ªäºå¡\n        } catch(runtimeexception ex) {\n            ts2.rollback();//åæ»ç¬¬äºä¸ªäºå¡\n        } finally {\n            //éæ¾èµæº\n        }\n        //methodbæ§è¡å®åï¼æ¢å¤ç¬¬ä¸ä¸ªäºå¡\n        tm.resume(ts1);\n        dosomethingb();\n        ts1.commit();//æäº¤ç¬¬ä¸ä¸ªäºå¡\n    } catch(runtimeexception ex) {\n        ts1.rollback();//åæ»ç¬¬ä¸ä¸ªäºå¡\n    } finally {\n        //éæ¾èµæº\n    }\n}\n\n\nå¨è¿éï¼ææ ts1 ç§°ä¸ºå¤å±äºå¡ï¼ts2 ç§°ä¸ºåå±äºå¡ãä»ä¸é¢çä»£ç å¯ä»¥çåºï¼ts2 ä¸ ts1 æ¯ä¸¤ä¸ªç¬ç«çäºå¡ï¼äºä¸ç¸å¹²ãts2 æ¯å¦æåå¹¶ä¸ä¾èµäº ts1ãå¦æ methoda æ¹æ³å¨è°ç¨ methodb æ¹æ³åç dosomethingb æ¹æ³å¤±è´¥äºï¼è methodb æ¹æ³æåçç»æä¾ç¶è¢«æäº¤ãèé¤äº methodb ä¹å¤çå¶å®ä»£ç å¯¼è´çç»æå´è¢«åæ»äºãä½¿ç¨ propagation_requires_new,éè¦ä½¿ç¨ jtatransactionmanager ä½ä¸ºäºå¡ç®¡çå¨ã\n\n 5. propagation_not_supported æ»æ¯éäºå¡å°æ§è¡ï¼å¹¶æèµ·ä»»ä½å­å¨çäºå¡ãä½¿ç¨ propagation_not_supported,ä¹éè¦ä½¿ç¨ jtatransactionmanager ä½ä¸ºäºå¡ç®¡çå¨ãï¼ä»£ç ç¤ºä¾åä¸ï¼å¯åçæ¨åºï¼\n 6. propagation_never æ»æ¯éäºå¡å°æ§è¡ï¼å¦æå­å¨ä¸ä¸ªæ´»å¨äºå¡ï¼åæåºå¼å¸¸ã\n 7. propagation_nested å¦æä¸ä¸ªæ´»å¨çäºå¡å­å¨ï¼åè¿è¡å¨ä¸ä¸ªåµå¥çäºå¡ä¸­. å¦ææ²¡ææ´»å¨äºå¡, åæ transactiondefinition.propagation_required å±æ§æ§è¡ãè¿æ¯ä¸ä¸ªåµå¥äºå¡,ä½¿ç¨ jdbc 3.0 é©±å¨æ¶,ä»ä»æ¯æ datasourcetransactionmanager ä½ä¸ºäºå¡ç®¡çå¨ãéè¦ jdbc é©±å¨ç java.sql.savepoint ç±»ãæä¸äº jta çäºå¡ç®¡çå¨å®ç°å¯è½ä¹æä¾äºåæ ·çåè½ãä½¿ç¨ propagation_nestedï¼è¿éè¦æ platformtransactionmanager ç nestedtransactionallowed å±æ§è®¾ä¸º true;è nestedtransactionallowed å±æ§å¼é»è®¤ä¸º falseã\n\n//äºå¡å±æ§ propagation_required\nmethoda(){\n    dosomethinga();\n    methodb();\n    dosomethingb();\n}\n\n//äºå¡å±æ§ propagation_nested\nmethodb(){\n    â¦â¦\n}\n\n\nå¦æåç¬è°ç¨ methodb æ¹æ³ï¼åæ required å±æ§æ§è¡ãå¦æè°ç¨ methoda æ¹æ³ï¼ç¸å½äºä¸é¢çææï¼\n\nmain(){\n    connection con = null;\n    savepoint savepoint = null;\n    try{\n        con = getconnection();\n        con.setautocommit(false);\n        dosomethinga();\n        savepoint = con2.setsavepoint();\n        try{\n            methodb();\n        } catch(runtimeexception ex) {\n            con.rollback(savepoint);\n        } finally {\n            //éæ¾èµæº\n        }\n        dosomethingb();\n        con.commit();\n    } catch(runtimeexception ex) {\n        con.rollback();\n    } finally {\n        //éæ¾èµæº\n    }\n}\n\n\nå½ methodb æ¹æ³è°ç¨ä¹åï¼è°ç¨ setsavepoint æ¹æ³ï¼ä¿å­å½åçç¶æå° savepointãå¦æ methodb æ¹æ³è°ç¨å¤±è´¥ï¼åæ¢å¤å°ä¹åä¿å­çç¶æãä½æ¯éè¦æ³¨æçæ¯ï¼è¿æ¶çäºå¡å¹¶æ²¡æè¿è¡æäº¤ï¼å¦æåç»­çä»£ç (dosomethingb()æ¹æ³)è°ç¨å¤±è´¥ï¼ååæ»åæ¬ methodb æ¹æ³çæææä½ã\n\nåµå¥äºå¡ä¸ä¸ªéå¸¸éè¦çæ¦å¿µå°±æ¯åå±äºå¡ä¾èµäºå¤å±äºå¡ãå¤å±äºå¡å¤±è´¥æ¶ï¼ä¼åæ»åå±äºå¡æåçå¨ä½ãèåå±äºå¡æä½å¤±è´¥å¹¶ä¸ä¼å¼èµ·å¤å±äºå¡çåæ»ã\n\npropagation_nested ä¸ propagation_requires_new çåºå«:å®ä»¬éå¸¸ç±»ä¼¼,é½åä¸ä¸ªåµå¥äºå¡ï¼å¦æä¸å­å¨ä¸ä¸ªæ´»å¨çäºå¡ï¼é½ä¼å¼å¯ä¸ä¸ªæ°çäºå¡ãä½¿ç¨ propagation_requires_new æ¶ï¼åå±äºå¡ä¸å¤å±äºå¡å°±åä¸¤ä¸ªç¬ç«çäºå¡ä¸æ ·ï¼ä¸æ¦åå±äºå¡è¿è¡äºæäº¤åï¼å¤å±äºå¡ä¸è½å¯¹å¶è¿è¡åæ»ãä¸¤ä¸ªäºå¡äºä¸å½±åãä¸¤ä¸ªäºå¡ä¸æ¯ä¸ä¸ªçæ­£çåµå¥äºå¡ãåæ¶å®éè¦ jta äºå¡ç®¡çå¨çæ¯æã\n\nä½¿ç¨ propagation_nested æ¶ï¼å¤å±äºå¡çåæ»å¯ä»¥å¼èµ·åå±äºå¡çåæ»ãèåå±äºå¡çå¼å¸¸å¹¶ä¸ä¼å¯¼è´å¤å±äºå¡çåæ»ï¼å®æ¯ä¸ä¸ªçæ­£çåµå¥äºå¡ãdatasourcetransactionmanager ä½¿ç¨ savepoint æ¯æ propagation_nested æ¶ï¼éè¦ jdbc 3.0 ä»¥ä¸é©±å¨å 1.4 ä»¥ä¸ç jdk çæ¬æ¯æãå¶å®ç jta trasactionmanager å®ç°å¯è½æä¸åçæ¯ææ¹å¼ã\n\npropagation_requires_new å¯å¨ä¸ä¸ªæ°ç, ä¸ä¾èµäºç¯å¢ç âåé¨â äºå¡. è¿ä¸ªäºå¡å°è¢«å®å¨ commited æ rolled back èä¸ä¾èµäºå¤é¨äºå¡, å®æ¥æèªå·±çéç¦»èå´, èªå·±çé, ç­ç­. å½åé¨äºå¡å¼å§æ§è¡æ¶, å¤é¨äºå¡å°è¢«æèµ·, åå¡äºå¡ç»ææ¶, å¤é¨äºå¡å°ç»§ç»­æ§è¡ã\n\nå¦ä¸æ¹é¢, propagation_nested å¼å§ä¸ä¸ª âåµå¥çâ äºå¡, å®æ¯å·²ç»å­å¨äºå¡çä¸ä¸ªçæ­£çå­äºå¡. æ½å¥äºå¡å¼å§æ§è¡æ¶, å®å°åå¾ä¸ä¸ª savepoint. å¦æè¿ä¸ªåµå¥äºå¡å¤±è´¥, æä»¬å°åæ»å°æ­¤ savepoint. æ½å¥äºå¡æ¯å¤é¨äºå¡çä¸é¨å, åªæå¤é¨äºå¡ç»æåå®æä¼è¢«æäº¤ã\n\nç±æ­¤å¯è§, propagation_requires_new å propagation_nested çæå¤§åºå«å¨äº, propagation_requires_new å®å¨æ¯ä¸ä¸ªæ°çäºå¡, è propagation_nested åæ¯å¤é¨äºå¡çå­äºå¡, å¦æå¤é¨äºå¡ commit, åµå¥äºå¡ä¹ä¼è¢« commit, è¿ä¸ªè§ååæ ·éç¨äº roll back.\n\npropagation_required åºè¯¥æ¯æä»¬é¦åçäºå¡ä¼ æ­è¡ä¸ºãå®è½å¤æ»¡è¶³æä»¬å¤§å¤æ°çäºå¡éæ±ã\n\n# éç¦»çº§å«\n\näºå¡çç¬¬äºä¸ªç»´åº¦å°±æ¯éç¦»çº§å«ï¼isolation levelï¼ãéç¦»çº§å«å®ä¹äºä¸ä¸ªäºå¡å¯è½åå¶ä»å¹¶åäºå¡å½±åçç¨åº¦ã\n\n 1. å¹¶åäºå¡å¼èµ·çé®é¢\n\nå¨å¸åçåºç¨ç¨åºä¸­ï¼å¤ä¸ªäºå¡å¹¶åè¿è¡ï¼ç»å¸¸ä¼æä½ç¸åçæ°æ®æ¥å®æåèªçä»»å¡ãå¹¶åè½ç¶æ¯å¿é¡»çï¼ä½å¯è½ä¼å¯¼è´ä¸ä¸çé®é¢ã\n\n * èè¯»ï¼dirty readsï¼ââèè¯»åçå¨ä¸ä¸ªäºå¡è¯»åäºå¦ä¸ä¸ªäºå¡æ¹åä½å°æªæäº¤çæ°æ®æ¶ãå¦ææ¹åå¨ç¨åè¢«åæ»äºï¼é£ä¹ç¬¬ä¸ä¸ªäºå¡è·åçæ°æ®å°±æ¯æ æçã\n * ä¸å¯éå¤è¯»ï¼nonrepeatable readï¼ââä¸å¯éå¤è¯»åçå¨ä¸ä¸ªäºå¡æ§è¡ç¸åçæ¥è¯¢ä¸¤æ¬¡æä¸¤æ¬¡ä»¥ä¸ï¼ä½æ¯æ¯æ¬¡é½å¾å°ä¸åçæ°æ®æ¶ãè¿éå¸¸æ¯å ä¸ºå¦ä¸ä¸ªå¹¶åäºå¡å¨ä¸¤æ¬¡æ¥è¯¢æé´è¿è¡äºæ´æ°ã\n * å¹»è¯»ï¼phantom readï¼ââå¹»è¯»ä¸ä¸å¯éå¤è¯»ç±»ä¼¼ãå®åçå¨ä¸ä¸ªäºå¡ï¼t1ï¼è¯»åäºå è¡æ°æ®ï¼æ¥çå¦ä¸ä¸ªå¹¶åäºå¡ï¼t2ï¼æå¥äºä¸äºæ°æ®æ¶ãå¨éåçæ¥è¯¢ä¸­ï¼ç¬¬ä¸ä¸ªäºå¡ï¼t1ï¼å°±ä¼åç°å¤äºä¸äºåæ¬ä¸å­å¨çè®°å½ã\n\nä¸å¯éå¤è¯»ä¸å¹»è¯»çåºå«\n\nä¸å¯éå¤è¯»çéç¹æ¯ä¿®æ¹: åæ ·çæ¡ä»¶, ä½ è¯»åè¿çæ°æ®, åæ¬¡è¯»ååºæ¥åç°å¼ä¸ä¸æ ·äº ä¾å¦ï¼å¨äºå¡ 1 ä¸­ï¼mary è¯»åäºèªå·±çå·¥èµä¸º 1000,æä½å¹¶æ²¡æå®æ\n\n    con1 = getconnection();\n    select salary from employee empid ="mary";\n\n\nå¨äºå¡ 2 ä¸­ï¼è¿æ¶è´¢å¡äººåä¿®æ¹äº mary çå·¥èµä¸º 2000,å¹¶æäº¤äºäºå¡.\n\n    con2 = getconnection();\n    update employee set salary = 2000;\n    con2.commit();\n\n\nå¨äºå¡ 1 ä¸­ï¼mary åæ¬¡è¯»åèªå·±çå·¥èµæ¶ï¼å·¥èµåä¸ºäº 2000\n\n    //con1\n    select salary from employee empid ="mary";\n\n\nå¨ä¸ä¸ªäºå¡ä¸­ååä¸¤æ¬¡è¯»åçç»æå¹¶ä¸ä¸è´ï¼å¯¼è´äºä¸å¯éå¤è¯»ã\n\nå¹»è¯»çéç¹å¨äºæ°å¢æèå é¤ï¼ åæ ·çæ¡ä»¶, ç¬¬ 1 æ¬¡åç¬¬ 2 æ¬¡è¯»åºæ¥çè®°å½æ°ä¸ä¸æ · ä¾å¦ï¼ç®åå·¥èµä¸º 1000 çåå·¥æ 10 äººãäºå¡ 1,è¯»åææå·¥èµä¸º 1000 çåå·¥ã\n\n    con1 = getconnection();\n    select * from employee where salary =1000;\n\n\nå±è¯»å 10 æ¡è®°å½\n\nè¿æ¶å¦ä¸ä¸ªäºå¡å employee è¡¨æå¥äºä¸æ¡åå·¥è®°å½ï¼å·¥èµä¹ä¸º 1000\n\n    con2 = getconnection();\n    insert into employee(empid,salary) values("lili",1000);\n    con2.commit();\n\n\näºå¡ 1 åæ¬¡è¯»åææå·¥èµä¸º 1000 çåå·¥\n\n    //con1\n    select * from employee where salary =1000;\n\n\nå±è¯»åå°äº 11 æ¡è®°å½ï¼è¿å°±äº§çäºå¹»åè¯»ã\n\nä»æ»çç»ææ¥ç, ä¼¼ä¹ä¸å¯éå¤è¯»åå¹»è¯»é½è¡¨ç°ä¸ºä¸¤æ¬¡è¯»åçç»æä¸ä¸è´ãä½å¦æä½ ä»æ§å¶çè§åº¦æ¥ç, ä¸¤èçåºå«å°±æ¯è¾å¤§ã å¯¹äºåè, åªéè¦éä½æ»¡è¶³æ¡ä»¶çè®°å½ã å¯¹äºåè, è¦éä½æ»¡è¶³æ¡ä»¶åå¶ç¸è¿çè®°å½ã\n\n 2. éç¦»çº§å«\n\néç¦»çº§å«                         å«ä¹\nisolation_default            ä½¿ç¨åç«¯æ°æ®åºé»è®¤çéç¦»çº§å«\nisolation_read_uncommitted   æä½çéç¦»çº§å«ï¼åè®¸è¯»åå°æªæäº¤çæ°æ®åæ´ï¼å¯è½ä¼å¯¼è´èè¯»ãå¹»è¯»æä¸å¯éå¤è¯»\nisolation_read_committed     åè®¸è¯»åå¹¶åäºå¡å·²ç»æäº¤çæ°æ®ï¼å¯ä»¥é»æ­¢èè¯»ï¼ä½æ¯å¹»è¯»æä¸å¯éå¤è¯»ä»æå¯è½åç\nisolation_repeatable_read    å¯¹åä¸å­æ®µçå¤æ¬¡è¯»åç»æé½æ¯ä¸è´çï¼é¤éæ°æ®æ¯è¢«æ¬èº«äºå¡èªå·±æä¿®æ¹ï¼å¯ä»¥é»æ­¢èè¯»åä¸å¯éå¤è¯»ï¼ä½å¹»è¯»ä»æå¯è½åç\nisolation_serializable       æé«çéç¦»çº§å«ï¼å®å¨æä» acid\n                             çéç¦»çº§å«ï¼ç¡®ä¿é»æ­¢èè¯»ãä¸å¯éå¤è¯»ä»¥åå¹»è¯»ï¼ä¹æ¯ææ¢çäºå¡éç¦»çº§å«ï¼å ä¸ºå®éå¸¸æ¯éè¿å®å¨éå®äºå¡ç¸å³çæ°æ®åºè¡¨æ¥å®ç°ç\n\n# åªè¯»\n\näºå¡çç¬¬ä¸ä¸ªç¹æ§æ¯å®æ¯å¦ä¸ºåªè¯»äºå¡ãå¦æäºå¡åªå¯¹åç«¯çæ°æ®åºè¿è¡è¯¥æä½ï¼æ°æ®åºå¯ä»¥å©ç¨äºå¡çåªè¯»ç¹æ§æ¥è¿è¡ä¸äºç¹å®çä¼åãéè¿å°äºå¡è®¾ç½®ä¸ºåªè¯»ï¼ä½ å°±å¯ä»¥ç»æ°æ®åºä¸ä¸ªæºä¼ï¼è®©å®åºç¨å®è®¤ä¸ºåéçä¼åæªæ½ã\n\n# äºå¡è¶æ¶\n\nä¸ºäºä½¿åºç¨ç¨åºå¾å¥½å°è¿è¡ï¼äºå¡ä¸è½è¿è¡å¤ªé¿çæ¶é´ãå ä¸ºäºå¡å¯è½æ¶åå¯¹åç«¯æ°æ®åºçéå®ï¼æä»¥é¿æ¶é´çäºå¡ä¼ä¸å¿è¦çå ç¨æ°æ®åºèµæºãäºå¡è¶æ¶å°±æ¯äºå¡çä¸ä¸ªå®æ¶å¨ï¼å¨ç¹å®æ¶é´åäºå¡å¦ææ²¡ææ§è¡å®æ¯ï¼é£ä¹å°±ä¼èªå¨åæ»ï¼èä¸æ¯ä¸ç´ç­å¾å¶ç»æã\n\n# åæ»è§å\n\näºå¡äºè¾¹å½¢çæåä¸ä¸ªæ¹é¢æ¯ä¸ç»è§åï¼è¿äºè§åå®ä¹äºåªäºå¼å¸¸ä¼å¯¼è´äºå¡åæ»èåªäºä¸ä¼ãé»è®¤æåµä¸ï¼äºå¡åªæéå°è¿è¡æå¼å¸¸æ¶æä¼åæ»ï¼èå¨éå°æ£æ¥åå¼å¸¸æ¶ä¸ä¼åæ»ï¼è¿ä¸è¡ä¸ºä¸ ejb çåæ»è¡ä¸ºæ¯ä¸è´çï¼ ä½æ¯ä½ å¯ä»¥å£°æäºå¡å¨éå°ç¹å®çæ£æ¥åå¼å¸¸æ¶åéå°è¿è¡æå¼å¸¸é£æ ·åæ»ãåæ ·ï¼ä½ è¿å¯ä»¥å£°æäºå¡éå°ç¹å®çå¼å¸¸ä¸åæ»ï¼å³ä½¿è¿äºå¼å¸¸æ¯è¿è¡æå¼å¸¸ã\n\n\n# transactionstatus\n\ntransactionstatus æ¥å£ä¸ºäºå¡ä»£ç æä¾äºä¸ç§ç®åçæ¹å¼æ¥æ§å¶äºå¡æ§è¡åæ¥è¯¢äºå¡ç¶æãè¿äºæ¦å¿µåºè¯¥å¾çæï¼å ä¸ºå®ä»¬å¯¹ææäºå¡ api é½æ¯éç¨çãä»¥ä¸æ¸åæ¾ç¤ºäº transactionstatus æ¥å£ï¼\n\npublic interface transactionstatus extends transactionexecution, savepointmanager, flushable {\n\n    @override\n    boolean isnewtransaction();\n\n    boolean hassavepoint();\n\n    @override\n    void setrollbackonly();\n\n    @override\n    boolean isrollbackonly();\n\n    void flush();\n\n    @override\n    boolean iscompleted();\n}\n\n\nå¯ä»¥åç°è¿ä¸ªæ¥å£æè¿°çæ¯ä¸äºå¤çäºå¡æä¾ç®åçæ§å¶äºå¡æ§è¡åæ¥è¯¢äºå¡ç¶æçæ¹æ³ï¼å¨åæ»ææäº¤çæ¶åéè¦åºç¨å¯¹åºçäºå¡ç¶æã\n\n\n# transactiontemplate\n\nspring æä¾äºå¯¹ç¼ç¨å¼äºå¡åå£°æå¼äºå¡çæ¯æãç¼ç¨å¼äºå¡åè®¸ç¨æ·å¨ä»£ç ä¸­ç²¾ç¡®å®ä¹äºå¡çè¾¹çï¼èå£°æå¼äºå¡ï¼åºäº aopï¼æå©äºç¨æ·å°æä½ä¸äºå¡è§åè¿è¡è§£è¦ãtransactiontemplate å°±æ¯ç¨äºæ¯æç¼ç¨å¼äºå¡çæ ¸å¿ apiã\n\néç¨ transactiontemplate åéç¨å¶ä» spring æ¨¡æ¿ï¼å¦ jdbctempalte å hibernatetemplate æ¯ä¸æ ·çæ¹æ³ãå®ä½¿ç¨åè°æ¹æ³ï¼æåºç¨ç¨åºä»å¤çåå¾åéæ¾èµæºä¸­è§£è±åºæ¥ãå¦åå¶ä»æ¨¡æ¿ï¼transactiontemplate æ¯çº¿ç¨å®å¨çãä»£ç çæ®µï¼\n\n    transactiontemplate tt = new transactiontemplate(); // æ°å»ºä¸ä¸ªtransactiontemplate\n    object result = tt.execute(\n        new transactioncallback(){\n            public object dotransaction(transactionstatus status){\n                updateoperation();\n                return resultofupdateoperation();\n            }\n    }); // æ§è¡executeæ¹æ³è¿è¡äºå¡ç®¡ç\n\n\nä½¿ç¨ transactioncallback()å¯ä»¥è¿åä¸ä¸ªå¼ãå¦æä½¿ç¨ transactioncallbackwithoutresult åæ²¡æè¿åå¼ã\n\n\n# å£°æå¼äºå¡ç®¡ç\n\n> å¤§å¤æ° spring ç¨æ·éæ©å£°æå¼äºå¡ç®¡çãæ­¤éé¡¹å¯¹åºç¨ç¨åºä»£ç çå½±åæå°ï¼å æ­¤æç¬¦åéä¾µå¥å¼è½»éçº§å®¹å¨ççæ³ã\n\nspring æ¡æ¶çå£°æå¼äºå¡ç®¡çæ¯éè¿ spring aop å®ç°çãç¶èï¼ç±äºäºå¡æ¹é¢ä»£ç é spring åè¡çä¸èµ·æä¾å¹¶ä¸å¯ä»¥ä»¥æ ·æ¿æ¹å¼ä½¿ç¨ï¼å æ­¤éå¸¸ä¸å¿çè§£ aop æ¦å¿µå³å¯ææå°ä½¿ç¨æ­¤ä»£ç ã\n\nspring æ¡æ¶çå£°æå¼äºå¡ç®¡çç±»ä¼¼äº ejb cmtï¼å ä¸ºæ¨å¯ä»¥æå®äºå¡è¡ä¸ºï¼æç¼ºå°å®ï¼å°åä¸ªæ¹æ³çº§å«ãå¦æå¿è¦ï¼æ¨å¯ä»¥å¨äºå¡ä¸ä¸æä¸­è¿è¡ setrollbackonly() è°ç¨ãä¸¤ç§ç±»åçäºå¡ç®¡çä¹é´çåºå«æ¯ï¼\n\n * ä¸ç»å®å° jta ç ejb cmt ä¸åï¼spring æ¡æ¶çå£°æå¼äºå¡ç®¡çéç¨äºä»»ä½ç¯å¢ãéè¿è°æ´éç½®æä»¶ï¼å®å¯ä»¥ä½¿ç¨ jdbcãjpa æ hibernate å¤ç jta äºå¡ææ¬å°äºå¡ã\n * æ¨å¯ä»¥å° spring å£°æå¼äºå¡ç®¡çåºç¨äºä»»ä½ç±»ï¼èä¸ä»ä»æ¯è¯¸å¦ ejb ä¹ç±»çç¹æ®ç±»ã\n * spring æä¾å£°ææ§åæ»è§åï¼è¿æ¯ä¸ä¸ªæ²¡æ ejb ç­æåè½çç¹æ§ãæä¾äºå¯¹åæ»è§åçç¼ç¨åå£°ææ§æ¯æã\n * spring åè®¸æ¨ä½¿ç¨ aop èªå®ä¹äºå¡è¡ä¸ºãä¾å¦ï¼æ¨å¯ä»¥å¨äºå¡åæ»çæåµä¸æå¥èªå®ä¹è¡ä¸ºãæ¨è¿å¯ä»¥æ·»å ä»»æ advice ä»¥åäºå¡æ§ adviceãä½¿ç¨ ejb cmtï¼æ¨æ æ³å½±åå®¹å¨çäºå¡ç®¡çï¼é¤éä½¿ç¨ setrollbackonly()ã\n * spring ä¸åé«ç«¯åºç¨æå¡å¨é£æ ·æ¯æè·¨è¿ç¨è°ç¨ä¼ æ­äºå¡ä¸ä¸æãå¦ææ¨éè¦æ­¤åè½ï¼æä»¬å»ºè®®æ¨ä½¿ç¨ ejbãä½æ¯ï¼å¨ä½¿ç¨è¿ç§ç¹æ§ä¹åè¦ä»ç»èèï¼å ä¸ºéå¸¸æåµä¸ï¼ä¸å¸æäºå¡è·¨è¶è¿ç¨è°ç¨ã\n\nåæ»è§åçæ¦å¿µå¾éè¦ãå®ä»¬è®©æ¨æå®åªäºå¼å¸¸ï¼å throwableï¼åºè¯¥å¯¼è´èªå¨åæ»ãæ¨å¯ä»¥å¨éç½®ä¸­ä»¥å£°ææ¹å¼æå®å®ï¼èä¸æ¯å¨ java ä»£ç ä¸­ãå æ­¤ï¼å°½ç®¡æ¨ä»ç¶å¯ä»¥å¨ transactionstatus å¯¹è±¡ä¸è°ç¨ setrollbackonly() æ¥åæ»å½åäºå¡ï¼ä½éå¸¸æ¨å¯ä»¥æå® myapplicationexception å¿é¡»å§ç»å¯¼è´åæ»çè§åãæ­¤éé¡¹çæ¾çä¼å¿æ¯ä¸å¡å¯¹è±¡ä¸ä¾èµäºäºå¡åºç¡æ¶æãä¾å¦ï¼å®ä»¬éå¸¸ä¸éè¦å¯¼å¥ spring äºå¡ api æå¶ä» spring apiã\n\nå°½ç®¡ ejb å®¹å¨é»è®¤è¡ä¸ºä¼å¨ç³»ç»å¼å¸¸ï¼éå¸¸æ¯è¿è¡æ¶å¼å¸¸ï¼ä¸èªå¨åæ»äºå¡ï¼ä½ ejb cmt ä¸ä¼å¨åºç¨ç¨åºå¼å¸¸ï¼å³é¤ java.rmi.remoteexception ä¹å¤çæ£æ¥å¼å¸¸ï¼ä¸èªå¨åæ»äºå¡ãè½ç¶å£°æå¼äºå¡ç®¡çç spring é»è®¤è¡ä¸ºéµå¾ª ejb çº¦å®ï¼åæ»ä»å¨æªç»æ£æ¥çå¼å¸¸ä¸èªå¨ï¼ï¼ä½èªå®ä¹æ­¤è¡ä¸ºéå¸¸å¾æç¨ã\n\n\n# spring å£°æå¼äºå¡ç®¡ççå®ç°\n\nå³äº spring æ¡æ¶çå£°æå¼äºå¡æ¯æï¼æéè¦çæ¦å¿µæ¯è¿ç§æ¯ææ¯éè¿ aop ä»£çå¯ç¨çï¼å¹¶ä¸äºå¡ advice æ¯ç±åæ°æ®é©±å¨çï¼ç®åæ¯åºäº xml æåºäºæ³¨éçï¼ã aop ä¸äºå¡åæ°æ®çç»åäº§çäºä¸ä¸ª aop ä»£çï¼å®ä½¿ç¨ transactioninterceptor åéå½ç transactionmanager å®ç°æ¥é©±å¨å´ç»æ¹æ³è°ç¨çäºå¡ã\n\nspring ç transactioninterceptor ä¸ºå½ä»¤å¼åååºå¼ç¼ç¨æ¨¡åæä¾äºå¡ç®¡çãæ¦æªå¨éè¿æ£æ¥æ¹æ³è¿åç±»åæ¥æ£æµæéçäºå¡ç®¡çé£æ ¼ãè¿åååºå¼ç±»åçæ¹æ³ï¼ä¾å¦ publisher æ kotlin flowï¼æå®ä»¬çå­ç±»åï¼æèµæ ¼è¿è¡ååºå¼äºå¡ç®¡çãåæ¬ void å¨åçææå¶ä»è¿åç±»åé½ä½¿ç¨ä»£ç è·¯å¾è¿è¡å½ä»¤å¼äºå¡ç®¡çã\n\näºå¡ç®¡çé£æ ¼ä¼å½±åéè¦åªä¸ªäºå¡ç®¡çå¨ãå½ä»¤å¼äºå¡éè¦ platformtransactionmanagerï¼èååºå¼äºå¡ä½¿ç¨ reactivetransactionmanager å®ç°ã\n\n> @transactional éå¸¸ä¸ platformtransactionmanager ç®¡çççº¿ç¨ç»å®äºå¡ä¸èµ·ä½¿ç¨ï¼å°äºå¡å¬å¼ç»å½åæ§è¡çº¿ç¨ä¸­çæææ°æ®è®¿é®æä½ãæ³¨æï¼è¿ä¸ä¼ä¼ æ­å°æ¹æ³ä¸­æ°å¯å¨ççº¿ç¨ã\n> \n> ç± reactivetransactionmanager ç®¡ççååºå¼äºå¡ä½¿ç¨ reactor ä¸ä¸æèä¸æ¯çº¿ç¨æ¬å°å±æ§ãå æ­¤ï¼ææåä¸çæ°æ®è®¿é®æä½é½éè¦å¨åä¸ä¸ªååºå¼ç®¡éä¸­çåä¸ä¸ª reactor ä¸ä¸æä¸­æ§è¡ã\n\nä¸å¾æ¾ç¤ºäºå¨äºå¡ä»£çä¸è°ç¨æ¹æ³çæ¦å¿µè§å¾ï¼\n\n\n\n\n# å£°æå¼äºå¡ç¤ºä¾\n\nèèä»¥ä¸æ¥å£åå¶ä¼´éçå®ç°ãæ­¤ç¤ºä¾ä½¿ç¨ foo å bar ç±»ä½ä¸ºå ä½ç¬¦ï¼ä»¥ä¾¿æ¨å¯ä»¥ä¸æ³¨äºäºå¡ä½¿ç¨ï¼èæ éå³æ³¨ç¹å®çåæ¨¡åãå°±æ¬ç¤ºä¾èè¨ï¼defaultfooservice ç±»å¨æ¯ä¸ªå·²å®ç°æ¹æ³çä¸»ä½ä¸­æåº unsupportedoperationexception å®ä¾è¿ä¸äºå®å¾å¥½ãè¯¥è¡ä¸ºä½¿æ¨å¯ä»¥çå°æ­£å¨åå»ºçäºå¡ï¼ç¶ååæ»ä»¥ååº unsupportedoperationexception å®ä¾ã\n\nä»¥ä¸æ¸åæ¾ç¤ºäº fooservice æ¥å£ï¼\n\n// the service interface that we want to make transactional\n\npackage x.y.service;\n\npublic interface fooservice {\n\n    foo getfoo(string fooname);\n\n    foo getfoo(string fooname, string barname);\n\n    void insertfoo(foo foo);\n\n    void updatefoo(foo foo);\n\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸è¿°æ¥å£çå®ç°ï¼\n\npackage x.y.service;\n\npublic class defaultfooservice implements fooservice {\n\n    @override\n    public foo getfoo(string fooname) {\n        // ...\n    }\n\n    @override\n    public foo getfoo(string fooname, string barname) {\n        // ...\n    }\n\n    @override\n    public void insertfoo(foo foo) {\n        // ...\n    }\n\n    @override\n    public void updatefoo(foo foo) {\n        // ...\n    }\n}\n\n\nåè®¾ fooservice æ¥å£çåä¸¤ä¸ªæ¹æ³ getfoo(string) å getfoo(string, string) å¿é¡»å¨å·æåªè¯»è¯­ä¹çäºå¡ä¸ä¸æä¸­è¿è¡ï¼å¹¶ä¸å¶ä»æ¹æ³ insertfoo(foo) å updatefoo(foo )ï¼å¿é¡»å¨å·æè¯»åè¯­ä¹çäºå¡ä¸ä¸æä¸­è¿è¡ãä»¥ä¸éç½®å°å¨æ¥ä¸æ¥çå æ®µä¸­è¯¦ç»è¯´æï¼\n\n\x3c!-- from the file \'context.xml\' --\x3e\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemalocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- this is the service object that we want to make transactional --\x3e\n    <bean id="fooservice" class="x.y.service.defaultfooservice"/>\n\n    \x3c!-- the transactional advice (what \'happens\'; see the <aop:advisor/> bean below) --\x3e\n    <tx:advice id="txadvice" transaction-manager="txmanager">\n        \x3c!-- the transactional semantics... --\x3e\n        <tx:attributes>\n            \x3c!-- all methods starting with \'get\' are read-only --\x3e\n            <tx:method name="get*" read-only="true"/>\n            \x3c!-- other methods use the default transaction settings (see below) --\x3e\n            <tx:method name="*"/>\n        </tx:attributes>\n    </tx:advice>\n\n    \x3c!-- ensure that the above transactional advice runs for any execution\n        of an operation defined by the fooservice interface --\x3e\n    <aop:config>\n        <aop:pointcut id="fooserviceoperation" expression="execution(* x.y.service.fooservice.*(..))"/>\n        <aop:advisor advice-ref="txadvice" pointcut-ref="fooserviceoperation"/>\n    </aop:config>\n\n    \x3c!-- don\'t forget the datasource --\x3e\n    <bean id="datasource" class="org.apache.commons.dbcp.basicdatasource" destroy-method="close">\n        <property name="driverclassname" value="oracle.jdbc.driver.oracledriver"/>\n        <property name="url" value="jdbc:oracle:thin:@rj-t42:1521:elvis"/>\n        <property name="username" value="scott"/>\n        <property name="password" value="tiger"/>\n    </bean>\n\n    \x3c!-- similarly, don\'t forget the transactionmanager --\x3e\n    <bean id="txmanager" class="org.springframework.jdbc.datasource.datasourcetransactionmanager">\n        <property name="datasource" ref="datasource"/>\n    </bean>\n\n    \x3c!-- other <bean/> definitions here --\x3e\n\n</beans>\n\n\næ£æ¥åé¢çéç½®ãå®åå®æ¨è¦ä½¿æå¡å¯¹è±¡ fooservice bean å·æäºå¡æ§ãè¦åºç¨çäºå¡è¯­ä¹å°è£å¨ <tx:advice/> å®ä¹ä¸­ã<tx:advice/> å®ä¹è¯»ä½âææä»¥ get å¼å¤´çæ¹æ³é½å°å¨åªè¯»äºå¡çä¸ä¸æä¸­è¿è¡ï¼ææå¶ä»æ¹æ³é½å°ä»¥é»è®¤äºå¡è¯­ä¹è¿è¡âã<tx:advice/> æ ç­¾ç transaction-manager å±æ§è®¾ç½®ä¸ºå°é©±å¨äºå¡ç transactionmanager bean çåç§°ï¼å¨æ¬ä¾ä¸­ä¸º txmanager beanï¼ã\n\n> å¦æè¦è¿æ¥ç transactionmanager ç bean åç§°å·æåç§° transactionmanagerï¼åå¯ä»¥çç¥äºå¡ advice (tx:advice/) ä¸­ç transaction-manager å±æ§ãå¦æè¦è¿æ¥ç transactionmanager bean æä»»ä½å¶ä»åç§°ï¼åå¿é¡»æ¾å¼ä½¿ç¨ transaction-manager å±æ§ï¼å¦åé¢çç¤ºä¾æç¤ºã\n\n<aop:config/> å®ä¹ç¡®ä¿ç± txadvice bean å®ä¹çäºå¡æ§å»ºè®®å¨ç¨åºä¸­çéå½ä½ç½®è¿è¡ãé¦åï¼æ¨å®ä¹ä¸ä¸ªåå¥ç¹ï¼è¯¥åå¥ç¹ä¸ fooservice æ¥å£ (fooserviceoperation) ä¸­å®ä¹çä»»ä½æä½çæ§è¡ç¸å¹éãç¶åï¼æ¨ä½¿ç¨ä¸ä¸ª adviser å°åå¥ç¹ä¸ txadvice ç¸å³èãç»æè¡¨æï¼å¨æ§è¡ fooserviceoperation æ¶ï¼ä¼è¿è¡ txadvice å®ä¹çå»ºè®®ã\n\nä¸ä¸ªå¸¸è§çè¦æ±æ¯ä½¿æ´ä¸ªæå¡å±å·æäºå¡æ§ãæå¥½çæ¹æ³æ¯æ´æ¹åå¥ç¹è¡¨è¾¾å¼ä»¥å¹éæå¡å±ä¸­çä»»ä½æä½ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n<aop:config>\n    <aop:pointcut id="fooservicemethods" expression="execution(* x.y.service.*.*(..))"/>\n    <aop:advisor advice-ref="txadvice" pointcut-ref="fooservicemethods"/>\n</aop:config>\n\n\nåé¢æ¾ç¤ºçéç½®ç¨äºå´ç»ä» fooservice bean å®ä¹åå»ºçå¯¹è±¡åå»ºäºå¡ä»£çãä»£çéç½®äºäºå¡ adviceï¼ä»¥ä¾¿å¨ä»£çä¸è°ç¨éå½çæ¹æ³æ¶ï¼æ ¹æ®ä¸è¯¥æ¹æ³å³èçäºå¡éç½®ï¼å¯å¨ãæåãæ è®°ä¸ºåªè¯»ç­äºå¡ãèèä»¥ä¸æµè¯é©±å¨åé¢æ¾ç¤ºçéç½®çç¨åºï¼\n\npublic final class boot {\n\n    public static void main(final string[] args) throws exception {\n        applicationcontext ctx = new classpathxmlapplicationcontext("context.xml");\n        fooservice fooservice = ctx.getbean(fooservice.class);\n        fooservice.insertfoo(new foo());\n    }\n}\n\n\n\n# åæ»ä¸ä¸ªå£°ææ§äºå¡\n\nspring æ¡æ¶ä¸­ï¼è§¦åäºå¡åæ»çæ¨èæ¹å¼æ¯å¨äºå¡ä¸ä¸æçä»£ç ä¸­æåºå¼å¸¸ãspring äºå¡æ¡æ¶ä¼æè·ä»»ä½æªå¤ççå¼å¸¸ï¼å¹¶ç¡®å®æ¯å¦å°äºå¡æ è®°ä¸ºåæ»ã\n\nå¨å¶é»è®¤éç½®ä¸­ï¼spring äºå¡æ¡æ¶åªä¼å°å­å¨è¿è¡æ¶ä¸æªç»æ£æ¥å¼å¸¸çäºå¡æ è®°ä¸ºåæ»ãä¹å°±æ¯è¯´ï¼å½æåºçå¼å¸¸æ¯ runtimeexception çå®ä¾æå­ç±»æ¶ã ï¼é»è®¤æåµä¸ï¼éè¯¯å®ä¾ä¹ä¼å¯¼è´åæ»ï¼ãä»äºå¡æ¹æ³æåºçæ£æ¥å¼å¸¸ä¸ä¼å¯¼è´é»è®¤éç½®ä¸­çåæ»ã\n\næ¨å¯ä»¥éè¿æå®åæ»è§åï¼æç¡®æå®åªäºå¼å¸¸ç±»åå°å¯¼è´äºå¡åæ»ã\n\n> åæ»è§åçº¦å®å¨æåºæå®å¼å¸¸æ¶æ¯å¦åºåæ»äºå¡ï¼å¹¶ä¸è§ååºäºæ¨¡å¼ãæ¨¡å¼å¯ä»¥æ¯å®å¨éå®çç±»åæå¼å¸¸ç±»åçå®å¨éå®ç±»åçå­å­ç¬¦ä¸²ï¼å¿é¡»æ¯ throwable çå­ç±»ï¼ï¼ç®åä¸æ¯æééç¬¦ãä¾å¦ï¼javax.servlet.servletexception æ servletexception çå¼å°å¹é javax.servlet.servletexception åå¶å­ç±»ã\n> \n> åæ»è§åå¯ä»¥éè¿ rollback-for å no-rollback-for å±æ§å¨ xml ä¸­éç½®ï¼è¿åè®¸å°æ¨¡å¼æå®ä¸ºå­ç¬¦ä¸²ãä½¿ç¨ @transactional æ¶ï¼å¯ä»¥éè¿ rollbackfor / norollbackfor årollbackforclassname / norollbackforclassname å±æ§éç½®åæ»è§åï¼å®ä»¬åè®¸å°æ¨¡å¼åå«æå®ä¸ºç±»å¼ç¨æå­ç¬¦ä¸²ãå½å¼å¸¸ç±»åè¢«æå®ä¸ºç±»å¼ç¨æ¶ï¼å¶å®å¨éå®åç§°å°ç¨ä½æ¨¡å¼ãå æ­¤ï¼@transactional(rollbackfor = example.customexception.class) ç­ä»·äº @transactional(rollbackforclassname = \'example.customexception\')ã\n\nä»¥ä¸ xml çæ®µæ¼ç¤ºäºå¦ä½éè¿ rollback-for å±æ§æä¾å¼å¸¸æ¨¡å¼æ¥ä¸ºå·²æ£æ¥çãç¹å®ç exception ç±»åéç½®åæ»ï¼\n\n<tx:advice id="txadvice" transaction-manager="txmanager">\n    <tx:attributes>\n    <tx:method name="get*" read-only="true" rollback-for="noproductinstockexception"/>\n    <tx:method name="*"/>\n    </tx:attributes>\n</tx:advice>\n\n\nå¦ææ¨ä¸å¸æå¨æåºå¼å¸¸æ¶åæ»äºå¡ï¼æ¨è¿å¯ä»¥æå®âä¸åæ»âè§åãä¸é¢çä¾å­åè¯ spring äºå¡æ¡æ¶ï¼å³ä½¿å¨é¢å¯¹æªå¤çç instrumentnotfoundexception æ¶ä¹è¦æäº¤ä¼´éäºå¡ã\n\n<tx:advice id="txadvice">\n    <tx:attributes>\n    <tx:method name="updatestock" no-rollback-for="instrumentnotfoundexception"/>\n    <tx:method name="*"/>\n    </tx:attributes>\n</tx:advice>\n\n\nå½ spring framework äºå¡æ¡æ¶æè·å°å¼å¸¸ï¼å¹¶æ£æ¥éç½®çåæ»è§åä»¥ç¡®å®æ¯å¦å°äºå¡æ è®°ä¸ºåæ»æ¶ï¼ç±æéè¦çå¹éè§åå³å®ãå æ­¤ï¼å¨ä»¥ä¸éç½®çæåµä¸ï¼é¤ instrumentnotfoundexception ä¹å¤çä»»ä½å¼å¸¸é½ä¼å¯¼è´ä¼´éäºå¡çåæ»ã\n\n<tx:advice id="txadvice">\n    <tx:attributes>\n    <tx:method name="*" rollback-for="throwable" no-rollback-for="instrumentnotfoundexception"/>\n    </tx:attributes>\n</tx:advice>\n\n\næ¨è¿å¯ä»¥ä»¥ç¼ç¨æ¹å¼æç¤ºæéçåæ»ãè½ç¶å¾ç®åï¼ä½è¿ä¸ªè¿ç¨éå¸¸å·æä¾µå¥æ§ï¼å¹¶ä¸å°æ¨çä»£ç ä¸ spring framework çäºå¡åºç¡è®¾æ½ç´§å¯è¦åãä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½ä»¥ç¼ç¨æ¹å¼æç¤ºæéçåæ»ã\n\npublic void resolveposition() {\n    try {\n        // some business logic...\n    } catch (noproductinstockexception ex) {\n        // trigger rollback programmatically\n        transactionaspectsupport.currenttransactionstatus().setrollbackonly();\n    }\n}\n\n\nå¦æå¯è½çè¯ï¼å¼ºçå»ºè®®æ¨ä½¿ç¨å£°ææ§æ¹æ³è¿è¡åæ»ãå¦ææ¨ç»å¯¹éè¦ï¼å¯ä»¥ä½¿ç¨ç¨åºååæ»ï¼ä½å®çä½¿ç¨ä¸å®ç°å¹²åçåºäº pojo çæ¶æèéèé©°ã\n\n\n# ä¸ºä¸åç bean éç½®ä¸åçäºå¡è¯­ä¹\n\nèèæ¨æè®¸å¤æå¡å±å¯¹è±¡çåºæ¯ï¼å¹¶ä¸æ¨å¸æå¯¹æ¯ä¸ªå¯¹è±¡åºç¨å®å¨ä¸åçäºå¡éç½®ãæ¨å¯ä»¥éè¿å®ä¹å·æä¸å <aop:advisor/> åç´ åä¸å advice-ref å±æ§å¼çåç¹æ¥å®ç°è¿ä¸ç¹ã\n\nä½ä¸ºä¸ä¸ªæ¯è¾ç¹ï¼é¦ååè®¾æ¨çæææå¡å±ç±»é½å®ä¹å¨æ ¹ x.y.service åä¸­ã è¦ä½¿ä½ä¸ºè¯¥åï¼æå­åï¼ä¸­å®ä¹çç±»çå®ä¾å¹¶ä¸åç§°ä»¥ service ç»å°¾çææ bean é½å·æé»è®¤çäºå¡éç½®ï¼æ¨å¯ä»¥ç¼åä»¥ä¸åå®¹ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemalocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <aop:config>\n\n        <aop:pointcut id="serviceoperation"\n                expression="execution(* x.y.service..*service.*(..))"/>\n\n        <aop:advisor pointcut-ref="serviceoperation" advice-ref="txadvice"/>\n\n    </aop:config>\n\n    \x3c!-- these two beans will be transactional... --\x3e\n    <bean id="fooservice" class="x.y.service.defaultfooservice"/>\n    <bean id="barservice" class="x.y.service.extras.simplebarservice"/>\n\n    \x3c!-- ... and these two beans won\'t --\x3e\n    <bean id="anotherservice" class="org.xyz.someservice"/> \x3c!-- (not in the right package) --\x3e\n    <bean id="barmanager" class="x.y.service.simplebarmanager"/> \x3c!-- (doesn\'t end in \'service\') --\x3e\n\n    <tx:advice id="txadvice">\n        <tx:attributes>\n            <tx:method name="get*" read-only="true"/>\n            <tx:method name="*"/>\n        </tx:attributes>\n    </tx:advice>\n\n    \x3c!-- other transaction infrastructure beans such as a transactionmanager omitted... --\x3e\n\n</beans>\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨å®å¨ä¸åçäºå¡è®¾ç½®éç½®ä¸¤ä¸ªä¸åç bean\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemalocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <aop:config>\n\n        <aop:pointcut id="defaultserviceoperation"\n                expression="execution(* x.y.service.*service.*(..))"/>\n\n        <aop:pointcut id="notxserviceoperation"\n                expression="execution(* x.y.service.ddl.defaultddlmanager.*(..))"/>\n\n        <aop:advisor pointcut-ref="defaultserviceoperation" advice-ref="defaulttxadvice"/>\n\n        <aop:advisor pointcut-ref="notxserviceoperation" advice-ref="notxadvice"/>\n\n    </aop:config>\n\n    \x3c!-- this bean will be transactional (see the \'defaultserviceoperation\' pointcut) --\x3e\n    <bean id="fooservice" class="x.y.service.defaultfooservice"/>\n\n    \x3c!-- this bean will also be transactional, but with totally different transactional settings --\x3e\n    <bean id="anotherfooservice" class="x.y.service.ddl.defaultddlmanager"/>\n\n    <tx:advice id="defaulttxadvice">\n        <tx:attributes>\n            <tx:method name="get*" read-only="true"/>\n            <tx:method name="*"/>\n        </tx:attributes>\n    </tx:advice>\n\n    <tx:advice id="notxadvice">\n        <tx:attributes>\n            <tx:method name="*" propagation="never"/>\n        </tx:attributes>\n    </tx:advice>\n\n    \x3c!-- other transaction infrastructure beans such as a transactionmanager omitted... --\x3e\n\n</beans>\n\n\n\n# <tx:advice/> éç½®\n\n<tx:advice/> çé»è®¤éç½®ä¸ºï¼\n\n * ä¼ æ­è®¾ç½®æ¯ required\n\n * éç¦»çº§å«ä¸º default\n\n * äºå¡æ¯ read-write\n\n * äºå¡è¶æ¶é»è®¤ä¸ºåºå±äºå¡ç³»ç»çé»è®¤è¶æ¶ï¼å¦æä¸æ¯æè¶æ¶ï¼åä¸ºæ ã\n\n * ä»»ä½ runtimeexception é½ä¼è§¦ååæ»ï¼èä»»ä½å·²æ£æ¥ç exception é½ä¸ä¼\n\n<tx:advice/> éç½®å±æ§\n\nå±æ§                æ¯å¦å¿è¦   é»è®¤å¼        æè¿°\nname              yes               ä¸äºå¡å±æ§å³èçæ¹æ³åç§°ãæ¯æééç¬¦ï¼å¦ï¼get*ãhandle*ãon*event\npropagation       no     required   äºå¡ä¼ æ­è¡ä¸º\nisolation         no     default    äºå¡éç¦»çº§å«ãä»éç¨äº required æ requires_new çä¼ æ­è®¾ç½®ã\ntimeout           no     -1         äºå¡è¶æ¶æ¶é´ï¼åä½ï¼ç§ï¼ãä»éç¨äº required æ requires_new çä¼ æ­è®¾ç½®ã\nread-only         no     false      read-write æ read-only äºå¡ã\nrollback-for      no                è§¦ååæ»ç exception å®ä¾åè¡¨ï¼éè¿éå·åéï¼ã\nno-rollback-for   no                ä¸è§¦ååæ»ç exception å®ä¾åè¡¨ï¼éè¿éå·åéï¼ã\n\n\n# ä½¿ç¨ @transactional æ³¨è§£\n\né¤äºåºäº xml çå£°æå¼äºå¡éç½®æ¹æ³ä¹å¤ï¼æ¨è¿å¯ä»¥ä½¿ç¨åºäºæ³¨è§£çæ¹æ³ã\n\nä¸é¢æ¯ä¸ä¸ªä½¿ç¨ @transactional æ³¨è§£çç¤ºä¾ï¼\n\n@transactional\npublic class defaultfooservice implements fooservice {\n\n    @override\n    public foo getfoo(string fooname) {\n        // ...\n    }\n\n    @override\n    public foo getfoo(string fooname, string barname) {\n        // ...\n    }\n\n    @override\n    public void insertfoo(foo foo) {\n        // ...\n    }\n\n    @override\n    public void updatefoo(foo foo) {\n        // ...\n    }\n}\n\n\nå¦ä¸æè¿°å¨ç±»çº§å«ä½¿ç¨ï¼@transactional æ³¨è§£è¡¨æå£°æç±»ï¼åå¶å­ç±»ï¼çæææ¹æ³é½ä½¿ç¨é»è®¤äºå¡éç½®ã æèï¼å¯ä»¥åç¬ä¸ºæ¯ä¸ªæ¹æ³æå®æ³¨è§£ãè¯·æ³¨æï¼ç±»çº§å«çæ³¨è§£ä¸éç¨äºç±»å±æ¬¡ç»æä¸­çç¥åç±»ï¼ å¨è¿ç§æåµä¸ï¼ç»§æ¿çæ¹æ³éè¦å¨æ¬å°éæ°å£°ææè½åä¸å­ç±»çº§å«çæ³¨è§£ã\n\nå½ä¸é¢ç pojo ç±»å¨ spring ä¸ä¸æä¸­å®ä¹ä¸º bean æ¶ï¼æ¨å¯ä»¥éè¿ @configuration ç±»ä¸­ç @enabletransactionmanagement æ³¨è§£ä½¿ bean å®ä¾å·æäºå¡æ§ã\n\nå¨ xml éç½®ä¸­ï¼ <tx:annotation-driven/> æ ç­¾æä¾äºç±»ä¼¼çä¾¿å©ï¼\n\n\x3c!-- from the file \'context.xml\' --\x3e\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xmlns:tx="http://www.springframework.org/schema/tx"\n    xsi:schemalocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/tx\n        https://www.springframework.org/schema/tx/spring-tx.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- this is the service object that we want to make transactional --\x3e\n    <bean id="fooservice" class="x.y.service.defaultfooservice"/>\n\n    \x3c!-- enable the configuration of transactional behavior based on annotations --\x3e\n    \x3c!-- a transactionmanager is still required --\x3e\n    <tx:annotation-driven transaction-manager="txmanager"/>\n\n    <bean id="txmanager" class="org.springframework.jdbc.datasource.datasourcetransactionmanager">\n        \x3c!-- (this dependency is defined somewhere else) --\x3e\n        <property name="datasource" ref="datasource"/>\n    </bean>\n\n    \x3c!-- other <bean/> definitions here --\x3e\n\n</beans>\n\n\n# @transactional éç½®\n\nproperty                 type                                                         description\nvalue                    string                                                       optional qualifier that specifies the transaction manager to\n                                                                                      be used.\ntransactionmanager       string                                                       alias for value.\nlabel                    array of string labels to add an expressive description to   labels may be evaluated by transaction managers to associate\n                         the transaction.                                             implementation-specific behavior with the actual\n                                                                                      transaction.\npropagation              enum: propagation                                            optional propagation setting.\nisolation                enum: isolation                                              optional isolation level. applies only to propagation values\n                                                                                      of required or requires_new.\ntimeout                  int (in seconds of granularity)                              optional transaction timeout. applies only to propagation\n                                                                                      values of required or requires_new.\ntimeoutstring            string (in seconds of granularity)                           alternative for specifying the timeout in seconds as a\n                                                                                      string valueâââfor example, as a placeholder.\nreadonly                 boolean                                                      read-write versus read-only transaction. only applicable to\n                                                                                      values of required or requires_new.\nrollbackfor              array of class objects, which must be derived from           optional array of exception types that must cause rollback.\n                         throwable.\nrollbackforclassname     array of exception name patterns.                            optional array of exception name patterns that must cause\n                                                                                      rollback.\nnorollbackfor            array of class objects, which must be derived from           optional array of exception types that must not cause\n                         throwable.                                                   rollback.\nnorollbackforclassname   array of exception name patterns.                            optional array of exception name patterns that must not\n                                                                                      cause rollback.\n\n# å¤äºå¡ç®¡çå¨åºæ¯ä¸ä½¿ç¨ @transactional\n\næäºæåµä¸ï¼åºç¨ç¨åºä¸­å¯è½éè¦æ¥å¥å¤ä¸ªæ°æ®æºï¼ç¸åºçï¼ä¹éè¦å¤ä¸ªç¬ç«çäºå¡ç®¡çå¨ãä½¿ç¨èå¯ä»¥ä½¿ç¨ @transactional æ³¨éç value æ transactionmanager å±æ§æ¥éæ©æ§å°æå®è¦ä½¿ç¨ç transactionmanager çæ è¯ãè¿å¯ä»¥æ¯ bean åç§°æäºå¡ç®¡çå¨ bean çéå®ç¬¦å¼ã\n\npublic class transactionalservice {\n\n    @transactional("order")\n    public void setsomething(string name) { ... }\n\n    @transactional("account")\n    public void dosomething() { ... }\n\n    @transactional("reactive-account")\n    public mono<void> dosomethingreactive() { ... }\n}\n\n\nä¸é¢å±ç¤ºå¦ä½å®ä¹ transactionmanagerï¼\n\n<tx:annotation-driven/>\n\n    <bean id="transactionmanager1" class="org.springframework.jdbc.datasource.datasourcetransactionmanager">\n        ...\n        <qualifier value="order"/>\n    </bean>\n\n    <bean id="transactionmanager2" class="org.springframework.jdbc.datasource.datasourcetransactionmanager">\n        ...\n        <qualifier value="account"/>\n    </bean>\n\n    <bean id="transactionmanager3" class="org.springframework.data.r2dbc.connectionfactory.r2dbctransactionmanager">\n        ...\n        <qualifier value="reactive-account"/>\n    </bean>\n\n\nå¨è¿ç§æåµä¸ï¼transactionalservice ä¸çåä¸ªæ¹æ³å¨åç¬çäºå¡ç®¡çå¨ä¸è¿è¡ï¼ç± orderãaccount å reactive-account éå®ç¬¦åºåã å¦ææ²¡ææ¾å°æç¡®æå®ç transactionmanager beanï¼åä»ä½¿ç¨é»è®¤ç <tx:annotation-driven> ç®æ  bean åç§°ã\n\n# èªå®ä¹ç»åæ³¨è§£\n\nå¦ææ¨åç°å¨è®¸å¤ä¸åçæ¹æ³ä¸éå¤ä½¿ç¨ @transactional ç¸åçå±æ§ï¼å¯ä»¥ä½¿ç¨ spring çåæ³¨è§£èªå®ä¹ç»åæ³¨è§£ã\n\n@target({elementtype.method, elementtype.type})\n@retention(retentionpolicy.runtime)\n@transactional(transactionmanager = "order", label = "causal-consistency")\npublic @interface ordertx {\n}\n\n@target({elementtype.method, elementtype.type})\n@retention(retentionpolicy.runtime)\n@transactional(transactionmanager = "account", label = "retryable")\npublic @interface accounttx {\n}\n\n\nä½¿ç¨ç¤ºä¾ï¼\n\npublic class transactionalservice {\n\n    @ordertx\n    public void setsomething(string name) {\n        // ...\n    }\n\n    @accounttx\n    public void dosomething() {\n        // ...\n    }\n}\n\n\nå¨ä¸é¢çç¤ºä¾ä¸­ï¼æä»¬ä½¿ç¨è¯­æ³æ¥å®ä¹äºå¡ç®¡çå¨éå®ç¬¦åäºå¡æ ç­¾ï¼ä½æä»¬ä¹å¯ä»¥åæ¬ä¼ æ­è¡ä¸ºãåæ»è§åãè¶æ¶åå¶ä»ç¹æ§ã\n\n# äºå¡ä¼ æ­\n\nå¨ spring ç®¡ççäºå¡ä¸­ï¼è¯·æ³¨æç©çäºå¡åé»è¾äºå¡ä¹é´çå·®å¼ï¼ä»¥åä¼ æ­è®¾ç½®å¦ä½åºç¨äºè¿ç§å·®å¼ã\n\n\n\npropagation_required å¼ºå¶æ§è¡ç©çäºå¡ï¼å¦æå°ä¸å­å¨äºå¡ï¼åå¨å½åèå´çæ¬å°æ§è¡æåä¸æ´å¤§èå´å®ä¹çç°æâå¤é¨âäºå¡ã è¿æ¯åä¸çº¿ç¨åçå¸¸è§è°ç¨å æ å®æä¸­çä¸ä¸ªå¾å¥½çé»è®¤è®¾ç½®ï¼ä¾å¦ï¼å§æç»å¤ä¸ªå­å¨åºæ¹æ³çæå¡å¤è§ï¼å¶ä¸­ææåºå±èµæºé½å¿é¡»åä¸æå¡çº§äºå¡ï¼ã\n\nå½ä¼ æ­è®¾ç½®ä¸º propagation_required æ¶ï¼å°ä¸ºåºç¨è¯¥è®¾ç½®çæ¯ä¸ªæ¹æ³åå»ºä¸ä¸ªé»è¾äºå¡èå´ãæ¯ä¸ªè¿æ ·çé»è¾äºå¡èå´å¯ä»¥åç¬ç¡®å®ä»åæ»ç¶æï¼å¤é¨äºå¡èå´å¨é»è¾ä¸ç¬ç«äºåé¨äºå¡èå´ãå¨æ å propagation_required è¡ä¸ºçæåµä¸ï¼ææè¿äºèå´é½æ å°å°åä¸ä¸ªç©çäºå¡ãå æ­¤ï¼å¨åé¨äºå¡èå´åè®¾ç½®çä»åæ»æ è®°ç¡®å®ä¼å½±åå¤é¨äºå¡å®éæäº¤çæºä¼ã\n\nä½æ¯ï¼å¨åé¨äºå¡èå´è®¾ç½®äºä»åæ»æ è®°çæåµä¸ï¼å¤é¨äºå¡å°æªå³å®åæ»æ¬èº«ï¼å æ­¤åæ»ï¼ç±åé¨äºå¡èå´éé»è§¦åï¼æ¯æå¤çãæ­¤æ¶ä¼å¼åç¸åºç unexpectedrollbackexceptionãè¿æ¯é¢æçè¡ä¸ºï¼å æ­¤äºå¡çè°ç¨èæ°¸è¿ä¸ä¼è¢«è¯¯å¯¼ä»¥ä¸ºæ§è¡äºæäº¤ï¼èå®éä¸å¹¶æ²¡ææ§è¡ãå æ­¤ï¼å¦æåé¨äºå¡ï¼å¤é¨è°ç¨èä¸ç¥éï¼é»é»å°å°äºå¡æ è®°ä¸ºä»åæ»ï¼å¤é¨è°ç¨èä»ä¼è°ç¨æäº¤ãå¤é¨è°ç¨èéè¦æ¥æ¶ unexpectedrollbackexception ä»¥æ¸æ¥å°æç¤ºæ§è¡äºåæ»ã\n\n\n\npropagation_requires_new ä¸ propagation_required ç¸æ¯ï¼å§ç»ä¸ºæ¯ä¸ªåå½±åçäºå¡èå´ä½¿ç¨ç¬ç«çç©çäºå¡ï¼ä»ä¸åä¸å¤é¨èå´çç°æäºå¡ã å¨è¿ç§å®æä¸ï¼åºå±èµæºäºå¡æ¯ä¸åçï¼å æ­¤å¯ä»¥ç¬ç«æäº¤æåæ»ï¼å¤é¨äºå¡ä¸ååé¨äºå¡åæ»ç¶æçå½±åï¼åé¨äºå¡çéå¨å®æåç«å³éæ¾ã è¿æ ·ä¸ä¸ªç¬ç«çåé¨äºå¡ä¹å¯ä»¥å£°æèªå·±çéç¦»çº§å«ãè¶æ¶ååªè¯»è®¾ç½®ï¼èä¸æ¯ç»§æ¿å¤é¨äºå¡çç¹æ§ã\n\n\n# jdbc å¼å¸¸æ½è±¡\n\nspring ä¼å°æ°æ®æä½çå¼å¸¸è½¬æ¢ä¸º dataaccessexceptionã\n\nspring æ¯æä¹è®¤è¯é£äºéè¯¯ç ç\n\néè¿ sqlerrorcodesqlexceptiontranslator è§£æéè¯¯ç \n\nerrorcode å®ä¹ï¼sql-error-codes.xml æä»¶ï¼\n\n\n# spring äºå¡æä½³å®è·µ\n\n\n\n\n# spring äºå¡æªçæ\n\nä½¿ç¨ @transactional æ³¨è§£å¼å¯å£°æå¼äºå¡æ¶ï¼ æå®¹æå¿½ç¥çé®é¢æ¯ï¼å¾å¯è½äºå¡å¹¶æ²¡æçæã\n\n@transactional çæååï¼\n\n# @transactional æ¹æ³å¿é¡»æ¯ public\n\nååä¸ï¼é¤éç¹æ®éç½®ï¼æ¯å¦ä½¿ç¨ aspectj éæç»å¥å®ç° aopï¼ï¼å¦ååªæå®ä¹å¨ public æ¹æ³ä¸ç @transactional æè½çæãåå æ¯ï¼spring é»è®¤éè¿å¨æä»£ççæ¹å¼å®ç° aopï¼å¯¹ç®æ æ¹æ³è¿è¡å¢å¼ºï¼private æ¹æ³æ æ³ä»£çå°ï¼spring èªç¶ä¹æ æ³å¨æå¢å¼ºäºå¡å¤çé»è¾ã\n\nãç¤ºä¾ãéè¯¯ä½¿ç¨ @transactional æ¡ä¾ä¸\n\n\t@transactional\n\tvoid createuserprivate(userentity entity) {\n\t\tuserrepository.save(entity);\n\t\tif (entity.getname().contains("test")) { throw new runtimeexception("invalid username!"); }\n\t}\n\n\t//ç§ææ¹æ³\n\tpublic int createuserwrong1(string name) {\n\t\ttry {\n\t\t\tthis.createuserprivate(new userentity(name));\n\t\t} catch (exception ex) {\n\t\t\tlog.error("create user failed because {}", ex.getmessage());\n\t\t}\n\t\treturn userrepository.findbyname(name).size();\n\t}\n\n\nå½ä¼ å¥åä¸º test çç¨æ·å®ä½ï¼ä¼æåºå¼å¸¸ï¼ä½ @transactional æªçæï¼ä¸ä¼è§¦ååæ»ã\n\n# å¿é¡»éè¿ spring æ³¨å¥ç bean è¿è¡è°ç¨\n\nååäºï¼å¿é¡»éè¿ä»£çè¿çç±»ä»å¤é¨è°ç¨ç®æ æ¹æ³æè½çæã\n\nãç¤ºä¾ãéè¯¯ä½¿ç¨ @transactional æ¡ä¾äº\n\n\t//èªè°ç¨\n\tpublic int createuserwrong2(string name) {\n\t\ttry {\n\t\t\tthis.createuserpublic(new userentity(name));\n\t\t} catch (exception ex) {\n\t\t\tlog.error("create user failed because {}", ex.getmessage());\n\t\t}\n\t\treturn userrepository.findbyname(name).size();\n\t}\n\n\t//å¯ä»¥ä¼ æ­åºå¼å¸¸\n\t@transactional\n\tpublic void createuserpublic(userentity entity) {\n\t\tuserrepository.save(entity);\n\t\tif (entity.getname().contains("test")) { throw new runtimeexception("invalid username!"); }\n\t}\n\n\nå½ä¼ å¥åä¸º test çç¨æ·å®ä½ï¼ä¼æåºå¼å¸¸ï¼ä½ @transactional æªçæï¼ä¸ä¼è§¦ååæ»ã\n\nè¯´æï¼spring éè¿ aop ææ¯å¯¹æ¹æ³è¿è¡å­èç å¢å¼ºï¼è¦è°ç¨å¢å¼ºè¿çæ¹æ³å¿ç¶æ¯è°ç¨ä»£çåçå¯¹è±¡ã\n\n\n# äºå¡è½ç¶çæä½æªåæ»\n\néè¿ aop å®ç°äºå¡å¤çå¯ä»¥çè§£ä¸ºï¼ä½¿ç¨ tryâ¦catchâ¦ æ¥åè£¹æ è®°äº @transactional æ³¨è§£çæ¹æ³ï¼å½æ¹æ³åºç°äºå¼å¸¸å¹¶ä¸æ»¡è¶³ä¸å®æ¡ä»¶çæ¶åï¼å¨ catch éé¢æä»¬å¯ä»¥è®¾ç½®äºå¡åæ»ï¼æ²¡æå¼å¸¸åç´æ¥æäº¤äºå¡ã\n\nâä¸å®æ¡ä»¶âï¼ä¸»è¦åæ¬ä¸¤ç¹ï¼\n\nç¬¬ä¸ï¼åªæå¼å¸¸ä¼ æ­åºäºæ è®°äº @transactional æ³¨è§£çæ¹æ³ï¼äºå¡æè½åæ»ãå¨ spring ç transactionaspectsupport éæä¸ª invokewithintransaction æ¹æ³ï¼éé¢å°±æ¯å¤çäºå¡çé»è¾ã\n\nç¬¬äºï¼é»è®¤æåµä¸ï¼åºç° runtimeexceptionï¼éåæ£å¼å¸¸ï¼æ error çæ¶åï¼spring æä¼åæ»äºå¡ã\n\n@service\n@slf4j\npublic class userservice {\n\n\t@autowired\n\tprivate userrepository userrepository;\n\n\t//å¼å¸¸æ æ³ä¼ æ­åºæ¹æ³ï¼å¯¼è´äºå¡æ æ³åæ»\n\t@transactional\n\tpublic void createuserwrong1(string name) {\n\t\ttry {\n\t\t\tuserrepository.save(new userentity(name));\n\t\t\tthrow new runtimeexception("error");\n\t\t} catch (exception ex) {\n\t\t\tlog.error("create user failed", ex);\n\t\t}\n\t}\n\n\t//å³ä½¿åºäºåæ£å¼å¸¸ä¹æ æ³è®©äºå¡åæ»\n\t@transactional\n\tpublic void createuserwrong2(string name) throws ioexception {\n\t\tuserrepository.save(new userentity(name));\n\t\tothertask();\n\t}\n\n\t//å ä¸ºæä»¶ä¸å­å¨ï¼ä¸å®ä¼æåºä¸ä¸ªioexception\n\tprivate void othertask() throws ioexception {\n\t\tfiles.readalllines(paths.get("file-that-not-exist"));\n\t}\n\n}\n\n\nå¨ createuserwrong1 æ¹æ³ä¸­ä¼æåºä¸ä¸ª runtimeexceptionï¼ä½ç±äºæ¹æ³å catch äºææå¼å¸¸ï¼å¼å¸¸æ æ³ä»æ¹æ³ä¼ æ­åºå»ï¼äºå¡èªç¶æ æ³åæ»ã\n\nå¨ createuserwrong2 æ¹æ³ä¸­ï¼æ³¨åç¨æ·çåæ¶ä¼æä¸æ¬¡ othertask æä»¶è¯»åæä½ï¼å¦ææä»¶è¯»åå¤±è´¥ï¼æä»¬å¸æç¨æ·æ³¨åçæ°æ®åºæä½åæ»ãè½ç¶è¿éæ²¡ææè·å¼å¸¸ï¼ä½å ä¸º othertask æ¹æ³æåºçæ¯åæ£å¼å¸¸ï¼createuserwrong2 ä¼ æ­åºå»çä¹æ¯åæ£å¼å¸¸ï¼äºå¡åæ ·ä¸ä¼åæ»ã\n\nãè§£å³æ¹æ¡ä¸ãå¦æä½ å¸æèªå·±æè·å¼å¸¸è¿è¡å¤ççè¯ï¼ä¹æ²¡å³ç³»ï¼å¯ä»¥æå¨è®¾ç½® transactionaspectsupport.currenttransactionstatus().setrollbackonly(); è®©å½åäºå¡å¤äºåæ»ç¶æï¼\n\n@transactional\npublic void createuserright1(string name) {\n   try {\n      userrepository.save(new userentity(name));\n      throw new runtimeexception("error");\n   } catch (exception ex) {\n      log.error("create user failed", ex);\n      transactionaspectsupport.currenttransactionstatus().setrollbackonly();\n   }\n}\n\n\nãè§£å³æ¹æ¡äºãå¨æ³¨è§£ä¸­å£°æ @transactional(rollbackfor = exception.class)ï¼ææéå°ææç exception é½åæ»äºå¡ï¼æ¥çªç ´é»è®¤ä¸åæ»åæ£å¼å¸¸çéå¶ï¼ï¼\n\n@transactional(rollbackfor = exception.class)\npublic void createuserright2(string name) throws ioexception {\n   userrepository.save(new userentity(name));\n   othertask();\n}\n\n\n\n# ç»åäºå¡ä¼ æ­æ¹å¼\n\nå¦ææ¹æ³æ¶åå¤æ¬¡æ°æ®åºæä½ï¼å¹¶å¸æå°å®ä»¬ä½ä¸ºç¬ç«çäºå¡è¿è¡æäº¤æåæ»ï¼é£ä¹ æä»¬éè¦èèè¿ä¸æ­¥ç»åéç½®äºå¡ä¼ æ­æ¹å¼ï¼ä¹å°±æ¯ @transactional æ³¨è§£ç propagation å±æ§ã\n\n/**\n * {@link propagation#requires_new} è¡¨ç¤ºæ§è¡å°è¿ä¸ªæ¹æ³æ¶éè¦å¼å¯æ°çäºå¡ï¼å¹¶æèµ·å½åäºå¡\n */\n@transactional(propagation = propagation.requires_new)\npublic void createsubuserwithexceptionright(userentity entity) {\n   log.info("createsubuserwithexceptionright start");\n   userrepository.save(entity);\n   throw new runtimeexception("invalid status");\n}\n\n\n\n# åèèµæ\n\n * spring å®ç½\n * spring å®æ¹ææ¡£\n * spring boot å®æ¹ææ¡£\n * ãjava ä¸å¡å¼åå¸¸è§éè¯¯ 100 ä¾ã',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring ä¹ JPA",frontmatter:{title:"Spring ä¹ JPA",date:"2019-02-18T14:33:55.000Z",order:4,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","JPA"],permalink:"/pages/a03d7b/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/04.Spring%E4%B9%8BJPA.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/04.Springä¹JPA.md",key:"v-44814011",path:"/pages/a03d7b/",headers:[{level:2,title:"å¿«éå¥é¨",slug:"å¿«éå¥é¨",normalizedTitle:"å¿«éå¥é¨",charIndex:97},{level:2,title:"å¸¸ç¨ JPA æ³¨è§£",slug:"å¸¸ç¨-jpa-æ³¨è§£",normalizedTitle:"å¸¸ç¨ jpa æ³¨è§£",charIndex:6402},{level:3,title:"å®ä½",slug:"å®ä½",normalizedTitle:"å®ä½",charIndex:1098},{level:4,title:"@Entity",slug:"entity",normalizedTitle:"@entity",charIndex:306},{level:4,title:"@MappedSuperclass",slug:"mappedsuperclass",normalizedTitle:"@mappedsuperclass",charIndex:6433},{level:4,title:"@Table",slug:"table",normalizedTitle:"@table",charIndex:6525},{level:3,title:"ä¸»é®",slug:"ä¸»é®",normalizedTitle:"ä¸»é®",charIndex:6593},{level:4,title:"@Id",slug:"id",normalizedTitle:"@id",charIndex:1357},{level:4,title:"@GeneratedValue",slug:"generatedvalue",normalizedTitle:"@generatedvalue",charIndex:1365},{level:3,title:"æ å°",slug:"æ å°",normalizedTitle:"æ å°",charIndex:25},{level:4,title:"@Column",slug:"column",normalizedTitle:"@column",charIndex:1439},{level:3,title:"å³ç³»",slug:"å³ç³»",normalizedTitle:"å³ç³»",charIndex:23},{level:4,title:"@OneToOne",slug:"onetoone",normalizedTitle:"@onetoone",charIndex:8020},{level:4,title:"@OneToMany",slug:"onetomany",normalizedTitle:"@onetomany",charIndex:8039},{level:2,title:"æ¥è¯¢",slug:"æ¥è¯¢",normalizedTitle:"æ¥è¯¢",charIndex:8291},{level:3,title:"æ¹æ³åå­æ¹å¼æ¥è¯¢æ¹å¼",slug:"æ¹æ³åå­æ¹å¼æ¥è¯¢æ¹å¼",normalizedTitle:"æ¹æ³åå­æ¹å¼æ¥è¯¢æ¹å¼",charIndex:8669},{level:3,title:"@Query æ³¨è§£æ¹å¼æ¥è¯¢",slug:"query-æ³¨è§£æ¹å¼æ¥è¯¢",normalizedTitle:"@query æ³¨è§£æ¹å¼æ¥è¯¢",charIndex:8319},{level:3,title:"å¨æ SQL æ¹å¼æ¥è¯¢",slug:"å¨æ-sql-æ¹å¼æ¥è¯¢",normalizedTitle:"å¨æ sql æ¹å¼æ¥è¯¢",charIndex:8337},{level:3,title:"Example æ¹å¼æ¥è¯¢",slug:"example-æ¹å¼æ¥è¯¢",normalizedTitle:"example æ¹å¼æ¥è¯¢",charIndex:8353},{level:3,title:"æåº Sort",slug:"æåº-sort",normalizedTitle:"æåº sort",charIndex:14731},{level:3,title:"åé¡µ Page å Pageable",slug:"åé¡µ-page-å-pageable",normalizedTitle:"åé¡µ page å pageable",charIndex:15353},{level:2,title:"æ ¸å¿ API",slug:"æ ¸å¿-api",normalizedTitle:"æ ¸å¿ api",charIndex:15938},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:15951}],headersStr:"å¿«éå¥é¨ å¸¸ç¨ JPA æ³¨è§£ å®ä½ @Entity @MappedSuperclass @Table ä¸»é® @Id @GeneratedValue æ å° @Column å³ç³» @OneToOne @OneToMany æ¥è¯¢ æ¹æ³åå­æ¹å¼æ¥è¯¢æ¹å¼ @Query æ³¨è§£æ¹å¼æ¥è¯¢ å¨æ SQL æ¹å¼æ¥è¯¢ Example æ¹å¼æ¥è¯¢ æåº Sort åé¡µ Page å Pageable æ ¸å¿ API åèèµæ",content:'# Spring ä¹ JPA\n\nJPA ä¸ºå¯¹è±¡å³ç³»æ å°æä¾äºä¸ç§åºäº POJO çæä¹åæ¨¡åã\n\n * ç®åæ°æ®æä¹åä»£ç çå¼å\n * ä¸º Java ç¤¾åºå±è½ä¸åæä¹å API çå·®å¼\n\n\n# å¿«éå¥é¨\n\nï¼1ï¼å¨ pom.xml ä¸­å¼å¥ä¾èµ\n\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-jpa</artifactId>\n</dependency>\n\n\nï¼2ï¼è®¾ç½®å¯å¨æ³¨è§£\n\n// ãå¯éãæå®æ«æç Entity ç®å½ï¼å¦æä¸æå®ï¼ä¼æ«æå¨é¨ç®å½\n@EntityScan("io.github.dunwu.springboot.data.jpa")\n// ãå¯éãæå®æ«æç Repository ç®å½ï¼å¦æä¸æå®ï¼ä¼æ«æå¨é¨ç®å½\n@EnableJpaRepositories(basePackages = {"io.github.dunwu.springboot.data.jpa"})\n// ãå¯éãå¼å¯ JPA auditing è½åï¼å¯ä»¥èªå¨èµå¼ä¸äºå­æ®µï¼æ¯å¦åå»ºæ¶é´ãæåä¸æ¬¡ä¿®æ¹æ¶é´ç­ç­\n@EnableJpaAuditing\n@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n\n\nï¼3ï¼éç½®\n\n# æ°æ®åºè¿æ¥\nspring.datasource.url = jdbc:mysql://localhost:3306/spring_tutorial?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver\nspring.datasource.username = root\nspring.datasource.password = root\n# æ¯å¦æå° JPA SQL æ¥å¿\nspring.jpa.show-sql = true\n# HibernateçDDLç­ç¥\nspring.jpa.hibernate.ddl-auto = create-drop\n\n\nï¼4ï¼å®ä¹å®ä½\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.ToString;\n\nimport java.util.Objects;\nimport javax.persistence.*;\n\n@Entity\n@Data\n@ToString\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(unique = true)\n    private String name;\n\n    private Integer age;\n\n    private String address;\n\n    private String email;\n\n    public User(String name, Integer age, String address, String email) {\n        this.name = name;\n        this.age = age;\n        this.address = address;\n        this.email = email;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, name);\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) {\n            return true;\n        }\n\n        if (!(o instanceof User)) {\n            return false;\n        }\n\n        User user = (User) o;\n\n        if (id != null && id.equals(user.id)) {\n            return true;\n        }\n\n        return name.equals(user.name);\n    }\n\n}\n\n\nï¼5ï¼å®ä¹ Repository\n\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.data.rest.core.annotation.RepositoryRestResource;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.bind.annotation.PathVariable;\n\nimport java.util.List;\n\n@RepositoryRestResource(collectionResourceRel = "user", path = "user")\npublic interface UserRepository extends JpaRepository<User, Long> {\n\n    User findUserById(@PathVariable("id") Long id);\n\n    /**\n     * æ ¹æ®ç¨æ·åæ¥æ¾ç¨æ·\n     * <p>\n     * ç¤ºä¾ï¼http://localhost:8080/user/search/findByName?name=lisi\n     *\n     * @param name ç¨æ·å\n     * @return {@link User}\n     */\n    User findUserByName(@Param("name") String name);\n\n    /**\n     * æ ¹æ®é®ç®±æ¥æ¾ç¨æ·\n     * <p>\n     * ç¤ºä¾ï¼http://localhost:8080/user/search/findByEmail?email=xxx@163.com\n     *\n     * @param email é®ç®±\n     * @return {@link User}\n     */\n    @Query("from User u where u.email=:email")\n    List<User> findByEmail(@Param("email") String email);\n\n    /**\n     * æ ¹æ®ç¨æ·åå é¤ç¨æ·\n     *\n     * @param name ç¨æ·å\n     */\n    @Transactional(rollbackFor = Exception.class)\n    void deleteByName(@Param("name") String name);\n\n}\n\n\nï¼6ï¼æµè¯\n\n@Slf4j\n@SpringBootTest(classes = { DataJpaApplication.class })\npublic class DataJpaTests {\n\n    @Autowired\n    private UserRepository repository;\n\n    @BeforeEach\n    public void before() {\n        repository.deleteAll();\n    }\n\n    @Test\n    public void insert() {\n        User user = new User("å¼ ä¸", 18, "åäº¬", "user1@163.com");\n        repository.save(user);\n        Optional<User> optional = repository.findById(user.getId());\n        assertThat(optional).isNotNull();\n        assertThat(optional.isPresent()).isTrue();\n    }\n\n    @Test\n    public void batchInsert() {\n        List<User> users = new ArrayList<>();\n        users.add(new User("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new User("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        repository.saveAll(users);\n\n        long count = repository.count();\n        assertThat(count).isEqualTo(4);\n\n        List<User> list = repository.findAll();\n        assertThat(list).isNotEmpty().hasSize(4);\n        list.forEach(this::accept);\n    }\n\n    private void accept(User user) { log.info(user.toString()); }\n\n    @Test\n    public void delete() {\n        List<User> users = new ArrayList<>();\n        users.add(new User("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new User("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        repository.saveAll(users);\n\n        repository.deleteByName("å¼ ä¸");\n        assertThat(repository.findUserByName("å¼ ä¸")).isNull();\n\n        repository.deleteAll();\n        List<User> list = repository.findAll();\n        assertThat(list).isEmpty();\n    }\n\n    @Test\n    public void findAllInPage() {\n        List<User> users = new ArrayList<>();\n        users.add(new User("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new User("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new User("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        repository.saveAll(users);\n\n        PageRequest pageRequest = PageRequest.of(1, 2);\n        Page<User> page = repository.findAll(pageRequest);\n        assertThat(page).isNotNull();\n        assertThat(page.isEmpty()).isFalse();\n        assertThat(page.getTotalElements()).isEqualTo(4);\n        assertThat(page.getTotalPages()).isEqualTo(2);\n\n        List<User> list = page.get().collect(Collectors.toList());\n        System.out.println("user list: ");\n        list.forEach(System.out::println);\n    }\n\n    @Test\n    public void update() {\n        User oldUser = new User("å¼ ä¸", 18, "åäº¬", "user1@163.com");\n        oldUser.setName("å¼ ä¸ä¸°");\n        repository.save(oldUser);\n\n        User newUser = repository.findUserByName("å¼ ä¸ä¸°");\n        assertThat(newUser).isNotNull();\n    }\n\n}\n\n\n\n# å¸¸ç¨ JPA æ³¨è§£\n\n\n# å®ä½\n\n# @Entity\n\n# @MappedSuperclass\n\nå½å¤ä¸ªå®ä½æå±åçå±æ§å­æ®µï¼æ¯å¦è¯´ idï¼åå¯ä»¥æå®æç¼åºä¸ä¸ªç¶ç±»ï¼å¹¶ä¸å ä¸ @MappedSuperclassï¼åå®ä½åºç±»å°±å¯ä»¥ç»§æ¿äºã\n\n# @Table\n\nå½å®ä½ååè¡¨åä¸ä¸è´æ¶ï¼å¯ä»¥éè¿ @Table(name="CUSTOMERS") çå½¢å¼æ¥æç¡®æå®ä¸ä¸ªè¡¨åã\n\n\n# ä¸»é®\n\n# @Id\n\n@Id æ³¨è§£ç¨äºå£°æä¸ä¸ªå®ä½ç±»çå±æ§æ å°ä¸ºæ°æ®åºçä¸»é®ã\n\n# @GeneratedValue\n\n@GeneratedValue ç¨äºæ æ³¨ä¸»é®ççæç­ç¥ï¼éè¿ strategy å±æ§æå®ã\n\né»è®¤æåµä¸ï¼JPA èªå¨éæ©ä¸ä¸ªæéååºå±æ°æ®åºçä¸»é®çæç­ç¥ï¼SqlServer å¯¹åº identityï¼MySQL å¯¹åº auto incrementã\n\nå¨ javax.persistence.GenerationType ä¸­å®ä¹äºä»¥ä¸å ç§å¯ä¾éæ©çç­ç¥ï¼\n\npublic enum GenerationType {\n    TABLE,\n    SEQUENCE,\n    IDENTITY,\n    AUTO\n}\n\n\n * IDENTITYï¼éç¨æ°æ®åº ID èªå¢é¿çæ¹å¼æ¥èªå¢ä¸»é®å­æ®µï¼Oracle ä¸æ¯æè¿ç§æ¹å¼ï¼\n * AUTOï¼ JPA èªå¨éæ©åéçç­ç¥ï¼æ¯é»è®¤éé¡¹ï¼\n * SEQUENCEï¼éè¿åºåäº§çä¸»é®ï¼éè¿ @SequenceGenerator æ³¨è§£æå®åºååï¼MySql ä¸æ¯æè¿ç§æ¹å¼\n * TABLEï¼éè¿è¡¨äº§çä¸»é®ï¼æ¡æ¶åç±è¡¨æ¨¡æåºåäº§çä¸»é®ï¼ä½¿ç¨è¯¥ç­ç¥å¯ä»¥ä½¿åºç¨æ´æäºæ°æ®åºç§»æ¤ã\n\nä¹å°±æ¯å¦æä½ æ²¡ææå® strategy å±æ§ï¼é»è®¤ç­ç¥æ¯ AUTOï¼JPA ä¼æ ¹æ®ä½ ä½¿ç¨çæ°æ®åºæ¥èªå¨éæ©ç­ç¥ï¼æ¯å¦è¯´æä½¿ç¨çæ¯ mysql åï¼èªå¨çä¸»é®ç­ç¥å°±æ¯ IDENTITY ï¼auto incrementï¼ã\n\n\n# æ å°\n\n# @Column\n\nå½ä½ ç entity å±æ§ååæ°æ®åºä¸­çå­æ®µåä¸ä¸è´ï¼å¯ä»¥ä½¿ç¨ @Column æç¡®æå®ï¼å®ä¹å¯ä»¥è®¾ç½®ä¸äºå±æ§\n\n@Column(length = 10, nullable = false, unique = true)\n\n\n@Column(columnDefinition = "INT(3)")\nprivate int age;\n\n\n@Column æ¯æçåæ°ï¼\n\n * unique å±æ§è¡¨ç¤ºè¯¥å­æ®µæ¯å¦ä¸ºå¯ä¸æ è¯ï¼é»è®¤ä¸º falseãå¦æè¡¨ä¸­æä¸ä¸ªå­æ®µéè¦å¯ä¸æ è¯ï¼åæ¢å¯ä»¥ä½¿ç¨è¯¥æ è®°ï¼ä¹å¯ä»¥ä½¿ç¨ @Table æ è®°ä¸­ç @UniqueConstraintã\n * nullable å±æ§è¡¨ç¤ºè¯¥å­æ®µæ¯å¦å¯ä»¥ä¸º null å¼ï¼é»è®¤ä¸º trueã\n * insertable å±æ§è¡¨ç¤ºå¨ä½¿ç¨ INSERT æå¥æ°æ®æ¶ï¼æ¯å¦éè¦æå¥è¯¥å­æ®µçå¼ã\n * updatable å±æ§è¡¨ç¤ºå¨ä½¿ç¨ UPDATE æ´æ°æ°æ®æ¶ï¼æ¯å¦éè¦æ´æ°è¯¥å­æ®µçå¼ãinsertable å updatable å±æ§ä¸è¬å¤ç¨äºåªè¯»çå±æ§ï¼ä¾å¦ä¸»é®åå¤é®ç­ãè¿äºå­æ®µçå¼éå¸¸æ¯èªå¨çæçã\n * columnDefinition å±æ§è¡¨ç¤ºåå»ºè¡¨æ¶ï¼è¯¥å­æ®µåå»ºç SQL è¯­å¥ï¼ä¸è¬ç¨äºéè¿ Entity çæè¡¨å®ä¹æ¶ä½¿ç¨ã\n * table å±æ§è¡¨ç¤ºå½æ å°å¤ä¸ªè¡¨æ¶ï¼æå®è¡¨çè¡¨ä¸­çå­æ®µãé»è®¤å¼ä¸ºä¸»è¡¨çè¡¨åã\n * length å±æ§è¡¨ç¤ºå­æ®µçé¿åº¦ï¼å½å­æ®µçç±»åä¸º varchar æ¶ï¼è¯¥å±æ§æææï¼é»è®¤ä¸º 255 ä¸ªå­ç¬¦ã\n * precision å±æ§å scale å±æ§è¡¨ç¤ºç²¾åº¦ï¼å½å­æ®µç±»åä¸º double æ¶ï¼precision è¡¨ç¤ºæ°å¼çæ»é¿åº¦ï¼scale è¡¨ç¤ºå°æ°ç¹æå çä½æ°ã\n\n@JoinTable\n\n@JoinColumn\n\n\n# å³ç³»\n\nè¡¨å³ç³»æ å°ï¼ååæ å°ï¼\n\n * @OneToOneï¼ä¸å¯¹ä¸å³ç³»\n * @OneToManyï¼ä¸å¯¹å¤\n * @ManyToManyï¼ä¸æ¨èä½¿ç¨ï¼èæ¯éç¨ç¨ä¸­é´å¯¹è±¡ï¼æå¤å¯¹å¤ææä¸¤ä¸ªå¯¹å¤ä¸å³ç³»ï¼\n\nå­æ®µæ å°ï¼ååæ å°ï¼ï¼\n\n * @Embeddedã@Embeddable åµå¥å¼å³ç³»ï¼ååæ å°ï¼\n * @ElementCollection éåä¸å¯¹å¤å³ç³»ï¼ååæ å°ï¼\n\n# @OneToOne\n\n@OneToOne è¡¨ç¤ºä¸å¯¹ä¸å³ç³»\n\n# @OneToMany\n\n@OneToMany è¡¨ç¤ºä¸å¯¹å¤å³ç³»\n\n@ManyToOne\n\n@ManyToMany\n\nOrderBy\n\n\n# æ¥è¯¢\n\næ¥è¯¢æ¹å¼æï¼\n\n * æ¹æ³åå­æ¹å¼æ¥è¯¢\n\n * @Query æ³¨è§£æ¹å¼æ¥è¯¢\n\n * å¨æ SQL æ¹å¼æ¥è¯¢\n\n * Example æ¹å¼æ¥è¯¢\n\nJpaRepository æä¾äºå¦ä¸è¡¨æè¿°çåç½®æ¥è¯¢\n\n * List<T> findAll(); - è¿åææå®ä½\n * List<T> findAllById(Iterable<ID> var1); - è¿åæå® id çææå®ä½\n * T getOne(ID var1); - æ ¹æ® id è¿åå¯¹åºçå®ä½ï¼å¦ææªæ¾å°ï¼åè¿åç©ºã\n * List<T> findAll(Sort var1); - è¿åææå®ä½ï¼æç§æå®é¡ºåºè¿åã\n * Page<T> findAll(Pageable var1); - è¿åå®ä½åè¡¨ï¼å®ä½ç offset å limit éè¿ pageable æ¥æå®\n\n\n# æ¹æ³åå­æ¹å¼æ¥è¯¢æ¹å¼\n\nSpring Data éè¿æ¥è¯¢çæ¹æ³åååæ°åæ¥èªå¨æé ä¸ä¸ª JPA QQL æ¥è¯¢ã\n\npublic interface UserRepository extends JpaRepository<User, Integer> {\n    public User findByName(String name);\n}\n\n\næ¹æ³åååæ°åè¦éµå®ä¸å®çè§åï¼Spring Data JPA æè½èªå¨è½¬æ¢ä¸º JPQLï¼\n\n * æ¹æ³åéå¸¸åå«å¤ä¸ªå®ä½å±æ§ç¨äºæ¥è¯¢ï¼å±æ§ä¹é´å¯ä»¥ä½¿ç¨ AND å OR è¿æ¥ï¼ä¹æ¯æ BetweenãLessThanãGreaterThanãLikeï¼\n\n * æ¹æ³åå¯ä»¥ä»¥ findByãgetByãqueryBy å¼å¤´ï¼\n\n * æ¥è¯¢ç»æå¯ä»¥æåºï¼æ¹æ³ååå« OrderBy+å±æ§+ASCï¼DESCï¼ï¼\n\n * å¯ä»¥éè¿ TopãFirst æ¥éå®æ¥è¯¢çç»æéï¼\n\n * ä¸äºç¹æ®çåæ°å¯ä»¥åºç°å¨åæ°åè¡¨éï¼æ¯å¦ PageeableãSort\n\nç¤ºä¾ï¼\n\n// æ ¹æ®åå­æ¥è¯¢ï¼ä¸æç§åå­ååº\nList<Person> findByLastnameOrderByFirstnameAsc(String name);\n\n// æ ¹æ®åå­æ¥è¯¢ï¼ä¸ä½¿ç¨ç¿»é¡µæ¥è¯¢\nPage<User> findByLastname(String lastname, Pageable pageable);\n\n// æ¥è¯¢æ»¡è¶³æ¡ä»¶çå10ä¸ªç¨æ·\nList<User> findFirst10ByLastname(String lastname, Sort sort);\n\n// ä½¿ç¨Andèåæ¥è¯¢\nList<Person> findByFirstnameAndLastname(String firstname, String lastname);\n\n// ä½¿ç¨Oræ¥è¯¢\nList<Person> findDistinctPeopleByLastnameOrFirstname(String lastname, String firstname);\n\n// ä½¿ç¨likeæ¥è¯¢ï¼name å¿é¡»åå«likeä¸­ç%æè?\npublic User findByNameLike(String name);\n\n\nKEYWORD             SAMPLE                                                    JPQL SNIPPET\nAnd                 findByLastnameAndFirstname                                â¦ where x.lastname = ?1 and x.firstname = ?2\nOr                  findByLastnameOrFirstname                                 â¦ where x.lastname = ?1 or x.firstname = ?2\nIs,Equals           findByFirstname,findByFirstnameIs,findByFirstnameEquals   â¦ where x.firstname = 1?\nBetween             findByStartDateBetween                                    â¦ where x.startDate between 1? and ?2\nLessThan            findByAgeLessThan                                         â¦ where x.age < ?1\nLessThanEqual       findByAgeLessThanEqual                                    â¦ where x.age <= ?1\nGreaterThan         findByAgeGreaterThan                                      â¦ where x.age > ?1\nGreaterThanEqual    findByAgeGreaterThanEqual                                 â¦ where x.age >= ?1\nAfter               findByStartDateAfter                                      â¦ where x.startDate > ?1\nBefore              findByStartDateBefore                                     â¦ where x.startDate < ?1\nIsNull              findByAgeIsNull                                           â¦ where x.age is null\nIsNotNull,NotNull   findByAge(Is)NotNull                                      â¦ where x.age not null\nLike                findByFirstnameLike                                       â¦ where x.firstname like ?1\nNotLike             findByFirstnameNotLike                                    â¦ where x.firstname not like ?1\nStartingWith        findByFirstnameStartingWith                               â¦ where x.firstname like ?1 (parameter bound with appended\n                                                                              %)\nEndingWith          findByFirstnameEndingWith                                 â¦ where x.firstname like ?1 (parameter bound with prepended\n                                                                              %)\nContaining          findByFirstnameContaining                                 â¦ where x.firstname like ?1 (parameter bound wrapped in %)\nOrderBy             findByAgeOrderByLastnameDesc                              â¦ where x.age = ?1 order by x.lastname desc\nNot                 findByLastnameNot                                         â¦ where x.lastname <> ?1\nIn                  findByAgeIn(Collection<Age> ages)                         â¦ where x.age in ?1\nNotIn               findByAgeNotIn(Collection<Age> age)                       â¦ where x.age not in ?1\nTrue                findByActiveTrue()                                        â¦ where x.active = true\nFalse               findByActiveFalse()                                       â¦ where x.active = false\nIgnoreCase          findByFirstnameIgnoreCase                                 â¦ where UPPER(x.firstame) = UPPER(?1)\n\n\n# @Query æ³¨è§£æ¹å¼æ¥è¯¢\n\næ³¨è§£ @Query åè®¸å¨æ¹æ³ä¸ä½¿ç¨ JPQLã\n\nå¶ä¸­æä½éå¯¹çæ¯å¯¹è±¡ååå¯¹è±¡å±æ§åï¼èéæ°æ®åºä¸­çè¡¨ååå­æ®µåã\n\n@Query("select u form User u where u.name=?1 and u.depantment.id=?2");\npublic User findUser(String name, Integer departmentId);\n\n\n@Query("form User u where u.name=?1 and u.depantment.id=?2");\npublic User findUser(String name, Integer departmentId);\n\n\nå¦æä½¿ç¨ SQL èä¸æ¯ JPSQLï¼å¯ä»¥ä½¿ç¨ nativeQuery å±æ§ï¼è®¾ç½®ä¸º trueã\n\n@Query(value="select * from user where name=?1 and department_id=?2", nativeQuery=true)\npublic User nativeQuery(String name, Integer departmentId);\n\n\næ è®º JPQLï¼è¿æ¯ SQLï¼é½æ¯æ"å½ååæ°"ï¼\n\n@Query(value="select * from user where name=:name and department_id=:departmentId", nativeQuery=true)\npublic User nativeQuery2(String name, Integer departmentId);\n\n\nå¦æ SQL æ´»ç JPQL æ¥è¯¢ç»æéå¹¶é Entityï¼å¯ä»¥ç¨ Object[] æ°ç»ä»£æ¿ï¼æ¯å¦åç»ç»è®¡æ¯ä¸ªé¨åçç¨æ·æ°\n\n@Query(value="select department_id,count(*) from user group by department_id", nativeQuery=true)\npublic List<Object[]> queryUserCount()\n\n\nè¿æ¡æ¥è¯¢å°è¿åæ°ç»ï¼å¯¹è±¡ç±»åä¾èµäºæ¥è¯¢ç»æï¼è¢«ç¤ºä¾ä¸­ï¼è¿åçæ¯ String å BigInteger ç±»å\n\næ¥è¯¢æ¶å¯ä»¥ä½¿ç¨ Pageable å Sort æ¥å®æç¿»é¡µåæåºã\n\n@Query("select u from User u where department.id=?1")\npublic Page<User> QueryUsers(Integer departmentId, Pageable page);\n\n\n@Query è¿åè®¸ SQL æ´æ°ãå é¤è¯­å¥ï¼æ­¤æ¶å¿é¡»æ­é @Modifying ä½¿ç¨ï¼æ¯å¦ï¼\n\n@Modifying\n@Query("update User u set u.name= ?1 where u.id= ?2")\nint updateName(String name, Integer id);\n\n\n\n# å¨æ SQL æ¹å¼æ¥è¯¢\n\nå¯åèï¼SpringDataJpa ä¸­çå¤ææ¥è¯¢åå¨ææ¥è¯¢ï¼å¤è¡¨æ¥è¯¢\n\n\n# Example æ¹å¼æ¥è¯¢\n\nåè®¸æ ¹æ®å®ä½åå»ºä¸ä¸ª Example å¯¹è±¡ï¼Spring Data éè¿ Example å¯¹è±¡æ¥æé  JPQLãä½æ¯ä½¿ç¨ä¸çµæ´»æ¡ä»¶æ¯ AND,ä¸è½ä½¿ç¨ orï¼æ¶é´çå¤§äºå°äºï¼between ç­ã\n\nç»§æ¿ JpaRepository\n\n<S extends T> List<S> findAll(Example<S> var1);\n<S extends T> List<S> findAll(Example<S> var1, Sort var2);\n\n\npublic List<User> getByExample(String name) {\n    Department dept = new Department();\n    dept.setId(1);\n\n    User user = new User();\n    user.setName(name);\n    user.setDepartment(dept);\n    Example<User> example = Example.of(user);\n    List<User> list = userDao.findAll(example);\n    return list\n}\n\n\nä»¥ä¸ä»£ç é¦ååå»ºäº User å¯¹è±¡ï¼è®¾ç½® æ¥è¯¢æ¡ä»¶ï¼åç§°ä¸ºåæ° nameï¼é¨é¨ id ä¸º 1ï¼éè¿ Example.of æé äºæ­¤æ¥è¯¢ã\n\nå¤§é¨åæ¥è¯¢å¹¶éå®å¨å¹éæ¥è¯¢ï¼ExampleMatcher æä¾äºæ´å¤çæ¡ä»¶æå®.æ¯å¦ä»¥ xxx å¼å¤´çææç¨æ·ï¼åå¯ä»¥ä½¿ç¨ä»¥ä¸ä»£ç æé \n\nExampleMatcher matcher = ExampleMatcher.matching().withMatcher("xxx",\n    GenericPropertyMatchers.startsWith().ignoreCase());\nExample<User> example = Example.of(user, matcher);\n\n\n\n# æåº Sort\n\nSort å¯¹è±¡ç¨æ¥æå®æåºï¼æç®åç Sort å¯¹è±¡æé å¯ä»¥ä¼ å¥ä¸ä¸ªå±æ§ååè¡¨ï¼ä¸æ¯æ°æ®åºååï¼æ¯å±æ§åï¼ãé»è®¤éç¨ååºæåºã\n\nSort sort = new Sort("id");\n//Sort sort = new Sort(Direction.DESC, "id");\nreturn userDao.findAll(sort);\n\n\nHibernate æ ¹æ® Sort æé äºæåºæ¡ä»¶ï¼Sort("id") è¡¨ç¤ºæç§ id éç¨é»è®¤ ååºè¿è¡æåº\n\nå¶ä» Sort çæé æ¹æ³è¿åæ¬ä»¥ä¸ä¸»è¦çä¸äºï¼\n\n * public Sort(String... properties)ï¼æç§æå®çå±æ§åè¡¨ååºæåºã\n * public Sort(Sort.Direction direction, String... properties)ï¼æç§æå®å±æ§åè¡¨æåºï¼æåºç± direction æå®ï¼direction æ¯ä¸ä¸ªæä¸¾ç±»åï¼æ Direction.ASC å Direction.DESCã\n * public Sort(Sort.Order... orders)ï¼å¯ä»¥éè¿ Order éææ¹æ³æ¥åå»º\n   * public static Sort.Order asc(String property)\n   * public static Sort.Order desc(String property)\n\n\n# åé¡µ Page å Pageable\n\nPageable æ¥å£ç¨äºæé ç¿»é¡µæ¥è¯¢ï¼PageRequest æ¯å¶å®ç°ç±»ï¼å¯ä»¥éè¿æä¾çå·¥åæ¹æ³åå»º PageRequestï¼\n\næ³¨ææè¿è¾¹ä½¿ç¨çæ¯ sring boot 2.0.2 ï¼jpa çæ¬æ¯ 2.0.8ï¼æ°çæ¬ä¸ä¹åçæ¬çæä½æ¹æ³ææä¸åã\n\n * public static PageRequest of(int page, int size)\n\n * public static PageRequest of(int page, int size, Sort sort) - ä¹å¯ä»¥å¨ PageRequest ä¸­å å¥æåº\n\n * public static PageRequest of(int page, int size, Direction direction, String... properties)ï¼æèèªå®ä¹æåºè§å\n\npage æ¯ä» 0 å¼å§ï¼è¡¨ç¤ºæ¥è¯¢é¡µï¼size ææ¯é¡µçææè¡æ°ã\n\nSpring Data ç¿»é¡µæ¥è¯¢æ»æ¯è¿å Page å¯¹è±¡ï¼Page å¯¹è±¡æä¾äºä»¥ä¸å¸¸ç¨çæ¹æ³\n\n * int getTotalPages();ï¼æ»çé¡µæ°\n * long getTotalElements(); - è¿åæ»æ°\n * List<T> getContent(); - è¿åæ­¤æ¬¡æ¥è¯¢çç»æé\n\n\n# æ ¸å¿ API\n\n\n\n\n# åèèµæ\n\n * Spring å®ç½\n * Spring Framework å®æ¹ææ¡£\n * Spring Boot å®æ¹ææ¡£',normalizedContent:'# spring ä¹ jpa\n\njpa ä¸ºå¯¹è±¡å³ç³»æ å°æä¾äºä¸ç§åºäº pojo çæä¹åæ¨¡åã\n\n * ç®åæ°æ®æä¹åä»£ç çå¼å\n * ä¸º java ç¤¾åºå±è½ä¸åæä¹å api çå·®å¼\n\n\n# å¿«éå¥é¨\n\nï¼1ï¼å¨ pom.xml ä¸­å¼å¥ä¾èµ\n\n<dependency>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-data-jpa</artifactid>\n</dependency>\n\n\nï¼2ï¼è®¾ç½®å¯å¨æ³¨è§£\n\n// ãå¯éãæå®æ«æç entity ç®å½ï¼å¦æä¸æå®ï¼ä¼æ«æå¨é¨ç®å½\n@entityscan("io.github.dunwu.springboot.data.jpa")\n// ãå¯éãæå®æ«æç repository ç®å½ï¼å¦æä¸æå®ï¼ä¼æ«æå¨é¨ç®å½\n@enablejparepositories(basepackages = {"io.github.dunwu.springboot.data.jpa"})\n// ãå¯éãå¼å¯ jpa auditing è½åï¼å¯ä»¥èªå¨èµå¼ä¸äºå­æ®µï¼æ¯å¦åå»ºæ¶é´ãæåä¸æ¬¡ä¿®æ¹æ¶é´ç­ç­\n@enablejpaauditing\n@springbootapplication\npublic class application {\n    public static void main(string[] args) {\n        springapplication.run(application.class, args);\n    }\n}\n\n\nï¼3ï¼éç½®\n\n# æ°æ®åºè¿æ¥\nspring.datasource.url = jdbc:mysql://localhost:3306/spring_tutorial?servertimezone=utc&useunicode=true&characterencoding=utf8\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.driver\nspring.datasource.username = root\nspring.datasource.password = root\n# æ¯å¦æå° jpa sql æ¥å¿\nspring.jpa.show-sql = true\n# hibernateçddlç­ç¥\nspring.jpa.hibernate.ddl-auto = create-drop\n\n\nï¼4ï¼å®ä¹å®ä½\n\nimport lombok.allargsconstructor;\nimport lombok.data;\nimport lombok.noargsconstructor;\nimport lombok.tostring;\n\nimport java.util.objects;\nimport javax.persistence.*;\n\n@entity\n@data\n@tostring\n@noargsconstructor\n@allargsconstructor\npublic class user {\n\n    @id\n    @generatedvalue(strategy = generationtype.auto)\n    private long id;\n\n    @column(unique = true)\n    private string name;\n\n    private integer age;\n\n    private string address;\n\n    private string email;\n\n    public user(string name, integer age, string address, string email) {\n        this.name = name;\n        this.age = age;\n        this.address = address;\n        this.email = email;\n    }\n\n    @override\n    public int hashcode() {\n        return objects.hash(id, name);\n    }\n\n    @override\n    public boolean equals(object o) {\n        if (this == o) {\n            return true;\n        }\n\n        if (!(o instanceof user)) {\n            return false;\n        }\n\n        user user = (user) o;\n\n        if (id != null && id.equals(user.id)) {\n            return true;\n        }\n\n        return name.equals(user.name);\n    }\n\n}\n\n\nï¼5ï¼å®ä¹ repository\n\n\nimport org.springframework.data.jpa.repository.jparepository;\nimport org.springframework.data.jpa.repository.query;\nimport org.springframework.data.repository.query.param;\nimport org.springframework.data.rest.core.annotation.repositoryrestresource;\nimport org.springframework.transaction.annotation.transactional;\nimport org.springframework.web.bind.annotation.pathvariable;\n\nimport java.util.list;\n\n@repositoryrestresource(collectionresourcerel = "user", path = "user")\npublic interface userrepository extends jparepository<user, long> {\n\n    user finduserbyid(@pathvariable("id") long id);\n\n    /**\n     * æ ¹æ®ç¨æ·åæ¥æ¾ç¨æ·\n     * <p>\n     * ç¤ºä¾ï¼http://localhost:8080/user/search/findbyname?name=lisi\n     *\n     * @param name ç¨æ·å\n     * @return {@link user}\n     */\n    user finduserbyname(@param("name") string name);\n\n    /**\n     * æ ¹æ®é®ç®±æ¥æ¾ç¨æ·\n     * <p>\n     * ç¤ºä¾ï¼http://localhost:8080/user/search/findbyemail?email=xxx@163.com\n     *\n     * @param email é®ç®±\n     * @return {@link user}\n     */\n    @query("from user u where u.email=:email")\n    list<user> findbyemail(@param("email") string email);\n\n    /**\n     * æ ¹æ®ç¨æ·åå é¤ç¨æ·\n     *\n     * @param name ç¨æ·å\n     */\n    @transactional(rollbackfor = exception.class)\n    void deletebyname(@param("name") string name);\n\n}\n\n\nï¼6ï¼æµè¯\n\n@slf4j\n@springboottest(classes = { datajpaapplication.class })\npublic class datajpatests {\n\n    @autowired\n    private userrepository repository;\n\n    @beforeeach\n    public void before() {\n        repository.deleteall();\n    }\n\n    @test\n    public void insert() {\n        user user = new user("å¼ ä¸", 18, "åäº¬", "user1@163.com");\n        repository.save(user);\n        optional<user> optional = repository.findbyid(user.getid());\n        assertthat(optional).isnotnull();\n        assertthat(optional.ispresent()).istrue();\n    }\n\n    @test\n    public void batchinsert() {\n        list<user> users = new arraylist<>();\n        users.add(new user("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new user("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        repository.saveall(users);\n\n        long count = repository.count();\n        assertthat(count).isequalto(4);\n\n        list<user> list = repository.findall();\n        assertthat(list).isnotempty().hassize(4);\n        list.foreach(this::accept);\n    }\n\n    private void accept(user user) { log.info(user.tostring()); }\n\n    @test\n    public void delete() {\n        list<user> users = new arraylist<>();\n        users.add(new user("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new user("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        repository.saveall(users);\n\n        repository.deletebyname("å¼ ä¸");\n        assertthat(repository.finduserbyname("å¼ ä¸")).isnull();\n\n        repository.deleteall();\n        list<user> list = repository.findall();\n        assertthat(list).isempty();\n    }\n\n    @test\n    public void findallinpage() {\n        list<user> users = new arraylist<>();\n        users.add(new user("å¼ ä¸", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("æå", 19, "ä¸æµ·", "user1@163.com"));\n        users.add(new user("çäº", 18, "åäº¬", "user1@163.com"));\n        users.add(new user("èµµå­", 20, "æ­¦æ±", "user1@163.com"));\n        repository.saveall(users);\n\n        pagerequest pagerequest = pagerequest.of(1, 2);\n        page<user> page = repository.findall(pagerequest);\n        assertthat(page).isnotnull();\n        assertthat(page.isempty()).isfalse();\n        assertthat(page.gettotalelements()).isequalto(4);\n        assertthat(page.gettotalpages()).isequalto(2);\n\n        list<user> list = page.get().collect(collectors.tolist());\n        system.out.println("user list: ");\n        list.foreach(system.out::println);\n    }\n\n    @test\n    public void update() {\n        user olduser = new user("å¼ ä¸", 18, "åäº¬", "user1@163.com");\n        olduser.setname("å¼ ä¸ä¸°");\n        repository.save(olduser);\n\n        user newuser = repository.finduserbyname("å¼ ä¸ä¸°");\n        assertthat(newuser).isnotnull();\n    }\n\n}\n\n\n\n# å¸¸ç¨ jpa æ³¨è§£\n\n\n# å®ä½\n\n# @entity\n\n# @mappedsuperclass\n\nå½å¤ä¸ªå®ä½æå±åçå±æ§å­æ®µï¼æ¯å¦è¯´ idï¼åå¯ä»¥æå®æç¼åºä¸ä¸ªç¶ç±»ï¼å¹¶ä¸å ä¸ @mappedsuperclassï¼åå®ä½åºç±»å°±å¯ä»¥ç»§æ¿äºã\n\n# @table\n\nå½å®ä½ååè¡¨åä¸ä¸è´æ¶ï¼å¯ä»¥éè¿ @table(name="customers") çå½¢å¼æ¥æç¡®æå®ä¸ä¸ªè¡¨åã\n\n\n# ä¸»é®\n\n# @id\n\n@id æ³¨è§£ç¨äºå£°æä¸ä¸ªå®ä½ç±»çå±æ§æ å°ä¸ºæ°æ®åºçä¸»é®ã\n\n# @generatedvalue\n\n@generatedvalue ç¨äºæ æ³¨ä¸»é®ççæç­ç¥ï¼éè¿ strategy å±æ§æå®ã\n\né»è®¤æåµä¸ï¼jpa èªå¨éæ©ä¸ä¸ªæéååºå±æ°æ®åºçä¸»é®çæç­ç¥ï¼sqlserver å¯¹åº identityï¼mysql å¯¹åº auto incrementã\n\nå¨ javax.persistence.generationtype ä¸­å®ä¹äºä»¥ä¸å ç§å¯ä¾éæ©çç­ç¥ï¼\n\npublic enum generationtype {\n    table,\n    sequence,\n    identity,\n    auto\n}\n\n\n * identityï¼éç¨æ°æ®åº id èªå¢é¿çæ¹å¼æ¥èªå¢ä¸»é®å­æ®µï¼oracle ä¸æ¯æè¿ç§æ¹å¼ï¼\n * autoï¼ jpa èªå¨éæ©åéçç­ç¥ï¼æ¯é»è®¤éé¡¹ï¼\n * sequenceï¼éè¿åºåäº§çä¸»é®ï¼éè¿ @sequencegenerator æ³¨è§£æå®åºååï¼mysql ä¸æ¯æè¿ç§æ¹å¼\n * tableï¼éè¿è¡¨äº§çä¸»é®ï¼æ¡æ¶åç±è¡¨æ¨¡æåºåäº§çä¸»é®ï¼ä½¿ç¨è¯¥ç­ç¥å¯ä»¥ä½¿åºç¨æ´æäºæ°æ®åºç§»æ¤ã\n\nä¹å°±æ¯å¦æä½ æ²¡ææå® strategy å±æ§ï¼é»è®¤ç­ç¥æ¯ autoï¼jpa ä¼æ ¹æ®ä½ ä½¿ç¨çæ°æ®åºæ¥èªå¨éæ©ç­ç¥ï¼æ¯å¦è¯´æä½¿ç¨çæ¯ mysql åï¼èªå¨çä¸»é®ç­ç¥å°±æ¯ identity ï¼auto incrementï¼ã\n\n\n# æ å°\n\n# @column\n\nå½ä½ ç entity å±æ§ååæ°æ®åºä¸­çå­æ®µåä¸ä¸è´ï¼å¯ä»¥ä½¿ç¨ @column æç¡®æå®ï¼å®ä¹å¯ä»¥è®¾ç½®ä¸äºå±æ§\n\n@column(length = 10, nullable = false, unique = true)\n\n\n@column(columndefinition = "int(3)")\nprivate int age;\n\n\n@column æ¯æçåæ°ï¼\n\n * unique å±æ§è¡¨ç¤ºè¯¥å­æ®µæ¯å¦ä¸ºå¯ä¸æ è¯ï¼é»è®¤ä¸º falseãå¦æè¡¨ä¸­æä¸ä¸ªå­æ®µéè¦å¯ä¸æ è¯ï¼åæ¢å¯ä»¥ä½¿ç¨è¯¥æ è®°ï¼ä¹å¯ä»¥ä½¿ç¨ @table æ è®°ä¸­ç @uniqueconstraintã\n * nullable å±æ§è¡¨ç¤ºè¯¥å­æ®µæ¯å¦å¯ä»¥ä¸º null å¼ï¼é»è®¤ä¸º trueã\n * insertable å±æ§è¡¨ç¤ºå¨ä½¿ç¨ insert æå¥æ°æ®æ¶ï¼æ¯å¦éè¦æå¥è¯¥å­æ®µçå¼ã\n * updatable å±æ§è¡¨ç¤ºå¨ä½¿ç¨ update æ´æ°æ°æ®æ¶ï¼æ¯å¦éè¦æ´æ°è¯¥å­æ®µçå¼ãinsertable å updatable å±æ§ä¸è¬å¤ç¨äºåªè¯»çå±æ§ï¼ä¾å¦ä¸»é®åå¤é®ç­ãè¿äºå­æ®µçå¼éå¸¸æ¯èªå¨çæçã\n * columndefinition å±æ§è¡¨ç¤ºåå»ºè¡¨æ¶ï¼è¯¥å­æ®µåå»ºç sql è¯­å¥ï¼ä¸è¬ç¨äºéè¿ entity çæè¡¨å®ä¹æ¶ä½¿ç¨ã\n * table å±æ§è¡¨ç¤ºå½æ å°å¤ä¸ªè¡¨æ¶ï¼æå®è¡¨çè¡¨ä¸­çå­æ®µãé»è®¤å¼ä¸ºä¸»è¡¨çè¡¨åã\n * length å±æ§è¡¨ç¤ºå­æ®µçé¿åº¦ï¼å½å­æ®µçç±»åä¸º varchar æ¶ï¼è¯¥å±æ§æææï¼é»è®¤ä¸º 255 ä¸ªå­ç¬¦ã\n * precision å±æ§å scale å±æ§è¡¨ç¤ºç²¾åº¦ï¼å½å­æ®µç±»åä¸º double æ¶ï¼precision è¡¨ç¤ºæ°å¼çæ»é¿åº¦ï¼scale è¡¨ç¤ºå°æ°ç¹æå çä½æ°ã\n\n@jointable\n\n@joincolumn\n\n\n# å³ç³»\n\nè¡¨å³ç³»æ å°ï¼ååæ å°ï¼\n\n * @onetooneï¼ä¸å¯¹ä¸å³ç³»\n * @onetomanyï¼ä¸å¯¹å¤\n * @manytomanyï¼ä¸æ¨èä½¿ç¨ï¼èæ¯éç¨ç¨ä¸­é´å¯¹è±¡ï¼æå¤å¯¹å¤ææä¸¤ä¸ªå¯¹å¤ä¸å³ç³»ï¼\n\nå­æ®µæ å°ï¼ååæ å°ï¼ï¼\n\n * @embeddedã@embeddable åµå¥å¼å³ç³»ï¼ååæ å°ï¼\n * @elementcollection éåä¸å¯¹å¤å³ç³»ï¼ååæ å°ï¼\n\n# @onetoone\n\n@onetoone è¡¨ç¤ºä¸å¯¹ä¸å³ç³»\n\n# @onetomany\n\n@onetomany è¡¨ç¤ºä¸å¯¹å¤å³ç³»\n\n@manytoone\n\n@manytomany\n\norderby\n\n\n# æ¥è¯¢\n\næ¥è¯¢æ¹å¼æï¼\n\n * æ¹æ³åå­æ¹å¼æ¥è¯¢\n\n * @query æ³¨è§£æ¹å¼æ¥è¯¢\n\n * å¨æ sql æ¹å¼æ¥è¯¢\n\n * example æ¹å¼æ¥è¯¢\n\njparepository æä¾äºå¦ä¸è¡¨æè¿°çåç½®æ¥è¯¢\n\n * list<t> findall(); - è¿åææå®ä½\n * list<t> findallbyid(iterable<id> var1); - è¿åæå® id çææå®ä½\n * t getone(id var1); - æ ¹æ® id è¿åå¯¹åºçå®ä½ï¼å¦ææªæ¾å°ï¼åè¿åç©ºã\n * list<t> findall(sort var1); - è¿åææå®ä½ï¼æç§æå®é¡ºåºè¿åã\n * page<t> findall(pageable var1); - è¿åå®ä½åè¡¨ï¼å®ä½ç offset å limit éè¿ pageable æ¥æå®\n\n\n# æ¹æ³åå­æ¹å¼æ¥è¯¢æ¹å¼\n\nspring data éè¿æ¥è¯¢çæ¹æ³åååæ°åæ¥èªå¨æé ä¸ä¸ª jpa qql æ¥è¯¢ã\n\npublic interface userrepository extends jparepository<user, integer> {\n    public user findbyname(string name);\n}\n\n\næ¹æ³åååæ°åè¦éµå®ä¸å®çè§åï¼spring data jpa æè½èªå¨è½¬æ¢ä¸º jpqlï¼\n\n * æ¹æ³åéå¸¸åå«å¤ä¸ªå®ä½å±æ§ç¨äºæ¥è¯¢ï¼å±æ§ä¹é´å¯ä»¥ä½¿ç¨ and å or è¿æ¥ï¼ä¹æ¯æ betweenãlessthanãgreaterthanãlikeï¼\n\n * æ¹æ³åå¯ä»¥ä»¥ findbyãgetbyãqueryby å¼å¤´ï¼\n\n * æ¥è¯¢ç»æå¯ä»¥æåºï¼æ¹æ³ååå« orderby+å±æ§+ascï¼descï¼ï¼\n\n * å¯ä»¥éè¿ topãfirst æ¥éå®æ¥è¯¢çç»æéï¼\n\n * ä¸äºç¹æ®çåæ°å¯ä»¥åºç°å¨åæ°åè¡¨éï¼æ¯å¦ pageeableãsort\n\nç¤ºä¾ï¼\n\n// æ ¹æ®åå­æ¥è¯¢ï¼ä¸æç§åå­ååº\nlist<person> findbylastnameorderbyfirstnameasc(string name);\n\n// æ ¹æ®åå­æ¥è¯¢ï¼ä¸ä½¿ç¨ç¿»é¡µæ¥è¯¢\npage<user> findbylastname(string lastname, pageable pageable);\n\n// æ¥è¯¢æ»¡è¶³æ¡ä»¶çå10ä¸ªç¨æ·\nlist<user> findfirst10bylastname(string lastname, sort sort);\n\n// ä½¿ç¨andèåæ¥è¯¢\nlist<person> findbyfirstnameandlastname(string firstname, string lastname);\n\n// ä½¿ç¨oræ¥è¯¢\nlist<person> finddistinctpeoplebylastnameorfirstname(string lastname, string firstname);\n\n// ä½¿ç¨likeæ¥è¯¢ï¼name å¿é¡»åå«likeä¸­ç%æè?\npublic user findbynamelike(string name);\n\n\nkeyword             sample                                                    jpql snippet\nand                 findbylastnameandfirstname                                â¦ where x.lastname = ?1 and x.firstname = ?2\nor                  findbylastnameorfirstname                                 â¦ where x.lastname = ?1 or x.firstname = ?2\nis,equals           findbyfirstname,findbyfirstnameis,findbyfirstnameequals   â¦ where x.firstname = 1?\nbetween             findbystartdatebetween                                    â¦ where x.startdate between 1? and ?2\nlessthan            findbyagelessthan                                         â¦ where x.age < ?1\nlessthanequal       findbyagelessthanequal                                    â¦ where x.age <= ?1\ngreaterthan         findbyagegreaterthan                                      â¦ where x.age > ?1\ngreaterthanequal    findbyagegreaterthanequal                                 â¦ where x.age >= ?1\nafter               findbystartdateafter                                      â¦ where x.startdate > ?1\nbefore              findbystartdatebefore                                     â¦ where x.startdate < ?1\nisnull              findbyageisnull                                           â¦ where x.age is null\nisnotnull,notnull   findbyage(is)notnull                                      â¦ where x.age not null\nlike                findbyfirstnamelike                                       â¦ where x.firstname like ?1\nnotlike             findbyfirstnamenotlike                                    â¦ where x.firstname not like ?1\nstartingwith        findbyfirstnamestartingwith                               â¦ where x.firstname like ?1 (parameter bound with appended\n                                                                              %)\nendingwith          findbyfirstnameendingwith                                 â¦ where x.firstname like ?1 (parameter bound with prepended\n                                                                              %)\ncontaining          findbyfirstnamecontaining                                 â¦ where x.firstname like ?1 (parameter bound wrapped in %)\norderby             findbyageorderbylastnamedesc                              â¦ where x.age = ?1 order by x.lastname desc\nnot                 findbylastnamenot                                         â¦ where x.lastname <> ?1\nin                  findbyagein(collection<age> ages)                         â¦ where x.age in ?1\nnotin               findbyagenotin(collection<age> age)                       â¦ where x.age not in ?1\ntrue                findbyactivetrue()                                        â¦ where x.active = true\nfalse               findbyactivefalse()                                       â¦ where x.active = false\nignorecase          findbyfirstnameignorecase                                 â¦ where upper(x.firstame) = upper(?1)\n\n\n# @query æ³¨è§£æ¹å¼æ¥è¯¢\n\næ³¨è§£ @query åè®¸å¨æ¹æ³ä¸ä½¿ç¨ jpqlã\n\nå¶ä¸­æä½éå¯¹çæ¯å¯¹è±¡ååå¯¹è±¡å±æ§åï¼èéæ°æ®åºä¸­çè¡¨ååå­æ®µåã\n\n@query("select u form user u where u.name=?1 and u.depantment.id=?2");\npublic user finduser(string name, integer departmentid);\n\n\n@query("form user u where u.name=?1 and u.depantment.id=?2");\npublic user finduser(string name, integer departmentid);\n\n\nå¦æä½¿ç¨ sql èä¸æ¯ jpsqlï¼å¯ä»¥ä½¿ç¨ nativequery å±æ§ï¼è®¾ç½®ä¸º trueã\n\n@query(value="select * from user where name=?1 and department_id=?2", nativequery=true)\npublic user nativequery(string name, integer departmentid);\n\n\næ è®º jpqlï¼è¿æ¯ sqlï¼é½æ¯æ"å½ååæ°"ï¼\n\n@query(value="select * from user where name=:name and department_id=:departmentid", nativequery=true)\npublic user nativequery2(string name, integer departmentid);\n\n\nå¦æ sql æ´»ç jpql æ¥è¯¢ç»æéå¹¶é entityï¼å¯ä»¥ç¨ object[] æ°ç»ä»£æ¿ï¼æ¯å¦åç»ç»è®¡æ¯ä¸ªé¨åçç¨æ·æ°\n\n@query(value="select department_id,count(*) from user group by department_id", nativequery=true)\npublic list<object[]> queryusercount()\n\n\nè¿æ¡æ¥è¯¢å°è¿åæ°ç»ï¼å¯¹è±¡ç±»åä¾èµäºæ¥è¯¢ç»æï¼è¢«ç¤ºä¾ä¸­ï¼è¿åçæ¯ string å biginteger ç±»å\n\næ¥è¯¢æ¶å¯ä»¥ä½¿ç¨ pageable å sort æ¥å®æç¿»é¡µåæåºã\n\n@query("select u from user u where department.id=?1")\npublic page<user> queryusers(integer departmentid, pageable page);\n\n\n@query è¿åè®¸ sql æ´æ°ãå é¤è¯­å¥ï¼æ­¤æ¶å¿é¡»æ­é @modifying ä½¿ç¨ï¼æ¯å¦ï¼\n\n@modifying\n@query("update user u set u.name= ?1 where u.id= ?2")\nint updatename(string name, integer id);\n\n\n\n# å¨æ sql æ¹å¼æ¥è¯¢\n\nå¯åèï¼springdatajpa ä¸­çå¤ææ¥è¯¢åå¨ææ¥è¯¢ï¼å¤è¡¨æ¥è¯¢\n\n\n# example æ¹å¼æ¥è¯¢\n\nåè®¸æ ¹æ®å®ä½åå»ºä¸ä¸ª example å¯¹è±¡ï¼spring data éè¿ example å¯¹è±¡æ¥æé  jpqlãä½æ¯ä½¿ç¨ä¸çµæ´»æ¡ä»¶æ¯ and,ä¸è½ä½¿ç¨ orï¼æ¶é´çå¤§äºå°äºï¼between ç­ã\n\nç»§æ¿ jparepository\n\n<s extends t> list<s> findall(example<s> var1);\n<s extends t> list<s> findall(example<s> var1, sort var2);\n\n\npublic list<user> getbyexample(string name) {\n    department dept = new department();\n    dept.setid(1);\n\n    user user = new user();\n    user.setname(name);\n    user.setdepartment(dept);\n    example<user> example = example.of(user);\n    list<user> list = userdao.findall(example);\n    return list\n}\n\n\nä»¥ä¸ä»£ç é¦ååå»ºäº user å¯¹è±¡ï¼è®¾ç½® æ¥è¯¢æ¡ä»¶ï¼åç§°ä¸ºåæ° nameï¼é¨é¨ id ä¸º 1ï¼éè¿ example.of æé äºæ­¤æ¥è¯¢ã\n\nå¤§é¨åæ¥è¯¢å¹¶éå®å¨å¹éæ¥è¯¢ï¼examplematcher æä¾äºæ´å¤çæ¡ä»¶æå®.æ¯å¦ä»¥ xxx å¼å¤´çææç¨æ·ï¼åå¯ä»¥ä½¿ç¨ä»¥ä¸ä»£ç æé \n\nexamplematcher matcher = examplematcher.matching().withmatcher("xxx",\n    genericpropertymatchers.startswith().ignorecase());\nexample<user> example = example.of(user, matcher);\n\n\n\n# æåº sort\n\nsort å¯¹è±¡ç¨æ¥æå®æåºï¼æç®åç sort å¯¹è±¡æé å¯ä»¥ä¼ å¥ä¸ä¸ªå±æ§ååè¡¨ï¼ä¸æ¯æ°æ®åºååï¼æ¯å±æ§åï¼ãé»è®¤éç¨ååºæåºã\n\nsort sort = new sort("id");\n//sort sort = new sort(direction.desc, "id");\nreturn userdao.findall(sort);\n\n\nhibernate æ ¹æ® sort æé äºæåºæ¡ä»¶ï¼sort("id") è¡¨ç¤ºæç§ id éç¨é»è®¤ ååºè¿è¡æåº\n\nå¶ä» sort çæé æ¹æ³è¿åæ¬ä»¥ä¸ä¸»è¦çä¸äºï¼\n\n * public sort(string... properties)ï¼æç§æå®çå±æ§åè¡¨ååºæåºã\n * public sort(sort.direction direction, string... properties)ï¼æç§æå®å±æ§åè¡¨æåºï¼æåºç± direction æå®ï¼direction æ¯ä¸ä¸ªæä¸¾ç±»åï¼æ direction.asc å direction.descã\n * public sort(sort.order... orders)ï¼å¯ä»¥éè¿ order éææ¹æ³æ¥åå»º\n   * public static sort.order asc(string property)\n   * public static sort.order desc(string property)\n\n\n# åé¡µ page å pageable\n\npageable æ¥å£ç¨äºæé ç¿»é¡µæ¥è¯¢ï¼pagerequest æ¯å¶å®ç°ç±»ï¼å¯ä»¥éè¿æä¾çå·¥åæ¹æ³åå»º pagerequestï¼\n\næ³¨ææè¿è¾¹ä½¿ç¨çæ¯ sring boot 2.0.2 ï¼jpa çæ¬æ¯ 2.0.8ï¼æ°çæ¬ä¸ä¹åçæ¬çæä½æ¹æ³ææä¸åã\n\n * public static pagerequest of(int page, int size)\n\n * public static pagerequest of(int page, int size, sort sort) - ä¹å¯ä»¥å¨ pagerequest ä¸­å å¥æåº\n\n * public static pagerequest of(int page, int size, direction direction, string... properties)ï¼æèèªå®ä¹æåºè§å\n\npage æ¯ä» 0 å¼å§ï¼è¡¨ç¤ºæ¥è¯¢é¡µï¼size ææ¯é¡µçææè¡æ°ã\n\nspring data ç¿»é¡µæ¥è¯¢æ»æ¯è¿å page å¯¹è±¡ï¼page å¯¹è±¡æä¾äºä»¥ä¸å¸¸ç¨çæ¹æ³\n\n * int gettotalpages();ï¼æ»çé¡µæ°\n * long gettotalelements(); - è¿åæ»æ°\n * list<t> getcontent(); - è¿åæ­¤æ¬¡æ¥è¯¢çç»æé\n\n\n# æ ¸å¿ api\n\n\n\n\n# åèèµæ\n\n * spring å®ç½\n * spring framework å®æ¹ææ¡£\n * spring boot å®æ¹ææ¡£',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring éæ Mybatis",frontmatter:{title:"Spring éæ Mybatis",date:"2019-05-09T17:09:25.000Z",order:10,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","MyBatis","PageHelper","Mapper"],permalink:"/pages/88219e/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/10.Spring%E9%9B%86%E6%88%90Mybatis.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/10.SpringéæMybatis.md",key:"v-1eb14240",path:"/pages/88219e/",headers:[{level:2,title:"å¿«éå¥é¨",slug:"å¿«éå¥é¨",normalizedTitle:"å¿«éå¥é¨",charIndex:202},{level:3,title:"ä» XML ä¸­æå»º SqlSessionFactory",slug:"ä»-xml-ä¸­æå»º-sqlsessionfactory",normalizedTitle:"ä» xml ä¸­æå»º sqlsessionfactory",charIndex:438},{level:3,title:"ä¸ä½¿ç¨ XML æå»º SqlSessionFactory",slug:"ä¸ä½¿ç¨-xml-æå»º-sqlsessionfactory",normalizedTitle:"ä¸ä½¿ç¨ xml æå»º sqlsessionfactory",charIndex:2056},{level:3,title:"ä» SqlSessionFactory ä¸­è·å SqlSession",slug:"ä»-sqlsessionfactory-ä¸­è·å-sqlsession",normalizedTitle:"ä» sqlsessionfactory ä¸­è·å sqlsession",charIndex:2877},{level:3,title:"æ¢ç©¶å·²æ å°ç SQL è¯­å¥",slug:"æ¢ç©¶å·²æ å°ç-sql-è¯­å¥",normalizedTitle:"æ¢ç©¶å·²æ å°ç sql è¯­å¥",charIndex:3532},{level:3,title:"ä½ç¨åï¼Scopeï¼åçå½å¨æ",slug:"ä½ç¨å-scope-åçå½å¨æ",normalizedTitle:"ä½ç¨åï¼scopeï¼åçå½å¨æ",charIndex:5848},{level:4,title:"SqlSessionFactoryBuilder",slug:"sqlsessionfactorybuilder",normalizedTitle:"sqlsessionfactorybuilder",charIndex:541},{level:4,title:"SqlSessionFactory",slug:"sqlsessionfactory",normalizedTitle:"sqlsessionfactory",charIndex:448},{level:4,title:"SqlSession",slug:"sqlsession",normalizedTitle:"sqlsession",charIndex:448},{level:4,title:"æ å°å¨å®ä¾",slug:"æ å°å¨å®ä¾",normalizedTitle:"æ å°å¨å®ä¾",charIndex:7059},{level:2,title:"Mybatis æ©å±å·¥å·",slug:"mybatis-æ©å±å·¥å·",normalizedTitle:"mybatis æ©å±å·¥å·",charIndex:7471},{level:3,title:"Mybatis Plus",slug:"mybatis-plus",normalizedTitle:"mybatis plus",charIndex:7488},{level:3,title:"Mapper",slug:"mapper",normalizedTitle:"mapper",charIndex:1842},{level:3,title:"PageHelper",slug:"pagehelper",normalizedTitle:"pagehelper",charIndex:7793},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:7879}],headersStr:"å¿«éå¥é¨ ä» XML ä¸­æå»º SqlSessionFactory ä¸ä½¿ç¨ XML æå»º SqlSessionFactory ä» SqlSessionFactory ä¸­è·å SqlSession æ¢ç©¶å·²æ å°ç SQL è¯­å¥ ä½ç¨åï¼Scopeï¼åçå½å¨æ SqlSessionFactoryBuilder SqlSessionFactory SqlSession æ å°å¨å®ä¾ Mybatis æ©å±å·¥å· Mybatis Plus Mapper PageHelper åèèµæ",content:'# Spring éæ Mybatis\n\nMybatis å®ç½ æ¯ä¸æ¬¾æä¹å±æ¡æ¶ï¼å®æ¯æå®å¶å SQLãå­å¨è¿ç¨ä»¥åé«çº§æ å°ãMyBatis é¿åäºå ä¹ææç JDBC ä»£ç åæå¨è®¾ç½®åæ°ä»¥åè·åç»æéãMyBatis å¯ä»¥ä½¿ç¨ç®åç XML ææ³¨è§£æ¥éç½®åæ å°åçç±»åãæ¥å£å Java ç POJOï¼Plain Old Java Objectsï¼æ®éèå¼ Java å¯¹è±¡ï¼ä¸ºæ°æ®åºä¸­çè®°å½ã\n\n\n# å¿«éå¥é¨\n\nè¦ä½¿ç¨ MyBatisï¼ åªéå° mybatis-x.x.x.jar æä»¶ç½®äºç±»è·¯å¾ï¼classpathï¼ä¸­å³å¯ã\n\nå¦æä½¿ç¨ Maven æ¥æå»ºé¡¹ç®ï¼åéå°ä¸é¢çä¾èµä»£ç ç½®äº pom.xml æä»¶ä¸­ï¼\n\n<dependency>\n  <groupId>org.mybatis</groupId>\n  <artifactId>mybatis</artifactId>\n  <version>x.x.x</version>\n</dependency>\n\n\n\n# ä» XML ä¸­æå»º SqlSessionFactory\n\næ¯ä¸ªåºäº MyBatis çåºç¨é½æ¯ä»¥ä¸ä¸ª SqlSessionFactory çå®ä¾ä¸ºæ ¸å¿çãSqlSessionFactory çå®ä¾å¯ä»¥éè¿ SqlSessionFactoryBuilder è·å¾ãè SqlSessionFactoryBuilder åå¯ä»¥ä» XML éç½®æä»¶æä¸ä¸ªé¢åéç½®ç Configuration å®ä¾æ¥æå»ºåº SqlSessionFactory å®ä¾ã\n\nä» XML æä»¶ä¸­æå»º SqlSessionFactory çå®ä¾éå¸¸ç®åï¼å»ºè®®ä½¿ç¨ç±»è·¯å¾ä¸çèµæºæä»¶è¿è¡éç½®ã ä½ä¹å¯ä»¥ä½¿ç¨ä»»æçè¾å¥æµï¼InputStreamï¼å®ä¾ï¼æ¯å¦ç¨æä»¶è·¯å¾å­ç¬¦ä¸²æ file:// URL æé çè¾å¥æµãMyBatis åå«ä¸ä¸ªåå« Resources çå·¥å·ç±»ï¼å®åå«ä¸äºå®ç¨æ¹æ³ï¼ä½¿å¾ä»ç±»è·¯å¾æå¶å®ä½ç½®å è½½èµæºæä»¶æ´å å®¹æã\n\nString resource = "org/mybatis/example/mybatis-config.xml";\nInputStream inputStream = Resources.getResourceAsStream(resource);\nSqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);\n\n\nXML éç½®æä»¶ä¸­åå«äºå¯¹ MyBatis ç³»ç»çæ ¸å¿è®¾ç½®ï¼åæ¬è·åæ°æ®åºè¿æ¥å®ä¾çæ°æ®æºï¼DataSourceï¼ä»¥åå³å®äºå¡ä½ç¨ååæ§å¶æ¹å¼çäºå¡ç®¡çå¨ï¼TransactionManagerï¼ãåé¢ä¼åæ¢è®¨ XML éç½®æä»¶çè¯¦ç»åå®¹ï¼è¿éåç»åºä¸ä¸ªç®åçç¤ºä¾ï¼\n\n<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE configuration\n  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"\n  "https://mybatis.org/dtd/mybatis-3-config.dtd">\n<configuration>\n  <environments default="development">\n    <environment id="development">\n      <transactionManager type="JDBC"/>\n      <dataSource type="POOLED">\n        <property name="driver" value="${driver}"/>\n        <property name="url" value="${url}"/>\n        <property name="username" value="${username}"/>\n        <property name="password" value="${password}"/>\n      </dataSource>\n    </environment>\n  </environments>\n  <mappers>\n    <mapper resource="org/mybatis/example/BlogMapper.xml"/>\n  </mappers>\n</configuration>\n\n\nå½ç¶ï¼è¿æå¾å¤å¯ä»¥å¨ XML æä»¶ä¸­éç½®çéé¡¹ï¼ä¸é¢çç¤ºä¾ä»ç½åäºæå³é®çé¨åã æ³¨æ XML å¤´é¨çå£°æï¼å®ç¨æ¥éªè¯ XML ææ¡£çæ­£ç¡®æ§ãenvironment åç´ ä½ä¸­åå«äºäºå¡ç®¡çåè¿æ¥æ± çéç½®ãmappers åç´ ååå«äºä¸ç»æ å°å¨ï¼mapperï¼ï¼è¿äºæ å°å¨ç XML æ å°æä»¶åå«äº SQL ä»£ç åæ å°å®ä¹ä¿¡æ¯ã\n\n\n# ä¸ä½¿ç¨ XML æå»º SqlSessionFactory\n\nå¦æä½ æ´æ¿æç´æ¥ä» Java ä»£ç èä¸æ¯ XML æä»¶ä¸­åå»ºéç½®ï¼æèæ³è¦åå»ºä½ èªå·±çéç½®æå»ºå¨ï¼MyBatis ä¹æä¾äºå®æ´çéç½®ç±»ï¼æä¾äºææä¸ XML æä»¶ç­ä»·çéç½®é¡¹ã\n\nDataSource dataSource = BlogDataSourceFactory.getBlogDataSource();\nTransactionFactory transactionFactory = new JdbcTransactionFactory();\nEnvironment environment = new Environment("development", transactionFactory, dataSource);\nConfiguration configuration = new Configuration(environment);\nconfiguration.addMapper(BlogMapper.class);\nSqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(configuration);\n\n\næ³¨æè¯¥ä¾ä¸­ï¼configuration æ·»å äºä¸ä¸ªæ å°å¨ç±»ï¼mapper classï¼ãæ å°å¨ç±»æ¯ Java ç±»ï¼å®ä»¬åå« SQL æ å°æ³¨è§£ä»èé¿åä¾èµ XML æ å°æä»¶ãä¸è¿ï¼ç±äº Java æ³¨è§£çä¸äºéå¶ä»¥åæäº MyBatis æ å°çå¤ææ§ï¼è¦ä½¿ç¨å¤§å¤æ°é«çº§æ å°ï¼æ¯å¦ï¼åµå¥èåæ å°ï¼ï¼ä»ç¶éè¦ä½¿ç¨ XML æ å°æä»¶è¿è¡æ å°ãæé´äºæ­¤ï¼å¦æå­å¨ä¸ä¸ªåå XML æ å°æä»¶ï¼MyBatis ä¼èªå¨æ¥æ¾å¹¶å è½½å®ï¼å¨è¿ä¸ªä¾å­ä¸­ï¼åºäºç±»è·¯å¾å BlogMapper.class çç±»åï¼ä¼å è½½ BlogMapper.xmlï¼ãå·ä½ç»èç¨åè®¨è®ºã\n\n\n# ä» SqlSessionFactory ä¸­è·å SqlSession\n\næ¢ç¶æäº SqlSessionFactoryï¼é¡¾åæä¹ï¼æä»¬å¯ä»¥ä»ä¸­è·å¾ SqlSession çå®ä¾ãSqlSession æä¾äºå¨æ°æ®åºæ§è¡ SQL å½ä»¤æéçæææ¹æ³ãä½ å¯ä»¥éè¿ SqlSession å®ä¾æ¥ç´æ¥æ§è¡å·²æ å°ç SQL è¯­å¥ãä¾å¦ï¼\n\ntry (SqlSession session = sqlSessionFactory.openSession()) {\n  Blog blog = (Blog) session.selectOne("org.mybatis.example.BlogMapper.selectBlog", 101);\n}\n\n\nè¯ç¶ï¼è¿ç§æ¹å¼è½å¤æ­£å¸¸å·¥ä½ï¼å¯¹ä½¿ç¨æ§çæ¬ MyBatis çç¨æ·æ¥è¯´ä¹æ¯è¾çæãä½ç°å¨æäºä¸ç§æ´ç®æ´çæ¹å¼ââä½¿ç¨åæå®è¯­å¥çåæ°åè¿åå¼ç¸å¹éçæ¥å£ï¼æ¯å¦ BlogMapper.classï¼ï¼ç°å¨ä½ çä»£ç ä¸ä»æ´æ¸æ°ï¼æ´å ç±»åå®å¨ï¼è¿ä¸ç¨æå¿å¯è½åºéçå­ç¬¦ä¸²å­é¢å¼ä»¥åå¼ºå¶ç±»åè½¬æ¢ã\n\nä¾å¦ï¼\n\ntry (SqlSession session = sqlSessionFactory.openSession()) {\n  BlogMapper mapper = session.getMapper(BlogMapper.class);\n  Blog blog = mapper.selectBlog(101);\n}\n\n\nç°å¨æä»¬æ¥æ¢ç©¶ä¸ä¸è¿æ®µä»£ç ç©¶ç«åäºäºä»ä¹ã\n\n\n# æ¢ç©¶å·²æ å°ç SQL è¯­å¥\n\nç°å¨ä½ å¯è½å¾æ³ç¥é SqlSession å Mapper å°åºå·ä½æ§è¡äºäºä»ä¹æä½ï¼ä½ SQL è¯­å¥æ å°æ¯ä¸ªç¸å½å¹¿æ³çè¯é¢ï¼å¯è½ä¼å å»ææ¡£çå¤§é¨åç¯å¹ã ä½ä¸ºäºè®©ä½ è½å¤äºè§£ä¸ªå¤§æ¦ï¼è¿éåç»åºå ä¸ªä¾å­ã\n\nå¨ä¸é¢æå°çä¾å­ä¸­ï¼ä¸ä¸ªè¯­å¥æ¢å¯ä»¥éè¿ XML å®ä¹ï¼ä¹å¯ä»¥éè¿æ³¨è§£å®ä¹ãæä»¬åçç XML å®ä¹è¯­å¥çæ¹å¼ï¼äºå®ä¸ MyBatis æä¾çææç¹æ§é½å¯ä»¥å©ç¨åºäº XML çæ å°è¯­è¨æ¥å®ç°ï¼è¿ä½¿å¾ MyBatis å¨è¿å»çæ°å¹´é´å¾ä»¥æµè¡ãå¦æä½ ç¨è¿æ§çæ¬ç MyBatisï¼ä½ åºè¯¥å¯¹è¿ä¸ªæ¦å¿µæ¯è¾çæã ä½ç¸æ¯äºä¹åççæ¬ï¼æ°çæ¬æ¹è¿äºè®¸å¤ XML çéç½®ï¼åé¢æä»¬ä¼æå°è¿äºæ¹è¿ãè¿éç»åºä¸ä¸ªåºäº XML æ å°è¯­å¥çç¤ºä¾ï¼å®åºè¯¥å¯ä»¥æ»¡è¶³ä¸ä¸ªç¤ºä¾ä¸­ SqlSession çè°ç¨ã\n\n<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE mapper\n  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"\n  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">\n<mapper namespace="org.mybatis.example.BlogMapper">\n  <select id="selectBlog" resultType="Blog">\n    select * from Blog where id = #{id}\n  </select>\n</mapper>\n\n\nä¸ºäºè¿ä¸ªç®åçä¾å­ï¼æä»¬ä¼¼ä¹åäºä¸å°éç½®ï¼ä½å¶å®å¹¶ä¸å¤ãå¨ä¸ä¸ª XML æ å°æä»¶ä¸­ï¼å¯ä»¥å®ä¹æ æ°ä¸ªæ å°è¯­å¥ï¼è¿æ ·ä¸æ¥ï¼XML å¤´é¨åææ¡£ç±»åå£°æé¨åå°±æ¾å¾å¾®ä¸è¶³éäºãææ¡£çå¶å®é¨åå¾ç´ç½ï¼å®¹æçè§£ã å®å¨å½åç©ºé´ âorg.mybatis.example.BlogMapperâ ä¸­å®ä¹äºä¸ä¸ªåä¸º âselectBlogâ çæ å°è¯­å¥ï¼è¿æ ·ä½ å°±å¯ä»¥ç¨å¨éå®å âorg.mybatis.example.BlogMapper.selectBlogâ æ¥è°ç¨æ å°è¯­å¥äºï¼å°±åä¸é¢ä¾å­ä¸­é£æ ·ï¼\n\nBlog blog = (Blog) session.selectOne("org.mybatis.example.BlogMapper.selectBlog", 101);\n\n\nä½ å¯è½ä¼æ³¨æå°ï¼è¿ç§æ¹å¼åç¨å¨éå®åè°ç¨ Java å¯¹è±¡çæ¹æ³ç±»ä¼¼ãè¿æ ·ï¼è¯¥å½åå°±å¯ä»¥ç´æ¥æ å°å°å¨å½åç©ºé´ä¸­ååçæ å°å¨ç±»ï¼å¹¶å°å·²æ å°ç select è¯­å¥å¹éå°å¯¹åºåç§°ãåæ°åè¿åç±»åçæ¹æ³ãå æ­¤ä½ å°±å¯ä»¥åä¸é¢é£æ ·ï¼ä¸è´¹å¹ç°ä¹åå°å¨å¯¹åºçæ å°å¨æ¥å£è°ç¨æ¹æ³ï¼å°±åä¸é¢è¿æ ·ï¼\n\nBlogMapper mapper = session.getMapper(BlogMapper.class);\nBlog blog = mapper.selectBlog(101);\n\n\nç¬¬äºç§æ¹æ³æå¾å¤ä¼å¿ï¼é¦åå®ä¸ä¾èµäºå­ç¬¦ä¸²å­é¢å¼ï¼ä¼æ´å®å¨ä¸ç¹ï¼å¶æ¬¡ï¼å¦æä½ ç IDE æä»£ç è¡¥å¨åè½ï¼é£ä¹ä»£ç è¡¥å¨å¯ä»¥å¸®ä½ å¿«ééæ©å°æ å°å¥½ç SQL è¯­å¥ã\n\næç¤º å¯¹å½åç©ºé´çä¸ç¹è¡¥å\n\nå¨ä¹åçæ¬ç MyBatis ä¸­ï¼**å½åç©ºé´ï¼Namespacesï¼**çä½ç¨å¹¶ä¸å¤§ï¼æ¯å¯éçã ä½ç°å¨ï¼éçå½åç©ºé´è¶åéè¦ï¼ä½ å¿é¡»æå®å½åç©ºé´ã\n\nå½åç©ºé´çä½ç¨æä¸¤ä¸ªï¼ä¸ä¸ªæ¯å©ç¨æ´é¿çå¨éå®åæ¥å°ä¸åçè¯­å¥éç¦»å¼æ¥ï¼åæ¶ä¹å®ç°äºä½ ä¸é¢è§å°çæ¥å£ç»å®ãå°±ç®ä½ è§å¾ææ¶ç¨ä¸å°æ¥å£ç»å®ï¼ä½ ä¹åºè¯¥éµå¾ªè¿éçè§å®ï¼ä»¥é²åªå¤©ä½ æ¹åäºä¸»æã é¿è¿æ¥çï¼åªè¦å°å½åç©ºé´ç½®äºåéç Java åå½åç©ºé´ä¹ä¸­ï¼ä½ çä»£ç ä¼åå¾æ´å æ´æ´ï¼ä¹æå©äºä½ æ´æ¹ä¾¿å°ä½¿ç¨ MyBatisã\n\n**å½åè§£æï¼**ä¸ºäºåå°è¾å¥éï¼MyBatis å¯¹ææå·æåç§°çéç½®åç´ ï¼åæ¬è¯­å¥ï¼ç»ææ å°ï¼ç¼å­ç­ï¼ä½¿ç¨äºå¦ä¸çå½åè§£æè§åã\n\n * å¨éå®åï¼æ¯å¦ âcom.mypackage.MyMapper.selectAllThingsï¼å°è¢«ç´æ¥ç¨äºæ¥æ¾åä½¿ç¨ã\n * ç­åç§°ï¼æ¯å¦ âselectAllThingsâï¼å¦æå¨å±å¯ä¸ä¹å¯ä»¥ä½ä¸ºä¸ä¸ªåç¬çå¼ç¨ã å¦æä¸å¯ä¸ï¼æä¸¤ä¸ªæä¸¤ä¸ªä»¥ä¸çç¸ååç§°ï¼æ¯å¦ âcom.foo.selectAllThingsâ å âcom.bar.selectAllThingsâï¼ï¼é£ä¹ä½¿ç¨æ¶å°±ä¼äº§çâç­åç§°ä¸å¯ä¸âçéè¯¯ï¼è¿ç§æåµä¸å°±å¿é¡»ä½¿ç¨å¨éå®åã\n\nå¯¹äºå BlogMapper è¿æ ·çæ å°å¨ç±»æ¥è¯´ï¼è¿æå¦ä¸ç§æ¹æ³æ¥å®æè¯­å¥æ å°ã å®ä»¬æ å°çè¯­å¥å¯ä»¥ä¸ç¨ XML æ¥éç½®ï¼èå¯ä»¥ä½¿ç¨ Java æ³¨è§£æ¥éç½®ãæ¯å¦ï¼ä¸é¢ç XML ç¤ºä¾å¯ä»¥è¢«æ¿æ¢æå¦ä¸çéç½®ï¼\n\npackage org.mybatis.example;\npublic interface BlogMapper {\n  @Select("SELECT * FROM blog WHERE id = #{id}")\n  Blog selectBlog(int id);\n}\n\n\nä½¿ç¨æ³¨è§£æ¥æ å°ç®åè¯­å¥ä¼ä½¿ä»£ç æ¾å¾æ´å ç®æ´ï¼ä½å¯¹äºç¨å¾®å¤æä¸ç¹çè¯­å¥ï¼Java æ³¨è§£ä¸ä»åä¸ä»å¿ï¼è¿ä¼è®©æ¬å°±å¤æç SQL è¯­å¥æ´å æ··ä¹±ä¸å ªã å æ­¤ï¼å¦æä½ éè¦åä¸äºå¾å¤æçæä½ï¼æå¥½ç¨ XML æ¥æ å°è¯­å¥ã\n\néæ©ä½ç§æ¹å¼æ¥éç½®æ å°ï¼ä»¥åæ¯å¦åºè¯¥è¦ç»ä¸æ å°è¯­å¥å®ä¹çå½¢å¼ï¼å®å¨åå³äºä½ åä½ çå¢éã æ¢å¥è¯è¯´ï¼æ°¸è¿ä¸è¦ææ³¥äºä¸ç§æ¹å¼ï¼ä½ å¯ä»¥å¾è½»æ¾å°å¨åºäºæ³¨è§£å XML çè¯­å¥æ å°æ¹å¼é´èªç±ç§»æ¤ååæ¢ã\n\n\n# ä½ç¨åï¼Scopeï¼åçå½å¨æ\n\nçè§£æä»¬ä¹åè®¨è®ºè¿çä¸åä½ç¨ååçå½å¨æç±»å«æ¯è³å³éè¦çï¼å ä¸ºéè¯¯çä½¿ç¨ä¼å¯¼è´éå¸¸ä¸¥éçå¹¶åé®é¢ã\n\næç¤º å¯¹è±¡çå½å¨æåä¾èµæ³¨å¥æ¡æ¶\n\nä¾èµæ³¨å¥æ¡æ¶å¯ä»¥åå»ºçº¿ç¨å®å¨çãåºäºäºå¡ç SqlSession åæ å°å¨ï¼å¹¶å°å®ä»¬ç´æ¥æ³¨å¥å°ä½ ç bean ä¸­ï¼å æ­¤å¯ä»¥ç´æ¥å¿½ç¥å®ä»¬ççå½å¨æã å¦æå¯¹å¦ä½éè¿ä¾èµæ³¨å¥æ¡æ¶ä½¿ç¨ MyBatis æå´è¶£ï¼å¯ä»¥ç ç©¶ä¸ä¸ MyBatis-Spring æ MyBatis-Guice ä¸¤ä¸ªå­é¡¹ç®ã\n\n# SqlSessionFactoryBuilder\n\nè¿ä¸ªç±»å¯ä»¥è¢«å®ä¾åãä½¿ç¨åä¸¢å¼ï¼ä¸æ¦åå»ºäº SqlSessionFactoryï¼å°±ä¸åéè¦å®äºã å æ­¤ SqlSessionFactoryBuilder å®ä¾çæä½³ä½ç¨åæ¯æ¹æ³ä½ç¨åï¼ä¹å°±æ¯å±é¨æ¹æ³åéï¼ã ä½ å¯ä»¥éç¨ SqlSessionFactoryBuilder æ¥åå»ºå¤ä¸ª SqlSessionFactory å®ä¾ï¼ä½æå¥½è¿æ¯ä¸è¦ä¸ç´ä¿ççå®ï¼ä»¥ä¿è¯ææç XML è§£æèµæºå¯ä»¥è¢«éæ¾ç»æ´éè¦çäºæã\n\n# SqlSessionFactory\n\nSqlSessionFactory ä¸æ¦è¢«åå»ºå°±åºè¯¥å¨åºç¨çè¿è¡æé´ä¸ç´å­å¨ï¼æ²¡æä»»ä½çç±ä¸¢å¼å®æéæ°åå»ºå¦ä¸ä¸ªå®ä¾ã ä½¿ç¨ SqlSessionFactory çæä½³å®è·µæ¯å¨åºç¨è¿è¡æé´ä¸è¦éå¤åå»ºå¤æ¬¡ï¼å¤æ¬¡éå»º SqlSessionFactory è¢«è§ä¸ºä¸ç§ä»£ç âåä¹ æ¯âãå æ­¤ SqlSessionFactory çæä½³ä½ç¨åæ¯åºç¨ä½ç¨åã æå¾å¤æ¹æ³å¯ä»¥åå°ï¼æç®åçå°±æ¯ä½¿ç¨åä¾æ¨¡å¼æèéæåä¾æ¨¡å¼ã\n\n# SqlSession\n\næ¯ä¸ªçº¿ç¨é½åºè¯¥æå®èªå·±ç SqlSession å®ä¾ãSqlSession çå®ä¾ä¸æ¯çº¿ç¨å®å¨çï¼å æ­¤æ¯ä¸è½è¢«å±äº«çï¼æä»¥å®çæä½³çä½ç¨åæ¯è¯·æ±ææ¹æ³ä½ç¨åã ç»å¯¹ä¸è½å° SqlSession å®ä¾çå¼ç¨æ¾å¨ä¸ä¸ªç±»çéæåï¼çè³ä¸ä¸ªç±»çå®ä¾åéä¹ä¸è¡ã ä¹ç»ä¸è½å° SqlSession å®ä¾çå¼ç¨æ¾å¨ä»»ä½ç±»åçæç®¡ä½ç¨åä¸­ï¼æ¯å¦ Servlet æ¡æ¶ä¸­ç HttpSessionã å¦æä½ ç°å¨æ­£å¨ä½¿ç¨ä¸ç§ Web æ¡æ¶ï¼èèå° SqlSession æ¾å¨ä¸ä¸ªå HTTP è¯·æ±ç¸ä¼¼çä½ç¨åä¸­ã æ¢å¥è¯è¯´ï¼æ¯æ¬¡æ¶å° HTTP è¯·æ±ï¼å°±å¯ä»¥æå¼ä¸ä¸ª SqlSessionï¼è¿åä¸ä¸ªååºåï¼å°±å³é­å®ã è¿ä¸ªå³é­æä½å¾éè¦ï¼ä¸ºäºç¡®ä¿æ¯æ¬¡é½è½æ§è¡å³é­æä½ï¼ä½ åºè¯¥æè¿ä¸ªå³é­æä½æ¾å° finally åä¸­ã ä¸é¢çç¤ºä¾å°±æ¯ä¸ä¸ªç¡®ä¿ SqlSession å³é­çæ åæ¨¡å¼ï¼\n\ntry (SqlSession session = sqlSessionFactory.openSession()) {\n  // ä½ çåºç¨é»è¾ä»£ç \n}\n\n\nå¨ææä»£ç ä¸­é½éµå¾ªè¿ç§ä½¿ç¨æ¨¡å¼ï¼å¯ä»¥ä¿è¯æææ°æ®åºèµæºé½è½è¢«æ­£ç¡®å°å³é­ã\n\n# æ å°å¨å®ä¾\n\næ å°å¨æ¯ä¸äºç»å®æ å°è¯­å¥çæ¥å£ãæ å°å¨æ¥å£çå®ä¾æ¯ä» SqlSession ä¸­è·å¾çãè½ç¶ä»ææ¯å±é¢ä¸æ¥è®²ï¼ä»»ä½æ å°å¨å®ä¾çæå¤§ä½ç¨åä¸è¯·æ±å®ä»¬ç SqlSession ç¸åãä½æ¹æ³ä½ç¨åææ¯æ å°å¨å®ä¾çæåéçä½ç¨åã ä¹å°±æ¯è¯´ï¼æ å°å¨å®ä¾åºè¯¥å¨è°ç¨å®ä»¬çæ¹æ³ä¸­è¢«è·åï¼ä½¿ç¨å®æ¯ä¹åå³å¯ä¸¢å¼ã æ å°å¨å®ä¾å¹¶ä¸éè¦è¢«æ¾å¼å°å³é­ãå°½ç®¡å¨æ´ä¸ªè¯·æ±ä½ç¨åä¿çæ å°å¨å®ä¾ä¸ä¼æä»ä¹é®é¢ï¼ä½æ¯ä½ å¾å¿«ä¼åç°ï¼å¨è¿ä¸ªä½ç¨åä¸ç®¡çå¤ªå¤å SqlSession çèµæºä¼è®©ä½ å¿ä¸è¿æ¥ã å æ­¤ï¼æå¥½å°æ å°å¨æ¾å¨æ¹æ³ä½ç¨ååãå°±åä¸é¢çä¾å­ä¸æ ·ï¼\n\ntry (SqlSession session = sqlSessionFactory.openSession()) {\n  BlogMapper mapper = session.getMapper(BlogMapper.class);\n  // ä½ çåºç¨é»è¾ä»£ç \n}\n\n\n\n# Mybatis æ©å±å·¥å·\n\n\n# Mybatis Plus\n\nMyBatis-Plusï¼ç®ç§° MPï¼æ¯ä¸ä¸ª MyBatis çå¢å¼ºå·¥å·ï¼å¨ MyBatis çåºç¡ä¸åªåå¢å¼ºä¸åæ¹åï¼ä¸ºç®åå¼åãæé«æçèçã\n\nãéæç¤ºä¾ãspring-boot-data-mybatis-plus\n\n\n# Mapper\n\nMapper æ¯ä¸ä¸ª Mybatis CRUD æ©å±æä»¶ã\n\nMapper çåºæ¬åçæ¯å°å®ä½ç±»æ å°ä¸ºæ°æ®åºä¸­çè¡¨åå­æ®µä¿¡æ¯ï¼å æ­¤å®ä½ç±»éè¦éè¿æ³¨è§£éç½®åºæ¬çåæ°æ®ï¼éç½®å¥½å®ä½åï¼ åªéè¦åå»ºä¸ä¸ªç»§æ¿åºç¡æ¥å£ç Mapper æ¥å£å°±å¯ä»¥å¼å§ä½¿ç¨äºã\n\nãéæç¤ºä¾ãspring-boot-data-mybatis-mapper\n\n\n# PageHelper\n\nPageHelper æ¯ä¸ä¸ª Mybatis éç¨åé¡µæä»¶ã\n\nãéæç¤ºä¾ãspring-boot-data-mybatis-mapper\n\n\n# åèèµæ\n\n * å®æ¹\n   * Mybatis Github\n   * Mybatis å®ç½\n   * MyBatis å®æ¹ä»£ç çæï¼mybatis-generatorï¼\n   * MyBatis å®æ¹éæ Springï¼mybatis-springï¼\n   * Mybatis å®æ¹éæ Spring Bootï¼mybatis-spring-bootï¼\n * æ©å±æä»¶\n   * MyBatis-Plus - CRUD æ©å±æä»¶ãä»£ç çæå¨ãåé¡µå¨ç­å¤åè½\n   * Mapper - Mybatis CRUD æ©å±æä»¶\n   * PageHelper - Mybatis éç¨åé¡µæä»¶\n * æç« \n   * æ·±å¥çè§£ mybatis åç\n   * mybatis æºç ä¸­ææ³¨é\n   * MyBatis Generator è¯¦è§£\n   * Mybatis å¸¸è§é¢è¯é¢\n   * Mybatis ä¸­å¼ºå¤§ç resultMap',normalizedContent:'# spring éæ mybatis\n\nmybatis å®ç½ æ¯ä¸æ¬¾æä¹å±æ¡æ¶ï¼å®æ¯æå®å¶å sqlãå­å¨è¿ç¨ä»¥åé«çº§æ å°ãmybatis é¿åäºå ä¹ææç jdbc ä»£ç åæå¨è®¾ç½®åæ°ä»¥åè·åç»æéãmybatis å¯ä»¥ä½¿ç¨ç®åç xml ææ³¨è§£æ¥éç½®åæ å°åçç±»åãæ¥å£å java ç pojoï¼plain old java objectsï¼æ®éèå¼ java å¯¹è±¡ï¼ä¸ºæ°æ®åºä¸­çè®°å½ã\n\n\n# å¿«éå¥é¨\n\nè¦ä½¿ç¨ mybatisï¼ åªéå° mybatis-x.x.x.jar æä»¶ç½®äºç±»è·¯å¾ï¼classpathï¼ä¸­å³å¯ã\n\nå¦æä½¿ç¨ maven æ¥æå»ºé¡¹ç®ï¼åéå°ä¸é¢çä¾èµä»£ç ç½®äº pom.xml æä»¶ä¸­ï¼\n\n<dependency>\n  <groupid>org.mybatis</groupid>\n  <artifactid>mybatis</artifactid>\n  <version>x.x.x</version>\n</dependency>\n\n\n\n# ä» xml ä¸­æå»º sqlsessionfactory\n\næ¯ä¸ªåºäº mybatis çåºç¨é½æ¯ä»¥ä¸ä¸ª sqlsessionfactory çå®ä¾ä¸ºæ ¸å¿çãsqlsessionfactory çå®ä¾å¯ä»¥éè¿ sqlsessionfactorybuilder è·å¾ãè sqlsessionfactorybuilder åå¯ä»¥ä» xml éç½®æä»¶æä¸ä¸ªé¢åéç½®ç configuration å®ä¾æ¥æå»ºåº sqlsessionfactory å®ä¾ã\n\nä» xml æä»¶ä¸­æå»º sqlsessionfactory çå®ä¾éå¸¸ç®åï¼å»ºè®®ä½¿ç¨ç±»è·¯å¾ä¸çèµæºæä»¶è¿è¡éç½®ã ä½ä¹å¯ä»¥ä½¿ç¨ä»»æçè¾å¥æµï¼inputstreamï¼å®ä¾ï¼æ¯å¦ç¨æä»¶è·¯å¾å­ç¬¦ä¸²æ file:// url æé çè¾å¥æµãmybatis åå«ä¸ä¸ªåå« resources çå·¥å·ç±»ï¼å®åå«ä¸äºå®ç¨æ¹æ³ï¼ä½¿å¾ä»ç±»è·¯å¾æå¶å®ä½ç½®å è½½èµæºæä»¶æ´å å®¹æã\n\nstring resource = "org/mybatis/example/mybatis-config.xml";\ninputstream inputstream = resources.getresourceasstream(resource);\nsqlsessionfactory sqlsessionfactory = new sqlsessionfactorybuilder().build(inputstream);\n\n\nxml éç½®æä»¶ä¸­åå«äºå¯¹ mybatis ç³»ç»çæ ¸å¿è®¾ç½®ï¼åæ¬è·åæ°æ®åºè¿æ¥å®ä¾çæ°æ®æºï¼datasourceï¼ä»¥åå³å®äºå¡ä½ç¨ååæ§å¶æ¹å¼çäºå¡ç®¡çå¨ï¼transactionmanagerï¼ãåé¢ä¼åæ¢è®¨ xml éç½®æä»¶çè¯¦ç»åå®¹ï¼è¿éåç»åºä¸ä¸ªç®åçç¤ºä¾ï¼\n\n<?xml version="1.0" encoding="utf-8" ?>\n<!doctype configuration\n  public "-//mybatis.org//dtd config 3.0//en"\n  "https://mybatis.org/dtd/mybatis-3-config.dtd">\n<configuration>\n  <environments default="development">\n    <environment id="development">\n      <transactionmanager type="jdbc"/>\n      <datasource type="pooled">\n        <property name="driver" value="${driver}"/>\n        <property name="url" value="${url}"/>\n        <property name="username" value="${username}"/>\n        <property name="password" value="${password}"/>\n      </datasource>\n    </environment>\n  </environments>\n  <mappers>\n    <mapper resource="org/mybatis/example/blogmapper.xml"/>\n  </mappers>\n</configuration>\n\n\nå½ç¶ï¼è¿æå¾å¤å¯ä»¥å¨ xml æä»¶ä¸­éç½®çéé¡¹ï¼ä¸é¢çç¤ºä¾ä»ç½åäºæå³é®çé¨åã æ³¨æ xml å¤´é¨çå£°æï¼å®ç¨æ¥éªè¯ xml ææ¡£çæ­£ç¡®æ§ãenvironment åç´ ä½ä¸­åå«äºäºå¡ç®¡çåè¿æ¥æ± çéç½®ãmappers åç´ ååå«äºä¸ç»æ å°å¨ï¼mapperï¼ï¼è¿äºæ å°å¨ç xml æ å°æä»¶åå«äº sql ä»£ç åæ å°å®ä¹ä¿¡æ¯ã\n\n\n# ä¸ä½¿ç¨ xml æå»º sqlsessionfactory\n\nå¦æä½ æ´æ¿æç´æ¥ä» java ä»£ç èä¸æ¯ xml æä»¶ä¸­åå»ºéç½®ï¼æèæ³è¦åå»ºä½ èªå·±çéç½®æå»ºå¨ï¼mybatis ä¹æä¾äºå®æ´çéç½®ç±»ï¼æä¾äºææä¸ xml æä»¶ç­ä»·çéç½®é¡¹ã\n\ndatasource datasource = blogdatasourcefactory.getblogdatasource();\ntransactionfactory transactionfactory = new jdbctransactionfactory();\nenvironment environment = new environment("development", transactionfactory, datasource);\nconfiguration configuration = new configuration(environment);\nconfiguration.addmapper(blogmapper.class);\nsqlsessionfactory sqlsessionfactory = new sqlsessionfactorybuilder().build(configuration);\n\n\næ³¨æè¯¥ä¾ä¸­ï¼configuration æ·»å äºä¸ä¸ªæ å°å¨ç±»ï¼mapper classï¼ãæ å°å¨ç±»æ¯ java ç±»ï¼å®ä»¬åå« sql æ å°æ³¨è§£ä»èé¿åä¾èµ xml æ å°æä»¶ãä¸è¿ï¼ç±äº java æ³¨è§£çä¸äºéå¶ä»¥åæäº mybatis æ å°çå¤ææ§ï¼è¦ä½¿ç¨å¤§å¤æ°é«çº§æ å°ï¼æ¯å¦ï¼åµå¥èåæ å°ï¼ï¼ä»ç¶éè¦ä½¿ç¨ xml æ å°æä»¶è¿è¡æ å°ãæé´äºæ­¤ï¼å¦æå­å¨ä¸ä¸ªåå xml æ å°æä»¶ï¼mybatis ä¼èªå¨æ¥æ¾å¹¶å è½½å®ï¼å¨è¿ä¸ªä¾å­ä¸­ï¼åºäºç±»è·¯å¾å blogmapper.class çç±»åï¼ä¼å è½½ blogmapper.xmlï¼ãå·ä½ç»èç¨åè®¨è®ºã\n\n\n# ä» sqlsessionfactory ä¸­è·å sqlsession\n\næ¢ç¶æäº sqlsessionfactoryï¼é¡¾åæä¹ï¼æä»¬å¯ä»¥ä»ä¸­è·å¾ sqlsession çå®ä¾ãsqlsession æä¾äºå¨æ°æ®åºæ§è¡ sql å½ä»¤æéçæææ¹æ³ãä½ å¯ä»¥éè¿ sqlsession å®ä¾æ¥ç´æ¥æ§è¡å·²æ å°ç sql è¯­å¥ãä¾å¦ï¼\n\ntry (sqlsession session = sqlsessionfactory.opensession()) {\n  blog blog = (blog) session.selectone("org.mybatis.example.blogmapper.selectblog", 101);\n}\n\n\nè¯ç¶ï¼è¿ç§æ¹å¼è½å¤æ­£å¸¸å·¥ä½ï¼å¯¹ä½¿ç¨æ§çæ¬ mybatis çç¨æ·æ¥è¯´ä¹æ¯è¾çæãä½ç°å¨æäºä¸ç§æ´ç®æ´çæ¹å¼ââä½¿ç¨åæå®è¯­å¥çåæ°åè¿åå¼ç¸å¹éçæ¥å£ï¼æ¯å¦ blogmapper.classï¼ï¼ç°å¨ä½ çä»£ç ä¸ä»æ´æ¸æ°ï¼æ´å ç±»åå®å¨ï¼è¿ä¸ç¨æå¿å¯è½åºéçå­ç¬¦ä¸²å­é¢å¼ä»¥åå¼ºå¶ç±»åè½¬æ¢ã\n\nä¾å¦ï¼\n\ntry (sqlsession session = sqlsessionfactory.opensession()) {\n  blogmapper mapper = session.getmapper(blogmapper.class);\n  blog blog = mapper.selectblog(101);\n}\n\n\nç°å¨æä»¬æ¥æ¢ç©¶ä¸ä¸è¿æ®µä»£ç ç©¶ç«åäºäºä»ä¹ã\n\n\n# æ¢ç©¶å·²æ å°ç sql è¯­å¥\n\nç°å¨ä½ å¯è½å¾æ³ç¥é sqlsession å mapper å°åºå·ä½æ§è¡äºäºä»ä¹æä½ï¼ä½ sql è¯­å¥æ å°æ¯ä¸ªç¸å½å¹¿æ³çè¯é¢ï¼å¯è½ä¼å å»ææ¡£çå¤§é¨åç¯å¹ã ä½ä¸ºäºè®©ä½ è½å¤äºè§£ä¸ªå¤§æ¦ï¼è¿éåç»åºå ä¸ªä¾å­ã\n\nå¨ä¸é¢æå°çä¾å­ä¸­ï¼ä¸ä¸ªè¯­å¥æ¢å¯ä»¥éè¿ xml å®ä¹ï¼ä¹å¯ä»¥éè¿æ³¨è§£å®ä¹ãæä»¬åçç xml å®ä¹è¯­å¥çæ¹å¼ï¼äºå®ä¸ mybatis æä¾çææç¹æ§é½å¯ä»¥å©ç¨åºäº xml çæ å°è¯­è¨æ¥å®ç°ï¼è¿ä½¿å¾ mybatis å¨è¿å»çæ°å¹´é´å¾ä»¥æµè¡ãå¦æä½ ç¨è¿æ§çæ¬ç mybatisï¼ä½ åºè¯¥å¯¹è¿ä¸ªæ¦å¿µæ¯è¾çæã ä½ç¸æ¯äºä¹åççæ¬ï¼æ°çæ¬æ¹è¿äºè®¸å¤ xml çéç½®ï¼åé¢æä»¬ä¼æå°è¿äºæ¹è¿ãè¿éç»åºä¸ä¸ªåºäº xml æ å°è¯­å¥çç¤ºä¾ï¼å®åºè¯¥å¯ä»¥æ»¡è¶³ä¸ä¸ªç¤ºä¾ä¸­ sqlsession çè°ç¨ã\n\n<?xml version="1.0" encoding="utf-8" ?>\n<!doctype mapper\n  public "-//mybatis.org//dtd mapper 3.0//en"\n  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">\n<mapper namespace="org.mybatis.example.blogmapper">\n  <select id="selectblog" resulttype="blog">\n    select * from blog where id = #{id}\n  </select>\n</mapper>\n\n\nä¸ºäºè¿ä¸ªç®åçä¾å­ï¼æä»¬ä¼¼ä¹åäºä¸å°éç½®ï¼ä½å¶å®å¹¶ä¸å¤ãå¨ä¸ä¸ª xml æ å°æä»¶ä¸­ï¼å¯ä»¥å®ä¹æ æ°ä¸ªæ å°è¯­å¥ï¼è¿æ ·ä¸æ¥ï¼xml å¤´é¨åææ¡£ç±»åå£°æé¨åå°±æ¾å¾å¾®ä¸è¶³éäºãææ¡£çå¶å®é¨åå¾ç´ç½ï¼å®¹æçè§£ã å®å¨å½åç©ºé´ âorg.mybatis.example.blogmapperâ ä¸­å®ä¹äºä¸ä¸ªåä¸º âselectblogâ çæ å°è¯­å¥ï¼è¿æ ·ä½ å°±å¯ä»¥ç¨å¨éå®å âorg.mybatis.example.blogmapper.selectblogâ æ¥è°ç¨æ å°è¯­å¥äºï¼å°±åä¸é¢ä¾å­ä¸­é£æ ·ï¼\n\nblog blog = (blog) session.selectone("org.mybatis.example.blogmapper.selectblog", 101);\n\n\nä½ å¯è½ä¼æ³¨æå°ï¼è¿ç§æ¹å¼åç¨å¨éå®åè°ç¨ java å¯¹è±¡çæ¹æ³ç±»ä¼¼ãè¿æ ·ï¼è¯¥å½åå°±å¯ä»¥ç´æ¥æ å°å°å¨å½åç©ºé´ä¸­ååçæ å°å¨ç±»ï¼å¹¶å°å·²æ å°ç select è¯­å¥å¹éå°å¯¹åºåç§°ãåæ°åè¿åç±»åçæ¹æ³ãå æ­¤ä½ å°±å¯ä»¥åä¸é¢é£æ ·ï¼ä¸è´¹å¹ç°ä¹åå°å¨å¯¹åºçæ å°å¨æ¥å£è°ç¨æ¹æ³ï¼å°±åä¸é¢è¿æ ·ï¼\n\nblogmapper mapper = session.getmapper(blogmapper.class);\nblog blog = mapper.selectblog(101);\n\n\nç¬¬äºç§æ¹æ³æå¾å¤ä¼å¿ï¼é¦åå®ä¸ä¾èµäºå­ç¬¦ä¸²å­é¢å¼ï¼ä¼æ´å®å¨ä¸ç¹ï¼å¶æ¬¡ï¼å¦æä½ ç ide æä»£ç è¡¥å¨åè½ï¼é£ä¹ä»£ç è¡¥å¨å¯ä»¥å¸®ä½ å¿«ééæ©å°æ å°å¥½ç sql è¯­å¥ã\n\næç¤º å¯¹å½åç©ºé´çä¸ç¹è¡¥å\n\nå¨ä¹åçæ¬ç mybatis ä¸­ï¼**å½åç©ºé´ï¼namespacesï¼**çä½ç¨å¹¶ä¸å¤§ï¼æ¯å¯éçã ä½ç°å¨ï¼éçå½åç©ºé´è¶åéè¦ï¼ä½ å¿é¡»æå®å½åç©ºé´ã\n\nå½åç©ºé´çä½ç¨æä¸¤ä¸ªï¼ä¸ä¸ªæ¯å©ç¨æ´é¿çå¨éå®åæ¥å°ä¸åçè¯­å¥éç¦»å¼æ¥ï¼åæ¶ä¹å®ç°äºä½ ä¸é¢è§å°çæ¥å£ç»å®ãå°±ç®ä½ è§å¾ææ¶ç¨ä¸å°æ¥å£ç»å®ï¼ä½ ä¹åºè¯¥éµå¾ªè¿éçè§å®ï¼ä»¥é²åªå¤©ä½ æ¹åäºä¸»æã é¿è¿æ¥çï¼åªè¦å°å½åç©ºé´ç½®äºåéç java åå½åç©ºé´ä¹ä¸­ï¼ä½ çä»£ç ä¼åå¾æ´å æ´æ´ï¼ä¹æå©äºä½ æ´æ¹ä¾¿å°ä½¿ç¨ mybatisã\n\n**å½åè§£æï¼**ä¸ºäºåå°è¾å¥éï¼mybatis å¯¹ææå·æåç§°çéç½®åç´ ï¼åæ¬è¯­å¥ï¼ç»ææ å°ï¼ç¼å­ç­ï¼ä½¿ç¨äºå¦ä¸çå½åè§£æè§åã\n\n * å¨éå®åï¼æ¯å¦ âcom.mypackage.mymapper.selectallthingsï¼å°è¢«ç´æ¥ç¨äºæ¥æ¾åä½¿ç¨ã\n * ç­åç§°ï¼æ¯å¦ âselectallthingsâï¼å¦æå¨å±å¯ä¸ä¹å¯ä»¥ä½ä¸ºä¸ä¸ªåç¬çå¼ç¨ã å¦æä¸å¯ä¸ï¼æä¸¤ä¸ªæä¸¤ä¸ªä»¥ä¸çç¸ååç§°ï¼æ¯å¦ âcom.foo.selectallthingsâ å âcom.bar.selectallthingsâï¼ï¼é£ä¹ä½¿ç¨æ¶å°±ä¼äº§çâç­åç§°ä¸å¯ä¸âçéè¯¯ï¼è¿ç§æåµä¸å°±å¿é¡»ä½¿ç¨å¨éå®åã\n\nå¯¹äºå blogmapper è¿æ ·çæ å°å¨ç±»æ¥è¯´ï¼è¿æå¦ä¸ç§æ¹æ³æ¥å®æè¯­å¥æ å°ã å®ä»¬æ å°çè¯­å¥å¯ä»¥ä¸ç¨ xml æ¥éç½®ï¼èå¯ä»¥ä½¿ç¨ java æ³¨è§£æ¥éç½®ãæ¯å¦ï¼ä¸é¢ç xml ç¤ºä¾å¯ä»¥è¢«æ¿æ¢æå¦ä¸çéç½®ï¼\n\npackage org.mybatis.example;\npublic interface blogmapper {\n  @select("select * from blog where id = #{id}")\n  blog selectblog(int id);\n}\n\n\nä½¿ç¨æ³¨è§£æ¥æ å°ç®åè¯­å¥ä¼ä½¿ä»£ç æ¾å¾æ´å ç®æ´ï¼ä½å¯¹äºç¨å¾®å¤æä¸ç¹çè¯­å¥ï¼java æ³¨è§£ä¸ä»åä¸ä»å¿ï¼è¿ä¼è®©æ¬å°±å¤æç sql è¯­å¥æ´å æ··ä¹±ä¸å ªã å æ­¤ï¼å¦æä½ éè¦åä¸äºå¾å¤æçæä½ï¼æå¥½ç¨ xml æ¥æ å°è¯­å¥ã\n\néæ©ä½ç§æ¹å¼æ¥éç½®æ å°ï¼ä»¥åæ¯å¦åºè¯¥è¦ç»ä¸æ å°è¯­å¥å®ä¹çå½¢å¼ï¼å®å¨åå³äºä½ åä½ çå¢éã æ¢å¥è¯è¯´ï¼æ°¸è¿ä¸è¦ææ³¥äºä¸ç§æ¹å¼ï¼ä½ å¯ä»¥å¾è½»æ¾å°å¨åºäºæ³¨è§£å xml çè¯­å¥æ å°æ¹å¼é´èªç±ç§»æ¤ååæ¢ã\n\n\n# ä½ç¨åï¼scopeï¼åçå½å¨æ\n\nçè§£æä»¬ä¹åè®¨è®ºè¿çä¸åä½ç¨ååçå½å¨æç±»å«æ¯è³å³éè¦çï¼å ä¸ºéè¯¯çä½¿ç¨ä¼å¯¼è´éå¸¸ä¸¥éçå¹¶åé®é¢ã\n\næç¤º å¯¹è±¡çå½å¨æåä¾èµæ³¨å¥æ¡æ¶\n\nä¾èµæ³¨å¥æ¡æ¶å¯ä»¥åå»ºçº¿ç¨å®å¨çãåºäºäºå¡ç sqlsession åæ å°å¨ï¼å¹¶å°å®ä»¬ç´æ¥æ³¨å¥å°ä½ ç bean ä¸­ï¼å æ­¤å¯ä»¥ç´æ¥å¿½ç¥å®ä»¬ççå½å¨æã å¦æå¯¹å¦ä½éè¿ä¾èµæ³¨å¥æ¡æ¶ä½¿ç¨ mybatis æå´è¶£ï¼å¯ä»¥ç ç©¶ä¸ä¸ mybatis-spring æ mybatis-guice ä¸¤ä¸ªå­é¡¹ç®ã\n\n# sqlsessionfactorybuilder\n\nè¿ä¸ªç±»å¯ä»¥è¢«å®ä¾åãä½¿ç¨åä¸¢å¼ï¼ä¸æ¦åå»ºäº sqlsessionfactoryï¼å°±ä¸åéè¦å®äºã å æ­¤ sqlsessionfactorybuilder å®ä¾çæä½³ä½ç¨åæ¯æ¹æ³ä½ç¨åï¼ä¹å°±æ¯å±é¨æ¹æ³åéï¼ã ä½ å¯ä»¥éç¨ sqlsessionfactorybuilder æ¥åå»ºå¤ä¸ª sqlsessionfactory å®ä¾ï¼ä½æå¥½è¿æ¯ä¸è¦ä¸ç´ä¿ççå®ï¼ä»¥ä¿è¯ææç xml è§£æèµæºå¯ä»¥è¢«éæ¾ç»æ´éè¦çäºæã\n\n# sqlsessionfactory\n\nsqlsessionfactory ä¸æ¦è¢«åå»ºå°±åºè¯¥å¨åºç¨çè¿è¡æé´ä¸ç´å­å¨ï¼æ²¡æä»»ä½çç±ä¸¢å¼å®æéæ°åå»ºå¦ä¸ä¸ªå®ä¾ã ä½¿ç¨ sqlsessionfactory çæä½³å®è·µæ¯å¨åºç¨è¿è¡æé´ä¸è¦éå¤åå»ºå¤æ¬¡ï¼å¤æ¬¡éå»º sqlsessionfactory è¢«è§ä¸ºä¸ç§ä»£ç âåä¹ æ¯âãå æ­¤ sqlsessionfactory çæä½³ä½ç¨åæ¯åºç¨ä½ç¨åã æå¾å¤æ¹æ³å¯ä»¥åå°ï¼æç®åçå°±æ¯ä½¿ç¨åä¾æ¨¡å¼æèéæåä¾æ¨¡å¼ã\n\n# sqlsession\n\næ¯ä¸ªçº¿ç¨é½åºè¯¥æå®èªå·±ç sqlsession å®ä¾ãsqlsession çå®ä¾ä¸æ¯çº¿ç¨å®å¨çï¼å æ­¤æ¯ä¸è½è¢«å±äº«çï¼æä»¥å®çæä½³çä½ç¨åæ¯è¯·æ±ææ¹æ³ä½ç¨åã ç»å¯¹ä¸è½å° sqlsession å®ä¾çå¼ç¨æ¾å¨ä¸ä¸ªç±»çéæåï¼çè³ä¸ä¸ªç±»çå®ä¾åéä¹ä¸è¡ã ä¹ç»ä¸è½å° sqlsession å®ä¾çå¼ç¨æ¾å¨ä»»ä½ç±»åçæç®¡ä½ç¨åä¸­ï¼æ¯å¦ servlet æ¡æ¶ä¸­ç httpsessionã å¦æä½ ç°å¨æ­£å¨ä½¿ç¨ä¸ç§ web æ¡æ¶ï¼èèå° sqlsession æ¾å¨ä¸ä¸ªå http è¯·æ±ç¸ä¼¼çä½ç¨åä¸­ã æ¢å¥è¯è¯´ï¼æ¯æ¬¡æ¶å° http è¯·æ±ï¼å°±å¯ä»¥æå¼ä¸ä¸ª sqlsessionï¼è¿åä¸ä¸ªååºåï¼å°±å³é­å®ã è¿ä¸ªå³é­æä½å¾éè¦ï¼ä¸ºäºç¡®ä¿æ¯æ¬¡é½è½æ§è¡å³é­æä½ï¼ä½ åºè¯¥æè¿ä¸ªå³é­æä½æ¾å° finally åä¸­ã ä¸é¢çç¤ºä¾å°±æ¯ä¸ä¸ªç¡®ä¿ sqlsession å³é­çæ åæ¨¡å¼ï¼\n\ntry (sqlsession session = sqlsessionfactory.opensession()) {\n  // ä½ çåºç¨é»è¾ä»£ç \n}\n\n\nå¨ææä»£ç ä¸­é½éµå¾ªè¿ç§ä½¿ç¨æ¨¡å¼ï¼å¯ä»¥ä¿è¯æææ°æ®åºèµæºé½è½è¢«æ­£ç¡®å°å³é­ã\n\n# æ å°å¨å®ä¾\n\næ å°å¨æ¯ä¸äºç»å®æ å°è¯­å¥çæ¥å£ãæ å°å¨æ¥å£çå®ä¾æ¯ä» sqlsession ä¸­è·å¾çãè½ç¶ä»ææ¯å±é¢ä¸æ¥è®²ï¼ä»»ä½æ å°å¨å®ä¾çæå¤§ä½ç¨åä¸è¯·æ±å®ä»¬ç sqlsession ç¸åãä½æ¹æ³ä½ç¨åææ¯æ å°å¨å®ä¾çæåéçä½ç¨åã ä¹å°±æ¯è¯´ï¼æ å°å¨å®ä¾åºè¯¥å¨è°ç¨å®ä»¬çæ¹æ³ä¸­è¢«è·åï¼ä½¿ç¨å®æ¯ä¹åå³å¯ä¸¢å¼ã æ å°å¨å®ä¾å¹¶ä¸éè¦è¢«æ¾å¼å°å³é­ãå°½ç®¡å¨æ´ä¸ªè¯·æ±ä½ç¨åä¿çæ å°å¨å®ä¾ä¸ä¼æä»ä¹é®é¢ï¼ä½æ¯ä½ å¾å¿«ä¼åç°ï¼å¨è¿ä¸ªä½ç¨åä¸ç®¡çå¤ªå¤å sqlsession çèµæºä¼è®©ä½ å¿ä¸è¿æ¥ã å æ­¤ï¼æå¥½å°æ å°å¨æ¾å¨æ¹æ³ä½ç¨ååãå°±åä¸é¢çä¾å­ä¸æ ·ï¼\n\ntry (sqlsession session = sqlsessionfactory.opensession()) {\n  blogmapper mapper = session.getmapper(blogmapper.class);\n  // ä½ çåºç¨é»è¾ä»£ç \n}\n\n\n\n# mybatis æ©å±å·¥å·\n\n\n# mybatis plus\n\nmybatis-plusï¼ç®ç§° mpï¼æ¯ä¸ä¸ª mybatis çå¢å¼ºå·¥å·ï¼å¨ mybatis çåºç¡ä¸åªåå¢å¼ºä¸åæ¹åï¼ä¸ºç®åå¼åãæé«æçèçã\n\nãéæç¤ºä¾ãspring-boot-data-mybatis-plus\n\n\n# mapper\n\nmapper æ¯ä¸ä¸ª mybatis crud æ©å±æä»¶ã\n\nmapper çåºæ¬åçæ¯å°å®ä½ç±»æ å°ä¸ºæ°æ®åºä¸­çè¡¨åå­æ®µä¿¡æ¯ï¼å æ­¤å®ä½ç±»éè¦éè¿æ³¨è§£éç½®åºæ¬çåæ°æ®ï¼éç½®å¥½å®ä½åï¼ åªéè¦åå»ºä¸ä¸ªç»§æ¿åºç¡æ¥å£ç mapper æ¥å£å°±å¯ä»¥å¼å§ä½¿ç¨äºã\n\nãéæç¤ºä¾ãspring-boot-data-mybatis-mapper\n\n\n# pagehelper\n\npagehelper æ¯ä¸ä¸ª mybatis éç¨åé¡µæä»¶ã\n\nãéæç¤ºä¾ãspring-boot-data-mybatis-mapper\n\n\n# åèèµæ\n\n * å®æ¹\n   * mybatis github\n   * mybatis å®ç½\n   * mybatis å®æ¹ä»£ç çæï¼mybatis-generatorï¼\n   * mybatis å®æ¹éæ springï¼mybatis-springï¼\n   * mybatis å®æ¹éæ spring bootï¼mybatis-spring-bootï¼\n * æ©å±æä»¶\n   * mybatis-plus - crud æ©å±æä»¶ãä»£ç çæå¨ãåé¡µå¨ç­å¤åè½\n   * mapper - mybatis crud æ©å±æä»¶\n   * pagehelper - mybatis éç¨åé¡µæä»¶\n * æç« \n   * æ·±å¥çè§£ mybatis åç\n   * mybatis æºç ä¸­ææ³¨é\n   * mybatis generator è¯¦è§£\n   * mybatis å¸¸è§é¢è¯é¢\n   * mybatis ä¸­å¼ºå¤§ç resultmap',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring è®¿é® Redis",frontmatter:{title:"Spring è®¿é® Redis",date:"2023-01-31T20:54:42.000Z",order:21,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","Redis"],permalink:"/pages/65e4a2/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/21.Spring%E8%AE%BF%E9%97%AERedis.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/21.Springè®¿é®Redis.md",key:"v-5be0fc7d",path:"/pages/65e4a2/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:22},{level:2,title:"Spring Boot å¿«éå¥é¨",slug:"spring-boot-å¿«éå¥é¨",normalizedTitle:"spring boot å¿«éå¥é¨",charIndex:259},{level:3,title:"å¼å¥ä¾èµ",slug:"å¼å¥ä¾èµ",normalizedTitle:"å¼å¥ä¾èµ",charIndex:280},{level:3,title:"æ°æ®æºéç½®",slug:"æ°æ®æºéç½®",normalizedTitle:"æ°æ®æºéç½®",charIndex:440},{level:3,title:"å®ä¹å®ä½",slug:"å®ä¹å®ä½",normalizedTitle:"å®ä¹å®ä½",charIndex:557},{level:3,title:"å®ä¹ CRUD æ¥å£",slug:"å®ä¹-crud-æ¥å£",normalizedTitle:"å®ä¹ crud æ¥å£",charIndex:1010},{level:3,title:"åå»º CRUD æ¥å£å®ç°",slug:"åå»º-crud-æ¥å£å®ç°",normalizedTitle:"åå»º crud æ¥å£å®ç°",charIndex:1211},{level:3,title:"åå»º Application",slug:"åå»º-application",normalizedTitle:"åå»º application",charIndex:2299},{level:3,title:"æµè¯",slug:"æµè¯",normalizedTitle:"æµè¯",charIndex:4653},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:5614},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:5660}],headersStr:"ç®ä» Spring Boot å¿«éå¥é¨ å¼å¥ä¾èµ æ°æ®æºéç½® å®ä¹å®ä½ å®ä¹ CRUD æ¥å£ åå»º CRUD æ¥å£å®ç° åå»º Application æµè¯ ç¤ºä¾æºç  åèèµæ",content:'# Spring è®¿é® Redis\n\n\n# ç®ä»\n\nRedis æ¯ä¸ä¸ªè¢«æ°ç¾ä¸å¼åäººåç¨ä½æ°æ®åºãç¼å­ãæµå¼æåæ¶æ¯ä»£ççå¼æºåå­æ°æ®åºã\n\nå¨ Spring ä¸­ï¼spring-data-redis é¡¹ç®å¯¹è®¿é® Redis è¿è¡äº API å°è£ï¼æä¾äºä¾¿æ·çè®¿é®æ¹å¼ã spring-data-redis\n\nspring-boot é¡¹ç®ä¸­çå­æ¨¡å spring-boot-starter-data-redis åºäº spring-data-redis é¡¹ç®ï¼åäºäºæ¬¡å°è£ï¼å¤§å¤§ç®åäº Redis çç¸å³éç½®ã\n\n\n# Spring Boot å¿«éå¥é¨\n\n\n# å¼å¥ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥ä¾èµï¼\n\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-data-redis</artifactId>\n</dependency>\n\n\n\n# æ°æ®æºéç½®\n\nspring.redis.database = 0\nspring.redis.host = localhost\nspring.redis.port = 6379\nspring.redis.password =\n\n\n\n# å®ä¹å®ä½\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.ToString;\n\nimport java.io.Serializable;\n\n@Data\n@ToString\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User implements Serializable {\n\n    private static final long serialVersionUID = 4142994984277644695L;\n\n    private Long id;\n    private String name;\n    private Integer age;\n    private String address;\n    private String email;\n\n}\n\n\n\n# å®ä¹ CRUD æ¥å£\n\nimport java.util.Map;\n\npublic interface UserService {\n\n    void batchSetUsers(Map<String, User> users);\n\n    long count();\n\n    User getUser(Long id);\n\n    void setUser(User user);\n\n}\n\n\n\n# åå»º CRUD æ¥å£å®ç°\n\n\nimport cn.hutool.core.bean.BeanUtil;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Map;\n\n@Service\npublic class UserServiceImpl implements UserService {\n\n    public static final String DEFAULT_KEY = "spring:tutorial:user";\n\n    private final RedisTemplate<String, Object> redisTemplate;\n\n    public UserServiceImpl(RedisTemplate<String, Object> redisTemplate) {\n        this.redisTemplate = redisTemplate;\n    }\n\n    @Override\n    public void batchSetUsers(Map<String, User> users) {\n        redisTemplate.opsForHash().putAll(DEFAULT_KEY, users);\n    }\n\n    @Override\n    public long count() {\n        return redisTemplate.opsForHash().size(DEFAULT_KEY);\n    }\n\n    @Override\n    public User getUser(Long id) {\n        Object obj = redisTemplate.opsForHash().get(DEFAULT_KEY, id.toString());\n        return BeanUtil.toBean(obj, User.class);\n    }\n\n    @Override\n    public void setUser(User user) {\n        redisTemplate.opsForHash().put(DEFAULT_KEY, user.getId().toString(), user);\n    }\n\n}\n\n\n\n# åå»º Application\n\nåå»º Applicationï¼å®ä¾åä¸ä¸ª RedisTemplate å¯¹è±¡ã\n\nimport com.fasterxml.jackson.annotation.JsonAutoDetect;\nimport com.fasterxml.jackson.annotation.PropertyAccessor;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\n\n@Slf4j\n@SpringBootApplication\npublic class RedisQuickstartApplication {\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Bean\n    @Primary\n    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {\n\n        // æå®è¦åºååçåï¼field,getåset,ä»¥åä¿®é¥°ç¬¦èå´ï¼ANYæ¯é½æåæ¬privateåpublic\n        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        // // æå®åºååè¾å¥çç±»åï¼ç±»å¿é¡»æ¯éfinalä¿®é¥°çï¼finalä¿®é¥°çç±»ï¼æ¯å¦String,Integerç­ä¼è·åºå¼å¸¸\n        // objectMapper.activateDefaultTyping(new DefaultBaseTypeLimitingValidator(),\n        //     ObjectMapper.DefaultTyping.NON_FINAL);\n\n        // ä½¿ç¨Jackson2JsonRedisSerializeræ¥åºåååååºååredisçvalueå¼ï¼é»è®¤ä½¿ç¨JDKçåºååæ¹å¼ï¼\n        Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer<>(Object.class);\n        serializer.setObjectMapper(objectMapper);\n\n        RedisTemplate<String, Object> template = new RedisTemplate<>();\n        // éç½®è¿æ¥å·¥å\n        template.setConnectionFactory(factory);\n        // å¼éç¨jsonåºåå\n        template.setValueSerializer(serializer);\n        // ä½¿ç¨StringRedisSerializeræ¥åºåååååºååredisçkeyå¼\n        template.setKeySerializer(new StringRedisSerializer());\n        // è®¾ç½®hash key åvalueåºååæ¨¡å¼\n        template.setHashKeySerializer(new StringRedisSerializer());\n        template.setHashValueSerializer(serializer);\n        template.afterPropertiesSet();\n\n        return template;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(RedisQuickstartApplication.class, args);\n    }\n\n}\n\n\n\n# æµè¯\n\n@Slf4j\n@SpringBootTest(classes = { RedisQuickstartApplication.class })\npublic class RedisQuickstartTests {\n\n    @Autowired\n    private UserService userService;\n\n    @Test\n    public void test() {\n        final long SIZE = 1000L;\n        Map<String, User> map = new HashMap<>();\n        for (long i = 0; i < SIZE; i++) {\n            User user = new User(i, RandomUtil.randomChineseName(),\n                RandomUtil.randomInt(1, 100),\n                RandomUtil.randomEnum(Location.class).name(),\n                RandomUtil.randomEmail());\n            map.put(String.valueOf(i), user);\n        }\n        userService.batchSetUsers(map);\n        long count = userService.count();\n        Assertions.assertThat(count).isEqualTo(SIZE);\n\n        for (int i = 0; i < 100; i++) {\n            long id = RandomUtil.randomLong(0, 1000);\n            User user = userService.getUser(id);\n            log.info("user-{}: {}", id, user.toString());\n        }\n    }\n\n}\n\n\n\n# ç¤ºä¾æºç \n\næ´å¤ Spring è®¿é® Redis ç¤ºä¾è¯·åèï¼Redis ç¤ºä¾æºç \n\n\n# åèèµæ\n\n * Redis å®ç½\n * Redis Github\n * spring-data-redis Github\n * Spring Data Redis å®æ¹ææ¡£\n * Spring Data å®æ¹ç¤ºä¾',normalizedContent:'# spring è®¿é® redis\n\n\n# ç®ä»\n\nredis æ¯ä¸ä¸ªè¢«æ°ç¾ä¸å¼åäººåç¨ä½æ°æ®åºãç¼å­ãæµå¼æåæ¶æ¯ä»£ççå¼æºåå­æ°æ®åºã\n\nå¨ spring ä¸­ï¼spring-data-redis é¡¹ç®å¯¹è®¿é® redis è¿è¡äº api å°è£ï¼æä¾äºä¾¿æ·çè®¿é®æ¹å¼ã spring-data-redis\n\nspring-boot é¡¹ç®ä¸­çå­æ¨¡å spring-boot-starter-data-redis åºäº spring-data-redis é¡¹ç®ï¼åäºäºæ¬¡å°è£ï¼å¤§å¤§ç®åäº redis çç¸å³éç½®ã\n\n\n# spring boot å¿«éå¥é¨\n\n\n# å¼å¥ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥ä¾èµï¼\n\n<dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-data-redis</artifactid>\n</dependency>\n\n\n\n# æ°æ®æºéç½®\n\nspring.redis.database = 0\nspring.redis.host = localhost\nspring.redis.port = 6379\nspring.redis.password =\n\n\n\n# å®ä¹å®ä½\n\nimport lombok.allargsconstructor;\nimport lombok.data;\nimport lombok.noargsconstructor;\nimport lombok.tostring;\n\nimport java.io.serializable;\n\n@data\n@tostring\n@noargsconstructor\n@allargsconstructor\npublic class user implements serializable {\n\n    private static final long serialversionuid = 4142994984277644695l;\n\n    private long id;\n    private string name;\n    private integer age;\n    private string address;\n    private string email;\n\n}\n\n\n\n# å®ä¹ crud æ¥å£\n\nimport java.util.map;\n\npublic interface userservice {\n\n    void batchsetusers(map<string, user> users);\n\n    long count();\n\n    user getuser(long id);\n\n    void setuser(user user);\n\n}\n\n\n\n# åå»º crud æ¥å£å®ç°\n\n\nimport cn.hutool.core.bean.beanutil;\nimport org.springframework.data.redis.core.redistemplate;\nimport org.springframework.stereotype.service;\n\nimport java.util.map;\n\n@service\npublic class userserviceimpl implements userservice {\n\n    public static final string default_key = "spring:tutorial:user";\n\n    private final redistemplate<string, object> redistemplate;\n\n    public userserviceimpl(redistemplate<string, object> redistemplate) {\n        this.redistemplate = redistemplate;\n    }\n\n    @override\n    public void batchsetusers(map<string, user> users) {\n        redistemplate.opsforhash().putall(default_key, users);\n    }\n\n    @override\n    public long count() {\n        return redistemplate.opsforhash().size(default_key);\n    }\n\n    @override\n    public user getuser(long id) {\n        object obj = redistemplate.opsforhash().get(default_key, id.tostring());\n        return beanutil.tobean(obj, user.class);\n    }\n\n    @override\n    public void setuser(user user) {\n        redistemplate.opsforhash().put(default_key, user.getid().tostring(), user);\n    }\n\n}\n\n\n\n# åå»º application\n\nåå»º applicationï¼å®ä¾åä¸ä¸ª redistemplate å¯¹è±¡ã\n\nimport com.fasterxml.jackson.annotation.jsonautodetect;\nimport com.fasterxml.jackson.annotation.propertyaccessor;\nimport com.fasterxml.jackson.databind.objectmapper;\nimport lombok.extern.slf4j.slf4j;\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\nimport org.springframework.context.annotation.bean;\nimport org.springframework.context.annotation.primary;\nimport org.springframework.data.redis.connection.redisconnectionfactory;\nimport org.springframework.data.redis.core.redistemplate;\nimport org.springframework.data.redis.serializer.jackson2jsonredisserializer;\nimport org.springframework.data.redis.serializer.stringredisserializer;\n\n@slf4j\n@springbootapplication\npublic class redisquickstartapplication {\n\n    @autowired\n    private objectmapper objectmapper;\n\n    @bean\n    @primary\n    public redistemplate<string, object> redistemplate(redisconnectionfactory factory) {\n\n        // æå®è¦åºååçåï¼field,getåset,ä»¥åä¿®é¥°ç¬¦èå´ï¼anyæ¯é½æåæ¬privateåpublic\n        objectmapper.setvisibility(propertyaccessor.all, jsonautodetect.visibility.any);\n        // // æå®åºååè¾å¥çç±»åï¼ç±»å¿é¡»æ¯éfinalä¿®é¥°çï¼finalä¿®é¥°çç±»ï¼æ¯å¦string,integerç­ä¼è·åºå¼å¸¸\n        // objectmapper.activatedefaulttyping(new defaultbasetypelimitingvalidator(),\n        //     objectmapper.defaulttyping.non_final);\n\n        // ä½¿ç¨jackson2jsonredisserializeræ¥åºåååååºååredisçvalueå¼ï¼é»è®¤ä½¿ç¨jdkçåºååæ¹å¼ï¼\n        jackson2jsonredisserializer<object> serializer = new jackson2jsonredisserializer<>(object.class);\n        serializer.setobjectmapper(objectmapper);\n\n        redistemplate<string, object> template = new redistemplate<>();\n        // éç½®è¿æ¥å·¥å\n        template.setconnectionfactory(factory);\n        // å¼éç¨jsonåºåå\n        template.setvalueserializer(serializer);\n        // ä½¿ç¨stringredisserializeræ¥åºåååååºååredisçkeyå¼\n        template.setkeyserializer(new stringredisserializer());\n        // è®¾ç½®hash key åvalueåºååæ¨¡å¼\n        template.sethashkeyserializer(new stringredisserializer());\n        template.sethashvalueserializer(serializer);\n        template.afterpropertiesset();\n\n        return template;\n    }\n\n    public static void main(string[] args) {\n        springapplication.run(redisquickstartapplication.class, args);\n    }\n\n}\n\n\n\n# æµè¯\n\n@slf4j\n@springboottest(classes = { redisquickstartapplication.class })\npublic class redisquickstarttests {\n\n    @autowired\n    private userservice userservice;\n\n    @test\n    public void test() {\n        final long size = 1000l;\n        map<string, user> map = new hashmap<>();\n        for (long i = 0; i < size; i++) {\n            user user = new user(i, randomutil.randomchinesename(),\n                randomutil.randomint(1, 100),\n                randomutil.randomenum(location.class).name(),\n                randomutil.randomemail());\n            map.put(string.valueof(i), user);\n        }\n        userservice.batchsetusers(map);\n        long count = userservice.count();\n        assertions.assertthat(count).isequalto(size);\n\n        for (int i = 0; i < 100; i++) {\n            long id = randomutil.randomlong(0, 1000);\n            user user = userservice.getuser(id);\n            log.info("user-{}: {}", id, user.tostring());\n        }\n    }\n\n}\n\n\n\n# ç¤ºä¾æºç \n\næ´å¤ spring è®¿é® redis ç¤ºä¾è¯·åèï¼redis ç¤ºä¾æºç \n\n\n# åèèµæ\n\n * redis å®ç½\n * redis github\n * spring-data-redis github\n * spring data redis å®æ¹ææ¡£\n * spring data å®æ¹ç¤ºä¾',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Data ç»¼å",frontmatter:{title:"Spring Data ç»¼å",date:"2023-02-08T09:10:35.000Z",order:20,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/191cdb/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/20.SpringData%E7%BB%BC%E5%90%88.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/20.SpringDataç»¼å.md",key:"v-35ee501b",path:"/pages/191cdb/",headers:[{level:2,title:"æ ¸å¿æ¦å¿µ",slug:"æ ¸å¿æ¦å¿µ",normalizedTitle:"æ ¸å¿æ¦å¿µ",charIndex:72},{level:2,title:"æ¥è¯¢æ¹æ³",slug:"æ¥è¯¢æ¹æ³",normalizedTitle:"æ¥è¯¢æ¹æ³",charIndex:1089},{level:2,title:"å®ä¹ Repository",slug:"å®ä¹-repository",normalizedTitle:"å®ä¹ repository",charIndex:2162},{level:3,title:"å¾®è° Repository å®ä¹",slug:"å¾®è°-repository-å®ä¹",normalizedTitle:"å¾®è° repository å®ä¹",charIndex:2286},{level:3,title:"ä½¿ç¨å¤ä¸ª Spring æ°æ®æ¨¡å",slug:"ä½¿ç¨å¤ä¸ª-spring-æ°æ®æ¨¡å",normalizedTitle:"ä½¿ç¨å¤ä¸ª spring æ°æ®æ¨¡å",charIndex:3341},{level:2,title:"å®ä¹æ¥è¯¢æ¹æ³",slug:"å®ä¹æ¥è¯¢æ¹æ³",normalizedTitle:"å®ä¹æ¥è¯¢æ¹æ³",charIndex:5447},{level:3,title:"æ¥è¯¢ç­ç¥",slug:"æ¥è¯¢ç­ç¥",normalizedTitle:"æ¥è¯¢ç­ç¥",charIndex:5567},{level:3,title:"æ¥è¯¢åå»º",slug:"æ¥è¯¢åå»º",normalizedTitle:"æ¥è¯¢åå»º",charIndex:5826},{level:2,title:"åå»º Repository å®ä¾",slug:"åå»º-repository-å®ä¾",normalizedTitle:"åå»º repository å®ä¾",charIndex:6943},{level:2,title:"èªå®ä¹ Repository å®ç°",slug:"èªå®ä¹-repository-å®ç°",normalizedTitle:"èªå®ä¹ repository å®ç°",charIndex:6964},{level:2,title:"Spring Data æ©å±",slug:"spring-data-æ©å±",normalizedTitle:"spring data æ©å±",charIndex:6986},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:7005}],headersStr:"æ ¸å¿æ¦å¿µ æ¥è¯¢æ¹æ³ å®ä¹ Repository å¾®è° Repository å®ä¹ ä½¿ç¨å¤ä¸ª Spring æ°æ®æ¨¡å å®ä¹æ¥è¯¢æ¹æ³ æ¥è¯¢ç­ç¥ æ¥è¯¢åå»º åå»º Repository å®ä¾ èªå®ä¹ Repository å®ç° Spring Data æ©å± åèèµæ",content:'# Spring Data ç»¼å\n\nSpring Data Repository æ½è±¡çç®æ æ¯æ¾èåå°åç§è®¿é®æä¹åå­å¨çæ ·æ¿å¼ä»£ç ã\n\n\n# æ ¸å¿æ¦å¿µ\n\nRepository æ¯ Spring Data çæ ¸å¿æ¥å£ãæ­¤æ¥å£ä¸»è¦ç¨ä½æ è®°æ¥å£ï¼ä»¥æè·è¦ä½¿ç¨çç±»åå¹¶å¸®å©æ¨åç°æ©å±æ­¤æ¥å£çæ¥å£ãCrudRepository å ListCrudRepository æ¥å£ä¸ºè¢«ç®¡ççå®ä½ç±»æä¾å¤æç CRUD åè½ãListCrudRepository æä¾ç­ææ¹æ³ï¼ä½å®ä»¬è¿å Listï¼è CrudRepository æ¹æ³è¿å Iterableã\n\nCrudRepository æ¥å£å®ä¹ï¼\n\npublic interface CrudRepository<T, ID> extends Repository<T, ID> {\n\n  <S extends T> S save(S entity);\n\n  Optional<T> findById(ID primaryKey);\n\n  Iterable<T> findAll();\n\n  long count();\n\n  void delete(T entity);\n\n  boolean existsById(ID primaryKey);\n\n  // â¦ more functionality omitted.\n}\n\n\n> Spring Data é¡¹ç®ä¹æä¾äºä¸äºç¹å®æä¹åææ¯çæ½è±¡æ¥å£ï¼å¦ï¼JpaRepository æ MongoRepositoryãè¿äºæ¥å£æ©å±äº CrudRepository å¹¶æ´é²äºä¸äºæä¹åææ¯çåºå±åè½ã\n\né¤äº CrudRepository ä¹å¤ï¼è¿æä¸ä¸ª PagingAndSortingRepository æ¥å£ï¼å®æ·»å äºé¢å¤çæ¹æ³æ¥ç®åå¯¹å®ä½çåé¡µè®¿é®ï¼\n\npublic interface PagingAndSortingRepository<T, ID>  {\n\n  Iterable<T> findAll(Sort sort);\n\n  Page<T> findAll(Pageable pageable);\n}\n\n\nãç¤ºä¾ãè¦æé¡µé¢å¤§å° 20 è®¿é® User çç¬¬äºé¡µï¼å¯ä»¥æ§è¡å¦ä¸æä½\n\nPagingAndSortingRepository<User, Long> repository = // â¦ get access to a bean\nPage<User> users = repository.findAll(PageRequest.of(1, 20));\n\n\né¤äºæ¥è¯¢æ¹æ³ä¹å¤ï¼è®¡æ°åå é¤æ¶çæ¥è¯¢ä¹æ¯å¯ç¨çã\n\nãç¤ºä¾ãæ ¹æ®å§æ°è®¡æ°\n\ninterface UserRepository extends CrudRepository<User, Long> {\n  long countByLastname(String lastname);\n}\n\n\nãç¤ºä¾ãæ ¹æ®å§æ°å é¤\n\ninterface UserRepository extends CrudRepository<User, Long> {\n\n  long deleteByLastname(String lastname);\n\n  List<User> removeByLastname(String lastname);\n}\n\n\n\n# æ¥è¯¢æ¹æ³\n\nä½¿ç¨ Spring Data å¯¹æ°æ®åºè¿è¡æ¥è¯¢æä»¥ä¸åæ­¥ï¼\n\n 1. å£°æä¸ä¸ªæ©å± Repository æå¶å­æ¥å£çæ¥å£ï¼å¹¶æå®æ³åç±»åï¼å®ä½ç±»å ID ç±»åï¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n    \n    interface PersonRepository extends Repository<Person, Long> { â¦ }\n    \n\n 2. å¨æ¥å£ä¸­å£°ææ¥è¯¢æ¹æ³\n    \n    interface PersonRepository extends Repository<Person, Long> {\n      List<Person> findByLastname(String lastname);\n    }\n    \n\n 3. ä½¿ç¨ JavaConfig æ XML éç½®ä¸ºè¿äºæ¥å£åå»ºä»£çå®ä¾\n    \n    @EnableJpaRepositories\n    class Config { â¦ }\n    \n\n 4. æ³¨å¥ Repository å®ä¾å¹¶ä½¿ç¨\n    \n    class SomeClient {\n    \n      private final PersonRepository repository;\n    \n      SomeClient(PersonRepository repository) {\n        this.repository = repository;\n      }\n    \n      void doSomething() {\n        List<Person> persons = repository.findByLastname("Matthews");\n      }\n    }\n    \n\n\n# å®ä¹ Repository\n\né¦åéè¦å®ä¹ä¸ä¸ª Repository æ¥å£ï¼è¯¥æ¥å£å¿é¡»æ©å± Repository å¹¶ä¸æå®æ³åç±»åï¼å®ä½ç±»å ID ç±»åï¼ãå¦ææ³ä¸ºè¯¥å®ä½æ´é² CRUD æ¹æ³ï¼å¯ä»¥æ©å± CrudRepository æ¥å£ã\n\n\n# å¾®è° Repository å®ä¹\n\nSpring Data æä¾äºå¾å¤ç§ Repository ä»¥åºå¯¹ä¸åçéæ±åºæ¯ã\n\nCrudRepository æä¾äº CRUD åè½ã\n\nListCrudRepository å CrudRepository ç±»ä¼¼ï¼ä½å¯¹äºé£äºè¿åå¤ä¸ªå®ä½çæ¹æ³ï¼å®è¿åä¸ä¸ª List èä¸æ¯ Iterableï¼è¿æ ·ä½¿ç¨å¯è½æ´æ¹ä¾¿ã\n\nå¦æä½¿ç¨ååºå¼æ¡æ¶ï¼å¯ä»¥ä½¿ç¨ ReactiveCrudRepository æ RxJava3CrudRepositoryã\n\nCoroutineCrudRepository æ¯æ Kotlin çåç¨ç¹æ§ã\n\nPagingAndSortingRepository æä¾äºåé¡µãæåºåè½ã\n\nå¦æä¸æ³æ©å± Spring Data æ¥å£ï¼è¿å¯ä»¥ä½¿ç¨ @RepositoryDefinition æ³¨éæ¨ç Repository æ¥å£ã æ©å±ä¸ä¸ª CRUD Repository æ¥å£ï¼éè¦æ´é²ä¸ç»å®æ´çæ¹æ³æ¥æä½å®ä½ãå¦æå¸æå¯¹æ´é²çæ¹æ³æéæ©æ§ï¼å¯ä»¥å°è¦æ´é²çæ¹æ³ä» CRUD Repository å¤å¶å°èªå®ä¹ç Repository ä¸­ã è¿æ ·åæ¶ï¼å¯ä»¥æ´æ¹æ¹æ³çè¿åç±»åã å¦æå¯è½ï¼Spring Data å°éµå¾ªè¿åç±»åã ä¾å¦ï¼å¯¹äºè¿åå¤ä¸ªå®ä½çæ¹æ³ï¼å¯ä»¥éæ© Iterable<T>ãList<T>ãCollection<T> æ VAVR åè¡¨ã\n\nèªå®ä¹åºç¡ Repository æ¥å£ï¼å¿é¡»ç¨ @NoRepositoryBean æ è®°ã è¿å¯ä»¥é²æ­¢ Spring Data å°è¯ç´æ¥åå»ºå®çå®ä¾å¹¶å¤±è´¥ï¼å ä¸ºå®æ æ³ç¡®å®è¯¥ Repository çå®ä½ï¼å ä¸ºå®ä»ç¶åå«ä¸ä¸ªéç¨ç±»ååéã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æéæ©å°æ´é² CRUD æ¹æ³ï¼å¨æ¬ä¾ä¸­ä¸º findById å saveï¼ï¼\n\n@NoRepositoryBean\ninterface MyBaseRepository<T, ID> extends Repository<T, ID> {\n\n  Optional<T> findById(ID id);\n\n  <S extends T> S save(S entity);\n}\n\ninterface UserRepository extends MyBaseRepository<User, Long> {\n  User findByEmailAddress(EmailAddress emailAddress);\n}\n\n\n\n# ä½¿ç¨å¤ä¸ª Spring æ°æ®æ¨¡å\n\nææ¶ï¼ç¨åºä¸­éè¦ä½¿ç¨å¤ä¸ª Spring Data æ¨¡åãå¨è¿ç§æåµä¸ï¼å¿é¡»åºåæä¹åææ¯ãå½æ£æµå°ç±»è·¯å¾ä¸æå¤ä¸ª Repository å·¥åæ¶ï¼Spring Data è¿å¥ä¸¥æ ¼çéç½®æ¨¡å¼ã\n\nå¦æå®ä¹ç Repository æ©å±äºç¹å®æ¨¡åä¸­ç Repositoryï¼åå®æ¯ç¹å® Spring Data æ¨¡åçææåéèã\n\nå¦æå®ä½ç±»ä½¿ç¨äºç¹å®æ¨¡åçç±»åæ³¨è§£ï¼åå®æ¯ç¹å® Spring Data æ¨¡åçææåéèã Spring Data æ¨¡åæ¥åç¬¬ä¸æ¹æ³¨è§£ï¼ä¾å¦ JPA ç @Entityï¼ææä¾èªå·±çæ³¨è§£ï¼ä¾å¦ç¨äº Spring Data MongoDB å Spring Data Elasticsearch ç @Documentï¼ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨æ¨¡åç¹å®æ¥å£ï¼å¨æ¬ä¾ä¸­ä¸º JPAï¼ç Repositoryï¼\n\ninterface MyRepository extends JpaRepository<User, Long> { }\n\n@NoRepositoryBean\ninterface MyBaseRepository<T, ID> extends JpaRepository<T, ID> { â¦ }\n\ninterface UserRepository extends MyBaseRepository<User, Long> { â¦ }\n\n\nMyRepository å UserRepository æ©å±äº JpaRepositoryãå®ä»¬æ¯ Spring Data JPA æ¨¡åçææåéèã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨éç¨æ¥å£ç Repository\n\ninterface AmbiguousRepository extends Repository<User, Long> { â¦ }\n\n@NoRepositoryBean\ninterface MyBaseRepository<T, ID> extends CrudRepository<T, ID> { â¦ }\n\ninterface AmbiguousUserRepository extends MyBaseRepository<User, Long> { â¦ }\n\n\nAmbiguousRepository å AmbiguousUserRepository ä»æ©å±äº Repository å CrudRepositoryã è½ç¶è¿å¨ä½¿ç¨å¯ä¸ç Spring Data æ¨¡åæ¶å¾å¥½ï¼ä½æ¯å­å¨å¤ä¸ªæ¨¡åæ¶ï¼æ æ³åºåè¿äº Repository åºè¯¥ç»å®å°åªä¸ªç¹å®ç Spring Dataã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨å¸¦æ³¨è§£çå®ä½ç±»ç Repository\n\ninterface PersonRepository extends Repository<Person, Long> { â¦ }\n\n@Entity\nclass Person { â¦ }\n\ninterface UserRepository extends Repository<User, Long> { â¦ }\n\n@Document\nclass User { â¦ }\n\n\nPersonRepository å¼ç¨ Personï¼å®ä½¿ç¨ JPA @Entity æ³¨è§£è¿è¡æ è®°ï¼å æ­¤è¿ä¸ª Repository æ¾ç¶å±äº Spring Data JPAã UserRepository å¼ç¨ Userï¼å®ä½¿ç¨ Spring Data MongoDB ç @Document æ³¨è§£è¿è¡æ è®°ã\n\nä»¥ä¸éè¯¯ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨å¸¦ææ··åæ³¨è§£çå®ä½ç±»ç Repository\n\ninterface JpaPersonRepository extends Repository<Person, Long> { â¦ }\n\ninterface MongoDBPersonRepository extends Repository<Person, Long> { â¦ }\n\n@Entity\n@Document\nclass Person { â¦ }\n\n\næ­¤ç¤ºä¾ä¸­çå®ä½ç±»åæ¶ä½¿ç¨äº JPA å Spring Data MongoDB çæ³¨è§£ãç¤ºä¾ä¸­å®ä¹äºä¸¤ä¸ª Repositoryï¼JpaPersonRepository å MongoDBPersonRepositoryã ä¸ä¸ªç¨äº JPAï¼å¦ä¸ä¸ªç¨äº MongoDBã Spring Data ä¸åè½å¤åºå Repositoryï¼è¿ä¼å¯¼è´æªå®ä¹çè¡ä¸ºã\n\nåºå Repository çæåä¸ç§æ¹æ³æ¯ç¡®å® Repository æ«æ package çèå´ã\n\n@EnableJpaRepositories(basePackages = "com.acme.repositories.jpa")\n@EnableMongoRepositories(basePackages = "com.acme.repositories.mongo")\nclass Configuration { â¦ }\n\n\n\n# å®ä¹æ¥è¯¢æ¹æ³\n\nRepository ä»£çæä¸¤ç§æ¹æ³å¯ä»¥ä»æ¹æ³åç§°æ´¾çç¹å®äºå­å¨çæ¥è¯¢ï¼\n\n * éè¿ç´æ¥ä»æ¹æ³åç§°æ´¾çæ¥è¯¢ã\n * éè¿ä½¿ç¨æå¨å®ä¹çæ¥è¯¢ã\n\nå¯ç¨éé¡¹åå³äºå®éå­å¨ãä½æ¯ï¼å¿é¡»æä¸ä¸ªç­ç¥æ¥å³å®åå»ºä»ä¹å®éæ¥è¯¢ã\n\n\n# æ¥è¯¢ç­ç¥\n\nä»¥ä¸ç­ç¥å¯ç¨äºRepository åºç¡ç»ææ¥è§£ææ¥è¯¢ã å¯¹äº Java éç½®ï¼æ¨å¯ä»¥ä½¿ç¨ EnableJpaRepositories æ³¨éç queryLookupStrategy å±æ§ã ç¹å®æ°æ®å­å¨å¯è½ä¸æ¯ææäºç­ç¥ã\n\n * CREATE å°è¯ä»æ¥è¯¢æ¹æ³åç§°æé ç¹å®å­å¨çæ¥è¯¢ã\n * USE_DECLARED_QUERY å°è¯æ¥æ¾å·²å£°æçæ¥è¯¢ï¼å¦ææ¾ä¸å°åæåºå¼å¸¸ã\n * CREATE_IF_NOT_FOUND ï¼é»è®¤ï¼ç»åäº CREATE å USE_DECLARED_QUERYã\n\n\n# æ¥è¯¢åå»º\n\nSpring Data ä¸­æä¸å¥åç½®çæ¥è¯¢æå»ºå¨æºå¶ï¼å¯ä»¥èªå¨æ å°ç¬¦åå½åååæ°è§åçæ¹æ³ã\n\ninterface PersonRepository extends Repository<Person, Long> {\n\n  List<Person> findByEmailAddressAndLastname(EmailAddress emailAddress, String lastname);\n\n  // Enables the distinct flag for the query\n  List<Person> findDistinctPeopleByLastnameOrFirstname(String lastname, String firstname);\n  List<Person> findPeopleDistinctByLastnameOrFirstname(String lastname, String firstname);\n\n  // Enabling ignoring case for an individual property\n  List<Person> findByLastnameIgnoreCase(String lastname);\n  // Enabling ignoring case for all suitable properties\n  List<Person> findByLastnameAndFirstnameAllIgnoreCase(String lastname, String firstname);\n\n  // Enabling static ORDER BY for a query\n  List<Person> findByLastnameOrderByFirstnameAsc(String lastname);\n  List<Person> findByLastnameOrderByFirstnameDesc(String lastname);\n}\n\n\nè§£ææ¥è¯¢æ¹æ³åç§°åä¸ºä¸»è¯­åè°è¯­ãç¬¬ä¸é¨å (findâ¦By, existsâ¦By) å®ä¹æ¥è¯¢çä¸»è¯­ï¼ç¬¬äºé¨åææè°è¯ã ä¸»è¯­å¯ä»¥åå«æ´å¤çè¡¨è¾¾ã findï¼æå¶ä»å¼å¥å³é®å­ï¼å By ä¹é´çä»»ä½ææ¬é½è¢«è®¤ä¸ºæ¯æè¿°æ§çï¼é¤éä½¿ç¨å¶ä¸­ä¸ä¸ªç»æéå¶å³é®å­ï¼ä¾å¦ Distinct å¨è¦åå»ºçæ¥è¯¢ä¸è®¾ç½®ä¸åçæ å¿æ Top/First éå¶æ¥è¯¢ç»æã\n\n> åèï¼\n> \n> Spring Data æ¯æçæ¥è¯¢ä¸»è¯­å³é®è¯\n> \n> Spring Data æ¯æçæ¥è¯¢è°è¯­å³é®è¯\n\n\n# åå»º Repository å®ä¾\n\n\n# èªå®ä¹ Repository å®ç°\n\n\n# Spring Data æ©å±\n\n\n# åèèµæ\n\n * Redis å®ç½\n * Redis Github\n * spring-data-redis Github\n * Spring Data Redis å®æ¹ææ¡£\n * Spring Data å®æ¹ç¤ºä¾',normalizedContent:'# spring data ç»¼å\n\nspring data repository æ½è±¡çç®æ æ¯æ¾èåå°åç§è®¿é®æä¹åå­å¨çæ ·æ¿å¼ä»£ç ã\n\n\n# æ ¸å¿æ¦å¿µ\n\nrepository æ¯ spring data çæ ¸å¿æ¥å£ãæ­¤æ¥å£ä¸»è¦ç¨ä½æ è®°æ¥å£ï¼ä»¥æè·è¦ä½¿ç¨çç±»åå¹¶å¸®å©æ¨åç°æ©å±æ­¤æ¥å£çæ¥å£ãcrudrepository å listcrudrepository æ¥å£ä¸ºè¢«ç®¡ççå®ä½ç±»æä¾å¤æç crud åè½ãlistcrudrepository æä¾ç­ææ¹æ³ï¼ä½å®ä»¬è¿å listï¼è crudrepository æ¹æ³è¿å iterableã\n\ncrudrepository æ¥å£å®ä¹ï¼\n\npublic interface crudrepository<t, id> extends repository<t, id> {\n\n  <s extends t> s save(s entity);\n\n  optional<t> findbyid(id primarykey);\n\n  iterable<t> findall();\n\n  long count();\n\n  void delete(t entity);\n\n  boolean existsbyid(id primarykey);\n\n  // â¦ more functionality omitted.\n}\n\n\n> spring data é¡¹ç®ä¹æä¾äºä¸äºç¹å®æä¹åææ¯çæ½è±¡æ¥å£ï¼å¦ï¼jparepository æ mongorepositoryãè¿äºæ¥å£æ©å±äº crudrepository å¹¶æ´é²äºä¸äºæä¹åææ¯çåºå±åè½ã\n\né¤äº crudrepository ä¹å¤ï¼è¿æä¸ä¸ª pagingandsortingrepository æ¥å£ï¼å®æ·»å äºé¢å¤çæ¹æ³æ¥ç®åå¯¹å®ä½çåé¡µè®¿é®ï¼\n\npublic interface pagingandsortingrepository<t, id>  {\n\n  iterable<t> findall(sort sort);\n\n  page<t> findall(pageable pageable);\n}\n\n\nãç¤ºä¾ãè¦æé¡µé¢å¤§å° 20 è®¿é® user çç¬¬äºé¡µï¼å¯ä»¥æ§è¡å¦ä¸æä½\n\npagingandsortingrepository<user, long> repository = // â¦ get access to a bean\npage<user> users = repository.findall(pagerequest.of(1, 20));\n\n\né¤äºæ¥è¯¢æ¹æ³ä¹å¤ï¼è®¡æ°åå é¤æ¶çæ¥è¯¢ä¹æ¯å¯ç¨çã\n\nãç¤ºä¾ãæ ¹æ®å§æ°è®¡æ°\n\ninterface userrepository extends crudrepository<user, long> {\n  long countbylastname(string lastname);\n}\n\n\nãç¤ºä¾ãæ ¹æ®å§æ°å é¤\n\ninterface userrepository extends crudrepository<user, long> {\n\n  long deletebylastname(string lastname);\n\n  list<user> removebylastname(string lastname);\n}\n\n\n\n# æ¥è¯¢æ¹æ³\n\nä½¿ç¨ spring data å¯¹æ°æ®åºè¿è¡æ¥è¯¢æä»¥ä¸åæ­¥ï¼\n\n 1. å£°æä¸ä¸ªæ©å± repository æå¶å­æ¥å£çæ¥å£ï¼å¹¶æå®æ³åç±»åï¼å®ä½ç±»å id ç±»åï¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n    \n    interface personrepository extends repository<person, long> { â¦ }\n    \n\n 2. å¨æ¥å£ä¸­å£°ææ¥è¯¢æ¹æ³\n    \n    interface personrepository extends repository<person, long> {\n      list<person> findbylastname(string lastname);\n    }\n    \n\n 3. ä½¿ç¨ javaconfig æ xml éç½®ä¸ºè¿äºæ¥å£åå»ºä»£çå®ä¾\n    \n    @enablejparepositories\n    class config { â¦ }\n    \n\n 4. æ³¨å¥ repository å®ä¾å¹¶ä½¿ç¨\n    \n    class someclient {\n    \n      private final personrepository repository;\n    \n      someclient(personrepository repository) {\n        this.repository = repository;\n      }\n    \n      void dosomething() {\n        list<person> persons = repository.findbylastname("matthews");\n      }\n    }\n    \n\n\n# å®ä¹ repository\n\né¦åéè¦å®ä¹ä¸ä¸ª repository æ¥å£ï¼è¯¥æ¥å£å¿é¡»æ©å± repository å¹¶ä¸æå®æ³åç±»åï¼å®ä½ç±»å id ç±»åï¼ãå¦ææ³ä¸ºè¯¥å®ä½æ´é² crud æ¹æ³ï¼å¯ä»¥æ©å± crudrepository æ¥å£ã\n\n\n# å¾®è° repository å®ä¹\n\nspring data æä¾äºå¾å¤ç§ repository ä»¥åºå¯¹ä¸åçéæ±åºæ¯ã\n\ncrudrepository æä¾äº crud åè½ã\n\nlistcrudrepository å crudrepository ç±»ä¼¼ï¼ä½å¯¹äºé£äºè¿åå¤ä¸ªå®ä½çæ¹æ³ï¼å®è¿åä¸ä¸ª list èä¸æ¯ iterableï¼è¿æ ·ä½¿ç¨å¯è½æ´æ¹ä¾¿ã\n\nå¦æä½¿ç¨ååºå¼æ¡æ¶ï¼å¯ä»¥ä½¿ç¨ reactivecrudrepository æ rxjava3crudrepositoryã\n\ncoroutinecrudrepository æ¯æ kotlin çåç¨ç¹æ§ã\n\npagingandsortingrepository æä¾äºåé¡µãæåºåè½ã\n\nå¦æä¸æ³æ©å± spring data æ¥å£ï¼è¿å¯ä»¥ä½¿ç¨ @repositorydefinition æ³¨éæ¨ç repository æ¥å£ã æ©å±ä¸ä¸ª crud repository æ¥å£ï¼éè¦æ´é²ä¸ç»å®æ´çæ¹æ³æ¥æä½å®ä½ãå¦æå¸æå¯¹æ´é²çæ¹æ³æéæ©æ§ï¼å¯ä»¥å°è¦æ´é²çæ¹æ³ä» crud repository å¤å¶å°èªå®ä¹ç repository ä¸­ã è¿æ ·åæ¶ï¼å¯ä»¥æ´æ¹æ¹æ³çè¿åç±»åã å¦æå¯è½ï¼spring data å°éµå¾ªè¿åç±»åã ä¾å¦ï¼å¯¹äºè¿åå¤ä¸ªå®ä½çæ¹æ³ï¼å¯ä»¥éæ© iterable<t>ãlist<t>ãcollection<t> æ vavr åè¡¨ã\n\nèªå®ä¹åºç¡ repository æ¥å£ï¼å¿é¡»ç¨ @norepositorybean æ è®°ã è¿å¯ä»¥é²æ­¢ spring data å°è¯ç´æ¥åå»ºå®çå®ä¾å¹¶å¤±è´¥ï¼å ä¸ºå®æ æ³ç¡®å®è¯¥ repository çå®ä½ï¼å ä¸ºå®ä»ç¶åå«ä¸ä¸ªéç¨ç±»ååéã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æéæ©å°æ´é² crud æ¹æ³ï¼å¨æ¬ä¾ä¸­ä¸º findbyid å saveï¼ï¼\n\n@norepositorybean\ninterface mybaserepository<t, id> extends repository<t, id> {\n\n  optional<t> findbyid(id id);\n\n  <s extends t> s save(s entity);\n}\n\ninterface userrepository extends mybaserepository<user, long> {\n  user findbyemailaddress(emailaddress emailaddress);\n}\n\n\n\n# ä½¿ç¨å¤ä¸ª spring æ°æ®æ¨¡å\n\nææ¶ï¼ç¨åºä¸­éè¦ä½¿ç¨å¤ä¸ª spring data æ¨¡åãå¨è¿ç§æåµä¸ï¼å¿é¡»åºåæä¹åææ¯ãå½æ£æµå°ç±»è·¯å¾ä¸æå¤ä¸ª repository å·¥åæ¶ï¼spring data è¿å¥ä¸¥æ ¼çéç½®æ¨¡å¼ã\n\nå¦æå®ä¹ç repository æ©å±äºç¹å®æ¨¡åä¸­ç repositoryï¼åå®æ¯ç¹å® spring data æ¨¡åçææåéèã\n\nå¦æå®ä½ç±»ä½¿ç¨äºç¹å®æ¨¡åçç±»åæ³¨è§£ï¼åå®æ¯ç¹å® spring data æ¨¡åçææåéèã spring data æ¨¡åæ¥åç¬¬ä¸æ¹æ³¨è§£ï¼ä¾å¦ jpa ç @entityï¼ææä¾èªå·±çæ³¨è§£ï¼ä¾å¦ç¨äº spring data mongodb å spring data elasticsearch ç @documentï¼ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨æ¨¡åç¹å®æ¥å£ï¼å¨æ¬ä¾ä¸­ä¸º jpaï¼ç repositoryï¼\n\ninterface myrepository extends jparepository<user, long> { }\n\n@norepositorybean\ninterface mybaserepository<t, id> extends jparepository<t, id> { â¦ }\n\ninterface userrepository extends mybaserepository<user, long> { â¦ }\n\n\nmyrepository å userrepository æ©å±äº jparepositoryãå®ä»¬æ¯ spring data jpa æ¨¡åçææåéèã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨éç¨æ¥å£ç repository\n\ninterface ambiguousrepository extends repository<user, long> { â¦ }\n\n@norepositorybean\ninterface mybaserepository<t, id> extends crudrepository<t, id> { â¦ }\n\ninterface ambiguoususerrepository extends mybaserepository<user, long> { â¦ }\n\n\nambiguousrepository å ambiguoususerrepository ä»æ©å±äº repository å crudrepositoryã è½ç¶è¿å¨ä½¿ç¨å¯ä¸ç spring data æ¨¡åæ¶å¾å¥½ï¼ä½æ¯å­å¨å¤ä¸ªæ¨¡åæ¶ï¼æ æ³åºåè¿äº repository åºè¯¥ç»å®å°åªä¸ªç¹å®ç spring dataã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨å¸¦æ³¨è§£çå®ä½ç±»ç repository\n\ninterface personrepository extends repository<person, long> { â¦ }\n\n@entity\nclass person { â¦ }\n\ninterface userrepository extends repository<user, long> { â¦ }\n\n@document\nclass user { â¦ }\n\n\npersonrepository å¼ç¨ personï¼å®ä½¿ç¨ jpa @entity æ³¨è§£è¿è¡æ è®°ï¼å æ­¤è¿ä¸ª repository æ¾ç¶å±äº spring data jpaã userrepository å¼ç¨ userï¼å®ä½¿ç¨ spring data mongodb ç @document æ³¨è§£è¿è¡æ è®°ã\n\nä»¥ä¸éè¯¯ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªä½¿ç¨å¸¦ææ··åæ³¨è§£çå®ä½ç±»ç repository\n\ninterface jpapersonrepository extends repository<person, long> { â¦ }\n\ninterface mongodbpersonrepository extends repository<person, long> { â¦ }\n\n@entity\n@document\nclass person { â¦ }\n\n\næ­¤ç¤ºä¾ä¸­çå®ä½ç±»åæ¶ä½¿ç¨äº jpa å spring data mongodb çæ³¨è§£ãç¤ºä¾ä¸­å®ä¹äºä¸¤ä¸ª repositoryï¼jpapersonrepository å mongodbpersonrepositoryã ä¸ä¸ªç¨äº jpaï¼å¦ä¸ä¸ªç¨äº mongodbã spring data ä¸åè½å¤åºå repositoryï¼è¿ä¼å¯¼è´æªå®ä¹çè¡ä¸ºã\n\nåºå repository çæåä¸ç§æ¹æ³æ¯ç¡®å® repository æ«æ package çèå´ã\n\n@enablejparepositories(basepackages = "com.acme.repositories.jpa")\n@enablemongorepositories(basepackages = "com.acme.repositories.mongo")\nclass configuration { â¦ }\n\n\n\n# å®ä¹æ¥è¯¢æ¹æ³\n\nrepository ä»£çæä¸¤ç§æ¹æ³å¯ä»¥ä»æ¹æ³åç§°æ´¾çç¹å®äºå­å¨çæ¥è¯¢ï¼\n\n * éè¿ç´æ¥ä»æ¹æ³åç§°æ´¾çæ¥è¯¢ã\n * éè¿ä½¿ç¨æå¨å®ä¹çæ¥è¯¢ã\n\nå¯ç¨éé¡¹åå³äºå®éå­å¨ãä½æ¯ï¼å¿é¡»æä¸ä¸ªç­ç¥æ¥å³å®åå»ºä»ä¹å®éæ¥è¯¢ã\n\n\n# æ¥è¯¢ç­ç¥\n\nä»¥ä¸ç­ç¥å¯ç¨äºrepository åºç¡ç»ææ¥è§£ææ¥è¯¢ã å¯¹äº java éç½®ï¼æ¨å¯ä»¥ä½¿ç¨ enablejparepositories æ³¨éç querylookupstrategy å±æ§ã ç¹å®æ°æ®å­å¨å¯è½ä¸æ¯ææäºç­ç¥ã\n\n * create å°è¯ä»æ¥è¯¢æ¹æ³åç§°æé ç¹å®å­å¨çæ¥è¯¢ã\n * use_declared_query å°è¯æ¥æ¾å·²å£°æçæ¥è¯¢ï¼å¦ææ¾ä¸å°åæåºå¼å¸¸ã\n * create_if_not_found ï¼é»è®¤ï¼ç»åäº create å use_declared_queryã\n\n\n# æ¥è¯¢åå»º\n\nspring data ä¸­æä¸å¥åç½®çæ¥è¯¢æå»ºå¨æºå¶ï¼å¯ä»¥èªå¨æ å°ç¬¦åå½åååæ°è§åçæ¹æ³ã\n\ninterface personrepository extends repository<person, long> {\n\n  list<person> findbyemailaddressandlastname(emailaddress emailaddress, string lastname);\n\n  // enables the distinct flag for the query\n  list<person> finddistinctpeoplebylastnameorfirstname(string lastname, string firstname);\n  list<person> findpeopledistinctbylastnameorfirstname(string lastname, string firstname);\n\n  // enabling ignoring case for an individual property\n  list<person> findbylastnameignorecase(string lastname);\n  // enabling ignoring case for all suitable properties\n  list<person> findbylastnameandfirstnameallignorecase(string lastname, string firstname);\n\n  // enabling static order by for a query\n  list<person> findbylastnameorderbyfirstnameasc(string lastname);\n  list<person> findbylastnameorderbyfirstnamedesc(string lastname);\n}\n\n\nè§£ææ¥è¯¢æ¹æ³åç§°åä¸ºä¸»è¯­åè°è¯­ãç¬¬ä¸é¨å (findâ¦by, existsâ¦by) å®ä¹æ¥è¯¢çä¸»è¯­ï¼ç¬¬äºé¨åææè°è¯ã ä¸»è¯­å¯ä»¥åå«æ´å¤çè¡¨è¾¾ã findï¼æå¶ä»å¼å¥å³é®å­ï¼å by ä¹é´çä»»ä½ææ¬é½è¢«è®¤ä¸ºæ¯æè¿°æ§çï¼é¤éä½¿ç¨å¶ä¸­ä¸ä¸ªç»æéå¶å³é®å­ï¼ä¾å¦ distinct å¨è¦åå»ºçæ¥è¯¢ä¸è®¾ç½®ä¸åçæ å¿æ top/first éå¶æ¥è¯¢ç»æã\n\n> åèï¼\n> \n> spring data æ¯æçæ¥è¯¢ä¸»è¯­å³é®è¯\n> \n> spring data æ¯æçæ¥è¯¢è°è¯­å³é®è¯\n\n\n# åå»º repository å®ä¾\n\n\n# èªå®ä¹ repository å®ç°\n\n\n# spring data æ©å±\n\n\n# åèèµæ\n\n * redis å®ç½\n * redis github\n * spring-data-redis github\n * spring data redis å®æ¹ææ¡£\n * spring data å®æ¹ç¤ºä¾',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring è®¿é® MongoDB",frontmatter:{title:"Spring è®¿é® MongoDB",date:"2018-12-15T17:29:36.000Z",order:22,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","MongoDB"],permalink:"/pages/db2a41/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/22.Spring%E8%AE%BF%E9%97%AEMongoDB.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/22.Springè®¿é®MongoDB.md",key:"v-361cf50d",path:"/pages/db2a41/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:24},{level:2,title:"Spring Boot å¿«éå¥é¨",slug:"spring-boot-å¿«éå¥é¨",normalizedTitle:"spring boot å¿«éå¥é¨",charIndex:440},{level:3,title:"å¼å¥ä¾èµ",slug:"å¼å¥ä¾èµ",normalizedTitle:"å¼å¥ä¾èµ",charIndex:461},{level:3,title:"æ°æ®æºéç½®",slug:"æ°æ®æºéç½®",normalizedTitle:"æ°æ®æºéç½®",charIndex:623},{level:3,title:"å®ä¹å®ä½",slug:"å®ä¹å®ä½",normalizedTitle:"å®ä¹å®ä½",charIndex:813},{level:3,title:"åå»º Repository",slug:"åå»º-repository",normalizedTitle:"åå»º repository",charIndex:1442},{level:3,title:"åå»º Application",slug:"åå»º-application",normalizedTitle:"åå»º application",charIndex:1952},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:4240},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:4290}],headersStr:"ç®ä» Spring Boot å¿«éå¥é¨ å¼å¥ä¾èµ æ°æ®æºéç½® å®ä¹å®ä½ åå»º Repository åå»º Application ç¤ºä¾æºç  åèèµæ",content:'# Spring è®¿é® MongoDB\n\n\n# ç®ä»\n\nMongoDB æ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çæ°æ®åºãç± C++ è¯­è¨ç¼åãæ¨å¨ä¸º WEB åºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ãMongoDB å°æ°æ®å­å¨ä¸ºä¸ä¸ªææ¡£ï¼æ°æ®ç»æç±é®å¼å¯¹ç»æãMongoDB ææ¡£ç±»ä¼¼äº JSON å¯¹è±¡ãå­æ®µå¼å¯ä»¥åå«å¶ä»ææ¡£ï¼æ°ç»åææ¡£æ°ç»ã\n\nå¨ Spring ä¸­ï¼spring-data-mongodb é¡¹ç®å¯¹è®¿é® MongoDB è¿è¡äº API å°è£ï¼æä¾äºä¾¿æ·çè®¿é®æ¹å¼ã Spring Data MongoDB çæ ¸å¿æ¯ä¸ä¸ªä»¥ POJO ä¸ºä¸­å¿çæ¨¡åï¼ç¨äºä¸ MongoDB DBCollection äº¤äºå¹¶è½»æ¾ç¼å Repository æ ·å¼çæ°æ®è®¿é®å±ã\n\nspring-boot é¡¹ç®ä¸­çå­æ¨¡å spring-boot-starter-data-mongodb åºäº spring-data-mongodb é¡¹ç®ï¼åäºäºæ¬¡å°è£ï¼å¤§å¤§ç®åäº MongoDB çç¸å³éç½®ã\n\n\n# Spring Boot å¿«éå¥é¨\n\n\n# å¼å¥ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥ä¾èµï¼\n\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-data-mongodb</artifactId>\n</dependency>\n\n\n\n# æ°æ®æºéç½®\n\nspring.data.mongodb.host = localhost\nspring.data.mongodb.port = 27017\nspring.data.mongodb.database = test\nspring.data.mongodb.username = root\nspring.data.mongodb.password = root\n\n\n\n# å®ä¹å®ä½\n\nå®ä¹ä¸ä¸ªå·æä¸ä¸ªå±æ§ç Customer ç±»ï¼idãfirstName å lastName\n\nimport org.springframework.data.annotation.Id;\n\npublic class Customer {\n\n    @Id\n    public String id;\n\n    public String firstName;\n\n    public String lastName;\n\n    public Customer(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\n            "Customer[id=%s, firstName=\'%s\', lastName=\'%s\']",\n            id, firstName, lastName);\n    }\n\n}\n\n\nspring-data-mongodb ä¼å° Customer ç±»æ å°å°ä¸ä¸ªåä¸º customer çéåä¸­ãå¦æè¦æ´æ¹éåçåç§°ï¼å¯ä»¥å¨ç±»ä¸ä½¿ç¨ @Document æ³¨è§£ã\n\n\n# åå»º Repository\n\nspring-data-mongodb ç»§æ¿äº Spring Data Commons é¡¹ç®çè½åï¼æä»¥å¯ä»¥ä½¿ç¨å¶éç¨ APIââRepositoryã\n\nåå®ä¹ä¸ä¸ª CustomerRepository ç±»ï¼ç»§æ¿ MongoRepository æ¥å£ï¼å¹¶æå®å¶æ³ååæ°ï¼Customer å StringãMongoRepository æ¥å£æ¯æå¤ç§æä½ï¼åæ¬ CRUD ååé¡µæ¥è¯¢ãå¨ä¸é¢çä¾å­ä¸­ï¼å®ä¹äºä¸¤ä¸ªæ¥è¯¢æ¹æ³ï¼\n\nimport java.util.List;\n\nimport org.springframework.data.mongodb.repository.MongoRepository;\n\npublic interface CustomerRepository extends MongoRepository<Customer, String> {\n\n    Customer findByFirstName(String firstName);\n    List<Customer> findByLastName(String lastName);\n\n}\n\n\n\n# åå»º Application\n\nåå»ºä¸ä¸ª Spring Boot çå¯å¨ç±» Applicationï¼å¹¶å¨å¯å¨ç main æ¹æ³ä¸­ä½¿ç¨ CustomerRepository å®ä¾è®¿é® MongoDBã\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DataMongodbApplication implements CommandLineRunner {\n\n    @Autowired\n    private CustomerRepository repository;\n\n    public static void main(String[] args) {\n        SpringApplication.run(DataMongodbApplication.class, args);\n    }\n\n    @Override\n    public void run(String... args) {\n\n        repository.deleteAll();\n\n        // save a couple of customers\n        repository.save(new Customer("Alice", "Smith"));\n        repository.save(new Customer("Bob", "Smith"));\n\n        // fetch all customers\n        System.out.println("Customers found with findAll():");\n        System.out.println("-------------------------------");\n        for (Customer customer : repository.findAll()) {\n            System.out.println(customer);\n        }\n        System.out.println();\n\n        // fetch an individual customer\n        System.out.println("Customer found with findByFirstName(\'Alice\'):");\n        System.out.println("--------------------------------");\n        System.out.println(repository.findByFirstName("Alice"));\n\n        System.out.println("Customers found with findByLastName(\'Smith\'):");\n        System.out.println("--------------------------------");\n        for (Customer customer : repository.findByLastName("Smith")) {\n            System.out.println(customer);\n        }\n    }\n\n}\n\n\nè¿è¡ DataMongodbApplication ç main æ¹æ³åï¼è¾åºç±»ä¼¼å¦ä¸ç±»å®¹ï¼\n\nCustomers found with findAll():\n-------------------------------\nCustomer(id=63d6157b265e7c5e48077f63, firstName=Alice, lastName=Smith)\nCustomer(id=63d6157b265e7c5e48077f64, firstName=Bob, lastName=Smith)\n\nCustomer found with findByFirstName(\'Alice\'):\n--------------------------------\nCustomer(id=63d6157b265e7c5e48077f63, firstName=Alice, lastName=Smith)\nCustomers found with findByLastName(\'Smith\'):\n--------------------------------\nCustomer(id=63d6157b265e7c5e48077f63, firstName=Alice, lastName=Smith)\nCustomer(id=63d6157b265e7c5e48077f64, firstName=Bob, lastName=Smith)\n\n\n\n# ç¤ºä¾æºç \n\næ´å¤ Spring è®¿é® MongoDB ç¤ºä¾è¯·åèï¼MongoDB ç¤ºä¾æºç \n\n\n# åèèµæ\n\n * MongoDB å®ç½\n * MongoDB Github\n * MongoDB å®æ¹åè´¹æç¨\n * spring-data-mongodb Github\n * Spring Data MongoDB å®æ¹ææ¡£\n * Spring Data å®æ¹ç¤ºä¾\n * Accessing Data with MongoDB\n * Accessing MongoDB Data with REST',normalizedContent:'# spring è®¿é® mongodb\n\n\n# ç®ä»\n\nmongodb æ¯ä¸ä¸ªåºäºåå¸å¼æä»¶å­å¨çæ°æ®åºãç± c++ è¯­è¨ç¼åãæ¨å¨ä¸º web åºç¨æä¾å¯æ©å±çé«æ§è½æ°æ®å­å¨è§£å³æ¹æ¡ãmongodb å°æ°æ®å­å¨ä¸ºä¸ä¸ªææ¡£ï¼æ°æ®ç»æç±é®å¼å¯¹ç»æãmongodb ææ¡£ç±»ä¼¼äº json å¯¹è±¡ãå­æ®µå¼å¯ä»¥åå«å¶ä»ææ¡£ï¼æ°ç»åææ¡£æ°ç»ã\n\nå¨ spring ä¸­ï¼spring-data-mongodb é¡¹ç®å¯¹è®¿é® mongodb è¿è¡äº api å°è£ï¼æä¾äºä¾¿æ·çè®¿é®æ¹å¼ã spring data mongodb çæ ¸å¿æ¯ä¸ä¸ªä»¥ pojo ä¸ºä¸­å¿çæ¨¡åï¼ç¨äºä¸ mongodb dbcollection äº¤äºå¹¶è½»æ¾ç¼å repository æ ·å¼çæ°æ®è®¿é®å±ã\n\nspring-boot é¡¹ç®ä¸­çå­æ¨¡å spring-boot-starter-data-mongodb åºäº spring-data-mongodb é¡¹ç®ï¼åäºäºæ¬¡å°è£ï¼å¤§å¤§ç®åäº mongodb çç¸å³éç½®ã\n\n\n# spring boot å¿«éå¥é¨\n\n\n# å¼å¥ä¾èµ\n\nå¨ pom.xml ä¸­å¼å¥ä¾èµï¼\n\n<dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-data-mongodb</artifactid>\n</dependency>\n\n\n\n# æ°æ®æºéç½®\n\nspring.data.mongodb.host = localhost\nspring.data.mongodb.port = 27017\nspring.data.mongodb.database = test\nspring.data.mongodb.username = root\nspring.data.mongodb.password = root\n\n\n\n# å®ä¹å®ä½\n\nå®ä¹ä¸ä¸ªå·æä¸ä¸ªå±æ§ç customer ç±»ï¼idãfirstname å lastname\n\nimport org.springframework.data.annotation.id;\n\npublic class customer {\n\n    @id\n    public string id;\n\n    public string firstname;\n\n    public string lastname;\n\n    public customer(string firstname, string lastname) {\n        this.firstname = firstname;\n        this.lastname = lastname;\n    }\n\n    @override\n    public string tostring() {\n        return string.format(\n            "customer[id=%s, firstname=\'%s\', lastname=\'%s\']",\n            id, firstname, lastname);\n    }\n\n}\n\n\nspring-data-mongodb ä¼å° customer ç±»æ å°å°ä¸ä¸ªåä¸º customer çéåä¸­ãå¦æè¦æ´æ¹éåçåç§°ï¼å¯ä»¥å¨ç±»ä¸ä½¿ç¨ @document æ³¨è§£ã\n\n\n# åå»º repository\n\nspring-data-mongodb ç»§æ¿äº spring data commons é¡¹ç®çè½åï¼æä»¥å¯ä»¥ä½¿ç¨å¶éç¨ apiâârepositoryã\n\nåå®ä¹ä¸ä¸ª customerrepository ç±»ï¼ç»§æ¿ mongorepository æ¥å£ï¼å¹¶æå®å¶æ³ååæ°ï¼customer å stringãmongorepository æ¥å£æ¯æå¤ç§æä½ï¼åæ¬ crud ååé¡µæ¥è¯¢ãå¨ä¸é¢çä¾å­ä¸­ï¼å®ä¹äºä¸¤ä¸ªæ¥è¯¢æ¹æ³ï¼\n\nimport java.util.list;\n\nimport org.springframework.data.mongodb.repository.mongorepository;\n\npublic interface customerrepository extends mongorepository<customer, string> {\n\n    customer findbyfirstname(string firstname);\n    list<customer> findbylastname(string lastname);\n\n}\n\n\n\n# åå»º application\n\nåå»ºä¸ä¸ª spring boot çå¯å¨ç±» applicationï¼å¹¶å¨å¯å¨ç main æ¹æ³ä¸­ä½¿ç¨ customerrepository å®ä¾è®¿é® mongodbã\n\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.boot.commandlinerunner;\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\n\n@springbootapplication\npublic class datamongodbapplication implements commandlinerunner {\n\n    @autowired\n    private customerrepository repository;\n\n    public static void main(string[] args) {\n        springapplication.run(datamongodbapplication.class, args);\n    }\n\n    @override\n    public void run(string... args) {\n\n        repository.deleteall();\n\n        // save a couple of customers\n        repository.save(new customer("alice", "smith"));\n        repository.save(new customer("bob", "smith"));\n\n        // fetch all customers\n        system.out.println("customers found with findall():");\n        system.out.println("-------------------------------");\n        for (customer customer : repository.findall()) {\n            system.out.println(customer);\n        }\n        system.out.println();\n\n        // fetch an individual customer\n        system.out.println("customer found with findbyfirstname(\'alice\'):");\n        system.out.println("--------------------------------");\n        system.out.println(repository.findbyfirstname("alice"));\n\n        system.out.println("customers found with findbylastname(\'smith\'):");\n        system.out.println("--------------------------------");\n        for (customer customer : repository.findbylastname("smith")) {\n            system.out.println(customer);\n        }\n    }\n\n}\n\n\nè¿è¡ datamongodbapplication ç main æ¹æ³åï¼è¾åºç±»ä¼¼å¦ä¸ç±»å®¹ï¼\n\ncustomers found with findall():\n-------------------------------\ncustomer(id=63d6157b265e7c5e48077f63, firstname=alice, lastname=smith)\ncustomer(id=63d6157b265e7c5e48077f64, firstname=bob, lastname=smith)\n\ncustomer found with findbyfirstname(\'alice\'):\n--------------------------------\ncustomer(id=63d6157b265e7c5e48077f63, firstname=alice, lastname=smith)\ncustomers found with findbylastname(\'smith\'):\n--------------------------------\ncustomer(id=63d6157b265e7c5e48077f63, firstname=alice, lastname=smith)\ncustomer(id=63d6157b265e7c5e48077f64, firstname=bob, lastname=smith)\n\n\n\n# ç¤ºä¾æºç \n\næ´å¤ spring è®¿é® mongodb ç¤ºä¾è¯·åèï¼mongodb ç¤ºä¾æºç \n\n\n# åèèµæ\n\n * mongodb å®ç½\n * mongodb github\n * mongodb å®æ¹åè´¹æç¨\n * spring-data-mongodb github\n * spring data mongodb å®æ¹ææ¡£\n * spring data å®æ¹ç¤ºä¾\n * accessing data with mongodb\n * accessing mongodb data with rest',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring æ°æ®ç¯",frontmatter:{title:"Spring æ°æ®ç¯",date:"2022-09-18T11:05:36.000Z",categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","æ°æ®åº"],permalink:"/pages/b912d1/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/README.md",key:"v-f86530fc",path:"/pages/b912d1/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:17},{level:2,title:"ð» ç¤ºä¾",slug:"ð»-ç¤ºä¾",normalizedTitle:"ð» ç¤ºä¾",charIndex:178},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:1554},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:1733}],headersStr:"ð åå®¹ ð» ç¤ºä¾ ð èµæ ðª ä¼ é",content:"# Spring æ°æ®ç¯\n\n\n# ð åå®¹\n\n * Spring ä¹æ°æ®æº\n * Spring ä¹ JDBC\n * Spring ä¹äºå¡\n * Spring ä¹ JPA\n * Spring éæ Mybatis\n * Spring è®¿é® Redis\n * Spring è®¿é® MongoDB\n * Spring è®¿é® Elasticsearch\n\n\n# ð» ç¤ºä¾\n\n * JDBC\n   * spring-data-jdbc-basics - Spring Boot ä»¥ JDBC æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ JdbcTemplate æ§è¡åºæ¬ç CRUD æä½ã\n   * spring-data-jdbc-druid - SpringBoot ä½¿ç¨ Druid ä½ä¸ºæ°æ®åºè¿æ¥æ± ã\n   * spring-data-jdbc-multi-datasource - SpringBoot è¿æ¥å¤æ°æ®æºç¤ºä¾ã\n   * spring-data-jdbc-xml - Spring ä»¥ JDBC æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ JdbcTemplate æ§è¡åºæ¬ç CRUD æä½ã\n * ORM\n   * spring-data-orm-jpa - SpringBoot ä½¿ç¨ JPA ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis - Spring ä½¿ç¨ MyBatis ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-mapper - SpringBoot ä½¿ç¨ MyBatis + Mapper + PageHelper ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-multi-datasource - SpringBoot è¿æ¥å¤æ°æ®æºï¼å¹¶ä½¿ç¨ MyBatis Plus ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-plus - SpringBoot ä½¿ç¨ MyBatis Plus ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n * Nosql\n   * spring-data-nosql-basics - Spring è®¿é®åç§ NoSQL çç¤ºä¾ã\n   * spring-data-nosql-mongodb - SpringBoot è®¿é® MongoDB çç¤ºä¾ã\n   * spring-data-nosql-redis - SpringBoot è®¿é® Redis åèç¹ãéç¾¤çç¤ºä¾ã\n   * spring-data-nosql-elasticsearch - SpringBoot è®¿é® Elasticsearch çç¤ºä¾ã\n   * spring-data-nosql-hdfs - SpringBoot è®¿é® HDFS çç¤ºä¾ã\n * Cache\n   * spring-data-cache-basics - SpringBoot é»è®¤ç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-j2cache - SpringBoot ä½¿ç¨ j2cache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-jetcache - SpringBoot ä½¿ç¨ jetcache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n * ä¸­é´ä»¶\n   * spring-data-middleware-flyway - Spring ä½¿ç¨çæ¬ç®¡çä¸­é´ä»¶ Flyway ç¤ºä¾ã\n   * spring-data-middleware-sharding - Spring ä½¿ç¨ååºåè¡¨ä¸­é´ä»¶ç¤ºä¾ã\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",normalizedContent:"# spring æ°æ®ç¯\n\n\n# ð åå®¹\n\n * spring ä¹æ°æ®æº\n * spring ä¹ jdbc\n * spring ä¹äºå¡\n * spring ä¹ jpa\n * spring éæ mybatis\n * spring è®¿é® redis\n * spring è®¿é® mongodb\n * spring è®¿é® elasticsearch\n\n\n# ð» ç¤ºä¾\n\n * jdbc\n   * spring-data-jdbc-basics - spring boot ä»¥ jdbc æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ jdbctemplate æ§è¡åºæ¬ç crud æä½ã\n   * spring-data-jdbc-druid - springboot ä½¿ç¨ druid ä½ä¸ºæ°æ®åºè¿æ¥æ± ã\n   * spring-data-jdbc-multi-datasource - springboot è¿æ¥å¤æ°æ®æºç¤ºä¾ã\n   * spring-data-jdbc-xml - spring ä»¥ jdbc æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ jdbctemplate æ§è¡åºæ¬ç crud æä½ã\n * orm\n   * spring-data-orm-jpa - springboot ä½¿ç¨ jpa ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis - spring ä½¿ç¨ mybatis ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-mapper - springboot ä½¿ç¨ mybatis + mapper + pagehelper ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-multi-datasource - springboot è¿æ¥å¤æ°æ®æºï¼å¹¶ä½¿ç¨ mybatis plus ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-plus - springboot ä½¿ç¨ mybatis plus ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n * nosql\n   * spring-data-nosql-basics - spring è®¿é®åç§ nosql çç¤ºä¾ã\n   * spring-data-nosql-mongodb - springboot è®¿é® mongodb çç¤ºä¾ã\n   * spring-data-nosql-redis - springboot è®¿é® redis åèç¹ãéç¾¤çç¤ºä¾ã\n   * spring-data-nosql-elasticsearch - springboot è®¿é® elasticsearch çç¤ºä¾ã\n   * spring-data-nosql-hdfs - springboot è®¿é® hdfs çç¤ºä¾ã\n * cache\n   * spring-data-cache-basics - springboot é»è®¤ç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-j2cache - springboot ä½¿ç¨ j2cache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-jetcache - springboot ä½¿ç¨ jetcache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n * ä¸­é´ä»¶\n   * spring-data-middleware-flyway - spring ä½¿ç¨çæ¬ç®¡çä¸­é´ä»¶ flyway ç¤ºä¾ã\n   * spring-data-middleware-sharding - spring ä½¿ç¨ååºåè¡¨ä¸­é´ä»¶ç¤ºä¾ã\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring è®¿é® Elasticsearch",frontmatter:{title:"Spring è®¿é® Elasticsearch",date:"2018-12-25T14:06:36.000Z",order:23,categories:["Java","æ¡æ¶","Spring","Springæ°æ®"],tags:["Java","æ¡æ¶","Spring","SpringBoot","Elasticsearch"],permalink:"/pages/fac14c/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/02.Spring%E6%95%B0%E6%8D%AE/23.Spring%E8%AE%BF%E9%97%AEElasticsearch.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/23.Springè®¿é®Elasticsearch.md",key:"v-c6474816",path:"/pages/fac14c/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:30},{level:3,title:"éè¿ REST å®¢æ·ç«¯è¿æ¥ Elasticsearch",slug:"éè¿-rest-å®¢æ·ç«¯è¿æ¥-elasticsearch",normalizedTitle:"éè¿ rest å®¢æ·ç«¯è¿æ¥ elasticsearch",charIndex:72},{level:3,title:"éè¿ Jest è¿æ¥ Elasticsearch",slug:"éè¿-jest-è¿æ¥-elasticsearch",normalizedTitle:"éè¿ jest è¿æ¥ elasticsearch",charIndex:660},{level:3,title:"éè¿ Spring Data è®¿é® Elasticsearch",slug:"éè¿-spring-data-è®¿é®-elasticsearch",normalizedTitle:"éè¿ spring data è®¿é® elasticsearch",charIndex:1321},{level:3,title:"Elasticsearch Repositories",slug:"elasticsearch-repositories",normalizedTitle:"elasticsearch repositories",charIndex:1852},{level:2,title:"æºç ",slug:"æºç ",normalizedTitle:"æºç ",charIndex:2013},{level:2,title:"çæ¬",slug:"çæ¬",normalizedTitle:"çæ¬",charIndex:2111},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2914}],headersStr:"ç®ä» éè¿ REST å®¢æ·ç«¯è¿æ¥ Elasticsearch éè¿ Jest è¿æ¥ Elasticsearch éè¿ Spring Data è®¿é® Elasticsearch Elasticsearch Repositories æºç  çæ¬ åèèµæ",content:"# Spring è®¿é® Elasticsearch\n\n\n# ç®ä»\n\nElasticsearch æ¯ä¸ä¸ªå¼æºçãåå¸å¼çæç´¢ååæå¼æã\n\n\n# éè¿ REST å®¢æ·ç«¯è¿æ¥ Elasticsearch\n\nå¦æå¨ classpath è·¯å¾ä¸å­å¨ org.elasticsearch.client:elasticsearch-rest-client jar åï¼Spring Boot ä¼èªå¨éç½®å¹¶æ³¨åä¸ä¸ª RestClient Beanï¼å®çé»è®¤è®¿é®è·¯å¾ä¸ºï¼localhost:9200ã\n\nä½ å¯ä»¥ä½¿ç¨å¦ä¸æ¹å¼è¿è¡å®å¶ï¼\n\nspring.elasticsearch.rest.uris=http://search.example.com:9200\nspring.elasticsearch.rest.username=user\nspring.elasticsearch.rest.password=secret\n\n\næ¨è¿å¯ä»¥æ³¨åå®ç°ä»»ææ°éç RestClientBuilderCustomizer beanï¼ä»¥è¿è¡æ´é«çº§çå®å¶ãè¦å®å¨æ§å¶æ³¨åï¼è¯·å®ä¹ RestClient beanã\n\nå¦æ classpath è·¯å¾æ org.elasticsearch.clientï¼elasticsearch-rest-high-level-client jar åï¼Spring Boot å°èªå¨éç½®ä¸ä¸ª RestHighLevelClientï¼å®åè£ä»»ä½ç°æç RestClient beanï¼éç¨å¶ HTTP éç½®ã\n\n\n# éè¿ Jest è¿æ¥ Elasticsearch\n\nå¦æ classpath ä¸æ Jestï¼ä½ å¯ä»¥æ³¨å¥ä¸ä¸ªèªå¨éç½®ç JestClientï¼é»è®¤æåµä¸æ¯ localhost:9200ãæ¨å¯ä»¥è¿ä¸æ­¥è°æ´å®¢æ·ç«¯çéç½®æ¹å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nspring.elasticsearch.jest.uris=http://search.example.com:9200\nspring.elasticsearch.jest.read-timeout=10000\nspring.elasticsearch.jest.username=user\nspring.elasticsearch.jest.password=secret\n\n\næ¨è¿å¯ä»¥æ³¨åå®ç°ä»»ææ°éç HttpClientConfigBuilderCustomizer beanï¼ä»¥è¿è¡æ´é«çº§çå®å¶ãä»¥ä¸ç¤ºä¾è°æ´ä¸ºå¶ä» HTTP è®¾ç½®ï¼\n\nstatic class HttpSettingsCustomizer implements HttpClientConfigBuilderCustomizer {\n\n\t@Override\n\tpublic void customize(HttpClientConfig.Builder builder) {\n\t\tbuilder.maxTotalConnection(100).defaultMaxTotalConnectionPerRoute(5);\n\t}\n\n}\n\n\nè¦å®å¨æ§å¶æ³¨åï¼è¯·å®ä¹ JestClient beanã\n\n\n# éè¿ Spring Data è®¿é® Elasticsearch\n\nè¦è¿æ¥å° Elasticsearchï¼æ¨å¿é¡»æä¾ä¸ä¸ªæå¤ä¸ªéç¾¤èç¹çå°åãå¯ä»¥éè¿å° spring.data.elasticsearch.cluster-nodes å±æ§è®¾ç½®ä¸ºä»¥éå·åéç host:port åè¡¨æ¥æå®å°åãä½¿ç¨æ­¤éç½®ï¼å¯ä»¥åä»»ä½å¶ä» Spring bean ä¸æ ·æ³¨å¥ ElasticsearchTemplate æ TransportClientï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nspring.data.elasticsearch.cluster-nodes=localhost:9300\n@Component\npublic class MyBean {\n\n\tprivate final ElasticsearchTemplate template;\n\n\tpublic MyBean(ElasticsearchTemplate template) {\n\t\tthis.template = template;\n\t}\n\n\t// ...\n\n}\n\n\nå¦æä½ æ·»å äºèªå®ä¹ç ElasticsearchTemplate æ TransportClient @Bean ï¼å°±ä¼æ¿æ¢é»è®¤çéç½®ã\n\n\n# Elasticsearch Repositories\n\nSpring Data åå«å¯¹ Elasticsearch ç repository æ¯æãåºæ¬ååæ¯æ ¹æ®æ¹æ³åç§°èªå¨ä¸ºæ¨æå»ºæ¥è¯¢ã\n\näºå®ä¸ï¼Spring Data JPA å Spring Data Elasticsearch å±äº«ç¸åçéç¨åºç¡æ¶æã\n\n\n# æºç \n\nå®æ´ç¤ºä¾ï¼æºç \n\nä½¿ç¨æ¹æ³ï¼\n\nmvn clean package\ncd target\njava -jar spring-boot-data-elasticsearch.jar\n\n\n\n# çæ¬\n\nSpring å Elasticsearch å¹éçæ¬ï¼\n\nSPRING DATA ELASTICSEARCH   ELASTICSEARCH   SPRING FRAMEWORK   SPRING BOOT\n5.0.x                       8.5.3           6.0.x              3.0.x\n4.4.x                       7.17.3          5.3.x              2.7.x\n4.3.x                       7.15.2          5.3.x              2.6.x\n4.2.x[1]                    7.12.0          5.3.x              2.5.x\n4.1.x[1]                    7.9.3           5.3.2              2.4.x\n4.0.x[1]                    7.6.2           5.2.12             2.3.x\n3.2.x[1]                    6.8.12          5.2.12             2.2.x\n3.1.x[1]                    6.2.2           5.1.19             2.1.x\n3.0.x[1]                    5.5.0           5.0.13             2.0.x\n2.1.x[1]                    2.4.0           4.3.25             1.5.x\n\n\n# åèèµæ\n\n * å®æ¹\n   * Elasticsearch å®ç½\n   * Elasticsearch Github\n   * Elasticsearch å®æ¹ææ¡£\n   * Elasticsearch: The Definitive Guide - ElasticSearch å®æ¹å­¦ä¹ èµæ\n * Spring Boot å®æ¹ææ¡£ä¹ boot-features-elasticsearch\n * Spring Data Elasticsearch Github\n * Spring Data Elasticsearch å®æ¹ææ¡£",normalizedContent:"# spring è®¿é® elasticsearch\n\n\n# ç®ä»\n\nelasticsearch æ¯ä¸ä¸ªå¼æºçãåå¸å¼çæç´¢ååæå¼æã\n\n\n# éè¿ rest å®¢æ·ç«¯è¿æ¥ elasticsearch\n\nå¦æå¨ classpath è·¯å¾ä¸å­å¨ org.elasticsearch.client:elasticsearch-rest-client jar åï¼spring boot ä¼èªå¨éç½®å¹¶æ³¨åä¸ä¸ª restclient beanï¼å®çé»è®¤è®¿é®è·¯å¾ä¸ºï¼localhost:9200ã\n\nä½ å¯ä»¥ä½¿ç¨å¦ä¸æ¹å¼è¿è¡å®å¶ï¼\n\nspring.elasticsearch.rest.uris=http://search.example.com:9200\nspring.elasticsearch.rest.username=user\nspring.elasticsearch.rest.password=secret\n\n\næ¨è¿å¯ä»¥æ³¨åå®ç°ä»»ææ°éç restclientbuildercustomizer beanï¼ä»¥è¿è¡æ´é«çº§çå®å¶ãè¦å®å¨æ§å¶æ³¨åï¼è¯·å®ä¹ restclient beanã\n\nå¦æ classpath è·¯å¾æ org.elasticsearch.clientï¼elasticsearch-rest-high-level-client jar åï¼spring boot å°èªå¨éç½®ä¸ä¸ª resthighlevelclientï¼å®åè£ä»»ä½ç°æç restclient beanï¼éç¨å¶ http éç½®ã\n\n\n# éè¿ jest è¿æ¥ elasticsearch\n\nå¦æ classpath ä¸æ jestï¼ä½ å¯ä»¥æ³¨å¥ä¸ä¸ªèªå¨éç½®ç jestclientï¼é»è®¤æåµä¸æ¯ localhost:9200ãæ¨å¯ä»¥è¿ä¸æ­¥è°æ´å®¢æ·ç«¯çéç½®æ¹å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nspring.elasticsearch.jest.uris=http://search.example.com:9200\nspring.elasticsearch.jest.read-timeout=10000\nspring.elasticsearch.jest.username=user\nspring.elasticsearch.jest.password=secret\n\n\næ¨è¿å¯ä»¥æ³¨åå®ç°ä»»ææ°éç httpclientconfigbuildercustomizer beanï¼ä»¥è¿è¡æ´é«çº§çå®å¶ãä»¥ä¸ç¤ºä¾è°æ´ä¸ºå¶ä» http è®¾ç½®ï¼\n\nstatic class httpsettingscustomizer implements httpclientconfigbuildercustomizer {\n\n\t@override\n\tpublic void customize(httpclientconfig.builder builder) {\n\t\tbuilder.maxtotalconnection(100).defaultmaxtotalconnectionperroute(5);\n\t}\n\n}\n\n\nè¦å®å¨æ§å¶æ³¨åï¼è¯·å®ä¹ jestclient beanã\n\n\n# éè¿ spring data è®¿é® elasticsearch\n\nè¦è¿æ¥å° elasticsearchï¼æ¨å¿é¡»æä¾ä¸ä¸ªæå¤ä¸ªéç¾¤èç¹çå°åãå¯ä»¥éè¿å° spring.data.elasticsearch.cluster-nodes å±æ§è®¾ç½®ä¸ºä»¥éå·åéç host:port åè¡¨æ¥æå®å°åãä½¿ç¨æ­¤éç½®ï¼å¯ä»¥åä»»ä½å¶ä» spring bean ä¸æ ·æ³¨å¥ elasticsearchtemplate æ transportclientï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nspring.data.elasticsearch.cluster-nodes=localhost:9300\n@component\npublic class mybean {\n\n\tprivate final elasticsearchtemplate template;\n\n\tpublic mybean(elasticsearchtemplate template) {\n\t\tthis.template = template;\n\t}\n\n\t// ...\n\n}\n\n\nå¦æä½ æ·»å äºèªå®ä¹ç elasticsearchtemplate æ transportclient @bean ï¼å°±ä¼æ¿æ¢é»è®¤çéç½®ã\n\n\n# elasticsearch repositories\n\nspring data åå«å¯¹ elasticsearch ç repository æ¯æãåºæ¬ååæ¯æ ¹æ®æ¹æ³åç§°èªå¨ä¸ºæ¨æå»ºæ¥è¯¢ã\n\näºå®ä¸ï¼spring data jpa å spring data elasticsearch å±äº«ç¸åçéç¨åºç¡æ¶æã\n\n\n# æºç \n\nå®æ´ç¤ºä¾ï¼æºç \n\nä½¿ç¨æ¹æ³ï¼\n\nmvn clean package\ncd target\njava -jar spring-boot-data-elasticsearch.jar\n\n\n\n# çæ¬\n\nspring å elasticsearch å¹éçæ¬ï¼\n\nspring data elasticsearch   elasticsearch   spring framework   spring boot\n5.0.x                       8.5.3           6.0.x              3.0.x\n4.4.x                       7.17.3          5.3.x              2.7.x\n4.3.x                       7.15.2          5.3.x              2.6.x\n4.2.x[1]                    7.12.0          5.3.x              2.5.x\n4.1.x[1]                    7.9.3           5.3.2              2.4.x\n4.0.x[1]                    7.6.2           5.2.12             2.3.x\n3.2.x[1]                    6.8.12          5.2.12             2.2.x\n3.1.x[1]                    6.2.2           5.1.19             2.1.x\n3.0.x[1]                    5.5.0           5.0.13             2.0.x\n2.1.x[1]                    2.4.0           4.3.25             1.5.x\n\n\n# åèèµæ\n\n * å®æ¹\n   * elasticsearch å®ç½\n   * elasticsearch github\n   * elasticsearch å®æ¹ææ¡£\n   * elasticsearch: the definitive guide - elasticsearch å®æ¹å­¦ä¹ èµæ\n * spring boot å®æ¹ææ¡£ä¹ boot-features-elasticsearch\n * spring data elasticsearch github\n * spring data elasticsearch å®æ¹ææ¡£",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Web ç»¼è¿°",frontmatter:{title:"Spring Web ç»¼è¿°",date:"2017-11-08T16:53:27.000Z",categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","Web"],permalink:"/pages/65351b/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/01.SpringWeb%E7%BB%BC%E8%BF%B0.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/01.SpringWebç»¼è¿°.md",key:"v-443c98b2",path:"/pages/65351b/",headers:[{level:2,title:"å¿«éå¥é¨",slug:"å¿«éå¥é¨",normalizedTitle:"å¿«éå¥é¨",charIndex:20},{level:2,title:"SpringMVC å·¥ä½æµç¨",slug:"springmvc-å·¥ä½æµç¨",normalizedTitle:"springmvc å·¥ä½æµç¨",charIndex:1369},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2345}],headersStr:"å¿«éå¥é¨ SpringMVC å·¥ä½æµç¨ åèèµæ",content:'# Spring Web ç»¼è¿°\n\n\n# å¿«éå¥é¨\n\nä¸é¢ï¼éè¿ä¸ä¸ªç®åçç¤ºä¾æ¥å±ç¤ºå¦ä½éè¿ Spring åå»ºä¸ä¸ª Hello World Web æå¡ã\n\nï¼1ï¼pom.xml ä¸­å¼å¥ä¾èµ\n\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n\n\nï¼2ï¼å®ä¹ Controller\n\nSpring æå»º RESTful æå¡çæ¹æ³ï¼HTTP è¯·æ±ç± Controller å¤çã è¿äºç»ä»¶ç± @RestController æ³¨è§£æ è¯ã\n\nãç¤ºä¾ãä¸é¢çç¤ºä¾å®ä¹äºä¸ä¸ªå¤ç /greeting ç GET è¯·æ±\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class GreetingController {\n\n    @GetMapping("/greeting")\n    public String greeting(@RequestParam(name = "name", required = false, defaultValue = "World") String name,\n        Model model) {\n        model.addAttribute("name", name);\n        return "greeting";\n    }\n\n}\n\n\nï¼3ï¼åå»ºå¯å¨ç±»\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class HelloWorldApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(HelloWorldApplication.class);\n    }\n\n}\n\n\nï¼4ï¼å¯å¨æå¡ï¼æ§è¡ HelloWorldApplication.main æ¹æ³å¯å¨ web æå¡\n\nï¼5ï¼æµè¯\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greetingï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nHello, World!\n\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greeting?name=dunwuï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nHello, dunwu!\n\n\n\n# SpringMVC å·¥ä½æµç¨\n\nSpring MVC çå·¥ä½æµç¨å¯ä»¥ç¨ä¸å¹å¾æ¥è¯´æï¼\n\n\n\n 1. åæå¡å¨åé HTTP è¯·æ±ï¼è¯·æ±è¢«åç«¯æ§å¶å¨ DispatcherServlet æè·ã\n 2. DispatcherServlet æ ¹æ® <servlet-name>-servlet.xml ä¸­çéç½®å¯¹è¯·æ±ç URL è¿è¡è§£æï¼å¾å°è¯·æ±èµæºæ è¯ç¬¦ï¼URIï¼ãç¶åæ ¹æ®è¯¥ URIï¼è°ç¨ HandlerMapping è·å¾è¯¥ Handler éç½®çææç¸å³çå¯¹è±¡ï¼åæ¬ Handler å¯¹è±¡ä»¥å Handler å¯¹è±¡å¯¹åºçæ¦æªå¨ï¼ï¼æåä»¥HandlerExecutionChain å¯¹è±¡çå½¢å¼è¿åã\n 3. DispatcherServlet æ ¹æ®è·å¾çHandlerï¼éæ©ä¸ä¸ªåéç HandlerAdapterãï¼éæ³¨ï¼å¦ææåè·å¾HandlerAdapteråï¼æ­¤æ¶å°å¼å§æ§è¡æ¦æªå¨ç preHandler(...)æ¹æ³ï¼ã\n 4. æåRequestä¸­çæ¨¡åæ°æ®ï¼å¡«åHandlerå¥åï¼å¼å§æ§è¡Handlerï¼Controller)ã å¨å¡«åHandlerçå¥åè¿ç¨ä¸­ï¼æ ¹æ®ä½ çéç½®ï¼Spring å°å¸®ä½ åä¸äºé¢å¤çå·¥ä½ï¼\n    * HttpMessageConverterï¼ å°è¯·æ±æ¶æ¯ï¼å¦ Jsonãxml ç­æ°æ®ï¼è½¬æ¢æä¸ä¸ªå¯¹è±¡ï¼å°å¯¹è±¡è½¬æ¢ä¸ºæå®çååºä¿¡æ¯ã\n    * æ°æ®è½¬æ¢ï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®è½¬æ¢ãå¦Stringè½¬æ¢æIntegerãDoubleç­ã\n    * æ°æ®æ ¹å¼åï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®æ ¼å¼åã å¦å°å­ç¬¦ä¸²è½¬æ¢ææ ¼å¼åæ°å­ææ ¼å¼åæ¥æç­ã\n    * æ°æ®éªè¯ï¼ éªè¯æ°æ®çæææ§ï¼é¿åº¦ãæ ¼å¼ç­ï¼ï¼éªè¯ç»æå­å¨å°BindingResultæErrorä¸­ã\n 5. Handler(Controller)æ§è¡å®æåï¼å DispatcherServlet è¿åä¸ä¸ª ModelAndView å¯¹è±¡ï¼\n 6. æ ¹æ®è¿åçModelAndViewï¼éæ©ä¸ä¸ªéåç ViewResolverï¼å¿é¡»æ¯å·²ç»æ³¨åå° Spring å®¹å¨ä¸­çViewResolver)è¿åç»DispatcherServletã\n 7. ViewResolver ç»åModelåViewï¼æ¥æ¸²æè§å¾ã\n 8. è§å¾è´è´£å°æ¸²æç»æè¿åç»å®¢æ·ç«¯ã\n\n\n# åèèµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3',normalizedContent:'# spring web ç»¼è¿°\n\n\n# å¿«éå¥é¨\n\nä¸é¢ï¼éè¿ä¸ä¸ªç®åçç¤ºä¾æ¥å±ç¤ºå¦ä½éè¿ spring åå»ºä¸ä¸ª hello world web æå¡ã\n\nï¼1ï¼pom.xml ä¸­å¼å¥ä¾èµ\n\n<dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-web</artifactid>\n</dependency>\n\n\nï¼2ï¼å®ä¹ controller\n\nspring æå»º restful æå¡çæ¹æ³ï¼http è¯·æ±ç± controller å¤çã è¿äºç»ä»¶ç± @restcontroller æ³¨è§£æ è¯ã\n\nãç¤ºä¾ãä¸é¢çç¤ºä¾å®ä¹äºä¸ä¸ªå¤ç /greeting ç get è¯·æ±\n\nimport org.springframework.stereotype.controller;\nimport org.springframework.ui.model;\nimport org.springframework.web.bind.annotation.getmapping;\nimport org.springframework.web.bind.annotation.requestparam;\n\n@controller\npublic class greetingcontroller {\n\n    @getmapping("/greeting")\n    public string greeting(@requestparam(name = "name", required = false, defaultvalue = "world") string name,\n        model model) {\n        model.addattribute("name", name);\n        return "greeting";\n    }\n\n}\n\n\nï¼3ï¼åå»ºå¯å¨ç±»\n\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\n\n@springbootapplication\npublic class helloworldapplication {\n\n    public static void main(string[] args) {\n        springapplication.run(helloworldapplication.class);\n    }\n\n}\n\n\nï¼4ï¼å¯å¨æå¡ï¼æ§è¡ helloworldapplication.main æ¹æ³å¯å¨ web æå¡\n\nï¼5ï¼æµè¯\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greetingï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nhello, world!\n\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greeting?name=dunwuï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nhello, dunwu!\n\n\n\n# springmvc å·¥ä½æµç¨\n\nspring mvc çå·¥ä½æµç¨å¯ä»¥ç¨ä¸å¹å¾æ¥è¯´æï¼\n\n\n\n 1. åæå¡å¨åé http è¯·æ±ï¼è¯·æ±è¢«åç«¯æ§å¶å¨ dispatcherservlet æè·ã\n 2. dispatcherservlet æ ¹æ® <servlet-name>-servlet.xml ä¸­çéç½®å¯¹è¯·æ±ç url è¿è¡è§£æï¼å¾å°è¯·æ±èµæºæ è¯ç¬¦ï¼uriï¼ãç¶åæ ¹æ®è¯¥ uriï¼è°ç¨ handlermapping è·å¾è¯¥ handler éç½®çææç¸å³çå¯¹è±¡ï¼åæ¬ handler å¯¹è±¡ä»¥å handler å¯¹è±¡å¯¹åºçæ¦æªå¨ï¼ï¼æåä»¥handlerexecutionchain å¯¹è±¡çå½¢å¼è¿åã\n 3. dispatcherservlet æ ¹æ®è·å¾çhandlerï¼éæ©ä¸ä¸ªåéç handleradapterãï¼éæ³¨ï¼å¦ææåè·å¾handleradapteråï¼æ­¤æ¶å°å¼å§æ§è¡æ¦æªå¨ç prehandler(...)æ¹æ³ï¼ã\n 4. æårequestä¸­çæ¨¡åæ°æ®ï¼å¡«åhandlerå¥åï¼å¼å§æ§è¡handlerï¼controller)ã å¨å¡«åhandlerçå¥åè¿ç¨ä¸­ï¼æ ¹æ®ä½ çéç½®ï¼spring å°å¸®ä½ åä¸äºé¢å¤çå·¥ä½ï¼\n    * httpmessageconverterï¼ å°è¯·æ±æ¶æ¯ï¼å¦ jsonãxml ç­æ°æ®ï¼è½¬æ¢æä¸ä¸ªå¯¹è±¡ï¼å°å¯¹è±¡è½¬æ¢ä¸ºæå®çååºä¿¡æ¯ã\n    * æ°æ®è½¬æ¢ï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®è½¬æ¢ãå¦stringè½¬æ¢æintegerãdoubleç­ã\n    * æ°æ®æ ¹å¼åï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®æ ¼å¼åã å¦å°å­ç¬¦ä¸²è½¬æ¢ææ ¼å¼åæ°å­ææ ¼å¼åæ¥æç­ã\n    * æ°æ®éªè¯ï¼ éªè¯æ°æ®çæææ§ï¼é¿åº¦ãæ ¼å¼ç­ï¼ï¼éªè¯ç»æå­å¨å°bindingresultæerrorä¸­ã\n 5. handler(controller)æ§è¡å®æåï¼å dispatcherservlet è¿åä¸ä¸ª modelandview å¯¹è±¡ï¼\n 6. æ ¹æ®è¿åçmodelandviewï¼éæ©ä¸ä¸ªéåç viewresolverï¼å¿é¡»æ¯å·²ç»æ³¨åå° spring å®¹å¨ä¸­çviewresolver)è¿åç»dispatcherservletã\n 7. viewresolver ç»åmodelåviewï¼æ¥æ¸²æè§å¾ã\n 8. è§å¾è´è´£å°æ¸²æç»æè¿åç»å®¢æ·ç«¯ã\n\n\n# åèèµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Web åºç¨",frontmatter:{title:"Spring Web åºç¨",date:"2023-02-14T19:21:22.000Z",categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","Web","Controller"],permalink:"/pages/5d002f/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/02.SpringWeb%E5%BA%94%E7%94%A8.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/02.SpringWebåºç¨.md",key:"v-cab5a862",path:"/pages/5d002f/",headers:[{level:2,title:"å¿«éå¥é¨",slug:"å¿«éå¥é¨",normalizedTitle:"å¿«éå¥é¨",charIndex:408},{level:2,title:"Spring Web ç»ä»¶",slug:"spring-web-ç»ä»¶",normalizedTitle:"spring web ç»ä»¶",charIndex:1757},{level:3,title:"ç»ä»¶æ«æ",slug:"ç»ä»¶æ«æ",normalizedTitle:"ç»ä»¶æ«æ",charIndex:1775},{level:3,title:"AOP ä»£ç",slug:"aop-ä»£ç",normalizedTitle:"aop ä»£ç",charIndex:2772},{level:3,title:"@Controller",slug:"controller",normalizedTitle:"@controller",charIndex:43},{level:3,title:"@RequestMapping",slug:"requestmapping",normalizedTitle:"@requestmapping",charIndex:3282},{level:4,title:"URI æ¨¡å¼",slug:"uri-æ¨¡å¼",normalizedTitle:"uri æ¨¡å¼",charIndex:4093},{level:4,title:"æ¨¡å¼æ¯è¾",slug:"æ¨¡å¼æ¯è¾",normalizedTitle:"æ¨¡å¼æ¯è¾",charIndex:5919},{level:4,title:"åç¼å¹é",slug:"åç¼å¹é",normalizedTitle:"åç¼å¹é",charIndex:6288},{level:4,title:"åç¼å¹éå RFD",slug:"åç¼å¹éå-rfd",normalizedTitle:"åç¼å¹éå rfd",charIndex:6913},{level:4,title:"éå®æ°æ®ç±»å",slug:"éå®æ°æ®ç±»å",normalizedTitle:"éå®æ°æ®ç±»å",charIndex:7512},{level:4,title:"Producible Media Types",slug:"producible-media-types",normalizedTitle:"producible media types",charIndex:7831},{level:4,title:"åæ°ãè¯·æ±å¤´",slug:"åæ°ãè¯·æ±å¤´",normalizedTitle:"åæ°ãè¯·æ±å¤´",charIndex:8202},{level:4,title:"HTTP HEAD, OPTIONS",slug:"http-head-options",normalizedTitle:"http head, options",charIndex:8589},{level:4,title:"èªå®ä¹æ³¨è§£",slug:"èªå®ä¹æ³¨è§£",normalizedTitle:"èªå®ä¹æ³¨è§£",charIndex:3655},{level:4,title:"æ¾ç¤ºæ³¨å",slug:"æ¾ç¤ºæ³¨å",normalizedTitle:"æ¾ç¤ºæ³¨å",charIndex:9828},{level:2,title:"å¤çæ¹æ³",slug:"å¤çæ¹æ³",normalizedTitle:"å¤çæ¹æ³",charIndex:10441},{level:3,title:"è¯·æ±æ°æ®",slug:"è¯·æ±æ°æ®",normalizedTitle:"è¯·æ±æ°æ®",charIndex:10450},{level:3,title:"ååºæ°æ®",slug:"ååºæ°æ®",normalizedTitle:"ååºæ°æ®",charIndex:10575},{level:2,title:"@ModelAttribute",slug:"modelattribute",normalizedTitle:"@modelattribute",charIndex:10697},{level:2,title:"@InitBinder",slug:"initbinder",normalizedTitle:"@initbinder",charIndex:11841},{level:2,title:"è¡¨åå¤ç",slug:"è¡¨åå¤ç",normalizedTitle:"è¡¨åå¤ç",charIndex:14649},{level:3,title:"åå»ºå¤çè¡¨åç Controller",slug:"åå»ºå¤çè¡¨åç-controller",normalizedTitle:"åå»ºå¤çè¡¨åç controller",charIndex:14658},{level:3,title:"å®ä¹éè¦æäº¤çè¡¨åå®ä½",slug:"å®ä¹éè¦æäº¤çè¡¨åå®ä½",normalizedTitle:"å®ä¹éè¦æäº¤çè¡¨åå®ä½",charIndex:15519},{level:3,title:"æäº¤è¡¨ååç«¯ä»£ç ",slug:"æäº¤è¡¨ååç«¯ä»£ç ",normalizedTitle:"æäº¤è¡¨ååç«¯ä»£ç ",charIndex:15642},{level:2,title:"æä»¶ä¸ä¼ ",slug:"æä»¶ä¸ä¼ ",normalizedTitle:"æä»¶ä¸ä¼ ",charIndex:16339},{level:3,title:"åå»ºæä»¶ä¸ä¼ å¤ç Controller",slug:"åå»ºæä»¶ä¸ä¼ å¤ç-controller",normalizedTitle:"åå»ºæä»¶ä¸ä¼ å¤ç controller",charIndex:16348},{level:3,title:"å®ä¹å­å¨æä»¶ç Service",slug:"å®ä¹å­å¨æä»¶ç-service",normalizedTitle:"å®ä¹å­å¨æä»¶ç service",charIndex:19222},{level:3,title:"åå»ºæä»¶ä¸ä¼ è¡¨å",slug:"åå»ºæä»¶ä¸ä¼ è¡¨å",normalizedTitle:"åå»ºæä»¶ä¸ä¼ è¡¨å",charIndex:22736},{level:3,title:"æä»¶ä¸ä¼ éå¶",slug:"æä»¶ä¸ä¼ éå¶",normalizedTitle:"æä»¶ä¸ä¼ éå¶",charIndex:23266},{level:2,title:"å¼å¸¸å¤ç",slug:"å¼å¸¸å¤ç",normalizedTitle:"å¼å¸¸å¤ç",charIndex:92},{level:3,title:"@ExceptionHandler",slug:"exceptionhandler",normalizedTitle:"@exceptionhandler",charIndex:18664},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:25152}],headersStr:"å¿«éå¥é¨ Spring Web ç»ä»¶ ç»ä»¶æ«æ AOP ä»£ç @Controller @RequestMapping URI æ¨¡å¼ æ¨¡å¼æ¯è¾ åç¼å¹é åç¼å¹éå RFD éå®æ°æ®ç±»å Producible Media Types åæ°ãè¯·æ±å¤´ HTTP HEAD, OPTIONS èªå®ä¹æ³¨è§£ æ¾ç¤ºæ³¨å å¤çæ¹æ³ è¯·æ±æ°æ® ååºæ°æ® @ModelAttribute @InitBinder è¡¨åå¤ç åå»ºå¤çè¡¨åç Controller å®ä¹éè¦æäº¤çè¡¨åå®ä½ æäº¤è¡¨ååç«¯ä»£ç  æä»¶ä¸ä¼  åå»ºæä»¶ä¸ä¼ å¤ç Controller å®ä¹å­å¨æä»¶ç Service åå»ºæä»¶ä¸ä¼ è¡¨å æä»¶ä¸ä¼ éå¶ å¼å¸¸å¤ç @ExceptionHandler åèèµæ",content:'# Spring Web åºç¨\n\nSpring MVC æä¾äºä¸ç§åºäºæ³¨è§£çç¼ç¨æ¨¡åï¼@Controller å @RestController ç»ä»¶ä½¿ç¨æ³¨è§£æ¥è¡¨è¾¾è¯·æ±æ å°ãè¯·æ±è¾å¥ãå¼å¸¸å¤çç­ãæ³¨è§£æ§å¶å¨å·æçµæ´»çæ¹æ³ç­¾åï¼å¹¶ä¸ä¸å¿æ©å±åºç±»æå®ç°ç¹å®æ¥å£ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªç±æ³¨è§£å®ä¹çæ§å¶å¨ï¼\n\n@Controller\npublic class HelloController {\n\n    @GetMapping("/hello")\n    public String handle(Model model) {\n        model.addAttribute("message", "Hello World!");\n        return "index";\n    }\n}\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼è¯¥æ¹æ³æ¥åä¸ä¸ª Model å¹¶ä»¥ String å½¢å¼è¿åä¸ä¸ªè§å¾åç§°ï¼ä½è¿å­å¨è®¸å¤å¶ä»éé¡¹ã\n\n\n# å¿«éå¥é¨\n\nä¸é¢ï¼éè¿ä¸ä¸ªç®åçç¤ºä¾æ¥å±ç¤ºå¦ä½éè¿ Spring åå»ºä¸ä¸ª Hello World Web æå¡ã\n\nï¼1ï¼pom.xml ä¸­å¼å¥ä¾èµ\n\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n\n\nï¼2ï¼å®ä¹ Controller\n\nSpring æå»º RESTful æå¡çæ¹æ³ï¼HTTP è¯·æ±ç± Controller å¤çã è¿äºç»ä»¶ç± @RestController æ³¨è§£æ è¯ã\n\nãç¤ºä¾ãä¸é¢çç¤ºä¾å®ä¹äºä¸ä¸ªå¤ç /greeting ç GET è¯·æ±\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class GreetingController {\n\n    @GetMapping("/greeting")\n    public String greeting(@RequestParam(name = "name", required = false, defaultValue = "World") String name,\n        Model model) {\n        model.addAttribute("name", name);\n        return "greeting";\n    }\n\n}\n\n\nï¼3ï¼åå»ºå¯å¨ç±»\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class HelloWorldApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(HelloWorldApplication.class);\n    }\n\n}\n\n\nï¼4ï¼å¯å¨æå¡ï¼æ§è¡ HelloWorldApplication.main æ¹æ³å¯å¨ web æå¡\n\nï¼5ï¼æµè¯\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greetingï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nHello, World!\n\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greeting?name=dunwuï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nHello, dunwu!\n\n\n\n# Spring Web ç»ä»¶\n\n\n# ç»ä»¶æ«æ\n\nå¯ä»¥ä½¿ç¨ Servlet ç WebApplicationContext ä¸­çæ å Spring bean å®ä¹æ¥å®ä¹æ§å¶å¨ã@Controller æé ååè®¸èªå¨æ£æµï¼ä¸ Spring å¯¹æ£æµç±»è·¯å¾ä¸­ç @Component ç±»å¹¶ä¸ºå®ä»¬èªå¨æ³¨å bean å®ä¹çä¸è¬æ¯æä¿æä¸è´ãå®è¿åå½å¸¦æ³¨è§£ç±»çæé åï¼è¡¨æå¶ä½ä¸º Web ç»ä»¶çè§è²ã\n\nè¦å¯ç¨æ­¤ç±» @Controller çèªå¨æ£æµï¼å¯ä»¥å°ç»ä»¶æ«ææ·»å å°æ¨ç Java éç½®ä¸­ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Configuration\n@ComponentScan("org.example.web")\npublic class WebConfig {\n\n    // ...\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸è¿°ç¤ºä¾ç­æç XML éç½®ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemaLocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:component-scan base-package="org.example.web"/>\n\n    \x3c!-- ... --\x3e\n\n</beans>\n\n\n\n# AOP ä»£ç\n\nå¨æäºæåµä¸ï¼å¯è½éè¦å¨è¿è¡æ¶ä½¿ç¨ AOP ä»£çè£é¥°æ§å¶å¨ãä¸ä¸ªä¾å­æ¯ï¼å¦æéæ©ç´æ¥å¨æ§å¶å¨ä¸ä½¿ç¨ @Transactional æ³¨è§£ãå¨è¿ç§æåµä¸ï¼ç¹å«æ¯å¯¹äºæ§å¶å¨ï¼å»ºè®®ä½¿ç¨åºäºç±»çä»£çãç´æ¥å¨æ§å¶å¨ä¸ä½¿ç¨æ­¤ç±»æ³¨è§£ä¼èªå¨åºç°è¿ç§æåµã\n\nå¦ææ§å¶å¨å®ç°äºä¸ä¸ªæ¥å£ï¼å¹¶ä¸éè¦ AOP ä»£çï¼æ¨å¯è½éè¦æ¾å¼éç½®åºäºç±»çä»£çãä¾å¦ï¼å¯¹äº @EnableTransactionManagement ï¼å¯ä»¥æ´æ¹ä¸º @EnableTransactionManagement(proxyTargetClass = true)ï¼å¯¹äº <tx:annotation-driven/> ï¼æ¨å¯ä»¥æ´æ¹ä¸º <tx:annotation-driven proxy-target-class="true"/>ã\n\n\n# @Controller\n\n@RestController æ¯ä¸ä¸ªç»åæ³¨è§£ï¼å®æ¬èº«ä½¿ç¨ @Controller å @ResponseBody åæ³¨è§£è¿è¡æ è®°ï¼ä»¥æç¤ºæ§å¶å¨çæ¯ä¸ªæ¹æ³ç»§æ¿äºç±»åçº§å«ç @ResponseBody æ³¨è§£ï¼å æ­¤ç´æ¥åå¥ååºä¸»ä½ï¼èä¸æ¯ä½¿ç¨ HTML æ¨¡æ¿è¿è¡è§å¾è§£æåæ¸²æã\n\n\n# @RequestMapping\n\nå¯ä»¥ä½¿ç¨ @RequestMapping æ³¨è§£å°è¯·æ±æ å°å°æ§å¶å¨æ¹æ³ãå®å·æåç§å±æ§ï¼å¯ä»¥éè¿ URLãHTTP æ¹æ³ãè¯·æ±åæ°ãæ å¤´ååªä½ç±»åè¿è¡å¹éãå¯ä»¥å¨ç±»çº§å«ä½¿ç¨å®æ¥è¡¨è¾¾å±äº«æ å°ï¼æèå¨æ¹æ³çº§å«ä½¿ç¨å®æ¥ç¼©å°å°ç¹å®ç«¯ç¹çæ å°ã\n\n@RequestMapping çä¸»è¦åæ°ï¼\n\n * path / method æå®æ å°è·¯å¾ä¸æ¹æ³\n * params / headers éå®æ å°èå´\n * consumes / produces éå®è¯·æ±ä¸ååºæ ¼å¼\n\nSpring è¿æä¾äºä»¥ä¸ @RequestMapping çåä½ï¼\n\n * @GetMapping\n * @PostMapping\n * @PutMapping\n * @DeleteMapping\n * @PatchMapping\n\nå¿«æ·æ¹å¼æ¯æä¾çèªå®ä¹æ³¨è§£ï¼å ä¸ºå¯ä»¥è¯´ï¼å¤§å¤æ°æ§å¶å¨æ¹æ³åºè¯¥æ å°å°ç¹å®ç HTTP æ¹æ³ï¼èä¸æ¯ä½¿ç¨ @RequestMappingï¼é»è®¤æåµä¸ï¼å®ä¸ææ HTTP æ¹æ³å¹éãå¨ç±»çº§å«ä»ç¶éè¦ @RequestMapping æ¥è¡¨è¾¾å±äº«æ å°ã\n\nä»¥ä¸ç¤ºä¾å·æç±»ååæ¹æ³çº§å«çæ å°ï¼\n\n@RestController\n@RequestMapping("/persons")\nclass PersonController {\n\n    @GetMapping("/{id}")\n    public Person getPerson(@PathVariable Long id) {\n        // ...\n    }\n\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public void add(@RequestBody Person person) {\n        // ...\n    }\n}\n\n\n# URI æ¨¡å¼\n\n@RequestMapping æ¹æ³å¯ä»¥ä½¿ç¨ URL æ¨¡å¼è¿è¡æ å°ãæä¸¤ç§éæ©ï¼\n\n * PathPattern - ä¸ URL è·¯å¾å¹éçé¢è§£ææ¨¡å¼ä¹é¢è§£æä¸º PathContainerãè¯¥è§£å³æ¹æ¡ä¸ä¸ºç½ç»ä½¿ç¨èè®¾è®¡ï¼å¯ææå¤çç¼ç åè·¯å¾åæ°ï¼å¹¶é«æå¹éã\n * AntPathMatcher - æ ¹æ®å­ç¬¦ä¸²è·¯å¾å¹éå­ç¬¦ä¸²æ¨¡å¼ãè¿æ¯å¨ Spring éç½®ä¸­ä¹ä½¿ç¨çåå§è§£å³æ¹æ¡ï¼ç¨äºå¨ç±»è·¯å¾ãæä»¶ç³»ç»åå¶ä»ä½ç½®éæ©èµæºãå®çæçè¾ä½ï¼å¹¶ä¸å­ç¬¦ä¸²è·¯å¾è¾å¥å¯¹äºææå¤ç URL çç¼ç åå¶ä»é®é¢æ¯ä¸ä¸ªææã\n\nPathPattern æ¯ Web åºç¨ç¨åºçæ¨èè§£å³æ¹æ¡ï¼å®æ¯ Spring WebFlux ä¸­çå¯ä¸éæ©ãå®ä» 5.3 çå¼å§å¨ Spring MVC ä¸­ä½¿ç¨ï¼ä» 6.0 çå¼å§é»è®¤å¯ç¨ãè¯·åé MVC éç½® ä»¥èªå®ä¹è·¯å¾å¹ééé¡¹ã\n\nPathPattern æ¯æä¸ AntPathMatcher ç¸åçæ¨¡å¼è¯­æ³ãæ­¤å¤ï¼å®è¿æ¯ææè·æ¨¡å¼ï¼ä¾å¦ {spring}ï¼ç¨äºå¹éè·¯å¾æ«å°¾ç 0 ä¸ªæå¤ä¸ªè·¯å¾æ®µãPathPattern è¿éå¶ä½¿ç¨ ** æ¥å¹éå¤ä¸ªè·¯å¾æ®µï¼è¿æ ·å®åªåè®¸åºç°å¨æ¨¡å¼çæ«å°¾ãè¿æ¶é¤äºå¨ä¸ºç»å®è¯·æ±éæ©æä½³å¹éæ¨¡å¼æ¶åºç°çè®¸å¤æ­§ä¹ãæå³å®æ´æ¨¡å¼è¯­æ³ï¼è¯·åé PathPattern å AntPathMatcherã\n\nä¸äºç¤ºä¾æ¨¡å¼ï¼\n\n * "/resources/ima?e.png" -å¹éä¸ä¸ªå­ç¬¦\n * "/resources/*.png" - å¹éé¶ä¸ªæå¤ä¸ªå­ç¬¦\n * "/resources/**" - å¹éå¤ä¸ªå­ç¬¦\n * "/projects/{project}/versions" - å¹éè·¯å¾æ®µå¹¶å°å¶æè·ä¸ºåé\n * "/projects/{project:[a-z]+}/versions" - ä½¿ç¨æ­£åè¡¨è¾¾å¼å¹éå¹¶æè·åé\n\nå¯ä»¥ä½¿ç¨ @PathVariable è®¿é®æè·ç URI åéãä¾å¦ï¼\n\n@GetMapping("/owners/{ownerId}/pets/{petId}")\npublic Pet findPet(@PathVariable Long ownerId, @PathVariable Long petId) {\n    // ...\n}\n\n\nå¯ä»¥å¨ç±»åæ¹æ³çº§å«å£°æ URI åéï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Controller\n@RequestMapping("/owners/{ownerId}")\npublic class OwnerController {\n\n    @GetMapping("/pets/{petId}")\n    public Pet findPet(@PathVariable Long ownerId, @PathVariable Long petId) {\n        // ...\n    }\n}\n\n\nURI åéä¼èªå¨è½¬æ¢ä¸ºéå½çç±»åï¼å¦åä¼å¼å TypeMismatchExceptionãé»è®¤æ¯æç®åç±»åï¼intãlongãDate ç­ï¼ï¼å¯ä»¥æ³¨åå¯¹ä»»ä½å¶ä»æ°æ®ç±»åçæ¯æãè¯·åè§ç±»åè½¬æ¢å DataBinderã\n\nå¯ä»¥æ¾å¼å½å URI åéï¼ä¾å¦ï¼@PathVariable("customId")ï¼ï¼ä½å¦æåç§°ç¸åå¹¶ä¸ä»£ç æ¯ä½¿ç¨ -parameters ç¼è¯å¨æ å¿ç¼è¯çï¼åå¯ä»¥çç¥è¯¥ç»èã\n\nè¯­æ³ {varName:regex} ä½¿ç¨æ­£åè¡¨è¾¾å¼å£°æä¸ä¸ª URI åéãä¾å¦ï¼ç»å® URL "/spring-web-3.0.5.jar"ï¼ä»¥ä¸æ¹æ³æååç§°ãçæ¬åæä»¶æ©å±åï¼\n\n@GetMapping("/{name:[a-z-]+}-{version:\\\\d\\\\.\\\\d\\\\.\\\\d}{ext:\\\\.[a-z]+}")\npublic void handle(@PathVariable String name, @PathVariable String version, @PathVariable String ext) {\n    // ...\n}\n\n\nURI è·¯å¾æ¨¡å¼è¿å¯ä»¥åµå¥ ${â¦} å ä½ç¬¦ï¼è¿äºå ä½ç¬¦å¨å¯å¨æ¶éè¿ä½¿ç¨ PropertySourcesPlaceholderConfigurer éå¯¹æ¬å°ãç³»ç»ãç¯å¢åå¶ä»å±æ§æºè¿è¡è§£æãä¾å¦ï¼å¯ä»¥ä½¿ç¨å®æ¥æ ¹æ®æäºå¤é¨éç½®åæ°ååºæ¬ URLã\n\n# æ¨¡å¼æ¯è¾\n\nå½å¤ä¸ªæ¨¡å¼å¹éä¸ä¸ª URL æ¶ï¼å¿é¡»éæ©æä½³å¹éãè¿æ¯éè¿ä»¥ä¸æ¹å¼ä¹ä¸å®æçï¼å·ä½åå³äºæ¯å¦å¯ç¨äºå·²è§£æç PathPattern ä»¥ä¾ä½¿ç¨ï¼\n\n * PathPattern.SPECIFICITY_COMPARATOR\n * AntPathMatcher.getPatternComparator(String path)\n\nä¸¤èé½æå©äºå¯¹æ¨¡å¼è¿è¡æåºï¼æ´å·ä½çæ¨¡å¼ä½äºé¡¶é¨ãå¦ææ¨¡å¼å·æè¾å°ç URI åéï¼è®¡ä¸º 1ï¼ãåééç¬¦ï¼è®¡ä¸º 1ï¼ååééç¬¦ï¼è®¡ä¸º 2ï¼ï¼åæ¨¡å¼ä¸å¤ªå·ä½ãå¦æå¾åç¸åï¼åéæ©è¾é¿çæ¨¡å¼ãç»å®ç¸åçåæ°åé¿åº¦ï¼éæ© URI åéå¤äºééç¬¦çæ¨¡å¼ã\n\né»è®¤æ å°æ¨¡å¼ (/**) è¢«æé¤å¨è¯åä¹å¤å¹¶å§ç»æå¨æåãæ­¤å¤ï¼åç¼æ¨¡å¼ï¼ä¾å¦ /public/**ï¼è¢«è®¤ä¸ºä¸å¦å¶ä»æ²¡æåééç¬¦çæ¨¡å¼å·ä½ã\n\n# åç¼å¹é\n\nä» 5.3 å¼å§ï¼é»è®¤æåµä¸ Spring MVC ä¸åæ§è¡ .* åç¼æ¨¡å¼å¹éï¼å¶ä¸­æ å°å° person çæ§å¶å¨ä¹éå¼æ å°å° /person.*ãå æ­¤ï¼è·¯å¾æ©å±ä¸åç¨äºè§£éè¯·æ±çååºåå®¹ç±»åâ©ââä¾å¦ï¼/person.pdfã/person.xml ç­ã\n\nå½æµè§å¨è¿å»åéé¾ä»¥ä¸è´è§£éç Accept è¯·æ±å¤´æ¶ï¼ä»¥è¿ç§æ¹å¼ä½¿ç¨æä»¶æ©å±åæ¯å¿è¦çãç°å¨ï¼è¿ä¸åæ¯å¿éçï¼ä½¿ç¨ Accept è¯·æ±å¤´åºè¯¥æ¯é¦éã\n\néçæ¶é´çæ¨ç§»ï¼æä»¶æ©å±åçä½¿ç¨å¨å¾å¤æ¹é¢é½è¢«è¯ææ¯æé®é¢çãå½ä½¿ç¨ URI åéãè·¯å¾åæ°å URI ç¼ç è¦çæ¶ï¼å®å¯è½ä¼å¯¼è´æ­§ä¹ãå³äºåºäº URL çææåå®å¨æ§çæ¨çä¹åå¾æ´å å°é¾ã\n\nè¦å¨ 5.3 ä¹åççæ¬ä¸­å®å¨ç¦ç¨è·¯å¾æ©å±ï¼è¯·è®¾ç½®ä»¥ä¸åå®¹ï¼\n\n * useSuffixPatternMatching(false) - åèï¼PathMatchConfigurer\n * favorPathExtension(false) - åèï¼ContentNegotiationConfigurer\n\né¤äºéè¿ Accept è¯·æ±å¤´ä¹å¤ï¼è¿æä¸ç§è¯·æ±åå®¹ç±»åçæ¹æ³ä»ç¶æç¨ï¼ä¾å¦å¨æµè§å¨ä¸­é®å¥ URL æ¶ãè·¯å¾æ©å±çä¸ç§å®å¨æ¿ä»£æ¹æ³æ¯ä½¿ç¨æ¥è¯¢åæ°ç­ç¥ãå¦ææ¨å¿é¡»ä½¿ç¨æä»¶æ©å±åï¼è¯·èèéè¿ ContentNegotiationConfigurer ç mediaTypes å±æ§å°å®ä»¬éå¶ä¸ºæç¡®æ³¨åçæ©å±ååè¡¨ã\n\n# åç¼å¹éå RFD\n\nåå°æä»¶ä¸è½½ (RFD) æ»å»ä¸ XSS ç±»ä¼¼ï¼å ä¸ºå®ä¾èµäºååºä¸­åæ çè¯·æ±è¾å¥ï¼ä¾å¦ï¼æ¥è¯¢åæ°å URI åéï¼ãç¶èï¼RFD æ»å»ä¸æ¯å° JavaScript æå¥ HTMLï¼èæ¯ä¾èµäºæµè§å¨åæ¢æ¥æ§è¡ä¸è½½ï¼å¹¶å¨ç¨ååå»æ¶å°ååºè§ä¸ºå¯æ§è¡èæ¬ã\n\nå¨ Spring MVC ä¸­ï¼@ResponseBody å ResponseEntity æ¹æ³å­å¨é£é©ï¼å ä¸ºå®ä»¬å¯ä»¥æ¸²æä¸åçåå®¹ç±»åï¼å®¢æ·ç«¯å¯ä»¥éè¿ URL è·¯å¾æ©å±è¯·æ±è¿äºåå®¹ç±»åãç¦ç¨åç¼æ¨¡å¼å¹éå¹¶ä½¿ç¨è·¯å¾æ©å±è¿è¡åå®¹ååå¯ä»¥éä½é£é©ï¼ä½ä¸è¶³ä»¥é²æ­¢ RFD æ»å»ã\n\nä¸ºäºé²æ­¢ RFD æ»å»ï¼å¨æ¸²æååºä¸»ä½ä¹åï¼Spring MVC æ·»å äºä¸ä¸ª Content-Disposition:inline;filename=f.txt å¤´ä»¥å»ºè®®ä¸ä¸ªåºå®ä¸å®å¨çä¸è½½æä»¶ãä»å½ URL è·¯å¾åå«çæä»¶æ©å±åæ¢ä¸å®å¨ä¹ä¸æç¡®æ³¨åç¨äºåå®¹ååæ¶ï¼æä¼æ§è¡æ­¤æä½ãä½æ¯ï¼å½ URL ç´æ¥è¾å¥æµè§å¨æ¶ï¼å®å¯è½ä¼äº§çå¯ä½ç¨ã\n\né»è®¤æåµä¸ï¼åè®¸è®¸å¤å¸¸è§çè·¯å¾æ©å±æ¯å®å¨çãå·æèªå®ä¹ HttpMessageConverter å®ç°çåºç¨ç¨åºå¯ä»¥æ¾å¼æ³¨åæä»¶æ©å±åä»¥è¿è¡åå®¹ååï¼ä»¥é¿åä¸ºè¿äºæ©å±åæ·»å  Content-Disposition å¤´ãè¯·åé åå®¹ç±»åã\n\nå³äº RFD æ´å¤ç»èæ¨èåè CVE-2015-5211\n\n# éå®æ°æ®ç±»å\n\næ¨å¯ä»¥æ ¹æ®è¯·æ±ç Content-Type ç¼©å°è¯·æ±æ å°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@PostMapping(path = "/pets", consumes = "application/json")\npublic void addPet(@RequestBody Pet pet) {\n    // ...\n}\n\n\nconsumes å±æ§è¿æ¯æå¦å®è¡¨è¾¾å¼ - ä¾å¦ï¼!textplain è¡¨ç¤ºé¤ textplain ä¹å¤çä»»ä½åå®¹ç±»åã\n\næ¨å¯ä»¥å¨ç±»çº§å«å£°æä¸ä¸ªå±äº«ç consumes å±æ§ãç¶èï¼ä¸å¤§å¤æ°å¶ä»è¯·æ±æ å°å±æ§ä¸åçæ¯ï¼å½å¨ç±»çº§å«ä½¿ç¨æ¶ï¼æ¹æ³çº§å«ç consumes å±æ§ä¼è¦çèä¸æ¯æ©å±ç±»çº§å«çå£°æã\n\n# Producible Media Types\n\nå¯ä»¥æ ¹æ® Accept è¯·æ±å¤´åæ§å¶å¨æ¹æ³çæçåå®¹ç±»ååè¡¨æ¥ç¼©å°è¯·æ±æ å°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@GetMapping(path = "/pets/{petId}", produces = "application/json")\n@ResponseBody\npublic Pet getPet(@PathVariable String petId) {\n    // ...\n}\n\n\nåªä½ç±»åå¯ä»¥æå®ä¸ä¸ªå­ç¬¦éãæ¯æå¦å®è¡¨è¾¾å¼ââä¾å¦ï¼!textplain è¡¨ç¤ºé¤ "text/plain" ä¹å¤çä»»ä½åå®¹ç±»åã\n\nå¯ä»¥å¨ç±»çº§å«å£°æä¸ä¸ªå±äº«ç produces å±æ§ãç¶èï¼ä¸å¤§å¤æ°å¶ä»è¯·æ±æ å°å±æ§ä¸åï¼å½å¨ç±»çº§å«ä½¿ç¨æ¶ï¼æ¹æ³çº§å«ç produces å±æ§ä¼è¦çèä¸æ¯æ©å±ç±»çº§å«çå£°æã\n\n# åæ°ãè¯·æ±å¤´\n\nå¯ä»¥æ ¹æ®è¯·æ±åæ°æ¡ä»¶ç¼©å°è¯·æ±æ å°èå´ãå¯ä»¥æµè¯æ¯å¦å­å¨è¯·æ±åæ° (myParam)ãæ¯å¦ç¼ºå°è¯·æ±åæ° (!myParam) æç¹å®å¼ (myParam=myValue)ãä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½æµè¯ç¹å®å¼ï¼\n\n@GetMapping(path = "/pets/{petId}", params = "myParam=myValue")\npublic void findPet(@PathVariable String petId) {\n    // ...\n}\n\n\nè¿å¯ä»¥ä½¿ç¨ç¸åçè¯·æ±å¤´æ¡ä»¶ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@GetMapping(path = "/pets", headers = "myHeader=myValue")\npublic void findPet(@PathVariable String petId) {\n    // ...\n}\n\n\n# HTTP HEAD, OPTIONS\n\n@GetMappingï¼å @RequestMapping(method=HttpMethod.GET)ï¼éæå°æ¯æ HTTP HEAD ä»¥è¿è¡è¯·æ±æ å°ãæ§å¶å¨æ¹æ³ä¸éè¦æ¹åãå¨ jakarta.servlet.http.HttpServlet ä¸­åºç¨çååºåè£å¨ç¡®ä¿å° Content-Length å¤´è®¾ç½®ä¸ºåå¥çå­èæ°ï¼å®éä¸æ²¡æåå¥ååºï¼ã\n\n@GetMappingï¼å@RequestMapping(method=HttpMethod.GET)ï¼è¢«éå¼æ å°å¹¶æ¯æ HTTP HEADãHTTP HEAD è¯·æ±çå¤çæ¹å¼å°±å¥½åå®æ¯ HTTP GET ä¸æ ·ï¼é¤äºä¸åå¥æ­£æï¼èæ¯è®¡ç®å­èæ°å¹¶è®¾ç½® Content-Length å¤´ã\n\né»è®¤æåµä¸ï¼éè¿å° Allow ååºå¤´è®¾ç½®ä¸ºææå·æå¹é URL æ¨¡å¼ç @RequestMapping æ¹æ³ä¸­ååºç HTTP æ¹æ³åè¡¨æ¥å¤ç HTTP OPTIONSã\n\nå¯¹äºæ²¡æ HTTP æ¹æ³å£°æç @RequestMapping ï¼Allow å¤´è®¾ç½®ä¸º GET,HEAD,POST,PUT,PATCH,DELETE,OPTIONSãæ§å¶å¨æ¹æ³åºå§ç»å£°ææ¯æç HTTP æ¹æ³ï¼ä¾å¦ï¼éè¿ä½¿ç¨ HTTP æ¹æ³ç¹å®åä½ï¼@GetMappingã@PostMapping ç­ï¼ã\n\nYou can explicitly map the @RequestMapping method to HTTP HEAD and HTTP OPTIONS, but that is not necessary in the common case.\n\nå¯ä»¥æ¾å¼å°å° @RequestMapping æ¹æ³æ å°å° HTTP HEAD å HTTP OPTIONSï¼ä½å¨å¸¸è§æåµä¸è¿ä¸æ¯å¿éçã\n\n# èªå®ä¹æ³¨è§£\n\nSpring MVC æ¯æä½¿ç¨ç»åæ³¨è§£ è¿è¡è¯·æ±æ å°ãè¿äºæ³¨è§£æ¬èº«æ¯ç¨ @RequestMapping è¿è¡åæ³¨è§£çï¼å¹¶ä¸ç»åèµ·æ¥éæ°å£°æ @RequestMapping å±æ§çä¸ä¸ªå­éï¼æå¨é¨ï¼ï¼å·ææ´æç¡®çç®çã\n\n@GetMappingã@PostMappingã@PutMappingã@DeleteMapping å @PatchMapping æ¯ç»åæ³¨è§£çç¤ºä¾ãæä¾å®ä»¬æ¯å ä¸ºï¼å¯ä»¥è¯´ï¼å¤§å¤æ°æ§å¶å¨æ¹æ³åºè¯¥æ å°å°ç¹å®ç HTTP æ¹æ³ï¼èä¸æ¯ä½¿ç¨ @RequestMappingï¼é»è®¤æåµä¸ï¼å®ä¸ææ HTTP æ¹æ³å¹éãå¦ææ¨éè¦ç»åæ³¨è§£çç¤ºä¾ï¼è¯·æ¥çè¿äºæ³¨è§£çå£°ææ¹å¼ã\n\nSpring MVC è¿æ¯æå·æèªå®ä¹è¯·æ±å¹éé»è¾çèªå®ä¹è¯·æ±æ å°å±æ§ãè¿æ¯ä¸ä¸ªæ´é«çº§çéé¡¹ï¼éè¦ç»§æ¿ RequestMappingHandlerMapping å¹¶è¦ç getCustomMethodCondition æ¹æ³ï¼æ¨å¯ä»¥å¨å¶ä¸­æ£æ¥èªå®ä¹å±æ§å¹¶è¿åæ¨èªå·±ç RequestConditionã\n\n# æ¾ç¤ºæ³¨å\n\næ¨å¯ä»¥ä»¥ç¼ç¨æ¹å¼æ³¨åå¤çç¨åºæ¹æ³ï¼æ¨å¯ä»¥å°å¶ç¨äºå¨ææ³¨åæé«çº§æåµï¼ä¾å¦ä¸å URL ä¸çåä¸å¤çç¨åºçä¸åå®ä¾ãä»¥ä¸ç¤ºä¾æ³¨åäºä¸ä¸ªå¤çç¨åºæ¹æ³\n\n@Configuration\npublic class MyConfig {\n\n    @Autowired\n    public void setHandlerMapping(RequestMappingHandlerMapping mapping, UserHandler handler)\n            throws NoSuchMethodException {\n\n        RequestMappingInfo info = RequestMappingInfo\n                .paths("/user/{id}").methods(RequestMethod.GET).build();\n\n        Method method = UserHandler.class.getMethod("getUser", Long.class);\n\n        mapping.registerMapping(info, handler, method);\n    }\n}\n\n\n 1. ä¸ºæ§å¶å¨æ³¨å¥ç®æ å¤çç¨åºåå¤çç¨åºæ å°ã\n\n 2. åå¤è¯·æ±æ å°åæ°æ®ã\n\n 3. è·åå¤çç¨åºæ¹æ³ã\n\n 4. æ·»å æ³¨åã\n\n\n# å¤çæ¹æ³\n\n\n# è¯·æ±æ°æ®\n\n * @RequestParam\n\n * @RequestBody\n\n * @PathVariable\n\n * @RequestHeader\n\n> æ´å¤ Spring Web æ¹æ³åæ°å¯ä»¥åèï¼ Method Arguments\n\n\n# ååºæ°æ®\n\n * @ResponseBody\n\n * @ResponseStatus\n\n * ResponseEntity\n\n * HttpEntity\n\n> æ´å¤ Spring Web æ¹æ³è¿åå¼å¯ä»¥åèï¼Return Values\n\n\n# @ModelAttribute\n\nå¯ä»¥ä½¿ç¨ @ModelAttribute æ³¨è§£ï¼\n\n * å¨ @RequestMapping æ¹æ³ä¸­çæ¹æ³åæ°ä¸ï¼ç¨äºæ¨¡ååå»ºæè®¿é®å¯¹è±¡ï¼å¹¶éè¿ WebDataBinder å°å¶ç»å®å°è¯·æ±ã\n * ä½ä¸º @Controller æ @ControllerAdvice ç±»ä¸­çæ¹æ³çº§æ³¨è§£ï¼æå©äºå¨ä»»ä½ @RequestMapping æ¹æ³è°ç¨ä¹ååå§åæ¨¡åã\n * å¨ @RequestMapping æ¹æ³ä¸æ è®°å®çè¿åå¼æ¯ä¸ä¸ªæ¨¡åå±æ§ã\n\næ¬èè®¨è®º @ModelAttribute æ¹æ³ââåé¢åè¡¨ä¸­çç¬¬äºé¡¹ãä¸ä¸ªæ§å¶å¨å¯ä»¥æä»»ææ°éç @ModelAttribute æ¹æ³ãææè¿äºæ¹æ³é½å¨åä¸æ§å¶å¨ä¸­ç @RequestMapping æ¹æ³ä¹åè¢«è°ç¨ã@ModelAttribute æ¹æ³ä¹å¯ä»¥éè¿ @ControllerAdvice å¨æ§å¶å¨ä¹é´å±äº«ã\n\n@ModelAttribute æ¹æ³å·æçµæ´»çæ¹æ³ç­¾åãå®ä»¬æ¯æè®¸å¤ä¸ @RequestMapping æ¹æ³ç¸åçåæ°ï¼é¤äº @ModelAttribute æ¬èº«æä¸è¯·æ±ä¸»ä½ç¸å³çä»»ä½åå®¹ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº @ModelAttribute æ¹æ³ï¼\n\n@ModelAttribute\npublic void populateModel(@RequestParam String number, Model model) {\n    model.addAttribute(accountRepository.findAccount(number));\n    // add more ...\n}\n\n\nä»¥ä¸ç¤ºä¾ä»æ·»å ä¸ä¸ªå±æ§ï¼\n\n@ModelAttribute\npublic Account addAccount(@RequestParam String number) {\n    return accountRepository.findAccount(number);\n}\n\n\nè¿å¯ä»¥å° @ModelAttribute ç¨ä½ @RequestMapping æ¹æ³ä¸çæ¹æ³çº§æ³¨è§£ï¼å¨è¿ç§æåµä¸ï¼@RequestMapping æ¹æ³çè¿åå¼è¢«è§£éä¸ºæ¨¡åå±æ§ãè¿éå¸¸ä¸æ¯å¿éçï¼å ä¸ºå®æ¯ HTML æ§å¶å¨ä¸­çé»è®¤è¡ä¸ºï¼é¤éè¿åå¼æ¯ä¸ä¸ª String å¦åå°è¢«è§£éä¸ºè§å¾åç§°ã @ModelAttribute è¿å¯ä»¥èªå®ä¹æ¨¡åå±æ§åç§°ï¼å¦ä¸ä¾æç¤ºï¼\n\n@GetMapping("/accounts/{id}")\n@ModelAttribute("myAccount")\npublic Account handle() {\n    // ...\n    return account;\n}\n\n\n\n# @InitBinder\n\n@Controller æ @ControllerAdvice ç±»å¯ä»¥ç¨ @InitBinder æ¹æ³æ¥åå§å WebDataBinder çå®ä¾ï¼èè¿äºæ¹æ³åå¯ä»¥ï¼\n\n * å°è¯·æ±åæ°ï¼å³è¡¨åææ¥è¯¢æ°æ®ï¼ç»å®å°æ¨¡åå¯¹è±¡ã\n * å°åºäºå­ç¬¦ä¸²çè¯·æ±å¼ï¼ä¾å¦è¯·æ±åæ°ãè·¯å¾åéãæ å¤´ãcookie ç­ï¼è½¬æ¢ä¸ºæ§å¶å¨æ¹æ³åæ°çç®æ ç±»åã\n * å¨æ¸²æ HTML è¡¨åæ¶å°æ¨¡åå¯¹è±¡å¼æ ¼å¼åä¸º String å¼ã\n\n@InitBinder æ¹æ³å¯ä»¥æ³¨åæå®æ§å¶å¨ java.beans.PropertyEditor æ Spring Converter å Formatter ç»ä»¶ãæ­¤å¤ï¼æ¨å¯ä»¥ä½¿ç¨ MVC éç½® å¨å¨å±å±äº«ç FormattingConversionService ä¸­æ³¨å Converter å Formatter ç±»åã\n\n@InitBinder æ¹æ³æ¯æè®¸å¤ä¸ @RequestMapping æ¹æ³ç¸åçåæ°ï¼é¤äº @ModelAttributeï¼å½ä»¤å¯¹è±¡ï¼åæ°ãéå¸¸ï¼å®ä»¬ä½¿ç¨ WebDataBinder åæ°ï¼ç¨äºæ³¨åï¼å void è¿åå¼å£°æãä¸é¢å±ç¤ºäºä¸ä¸ªç¤ºä¾ï¼\n\n@Controller\npublic class FormController {\n\n    @InitBinder\n    public void initBinder(WebDataBinder binder) {\n        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");\n        dateFormat.setLenient(false);\n        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, false));\n    }\n\n    // ...\n}\n\n\næèï¼å½æ¨éè¿å±äº«ç FormattingConversionService ä½¿ç¨åºäº Formatter çè®¾ç½®æ¶ï¼æ¨å¯ä»¥éå¤ä½¿ç¨ç¸åçæ¹æ³å¹¶æ³¨åæå®æ§å¶å¨ç Formatter å®ç°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Controller\npublic class FormController {\n\n    @InitBinder\n    protected void initBinder(WebDataBinder binder) {\n        binder.addCustomFormatter(new DateFormatter("yyyy-MM-dd"));\n    }\n\n    // ...\n}\n\n\nå¨ Web åºç¨ç¨åºçä¸ä¸æä¸­ï¼æ°æ®ç»å®æ¶åå° HTTP è¯·æ±åæ°ï¼å³è¡¨åæ°æ®ææ¥è¯¢åæ°ï¼ç»å®å°æ¨¡åå¯¹è±¡åå¶åµå¥å¯¹è±¡ä¸­çå±æ§ã\n\nä»å¬å¼éµå¾ª JavaBeans å½åçº¦å® ç public å±æ§ç¨äºæ°æ®ç»å®ââä¾å¦ï¼firstName å±æ§ç get/set æ¹æ³ï¼public String getFirstName() å public void setFirstName(String)ã\n\né»è®¤æåµä¸ï¼Spring åè®¸ç»å®å°æ¨¡åå¯¹è±¡å¾ä¸­çææå¬å±å±æ§ãè¿æå³çæ¨éè¦ä»ç»èèæ¨¡åå·æåªäºå¬å±å±æ§ï¼å ä¸ºå®¢æ·ç«¯å¯ä»¥å°ä»»ä½å¬å±å±æ§è·¯å¾ä½ä¸ºç®æ ï¼çè³æ¯ä¸äºé¢è®¡ä¸ä¼éå¯¹ç»å®ç¨ä¾çå¬å±å±æ§è·¯å¾ã\n\nä¾å¦ï¼ç»å®ä¸ä¸ª HTTP è¡¨åæ°æ®ç«¯ç¹ï¼æ¶æå®¢æ·ç«¯å¯ä»¥ä¸ºå­å¨äºæ¨¡åå¯¹è±¡å¾ä¸­ä½ä¸å±äºæµè§å¨ä¸­æ¾ç¤ºç HTML è¡¨åçå±æ§æä¾å¼ãè¿å¯è½å¯¼è´å¨æ¨¡åå¯¹è±¡åå¶ä»»ä½åµå¥å¯¹è±¡ä¸è®¾ç½®æ°æ®ï¼è¿äºæ°æ®é¢è®¡ä¸ä¼æ´æ°ã\n\nèçæ¹æ³æ¯ä½¿ç¨ä¸ä¸ªä¸ç¨æ¨¡åå¯¹è±¡ï¼å®åªå¬å¼ä¸è¡¨åæäº¤ç¸å³çå±æ§ãä¾å¦ï¼å¨ç¨äºæ´æ¹ç¨æ·çµå­é®ä»¶å°åçè¡¨åä¸ï¼æ¨¡åå¯¹è±¡åºå£°ææå°çä¸ç»å±æ§ï¼ä¾å¦ä»¥ä¸ ChangeEmailFormã\n\npublic class ChangeEmailForm {\n\n    private String oldEmailAddress;\n    private String newEmailAddress;\n\n    public void setOldEmailAddress(String oldEmailAddress) {\n        this.oldEmailAddress = oldEmailAddress;\n    }\n\n    public String getOldEmailAddress() {\n        return this.oldEmailAddress;\n    }\n\n    public void setNewEmailAddress(String newEmailAddress) {\n        this.newEmailAddress = newEmailAddress;\n    }\n\n    public String getNewEmailAddress() {\n        return this.newEmailAddress;\n    }\n\n}\n\n\nå¦ææ¨ä¸è½æä¸æ³ä¸ºæ¯ä¸ªæ°æ®ç»å®ç¨ä¾ä½¿ç¨ä¸ç¨æ¨¡åå¯¹è±¡ï¼åå¿é¡»éå¶åè®¸ç¨äºæ°æ®ç»å®çå±æ§ãçæ³æåµä¸ï¼å¯ä»¥éè¿ WebDataBinder ä¸ç setAllowedFields() æ¹æ³æ³¨ååè®¸çå­æ®µæ¨¡å¼ æ¥å®ç°è¿ä¸ç¹ã\n\nä¾å¦ï¼è¦å¨æ¨çåºç¨ç¨åºä¸­æ³¨ååè®¸çå­æ®µæ¨¡å¼ï¼æ¨å¯ä»¥å¨ @Controller æ @ControllerAdvice ç»ä»¶ä¸­å®ç° @InitBinder æ¹æ³ï¼å¦ä¸æç¤ºï¼\n\n@Controller\npublic class ChangeEmailController {\n\n    @InitBinder\n    void initBinder(WebDataBinder binder) {\n        binder.setAllowedFields("oldEmailAddress", "newEmailAddress");\n    }\n\n    // @RequestMapping methods, etc.\n\n}\n\n\né¤äºæ³¨ååè®¸çæ¨¡å¼å¤ï¼è¿å¯ä»¥éè¿ DataBinderåå¶å­ç±»ä¸­ç setDisallowedFields() æ¹æ³æ³¨å åè®¸çå­æ®µæ¨¡å¼ãä½æ¯è¯·æ³¨æï¼âåè®¸åè¡¨âæ¯âæç»åè¡¨âæ´å®å¨ãå æ­¤ï¼setAllowedFields() åºè¯¥ä¼äº setDisallowedFields()ã\n\nè¯·æ³¨æï¼å¹éåè®¸çå­æ®µæ¨¡å¼æ¯åºåå¤§å°åçï¼ç¶èï¼ä¸ä¸åè®¸çå­æ®µæ¨¡å¼å¹éæ¯ä¸åºåå¤§å°åçãæ­¤å¤ï¼å¹éä¸åè®¸çæ¨¡å¼çå­æ®µå°ä¸ä¼è¢«æ¥åï¼å³ä½¿å®ä¹æ°å¥½å¹éåè®¸åè¡¨ä¸­çæ¨¡å¼ã\n\n\n# è¡¨åå¤ç\n\n\n# åå»ºå¤çè¡¨åç Controller\n\nGreetingController éè¿è¿åè§å¾çåç§°å¤ç /greeting ç GET è¯·æ±ï¼è¿æå³çè¿åçåå®¹æ¯åä¸º greeting.html çè§å¾åå®¹ã\n\ngreetingForm() æ¹æ³æ¯éè¿ä½¿ç¨ @GetMapping ä¸é¨æ å°å° GET è¯·æ±çï¼è greetingSubmit() æ¯éè¿ @PostMapping æ å°å° POST è¯·æ±çã\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.PostMapping;\n\n@Controller\npublic class GreetingController {\n\n  @GetMapping("/greeting")\n  public String greetingForm(Model model) {\n    model.addAttribute("greeting", new Greeting());\n    return "greeting";\n  }\n\n  @PostMapping("/greeting")\n  public String greetingSubmit(@ModelAttribute Greeting greeting, Model model) {\n    model.addAttribute("greeting", greeting);\n    return "result";\n  }\n\n}\n\n\n\n# å®ä¹éè¦æäº¤çè¡¨åå®ä½\n\nimport lombok.Data;\n\n@Data\npublic class Greeting {\n\n    private long id;\n\n    private String content;\n\n}\n\n\n\n# æäº¤è¡¨ååç«¯ä»£ç \n\næäº¤å®ä½çé¡µé¢å¿é¡»ä¾èµæç§è§å¾ææ¯ï¼éè¿å°è§å¾åç§°è½¬æ¢ä¸ºæ¨¡æ¿è¿è¡æ¸²æï¼ä»èå¯¹HTMLè¿è¡æå¡ç«¯æ¸²æãå¨ä¸é¢çä¾å­ä¸­ï¼ä½¿ç¨äº Thymeleaf æ¨¡æ¿å¼æä½ä¸ºè§å¾ï¼å®è§£æ greeting.html çåç§æ¨¡æ¿è¡¨è¾¾å¼ä»¥æ¸²æè¡¨åã\n\n<!DOCTYPE html>\n<html xmlns:th="https://www.thymeleaf.org">\n  <head>\n    <title>Getting Started: Handling Form Submission</title>\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  </head>\n  <body>\n    <h1>Form</h1>\n    <form action="#" th:action="@{/greeting}" th:object="${greeting}" method="post">\n      <p>Id: <input type="text" th:field="*{id}" /></p>\n      <p>Message: <input type="text" th:field="*{content}" /></p>\n      <p><input type="submit" value="Submit" /> <input type="reset" value="Reset" /></p>\n    </form>\n  </body>\n</html>\n\n\n\n# æä»¶ä¸ä¼ \n\n\n# åå»ºæä»¶ä¸ä¼ å¤ç Controller\n\nimport java.io.IOException;\nimport java.util.stream.Collectors;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.core.io.Resource;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport org.springframework.web.multipart.MultipartFile;\nimport org.springframework.web.servlet.mvc.method.annotation.MvcUriComponentsBuilder;\nimport org.springframework.web.servlet.mvc.support.RedirectAttributes;\n\nimport com.example.uploadingfiles.storage.StorageFileNotFoundException;\nimport com.example.uploadingfiles.storage.StorageService;\n\n@Controller\npublic class FileUploadController {\n\n\tprivate final StorageService storageService;\n\n\t@Autowired\n\tpublic FileUploadController(StorageService storageService) {\n\t\tthis.storageService = storageService;\n\t}\n\n\t@GetMapping("/")\n\tpublic String listUploadedFiles(Model model) throws IOException {\n\n\t\tmodel.addAttribute("files", storageService.loadAll().map(\n\t\t\t\tpath -> MvcUriComponentsBuilder.fromMethodName(FileUploadController.class,\n\t\t\t\t\t\t"serveFile", path.getFileName().toString()).build().toUri().toString())\n\t\t\t\t.collect(Collectors.toList()));\n\n\t\treturn "uploadForm";\n\t}\n\n\t@GetMapping("/files/{filename:.+}")\n\t@ResponseBody\n\tpublic ResponseEntity<Resource> serveFile(@PathVariable String filename) {\n\n\t\tResource file = storageService.loadAsResource(filename);\n\t\treturn ResponseEntity.ok().header(HttpHeaders.CONTENT_DISPOSITION,\n\t\t\t\t"attachment; filename=\\"" + file.getFilename() + "\\"").body(file);\n\t}\n\n\t@PostMapping("/")\n\tpublic String handleFileUpload(@RequestParam("file") MultipartFile file,\n\t\t\tRedirectAttributes redirectAttributes) {\n\n\t\tstorageService.store(file);\n\t\tredirectAttributes.addFlashAttribute("message",\n\t\t\t\t"You successfully uploaded " + file.getOriginalFilename() + "!");\n\n\t\treturn "redirect:/";\n\t}\n\n\t@ExceptionHandler(StorageFileNotFoundException.class)\n\tpublic ResponseEntity<?> handleStorageFileNotFound(StorageFileNotFoundException exc) {\n\t\treturn ResponseEntity.notFound().build();\n\t}\n\n}\n\n\nFileUploadController ç±»ä½¿ç¨ @Controller æ³¨è§£ï¼ä»¥ä¾¿ Spring å¯ä»¥æ«æå¹¶æ³¨åå®ã æ¯ä¸ªæ¹æ³é½æ æ @GetMapping æ @PostMapping ï¼å°è·¯å¾å HTTP æä½æ å°å°æå®çæ§å¶å¨ã\n\nå¨è¿ç§æåµä¸ï¼\n\n * GET /ï¼ä» StorageService ä¸­æ¥æ¾å½åä¸ä¼ æä»¶çåè¡¨ï¼å¹¶å°å¶å è½½å° Thymeleaf æ¨¡æ¿ä¸­ã å®ä½¿ç¨ MvcUriComponentsBuilder è®¡ç®æåå®éèµæºçé¾æ¥ã\n\n * GET /files/{filename}ï¼å è½½èµæºï¼å¦æå­å¨ï¼å¹¶ä½¿ç¨ Content-Disposition ååºæ å¤´å°å¶åéå°æµè§å¨è¿è¡ä¸è½½ã\n\n * POST /ï¼å¤çä¸ä¸ªå¤é¨åçæ¶æ¯æä»¶ï¼å¹¶å°å¶äº¤ç» StorageService è¿è¡ä¿å­ã\n\n\n# å®ä¹å­å¨æä»¶ç Service\n\nimport org.springframework.core.io.Resource;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.nio.file.Path;\nimport java.util.stream.Stream;\n\npublic interface StorageService {\n\n\tvoid init();\n\n\tvoid store(MultipartFile file);\n\n\tStream<Path> loadAll();\n\n\tPath load(String filename);\n\n\tResource loadAsResource(String filename);\n\n\tvoid deleteAll();\n\n}\n\n\nä¸ä¸ªå åç StorageService å®ç°ï¼\n\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.core.io.Resource;\nimport org.springframework.core.io.UrlResource;\nimport org.springframework.stereotype.Service;\nimport org.springframework.util.FileSystemUtils;\nimport org.springframework.util.StringUtils;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.MalformedURLException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardCopyOption;\nimport java.util.stream.Stream;\n\n@Service\npublic class FileSystemStorageServiceImpl implements StorageService {\n\n    private final Path rootLocation;\n\n    @Autowired\n    public FileSystemStorageServiceImpl(StorageProperties properties) {\n        this.rootLocation = Paths.get(properties.getLocation());\n    }\n\n    @Override\n    public void deleteAll() {\n        FileSystemUtils.deleteRecursively(rootLocation.toFile());\n    }\n\n    @Override\n    public void init() {\n        try {\n            Files.createDirectories(rootLocation);\n        } catch (IOException e) {\n            throw new StorageException("Could not initialize storage", e);\n        }\n    }\n\n    @Override\n    public Path load(String filename) {\n        return rootLocation.resolve(filename);\n    }\n\n    @Override\n    public Stream<Path> loadAll() {\n        try {\n            return Files.walk(this.rootLocation, 1).filter(path -> !path.equals(this.rootLocation))\n                .map(this.rootLocation::relativize);\n        } catch (IOException e) {\n            throw new StorageException("Failed to read stored files", e);\n        }\n    }\n\n    @Override\n    public Resource loadAsResource(String filename) {\n        try {\n            Path file = load(filename);\n            Resource resource = new UrlResource(file.toUri());\n            if (resource.exists() || resource.isReadable()) {\n                return resource;\n            } else {\n                throw new StorageFileNotFoundException("Could not read file: " + filename);\n            }\n        } catch (MalformedURLException e) {\n            throw new StorageFileNotFoundException("Could not read file: " + filename, e);\n        }\n    }\n\n    @Override\n    public void store(MultipartFile file) {\n        String filename = StringUtils.cleanPath(file.getOriginalFilename());\n        try {\n            if (file.isEmpty()) {\n                throw new StorageException("Failed to store empty file " + filename);\n            }\n            if (filename.contains("..")) {\n                // This is a security check\n                throw new StorageException(\n                    "Cannot store file with relative path outside current directory " + filename);\n            }\n            try (InputStream inputStream = file.getInputStream()) {\n                Files.copy(inputStream, this.rootLocation.resolve(filename), StandardCopyOption.REPLACE_EXISTING);\n            }\n        } catch (IOException e) {\n            throw new StorageException("Failed to store file " + filename, e);\n        }\n    }\n\n}\n\n\n\n# åå»ºæä»¶ä¸ä¼ è¡¨å\n\n<html xmlns:th="https://www.thymeleaf.org">\n<body>\n\n\t<div th:if="${message}">\n\t\t<h2 th:text="${message}"/>\n\t</div>\n\n\t<div>\n\t\t<form method="POST" enctype="multipart/form-data" action="/">\n\t\t\t<table>\n\t\t\t\t<tr><td>File to upload:</td><td><input type="file" name="file" /></td></tr>\n\t\t\t\t<tr><td></td><td><input type="submit" value="Upload" /></td></tr>\n\t\t\t</table>\n\t\t</form>\n\t</div>\n\n\t<div>\n\t\t<ul>\n\t\t\t<li th:each="file : ${files}">\n\t\t\t\t<a th:href="${file}" th:text="${file}" />\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\n</body>\n</html>\n\n\n\n# æä»¶ä¸ä¼ éå¶\n\nå¦æä½¿ç¨ Spring Bootï¼å¯ä»¥ä½¿ç¨ä¸äºå±æ§è®¾ç½®æ¥è°æ´å¶èªå¨éç½®ç MultipartConfigElementã\n\nå°ä»¥ä¸å±æ§æ·»å å°ç°æå±æ§è®¾ç½®ä¸­ï¼å¨ src/main/resources/application.properties ä¸­ï¼ï¼\n\nspring.servlet.multipart.max-file-size=128KB\nspring.servlet.multipart.max-request-size=128KB\n\n\n * spring.servlet.multipart.max-file-size è®¾ç½®ä¸º 128KBï¼è¡¨ç¤ºæ»æä»¶å¤§å°ä¸è½è¶è¿ 128KBã\n * spring.servlet.multipart.max-request-size è®¾ç½®ä¸º 128KBï¼è¿æå³ç multipart/form-data çæ»è¯·æ±å¤§å°ä¸è½è¶è¿ 128KBã\n\n\n# å¼å¸¸å¤ç\n\n\n# @ExceptionHandler\n\n@Controller å @ControllerAdvice ç±»å¯ä»¥ç¨ @ExceptionHandler æ¹æ³æ¥å¤çæ¥èªæ§å¶å¨æ¹æ³çå¼å¸¸ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Controller\npublic class SimpleController {\n\n    // ...\n\n    @ExceptionHandler\n    public ResponseEntity<String> handle(IOException ex) {\n        // ...\n    }\n}\n\n\nå¼å¸¸å¯è½ä¸æ­£å¨ä¼ æ­çé¡¶çº§å¼å¸¸ï¼ä¾å¦ï¼æåºç´æ¥ç IOExceptionï¼æåè£å¨å¼å¸¸ä¸­çåµå¥åå ï¼ä¾å¦ï¼åè£å¨ IllegalStateException ä¸­ç IOExceptionï¼ç¸å¹éãä» 5.3 å¼å§ï¼è¿å¯ä»¥å¹éä»»æåå çº§å«ï¼èä»¥ååªèèç´æ¥åå ã\n\nå¯¹äºå¹éçå¼å¸¸ç±»åï¼æå¥½å°ç®æ å¼å¸¸å£°æä¸ºæ¹æ³åæ°ï¼å¦åé¢çç¤ºä¾æç¤ºãå½å¤ä¸ªå¼å¸¸æ¹æ³å¹éæ¶ï¼æ ¹å¼å¸¸å¹ééå¸¸ä¼åäºåå å¼å¸¸å¹éãæ´å·ä½å°è¯´ï¼ExceptionDepthComparator ç¨äºæ ¹æ®æåºçå¼å¸¸ç±»åçæ·±åº¦å¯¹å¼å¸¸è¿è¡æåºã\n\næèï¼æ³¨è§£å£°æå¯ä»¥ç¼©å°è¦å¹éçå¼å¸¸ç±»åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@ExceptionHandler({FileSystemException.class, RemoteException.class})\npublic ResponseEntity<String> handle(IOException ex) {\n    // ...\n}\n\n\næ¨çè³å¯ä»¥ä½¿ç¨å·æéå¸¸éç¨çåæ°ç­¾åçç¹å®å¼å¸¸ç±»ååè¡¨ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@ExceptionHandler({FileSystemException.class, RemoteException.class})\npublic ResponseEntity<String> handle(Exception ex) {\n    // ...\n}\n\n\néå¸¸å»ºè®®æ¨å¨åæ°ç­¾åä¸­å°½å¯è½å·ä½ï¼ä»¥åå°æ ¹æ¬ååå å¼å¸¸ç±»åä¹é´ä¸å¹éçå¯è½æ§ãèèå°ä¸ä¸ªå¤éå¹éæ¹æ³åè§£ä¸ºåç¬ç @ExceptionHandler æ¹æ³ï¼æ¯ä¸ªæ¹æ³éè¿å¶ç­¾åå¹éä¸ä¸ªç¹å®çå¼å¸¸ç±»åã\n\nå¨å¤ @ControllerAdvice å®æä¸­ï¼å»ºè®®å¨å·æç¸åºé¡ºåºä¼åçº§ç @ControllerAdvice ä¸å£°ææ¨çä¸»è¦æ ¹å¼å¸¸æ å°ãè½ç¶æ ¹å¼å¸¸å¹éä¼äºåå ï¼ä½è¿æ¯å¨ç»å®æ§å¶å¨æ @ControllerAdvice ç±»çæ¹æ³ä¸­å®ä¹çãè¿æå³çä¼åçº§è¾é«ç @ControllerAdvice ä¸çåå å¹éä¼äºä¼åçº§è¾ä½ç @ControllerAdvice ä¸çä»»ä½å¹éï¼ä¾å¦ï¼rootï¼ã\n\næåä½åæ ·éè¦çæ¯ï¼ @ExceptionHandler æ¹æ³å®ç°å¯ä»¥éæ©éè¿ä»¥åå§å½¢å¼éæ°æåºç»å®å¼å¸¸å®ä¾æ¥éåºå¤çãè¿å¨æ¨åªå¯¹æ ¹çº§å¹éææ æ³éæç¡®å®çç¹å®ä¸ä¸æä¸­çå¹éæå´è¶£çæåµä¸å¾æç¨ãéæ°æåºçå¼å¸¸éè¿å©ä½çè§£æé¾ä¼ æ­ï¼å°±å¥½åç»å®ç @ExceptionHandler æ¹æ³ä¸å¼å§å°±ä¸ä¼å¹éä¸æ ·ã\n\nSpring MVC ä¸­å¯¹ @ExceptionHandler æ¹æ³çæ¯æå»ºç«å¨ DispatcherServlet çº§å« HandlerExceptionResolver æºå¶ä¸ã\n\n> éå½ï¼\n> \n> @ExceptionHandler æ¯æçåæ°\n> \n> @ExceptionHandler æ¯æè¿åå¼\n\n\n# åèèµæ\n\n * Spring Framework å®æ¹ææ¡£\n * Spring Framework å®æ¹ææ¡£ä¹ Web',normalizedContent:'# spring web åºç¨\n\nspring mvc æä¾äºä¸ç§åºäºæ³¨è§£çç¼ç¨æ¨¡åï¼@controller å @restcontroller ç»ä»¶ä½¿ç¨æ³¨è§£æ¥è¡¨è¾¾è¯·æ±æ å°ãè¯·æ±è¾å¥ãå¼å¸¸å¤çç­ãæ³¨è§£æ§å¶å¨å·æçµæ´»çæ¹æ³ç­¾åï¼å¹¶ä¸ä¸å¿æ©å±åºç±»æå®ç°ç¹å®æ¥å£ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ªç±æ³¨è§£å®ä¹çæ§å¶å¨ï¼\n\n@controller\npublic class hellocontroller {\n\n    @getmapping("/hello")\n    public string handle(model model) {\n        model.addattribute("message", "hello world!");\n        return "index";\n    }\n}\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼è¯¥æ¹æ³æ¥åä¸ä¸ª model å¹¶ä»¥ string å½¢å¼è¿åä¸ä¸ªè§å¾åç§°ï¼ä½è¿å­å¨è®¸å¤å¶ä»éé¡¹ã\n\n\n# å¿«éå¥é¨\n\nä¸é¢ï¼éè¿ä¸ä¸ªç®åçç¤ºä¾æ¥å±ç¤ºå¦ä½éè¿ spring åå»ºä¸ä¸ª hello world web æå¡ã\n\nï¼1ï¼pom.xml ä¸­å¼å¥ä¾èµ\n\n<dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-web</artifactid>\n</dependency>\n\n\nï¼2ï¼å®ä¹ controller\n\nspring æå»º restful æå¡çæ¹æ³ï¼http è¯·æ±ç± controller å¤çã è¿äºç»ä»¶ç± @restcontroller æ³¨è§£æ è¯ã\n\nãç¤ºä¾ãä¸é¢çç¤ºä¾å®ä¹äºä¸ä¸ªå¤ç /greeting ç get è¯·æ±\n\nimport org.springframework.stereotype.controller;\nimport org.springframework.ui.model;\nimport org.springframework.web.bind.annotation.getmapping;\nimport org.springframework.web.bind.annotation.requestparam;\n\n@controller\npublic class greetingcontroller {\n\n    @getmapping("/greeting")\n    public string greeting(@requestparam(name = "name", required = false, defaultvalue = "world") string name,\n        model model) {\n        model.addattribute("name", name);\n        return "greeting";\n    }\n\n}\n\n\nï¼3ï¼åå»ºå¯å¨ç±»\n\nimport org.springframework.boot.springapplication;\nimport org.springframework.boot.autoconfigure.springbootapplication;\n\n@springbootapplication\npublic class helloworldapplication {\n\n    public static void main(string[] args) {\n        springapplication.run(helloworldapplication.class);\n    }\n\n}\n\n\nï¼4ï¼å¯å¨æå¡ï¼æ§è¡ helloworldapplication.main æ¹æ³å¯å¨ web æå¡\n\nï¼5ï¼æµè¯\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greetingï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nhello, world!\n\n\næå¼æµè§å¨ï¼è®¿é® http://localhost:8080/greeting?name=dunwuï¼é¡µé¢ä¼æ¾ç¤ºå¦ä¸åå®¹ï¼\n\nhello, dunwu!\n\n\n\n# spring web ç»ä»¶\n\n\n# ç»ä»¶æ«æ\n\nå¯ä»¥ä½¿ç¨ servlet ç webapplicationcontext ä¸­çæ å spring bean å®ä¹æ¥å®ä¹æ§å¶å¨ã@controller æé ååè®¸èªå¨æ£æµï¼ä¸ spring å¯¹æ£æµç±»è·¯å¾ä¸­ç @component ç±»å¹¶ä¸ºå®ä»¬èªå¨æ³¨å bean å®ä¹çä¸è¬æ¯æä¿æä¸è´ãå®è¿åå½å¸¦æ³¨è§£ç±»çæé åï¼è¡¨æå¶ä½ä¸º web ç»ä»¶çè§è²ã\n\nè¦å¯ç¨æ­¤ç±» @controller çèªå¨æ£æµï¼å¯ä»¥å°ç»ä»¶æ«ææ·»å å°æ¨ç java éç½®ä¸­ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@configuration\n@componentscan("org.example.web")\npublic class webconfig {\n\n    // ...\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸è¿°ç¤ºä¾ç­æç xml éç½®ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemalocation="\n        http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:component-scan base-package="org.example.web"/>\n\n    \x3c!-- ... --\x3e\n\n</beans>\n\n\n\n# aop ä»£ç\n\nå¨æäºæåµä¸ï¼å¯è½éè¦å¨è¿è¡æ¶ä½¿ç¨ aop ä»£çè£é¥°æ§å¶å¨ãä¸ä¸ªä¾å­æ¯ï¼å¦æéæ©ç´æ¥å¨æ§å¶å¨ä¸ä½¿ç¨ @transactional æ³¨è§£ãå¨è¿ç§æåµä¸ï¼ç¹å«æ¯å¯¹äºæ§å¶å¨ï¼å»ºè®®ä½¿ç¨åºäºç±»çä»£çãç´æ¥å¨æ§å¶å¨ä¸ä½¿ç¨æ­¤ç±»æ³¨è§£ä¼èªå¨åºç°è¿ç§æåµã\n\nå¦ææ§å¶å¨å®ç°äºä¸ä¸ªæ¥å£ï¼å¹¶ä¸éè¦ aop ä»£çï¼æ¨å¯è½éè¦æ¾å¼éç½®åºäºç±»çä»£çãä¾å¦ï¼å¯¹äº @enabletransactionmanagement ï¼å¯ä»¥æ´æ¹ä¸º @enabletransactionmanagement(proxytargetclass = true)ï¼å¯¹äº <tx:annotation-driven/> ï¼æ¨å¯ä»¥æ´æ¹ä¸º <tx:annotation-driven proxy-target-class="true"/>ã\n\n\n# @controller\n\n@restcontroller æ¯ä¸ä¸ªç»åæ³¨è§£ï¼å®æ¬èº«ä½¿ç¨ @controller å @responsebody åæ³¨è§£è¿è¡æ è®°ï¼ä»¥æç¤ºæ§å¶å¨çæ¯ä¸ªæ¹æ³ç»§æ¿äºç±»åçº§å«ç @responsebody æ³¨è§£ï¼å æ­¤ç´æ¥åå¥ååºä¸»ä½ï¼èä¸æ¯ä½¿ç¨ html æ¨¡æ¿è¿è¡è§å¾è§£æåæ¸²æã\n\n\n# @requestmapping\n\nå¯ä»¥ä½¿ç¨ @requestmapping æ³¨è§£å°è¯·æ±æ å°å°æ§å¶å¨æ¹æ³ãå®å·æåç§å±æ§ï¼å¯ä»¥éè¿ urlãhttp æ¹æ³ãè¯·æ±åæ°ãæ å¤´ååªä½ç±»åè¿è¡å¹éãå¯ä»¥å¨ç±»çº§å«ä½¿ç¨å®æ¥è¡¨è¾¾å±äº«æ å°ï¼æèå¨æ¹æ³çº§å«ä½¿ç¨å®æ¥ç¼©å°å°ç¹å®ç«¯ç¹çæ å°ã\n\n@requestmapping çä¸»è¦åæ°ï¼\n\n * path / method æå®æ å°è·¯å¾ä¸æ¹æ³\n * params / headers éå®æ å°èå´\n * consumes / produces éå®è¯·æ±ä¸ååºæ ¼å¼\n\nspring è¿æä¾äºä»¥ä¸ @requestmapping çåä½ï¼\n\n * @getmapping\n * @postmapping\n * @putmapping\n * @deletemapping\n * @patchmapping\n\nå¿«æ·æ¹å¼æ¯æä¾çèªå®ä¹æ³¨è§£ï¼å ä¸ºå¯ä»¥è¯´ï¼å¤§å¤æ°æ§å¶å¨æ¹æ³åºè¯¥æ å°å°ç¹å®ç http æ¹æ³ï¼èä¸æ¯ä½¿ç¨ @requestmappingï¼é»è®¤æåµä¸ï¼å®ä¸ææ http æ¹æ³å¹éãå¨ç±»çº§å«ä»ç¶éè¦ @requestmapping æ¥è¡¨è¾¾å±äº«æ å°ã\n\nä»¥ä¸ç¤ºä¾å·æç±»ååæ¹æ³çº§å«çæ å°ï¼\n\n@restcontroller\n@requestmapping("/persons")\nclass personcontroller {\n\n    @getmapping("/{id}")\n    public person getperson(@pathvariable long id) {\n        // ...\n    }\n\n    @postmapping\n    @responsestatus(httpstatus.created)\n    public void add(@requestbody person person) {\n        // ...\n    }\n}\n\n\n# uri æ¨¡å¼\n\n@requestmapping æ¹æ³å¯ä»¥ä½¿ç¨ url æ¨¡å¼è¿è¡æ å°ãæä¸¤ç§éæ©ï¼\n\n * pathpattern - ä¸ url è·¯å¾å¹éçé¢è§£ææ¨¡å¼ä¹é¢è§£æä¸º pathcontainerãè¯¥è§£å³æ¹æ¡ä¸ä¸ºç½ç»ä½¿ç¨èè®¾è®¡ï¼å¯ææå¤çç¼ç åè·¯å¾åæ°ï¼å¹¶é«æå¹éã\n * antpathmatcher - æ ¹æ®å­ç¬¦ä¸²è·¯å¾å¹éå­ç¬¦ä¸²æ¨¡å¼ãè¿æ¯å¨ spring éç½®ä¸­ä¹ä½¿ç¨çåå§è§£å³æ¹æ¡ï¼ç¨äºå¨ç±»è·¯å¾ãæä»¶ç³»ç»åå¶ä»ä½ç½®éæ©èµæºãå®çæçè¾ä½ï¼å¹¶ä¸å­ç¬¦ä¸²è·¯å¾è¾å¥å¯¹äºææå¤ç url çç¼ç åå¶ä»é®é¢æ¯ä¸ä¸ªææã\n\npathpattern æ¯ web åºç¨ç¨åºçæ¨èè§£å³æ¹æ¡ï¼å®æ¯ spring webflux ä¸­çå¯ä¸éæ©ãå®ä» 5.3 çå¼å§å¨ spring mvc ä¸­ä½¿ç¨ï¼ä» 6.0 çå¼å§é»è®¤å¯ç¨ãè¯·åé mvc éç½® ä»¥èªå®ä¹è·¯å¾å¹ééé¡¹ã\n\npathpattern æ¯æä¸ antpathmatcher ç¸åçæ¨¡å¼è¯­æ³ãæ­¤å¤ï¼å®è¿æ¯ææè·æ¨¡å¼ï¼ä¾å¦ {spring}ï¼ç¨äºå¹éè·¯å¾æ«å°¾ç 0 ä¸ªæå¤ä¸ªè·¯å¾æ®µãpathpattern è¿éå¶ä½¿ç¨ ** æ¥å¹éå¤ä¸ªè·¯å¾æ®µï¼è¿æ ·å®åªåè®¸åºç°å¨æ¨¡å¼çæ«å°¾ãè¿æ¶é¤äºå¨ä¸ºç»å®è¯·æ±éæ©æä½³å¹éæ¨¡å¼æ¶åºç°çè®¸å¤æ­§ä¹ãæå³å®æ´æ¨¡å¼è¯­æ³ï¼è¯·åé pathpattern å antpathmatcherã\n\nä¸äºç¤ºä¾æ¨¡å¼ï¼\n\n * "/resources/ima?e.png" -å¹éä¸ä¸ªå­ç¬¦\n * "/resources/*.png" - å¹éé¶ä¸ªæå¤ä¸ªå­ç¬¦\n * "/resources/**" - å¹éå¤ä¸ªå­ç¬¦\n * "/projects/{project}/versions" - å¹éè·¯å¾æ®µå¹¶å°å¶æè·ä¸ºåé\n * "/projects/{project:[a-z]+}/versions" - ä½¿ç¨æ­£åè¡¨è¾¾å¼å¹éå¹¶æè·åé\n\nå¯ä»¥ä½¿ç¨ @pathvariable è®¿é®æè·ç uri åéãä¾å¦ï¼\n\n@getmapping("/owners/{ownerid}/pets/{petid}")\npublic pet findpet(@pathvariable long ownerid, @pathvariable long petid) {\n    // ...\n}\n\n\nå¯ä»¥å¨ç±»åæ¹æ³çº§å«å£°æ uri åéï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@controller\n@requestmapping("/owners/{ownerid}")\npublic class ownercontroller {\n\n    @getmapping("/pets/{petid}")\n    public pet findpet(@pathvariable long ownerid, @pathvariable long petid) {\n        // ...\n    }\n}\n\n\nuri åéä¼èªå¨è½¬æ¢ä¸ºéå½çç±»åï¼å¦åä¼å¼å typemismatchexceptionãé»è®¤æ¯æç®åç±»åï¼intãlongãdate ç­ï¼ï¼å¯ä»¥æ³¨åå¯¹ä»»ä½å¶ä»æ°æ®ç±»åçæ¯æãè¯·åè§ç±»åè½¬æ¢å databinderã\n\nå¯ä»¥æ¾å¼å½å uri åéï¼ä¾å¦ï¼@pathvariable("customid")ï¼ï¼ä½å¦æåç§°ç¸åå¹¶ä¸ä»£ç æ¯ä½¿ç¨ -parameters ç¼è¯å¨æ å¿ç¼è¯çï¼åå¯ä»¥çç¥è¯¥ç»èã\n\nè¯­æ³ {varname:regex} ä½¿ç¨æ­£åè¡¨è¾¾å¼å£°æä¸ä¸ª uri åéãä¾å¦ï¼ç»å® url "/spring-web-3.0.5.jar"ï¼ä»¥ä¸æ¹æ³æååç§°ãçæ¬åæä»¶æ©å±åï¼\n\n@getmapping("/{name:[a-z-]+}-{version:\\\\d\\\\.\\\\d\\\\.\\\\d}{ext:\\\\.[a-z]+}")\npublic void handle(@pathvariable string name, @pathvariable string version, @pathvariable string ext) {\n    // ...\n}\n\n\nuri è·¯å¾æ¨¡å¼è¿å¯ä»¥åµå¥ ${â¦} å ä½ç¬¦ï¼è¿äºå ä½ç¬¦å¨å¯å¨æ¶éè¿ä½¿ç¨ propertysourcesplaceholderconfigurer éå¯¹æ¬å°ãç³»ç»ãç¯å¢åå¶ä»å±æ§æºè¿è¡è§£æãä¾å¦ï¼å¯ä»¥ä½¿ç¨å®æ¥æ ¹æ®æäºå¤é¨éç½®åæ°ååºæ¬ urlã\n\n# æ¨¡å¼æ¯è¾\n\nå½å¤ä¸ªæ¨¡å¼å¹éä¸ä¸ª url æ¶ï¼å¿é¡»éæ©æä½³å¹éãè¿æ¯éè¿ä»¥ä¸æ¹å¼ä¹ä¸å®æçï¼å·ä½åå³äºæ¯å¦å¯ç¨äºå·²è§£æç pathpattern ä»¥ä¾ä½¿ç¨ï¼\n\n * pathpattern.specificity_comparator\n * antpathmatcher.getpatterncomparator(string path)\n\nä¸¤èé½æå©äºå¯¹æ¨¡å¼è¿è¡æåºï¼æ´å·ä½çæ¨¡å¼ä½äºé¡¶é¨ãå¦ææ¨¡å¼å·æè¾å°ç uri åéï¼è®¡ä¸º 1ï¼ãåééç¬¦ï¼è®¡ä¸º 1ï¼ååééç¬¦ï¼è®¡ä¸º 2ï¼ï¼åæ¨¡å¼ä¸å¤ªå·ä½ãå¦æå¾åç¸åï¼åéæ©è¾é¿çæ¨¡å¼ãç»å®ç¸åçåæ°åé¿åº¦ï¼éæ© uri åéå¤äºééç¬¦çæ¨¡å¼ã\n\né»è®¤æ å°æ¨¡å¼ (/**) è¢«æé¤å¨è¯åä¹å¤å¹¶å§ç»æå¨æåãæ­¤å¤ï¼åç¼æ¨¡å¼ï¼ä¾å¦ /public/**ï¼è¢«è®¤ä¸ºä¸å¦å¶ä»æ²¡æåééç¬¦çæ¨¡å¼å·ä½ã\n\n# åç¼å¹é\n\nä» 5.3 å¼å§ï¼é»è®¤æåµä¸ spring mvc ä¸åæ§è¡ .* åç¼æ¨¡å¼å¹éï¼å¶ä¸­æ å°å° person çæ§å¶å¨ä¹éå¼æ å°å° /person.*ãå æ­¤ï¼è·¯å¾æ©å±ä¸åç¨äºè§£éè¯·æ±çååºåå®¹ç±»åâ©ââä¾å¦ï¼/person.pdfã/person.xml ç­ã\n\nå½æµè§å¨è¿å»åéé¾ä»¥ä¸è´è§£éç accept è¯·æ±å¤´æ¶ï¼ä»¥è¿ç§æ¹å¼ä½¿ç¨æä»¶æ©å±åæ¯å¿è¦çãç°å¨ï¼è¿ä¸åæ¯å¿éçï¼ä½¿ç¨ accept è¯·æ±å¤´åºè¯¥æ¯é¦éã\n\néçæ¶é´çæ¨ç§»ï¼æä»¶æ©å±åçä½¿ç¨å¨å¾å¤æ¹é¢é½è¢«è¯ææ¯æé®é¢çãå½ä½¿ç¨ uri åéãè·¯å¾åæ°å uri ç¼ç è¦çæ¶ï¼å®å¯è½ä¼å¯¼è´æ­§ä¹ãå³äºåºäº url çææåå®å¨æ§çæ¨çä¹åå¾æ´å å°é¾ã\n\nè¦å¨ 5.3 ä¹åççæ¬ä¸­å®å¨ç¦ç¨è·¯å¾æ©å±ï¼è¯·è®¾ç½®ä»¥ä¸åå®¹ï¼\n\n * usesuffixpatternmatching(false) - åèï¼pathmatchconfigurer\n * favorpathextension(false) - åèï¼contentnegotiationconfigurer\n\né¤äºéè¿ accept è¯·æ±å¤´ä¹å¤ï¼è¿æä¸ç§è¯·æ±åå®¹ç±»åçæ¹æ³ä»ç¶æç¨ï¼ä¾å¦å¨æµè§å¨ä¸­é®å¥ url æ¶ãè·¯å¾æ©å±çä¸ç§å®å¨æ¿ä»£æ¹æ³æ¯ä½¿ç¨æ¥è¯¢åæ°ç­ç¥ãå¦ææ¨å¿é¡»ä½¿ç¨æä»¶æ©å±åï¼è¯·èèéè¿ contentnegotiationconfigurer ç mediatypes å±æ§å°å®ä»¬éå¶ä¸ºæç¡®æ³¨åçæ©å±ååè¡¨ã\n\n# åç¼å¹éå rfd\n\nåå°æä»¶ä¸è½½ (rfd) æ»å»ä¸ xss ç±»ä¼¼ï¼å ä¸ºå®ä¾èµäºååºä¸­åæ çè¯·æ±è¾å¥ï¼ä¾å¦ï¼æ¥è¯¢åæ°å uri åéï¼ãç¶èï¼rfd æ»å»ä¸æ¯å° javascript æå¥ htmlï¼èæ¯ä¾èµäºæµè§å¨åæ¢æ¥æ§è¡ä¸è½½ï¼å¹¶å¨ç¨ååå»æ¶å°ååºè§ä¸ºå¯æ§è¡èæ¬ã\n\nå¨ spring mvc ä¸­ï¼@responsebody å responseentity æ¹æ³å­å¨é£é©ï¼å ä¸ºå®ä»¬å¯ä»¥æ¸²æä¸åçåå®¹ç±»åï¼å®¢æ·ç«¯å¯ä»¥éè¿ url è·¯å¾æ©å±è¯·æ±è¿äºåå®¹ç±»åãç¦ç¨åç¼æ¨¡å¼å¹éå¹¶ä½¿ç¨è·¯å¾æ©å±è¿è¡åå®¹ååå¯ä»¥éä½é£é©ï¼ä½ä¸è¶³ä»¥é²æ­¢ rfd æ»å»ã\n\nä¸ºäºé²æ­¢ rfd æ»å»ï¼å¨æ¸²æååºä¸»ä½ä¹åï¼spring mvc æ·»å äºä¸ä¸ª content-disposition:inline;filename=f.txt å¤´ä»¥å»ºè®®ä¸ä¸ªåºå®ä¸å®å¨çä¸è½½æä»¶ãä»å½ url è·¯å¾åå«çæä»¶æ©å±åæ¢ä¸å®å¨ä¹ä¸æç¡®æ³¨åç¨äºåå®¹ååæ¶ï¼æä¼æ§è¡æ­¤æä½ãä½æ¯ï¼å½ url ç´æ¥è¾å¥æµè§å¨æ¶ï¼å®å¯è½ä¼äº§çå¯ä½ç¨ã\n\né»è®¤æåµä¸ï¼åè®¸è®¸å¤å¸¸è§çè·¯å¾æ©å±æ¯å®å¨çãå·æèªå®ä¹ httpmessageconverter å®ç°çåºç¨ç¨åºå¯ä»¥æ¾å¼æ³¨åæä»¶æ©å±åä»¥è¿è¡åå®¹ååï¼ä»¥é¿åä¸ºè¿äºæ©å±åæ·»å  content-disposition å¤´ãè¯·åé åå®¹ç±»åã\n\nå³äº rfd æ´å¤ç»èæ¨èåè cve-2015-5211\n\n# éå®æ°æ®ç±»å\n\næ¨å¯ä»¥æ ¹æ®è¯·æ±ç content-type ç¼©å°è¯·æ±æ å°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@postmapping(path = "/pets", consumes = "application/json")\npublic void addpet(@requestbody pet pet) {\n    // ...\n}\n\n\nconsumes å±æ§è¿æ¯æå¦å®è¡¨è¾¾å¼ - ä¾å¦ï¼!textplain è¡¨ç¤ºé¤ textplain ä¹å¤çä»»ä½åå®¹ç±»åã\n\næ¨å¯ä»¥å¨ç±»çº§å«å£°æä¸ä¸ªå±äº«ç consumes å±æ§ãç¶èï¼ä¸å¤§å¤æ°å¶ä»è¯·æ±æ å°å±æ§ä¸åçæ¯ï¼å½å¨ç±»çº§å«ä½¿ç¨æ¶ï¼æ¹æ³çº§å«ç consumes å±æ§ä¼è¦çèä¸æ¯æ©å±ç±»çº§å«çå£°æã\n\n# producible media types\n\nå¯ä»¥æ ¹æ® accept è¯·æ±å¤´åæ§å¶å¨æ¹æ³çæçåå®¹ç±»ååè¡¨æ¥ç¼©å°è¯·æ±æ å°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@getmapping(path = "/pets/{petid}", produces = "application/json")\n@responsebody\npublic pet getpet(@pathvariable string petid) {\n    // ...\n}\n\n\nåªä½ç±»åå¯ä»¥æå®ä¸ä¸ªå­ç¬¦éãæ¯æå¦å®è¡¨è¾¾å¼ââä¾å¦ï¼!textplain è¡¨ç¤ºé¤ "text/plain" ä¹å¤çä»»ä½åå®¹ç±»åã\n\nå¯ä»¥å¨ç±»çº§å«å£°æä¸ä¸ªå±äº«ç produces å±æ§ãç¶èï¼ä¸å¤§å¤æ°å¶ä»è¯·æ±æ å°å±æ§ä¸åï¼å½å¨ç±»çº§å«ä½¿ç¨æ¶ï¼æ¹æ³çº§å«ç produces å±æ§ä¼è¦çèä¸æ¯æ©å±ç±»çº§å«çå£°æã\n\n# åæ°ãè¯·æ±å¤´\n\nå¯ä»¥æ ¹æ®è¯·æ±åæ°æ¡ä»¶ç¼©å°è¯·æ±æ å°èå´ãå¯ä»¥æµè¯æ¯å¦å­å¨è¯·æ±åæ° (myparam)ãæ¯å¦ç¼ºå°è¯·æ±åæ° (!myparam) æç¹å®å¼ (myparam=myvalue)ãä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½æµè¯ç¹å®å¼ï¼\n\n@getmapping(path = "/pets/{petid}", params = "myparam=myvalue")\npublic void findpet(@pathvariable string petid) {\n    // ...\n}\n\n\nè¿å¯ä»¥ä½¿ç¨ç¸åçè¯·æ±å¤´æ¡ä»¶ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@getmapping(path = "/pets", headers = "myheader=myvalue")\npublic void findpet(@pathvariable string petid) {\n    // ...\n}\n\n\n# http head, options\n\n@getmappingï¼å @requestmapping(method=httpmethod.get)ï¼éæå°æ¯æ http head ä»¥è¿è¡è¯·æ±æ å°ãæ§å¶å¨æ¹æ³ä¸éè¦æ¹åãå¨ jakarta.servlet.http.httpservlet ä¸­åºç¨çååºåè£å¨ç¡®ä¿å° content-length å¤´è®¾ç½®ä¸ºåå¥çå­èæ°ï¼å®éä¸æ²¡æåå¥ååºï¼ã\n\n@getmappingï¼å@requestmapping(method=httpmethod.get)ï¼è¢«éå¼æ å°å¹¶æ¯æ http headãhttp head è¯·æ±çå¤çæ¹å¼å°±å¥½åå®æ¯ http get ä¸æ ·ï¼é¤äºä¸åå¥æ­£æï¼èæ¯è®¡ç®å­èæ°å¹¶è®¾ç½® content-length å¤´ã\n\né»è®¤æåµä¸ï¼éè¿å° allow ååºå¤´è®¾ç½®ä¸ºææå·æå¹é url æ¨¡å¼ç @requestmapping æ¹æ³ä¸­ååºç http æ¹æ³åè¡¨æ¥å¤ç http optionsã\n\nå¯¹äºæ²¡æ http æ¹æ³å£°æç @requestmapping ï¼allow å¤´è®¾ç½®ä¸º get,head,post,put,patch,delete,optionsãæ§å¶å¨æ¹æ³åºå§ç»å£°ææ¯æç http æ¹æ³ï¼ä¾å¦ï¼éè¿ä½¿ç¨ http æ¹æ³ç¹å®åä½ï¼@getmappingã@postmapping ç­ï¼ã\n\nyou can explicitly map the @requestmapping method to http head and http options, but that is not necessary in the common case.\n\nå¯ä»¥æ¾å¼å°å° @requestmapping æ¹æ³æ å°å° http head å http optionsï¼ä½å¨å¸¸è§æåµä¸è¿ä¸æ¯å¿éçã\n\n# èªå®ä¹æ³¨è§£\n\nspring mvc æ¯æä½¿ç¨ç»åæ³¨è§£ è¿è¡è¯·æ±æ å°ãè¿äºæ³¨è§£æ¬èº«æ¯ç¨ @requestmapping è¿è¡åæ³¨è§£çï¼å¹¶ä¸ç»åèµ·æ¥éæ°å£°æ @requestmapping å±æ§çä¸ä¸ªå­éï¼æå¨é¨ï¼ï¼å·ææ´æç¡®çç®çã\n\n@getmappingã@postmappingã@putmappingã@deletemapping å @patchmapping æ¯ç»åæ³¨è§£çç¤ºä¾ãæä¾å®ä»¬æ¯å ä¸ºï¼å¯ä»¥è¯´ï¼å¤§å¤æ°æ§å¶å¨æ¹æ³åºè¯¥æ å°å°ç¹å®ç http æ¹æ³ï¼èä¸æ¯ä½¿ç¨ @requestmappingï¼é»è®¤æåµä¸ï¼å®ä¸ææ http æ¹æ³å¹éãå¦ææ¨éè¦ç»åæ³¨è§£çç¤ºä¾ï¼è¯·æ¥çè¿äºæ³¨è§£çå£°ææ¹å¼ã\n\nspring mvc è¿æ¯æå·æèªå®ä¹è¯·æ±å¹éé»è¾çèªå®ä¹è¯·æ±æ å°å±æ§ãè¿æ¯ä¸ä¸ªæ´é«çº§çéé¡¹ï¼éè¦ç»§æ¿ requestmappinghandlermapping å¹¶è¦ç getcustommethodcondition æ¹æ³ï¼æ¨å¯ä»¥å¨å¶ä¸­æ£æ¥èªå®ä¹å±æ§å¹¶è¿åæ¨èªå·±ç requestconditionã\n\n# æ¾ç¤ºæ³¨å\n\næ¨å¯ä»¥ä»¥ç¼ç¨æ¹å¼æ³¨åå¤çç¨åºæ¹æ³ï¼æ¨å¯ä»¥å°å¶ç¨äºå¨ææ³¨åæé«çº§æåµï¼ä¾å¦ä¸å url ä¸çåä¸å¤çç¨åºçä¸åå®ä¾ãä»¥ä¸ç¤ºä¾æ³¨åäºä¸ä¸ªå¤çç¨åºæ¹æ³\n\n@configuration\npublic class myconfig {\n\n    @autowired\n    public void sethandlermapping(requestmappinghandlermapping mapping, userhandler handler)\n            throws nosuchmethodexception {\n\n        requestmappinginfo info = requestmappinginfo\n                .paths("/user/{id}").methods(requestmethod.get).build();\n\n        method method = userhandler.class.getmethod("getuser", long.class);\n\n        mapping.registermapping(info, handler, method);\n    }\n}\n\n\n 1. ä¸ºæ§å¶å¨æ³¨å¥ç®æ å¤çç¨åºåå¤çç¨åºæ å°ã\n\n 2. åå¤è¯·æ±æ å°åæ°æ®ã\n\n 3. è·åå¤çç¨åºæ¹æ³ã\n\n 4. æ·»å æ³¨åã\n\n\n# å¤çæ¹æ³\n\n\n# è¯·æ±æ°æ®\n\n * @requestparam\n\n * @requestbody\n\n * @pathvariable\n\n * @requestheader\n\n> æ´å¤ spring web æ¹æ³åæ°å¯ä»¥åèï¼ method arguments\n\n\n# ååºæ°æ®\n\n * @responsebody\n\n * @responsestatus\n\n * responseentity\n\n * httpentity\n\n> æ´å¤ spring web æ¹æ³è¿åå¼å¯ä»¥åèï¼return values\n\n\n# @modelattribute\n\nå¯ä»¥ä½¿ç¨ @modelattribute æ³¨è§£ï¼\n\n * å¨ @requestmapping æ¹æ³ä¸­çæ¹æ³åæ°ä¸ï¼ç¨äºæ¨¡ååå»ºæè®¿é®å¯¹è±¡ï¼å¹¶éè¿ webdatabinder å°å¶ç»å®å°è¯·æ±ã\n * ä½ä¸º @controller æ @controlleradvice ç±»ä¸­çæ¹æ³çº§æ³¨è§£ï¼æå©äºå¨ä»»ä½ @requestmapping æ¹æ³è°ç¨ä¹ååå§åæ¨¡åã\n * å¨ @requestmapping æ¹æ³ä¸æ è®°å®çè¿åå¼æ¯ä¸ä¸ªæ¨¡åå±æ§ã\n\næ¬èè®¨è®º @modelattribute æ¹æ³ââåé¢åè¡¨ä¸­çç¬¬äºé¡¹ãä¸ä¸ªæ§å¶å¨å¯ä»¥æä»»ææ°éç @modelattribute æ¹æ³ãææè¿äºæ¹æ³é½å¨åä¸æ§å¶å¨ä¸­ç @requestmapping æ¹æ³ä¹åè¢«è°ç¨ã@modelattribute æ¹æ³ä¹å¯ä»¥éè¿ @controlleradvice å¨æ§å¶å¨ä¹é´å±äº«ã\n\n@modelattribute æ¹æ³å·æçµæ´»çæ¹æ³ç­¾åãå®ä»¬æ¯æè®¸å¤ä¸ @requestmapping æ¹æ³ç¸åçåæ°ï¼é¤äº @modelattribute æ¬èº«æä¸è¯·æ±ä¸»ä½ç¸å³çä»»ä½åå®¹ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº @modelattribute æ¹æ³ï¼\n\n@modelattribute\npublic void populatemodel(@requestparam string number, model model) {\n    model.addattribute(accountrepository.findaccount(number));\n    // add more ...\n}\n\n\nä»¥ä¸ç¤ºä¾ä»æ·»å ä¸ä¸ªå±æ§ï¼\n\n@modelattribute\npublic account addaccount(@requestparam string number) {\n    return accountrepository.findaccount(number);\n}\n\n\nè¿å¯ä»¥å° @modelattribute ç¨ä½ @requestmapping æ¹æ³ä¸çæ¹æ³çº§æ³¨è§£ï¼å¨è¿ç§æåµä¸ï¼@requestmapping æ¹æ³çè¿åå¼è¢«è§£éä¸ºæ¨¡åå±æ§ãè¿éå¸¸ä¸æ¯å¿éçï¼å ä¸ºå®æ¯ html æ§å¶å¨ä¸­çé»è®¤è¡ä¸ºï¼é¤éè¿åå¼æ¯ä¸ä¸ª string å¦åå°è¢«è§£éä¸ºè§å¾åç§°ã @modelattribute è¿å¯ä»¥èªå®ä¹æ¨¡åå±æ§åç§°ï¼å¦ä¸ä¾æç¤ºï¼\n\n@getmapping("/accounts/{id}")\n@modelattribute("myaccount")\npublic account handle() {\n    // ...\n    return account;\n}\n\n\n\n# @initbinder\n\n@controller æ @controlleradvice ç±»å¯ä»¥ç¨ @initbinder æ¹æ³æ¥åå§å webdatabinder çå®ä¾ï¼èè¿äºæ¹æ³åå¯ä»¥ï¼\n\n * å°è¯·æ±åæ°ï¼å³è¡¨åææ¥è¯¢æ°æ®ï¼ç»å®å°æ¨¡åå¯¹è±¡ã\n * å°åºäºå­ç¬¦ä¸²çè¯·æ±å¼ï¼ä¾å¦è¯·æ±åæ°ãè·¯å¾åéãæ å¤´ãcookie ç­ï¼è½¬æ¢ä¸ºæ§å¶å¨æ¹æ³åæ°çç®æ ç±»åã\n * å¨æ¸²æ html è¡¨åæ¶å°æ¨¡åå¯¹è±¡å¼æ ¼å¼åä¸º string å¼ã\n\n@initbinder æ¹æ³å¯ä»¥æ³¨åæå®æ§å¶å¨ java.beans.propertyeditor æ spring converter å formatter ç»ä»¶ãæ­¤å¤ï¼æ¨å¯ä»¥ä½¿ç¨ mvc éç½® å¨å¨å±å±äº«ç formattingconversionservice ä¸­æ³¨å converter å formatter ç±»åã\n\n@initbinder æ¹æ³æ¯æè®¸å¤ä¸ @requestmapping æ¹æ³ç¸åçåæ°ï¼é¤äº @modelattributeï¼å½ä»¤å¯¹è±¡ï¼åæ°ãéå¸¸ï¼å®ä»¬ä½¿ç¨ webdatabinder åæ°ï¼ç¨äºæ³¨åï¼å void è¿åå¼å£°æãä¸é¢å±ç¤ºäºä¸ä¸ªç¤ºä¾ï¼\n\n@controller\npublic class formcontroller {\n\n    @initbinder\n    public void initbinder(webdatabinder binder) {\n        simpledateformat dateformat = new simpledateformat("yyyy-mm-dd");\n        dateformat.setlenient(false);\n        binder.registercustomeditor(date.class, new customdateeditor(dateformat, false));\n    }\n\n    // ...\n}\n\n\næèï¼å½æ¨éè¿å±äº«ç formattingconversionservice ä½¿ç¨åºäº formatter çè®¾ç½®æ¶ï¼æ¨å¯ä»¥éå¤ä½¿ç¨ç¸åçæ¹æ³å¹¶æ³¨åæå®æ§å¶å¨ç formatter å®ç°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@controller\npublic class formcontroller {\n\n    @initbinder\n    protected void initbinder(webdatabinder binder) {\n        binder.addcustomformatter(new dateformatter("yyyy-mm-dd"));\n    }\n\n    // ...\n}\n\n\nå¨ web åºç¨ç¨åºçä¸ä¸æä¸­ï¼æ°æ®ç»å®æ¶åå° http è¯·æ±åæ°ï¼å³è¡¨åæ°æ®ææ¥è¯¢åæ°ï¼ç»å®å°æ¨¡åå¯¹è±¡åå¶åµå¥å¯¹è±¡ä¸­çå±æ§ã\n\nä»å¬å¼éµå¾ª javabeans å½åçº¦å® ç public å±æ§ç¨äºæ°æ®ç»å®ââä¾å¦ï¼firstname å±æ§ç get/set æ¹æ³ï¼public string getfirstname() å public void setfirstname(string)ã\n\né»è®¤æåµä¸ï¼spring åè®¸ç»å®å°æ¨¡åå¯¹è±¡å¾ä¸­çææå¬å±å±æ§ãè¿æå³çæ¨éè¦ä»ç»èèæ¨¡åå·æåªäºå¬å±å±æ§ï¼å ä¸ºå®¢æ·ç«¯å¯ä»¥å°ä»»ä½å¬å±å±æ§è·¯å¾ä½ä¸ºç®æ ï¼çè³æ¯ä¸äºé¢è®¡ä¸ä¼éå¯¹ç»å®ç¨ä¾çå¬å±å±æ§è·¯å¾ã\n\nä¾å¦ï¼ç»å®ä¸ä¸ª http è¡¨åæ°æ®ç«¯ç¹ï¼æ¶æå®¢æ·ç«¯å¯ä»¥ä¸ºå­å¨äºæ¨¡åå¯¹è±¡å¾ä¸­ä½ä¸å±äºæµè§å¨ä¸­æ¾ç¤ºç html è¡¨åçå±æ§æä¾å¼ãè¿å¯è½å¯¼è´å¨æ¨¡åå¯¹è±¡åå¶ä»»ä½åµå¥å¯¹è±¡ä¸è®¾ç½®æ°æ®ï¼è¿äºæ°æ®é¢è®¡ä¸ä¼æ´æ°ã\n\nèçæ¹æ³æ¯ä½¿ç¨ä¸ä¸ªä¸ç¨æ¨¡åå¯¹è±¡ï¼å®åªå¬å¼ä¸è¡¨åæäº¤ç¸å³çå±æ§ãä¾å¦ï¼å¨ç¨äºæ´æ¹ç¨æ·çµå­é®ä»¶å°åçè¡¨åä¸ï¼æ¨¡åå¯¹è±¡åºå£°ææå°çä¸ç»å±æ§ï¼ä¾å¦ä»¥ä¸ changeemailformã\n\npublic class changeemailform {\n\n    private string oldemailaddress;\n    private string newemailaddress;\n\n    public void setoldemailaddress(string oldemailaddress) {\n        this.oldemailaddress = oldemailaddress;\n    }\n\n    public string getoldemailaddress() {\n        return this.oldemailaddress;\n    }\n\n    public void setnewemailaddress(string newemailaddress) {\n        this.newemailaddress = newemailaddress;\n    }\n\n    public string getnewemailaddress() {\n        return this.newemailaddress;\n    }\n\n}\n\n\nå¦ææ¨ä¸è½æä¸æ³ä¸ºæ¯ä¸ªæ°æ®ç»å®ç¨ä¾ä½¿ç¨ä¸ç¨æ¨¡åå¯¹è±¡ï¼åå¿é¡»éå¶åè®¸ç¨äºæ°æ®ç»å®çå±æ§ãçæ³æåµä¸ï¼å¯ä»¥éè¿ webdatabinder ä¸ç setallowedfields() æ¹æ³æ³¨ååè®¸çå­æ®µæ¨¡å¼ æ¥å®ç°è¿ä¸ç¹ã\n\nä¾å¦ï¼è¦å¨æ¨çåºç¨ç¨åºä¸­æ³¨ååè®¸çå­æ®µæ¨¡å¼ï¼æ¨å¯ä»¥å¨ @controller æ @controlleradvice ç»ä»¶ä¸­å®ç° @initbinder æ¹æ³ï¼å¦ä¸æç¤ºï¼\n\n@controller\npublic class changeemailcontroller {\n\n    @initbinder\n    void initbinder(webdatabinder binder) {\n        binder.setallowedfields("oldemailaddress", "newemailaddress");\n    }\n\n    // @requestmapping methods, etc.\n\n}\n\n\né¤äºæ³¨ååè®¸çæ¨¡å¼å¤ï¼è¿å¯ä»¥éè¿ databinderåå¶å­ç±»ä¸­ç setdisallowedfields() æ¹æ³æ³¨å åè®¸çå­æ®µæ¨¡å¼ãä½æ¯è¯·æ³¨æï¼âåè®¸åè¡¨âæ¯âæç»åè¡¨âæ´å®å¨ãå æ­¤ï¼setallowedfields() åºè¯¥ä¼äº setdisallowedfields()ã\n\nè¯·æ³¨æï¼å¹éåè®¸çå­æ®µæ¨¡å¼æ¯åºåå¤§å°åçï¼ç¶èï¼ä¸ä¸åè®¸çå­æ®µæ¨¡å¼å¹éæ¯ä¸åºåå¤§å°åçãæ­¤å¤ï¼å¹éä¸åè®¸çæ¨¡å¼çå­æ®µå°ä¸ä¼è¢«æ¥åï¼å³ä½¿å®ä¹æ°å¥½å¹éåè®¸åè¡¨ä¸­çæ¨¡å¼ã\n\n\n# è¡¨åå¤ç\n\n\n# åå»ºå¤çè¡¨åç controller\n\ngreetingcontroller éè¿è¿åè§å¾çåç§°å¤ç /greeting ç get è¯·æ±ï¼è¿æå³çè¿åçåå®¹æ¯åä¸º greeting.html çè§å¾åå®¹ã\n\ngreetingform() æ¹æ³æ¯éè¿ä½¿ç¨ @getmapping ä¸é¨æ å°å° get è¯·æ±çï¼è greetingsubmit() æ¯éè¿ @postmapping æ å°å° post è¯·æ±çã\n\nimport org.springframework.stereotype.controller;\nimport org.springframework.ui.model;\nimport org.springframework.web.bind.annotation.getmapping;\nimport org.springframework.web.bind.annotation.modelattribute;\nimport org.springframework.web.bind.annotation.postmapping;\n\n@controller\npublic class greetingcontroller {\n\n  @getmapping("/greeting")\n  public string greetingform(model model) {\n    model.addattribute("greeting", new greeting());\n    return "greeting";\n  }\n\n  @postmapping("/greeting")\n  public string greetingsubmit(@modelattribute greeting greeting, model model) {\n    model.addattribute("greeting", greeting);\n    return "result";\n  }\n\n}\n\n\n\n# å®ä¹éè¦æäº¤çè¡¨åå®ä½\n\nimport lombok.data;\n\n@data\npublic class greeting {\n\n    private long id;\n\n    private string content;\n\n}\n\n\n\n# æäº¤è¡¨ååç«¯ä»£ç \n\næäº¤å®ä½çé¡µé¢å¿é¡»ä¾èµæç§è§å¾ææ¯ï¼éè¿å°è§å¾åç§°è½¬æ¢ä¸ºæ¨¡æ¿è¿è¡æ¸²æï¼ä»èå¯¹htmlè¿è¡æå¡ç«¯æ¸²æãå¨ä¸é¢çä¾å­ä¸­ï¼ä½¿ç¨äº thymeleaf æ¨¡æ¿å¼æä½ä¸ºè§å¾ï¼å®è§£æ greeting.html çåç§æ¨¡æ¿è¡¨è¾¾å¼ä»¥æ¸²æè¡¨åã\n\n<!doctype html>\n<html xmlns:th="https://www.thymeleaf.org">\n  <head>\n    <title>getting started: handling form submission</title>\n    <meta http-equiv="content-type" content="text/html; charset=utf-8" />\n  </head>\n  <body>\n    <h1>form</h1>\n    <form action="#" th:action="@{/greeting}" th:object="${greeting}" method="post">\n      <p>id: <input type="text" th:field="*{id}" /></p>\n      <p>message: <input type="text" th:field="*{content}" /></p>\n      <p><input type="submit" value="submit" /> <input type="reset" value="reset" /></p>\n    </form>\n  </body>\n</html>\n\n\n\n# æä»¶ä¸ä¼ \n\n\n# åå»ºæä»¶ä¸ä¼ å¤ç controller\n\nimport java.io.ioexception;\nimport java.util.stream.collectors;\n\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.core.io.resource;\nimport org.springframework.http.httpheaders;\nimport org.springframework.http.responseentity;\nimport org.springframework.stereotype.controller;\nimport org.springframework.ui.model;\nimport org.springframework.web.bind.annotation.exceptionhandler;\nimport org.springframework.web.bind.annotation.getmapping;\nimport org.springframework.web.bind.annotation.pathvariable;\nimport org.springframework.web.bind.annotation.postmapping;\nimport org.springframework.web.bind.annotation.requestparam;\nimport org.springframework.web.bind.annotation.responsebody;\nimport org.springframework.web.multipart.multipartfile;\nimport org.springframework.web.servlet.mvc.method.annotation.mvcuricomponentsbuilder;\nimport org.springframework.web.servlet.mvc.support.redirectattributes;\n\nimport com.example.uploadingfiles.storage.storagefilenotfoundexception;\nimport com.example.uploadingfiles.storage.storageservice;\n\n@controller\npublic class fileuploadcontroller {\n\n\tprivate final storageservice storageservice;\n\n\t@autowired\n\tpublic fileuploadcontroller(storageservice storageservice) {\n\t\tthis.storageservice = storageservice;\n\t}\n\n\t@getmapping("/")\n\tpublic string listuploadedfiles(model model) throws ioexception {\n\n\t\tmodel.addattribute("files", storageservice.loadall().map(\n\t\t\t\tpath -> mvcuricomponentsbuilder.frommethodname(fileuploadcontroller.class,\n\t\t\t\t\t\t"servefile", path.getfilename().tostring()).build().touri().tostring())\n\t\t\t\t.collect(collectors.tolist()));\n\n\t\treturn "uploadform";\n\t}\n\n\t@getmapping("/files/{filename:.+}")\n\t@responsebody\n\tpublic responseentity<resource> servefile(@pathvariable string filename) {\n\n\t\tresource file = storageservice.loadasresource(filename);\n\t\treturn responseentity.ok().header(httpheaders.content_disposition,\n\t\t\t\t"attachment; filename=\\"" + file.getfilename() + "\\"").body(file);\n\t}\n\n\t@postmapping("/")\n\tpublic string handlefileupload(@requestparam("file") multipartfile file,\n\t\t\tredirectattributes redirectattributes) {\n\n\t\tstorageservice.store(file);\n\t\tredirectattributes.addflashattribute("message",\n\t\t\t\t"you successfully uploaded " + file.getoriginalfilename() + "!");\n\n\t\treturn "redirect:/";\n\t}\n\n\t@exceptionhandler(storagefilenotfoundexception.class)\n\tpublic responseentity<?> handlestoragefilenotfound(storagefilenotfoundexception exc) {\n\t\treturn responseentity.notfound().build();\n\t}\n\n}\n\n\nfileuploadcontroller ç±»ä½¿ç¨ @controller æ³¨è§£ï¼ä»¥ä¾¿ spring å¯ä»¥æ«æå¹¶æ³¨åå®ã æ¯ä¸ªæ¹æ³é½æ æ @getmapping æ @postmapping ï¼å°è·¯å¾å http æä½æ å°å°æå®çæ§å¶å¨ã\n\nå¨è¿ç§æåµä¸ï¼\n\n * get /ï¼ä» storageservice ä¸­æ¥æ¾å½åä¸ä¼ æä»¶çåè¡¨ï¼å¹¶å°å¶å è½½å° thymeleaf æ¨¡æ¿ä¸­ã å®ä½¿ç¨ mvcuricomponentsbuilder è®¡ç®æåå®éèµæºçé¾æ¥ã\n\n * get /files/{filename}ï¼å è½½èµæºï¼å¦æå­å¨ï¼å¹¶ä½¿ç¨ content-disposition ååºæ å¤´å°å¶åéå°æµè§å¨è¿è¡ä¸è½½ã\n\n * post /ï¼å¤çä¸ä¸ªå¤é¨åçæ¶æ¯æä»¶ï¼å¹¶å°å¶äº¤ç» storageservice è¿è¡ä¿å­ã\n\n\n# å®ä¹å­å¨æä»¶ç service\n\nimport org.springframework.core.io.resource;\nimport org.springframework.web.multipart.multipartfile;\n\nimport java.nio.file.path;\nimport java.util.stream.stream;\n\npublic interface storageservice {\n\n\tvoid init();\n\n\tvoid store(multipartfile file);\n\n\tstream<path> loadall();\n\n\tpath load(string filename);\n\n\tresource loadasresource(string filename);\n\n\tvoid deleteall();\n\n}\n\n\nä¸ä¸ªå åç storageservice å®ç°ï¼\n\n\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.core.io.resource;\nimport org.springframework.core.io.urlresource;\nimport org.springframework.stereotype.service;\nimport org.springframework.util.filesystemutils;\nimport org.springframework.util.stringutils;\nimport org.springframework.web.multipart.multipartfile;\n\nimport java.io.ioexception;\nimport java.io.inputstream;\nimport java.net.malformedurlexception;\nimport java.nio.file.files;\nimport java.nio.file.path;\nimport java.nio.file.paths;\nimport java.nio.file.standardcopyoption;\nimport java.util.stream.stream;\n\n@service\npublic class filesystemstorageserviceimpl implements storageservice {\n\n    private final path rootlocation;\n\n    @autowired\n    public filesystemstorageserviceimpl(storageproperties properties) {\n        this.rootlocation = paths.get(properties.getlocation());\n    }\n\n    @override\n    public void deleteall() {\n        filesystemutils.deleterecursively(rootlocation.tofile());\n    }\n\n    @override\n    public void init() {\n        try {\n            files.createdirectories(rootlocation);\n        } catch (ioexception e) {\n            throw new storageexception("could not initialize storage", e);\n        }\n    }\n\n    @override\n    public path load(string filename) {\n        return rootlocation.resolve(filename);\n    }\n\n    @override\n    public stream<path> loadall() {\n        try {\n            return files.walk(this.rootlocation, 1).filter(path -> !path.equals(this.rootlocation))\n                .map(this.rootlocation::relativize);\n        } catch (ioexception e) {\n            throw new storageexception("failed to read stored files", e);\n        }\n    }\n\n    @override\n    public resource loadasresource(string filename) {\n        try {\n            path file = load(filename);\n            resource resource = new urlresource(file.touri());\n            if (resource.exists() || resource.isreadable()) {\n                return resource;\n            } else {\n                throw new storagefilenotfoundexception("could not read file: " + filename);\n            }\n        } catch (malformedurlexception e) {\n            throw new storagefilenotfoundexception("could not read file: " + filename, e);\n        }\n    }\n\n    @override\n    public void store(multipartfile file) {\n        string filename = stringutils.cleanpath(file.getoriginalfilename());\n        try {\n            if (file.isempty()) {\n                throw new storageexception("failed to store empty file " + filename);\n            }\n            if (filename.contains("..")) {\n                // this is a security check\n                throw new storageexception(\n                    "cannot store file with relative path outside current directory " + filename);\n            }\n            try (inputstream inputstream = file.getinputstream()) {\n                files.copy(inputstream, this.rootlocation.resolve(filename), standardcopyoption.replace_existing);\n            }\n        } catch (ioexception e) {\n            throw new storageexception("failed to store file " + filename, e);\n        }\n    }\n\n}\n\n\n\n# åå»ºæä»¶ä¸ä¼ è¡¨å\n\n<html xmlns:th="https://www.thymeleaf.org">\n<body>\n\n\t<div th:if="${message}">\n\t\t<h2 th:text="${message}"/>\n\t</div>\n\n\t<div>\n\t\t<form method="post" enctype="multipart/form-data" action="/">\n\t\t\t<table>\n\t\t\t\t<tr><td>file to upload:</td><td><input type="file" name="file" /></td></tr>\n\t\t\t\t<tr><td></td><td><input type="submit" value="upload" /></td></tr>\n\t\t\t</table>\n\t\t</form>\n\t</div>\n\n\t<div>\n\t\t<ul>\n\t\t\t<li th:each="file : ${files}">\n\t\t\t\t<a th:href="${file}" th:text="${file}" />\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\n</body>\n</html>\n\n\n\n# æä»¶ä¸ä¼ éå¶\n\nå¦æä½¿ç¨ spring bootï¼å¯ä»¥ä½¿ç¨ä¸äºå±æ§è®¾ç½®æ¥è°æ´å¶èªå¨éç½®ç multipartconfigelementã\n\nå°ä»¥ä¸å±æ§æ·»å å°ç°æå±æ§è®¾ç½®ä¸­ï¼å¨ src/main/resources/application.properties ä¸­ï¼ï¼\n\nspring.servlet.multipart.max-file-size=128kb\nspring.servlet.multipart.max-request-size=128kb\n\n\n * spring.servlet.multipart.max-file-size è®¾ç½®ä¸º 128kbï¼è¡¨ç¤ºæ»æä»¶å¤§å°ä¸è½è¶è¿ 128kbã\n * spring.servlet.multipart.max-request-size è®¾ç½®ä¸º 128kbï¼è¿æå³ç multipart/form-data çæ»è¯·æ±å¤§å°ä¸è½è¶è¿ 128kbã\n\n\n# å¼å¸¸å¤ç\n\n\n# @exceptionhandler\n\n@controller å @controlleradvice ç±»å¯ä»¥ç¨ @exceptionhandler æ¹æ³æ¥å¤çæ¥èªæ§å¶å¨æ¹æ³çå¼å¸¸ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@controller\npublic class simplecontroller {\n\n    // ...\n\n    @exceptionhandler\n    public responseentity<string> handle(ioexception ex) {\n        // ...\n    }\n}\n\n\nå¼å¸¸å¯è½ä¸æ­£å¨ä¼ æ­çé¡¶çº§å¼å¸¸ï¼ä¾å¦ï¼æåºç´æ¥ç ioexceptionï¼æåè£å¨å¼å¸¸ä¸­çåµå¥åå ï¼ä¾å¦ï¼åè£å¨ illegalstateexception ä¸­ç ioexceptionï¼ç¸å¹éãä» 5.3 å¼å§ï¼è¿å¯ä»¥å¹éä»»æåå çº§å«ï¼èä»¥ååªèèç´æ¥åå ã\n\nå¯¹äºå¹éçå¼å¸¸ç±»åï¼æå¥½å°ç®æ å¼å¸¸å£°æä¸ºæ¹æ³åæ°ï¼å¦åé¢çç¤ºä¾æç¤ºãå½å¤ä¸ªå¼å¸¸æ¹æ³å¹éæ¶ï¼æ ¹å¼å¸¸å¹ééå¸¸ä¼åäºåå å¼å¸¸å¹éãæ´å·ä½å°è¯´ï¼exceptiondepthcomparator ç¨äºæ ¹æ®æåºçå¼å¸¸ç±»åçæ·±åº¦å¯¹å¼å¸¸è¿è¡æåºã\n\næèï¼æ³¨è§£å£°æå¯ä»¥ç¼©å°è¦å¹éçå¼å¸¸ç±»åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@exceptionhandler({filesystemexception.class, remoteexception.class})\npublic responseentity<string> handle(ioexception ex) {\n    // ...\n}\n\n\næ¨çè³å¯ä»¥ä½¿ç¨å·æéå¸¸éç¨çåæ°ç­¾åçç¹å®å¼å¸¸ç±»ååè¡¨ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@exceptionhandler({filesystemexception.class, remoteexception.class})\npublic responseentity<string> handle(exception ex) {\n    // ...\n}\n\n\néå¸¸å»ºè®®æ¨å¨åæ°ç­¾åä¸­å°½å¯è½å·ä½ï¼ä»¥åå°æ ¹æ¬ååå å¼å¸¸ç±»åä¹é´ä¸å¹éçå¯è½æ§ãèèå°ä¸ä¸ªå¤éå¹éæ¹æ³åè§£ä¸ºåç¬ç @exceptionhandler æ¹æ³ï¼æ¯ä¸ªæ¹æ³éè¿å¶ç­¾åå¹éä¸ä¸ªç¹å®çå¼å¸¸ç±»åã\n\nå¨å¤ @controlleradvice å®æä¸­ï¼å»ºè®®å¨å·æç¸åºé¡ºåºä¼åçº§ç @controlleradvice ä¸å£°ææ¨çä¸»è¦æ ¹å¼å¸¸æ å°ãè½ç¶æ ¹å¼å¸¸å¹éä¼äºåå ï¼ä½è¿æ¯å¨ç»å®æ§å¶å¨æ @controlleradvice ç±»çæ¹æ³ä¸­å®ä¹çãè¿æå³çä¼åçº§è¾é«ç @controlleradvice ä¸çåå å¹éä¼äºä¼åçº§è¾ä½ç @controlleradvice ä¸çä»»ä½å¹éï¼ä¾å¦ï¼rootï¼ã\n\næåä½åæ ·éè¦çæ¯ï¼ @exceptionhandler æ¹æ³å®ç°å¯ä»¥éæ©éè¿ä»¥åå§å½¢å¼éæ°æåºç»å®å¼å¸¸å®ä¾æ¥éåºå¤çãè¿å¨æ¨åªå¯¹æ ¹çº§å¹éææ æ³éæç¡®å®çç¹å®ä¸ä¸æä¸­çå¹éæå´è¶£çæåµä¸å¾æç¨ãéæ°æåºçå¼å¸¸éè¿å©ä½çè§£æé¾ä¼ æ­ï¼å°±å¥½åç»å®ç @exceptionhandler æ¹æ³ä¸å¼å§å°±ä¸ä¼å¹éä¸æ ·ã\n\nspring mvc ä¸­å¯¹ @exceptionhandler æ¹æ³çæ¯æå»ºç«å¨ dispatcherservlet çº§å« handlerexceptionresolver æºå¶ä¸ã\n\n> éå½ï¼\n> \n> @exceptionhandler æ¯æçåæ°\n> \n> @exceptionhandler æ¯æè¿åå¼\n\n\n# åèèµæ\n\n * spring framework å®æ¹ææ¡£\n * spring framework å®æ¹ææ¡£ä¹ web',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring MVC ä¹ DispatcherServlet",frontmatter:{title:"Spring MVC ä¹ DispatcherServlet",date:"2023-02-13T09:57:52.000Z",categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","Web","DispatcherServlet"],permalink:"/pages/20287b/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/03.DispatcherServlet.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/03.DispatcherServlet.md",key:"v-06bc9c3d",path:"/pages/20287b/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:37},{level:3,title:"DispatcherServlet å·¥ä½åç",slug:"dispatcherservlet-å·¥ä½åç",normalizedTitle:"dispatcherservlet å·¥ä½åç",charIndex:122},{level:4,title:"DispatcherServlet å·¥ä½æµç¨",slug:"dispatcherservlet-å·¥ä½æµç¨",normalizedTitle:"dispatcherservlet å·¥ä½æµç¨",charIndex:148},{level:4,title:"DispatcherServlet æºç è§£è¯»",slug:"dispatcherservlet-æºç è§£è¯»",normalizedTitle:"dispatcherservlet æºç è§£è¯»",charIndex:1746},{level:4,title:"ä¸ä¸æå±æ¬¡ç»æ",slug:"ä¸ä¸æå±æ¬¡ç»æ",normalizedTitle:"ä¸ä¸æå±æ¬¡ç»æ",charIndex:7585},{level:2,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:361},{level:2,title:"è·¯å¾å¹é",slug:"è·¯å¾å¹é",normalizedTitle:"è·¯å¾å¹é",charIndex:15347},{level:2,title:"æ¦æªå¨",slug:"æ¦æªå¨",normalizedTitle:"æ¦æªå¨",charIndex:654},{level:2,title:"è§£æå¨",slug:"è§£æå¨",normalizedTitle:"è§£æå¨",charIndex:17433},{level:3,title:"HandlerExceptionResolver",slug:"handlerexceptionresolver",normalizedTitle:"handlerexceptionresolver",charIndex:2242},{level:4,title:"è§£æå¨é¾",slug:"è§£æå¨é¾",normalizedTitle:"è§£æå¨é¾",charIndex:18596},{level:4,title:"éè¯¯é¡µé¢",slug:"éè¯¯é¡µé¢",normalizedTitle:"éè¯¯é¡µé¢",charIndex:18284},{level:3,title:"ViewResolver",slug:"viewresolver",normalizedTitle:"viewresolver",charIndex:1619},{level:4,title:"å¤ç",slug:"å¤ç",normalizedTitle:"å¤ç",charIndex:105},{level:4,title:"éå®å",slug:"éå®å",normalizedTitle:"éå®å",charIndex:21549},{level:4,title:"è½¬å",slug:"è½¬å",normalizedTitle:"è½¬å",charIndex:10836},{level:4,title:"åå®¹åå",slug:"åå®¹åå",normalizedTitle:"åå®¹åå",charIndex:22111},{level:3,title:"LocaleResolver",slug:"localeresolver",normalizedTitle:"localeresolver",charIndex:455},{level:4,title:"LocaleResolver",slug:"localeresolver-2",normalizedTitle:"localeresolver",charIndex:455},{level:4,title:"æ å¤´è§£æå¨",slug:"æ å¤´è§£æå¨",normalizedTitle:"æ å¤´è§£æå¨",charIndex:23361},{level:4,title:"CookieLocaleResolver",slug:"cookielocaleresolver",normalizedTitle:"cookielocaleresolver",charIndex:23462},{level:4,title:"SessionLocaleResolver",slug:"sessionlocaleresolver",normalizedTitle:"sessionlocaleresolver",charIndex:24666},{level:4,title:"LocaleChangeInterceptor",slug:"localechangeinterceptor",normalizedTitle:"localechangeinterceptor",charIndex:24978},{level:3,title:"ThemeResolver",slug:"themeresolver",normalizedTitle:"themeresolver",charIndex:470},{level:3,title:"MultipartResolver",slug:"multipartresolver",normalizedTitle:"multipartresolver",charIndex:2083},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:28820}],headersStr:"ç®ä» DispatcherServlet å·¥ä½åç DispatcherServlet å·¥ä½æµç¨ DispatcherServlet æºç è§£è¯» ä¸ä¸æå±æ¬¡ç»æ éç½® è·¯å¾å¹é æ¦æªå¨ è§£æå¨ HandlerExceptionResolver è§£æå¨é¾ éè¯¯é¡µé¢ ViewResolver å¤ç éå®å è½¬å åå®¹åå LocaleResolver LocaleResolver æ å¤´è§£æå¨ CookieLocaleResolver SessionLocaleResolver LocaleChangeInterceptor ThemeResolver MultipartResolver åèèµæ",content:'# Spring MVC ä¹ DispatcherServlet\n\n\n# ç®ä»\n\nDispatcherServlet æ¯ Spring MVC æ¡æ¶çæ ¸å¿ç»ä»¶ï¼è´è´£å°å®¢æ·ç«¯è¯·æ±æ å°å°ç¸åºçæ§å¶å¨ï¼ç¶åè°ç¨æ§å¶å¨å¤çè¯·æ±å¹¶è¿åååºç»æã\n\n\n# DispatcherServlet å·¥ä½åç\n\n# DispatcherServlet å·¥ä½æµç¨\n\nDispatcherServlet çå·¥ä½æµç¨å¤§è´å¦ä¸å¾æç¤ºï¼\n\n\n\n 1. æ¥æ¶ Http è¯·æ±ï¼å½å®¢æ·ç«¯åé HTTP è¯·æ±æ¶ï¼DispatcherServlet æ¥æ¶è¯¥è¯·æ±å¹¶å°å¶ä¼ éç» Spring MVC æ¡æ¶ã\n 2. éæ© Handlerï¼DispatcherServlet ä¼æ ¹æ®è¯·æ±ç URL æ¾å°å¯¹åºçå¤çå¨æ å°å¨ HandlerMappingï¼è¯¥æ å°å¨ä¼æ ¹æ®éç½®æä»¶ä¸­ç URL æ å°è§åæ¾å°åéçå¤çå¨ Handlerã\n    * ç»å®å±æ§ï¼DispatcherServlet ä¼æ ¹æ®ç¨åºç web åå§åç­ç¥å³èåç§ Resolverï¼å¦ï¼LocaleResolverãThemeResolver ç­ã\n    * DispatcherServlet æ ¹æ® <servlet-name>-servlet.xml ä¸­çéç½®å¯¹è¯·æ±ç URL è¿è¡è§£æï¼å¾å°è¯·æ±èµæºæ è¯ç¬¦ï¼URIï¼ãç¶åæ ¹æ®è¯¥ URIï¼è°ç¨ HandlerMapping è·å¾è¯¥ Handler éç½®çææç¸å³çå¯¹è±¡ï¼åæ¬ Handler å¯¹è±¡ä»¥å Handler å¯¹è±¡å¯¹åºçæ¦æªå¨ï¼ï¼æåä»¥HandlerExecutionChain å¯¹è±¡çå½¢å¼è¿åã\n      * å°è¯·æ±æ å°å°å¤çç¨åºä»¥åç¨äºé¢å¤çååå¤ççæ¦æªå¨åè¡¨ãæ å°åºäºä¸äºæ åï¼å¶ç»èå  HandlerMapping å®ç°èå¼ã\n      * ä¸¤ä¸ªä¸»è¦ç HandlerMapping å®ç°æ¯ RequestMappingHandlerMappingï¼æ¯æ @RequestMapping æ³¨éæ¹æ³ï¼å SimpleUrlHandlerMappingï¼ç»´æ¤ URI è·¯å¾æ¨¡å¼å°å¤çç¨åºçæ¾å¼æ³¨åï¼ã\n 3. éæ© HandlerAdapterï¼ DispatcherServlet æ ¹æ®è·å¾ç Handlerï¼éæ©ä¸ä¸ªåéç HandlerAdapterã\n    * HandlerAdapter å¸®å© DispatcherServlet è°ç¨æ å°å°è¯·æ±ç Handlerï¼èä¸ç®¡å®éè°ç¨ Handler çæ¹å¼å¦ä½ãä¾å¦ï¼è°ç¨å¸¦æ³¨è§£çæ§å¶å¨éè¦è§£ææ³¨è§£ãHandlerAdapter çä¸»è¦ç®çæ¯ä¿æ¤ DispatcherServlet ååæ­¤ç±»ç»èçå½±åã\n 4. Handler å¤çè¯·æ±ï¼DispatcherServlet æå Request ä¸­çæ¨¡åæ°æ®ï¼å¡«å Handler å¥åï¼ç± HandlerAdapter è´è´£è°ç¨ Handlerï¼Controller)ã å¨å¡«å Handler çå¥åè¿ç¨ä¸­ï¼æ ¹æ®ä½ çéç½®ï¼Spring å°å¸®ä½ åä¸äºé¢å¤çå·¥ä½ï¼\n    * HttpMessageConverterï¼ å°è¯·æ±æ¶æ¯ï¼å¦ Jsonãxml ç­æ°æ®ï¼è½¬æ¢æä¸ä¸ªå¯¹è±¡ï¼å°å¯¹è±¡è½¬æ¢ä¸ºæå®çååºä¿¡æ¯ã\n    * æ°æ®è½¬æ¢ï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®è½¬æ¢ãå¦ String è½¬æ¢æ IntegerãDoubleç­ã\n    * æ°æ®æ ¼å¼åï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®æ ¼å¼åã å¦å°å­ç¬¦ä¸²è½¬æ¢ææ ¼å¼åæ°å­ææ ¼å¼åæ¥æç­ã\n    * æ°æ®éªè¯ï¼ éªè¯æ°æ®çæææ§ï¼é¿åº¦ãæ ¼å¼ç­ï¼ï¼éªè¯ç»æå­å¨å° BindingResult æ Error ä¸­ã\n 5. è¿å ModelAndView å¯¹è±¡ï¼Handler å¤çå®è¯·æ±åï¼ä¼è¿åä¸ä¸ª ModelAndView å¯¹è±¡ï¼å¶ä¸­åå«äºå¤çç»æï¼Modelï¼åè§å¾ï¼Viewï¼ä¿¡æ¯ã\n 6. éæ© ViewResolver æ¸²æ ModelAndViewï¼æ ¹æ®è¿åç ModelAndViewï¼éæ©ä¸ä¸ªéåç ViewResolverï¼å¹¶å° ModelAndView ä¼ éç» ViewResolver è¿è¡æ¸²æï¼æåå°æ¸²æåçç»æè¿åç»å®¢æ·ç«¯ã\n\n# DispatcherServlet æºç è§£è¯»\n\nåé¢ä»ç»äº DispatcherServlet çå·¥ä½æµç¨ï¼ä¸é¢éè¿æ ¸å¿æºç è§£è¯»ï¼æ¥å æ·±å¯¹ DispatcherServlet å·¥ä½åçççè§£\n\nï¼1ï¼onRefresh æ¹æ³\n\n\t@Override\n\tprotected void onRefresh(ApplicationContext context) {\n\t\tinitStrategies(context);\n\t}\n\n\t/**\n\t * åå§åæ­¤ servlet ä½¿ç¨çç­ç¥å¯¹è±¡\n\t * å¯ä»¥å¨å­ç±»ä¸­éåä»¥åå§åæ´å¤ç­ç¥å¯¹è±¡\n\t */\n\tprotected void initStrategies(ApplicationContext context) {\n\t\tinitMultipartResolver(context);\n\t\tinitLocaleResolver(context);\n\t\tinitThemeResolver(context);\n\t\tinitHandlerMappings(context);\n\t\tinitHandlerAdapters(context);\n\t\tinitHandlerExceptionResolvers(context);\n\t\tinitRequestToViewNameTranslator(context);\n\t\tinitViewResolvers(context);\n\t\tinitFlashMapManager(context);\n\t}\n\n\nï¼2ï¼doService æ¹æ³\n\nDispatcherServlet çæ ¸å¿æ¹æ³ doService æºç å¦ä¸ï¼\n\n\t@Override\n\tprotected void doService(HttpServletRequest request, HttpServletResponse response) throws Exception {\n\t\tlogRequest(request);\n\n\t\t// å¨åå«çæåµä¸ä¿çè¯·æ±å±æ§çå¿«ç§ï¼ä»¥ä¾¿è½å¤å¨åå«åæ¢å¤åå§å±æ§\n\t\tMap<String, Object> attributesSnapshot = null;\n\t\tif (WebUtils.isIncludeRequest(request)) {\n\t\t\tattributesSnapshot = new HashMap<>();\n\t\t\tEnumeration<?> attrNames = request.getAttributeNames();\n\t\t\twhile (attrNames.hasMoreElements()) {\n\t\t\t\tString attrName = (String) attrNames.nextElement();\n\t\t\t\tif (this.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) {\n\t\t\t\t\tattributesSnapshot.put(attrName, request.getAttribute(attrName));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// è®¾ç½®è¯·æ±å±æ§ï¼ç»å®åç§ Resolverï¼ï¼ä½¿æ¡æ¶å¯¹è±¡å¯ç¨äºå¤çç¨åºåè§å¾å¯¹è±¡\n\t\trequest.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext());\n\t\trequest.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, this.localeResolver);\n\t\trequest.setAttribute(THEME_RESOLVER_ATTRIBUTE, this.themeResolver);\n\t\trequest.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());\n\n\t\tif (this.flashMapManager != null) {\n\t\t\tFlashMap inputFlashMap = this.flashMapManager.retrieveAndUpdate(request, response);\n\t\t\tif (inputFlashMap != null) {\n\t\t\t\trequest.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));\n\t\t\t}\n\t\t\trequest.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, new FlashMap());\n\t\t\trequest.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, this.flashMapManager);\n\t\t}\n\n\t\tRequestPath previousRequestPath = null;\n\t\tif (this.parseRequestPath) {\n\t\t\tpreviousRequestPath = (RequestPath) request.getAttribute(ServletRequestPathUtils.PATH_ATTRIBUTE);\n\t\t\tServletRequestPathUtils.parseAndCache(request);\n\t\t}\n\n\t\ttry {\n            // è¯·æ±åå\n\t\t\tdoDispatch(request, response);\n\t\t}\n\t\tfinally {\n\t\t\tif (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {\n\t\t\t\t// æ¢å¤åå§å±æ§å¿«ç§ï¼ä»¥é²åå«\n\t\t\t\tif (attributesSnapshot != null) {\n\t\t\t\t\trestoreAttributesAfterInclude(request, attributesSnapshot);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.parseRequestPath) {\n\t\t\t\tServletRequestPathUtils.setParsedRequestPath(previousRequestPath, request);\n\t\t\t}\n\t\t}\n\t}\n\n\nï¼3ï¼doDispatch æ¹æ³\n\ndoService ä¸­çæ ¸å¿æ¹æ³æ¯ doDispatchï¼è´è´£ååè¯·æ±ã\n\nprotected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {\n   HttpServletRequest processedRequest = request;\n   HandlerExecutionChain mappedHandler = null;\n   boolean multipartRequestParsed = false;\n\n   WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);\n\n   try {\n      ModelAndView mv = null;\n      Exception dispatchException = null;\n\n      try {\n         // æ£æ¥æ¯å¦ä¸ºmultipartè¯·æ±ï¼å¦ææ¯ï¼åè§£æåæ°\n         processedRequest = checkMultipart(request);\n         multipartRequestParsed = (processedRequest != request);\n\n         // ç¡®å®ééå½åè¯·æ±ç Handler\n         mappedHandler = getHandler(processedRequest);\n         if (mappedHandler == null) {\n            noHandlerFound(processedRequest, response);\n            return;\n         }\n\n         // ç¡®å®ééå½åè¯·æ±ç HandlerAdapter\n         HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());\n\n         // å¦æ Handler æ¯æï¼åå¤ç last-modified å¤´\n         String method = request.getMethod();\n         boolean isGet = HttpMethod.GET.matches(method);\n         if (isGet || HttpMethod.HEAD.matches(method)) {\n            long lastModified = ha.getLastModified(request, mappedHandler.getHandler());\n            if (new ServletWebRequest(request, response).checkNotModified(lastModified) && isGet) {\n               return;\n            }\n         }\n\n         // è¯·æ±çåç½®å¤ç\n         if (!mappedHandler.applyPreHandle(processedRequest, response)) {\n            return;\n         }\n\n         // è°ç¨å®éç Handler å¤çè¯·æ±å¹¶è¿å ModelAndViewï¼æå¯è½ä¸º nullï¼\n         mv = ha.handle(processedRequest, response, mappedHandler.getHandler());\n\n         if (asyncManager.isConcurrentHandlingStarted()) {\n            return;\n         }\n\n         applyDefaultViewName(processedRequest, mv);\n         // è¯·æ±çåç½®å¤ç\n         mappedHandler.applyPostHandle(processedRequest, response, mv);\n      }\n      catch (Exception ex) {\n         dispatchException = ex;\n      }\n      catch (Throwable err) {\n         // As of 4.3, we\'re processing Errors thrown from handler methods as well,\n         // making them available for @ExceptionHandler methods and other scenarios.\n         dispatchException = new NestedServletException("Handler dispatch failed", err);\n      }\n       // å¤çååºç»æ\n      processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);\n   }\n   catch (Exception ex) {\n      triggerAfterCompletion(processedRequest, response, mappedHandler, ex);\n   }\n   catch (Throwable err) {\n      triggerAfterCompletion(processedRequest, response, mappedHandler,\n            new NestedServletException("Handler processing failed", err));\n   }\n   finally {\n      if (asyncManager.isConcurrentHandlingStarted()) {\n         // æ¿ä»£ postHandle å afterCompletion\n         if (mappedHandler != null) {\n            mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);\n         }\n      }\n      else {\n         // æ¸ç multipart è¯·æ±æä½¿ç¨çèµæº\n         if (multipartRequestParsed) {\n            cleanupMultipart(processedRequest);\n         }\n      }\n   }\n}\n\n\n# ä¸ä¸æå±æ¬¡ç»æ\n\nDispatcherServlet éè¦ä¸ä¸ª WebApplicationContextï¼ApplicationContext çæ©å±ç±»ï¼ç¨äºå®èªå·±çéç½®ãWebApplicationContext æä¸ä¸ªæå ServletContext åä¸ä¹å³èç Servlet çé¾æ¥ãå®è¿ç»å®å° ServletContextï¼ä»¥ä¾¿åºç¨ç¨åºå¯ä»¥å¨ RequestContextUtils ä¸ä½¿ç¨éææ¹æ³æ¥æ¥æ¾ WebApplicationContextã\n\nå¯¹äºå¤æ°åºç¨ç¨åºæ¥è¯´ï¼æ¥æä¸ä¸ª WebApplicationContext åä¾å°±è¶³å¤ãä¹å¯ä»¥æä¸ä¸ªä¸ä¸æå±æ¬¡ç»æï¼å¶ä¸­æä¸ä¸ªæ ¹ WebApplicationContext å¨å¤ä¸ª DispatcherServletï¼æå¶ä» Servletï¼å®ä¾ä¹é´å±äº«ï¼æ¯ä¸ªå®ä¾é½æèªå·±çå­ WebApplicationContext éç½®ã\n\næ ¹ WebApplicationContext éå¸¸åå«åºç¡ç»æ beanï¼ä¾å¦éè¦è·¨å¤ä¸ª Servlet å®ä¾å±äº«çæ°æ®å­å¨åä¸å¡æå¡ãè¿äº bean æ¯ææç»§æ¿çï¼å¹¶ä¸å¯ä»¥å¨ç¹å® Servlet çå­ WebApplicationContext ä¸­è¢«è¦çï¼å³éæ°å£°æï¼ï¼å®éå¸¸åå«æå® Servlet çæ¬å° beanãä¸å¾æ¾ç¤ºäºè¿ç§å³ç³»ï¼\n\n\n\nãç¤ºä¾ãéç½® WebApplicationContext å±æ¬¡ç»æï¼\n\npublic class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n    @Override\n    protected Class<?>[] getRootConfigClasses() {\n        return new Class<?>[] { RootConfig.class };\n    }\n\n    @Override\n    protected Class<?>[] getServletConfigClasses() {\n        return new Class<?>[] { App1Config.class };\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[] { "/app1/*" };\n    }\n}\n\n\nãç¤ºä¾ãweb.xml æ¹å¼éç½® WebApplicationContext å±æ¬¡ç»æï¼\n\n<web-app>\n\n    <listener>\n        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n    </listener>\n\n    <context-param>\n        <param-name>contextConfigLocation</param-name>\n        <param-value>/WEB-INF/root-context.xml</param-value>\n    </context-param>\n\n    <servlet>\n        <servlet-name>app1</servlet-name>\n        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n        <init-param>\n            <param-name>contextConfigLocation</param-name>\n            <param-value>/WEB-INF/app1-context.xml</param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n\n    <servlet-mapping>\n        <servlet-name>app1</servlet-name>\n        <url-pattern>/app1/*</url-pattern>\n    </servlet-mapping>\n\n</web-app>\n\n\n\n# éç½®\n\nDispatcherServlet ä¸å¶ä» Servlet ä¸æ ·ï¼éè¦ä½¿ç¨ Java éç½®æå¨ web.xml ä¸­æ ¹æ® Servlet è§èè¿è¡å£°æåæ å°ãä¹å°±æ¯è¯´ï¼DispatcherServlet ä½¿ç¨ Spring éç½®æ¥åç°è¯·æ±æ å°ãè§å¾è§£æãå¼å¸¸å¤çç­æéçå§æç»ä»¶ã\n\nå¯ä»¥éè¿å° Servlet åå§ååæ°ï¼init-param åç´ ï¼æ·»å å° web.xml æä»¶ä¸­ç Servlet å£°ææ¥èªå®ä¹åä¸ª DispatcherServlet å®ä¾ãä¸è¡¨ååºäºæ¯æçåæ°ï¼\n\nåæ°                               è¯´æ\ncontextClass                     å®ç° ConfigurableWebApplicationContext çç±»ï¼å°ç±æ­¤ Servlet\n                                 å®ä¾ååæ¬å°éç½®ãé»è®¤æåµä¸ï¼ä½¿ç¨ XmlWebApplicationContextã\ncontextConfigLocation            ä¼ éç»ä¸ä¸æå®ä¾ï¼ç± contextClass\n                                 æå®ï¼ä»¥æç¤ºå¯ä»¥å¨ä½å¤æ¾å°ä¸ä¸æçå­ç¬¦ä¸²ãè¯¥å­ç¬¦ä¸²å¯è½åå«å¤ä¸ªå­ç¬¦ä¸²ï¼ä½¿ç¨éå·ä½ä¸ºåéç¬¦ï¼ä»¥æ¯æå¤ä¸ªä¸ä¸æãå¨å·æä¸¤æ¬¡å®ä¹ç\n                                 bean çå¤ä¸ªä¸ä¸æä½ç½®çæåµä¸ï¼ææ°çä½ç½®ä¼åã\nnamespace                        WebApplicationContext çå½åç©ºé´ãé»è®¤ä¸º [servlet-name]-servletã\nthrowExceptionIfNoHandlerFound   å½æ¾ä¸å°è¯·æ±çå¤çç¨åºæ¶æ¯å¦æåº NoHandlerFoundExceptionãç¶åå¯ä»¥ä½¿ç¨\n                                 HandlerExceptionResolverï¼ä¾å¦ï¼éè¿ä½¿ç¨ @ExceptionHandler\n                                 æ§å¶å¨æ¹æ³ï¼æè·å¼å¸¸å¹¶åå¶ä»ä»»ä½æ¹æ³ä¸æ ·å¤çãé»è®¤æåµä¸ï¼å®è®¾ç½®ä¸º\n                                 falseï¼å¨è¿ç§æåµä¸ï¼DispatcherServlet è®¾ç½®ååºç¶æä¸º 404 (NOT_FOUND)\n                                 èä¸ä¼å¼åå¼å¸¸ãè¯·æ³¨æï¼å¦æ [é»è®¤ servlet\n                                 å¤ç](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc\n                                 -default-servlet-handler) ä¹è¢«éç½®ï¼æªè§£å³çè¯·æ±æ»æ¯è½¬åå°é»è®¤ç servlet\n                                 å¹¶ä¸æ°¸è¿ä¸ä¼å¼å 404ã\n\nåºç¨ç¨åºå¯ä»¥å£°æå¤çè¯·æ±æéçç¹æ® Bean ç±»åä¸­ååºçåºç¡ç»æ beanãDispatcherServlet æ£æ¥æ¯ä¸ªç¹æ® bean ç WebApplicationContextãå¦ææ²¡æå¹éç bean ç±»åï¼å®å°åéå° DispatcherServlet.properties ä¸­ååºçé»è®¤ç±»åã\n\nå¨å¤§å¤æ°æåµä¸ï¼MVC éç½®æ¯æå¥½çèµ·ç¹ãå®ä»¥ Java æ XML å£°ææéç beanï¼å¹¶æä¾æ´é«çº§å«çéç½®åè° API æ¥å¯¹å¶è¿è¡èªå®ä¹ã\n\n> æ³¨æï¼Spring Boot ä¾èµäº MVC Java éç½®æ¥éç½® Spring MVCï¼å¹¶æä¾äºè®¸å¤é¢å¤çæ¹ä¾¿éé¡¹ã\n\nå¨ Servlet ç¯å¢ä¸­ï¼æ¨å¯ä»¥éæ©ä»¥ç¼ç¨æ¹å¼éç½® Servlet å®¹å¨ä½ä¸ºæ¿ä»£æ¹æ¡æä¸ web.xml æä»¶ç»åä½¿ç¨ã\n\nimport org.springframework.web.WebApplicationInitializer;\n\npublic class MyWebApplicationInitializer implements WebApplicationInitializer {\n\n    @Override\n    public void onStartup(ServletContext container) {\n        XmlWebApplicationContext appContext = new XmlWebApplicationContext();\n        appContext.setConfigLocation("/WEB-INF/spring/dispatcher-config.xml");\n\n        ServletRegistration.Dynamic registration = container.addServlet("dispatcher", new DispatcherServlet(appContext));\n        registration.setLoadOnStartup(1);\n        registration.addMapping("/");\n    }\n}\n\n\nWebApplicationInitializer æ¯ Spring MVC æä¾çæ¥å£ï¼å¯ç¡®ä¿æ£æµå°èªå®ä¹çå®ç°å¹¶èªå¨ç¨äºåå§åä»»ä½ Servlet 3 å®¹å¨ãåä¸º AbstractDispatcherServletInitializer ç WebApplicationInitializer çæ½è±¡åºç±»å®ç°éè¿è¦çæ¹æ³æ¥æå® servlet æ å°å DispatcherServlet éç½®çä½ç½®ï¼ä½¿å¾æ³¨å DispatcherServlet åå¾æ´å å®¹æã\n\nå¯¹äºä½¿ç¨åºäº Java ç Spring éç½®çåºç¨ç¨åºï¼å»ºè®®è¿æ ·åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n    @Override\n    protected Class<?>[] getRootConfigClasses() {\n        return null;\n    }\n\n    @Override\n    protected Class<?>[] getServletConfigClasses() {\n        return new Class<?>[] { MyWebConfig.class };\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[] { "/" };\n    }\n}\n\n\nå¦æä½¿ç¨åºäº XML ç Spring éç½®ï¼ååºç´æ¥ä» AbstractDispatcherServletInitializer æ©å±ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class MyWebAppInitializer extends AbstractDispatcherServletInitializer {\n\n    @Override\n    protected WebApplicationContext createRootApplicationContext() {\n        return null;\n    }\n\n    @Override\n    protected WebApplicationContext createServletApplicationContext() {\n        XmlWebApplicationContext cxt = new XmlWebApplicationContext();\n        cxt.setConfigLocation("/WEB-INF/spring/dispatcher-config.xml");\n        return cxt;\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[] { "/" };\n    }\n}\n\n\nAbstractDispatcherServletInitializer è¿æä¾äºä¸ç§æ¹ä¾¿çæ¹æ³æ¥æ·»å  Filter å®ä¾å¹¶å°å®ä»¬èªå¨æ å°å° DispatcherServletï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class MyWebAppInitializer extends AbstractDispatcherServletInitializer {\n\n    // ...\n\n    @Override\n    protected Filter[] getServletFilters() {\n        return new Filter[] {\n            new HiddenHttpMethodFilter(), new CharacterEncodingFilter() };\n    }\n}\n\n\næ¯ä¸ªè¿æ»¤å¨é½æ ¹æ®å¶å·ä½ç±»åæ·»å ä¸ä¸ªé»è®¤åç§°ï¼å¹¶èªå¨æ å°å° DispatcherServletã\n\nAbstractDispatcherServletInitializer ç isAsyncSupported ä¿æ¤æ¹æ³æä¾äºä¸ä¸ªåç¬çä½ç½®æ¥å¯ç¨ DispatcherServlet åæ å°å°å®çææè¿æ»¤å¨çå¼æ­¥æ¯æãé»è®¤æåµä¸ï¼æ­¤æ å¿è®¾ç½®ä¸º trueã\n\næåï¼å¦æéè¦è¿ä¸æ­¥èªå®ä¹ DispatcherServlet æ¬èº«ï¼å¯ä»¥éå createDispatcherServlet æ¹æ³ã\n\nãç¤ºä¾ãJava æ¹å¼æ³¨åå¹¶åå§å DispatcherServletï¼å®ç± Servlet å®¹å¨èªå¨æ£æµï¼è¯·åé Servlet Configï¼ï¼\n\npublic class MyWebApplicationInitializer implements WebApplicationInitializer {\n\n    @Override\n    public void onStartup(ServletContext servletContext) {\n\n        // Load Spring web application configuration\n        AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();\n        context.register(AppConfig.class);\n\n        // Create and register the DispatcherServlet\n        DispatcherServlet servlet = new DispatcherServlet(context);\n        ServletRegistration.Dynamic registration = servletContext.addServlet("app", servlet);\n        registration.setLoadOnStartup(1);\n        registration.addMapping("/app/*");\n    }\n}\n\n\nãç¤ºä¾ãweb.xml æ¹å¼æ³¨åå¹¶åå§å DispatcherServlet\n\n<web-app>\n\n    <listener>\n        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n    </listener>\n\n    <context-param>\n        <param-name>contextConfigLocation</param-name>\n        <param-value>/WEB-INF/app-context.xml</param-value>\n    </context-param>\n\n    <servlet>\n        <servlet-name>app</servlet-name>\n        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n        <init-param>\n            <param-name>contextConfigLocation</param-name>\n            <param-value></param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n\n    <servlet-mapping>\n        <servlet-name>app</servlet-name>\n        <url-pattern>/app/*</url-pattern>\n    </servlet-mapping>\n\n</web-app>\n\n\n\n# è·¯å¾å¹é\n\nServlet API å°å®æ´çè¯·æ±è·¯å¾å¬å¼ä¸º requestURIï¼å¹¶å°å¶è¿ä¸æ­¥ç»åä¸º contextPathãservletPath å pathInfoï¼å®ä»¬çå¼å  Servlet çæ å°æ¹å¼èå¼ãä»è¿äºè¾å¥ä¸­ï¼Spring MVC éè¦ç¡®å®ç¨äºæ å°å¤çç¨åºçæ¥æ¾è·¯å¾ï¼å¦æéç¨ï¼å®åºè¯¥æé¤ contextPath åä»»ä½ servletMapping åç¼ã\n\nservletPath å pathInfo å·²è§£ç ï¼è¿ä½¿å¾å®ä»¬æ æ³ç´æ¥ä¸å®æ´ç requestURI è¿è¡æ¯è¾ä»¥æ´¾ç lookupPathï¼å æ­¤æå¿è¦å¯¹ requestURI è¿è¡è§£ç ãç¶èï¼è¿å¼å¥äºå®èªå·±çé®é¢ï¼å ä¸ºè·¯å¾å¯è½åå«ç¼ç çä¿çå­ç¬¦ï¼ä¾å¦ "/" æ ";" è¿åè¿æ¥åä¼å¨è§£ç åæ¹åè·¯å¾çç»æï¼è¿ä¹å¯è½å¯¼è´å®å¨é®é¢ãæ­¤å¤ï¼Servlet å®¹å¨å¯è½ä¼å¨ä¸åç¨åº¦ä¸è§èå servletPathï¼è¿ä½¿å¾è¿ä¸æ­¥æ æ³å¯¹ requestURI æ§è¡ startsWith æ¯è¾ã\n\nè¿å°±æ¯ä¸ºä»ä¹æå¥½é¿åä¾èµåºäºåç¼ç servletPath æ å°ç±»åéå¸¦ç servletPathãå¦æ DispatcherServlet è¢«æ å°ä¸ºå¸¦æ "/" çé»è®¤ Servletï¼æèæ²¡æå¸¦ "/*" çåç¼ï¼å¹¶ä¸ Servlet å®¹å¨æ¯ 4.0+ï¼å Spring MVC è½å¤æ£æµ Servlet æ å°ç±»åï¼å¹¶é¿åä½¿ç¨ servletPath å pathInfoãå¨ 3.1 Servlet å®¹å¨ä¸ï¼åè®¾ç¸åç Servlet æ å°ç±»åï¼å¯ä»¥éè¿å¨ MVC éç½®ä¸­éè¿è·¯å¾å¹éæä¾ä¸ä¸ªå¸¦æ alwaysUseFullPath=true ç UrlPathHelper æ¥å®ç°ç­æã\n\nå¹¸è¿çæ¯ï¼é»è®¤ç Servlet æ å° "/" æ¯ä¸ä¸ªä¸éçéæ©ãä½æ¯ï¼ä»ç¶å­å¨ä¸ä¸ªé®é¢ï¼å³éè¦å¯¹ requestURI è¿è¡è§£ç æè½ä¸æ§å¶å¨æ å°è¿è¡æ¯è¾ãè¿ä¹æ¯ä¸å¯åçï¼å ä¸ºå¯è½ä¼è§£ç æ¹åè·¯å¾ç»æçä¿çå­ãå¦æä¸éè¦è¿æ ·çå­ç¬¦ï¼é£ä¹æ¨å¯ä»¥æç»å®ä»¬ï¼å¦ Spring Security HTTP é²ç«å¢ï¼ï¼æèæ¨å¯ä»¥ä½¿ç¨ urlDecode=false éç½® UrlPathHelperï¼ä½æ§å¶å¨æ å°éè¦ä¸ç¼ç è·¯å¾å¹éï¼è¿å¯è½å¹¶ä¸æ»æ¯ææãæ­¤å¤ï¼ææ¶ DispatcherServlet éè¦ä¸å¦ä¸ä¸ª Servlet å±äº« URL ç©ºé´ï¼å¹¶ä¸å¯è½éè¦éè¿åç¼è¿è¡æ å°ã\n\nå¨ä½¿ç¨ PathPatternParser åè§£ææ¨¡å¼æ¶è§£å³äºä¸è¿°é®é¢ï¼ä½ä¸ºä½¿ç¨ AntPathMatcher è¿è¡å­ç¬¦ä¸²è·¯å¾å¹éçæ¿ä»£æ¹æ³ãPathPatternParser ä» 5.3 çæ¬å¼å§å°±å¯ä»¥å¨ Spring MVC ä¸­ä½¿ç¨ï¼å¹¶ä¸ä» 6.0 çæ¬å¼å§é»è®¤å¯ç¨ãä¸éè¦è§£ç æ¥æ¾è·¯å¾æç¼ç æ§å¶å¨æ å°ç AntPathMatcher ä¸åï¼è§£æç PathPattern ä¸ç§°ä¸º RequestPath çè·¯å¾çè§£æè¡¨ç¤ºå¹éï¼ä¸æ¬¡ä¸ä¸ªè·¯å¾æ®µãè¿åè®¸åç¬è§£ç åæ¸çè·¯å¾æ®µå¼ï¼èæ²¡ææ¹åè·¯å¾ç»æçé£é©ãè§£æç PathPattern ä¹æ¯æä½¿ç¨ servletPath åç¼æ å°ï¼åªè¦ä½¿ç¨ Servlet è·¯å¾æ å°å¹¶ä¸åç¼ä¿æç®åï¼å³å®æ²¡æç¼ç å­ç¬¦ã\n\n\n# æ¦æªå¨\n\nææ HandlerMapping å®ç°é½æ¯æå¤çæ¦æªå¨ï¼å½æ³è¦å°ç¹å®åè½åºç¨äºæäºè¯·æ±æ¶ï¼è¿äºæ¦æªå¨å¾æç¨ââä¾å¦ï¼æ£æ¥ä¸»ä½ãæ¦æªå¨å¿é¡»ä½¿ç¨ org.springframework.web.servlet åä¸­çä¸ä¸ªæ¹æ³å®ç° HandlerInterceptorï¼è¿ä¸ä¸ªæ¹æ³åºè¯¥æä¾è¶³å¤ççµæ´»æ§æ¥è¿è¡åç§é¢å¤çååå¤çï¼\n\n * preHandle(..)ï¼å¨å®é handler ä¹åæ§è¡\n * postHandle(..)ï¼handler ä¹åæ§è¡\n * afterCompletion(..)ï¼å®æè¯·æ±åæ§è¡\n\npreHandle(..) æ¹æ³è¿åä¸ä¸ªå¸å°å¼ãå¯ä»¥ä½¿ç¨æ­¤æ¹æ³ä¸­æ­æç»§ç»­æ§è¡é¾çå¤çãå½æ­¤æ¹æ³è¿å true æ¶ï¼å¤çç¨åºæ§è¡é¾å°ç»§ç»­ãå½å®è¿å false æ¶ï¼DispatcherServlet åå®æ¦æªå¨æ¬èº«å·²ç»å¤çè¯·æ±ï¼å¹¶ä¸ï¼ä¾å¦ï¼åç°éå½çè§å¾ï¼å¹¶ä¸ä¸ä¼ç»§ç»­æ§è¡å¶ä»æ¦æªå¨åæ§è¡é¾ä¸­çå®éå¤çç¨åºã\n\næå³å¦ä½éç½®æ¦æªå¨çç¤ºä¾ï¼è¯·åé MVC éç½®é¨åä¸­çæ¦æªå¨ãè¿å¯ä»¥éè¿å¨åä¸ª HandlerMapping å®ç°ä¸ä½¿ç¨ setter æ¥ç´æ¥æ³¨åå®ä»¬ã\n\npostHandle æ¹æ³å¯¹äº @ResponseBody å ResponseEntity çæ¹æ³ä¸å¤ªæç¨ï¼å®ä»¬çååºæ¯å¨ HandlerAdapter ä¸­å postHandle ä¹åç¼ååæäº¤çãè¿æå³çå¯¹ååºè¿è¡ä»»ä½æ´æ¹é½ä¸ºæ¶å·²æï¼ä¾å¦æ·»å é¢å¤çæ å¤´ãå¯¹äºæ­¤ç±»åºæ¯ï¼æ¨å¯ä»¥å®ç° ResponseBodyAdvice å¹¶å°å¶å£°æä¸º Controller Advice bean æç´æ¥å¨ RequestMappingHandlerAdapter ä¸è¿è¡éç½®ã\n\n\n# è§£æå¨\n\nDispatcherServlet ä¼å è½½å¤ç§è§£æå¨æ¥å¤çè¯·æ±ï¼æ¯è¾å¸¸è§çæä»¥ä¸å ä¸ªï¼\n\n * HandlerExceptionResolver - è§£å³å¼å¸¸çç­ç¥ï¼å¯è½å°å®ä»¬æ å°å°å¤çç¨åºãHTML éè¯¯è§å¾æå¶ä»ç®æ ã\n * ViewResolver - å°ä»å¤çç¨åºè¿åçåºäºå­ç¬¦ä¸²çé»è¾è§å¾åç§°è§£æä¸ºç¨äºåç°ååºçå®éè§å¾ã\n * LocaleResolver, LocaleContextResolver - è§£æç¨æ·æ­£å¨ä½¿ç¨çæ¬å°åè®¾ç½®ï¼å¯è½è¿æä»ä»¬çæ¶åºï¼ä»¥ä¾¿è½å¤æä¾å½éåçè§å¾ã\n * ThemeResolver - è§£æ Web åºç¨ç¨åºå¯ä»¥ä½¿ç¨çä¸»é¢ââä¾å¦ï¼æä¾ä¸ªæ§åå¸å±ã\n * MultipartResolver - éè¿ä¸äº multipart è§£æåºçå¸®å©è§£æ multipart è¯·æ±ï¼ä¾å¦ï¼éè¿æµè§å¨ä¸ä¼ æä»¶ï¼ã\n\n\n# HandlerExceptionResolver\n\nå¨ WebApplicationContext ä¸­å£°æç HandlerExceptionResolver ç¨äºè§£å³è¯·æ±å¤çæé´æåºçå¼å¸¸ãè¿äºå¼å¸¸è§£æå¨åè®¸èªå®ä¹é»è¾æ¥è§£å³å¼å¸¸ã\n\nå¯¹äº HTTP ç¼å­æ¯æï¼å¤çç¨åºå¯ä»¥ä½¿ç¨ WebRequest ç checkNotModified æ¹æ³ï¼ä»¥åç¨äºæ§å¶å¨ç HTTP ç¼å­ä¸­æè¿°çå¸¦æ³¨éæ§å¶å¨çæ´å¤éé¡¹ã\n\nå¦æå¨è¯·æ±æ å°æé´åçå¼å¸¸æä»è¯·æ±å¤çç¨åºï¼ä¾å¦ @Controllerï¼æåºå¼å¸¸ï¼å DispatcherServlet å§æ HandlerExceptionResolver é¾æ¥è§£å³å¼å¸¸å¹¶æä¾æ¿ä»£å¤çï¼è¿éå¸¸æ¯éè¯¯ååºã\n\nä¸è¡¨ååºäºå¯ç¨ç HandlerExceptionResolver å®ç°ï¼\n\nHANDLEREXCEPTIONRESOLVER            è¯´æ\nSimpleMappingExceptionResolver      å¼å¸¸ç±»åç§°åéè¯¯è§å¾åç§°ä¹é´çæ å°ãç¨äºå¨æµè§å¨åºç¨ç¨åºä¸­åç°éè¯¯é¡µé¢ã\nDefaultHandlerExceptionResolver     è§£å³ç± Spring MVC å¼åçå¼å¸¸å¹¶å°å®ä»¬æ å°å° HTTP ç¶æä»£ç ã\nResponseStatusExceptionResolver     ä½¿ç¨ @ResponseStatus æ³¨è§£è§£å³å¼å¸¸ï¼å¹¶æ ¹æ®æ³¨è§£ä¸­çå¼å°å®ä»¬æ å°å° HTTP ç¶æä»£ç ã\nExceptionHandlerExceptionResolver   éè¿å¨ @Controller æ @ControllerAdvice ç±»ä¸­è°ç¨ @ExceptionHandler\n                                    æ¹æ³æ¥è§£å³å¼å¸¸ã\n\n# è§£æå¨é¾\n\næ¨å¯ä»¥éè¿å¨ Spring éç½®ä¸­å£°æå¤ä¸ª HandlerExceptionResolver bean å¹¶æ ¹æ®éè¦è®¾ç½®å®ä»¬çé¡ºåºå±æ§æ¥ææå¼å¸¸è§£æå¨é¾ãorder å±æ§è¶é«ï¼å¼å¸¸è§£æå¨çä½ç½®å°±è¶é åã\n\nHandlerExceptionResolver ççº¦å®ä½¿å®å¯ä»¥è¿åä»¥ä¸åå®¹ï¼\n\n * æåéè¯¯è§å¾ç ModelAndViewã\n\n * å¦æå¼å¸¸æ¯å¨è§£æå¨ä¸­å¤ççï¼åä¸ºç©ºç ModelAndViewã\n\n * å¦æå¼å¸¸ä»æªè§£å³ï¼åä¸º nullï¼ä¾åç»­è§£æå¨å°è¯ï¼å¦æå¼å¸¸ä»ç¶å­å¨ï¼ååè®¸åä¸åæ³¡å° Servlet å®¹å¨ã\n\nMVC Config èªå¨ä¸ºé»è®¤ç Spring MVC å¼å¸¸ã@ResponseStatus æ³¨éçå¼å¸¸åå¯¹ @ExceptionHandler æ¹æ³çæ¯æå£°æåç½®è§£æå¨ãæ¨å¯ä»¥èªå®ä¹è¯¥åè¡¨ææ¿æ¢å®ã\n\n# éè¯¯é¡µé¢\n\nå¦æå¼å¸¸ä»æªè¢«ä»»ä½ HandlerExceptionResolver å¤çå¹¶å æ­¤ç»§ç»­ä¼ æ­ï¼æèå¦æååºç¶æè®¾ç½®ä¸ºéè¯¯ç¶æï¼å³ 4xxã5xxï¼ï¼Servlet å®¹å¨å¯ä»¥å¨ HTML ä¸­åç°é»è®¤éè¯¯é¡µé¢ãè¦èªå®ä¹å®¹å¨çé»è®¤éè¯¯é¡µé¢ï¼æ¨å¯ä»¥å¨ web.xml ä¸­å£°æä¸ä¸ªéè¯¯é¡µé¢æ å°ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n<error-page>\n    <location>/error</location>\n</error-page>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼å½åºç°å¼å¸¸æååºå·æéè¯¯ç¶ææ¶ï¼Servlet å®¹å¨ä¼å¨å®¹å¨åå° ERROR åæ´¾å°éç½®ç URLï¼ä¾å¦ï¼/errorï¼ãç¶åç± DispatcherServlet å¤çï¼å¯è½å°å¶æ å°å° @Controllerï¼åèå¯ä»¥è¿åå¸¦ææ¨¡åçéè¯¯è§å¾åç§°æåç° JSON ååºï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@RestController\npublic class ErrorController {\n\n    @RequestMapping(path = "/error")\n    public Map<String, Object> handle(HttpServletRequest request) {\n        Map<String, Object> map = new HashMap<String, Object>();\n        map.put("status", request.getAttribute("jakarta.servlet.error.status_code"));\n        map.put("reason", request.getAttribute("jakarta.servlet.error.message"));\n        return map;\n    }\n}\n\n\n> æç¤ºï¼Servlet API ä¸æä¾å¨ Java ä¸­åå»ºéè¯¯é¡µé¢æ å°çæ¹æ³ãä½æ¯ï¼æ¨å¯ä»¥åæ¶ä½¿ç¨ WebApplicationInitializer åæå°ç web.xmlã\n\n\n# ViewResolver\n\nSpring MVC å®ä¹äº ViewResolver å View æ¥å£ï¼è®©ç¨æ·å¯ä»¥å¨æµè§å¨ä¸­æ¸²ææ¨¡åï¼èæ ééå®äºç¹å®çè§å¾ææ¯ãViewResolver æä¾è§å¾åç§°åå®éè§å¾ä¹é´çæ å°ãView è§£å³äºå¨ç§»äº¤ç»ç¹å®è§å¾ææ¯ä¹ååå¤æ°æ®çé®é¢ã\n\nä¸è¡¨æä¾äºæå³ ViewResolver ä¸äºå­ç±»ï¼\n\nVIEWRESOLVER                     DESCRIPTION\nAbstractCachingViewResolver      AbstractCachingViewResolver\n                                 çå­ç±»ç¼å­å®ä»¬è§£æçè§å¾å®ä¾ãç¼å­æé«äºæäºè§å¾ææ¯çæ§è½ãæ¨å¯ä»¥éè¿å° cache å±æ§è®¾ç½®ä¸º false\n                                 æ¥å³é­ç¼å­ãæ­¤å¤ï¼å¦ææ¨å¿é¡»å¨è¿è¡æ¶å·æ°æä¸ªè§å¾ï¼ä¾å¦ï¼ä¿®æ¹ FreeMarker æ¨¡æ¿æ¶ï¼ï¼æ¨å¯ä»¥ä½¿ç¨\n                                 removeFromCache(String viewName, Locale loc) æ¹æ³ã\nUrlBasedViewResolver             ViewResolver æ¥å£çç®åå®ç°ï¼æ éæ¾å¼æ å°å®ä¹å³å¯å°é»è¾è§å¾åç§°ç´æ¥è§£æä¸º\n                                 URLãå¦ææ¨çé»è¾åç§°ä»¥ç´æ¥çæ¹å¼å¹éæ¨çè§å¾èµæºçåç§°ï¼èä¸éè¦ä»»ææ å°ï¼é£ä¹è¿æ¯åéçã\nInternalResourceViewResolver     UrlBasedViewResolver çå­ç±»ï¼æ¯æ InternalResourceViewï¼å®éä¸æ¯\n                                 Servlet å JSPï¼ä»¥å JstlView å TilesView ç­å­ç±»ãå¯ä»¥ä½¿ç¨\n                                 setViewClass(..) ä¸ºè¯¥è§£æå¨çæçææè§å¾æå®è§å¾ç±»ã\nFreeMarkerViewResolver           UrlBasedViewResolver çå­ç±»ï¼æ¯æ FreeMarkerView åå®ä»¬çèªå®ä¹å­ç±»ã\nContentNegotiatingViewResolver   ViewResolver æ¥å£çå®ç°ï¼è¯¥æ¥å£æ ¹æ®è¯·æ±æä»¶åæ Accept æ å¤´è§£æè§å¾ã\nBeanNameViewResolver             å°è§å¾åç§°è§£éä¸ºå½ååºç¨ç¨åºä¸ä¸æä¸­ç bean åç§°ç ViewResolver\n                                 æ¥å£çå®ç°ãè¿æ¯ä¸ä¸ªéå¸¸çµæ´»çåä½ï¼åè®¸æ ¹æ®ä¸åçè§å¾åç§°æ··ååå¹éä¸åçè§å¾ç±»åãæ¯ä¸ªè¿æ ·çâè§å¾âé½å¯ä»¥å®ä¹ä¸ºä¸ä¸ª\n                                 beanï¼ä¾å¦ å¨ XML æéç½®ç±»ä¸­ã\n\n# å¤ç\n\nå¯ä»¥éè¿å£°æå¤ä¸ªè§£æå¨æ¥ææè§å¾è§£æå¨é¾ï¼å¦æéè¦ï¼è¿å¯ä»¥éè¿è®¾ç½® order å±æ§æ¥æå®é¡ºåºãé¡ºåºå±æ§è¶é«ï¼è§å¾è§£æå¨å¨é¾ä¸­çä½ç½®å°±è¶é åã\n\nViewResolver ççº¦å®æå®å®å¯ä»¥è¿å null ä»¥æç¤ºæ¾ä¸å°è§å¾ãä½æ¯ï¼å¯¹äº JSP å InternalResourceViewResolverï¼ç¡®å® JSP æ¯å¦å­å¨çå¯ä¸æ¹æ³æ¯éè¿ RequestDispatcher æ§è¡åæ´¾ãå æ­¤ï¼æ¨å¿é¡»å§ç»å° InternalResourceViewResolver éç½®ä¸ºå¨è§å¾è§£æå¨çæ´ä½é¡ºåºä¸­æå¨æåã\n\néç½®è§å¾è§£æå°±åå° ViewResolver æ·»å å° Spring éç½®ä¸­ä¸æ ·ç®åãMVC Config ä¸ºè§å¾è§£æå¨åæ·»å æ é»è¾è§å¾æ§å¶å¨æä¾äºä¸ç¨çéç½® APIï¼è¿å¯¹äºæ²¡ææ§å¶å¨é»è¾ç HTML æ¨¡æ¿æ¸²æå¾æç¨ã\n\n# éå®å\n\nè§å¾åç§°ä¸­çç¹æ®åç¼ redirect: å¯ä»¥å®ç°ä¸ä¸ªéå®åãUrlBasedViewResolverï¼åå¶å­ç±»ï¼å°æ­¤è¯å«ä¸ºéè¦éå®åçæä»¤ãè§å¾åç§°çå¶ä½é¨åæ¯éå®å URLã\n\næç»ææä¸æ§å¶å¨è¿å RedirectView ç¸åï¼ä½ç°å¨æ§å¶å¨æ¬èº«å¯ä»¥æ ¹æ®é»è¾è§å¾åç§°è¿è¡æä½ãé»è¾è§å¾åç§°ï¼ä¾å¦ redirect:/myapp/some/resourceï¼ç¸å¯¹äºå½å Servlet ä¸ä¸æéå®åï¼èåç§°ï¼ä¾å¦ redirect:https://myhost.com/some/arbitrary/pathï¼éå®åå°ç»å¯¹ URLã\n\nè¯·æ³¨æï¼å¦æä½¿ç¨ @ResponseStatus æ³¨è§£æ è®°æ§å¶å¨æ¹æ³ï¼åæ³¨è§£å¼ä¼åäº RedirectView è®¾ç½®çååºç¶æã\n\n# è½¬å\n\nè§å¾åç§°ä¸­çç¹æ®åç¼ forward: å¯ä»¥å®ç°ä¸ä¸ªè½¬åãè¿å°åå»ºä¸ä¸ª InternalResourceViewï¼å®æ§è¡ RequestDispatcher.forward()ãå æ­¤ï¼æ­¤åç¼å¯¹ InternalResourceViewResolver å InternalResourceViewï¼å¯¹äº JSPï¼æ²¡æç¨ï¼ä½å¦ææ¨ä½¿ç¨å¦ä¸ç§è§å¾ææ¯ä½ä»æ³å¼ºå¶è½¬åç± Servlet/JSP å¼æå¤ççèµæºï¼å®å¯è½ä¼ææå¸®å©ã\n\n# åå®¹åå\n\nContentNegotiatingViewResolver æ¬èº«ä¸è§£æè§å¾ï¼èæ¯å§æç»å¶ä»è§å¾è§£æå¨å¹¶éæ©ç±»ä¼¼äºå®¢æ·ç«¯è¯·æ±çè¡¨ç¤ºçè§å¾ãå¯ä»¥ä» Accept å¤´ææ¥è¯¢åæ°ï¼ä¾å¦ï¼"/path?format=pdf"ï¼ç¡®å®è¡¨ç¤ºå½¢å¼ã\n\nContentNegotiatingViewResolver éè¿å°è¯·æ±åªä½ç±»åä¸å¶æ¯ä¸ª ViewResolver å³èç View æ¯æçåªä½ç±»åï¼ä¹ç§°ä¸º Content-Typeï¼è¿è¡æ¯è¾ï¼æ¥éæ©åéç View æ¥å¤çè¯·æ±ãåè¡¨ä¸­ç¬¬ä¸ä¸ªå·æå¼å®¹ Content-Type çè§å¾å°å¤çç»æè¿åç»å®¢æ·ç«¯ãå¦æ ViewResolver é¾æ æ³æä¾å¼å®¹çè§å¾ï¼åä¼æ¥ééè¿ DefaultViews å±æ§æå®çè§å¾åè¡¨ãåä¸ä¸ªéé¡¹éç¨äºåä¾è§å¾ï¼å®å¯ä»¥åç°å½åèµæºçéå½è¡¨ç¤ºï¼èä¸ç®¡é»è¾è§å¾åç§°å¦ä½ãAccept æ å¤´å¯ä»¥åå«ééç¬¦ï¼ä¾å¦ text/*ï¼ï¼å¨è¿ç§æåµä¸ï¼Content-Type ä¸º text/xml ç View æ¯å¼å®¹çå¹éé¡¹ã\n\n\n# LocaleResolver\n\nå¤§é¨åç Spring æ¶æé½æ¯æå½éåï¼å°±å Spring web MVC æ¡æ¶æåçé£æ ·ãDispatcherServlet åè®¸æ¨ä½¿ç¨å®¢æ·ç«¯çè¯­è¨ç¯å¢èªå¨è§£ææ¶æ¯ãè¿æ¯éè¿ LocaleResolver å¯¹è±¡å®æçã\n\nå½æ¶å°è¯·æ±æ¶ï¼DispatcherServlet ä¼å¯»æ¾è¯­è¨ç¯å¢è§£æå¨ï¼å¦ææ¾å°ï¼å®ä¼å°è¯ä½¿ç¨å®æ¥è®¾ç½® Locale ç¯å¢ãéè¿ä½¿ç¨ RequestContext.getLocale() æ¹æ³ï¼æ¨å§ç»å¯ä»¥æ£ç´¢ç± Locale è§£æå¨è§£æçè¯­è¨ç¯å¢ã\n\né¤äºèªå¨è¯å« Locale ç¯å¢ä¹å¤ï¼æ¨è¿å¯ä»¥ä¸º handle æ å°éå æ¦æªå¨ï¼å¨ç¹å®æåµä¸æ´æ¹ Locale ç¯å¢è®¾ç½®ï¼ä¾å¦ï¼åºäºè¯·æ±ä¸­çåæ°ï¼ã\n\nLocale è§£æå¨åæ¦æªå¨å¨ org.springframework.web.servlet.i18n åä¸­å®ä¹ï¼å¹¶ä»¥æ­£å¸¸æ¹å¼å¨æ¨çåºç¨ç¨åºä¸ä¸æä¸­éç½®ãSpring ä¸­æä»¥ä¸ Locale è§£æå¨å¯ä¾éæ©ã\n\n * Time Zone\n * Header Resolver\n * Cookie Resolver\n * Session Resolver\n * Locale Interceptor\n\n# LocaleResolver\n\né¤äºè·åå®¢æ·ç«¯çåºåè®¾ç½®å¤ï¼äºè§£å¶æ¶åºéå¸¸ä¹å¾æç¨ãLocaleContextResolver æ¥å£æä¾äº LocaleResolver çæ©å±ï¼è®©è§£æå¨æä¾æ´ä¸°å¯ç LocaleContextï¼å¶ä¸­å¯è½åæ¬æ¶åºä¿¡æ¯ã\n\nå¦æå¯ç¨ï¼å¯ä»¥ä½¿ç¨ RequestContext.getTimeZone() æ¹æ³è·åç¨æ·ç TimeZoneãå¨ Spring ç ConversionService ä¸­æ³¨åçä»»ä½æ¥æ/æ¶é´ Converter å Formatter å¯¹è±¡ä¼èªå¨ä½¿ç¨æ¶åºä¿¡æ¯ã\n\n# æ å¤´è§£æå¨\n\næ­¤ Locale è§£æå¨æ£æ¥å®¢æ·ç«¯ï¼ä¾å¦ç½ç»æµè§å¨ï¼åéçè¯·æ±ä¸­ç accept-language å¤´ãéå¸¸ï¼æ­¤å¤´å­æ®µåå«å®¢æ·ç«¯æä½ç³»ç»çåºåä¿¡æ¯ãè¯·æ³¨æï¼æ­¤è§£æå¨ä¸æ¯ææ¶åºä¿¡æ¯ã\n\n# CookieLocaleResolver\n\nThis locale resolver inspects a Cookie that might exist on the client to see if a Locale or TimeZone is specified. If so, it uses the specified details. By using the properties of this locale resolver, you can specify the name of the cookie as well as the maximum age. The following example defines a CookieLocaleResolver:\n\næ­¤ Locale è§£æå¨æ£æ¥å®¢æ·ç«¯ä¸æ¯å¦å­å¨ Cookieï¼ä»¥æ¥çæ¯å¦æå®äº Locale æ TimeZoneãå¦ææ¯ï¼å®ä¼ä½¿ç¨æå®çè¯¦ç»ä¿¡æ¯ãéè¿ä½¿ç¨æ­¤ Locale è§£æå¨çå±æ§ï¼å¯ä»¥æå® cookie çåç§°ä»¥åæé¿æéãä»¥ä¸ç¤ºä¾å®ä¹äº CookieLocaleResolverï¼\n\n<bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">\n\n    <property name="cookieName" value="clientlanguage"/>\n\n    \x3c!-- in seconds. If set to -1, the cookie is not persisted (deleted when browser shuts down) --\x3e\n    <property name="cookieMaxAge" value="100000"/>\n\n</bean>\n\n\nä¸è¡¨æè¿°äº CookieLocaleResolver çå±æ§ï¼\n\nå±æ§             é»è®¤å¼                         DESCRIPTION\ncookieName     ç±»å + LOCALE                 cookie å\ncookieMaxAge   Servlet container default   cookie å¨å®¢æ·ç«¯ä¸ä¿ççæé¿æ¶é´ãå¦ææå®äºâ-1âï¼åä¸ä¼ä¿ç cookieãå®ä»å¨å®¢æ·ç«¯å³é­æµè§å¨ä¹åå¯ç¨ã\ncookiePath     /                           å° cookie çå¯è§æ§éå¶å¨æ¨ç½ç«çç¹å®é¨åãå½æå® cookiePath æ¶ï¼cookie\n                                           ä»å¯¹è¯¥è·¯å¾åå¶ä¸æ¹çè·¯å¾å¯è§ã\n\n# SessionLocaleResolver\n\nSessionLocaleResolver åè®¸æ¨ä»å¯è½ä¸ç¨æ·è¯·æ±ç¸å³èçä¼è¯ä¸­æ£ç´¢ Locale å TimeZoneãä¸ CookieLocaleResolver ç¸æ¯ï¼æ­¤ç­ç¥å°æ¬å°éæ©ç locale è®¾ç½®å­å¨å¨ Servlet å®¹å¨ç HttpSession ä¸­ãå æ­¤ï¼è¿äºè®¾ç½®å¯¹äºæ¯ä¸ªä¼è¯é½æ¯ä¸´æ¶çï¼å æ­¤ä¼å¨æ¯ä¸ªä¼è¯ç»ææ¶ä¸¢å¤±ã\n\næ³¨æï¼è¿ä¸å¤é¨ä¼è¯ç®¡çæºå¶ï¼ä¾å¦ Spring Session é¡¹ç®ï¼æ²¡æç´æ¥å³ç³»ãæ­¤ SessionLocaleResolver æ ¹æ®å½å HttpServletRequest è¯ä¼°åä¿®æ¹ç¸åºç HttpSession å±æ§ã\n\n# LocaleChangeInterceptor\n\nå¯ä»¥éè¿å° LocaleChangeInterceptor æ·»å å°ä¸ä¸ª HandlerMapping å®ä¹æ¥å¯ç¨åºåè®¾ç½®æ´æ¹ãå®æ£æµè¯·æ±ä¸­çåæ°å¹¶ç¸åºå°æ´æ¹ Locale ç¯å¢ï¼å¨è°åº¦ç¨åºçåºç¨ç¨åºä¸ä¸æä¸­è°ç¨ LocaleResolver ä¸ç setLocale æ¹æ³ãä¸é¢çç¤ºä¾æ¾ç¤ºè°ç¨ææåå«åä¸º siteLanguage çåæ°ç *.view èµæºï¼ä»¥æ´æ¹è¯­è¨ç¯å¢ãå æ­¤ï¼ä¾å¦ï¼å¯¹ URL https://www.sf.net/home.view?siteLanguage=nl çè¯·æ±å°ç«ç¹è¯­è¨æ´æ¹ä¸ºè·å°è¯­ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ¦æªè¯­è¨ç¯å¢ï¼\n\n<bean id="localeChangeInterceptor"\n        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">\n    <property name="paramName" value="siteLanguage"/>\n</bean>\n\n<bean id="localeResolver"\n        class="org.springframework.web.servlet.i18n.CookieLocaleResolver"/>\n\n<bean id="urlMapping"\n        class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">\n    <property name="interceptors">\n        <list>\n            <ref bean="localeChangeInterceptor"/>\n        </list>\n    </property>\n    <property name="mappings">\n        <value>/**/*.view=someController</value>\n    </property>\n</bean>\n\n\n\n# ThemeResolver\n\næ¨å¯ä»¥åºç¨ Spring Web MVC æ¡æ¶ä¸»é¢æ¥è®¾ç½®åºç¨ç¨åºçæ´ä½å¤è§ï¼ä»èå¢å¼ºç¨æ·ä½éªãä¸»é¢æ¯éæèµæºçéåï¼éå¸¸æ¯æ ·å¼è¡¨åå¾åï¼å®ä»¬ä¼å½±ååºç¨ç¨åºçè§è§é£æ ¼ã\n\nè¦å¨ Web åºç¨ç¨åºä¸­ä½¿ç¨ä¸»é¢ï¼å¿é¡»è®¾ç½® org.springframework.ui.context.ThemeSource æ¥å£çå®ç°ãWebApplicationContext æ¥å£æ©å±äº ThemeSource ä½å°å¶èè´£å§æç»äºä¸é¨çå®ç°ãé»è®¤æåµä¸ï¼å§ææ¯ org.springframework.ui.context.support.ResourceBundleThemeSource ï¼å®ä»ç±»çæ ¹è·¯å¾å è½½å±æ§æä»¶ãè¦ä½¿ç¨èªå®ä¹ç ThemeSource å®ç°æéç½® ResourceBundleThemeSource çåºæ¬åç§°åç¼ï¼æ¨å¯ä»¥å¨åºç¨ç¨åºä¸ä¸æä¸­ä½¿ç¨ä¿çåç§° themeSource æ³¨åä¸ä¸ª beanãWeb åºç¨ç¨åºä¸ä¸æèªå¨æ£æµå·æè¯¥åç§°ç bean å¹¶ä½¿ç¨å®ã\n\nå½ä½¿ç¨ ResourceBundleThemeSource æ¶ï¼ä¸»é¢æ¯å¨ä¸ä¸ªç®åçå±æ§æä»¶ä¸­å®ä¹çãå±æ§æä»¶ååºäºææä¸»é¢çèµæºï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nstyleSheet=/themes/cool/style.css\nbackground=/themes/cool/img/coolBg.jpg\n\n\nå±æ§çé®æ¯ä»è§å¾ä»£ç ä¸­å¼ç¨ä¸»é¢åç´ çåç§°ãå¯¹äº JSPï¼éå¸¸ä½¿ç¨ spring:theme èªå®ä¹æ ç­¾æ¥æ§è¡æ­¤æä½ï¼å®ä¸ spring:message æ ç­¾éå¸¸ç¸ä¼¼ãä»¥ä¸ JSP çæ®µä½¿ç¨åé¢ç¤ºä¾ä¸­å®ä¹çä¸»é¢æ¥èªå®ä¹å¤è§ï¼\n\n<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>\n<html>\n    <head>\n        <link rel="stylesheet" href="<spring:theme code=\'styleSheet\'/>" type="text/css"/>\n    </head>\n    <body style="background=<spring:theme code=\'background\'/>">\n        ...\n    </body>\n</html>\n\n\né»è®¤æåµä¸ï¼ ResourceBundleThemeSource ä½¿ç¨ç©ºçåºæ¬åç§°åç¼ãå æ­¤ï¼å±æ§æä»¶æ¯ä»ç±»è·¯å¾çæ ¹å è½½çãå æ­¤ï¼å¯ä»¥å° cool.properties ä¸»é¢å®ä¹æ¾å¨ç±»è·¯å¾æ ¹ç®å½ä¸­ï¼ä¾å¦ï¼å¨ /WEB-INF/classes ä¸­ï¼ãResourceBundleThemeSource ä½¿ç¨æ åç Java èµæºåå è½½æºå¶ï¼åè®¸ä¸»é¢å®å¨å½éåãä¾å¦ï¼æä»¬å¯ä»¥æä¸ä¸ª /WEB-INF/classes/cool_nl.propertiesï¼å®å¼ç¨ä¸ä¸ªå¸¦æè·å°è¯­ææ¬çç¹æ®èæ¯å¾åã\n\nå®ä¹ä¸»é¢åï¼å¯ä»¥å³å®ä½¿ç¨åªä¸ªè¦ä½¿ç¨çä¸»é¢ãDispatcherServlet æ¥æ¾åä¸º themeResolver ç bean ä»¥æ¾åºè¦ä½¿ç¨ç ThemeResolver å®ç°ãä¸»é¢è§£æå¨çå·¥ä½æ¹å¼ä¸ LocaleResolver å¤§è´ç¸åãå®æ£æµç¨äºç¹å®è¯·æ±çä¸»é¢ï¼ä¹å¯ä»¥æ´æ¹è¯·æ±çä¸»é¢ãä¸è¡¨æè¿°äº Spring æä¾çä¸»é¢è§£æå¨ï¼\n\nCLASS                  DESCRIPTION\nFixedThemeResolver     éæ©ä¸ä¸ªåºå®çä¸»é¢ï¼ä½¿ç¨ defaultThemeName å±æ§è®¾ç½®ã\nSessionThemeResolver   ä¸»é¢å¨ç¨æ·ç HTTP ä¼è¯ä¸­ç»´æ¤ã å®åªéè¦ä¸ºæ¯ä¸ªä¼è¯è®¾ç½®ä¸æ¬¡ï¼ä½ä¸ä¼å¨ä¼è¯ä¹é´æç»­å­å¨ã\nCookieThemeResolver    æéä¸»é¢å­å¨å¨å®¢æ·ç«¯ç cookie ä¸­ã\n\nSpring è¿æä¾äºä¸ä¸ª ThemeChangeInterceptorï¼å®åè®¸ä½¿ç¨ä¸ä¸ªç®åçè¯·æ±åæ°å¨æ¯ä¸ªè¯·æ±ä¸æ´æ¹ä¸»é¢ã\n\n\n# MultipartResolver\n\norg.springframework.web.multipart åä¸­ç MultipartResolver æ¯ä¸ç§è§£æ multipart è¯·æ±ï¼åæ¬æä»¶ä¸ä¼ ï¼çç­ç¥ã æä¸ä¸ªåºäºå®¹å¨ç StandardServletMultipartResolver å®ç°ï¼ç¨äº Servlet å¤é¨åè¯·æ±è§£æã è¯·æ³¨æï¼ä»å·ææ° Servlet 5.0+ åºçº¿ç Spring Framework 6.0 å¼å§ï¼åºäº Apache Commons FileUpload çè¿æ¶ç CommonsMultipartResolver ä¸åå¯ç¨ã\n\nè¦å¯ç¨ multipart å¤çï¼éè¦å¨ DispatcherServlet Spring éç½®ä¸­å£°æä¸ä¸ªåä¸º multipartResolver ç MultipartResolverã DispatcherServlet æ£æµå°å®å¹¶å°å¶åºç¨äºä¼ å¥è¯·æ±ã å½æ¥æ¶å°åå®¹ç±»åä¸º multipart/form-data ç POST æ¶ï¼è§£æå¨è§£æå°å½å HttpServletRequest åè£ä¸º MultipartHttpServletRequest çåå®¹ï¼ä»¥æä¾å¯¹å·²è§£ææä»¶çè®¿é®ä»¥åå°é¨åä½ä¸ºè¯·æ±åæ°å¬å¼ã\n\nServlet å¤é¨åè§£æéè¦éè¿ Servlet å®¹å¨éç½®å¯ç¨ã ä¸ºæ­¤ï¼\n\n * å¨ Java ä¸­ï¼å¨ Servlet æ³¨åä¸è®¾ç½®ä¸ä¸ª MultipartConfigElementã\n\n * å¨ web.xml ä¸­ï¼å° <multipart-config> é¨åæ·»å å° servlet å£°æã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½å¨ Servlet æ³¨åä¸è®¾ç½® MultipartConfigElementï¼\n\npublic class AppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n    // ...\n\n    @Override\n    protected void customizeRegistration(ServletRegistration.Dynamic registration) {\n\n        // Optionally also set maxFileSize, maxRequestSize, fileSizeThreshold\n        registration.setMultipartConfig(new MultipartConfigElement("/tmp"));\n    }\n\n}\n\n\nä¸æ¦ Servlet multipart éç½®å¥½ï¼å°±å¯ä»¥æ·»å ä¸ä¸ªåä¸º multipartResolver ç StandardServletMultipartResolver ç±»åç beanã\n\n\n# åèèµæ\n\n * Spring Framework å®æ¹ææ¡£\n * Spring Framework å®æ¹ææ¡£ä¹ Web',normalizedContent:'# spring mvc ä¹ dispatcherservlet\n\n\n# ç®ä»\n\ndispatcherservlet æ¯ spring mvc æ¡æ¶çæ ¸å¿ç»ä»¶ï¼è´è´£å°å®¢æ·ç«¯è¯·æ±æ å°å°ç¸åºçæ§å¶å¨ï¼ç¶åè°ç¨æ§å¶å¨å¤çè¯·æ±å¹¶è¿åååºç»æã\n\n\n# dispatcherservlet å·¥ä½åç\n\n# dispatcherservlet å·¥ä½æµç¨\n\ndispatcherservlet çå·¥ä½æµç¨å¤§è´å¦ä¸å¾æç¤ºï¼\n\n\n\n 1. æ¥æ¶ http è¯·æ±ï¼å½å®¢æ·ç«¯åé http è¯·æ±æ¶ï¼dispatcherservlet æ¥æ¶è¯¥è¯·æ±å¹¶å°å¶ä¼ éç» spring mvc æ¡æ¶ã\n 2. éæ© handlerï¼dispatcherservlet ä¼æ ¹æ®è¯·æ±ç url æ¾å°å¯¹åºçå¤çå¨æ å°å¨ handlermappingï¼è¯¥æ å°å¨ä¼æ ¹æ®éç½®æä»¶ä¸­ç url æ å°è§åæ¾å°åéçå¤çå¨ handlerã\n    * ç»å®å±æ§ï¼dispatcherservlet ä¼æ ¹æ®ç¨åºç web åå§åç­ç¥å³èåç§ resolverï¼å¦ï¼localeresolverãthemeresolver ç­ã\n    * dispatcherservlet æ ¹æ® <servlet-name>-servlet.xml ä¸­çéç½®å¯¹è¯·æ±ç url è¿è¡è§£æï¼å¾å°è¯·æ±èµæºæ è¯ç¬¦ï¼uriï¼ãç¶åæ ¹æ®è¯¥ uriï¼è°ç¨ handlermapping è·å¾è¯¥ handler éç½®çææç¸å³çå¯¹è±¡ï¼åæ¬ handler å¯¹è±¡ä»¥å handler å¯¹è±¡å¯¹åºçæ¦æªå¨ï¼ï¼æåä»¥handlerexecutionchain å¯¹è±¡çå½¢å¼è¿åã\n      * å°è¯·æ±æ å°å°å¤çç¨åºä»¥åç¨äºé¢å¤çååå¤ççæ¦æªå¨åè¡¨ãæ å°åºäºä¸äºæ åï¼å¶ç»èå  handlermapping å®ç°èå¼ã\n      * ä¸¤ä¸ªä¸»è¦ç handlermapping å®ç°æ¯ requestmappinghandlermappingï¼æ¯æ @requestmapping æ³¨éæ¹æ³ï¼å simpleurlhandlermappingï¼ç»´æ¤ uri è·¯å¾æ¨¡å¼å°å¤çç¨åºçæ¾å¼æ³¨åï¼ã\n 3. éæ© handleradapterï¼ dispatcherservlet æ ¹æ®è·å¾ç handlerï¼éæ©ä¸ä¸ªåéç handleradapterã\n    * handleradapter å¸®å© dispatcherservlet è°ç¨æ å°å°è¯·æ±ç handlerï¼èä¸ç®¡å®éè°ç¨ handler çæ¹å¼å¦ä½ãä¾å¦ï¼è°ç¨å¸¦æ³¨è§£çæ§å¶å¨éè¦è§£ææ³¨è§£ãhandleradapter çä¸»è¦ç®çæ¯ä¿æ¤ dispatcherservlet ååæ­¤ç±»ç»èçå½±åã\n 4. handler å¤çè¯·æ±ï¼dispatcherservlet æå request ä¸­çæ¨¡åæ°æ®ï¼å¡«å handler å¥åï¼ç± handleradapter è´è´£è°ç¨ handlerï¼controller)ã å¨å¡«å handler çå¥åè¿ç¨ä¸­ï¼æ ¹æ®ä½ çéç½®ï¼spring å°å¸®ä½ åä¸äºé¢å¤çå·¥ä½ï¼\n    * httpmessageconverterï¼ å°è¯·æ±æ¶æ¯ï¼å¦ jsonãxml ç­æ°æ®ï¼è½¬æ¢æä¸ä¸ªå¯¹è±¡ï¼å°å¯¹è±¡è½¬æ¢ä¸ºæå®çååºä¿¡æ¯ã\n    * æ°æ®è½¬æ¢ï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®è½¬æ¢ãå¦ string è½¬æ¢æ integerãdoubleç­ã\n    * æ°æ®æ ¼å¼åï¼å¯¹è¯·æ±æ¶æ¯è¿è¡æ°æ®æ ¼å¼åã å¦å°å­ç¬¦ä¸²è½¬æ¢ææ ¼å¼åæ°å­ææ ¼å¼åæ¥æç­ã\n    * æ°æ®éªè¯ï¼ éªè¯æ°æ®çæææ§ï¼é¿åº¦ãæ ¼å¼ç­ï¼ï¼éªè¯ç»æå­å¨å° bindingresult æ error ä¸­ã\n 5. è¿å modelandview å¯¹è±¡ï¼handler å¤çå®è¯·æ±åï¼ä¼è¿åä¸ä¸ª modelandview å¯¹è±¡ï¼å¶ä¸­åå«äºå¤çç»æï¼modelï¼åè§å¾ï¼viewï¼ä¿¡æ¯ã\n 6. éæ© viewresolver æ¸²æ modelandviewï¼æ ¹æ®è¿åç modelandviewï¼éæ©ä¸ä¸ªéåç viewresolverï¼å¹¶å° modelandview ä¼ éç» viewresolver è¿è¡æ¸²æï¼æåå°æ¸²æåçç»æè¿åç»å®¢æ·ç«¯ã\n\n# dispatcherservlet æºç è§£è¯»\n\nåé¢ä»ç»äº dispatcherservlet çå·¥ä½æµç¨ï¼ä¸é¢éè¿æ ¸å¿æºç è§£è¯»ï¼æ¥å æ·±å¯¹ dispatcherservlet å·¥ä½åçççè§£\n\nï¼1ï¼onrefresh æ¹æ³\n\n\t@override\n\tprotected void onrefresh(applicationcontext context) {\n\t\tinitstrategies(context);\n\t}\n\n\t/**\n\t * åå§åæ­¤ servlet ä½¿ç¨çç­ç¥å¯¹è±¡\n\t * å¯ä»¥å¨å­ç±»ä¸­éåä»¥åå§åæ´å¤ç­ç¥å¯¹è±¡\n\t */\n\tprotected void initstrategies(applicationcontext context) {\n\t\tinitmultipartresolver(context);\n\t\tinitlocaleresolver(context);\n\t\tinitthemeresolver(context);\n\t\tinithandlermappings(context);\n\t\tinithandleradapters(context);\n\t\tinithandlerexceptionresolvers(context);\n\t\tinitrequesttoviewnametranslator(context);\n\t\tinitviewresolvers(context);\n\t\tinitflashmapmanager(context);\n\t}\n\n\nï¼2ï¼doservice æ¹æ³\n\ndispatcherservlet çæ ¸å¿æ¹æ³ doservice æºç å¦ä¸ï¼\n\n\t@override\n\tprotected void doservice(httpservletrequest request, httpservletresponse response) throws exception {\n\t\tlogrequest(request);\n\n\t\t// å¨åå«çæåµä¸ä¿çè¯·æ±å±æ§çå¿«ç§ï¼ä»¥ä¾¿è½å¤å¨åå«åæ¢å¤åå§å±æ§\n\t\tmap<string, object> attributessnapshot = null;\n\t\tif (webutils.isincluderequest(request)) {\n\t\t\tattributessnapshot = new hashmap<>();\n\t\t\tenumeration<?> attrnames = request.getattributenames();\n\t\t\twhile (attrnames.hasmoreelements()) {\n\t\t\t\tstring attrname = (string) attrnames.nextelement();\n\t\t\t\tif (this.cleanupafterinclude || attrname.startswith(default_strategies_prefix)) {\n\t\t\t\t\tattributessnapshot.put(attrname, request.getattribute(attrname));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// è®¾ç½®è¯·æ±å±æ§ï¼ç»å®åç§ resolverï¼ï¼ä½¿æ¡æ¶å¯¹è±¡å¯ç¨äºå¤çç¨åºåè§å¾å¯¹è±¡\n\t\trequest.setattribute(web_application_context_attribute, getwebapplicationcontext());\n\t\trequest.setattribute(locale_resolver_attribute, this.localeresolver);\n\t\trequest.setattribute(theme_resolver_attribute, this.themeresolver);\n\t\trequest.setattribute(theme_source_attribute, getthemesource());\n\n\t\tif (this.flashmapmanager != null) {\n\t\t\tflashmap inputflashmap = this.flashmapmanager.retrieveandupdate(request, response);\n\t\t\tif (inputflashmap != null) {\n\t\t\t\trequest.setattribute(input_flash_map_attribute, collections.unmodifiablemap(inputflashmap));\n\t\t\t}\n\t\t\trequest.setattribute(output_flash_map_attribute, new flashmap());\n\t\t\trequest.setattribute(flash_map_manager_attribute, this.flashmapmanager);\n\t\t}\n\n\t\trequestpath previousrequestpath = null;\n\t\tif (this.parserequestpath) {\n\t\t\tpreviousrequestpath = (requestpath) request.getattribute(servletrequestpathutils.path_attribute);\n\t\t\tservletrequestpathutils.parseandcache(request);\n\t\t}\n\n\t\ttry {\n            // è¯·æ±åå\n\t\t\tdodispatch(request, response);\n\t\t}\n\t\tfinally {\n\t\t\tif (!webasyncutils.getasyncmanager(request).isconcurrenthandlingstarted()) {\n\t\t\t\t// æ¢å¤åå§å±æ§å¿«ç§ï¼ä»¥é²åå«\n\t\t\t\tif (attributessnapshot != null) {\n\t\t\t\t\trestoreattributesafterinclude(request, attributessnapshot);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.parserequestpath) {\n\t\t\t\tservletrequestpathutils.setparsedrequestpath(previousrequestpath, request);\n\t\t\t}\n\t\t}\n\t}\n\n\nï¼3ï¼dodispatch æ¹æ³\n\ndoservice ä¸­çæ ¸å¿æ¹æ³æ¯ dodispatchï¼è´è´£ååè¯·æ±ã\n\nprotected void dodispatch(httpservletrequest request, httpservletresponse response) throws exception {\n   httpservletrequest processedrequest = request;\n   handlerexecutionchain mappedhandler = null;\n   boolean multipartrequestparsed = false;\n\n   webasyncmanager asyncmanager = webasyncutils.getasyncmanager(request);\n\n   try {\n      modelandview mv = null;\n      exception dispatchexception = null;\n\n      try {\n         // æ£æ¥æ¯å¦ä¸ºmultipartè¯·æ±ï¼å¦ææ¯ï¼åè§£æåæ°\n         processedrequest = checkmultipart(request);\n         multipartrequestparsed = (processedrequest != request);\n\n         // ç¡®å®ééå½åè¯·æ±ç handler\n         mappedhandler = gethandler(processedrequest);\n         if (mappedhandler == null) {\n            nohandlerfound(processedrequest, response);\n            return;\n         }\n\n         // ç¡®å®ééå½åè¯·æ±ç handleradapter\n         handleradapter ha = gethandleradapter(mappedhandler.gethandler());\n\n         // å¦æ handler æ¯æï¼åå¤ç last-modified å¤´\n         string method = request.getmethod();\n         boolean isget = httpmethod.get.matches(method);\n         if (isget || httpmethod.head.matches(method)) {\n            long lastmodified = ha.getlastmodified(request, mappedhandler.gethandler());\n            if (new servletwebrequest(request, response).checknotmodified(lastmodified) && isget) {\n               return;\n            }\n         }\n\n         // è¯·æ±çåç½®å¤ç\n         if (!mappedhandler.applyprehandle(processedrequest, response)) {\n            return;\n         }\n\n         // è°ç¨å®éç handler å¤çè¯·æ±å¹¶è¿å modelandviewï¼æå¯è½ä¸º nullï¼\n         mv = ha.handle(processedrequest, response, mappedhandler.gethandler());\n\n         if (asyncmanager.isconcurrenthandlingstarted()) {\n            return;\n         }\n\n         applydefaultviewname(processedrequest, mv);\n         // è¯·æ±çåç½®å¤ç\n         mappedhandler.applyposthandle(processedrequest, response, mv);\n      }\n      catch (exception ex) {\n         dispatchexception = ex;\n      }\n      catch (throwable err) {\n         // as of 4.3, we\'re processing errors thrown from handler methods as well,\n         // making them available for @exceptionhandler methods and other scenarios.\n         dispatchexception = new nestedservletexception("handler dispatch failed", err);\n      }\n       // å¤çååºç»æ\n      processdispatchresult(processedrequest, response, mappedhandler, mv, dispatchexception);\n   }\n   catch (exception ex) {\n      triggeraftercompletion(processedrequest, response, mappedhandler, ex);\n   }\n   catch (throwable err) {\n      triggeraftercompletion(processedrequest, response, mappedhandler,\n            new nestedservletexception("handler processing failed", err));\n   }\n   finally {\n      if (asyncmanager.isconcurrenthandlingstarted()) {\n         // æ¿ä»£ posthandle å aftercompletion\n         if (mappedhandler != null) {\n            mappedhandler.applyafterconcurrenthandlingstarted(processedrequest, response);\n         }\n      }\n      else {\n         // æ¸ç multipart è¯·æ±æä½¿ç¨çèµæº\n         if (multipartrequestparsed) {\n            cleanupmultipart(processedrequest);\n         }\n      }\n   }\n}\n\n\n# ä¸ä¸æå±æ¬¡ç»æ\n\ndispatcherservlet éè¦ä¸ä¸ª webapplicationcontextï¼applicationcontext çæ©å±ç±»ï¼ç¨äºå®èªå·±çéç½®ãwebapplicationcontext æä¸ä¸ªæå servletcontext åä¸ä¹å³èç servlet çé¾æ¥ãå®è¿ç»å®å° servletcontextï¼ä»¥ä¾¿åºç¨ç¨åºå¯ä»¥å¨ requestcontextutils ä¸ä½¿ç¨éææ¹æ³æ¥æ¥æ¾ webapplicationcontextã\n\nå¯¹äºå¤æ°åºç¨ç¨åºæ¥è¯´ï¼æ¥æä¸ä¸ª webapplicationcontext åä¾å°±è¶³å¤ãä¹å¯ä»¥æä¸ä¸ªä¸ä¸æå±æ¬¡ç»æï¼å¶ä¸­æä¸ä¸ªæ ¹ webapplicationcontext å¨å¤ä¸ª dispatcherservletï¼æå¶ä» servletï¼å®ä¾ä¹é´å±äº«ï¼æ¯ä¸ªå®ä¾é½æèªå·±çå­ webapplicationcontext éç½®ã\n\næ ¹ webapplicationcontext éå¸¸åå«åºç¡ç»æ beanï¼ä¾å¦éè¦è·¨å¤ä¸ª servlet å®ä¾å±äº«çæ°æ®å­å¨åä¸å¡æå¡ãè¿äº bean æ¯ææç»§æ¿çï¼å¹¶ä¸å¯ä»¥å¨ç¹å® servlet çå­ webapplicationcontext ä¸­è¢«è¦çï¼å³éæ°å£°æï¼ï¼å®éå¸¸åå«æå® servlet çæ¬å° beanãä¸å¾æ¾ç¤ºäºè¿ç§å³ç³»ï¼\n\n\n\nãç¤ºä¾ãéç½® webapplicationcontext å±æ¬¡ç»æï¼\n\npublic class mywebappinitializer extends abstractannotationconfigdispatcherservletinitializer {\n\n    @override\n    protected class<?>[] getrootconfigclasses() {\n        return new class<?>[] { rootconfig.class };\n    }\n\n    @override\n    protected class<?>[] getservletconfigclasses() {\n        return new class<?>[] { app1config.class };\n    }\n\n    @override\n    protected string[] getservletmappings() {\n        return new string[] { "/app1/*" };\n    }\n}\n\n\nãç¤ºä¾ãweb.xml æ¹å¼éç½® webapplicationcontext å±æ¬¡ç»æï¼\n\n<web-app>\n\n    <listener>\n        <listener-class>org.springframework.web.context.contextloaderlistener</listener-class>\n    </listener>\n\n    <context-param>\n        <param-name>contextconfiglocation</param-name>\n        <param-value>/web-inf/root-context.xml</param-value>\n    </context-param>\n\n    <servlet>\n        <servlet-name>app1</servlet-name>\n        <servlet-class>org.springframework.web.servlet.dispatcherservlet</servlet-class>\n        <init-param>\n            <param-name>contextconfiglocation</param-name>\n            <param-value>/web-inf/app1-context.xml</param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n\n    <servlet-mapping>\n        <servlet-name>app1</servlet-name>\n        <url-pattern>/app1/*</url-pattern>\n    </servlet-mapping>\n\n</web-app>\n\n\n\n# éç½®\n\ndispatcherservlet ä¸å¶ä» servlet ä¸æ ·ï¼éè¦ä½¿ç¨ java éç½®æå¨ web.xml ä¸­æ ¹æ® servlet è§èè¿è¡å£°æåæ å°ãä¹å°±æ¯è¯´ï¼dispatcherservlet ä½¿ç¨ spring éç½®æ¥åç°è¯·æ±æ å°ãè§å¾è§£æãå¼å¸¸å¤çç­æéçå§æç»ä»¶ã\n\nå¯ä»¥éè¿å° servlet åå§ååæ°ï¼init-param åç´ ï¼æ·»å å° web.xml æä»¶ä¸­ç servlet å£°ææ¥èªå®ä¹åä¸ª dispatcherservlet å®ä¾ãä¸è¡¨ååºäºæ¯æçåæ°ï¼\n\nåæ°                               è¯´æ\ncontextclass                     å®ç° configurablewebapplicationcontext çç±»ï¼å°ç±æ­¤ servlet\n                                 å®ä¾ååæ¬å°éç½®ãé»è®¤æåµä¸ï¼ä½¿ç¨ xmlwebapplicationcontextã\ncontextconfiglocation            ä¼ éç»ä¸ä¸æå®ä¾ï¼ç± contextclass\n                                 æå®ï¼ä»¥æç¤ºå¯ä»¥å¨ä½å¤æ¾å°ä¸ä¸æçå­ç¬¦ä¸²ãè¯¥å­ç¬¦ä¸²å¯è½åå«å¤ä¸ªå­ç¬¦ä¸²ï¼ä½¿ç¨éå·ä½ä¸ºåéç¬¦ï¼ä»¥æ¯æå¤ä¸ªä¸ä¸æãå¨å·æä¸¤æ¬¡å®ä¹ç\n                                 bean çå¤ä¸ªä¸ä¸æä½ç½®çæåµä¸ï¼ææ°çä½ç½®ä¼åã\nnamespace                        webapplicationcontext çå½åç©ºé´ãé»è®¤ä¸º [servlet-name]-servletã\nthrowexceptionifnohandlerfound   å½æ¾ä¸å°è¯·æ±çå¤çç¨åºæ¶æ¯å¦æåº nohandlerfoundexceptionãç¶åå¯ä»¥ä½¿ç¨\n                                 handlerexceptionresolverï¼ä¾å¦ï¼éè¿ä½¿ç¨ @exceptionhandler\n                                 æ§å¶å¨æ¹æ³ï¼æè·å¼å¸¸å¹¶åå¶ä»ä»»ä½æ¹æ³ä¸æ ·å¤çãé»è®¤æåµä¸ï¼å®è®¾ç½®ä¸º\n                                 falseï¼å¨è¿ç§æåµä¸ï¼dispatcherservlet è®¾ç½®ååºç¶æä¸º 404 (not_found)\n                                 èä¸ä¼å¼åå¼å¸¸ãè¯·æ³¨æï¼å¦æ [é»è®¤ servlet\n                                 å¤ç](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc\n                                 -default-servlet-handler) ä¹è¢«éç½®ï¼æªè§£å³çè¯·æ±æ»æ¯è½¬åå°é»è®¤ç servlet\n                                 å¹¶ä¸æ°¸è¿ä¸ä¼å¼å 404ã\n\nåºç¨ç¨åºå¯ä»¥å£°æå¤çè¯·æ±æéçç¹æ® bean ç±»åä¸­ååºçåºç¡ç»æ beanãdispatcherservlet æ£æ¥æ¯ä¸ªç¹æ® bean ç webapplicationcontextãå¦ææ²¡æå¹éç bean ç±»åï¼å®å°åéå° dispatcherservlet.properties ä¸­ååºçé»è®¤ç±»åã\n\nå¨å¤§å¤æ°æåµä¸ï¼mvc éç½®æ¯æå¥½çèµ·ç¹ãå®ä»¥ java æ xml å£°ææéç beanï¼å¹¶æä¾æ´é«çº§å«çéç½®åè° api æ¥å¯¹å¶è¿è¡èªå®ä¹ã\n\n> æ³¨æï¼spring boot ä¾èµäº mvc java éç½®æ¥éç½® spring mvcï¼å¹¶æä¾äºè®¸å¤é¢å¤çæ¹ä¾¿éé¡¹ã\n\nå¨ servlet ç¯å¢ä¸­ï¼æ¨å¯ä»¥éæ©ä»¥ç¼ç¨æ¹å¼éç½® servlet å®¹å¨ä½ä¸ºæ¿ä»£æ¹æ¡æä¸ web.xml æä»¶ç»åä½¿ç¨ã\n\nimport org.springframework.web.webapplicationinitializer;\n\npublic class mywebapplicationinitializer implements webapplicationinitializer {\n\n    @override\n    public void onstartup(servletcontext container) {\n        xmlwebapplicationcontext appcontext = new xmlwebapplicationcontext();\n        appcontext.setconfiglocation("/web-inf/spring/dispatcher-config.xml");\n\n        servletregistration.dynamic registration = container.addservlet("dispatcher", new dispatcherservlet(appcontext));\n        registration.setloadonstartup(1);\n        registration.addmapping("/");\n    }\n}\n\n\nwebapplicationinitializer æ¯ spring mvc æä¾çæ¥å£ï¼å¯ç¡®ä¿æ£æµå°èªå®ä¹çå®ç°å¹¶èªå¨ç¨äºåå§åä»»ä½ servlet 3 å®¹å¨ãåä¸º abstractdispatcherservletinitializer ç webapplicationinitializer çæ½è±¡åºç±»å®ç°éè¿è¦çæ¹æ³æ¥æå® servlet æ å°å dispatcherservlet éç½®çä½ç½®ï¼ä½¿å¾æ³¨å dispatcherservlet åå¾æ´å å®¹æã\n\nå¯¹äºä½¿ç¨åºäº java ç spring éç½®çåºç¨ç¨åºï¼å»ºè®®è¿æ ·åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class mywebappinitializer extends abstractannotationconfigdispatcherservletinitializer {\n\n    @override\n    protected class<?>[] getrootconfigclasses() {\n        return null;\n    }\n\n    @override\n    protected class<?>[] getservletconfigclasses() {\n        return new class<?>[] { mywebconfig.class };\n    }\n\n    @override\n    protected string[] getservletmappings() {\n        return new string[] { "/" };\n    }\n}\n\n\nå¦æä½¿ç¨åºäº xml ç spring éç½®ï¼ååºç´æ¥ä» abstractdispatcherservletinitializer æ©å±ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class mywebappinitializer extends abstractdispatcherservletinitializer {\n\n    @override\n    protected webapplicationcontext createrootapplicationcontext() {\n        return null;\n    }\n\n    @override\n    protected webapplicationcontext createservletapplicationcontext() {\n        xmlwebapplicationcontext cxt = new xmlwebapplicationcontext();\n        cxt.setconfiglocation("/web-inf/spring/dispatcher-config.xml");\n        return cxt;\n    }\n\n    @override\n    protected string[] getservletmappings() {\n        return new string[] { "/" };\n    }\n}\n\n\nabstractdispatcherservletinitializer è¿æä¾äºä¸ç§æ¹ä¾¿çæ¹æ³æ¥æ·»å  filter å®ä¾å¹¶å°å®ä»¬èªå¨æ å°å° dispatcherservletï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class mywebappinitializer extends abstractdispatcherservletinitializer {\n\n    // ...\n\n    @override\n    protected filter[] getservletfilters() {\n        return new filter[] {\n            new hiddenhttpmethodfilter(), new characterencodingfilter() };\n    }\n}\n\n\næ¯ä¸ªè¿æ»¤å¨é½æ ¹æ®å¶å·ä½ç±»åæ·»å ä¸ä¸ªé»è®¤åç§°ï¼å¹¶èªå¨æ å°å° dispatcherservletã\n\nabstractdispatcherservletinitializer ç isasyncsupported ä¿æ¤æ¹æ³æä¾äºä¸ä¸ªåç¬çä½ç½®æ¥å¯ç¨ dispatcherservlet åæ å°å°å®çææè¿æ»¤å¨çå¼æ­¥æ¯æãé»è®¤æåµä¸ï¼æ­¤æ å¿è®¾ç½®ä¸º trueã\n\næåï¼å¦æéè¦è¿ä¸æ­¥èªå®ä¹ dispatcherservlet æ¬èº«ï¼å¯ä»¥éå createdispatcherservlet æ¹æ³ã\n\nãç¤ºä¾ãjava æ¹å¼æ³¨åå¹¶åå§å dispatcherservletï¼å®ç± servlet å®¹å¨èªå¨æ£æµï¼è¯·åé servlet configï¼ï¼\n\npublic class mywebapplicationinitializer implements webapplicationinitializer {\n\n    @override\n    public void onstartup(servletcontext servletcontext) {\n\n        // load spring web application configuration\n        annotationconfigwebapplicationcontext context = new annotationconfigwebapplicationcontext();\n        context.register(appconfig.class);\n\n        // create and register the dispatcherservlet\n        dispatcherservlet servlet = new dispatcherservlet(context);\n        servletregistration.dynamic registration = servletcontext.addservlet("app", servlet);\n        registration.setloadonstartup(1);\n        registration.addmapping("/app/*");\n    }\n}\n\n\nãç¤ºä¾ãweb.xml æ¹å¼æ³¨åå¹¶åå§å dispatcherservlet\n\n<web-app>\n\n    <listener>\n        <listener-class>org.springframework.web.context.contextloaderlistener</listener-class>\n    </listener>\n\n    <context-param>\n        <param-name>contextconfiglocation</param-name>\n        <param-value>/web-inf/app-context.xml</param-value>\n    </context-param>\n\n    <servlet>\n        <servlet-name>app</servlet-name>\n        <servlet-class>org.springframework.web.servlet.dispatcherservlet</servlet-class>\n        <init-param>\n            <param-name>contextconfiglocation</param-name>\n            <param-value></param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n\n    <servlet-mapping>\n        <servlet-name>app</servlet-name>\n        <url-pattern>/app/*</url-pattern>\n    </servlet-mapping>\n\n</web-app>\n\n\n\n# è·¯å¾å¹é\n\nservlet api å°å®æ´çè¯·æ±è·¯å¾å¬å¼ä¸º requesturiï¼å¹¶å°å¶è¿ä¸æ­¥ç»åä¸º contextpathãservletpath å pathinfoï¼å®ä»¬çå¼å  servlet çæ å°æ¹å¼èå¼ãä»è¿äºè¾å¥ä¸­ï¼spring mvc éè¦ç¡®å®ç¨äºæ å°å¤çç¨åºçæ¥æ¾è·¯å¾ï¼å¦æéç¨ï¼å®åºè¯¥æé¤ contextpath åä»»ä½ servletmapping åç¼ã\n\nservletpath å pathinfo å·²è§£ç ï¼è¿ä½¿å¾å®ä»¬æ æ³ç´æ¥ä¸å®æ´ç requesturi è¿è¡æ¯è¾ä»¥æ´¾ç lookuppathï¼å æ­¤æå¿è¦å¯¹ requesturi è¿è¡è§£ç ãç¶èï¼è¿å¼å¥äºå®èªå·±çé®é¢ï¼å ä¸ºè·¯å¾å¯è½åå«ç¼ç çä¿çå­ç¬¦ï¼ä¾å¦ "/" æ ";" è¿åè¿æ¥åä¼å¨è§£ç åæ¹åè·¯å¾çç»æï¼è¿ä¹å¯è½å¯¼è´å®å¨é®é¢ãæ­¤å¤ï¼servlet å®¹å¨å¯è½ä¼å¨ä¸åç¨åº¦ä¸è§èå servletpathï¼è¿ä½¿å¾è¿ä¸æ­¥æ æ³å¯¹ requesturi æ§è¡ startswith æ¯è¾ã\n\nè¿å°±æ¯ä¸ºä»ä¹æå¥½é¿åä¾èµåºäºåç¼ç servletpath æ å°ç±»åéå¸¦ç servletpathãå¦æ dispatcherservlet è¢«æ å°ä¸ºå¸¦æ "/" çé»è®¤ servletï¼æèæ²¡æå¸¦ "/*" çåç¼ï¼å¹¶ä¸ servlet å®¹å¨æ¯ 4.0+ï¼å spring mvc è½å¤æ£æµ servlet æ å°ç±»åï¼å¹¶é¿åä½¿ç¨ servletpath å pathinfoãå¨ 3.1 servlet å®¹å¨ä¸ï¼åè®¾ç¸åç servlet æ å°ç±»åï¼å¯ä»¥éè¿å¨ mvc éç½®ä¸­éè¿è·¯å¾å¹éæä¾ä¸ä¸ªå¸¦æ alwaysusefullpath=true ç urlpathhelper æ¥å®ç°ç­æã\n\nå¹¸è¿çæ¯ï¼é»è®¤ç servlet æ å° "/" æ¯ä¸ä¸ªä¸éçéæ©ãä½æ¯ï¼ä»ç¶å­å¨ä¸ä¸ªé®é¢ï¼å³éè¦å¯¹ requesturi è¿è¡è§£ç æè½ä¸æ§å¶å¨æ å°è¿è¡æ¯è¾ãè¿ä¹æ¯ä¸å¯åçï¼å ä¸ºå¯è½ä¼è§£ç æ¹åè·¯å¾ç»æçä¿çå­ãå¦æä¸éè¦è¿æ ·çå­ç¬¦ï¼é£ä¹æ¨å¯ä»¥æç»å®ä»¬ï¼å¦ spring security http é²ç«å¢ï¼ï¼æèæ¨å¯ä»¥ä½¿ç¨ urldecode=false éç½® urlpathhelperï¼ä½æ§å¶å¨æ å°éè¦ä¸ç¼ç è·¯å¾å¹éï¼è¿å¯è½å¹¶ä¸æ»æ¯ææãæ­¤å¤ï¼ææ¶ dispatcherservlet éè¦ä¸å¦ä¸ä¸ª servlet å±äº« url ç©ºé´ï¼å¹¶ä¸å¯è½éè¦éè¿åç¼è¿è¡æ å°ã\n\nå¨ä½¿ç¨ pathpatternparser åè§£ææ¨¡å¼æ¶è§£å³äºä¸è¿°é®é¢ï¼ä½ä¸ºä½¿ç¨ antpathmatcher è¿è¡å­ç¬¦ä¸²è·¯å¾å¹éçæ¿ä»£æ¹æ³ãpathpatternparser ä» 5.3 çæ¬å¼å§å°±å¯ä»¥å¨ spring mvc ä¸­ä½¿ç¨ï¼å¹¶ä¸ä» 6.0 çæ¬å¼å§é»è®¤å¯ç¨ãä¸éè¦è§£ç æ¥æ¾è·¯å¾æç¼ç æ§å¶å¨æ å°ç antpathmatcher ä¸åï¼è§£æç pathpattern ä¸ç§°ä¸º requestpath çè·¯å¾çè§£æè¡¨ç¤ºå¹éï¼ä¸æ¬¡ä¸ä¸ªè·¯å¾æ®µãè¿åè®¸åç¬è§£ç åæ¸çè·¯å¾æ®µå¼ï¼èæ²¡ææ¹åè·¯å¾ç»æçé£é©ãè§£æç pathpattern ä¹æ¯æä½¿ç¨ servletpath åç¼æ å°ï¼åªè¦ä½¿ç¨ servlet è·¯å¾æ å°å¹¶ä¸åç¼ä¿æç®åï¼å³å®æ²¡æç¼ç å­ç¬¦ã\n\n\n# æ¦æªå¨\n\nææ handlermapping å®ç°é½æ¯æå¤çæ¦æªå¨ï¼å½æ³è¦å°ç¹å®åè½åºç¨äºæäºè¯·æ±æ¶ï¼è¿äºæ¦æªå¨å¾æç¨ââä¾å¦ï¼æ£æ¥ä¸»ä½ãæ¦æªå¨å¿é¡»ä½¿ç¨ org.springframework.web.servlet åä¸­çä¸ä¸ªæ¹æ³å®ç° handlerinterceptorï¼è¿ä¸ä¸ªæ¹æ³åºè¯¥æä¾è¶³å¤ççµæ´»æ§æ¥è¿è¡åç§é¢å¤çååå¤çï¼\n\n * prehandle(..)ï¼å¨å®é handler ä¹åæ§è¡\n * posthandle(..)ï¼handler ä¹åæ§è¡\n * aftercompletion(..)ï¼å®æè¯·æ±åæ§è¡\n\nprehandle(..) æ¹æ³è¿åä¸ä¸ªå¸å°å¼ãå¯ä»¥ä½¿ç¨æ­¤æ¹æ³ä¸­æ­æç»§ç»­æ§è¡é¾çå¤çãå½æ­¤æ¹æ³è¿å true æ¶ï¼å¤çç¨åºæ§è¡é¾å°ç»§ç»­ãå½å®è¿å false æ¶ï¼dispatcherservlet åå®æ¦æªå¨æ¬èº«å·²ç»å¤çè¯·æ±ï¼å¹¶ä¸ï¼ä¾å¦ï¼åç°éå½çè§å¾ï¼å¹¶ä¸ä¸ä¼ç»§ç»­æ§è¡å¶ä»æ¦æªå¨åæ§è¡é¾ä¸­çå®éå¤çç¨åºã\n\næå³å¦ä½éç½®æ¦æªå¨çç¤ºä¾ï¼è¯·åé mvc éç½®é¨åä¸­çæ¦æªå¨ãè¿å¯ä»¥éè¿å¨åä¸ª handlermapping å®ç°ä¸ä½¿ç¨ setter æ¥ç´æ¥æ³¨åå®ä»¬ã\n\nposthandle æ¹æ³å¯¹äº @responsebody å responseentity çæ¹æ³ä¸å¤ªæç¨ï¼å®ä»¬çååºæ¯å¨ handleradapter ä¸­å posthandle ä¹åç¼ååæäº¤çãè¿æå³çå¯¹ååºè¿è¡ä»»ä½æ´æ¹é½ä¸ºæ¶å·²æï¼ä¾å¦æ·»å é¢å¤çæ å¤´ãå¯¹äºæ­¤ç±»åºæ¯ï¼æ¨å¯ä»¥å®ç° responsebodyadvice å¹¶å°å¶å£°æä¸º controller advice bean æç´æ¥å¨ requestmappinghandleradapter ä¸è¿è¡éç½®ã\n\n\n# è§£æå¨\n\ndispatcherservlet ä¼å è½½å¤ç§è§£æå¨æ¥å¤çè¯·æ±ï¼æ¯è¾å¸¸è§çæä»¥ä¸å ä¸ªï¼\n\n * handlerexceptionresolver - è§£å³å¼å¸¸çç­ç¥ï¼å¯è½å°å®ä»¬æ å°å°å¤çç¨åºãhtml éè¯¯è§å¾æå¶ä»ç®æ ã\n * viewresolver - å°ä»å¤çç¨åºè¿åçåºäºå­ç¬¦ä¸²çé»è¾è§å¾åç§°è§£æä¸ºç¨äºåç°ååºçå®éè§å¾ã\n * localeresolver, localecontextresolver - è§£æç¨æ·æ­£å¨ä½¿ç¨çæ¬å°åè®¾ç½®ï¼å¯è½è¿æä»ä»¬çæ¶åºï¼ä»¥ä¾¿è½å¤æä¾å½éåçè§å¾ã\n * themeresolver - è§£æ web åºç¨ç¨åºå¯ä»¥ä½¿ç¨çä¸»é¢ââä¾å¦ï¼æä¾ä¸ªæ§åå¸å±ã\n * multipartresolver - éè¿ä¸äº multipart è§£æåºçå¸®å©è§£æ multipart è¯·æ±ï¼ä¾å¦ï¼éè¿æµè§å¨ä¸ä¼ æä»¶ï¼ã\n\n\n# handlerexceptionresolver\n\nå¨ webapplicationcontext ä¸­å£°æç handlerexceptionresolver ç¨äºè§£å³è¯·æ±å¤çæé´æåºçå¼å¸¸ãè¿äºå¼å¸¸è§£æå¨åè®¸èªå®ä¹é»è¾æ¥è§£å³å¼å¸¸ã\n\nå¯¹äº http ç¼å­æ¯æï¼å¤çç¨åºå¯ä»¥ä½¿ç¨ webrequest ç checknotmodified æ¹æ³ï¼ä»¥åç¨äºæ§å¶å¨ç http ç¼å­ä¸­æè¿°çå¸¦æ³¨éæ§å¶å¨çæ´å¤éé¡¹ã\n\nå¦æå¨è¯·æ±æ å°æé´åçå¼å¸¸æä»è¯·æ±å¤çç¨åºï¼ä¾å¦ @controllerï¼æåºå¼å¸¸ï¼å dispatcherservlet å§æ handlerexceptionresolver é¾æ¥è§£å³å¼å¸¸å¹¶æä¾æ¿ä»£å¤çï¼è¿éå¸¸æ¯éè¯¯ååºã\n\nä¸è¡¨ååºäºå¯ç¨ç handlerexceptionresolver å®ç°ï¼\n\nhandlerexceptionresolver            è¯´æ\nsimplemappingexceptionresolver      å¼å¸¸ç±»åç§°åéè¯¯è§å¾åç§°ä¹é´çæ å°ãç¨äºå¨æµè§å¨åºç¨ç¨åºä¸­åç°éè¯¯é¡µé¢ã\ndefaulthandlerexceptionresolver     è§£å³ç± spring mvc å¼åçå¼å¸¸å¹¶å°å®ä»¬æ å°å° http ç¶æä»£ç ã\nresponsestatusexceptionresolver     ä½¿ç¨ @responsestatus æ³¨è§£è§£å³å¼å¸¸ï¼å¹¶æ ¹æ®æ³¨è§£ä¸­çå¼å°å®ä»¬æ å°å° http ç¶æä»£ç ã\nexceptionhandlerexceptionresolver   éè¿å¨ @controller æ @controlleradvice ç±»ä¸­è°ç¨ @exceptionhandler\n                                    æ¹æ³æ¥è§£å³å¼å¸¸ã\n\n# è§£æå¨é¾\n\næ¨å¯ä»¥éè¿å¨ spring éç½®ä¸­å£°æå¤ä¸ª handlerexceptionresolver bean å¹¶æ ¹æ®éè¦è®¾ç½®å®ä»¬çé¡ºåºå±æ§æ¥ææå¼å¸¸è§£æå¨é¾ãorder å±æ§è¶é«ï¼å¼å¸¸è§£æå¨çä½ç½®å°±è¶é åã\n\nhandlerexceptionresolver ççº¦å®ä½¿å®å¯ä»¥è¿åä»¥ä¸åå®¹ï¼\n\n * æåéè¯¯è§å¾ç modelandviewã\n\n * å¦æå¼å¸¸æ¯å¨è§£æå¨ä¸­å¤ççï¼åä¸ºç©ºç modelandviewã\n\n * å¦æå¼å¸¸ä»æªè§£å³ï¼åä¸º nullï¼ä¾åç»­è§£æå¨å°è¯ï¼å¦æå¼å¸¸ä»ç¶å­å¨ï¼ååè®¸åä¸åæ³¡å° servlet å®¹å¨ã\n\nmvc config èªå¨ä¸ºé»è®¤ç spring mvc å¼å¸¸ã@responsestatus æ³¨éçå¼å¸¸åå¯¹ @exceptionhandler æ¹æ³çæ¯æå£°æåç½®è§£æå¨ãæ¨å¯ä»¥èªå®ä¹è¯¥åè¡¨ææ¿æ¢å®ã\n\n# éè¯¯é¡µé¢\n\nå¦æå¼å¸¸ä»æªè¢«ä»»ä½ handlerexceptionresolver å¤çå¹¶å æ­¤ç»§ç»­ä¼ æ­ï¼æèå¦æååºç¶æè®¾ç½®ä¸ºéè¯¯ç¶æï¼å³ 4xxã5xxï¼ï¼servlet å®¹å¨å¯ä»¥å¨ html ä¸­åç°é»è®¤éè¯¯é¡µé¢ãè¦èªå®ä¹å®¹å¨çé»è®¤éè¯¯é¡µé¢ï¼æ¨å¯ä»¥å¨ web.xml ä¸­å£°æä¸ä¸ªéè¯¯é¡µé¢æ å°ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n<error-page>\n    <location>/error</location>\n</error-page>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼å½åºç°å¼å¸¸æååºå·æéè¯¯ç¶ææ¶ï¼servlet å®¹å¨ä¼å¨å®¹å¨åå° error åæ´¾å°éç½®ç urlï¼ä¾å¦ï¼/errorï¼ãç¶åç± dispatcherservlet å¤çï¼å¯è½å°å¶æ å°å° @controllerï¼åèå¯ä»¥è¿åå¸¦ææ¨¡åçéè¯¯è§å¾åç§°æåç° json ååºï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@restcontroller\npublic class errorcontroller {\n\n    @requestmapping(path = "/error")\n    public map<string, object> handle(httpservletrequest request) {\n        map<string, object> map = new hashmap<string, object>();\n        map.put("status", request.getattribute("jakarta.servlet.error.status_code"));\n        map.put("reason", request.getattribute("jakarta.servlet.error.message"));\n        return map;\n    }\n}\n\n\n> æç¤ºï¼servlet api ä¸æä¾å¨ java ä¸­åå»ºéè¯¯é¡µé¢æ å°çæ¹æ³ãä½æ¯ï¼æ¨å¯ä»¥åæ¶ä½¿ç¨ webapplicationinitializer åæå°ç web.xmlã\n\n\n# viewresolver\n\nspring mvc å®ä¹äº viewresolver å view æ¥å£ï¼è®©ç¨æ·å¯ä»¥å¨æµè§å¨ä¸­æ¸²ææ¨¡åï¼èæ ééå®äºç¹å®çè§å¾ææ¯ãviewresolver æä¾è§å¾åç§°åå®éè§å¾ä¹é´çæ å°ãview è§£å³äºå¨ç§»äº¤ç»ç¹å®è§å¾ææ¯ä¹ååå¤æ°æ®çé®é¢ã\n\nä¸è¡¨æä¾äºæå³ viewresolver ä¸äºå­ç±»ï¼\n\nviewresolver                     description\nabstractcachingviewresolver      abstractcachingviewresolver\n                                 çå­ç±»ç¼å­å®ä»¬è§£æçè§å¾å®ä¾ãç¼å­æé«äºæäºè§å¾ææ¯çæ§è½ãæ¨å¯ä»¥éè¿å° cache å±æ§è®¾ç½®ä¸º false\n                                 æ¥å³é­ç¼å­ãæ­¤å¤ï¼å¦ææ¨å¿é¡»å¨è¿è¡æ¶å·æ°æä¸ªè§å¾ï¼ä¾å¦ï¼ä¿®æ¹ freemarker æ¨¡æ¿æ¶ï¼ï¼æ¨å¯ä»¥ä½¿ç¨\n                                 removefromcache(string viewname, locale loc) æ¹æ³ã\nurlbasedviewresolver             viewresolver æ¥å£çç®åå®ç°ï¼æ éæ¾å¼æ å°å®ä¹å³å¯å°é»è¾è§å¾åç§°ç´æ¥è§£æä¸º\n                                 urlãå¦ææ¨çé»è¾åç§°ä»¥ç´æ¥çæ¹å¼å¹éæ¨çè§å¾èµæºçåç§°ï¼èä¸éè¦ä»»ææ å°ï¼é£ä¹è¿æ¯åéçã\ninternalresourceviewresolver     urlbasedviewresolver çå­ç±»ï¼æ¯æ internalresourceviewï¼å®éä¸æ¯\n                                 servlet å jspï¼ä»¥å jstlview å tilesview ç­å­ç±»ãå¯ä»¥ä½¿ç¨\n                                 setviewclass(..) ä¸ºè¯¥è§£æå¨çæçææè§å¾æå®è§å¾ç±»ã\nfreemarkerviewresolver           urlbasedviewresolver çå­ç±»ï¼æ¯æ freemarkerview åå®ä»¬çèªå®ä¹å­ç±»ã\ncontentnegotiatingviewresolver   viewresolver æ¥å£çå®ç°ï¼è¯¥æ¥å£æ ¹æ®è¯·æ±æä»¶åæ accept æ å¤´è§£æè§å¾ã\nbeannameviewresolver             å°è§å¾åç§°è§£éä¸ºå½ååºç¨ç¨åºä¸ä¸æä¸­ç bean åç§°ç viewresolver\n                                 æ¥å£çå®ç°ãè¿æ¯ä¸ä¸ªéå¸¸çµæ´»çåä½ï¼åè®¸æ ¹æ®ä¸åçè§å¾åç§°æ··ååå¹éä¸åçè§å¾ç±»åãæ¯ä¸ªè¿æ ·çâè§å¾âé½å¯ä»¥å®ä¹ä¸ºä¸ä¸ª\n                                 beanï¼ä¾å¦ å¨ xml æéç½®ç±»ä¸­ã\n\n# å¤ç\n\nå¯ä»¥éè¿å£°æå¤ä¸ªè§£æå¨æ¥ææè§å¾è§£æå¨é¾ï¼å¦æéè¦ï¼è¿å¯ä»¥éè¿è®¾ç½® order å±æ§æ¥æå®é¡ºåºãé¡ºåºå±æ§è¶é«ï¼è§å¾è§£æå¨å¨é¾ä¸­çä½ç½®å°±è¶é åã\n\nviewresolver ççº¦å®æå®å®å¯ä»¥è¿å null ä»¥æç¤ºæ¾ä¸å°è§å¾ãä½æ¯ï¼å¯¹äº jsp å internalresourceviewresolverï¼ç¡®å® jsp æ¯å¦å­å¨çå¯ä¸æ¹æ³æ¯éè¿ requestdispatcher æ§è¡åæ´¾ãå æ­¤ï¼æ¨å¿é¡»å§ç»å° internalresourceviewresolver éç½®ä¸ºå¨è§å¾è§£æå¨çæ´ä½é¡ºåºä¸­æå¨æåã\n\néç½®è§å¾è§£æå°±åå° viewresolver æ·»å å° spring éç½®ä¸­ä¸æ ·ç®åãmvc config ä¸ºè§å¾è§£æå¨åæ·»å æ é»è¾è§å¾æ§å¶å¨æä¾äºä¸ç¨çéç½® apiï¼è¿å¯¹äºæ²¡ææ§å¶å¨é»è¾ç html æ¨¡æ¿æ¸²æå¾æç¨ã\n\n# éå®å\n\nè§å¾åç§°ä¸­çç¹æ®åç¼ redirect: å¯ä»¥å®ç°ä¸ä¸ªéå®åãurlbasedviewresolverï¼åå¶å­ç±»ï¼å°æ­¤è¯å«ä¸ºéè¦éå®åçæä»¤ãè§å¾åç§°çå¶ä½é¨åæ¯éå®å urlã\n\næç»ææä¸æ§å¶å¨è¿å redirectview ç¸åï¼ä½ç°å¨æ§å¶å¨æ¬èº«å¯ä»¥æ ¹æ®é»è¾è§å¾åç§°è¿è¡æä½ãé»è¾è§å¾åç§°ï¼ä¾å¦ redirect:/myapp/some/resourceï¼ç¸å¯¹äºå½å servlet ä¸ä¸æéå®åï¼èåç§°ï¼ä¾å¦ redirect:https://myhost.com/some/arbitrary/pathï¼éå®åå°ç»å¯¹ urlã\n\nè¯·æ³¨æï¼å¦æä½¿ç¨ @responsestatus æ³¨è§£æ è®°æ§å¶å¨æ¹æ³ï¼åæ³¨è§£å¼ä¼åäº redirectview è®¾ç½®çååºç¶æã\n\n# è½¬å\n\nè§å¾åç§°ä¸­çç¹æ®åç¼ forward: å¯ä»¥å®ç°ä¸ä¸ªè½¬åãè¿å°åå»ºä¸ä¸ª internalresourceviewï¼å®æ§è¡ requestdispatcher.forward()ãå æ­¤ï¼æ­¤åç¼å¯¹ internalresourceviewresolver å internalresourceviewï¼å¯¹äº jspï¼æ²¡æç¨ï¼ä½å¦ææ¨ä½¿ç¨å¦ä¸ç§è§å¾ææ¯ä½ä»æ³å¼ºå¶è½¬åç± servlet/jsp å¼æå¤ççèµæºï¼å®å¯è½ä¼ææå¸®å©ã\n\n# åå®¹åå\n\ncontentnegotiatingviewresolver æ¬èº«ä¸è§£æè§å¾ï¼èæ¯å§æç»å¶ä»è§å¾è§£æå¨å¹¶éæ©ç±»ä¼¼äºå®¢æ·ç«¯è¯·æ±çè¡¨ç¤ºçè§å¾ãå¯ä»¥ä» accept å¤´ææ¥è¯¢åæ°ï¼ä¾å¦ï¼"/path?format=pdf"ï¼ç¡®å®è¡¨ç¤ºå½¢å¼ã\n\ncontentnegotiatingviewresolver éè¿å°è¯·æ±åªä½ç±»åä¸å¶æ¯ä¸ª viewresolver å³èç view æ¯æçåªä½ç±»åï¼ä¹ç§°ä¸º content-typeï¼è¿è¡æ¯è¾ï¼æ¥éæ©åéç view æ¥å¤çè¯·æ±ãåè¡¨ä¸­ç¬¬ä¸ä¸ªå·æå¼å®¹ content-type çè§å¾å°å¤çç»æè¿åç»å®¢æ·ç«¯ãå¦æ viewresolver é¾æ æ³æä¾å¼å®¹çè§å¾ï¼åä¼æ¥ééè¿ defaultviews å±æ§æå®çè§å¾åè¡¨ãåä¸ä¸ªéé¡¹éç¨äºåä¾è§å¾ï¼å®å¯ä»¥åç°å½åèµæºçéå½è¡¨ç¤ºï¼èä¸ç®¡é»è¾è§å¾åç§°å¦ä½ãaccept æ å¤´å¯ä»¥åå«ééç¬¦ï¼ä¾å¦ text/*ï¼ï¼å¨è¿ç§æåµä¸ï¼content-type ä¸º text/xml ç view æ¯å¼å®¹çå¹éé¡¹ã\n\n\n# localeresolver\n\nå¤§é¨åç spring æ¶æé½æ¯æå½éåï¼å°±å spring web mvc æ¡æ¶æåçé£æ ·ãdispatcherservlet åè®¸æ¨ä½¿ç¨å®¢æ·ç«¯çè¯­è¨ç¯å¢èªå¨è§£ææ¶æ¯ãè¿æ¯éè¿ localeresolver å¯¹è±¡å®æçã\n\nå½æ¶å°è¯·æ±æ¶ï¼dispatcherservlet ä¼å¯»æ¾è¯­è¨ç¯å¢è§£æå¨ï¼å¦ææ¾å°ï¼å®ä¼å°è¯ä½¿ç¨å®æ¥è®¾ç½® locale ç¯å¢ãéè¿ä½¿ç¨ requestcontext.getlocale() æ¹æ³ï¼æ¨å§ç»å¯ä»¥æ£ç´¢ç± locale è§£æå¨è§£æçè¯­è¨ç¯å¢ã\n\né¤äºèªå¨è¯å« locale ç¯å¢ä¹å¤ï¼æ¨è¿å¯ä»¥ä¸º handle æ å°éå æ¦æªå¨ï¼å¨ç¹å®æåµä¸æ´æ¹ locale ç¯å¢è®¾ç½®ï¼ä¾å¦ï¼åºäºè¯·æ±ä¸­çåæ°ï¼ã\n\nlocale è§£æå¨åæ¦æªå¨å¨ org.springframework.web.servlet.i18n åä¸­å®ä¹ï¼å¹¶ä»¥æ­£å¸¸æ¹å¼å¨æ¨çåºç¨ç¨åºä¸ä¸æä¸­éç½®ãspring ä¸­æä»¥ä¸ locale è§£æå¨å¯ä¾éæ©ã\n\n * time zone\n * header resolver\n * cookie resolver\n * session resolver\n * locale interceptor\n\n# localeresolver\n\né¤äºè·åå®¢æ·ç«¯çåºåè®¾ç½®å¤ï¼äºè§£å¶æ¶åºéå¸¸ä¹å¾æç¨ãlocalecontextresolver æ¥å£æä¾äº localeresolver çæ©å±ï¼è®©è§£æå¨æä¾æ´ä¸°å¯ç localecontextï¼å¶ä¸­å¯è½åæ¬æ¶åºä¿¡æ¯ã\n\nå¦æå¯ç¨ï¼å¯ä»¥ä½¿ç¨ requestcontext.gettimezone() æ¹æ³è·åç¨æ·ç timezoneãå¨ spring ç conversionservice ä¸­æ³¨åçä»»ä½æ¥æ/æ¶é´ converter å formatter å¯¹è±¡ä¼èªå¨ä½¿ç¨æ¶åºä¿¡æ¯ã\n\n# æ å¤´è§£æå¨\n\næ­¤ locale è§£æå¨æ£æ¥å®¢æ·ç«¯ï¼ä¾å¦ç½ç»æµè§å¨ï¼åéçè¯·æ±ä¸­ç accept-language å¤´ãéå¸¸ï¼æ­¤å¤´å­æ®µåå«å®¢æ·ç«¯æä½ç³»ç»çåºåä¿¡æ¯ãè¯·æ³¨æï¼æ­¤è§£æå¨ä¸æ¯ææ¶åºä¿¡æ¯ã\n\n# cookielocaleresolver\n\nthis locale resolver inspects a cookie that might exist on the client to see if a locale or timezone is specified. if so, it uses the specified details. by using the properties of this locale resolver, you can specify the name of the cookie as well as the maximum age. the following example defines a cookielocaleresolver:\n\næ­¤ locale è§£æå¨æ£æ¥å®¢æ·ç«¯ä¸æ¯å¦å­å¨ cookieï¼ä»¥æ¥çæ¯å¦æå®äº locale æ timezoneãå¦ææ¯ï¼å®ä¼ä½¿ç¨æå®çè¯¦ç»ä¿¡æ¯ãéè¿ä½¿ç¨æ­¤ locale è§£æå¨çå±æ§ï¼å¯ä»¥æå® cookie çåç§°ä»¥åæé¿æéãä»¥ä¸ç¤ºä¾å®ä¹äº cookielocaleresolverï¼\n\n<bean id="localeresolver" class="org.springframework.web.servlet.i18n.cookielocaleresolver">\n\n    <property name="cookiename" value="clientlanguage"/>\n\n    \x3c!-- in seconds. if set to -1, the cookie is not persisted (deleted when browser shuts down) --\x3e\n    <property name="cookiemaxage" value="100000"/>\n\n</bean>\n\n\nä¸è¡¨æè¿°äº cookielocaleresolver çå±æ§ï¼\n\nå±æ§             é»è®¤å¼                         description\ncookiename     ç±»å + locale                 cookie å\ncookiemaxage   servlet container default   cookie å¨å®¢æ·ç«¯ä¸ä¿ççæé¿æ¶é´ãå¦ææå®äºâ-1âï¼åä¸ä¼ä¿ç cookieãå®ä»å¨å®¢æ·ç«¯å³é­æµè§å¨ä¹åå¯ç¨ã\ncookiepath     /                           å° cookie çå¯è§æ§éå¶å¨æ¨ç½ç«çç¹å®é¨åãå½æå® cookiepath æ¶ï¼cookie\n                                           ä»å¯¹è¯¥è·¯å¾åå¶ä¸æ¹çè·¯å¾å¯è§ã\n\n# sessionlocaleresolver\n\nsessionlocaleresolver åè®¸æ¨ä»å¯è½ä¸ç¨æ·è¯·æ±ç¸å³èçä¼è¯ä¸­æ£ç´¢ locale å timezoneãä¸ cookielocaleresolver ç¸æ¯ï¼æ­¤ç­ç¥å°æ¬å°éæ©ç locale è®¾ç½®å­å¨å¨ servlet å®¹å¨ç httpsession ä¸­ãå æ­¤ï¼è¿äºè®¾ç½®å¯¹äºæ¯ä¸ªä¼è¯é½æ¯ä¸´æ¶çï¼å æ­¤ä¼å¨æ¯ä¸ªä¼è¯ç»ææ¶ä¸¢å¤±ã\n\næ³¨æï¼è¿ä¸å¤é¨ä¼è¯ç®¡çæºå¶ï¼ä¾å¦ spring session é¡¹ç®ï¼æ²¡æç´æ¥å³ç³»ãæ­¤ sessionlocaleresolver æ ¹æ®å½å httpservletrequest è¯ä¼°åä¿®æ¹ç¸åºç httpsession å±æ§ã\n\n# localechangeinterceptor\n\nå¯ä»¥éè¿å° localechangeinterceptor æ·»å å°ä¸ä¸ª handlermapping å®ä¹æ¥å¯ç¨åºåè®¾ç½®æ´æ¹ãå®æ£æµè¯·æ±ä¸­çåæ°å¹¶ç¸åºå°æ´æ¹ locale ç¯å¢ï¼å¨è°åº¦ç¨åºçåºç¨ç¨åºä¸ä¸æä¸­è°ç¨ localeresolver ä¸ç setlocale æ¹æ³ãä¸é¢çç¤ºä¾æ¾ç¤ºè°ç¨ææåå«åä¸º sitelanguage çåæ°ç *.view èµæºï¼ä»¥æ´æ¹è¯­è¨ç¯å¢ãå æ­¤ï¼ä¾å¦ï¼å¯¹ url https://www.sf.net/home.view?sitelanguage=nl çè¯·æ±å°ç«ç¹è¯­è¨æ´æ¹ä¸ºè·å°è¯­ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ¦æªè¯­è¨ç¯å¢ï¼\n\n<bean id="localechangeinterceptor"\n        class="org.springframework.web.servlet.i18n.localechangeinterceptor">\n    <property name="paramname" value="sitelanguage"/>\n</bean>\n\n<bean id="localeresolver"\n        class="org.springframework.web.servlet.i18n.cookielocaleresolver"/>\n\n<bean id="urlmapping"\n        class="org.springframework.web.servlet.handler.simpleurlhandlermapping">\n    <property name="interceptors">\n        <list>\n            <ref bean="localechangeinterceptor"/>\n        </list>\n    </property>\n    <property name="mappings">\n        <value>/**/*.view=somecontroller</value>\n    </property>\n</bean>\n\n\n\n# themeresolver\n\næ¨å¯ä»¥åºç¨ spring web mvc æ¡æ¶ä¸»é¢æ¥è®¾ç½®åºç¨ç¨åºçæ´ä½å¤è§ï¼ä»èå¢å¼ºç¨æ·ä½éªãä¸»é¢æ¯éæèµæºçéåï¼éå¸¸æ¯æ ·å¼è¡¨åå¾åï¼å®ä»¬ä¼å½±ååºç¨ç¨åºçè§è§é£æ ¼ã\n\nè¦å¨ web åºç¨ç¨åºä¸­ä½¿ç¨ä¸»é¢ï¼å¿é¡»è®¾ç½® org.springframework.ui.context.themesource æ¥å£çå®ç°ãwebapplicationcontext æ¥å£æ©å±äº themesource ä½å°å¶èè´£å§æç»äºä¸é¨çå®ç°ãé»è®¤æåµä¸ï¼å§ææ¯ org.springframework.ui.context.support.resourcebundlethemesource ï¼å®ä»ç±»çæ ¹è·¯å¾å è½½å±æ§æä»¶ãè¦ä½¿ç¨èªå®ä¹ç themesource å®ç°æéç½® resourcebundlethemesource çåºæ¬åç§°åç¼ï¼æ¨å¯ä»¥å¨åºç¨ç¨åºä¸ä¸æä¸­ä½¿ç¨ä¿çåç§° themesource æ³¨åä¸ä¸ª beanãweb åºç¨ç¨åºä¸ä¸æèªå¨æ£æµå·æè¯¥åç§°ç bean å¹¶ä½¿ç¨å®ã\n\nå½ä½¿ç¨ resourcebundlethemesource æ¶ï¼ä¸»é¢æ¯å¨ä¸ä¸ªç®åçå±æ§æä»¶ä¸­å®ä¹çãå±æ§æä»¶ååºäºææä¸»é¢çèµæºï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nstylesheet=/themes/cool/style.css\nbackground=/themes/cool/img/coolbg.jpg\n\n\nå±æ§çé®æ¯ä»è§å¾ä»£ç ä¸­å¼ç¨ä¸»é¢åç´ çåç§°ãå¯¹äº jspï¼éå¸¸ä½¿ç¨ spring:theme èªå®ä¹æ ç­¾æ¥æ§è¡æ­¤æä½ï¼å®ä¸ spring:message æ ç­¾éå¸¸ç¸ä¼¼ãä»¥ä¸ jsp çæ®µä½¿ç¨åé¢ç¤ºä¾ä¸­å®ä¹çä¸»é¢æ¥èªå®ä¹å¤è§ï¼\n\n<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>\n<html>\n    <head>\n        <link rel="stylesheet" href="<spring:theme code=\'stylesheet\'/>" type="text/css"/>\n    </head>\n    <body style="background=<spring:theme code=\'background\'/>">\n        ...\n    </body>\n</html>\n\n\né»è®¤æåµä¸ï¼ resourcebundlethemesource ä½¿ç¨ç©ºçåºæ¬åç§°åç¼ãå æ­¤ï¼å±æ§æä»¶æ¯ä»ç±»è·¯å¾çæ ¹å è½½çãå æ­¤ï¼å¯ä»¥å° cool.properties ä¸»é¢å®ä¹æ¾å¨ç±»è·¯å¾æ ¹ç®å½ä¸­ï¼ä¾å¦ï¼å¨ /web-inf/classes ä¸­ï¼ãresourcebundlethemesource ä½¿ç¨æ åç java èµæºåå è½½æºå¶ï¼åè®¸ä¸»é¢å®å¨å½éåãä¾å¦ï¼æä»¬å¯ä»¥æä¸ä¸ª /web-inf/classes/cool_nl.propertiesï¼å®å¼ç¨ä¸ä¸ªå¸¦æè·å°è¯­ææ¬çç¹æ®èæ¯å¾åã\n\nå®ä¹ä¸»é¢åï¼å¯ä»¥å³å®ä½¿ç¨åªä¸ªè¦ä½¿ç¨çä¸»é¢ãdispatcherservlet æ¥æ¾åä¸º themeresolver ç bean ä»¥æ¾åºè¦ä½¿ç¨ç themeresolver å®ç°ãä¸»é¢è§£æå¨çå·¥ä½æ¹å¼ä¸ localeresolver å¤§è´ç¸åãå®æ£æµç¨äºç¹å®è¯·æ±çä¸»é¢ï¼ä¹å¯ä»¥æ´æ¹è¯·æ±çä¸»é¢ãä¸è¡¨æè¿°äº spring æä¾çä¸»é¢è§£æå¨ï¼\n\nclass                  description\nfixedthemeresolver     éæ©ä¸ä¸ªåºå®çä¸»é¢ï¼ä½¿ç¨ defaultthemename å±æ§è®¾ç½®ã\nsessionthemeresolver   ä¸»é¢å¨ç¨æ·ç http ä¼è¯ä¸­ç»´æ¤ã å®åªéè¦ä¸ºæ¯ä¸ªä¼è¯è®¾ç½®ä¸æ¬¡ï¼ä½ä¸ä¼å¨ä¼è¯ä¹é´æç»­å­å¨ã\ncookiethemeresolver    æéä¸»é¢å­å¨å¨å®¢æ·ç«¯ç cookie ä¸­ã\n\nspring è¿æä¾äºä¸ä¸ª themechangeinterceptorï¼å®åè®¸ä½¿ç¨ä¸ä¸ªç®åçè¯·æ±åæ°å¨æ¯ä¸ªè¯·æ±ä¸æ´æ¹ä¸»é¢ã\n\n\n# multipartresolver\n\norg.springframework.web.multipart åä¸­ç multipartresolver æ¯ä¸ç§è§£æ multipart è¯·æ±ï¼åæ¬æä»¶ä¸ä¼ ï¼çç­ç¥ã æä¸ä¸ªåºäºå®¹å¨ç standardservletmultipartresolver å®ç°ï¼ç¨äº servlet å¤é¨åè¯·æ±è§£æã è¯·æ³¨æï¼ä»å·ææ° servlet 5.0+ åºçº¿ç spring framework 6.0 å¼å§ï¼åºäº apache commons fileupload çè¿æ¶ç commonsmultipartresolver ä¸åå¯ç¨ã\n\nè¦å¯ç¨ multipart å¤çï¼éè¦å¨ dispatcherservlet spring éç½®ä¸­å£°æä¸ä¸ªåä¸º multipartresolver ç multipartresolverã dispatcherservlet æ£æµå°å®å¹¶å°å¶åºç¨äºä¼ å¥è¯·æ±ã å½æ¥æ¶å°åå®¹ç±»åä¸º multipart/form-data ç post æ¶ï¼è§£æå¨è§£æå°å½å httpservletrequest åè£ä¸º multiparthttpservletrequest çåå®¹ï¼ä»¥æä¾å¯¹å·²è§£ææä»¶çè®¿é®ä»¥åå°é¨åä½ä¸ºè¯·æ±åæ°å¬å¼ã\n\nservlet å¤é¨åè§£æéè¦éè¿ servlet å®¹å¨éç½®å¯ç¨ã ä¸ºæ­¤ï¼\n\n * å¨ java ä¸­ï¼å¨ servlet æ³¨åä¸è®¾ç½®ä¸ä¸ª multipartconfigelementã\n\n * å¨ web.xml ä¸­ï¼å° <multipart-config> é¨åæ·»å å° servlet å£°æã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½å¨ servlet æ³¨åä¸è®¾ç½® multipartconfigelementï¼\n\npublic class appinitializer extends abstractannotationconfigdispatcherservletinitializer {\n\n    // ...\n\n    @override\n    protected void customizeregistration(servletregistration.dynamic registration) {\n\n        // optionally also set maxfilesize, maxrequestsize, filesizethreshold\n        registration.setmultipartconfig(new multipartconfigelement("/tmp"));\n    }\n\n}\n\n\nä¸æ¦ servlet multipart éç½®å¥½ï¼å°±å¯ä»¥æ·»å ä¸ä¸ªåä¸º multipartresolver ç standardservletmultipartresolver ç±»åç beanã\n\n\n# åèèµæ\n\n * spring framework å®æ¹ææ¡£\n * spring framework å®æ¹ææ¡£ä¹ web',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring MVC ä¹è¿æ»¤å¨",frontmatter:{title:"Spring MVC ä¹è¿æ»¤å¨",date:"2023-02-14T17:44:09.000Z",categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","Web","Filter"],permalink:"/pages/4a164d/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/04.Spring%E8%BF%87%E6%BB%A4%E5%99%A8.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/04.Springè¿æ»¤å¨.md",key:"v-059d2e9c",path:"/pages/4a164d/",headers:[{level:2,title:"è¡¨ååå®¹è¿æ»¤å¨",slug:"è¡¨ååå®¹è¿æ»¤å¨",normalizedTitle:"è¡¨ååå®¹è¿æ»¤å¨",charIndex:112},{level:2,title:"è½¬åè¿æ»¤å¨",slug:"è½¬åè¿æ»¤å¨",normalizedTitle:"è½¬åè¿æ»¤å¨",charIndex:457},{level:2,title:"ETag è¿æ»¤å¨",slug:"etag-è¿æ»¤å¨",normalizedTitle:"etag è¿æ»¤å¨",charIndex:1352},{level:2,title:"è·¨åè¿æ»¤å¨",slug:"è·¨åè¿æ»¤å¨",normalizedTitle:"è·¨åè¿æ»¤å¨",charIndex:1952},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2079}],headersStr:"è¡¨ååå®¹è¿æ»¤å¨ è½¬åè¿æ»¤å¨ ETag è¿æ»¤å¨ è·¨åè¿æ»¤å¨ åèèµæ",content:'# Spring MVC ä¹è¿æ»¤å¨\n\nspring-web æ¨¡åæä¾äºä¸äºæç¨ç Filterï¼\n\n * Form Data\n * Forwarded Headers\n * Shallow ETag\n * CORS\n\n\n# è¡¨ååå®¹è¿æ»¤å¨\n\næµè§å¨åªè½éè¿ HTTP GET æ HTTP POST æäº¤è¡¨åæ°æ®ï¼ä½éæµè§å¨å®¢æ·ç«¯ä¹å¯ä»¥ä½¿ç¨ HTTP PUTãPATCH å DELETEã Servlet API éè¦ ServletRequest.getParameter*() ç³»åæ¹æ³æ¥æ¯æä»å¯¹ HTTP POST çè¡¨åå­æ®µè®¿é®ã\n\nspring-web æ¨¡åæä¾äº FormContentFilter æ¥æ¦æªåå®¹ç±»åä¸º applicationx-www-form-urlencoded ç HTTP PUTãPATCHãDELETE è¯·æ±ï¼ä»è¯·æ±ä½ä¸­è¯»åè¡¨åæ°æ®ï¼å¹¶åè£ ServletRequest éè¿ ServletRequest.getParameter() ç³»åæ¹æ³ä½¿è¡¨åæ°æ®å¯ç¨ã\n\n\n# è½¬åè¿æ»¤å¨\n\nå½è¯·æ±éè¿ä»£çï¼å¦è´è½½åè¡¡å¨ï¼æ¶ï¼ä¸»æºãç«¯å£åæ¹æ¡å¯è½ä¼åçååï¼è¿ä½¿å¾ä»å®¢æ·ç«¯è§åº¦åå»ºæåæ­£ç¡®ä¸»æºãç«¯å£åæ¹æ¡çé¾æ¥æä¸ºä¸é¡¹ææã\n\nRFC 7239 å®ä¹äº Forwarded HTTP å¤´ï¼ä»£çå¯ä»¥ä½¿ç¨å®æ¥æä¾æå³åå§è¯·æ±çä¿¡æ¯ãè¿æå¶ä»éæ åå¤´ï¼åæ¬ X-Forwarded-HostãX-Forwarded-PortãX-Forwarded-ProtoãX-Forwarded-Ssl å X-Forwarded-Prefixã\n\nForwardedHeaderFilter æ¯ä¸ä¸ª Servlet è¿æ»¤å¨ï¼å®ä¿®æ¹è¯·æ±ä»¥ä¾¿ a) æ ¹æ® Forwarded å¤´æ´æ¹ä¸»æºãç«¯å£å schemeï¼b) å é¤è¿äºå¤´ä»¥æ¶é¤è¿ä¸æ­¥çå½±åãè¯¥è¿æ»¤å¨ä¾èµäºåè£è¯·æ±ï¼å æ­¤å®å¿é¡»æå¨å¶ä»è¿æ»¤å¨ä¹åï¼ä¾å¦ RequestContextFilterï¼å®åºè¯¥ä¸ä¿®æ¹åçè¯·æ±ä¸èµ·ä½¿ç¨ï¼èä¸æ¯åå§è¯·æ±ã\n\nForwarded å¤´æå®å¨èéï¼å ä¸ºåºç¨ç¨åºæ æ³ç¥éå¤´æ¯ç±ä»£çæé¢ææ·»å çï¼è¿æ¯ç±æ¶æå®¢æ·ç«¯æ·»å çãè¿å°±æ¯ä¸ºä»ä¹åºå°ä¿¡ä»»è¾¹çå¤çä»£çéç½®ä¸ºå é¤æ¥èªå¤é¨çä¸åä¿¡ä»»ç Forwarded å¤´ãè¿å¯ä»¥ä½¿ç¨ removeOnly=true éç½® ForwardedHeaderFilterï¼å¨è¿ç§æåµä¸å®ä¼å é¤ä½ä¸ä½¿ç¨å¤´ã\n\nä¸ºäºæ¯æå¼æ­¥è¯·æ±åéè¯¯åæ´¾ï¼æ­¤è¿æ»¤å¨åºä½¿ç¨ DispatcherType.ASYNC å DispatcherType.ERROR è¿è¡æ å°ãå¦æä½¿ç¨ Spring Framework ç AbstractAnnotationConfigDispatcherServletInitializerï¼åè§ Servlet Configï¼ï¼ææè¿æ»¤å¨é½ä¼èªå¨ä¸ºææè°åº¦ç±»åæ³¨åãä½æ¯ï¼å¦æéè¿ web.xml æå¨ Spring Boot ä¸­éè¿ FilterRegistrationBean æ³¨åè¿æ»¤å¨ï¼è¯·ç¡®ä¿é¤äº DispatcherType.REQUEST ä¹å¤è¿åæ¬ DispatcherType.ASYNC å DispatcherType.ERRORã\n\n\n# ETag è¿æ»¤å¨\n\nShallowEtagHeaderFilter è¿æ»¤å¨éè¿ç¼å­åå¥ååºçåå®¹å¹¶ä»ä¸­è®¡ç® MD5 åå¸æ¥åå»ºâæµâETagãä¸æ¬¡å®¢æ·ç«¯åéæ¶ï¼å®ä¼ååæ ·çäºæï¼ä½å®è¿ä¼å°è®¡ç®å¼ä¸ If-None-Match è¯·æ±æ å¤´è¿è¡æ¯è¾ï¼å¦æä¸¤èç¸ç­ï¼åè¿å 304 (NOT_MODIFIED)ã\n\næ­¤ç­ç¥èçç½ç»å¸¦å®½ä½ä¸èç CPUï¼å ä¸ºå¿é¡»ä¸ºæ¯ä¸ªè¯·æ±è®¡ç®å®æ´ååºãåé¢æè¿°çæ§å¶å¨çº§å«çå¶ä»ç­ç¥å¯ä»¥é¿åè®¡ç®ã\n\næ­¤è¿æ»¤å¨æä¸ä¸ª writeWeakETag åæ°ï¼è¯¥åæ°å°è¿æ»¤å¨éç½®ä¸ºåå¥ç±»ä¼¼äºä»¥ä¸åå®¹çå¼± ETagï¼W"02a2d595e6ed9a0b24f027f2b63b134d6"ï¼å¦ RFC 7232 Section 2.3 ä¸­æå®ä¹ï¼ã\n\nä¸ºäºæ¯æå¼æ­¥è¯·æ±ï¼è¿ä¸ªè¿æ»¤å¨å¿é¡»ç¨ DispatcherType.ASYNC æ å°ï¼è¿æ ·è¿æ»¤å¨æè½å»¶è¿å¹¶æåçæä¸ä¸ª ETag å°æåæåä¸æ¬¡å¼æ­¥è°åº¦ãå¦æä½¿ç¨ Spring Framework ç AbstractAnnotationConfigDispatcherServletInitializerï¼ææè¿æ»¤å¨é½ä¼èªå¨ä¸ºææè°åº¦ç±»åæ³¨åãä½æ¯ï¼å¦æéè¿ web.xml æå¨ Spring Boot ä¸­éè¿ FilterRegistrationBean æ³¨åè¿æ»¤å¨ï¼è¯·ç¡®ä¿åå« DispatcherType.ASYNCã\n\n\n# è·¨åè¿æ»¤å¨\n\nSpring MVC éè¿æ§å¶å¨ä¸çæ³¨è§£ä¸º CORS éç½®æä¾ç»ç²åº¦æ¯æãä½æ¯ï¼å½ä¸ Spring Security ä¸èµ·ä½¿ç¨æ¶ï¼å»ºè®®ä¾èµåç½®ç CorsFilterï¼å®å¿é¡»å¨ Spring Security çè¿æ»¤å¨é¾ä¹åè®¢éã\n\n\n# åèèµæ\n\n * Spring Framework å®æ¹ææ¡£\n * Spring Framework å®æ¹ææ¡£ä¹ Web',normalizedContent:'# spring mvc ä¹è¿æ»¤å¨\n\nspring-web æ¨¡åæä¾äºä¸äºæç¨ç filterï¼\n\n * form data\n * forwarded headers\n * shallow etag\n * cors\n\n\n# è¡¨ååå®¹è¿æ»¤å¨\n\næµè§å¨åªè½éè¿ http get æ http post æäº¤è¡¨åæ°æ®ï¼ä½éæµè§å¨å®¢æ·ç«¯ä¹å¯ä»¥ä½¿ç¨ http putãpatch å deleteã servlet api éè¦ servletrequest.getparameter*() ç³»åæ¹æ³æ¥æ¯æä»å¯¹ http post çè¡¨åå­æ®µè®¿é®ã\n\nspring-web æ¨¡åæä¾äº formcontentfilter æ¥æ¦æªåå®¹ç±»åä¸º applicationx-www-form-urlencoded ç http putãpatchãdelete è¯·æ±ï¼ä»è¯·æ±ä½ä¸­è¯»åè¡¨åæ°æ®ï¼å¹¶åè£ servletrequest éè¿ servletrequest.getparameter() ç³»åæ¹æ³ä½¿è¡¨åæ°æ®å¯ç¨ã\n\n\n# è½¬åè¿æ»¤å¨\n\nå½è¯·æ±éè¿ä»£çï¼å¦è´è½½åè¡¡å¨ï¼æ¶ï¼ä¸»æºãç«¯å£åæ¹æ¡å¯è½ä¼åçååï¼è¿ä½¿å¾ä»å®¢æ·ç«¯è§åº¦åå»ºæåæ­£ç¡®ä¸»æºãç«¯å£åæ¹æ¡çé¾æ¥æä¸ºä¸é¡¹ææã\n\nrfc 7239 å®ä¹äº forwarded http å¤´ï¼ä»£çå¯ä»¥ä½¿ç¨å®æ¥æä¾æå³åå§è¯·æ±çä¿¡æ¯ãè¿æå¶ä»éæ åå¤´ï¼åæ¬ x-forwarded-hostãx-forwarded-portãx-forwarded-protoãx-forwarded-ssl å x-forwarded-prefixã\n\nforwardedheaderfilter æ¯ä¸ä¸ª servlet è¿æ»¤å¨ï¼å®ä¿®æ¹è¯·æ±ä»¥ä¾¿ a) æ ¹æ® forwarded å¤´æ´æ¹ä¸»æºãç«¯å£å schemeï¼b) å é¤è¿äºå¤´ä»¥æ¶é¤è¿ä¸æ­¥çå½±åãè¯¥è¿æ»¤å¨ä¾èµäºåè£è¯·æ±ï¼å æ­¤å®å¿é¡»æå¨å¶ä»è¿æ»¤å¨ä¹åï¼ä¾å¦ requestcontextfilterï¼å®åºè¯¥ä¸ä¿®æ¹åçè¯·æ±ä¸èµ·ä½¿ç¨ï¼èä¸æ¯åå§è¯·æ±ã\n\nforwarded å¤´æå®å¨èéï¼å ä¸ºåºç¨ç¨åºæ æ³ç¥éå¤´æ¯ç±ä»£çæé¢ææ·»å çï¼è¿æ¯ç±æ¶æå®¢æ·ç«¯æ·»å çãè¿å°±æ¯ä¸ºä»ä¹åºå°ä¿¡ä»»è¾¹çå¤çä»£çéç½®ä¸ºå é¤æ¥èªå¤é¨çä¸åä¿¡ä»»ç forwarded å¤´ãè¿å¯ä»¥ä½¿ç¨ removeonly=true éç½® forwardedheaderfilterï¼å¨è¿ç§æåµä¸å®ä¼å é¤ä½ä¸ä½¿ç¨å¤´ã\n\nä¸ºäºæ¯æå¼æ­¥è¯·æ±åéè¯¯åæ´¾ï¼æ­¤è¿æ»¤å¨åºä½¿ç¨ dispatchertype.async å dispatchertype.error è¿è¡æ å°ãå¦æä½¿ç¨ spring framework ç abstractannotationconfigdispatcherservletinitializerï¼åè§ servlet configï¼ï¼ææè¿æ»¤å¨é½ä¼èªå¨ä¸ºææè°åº¦ç±»åæ³¨åãä½æ¯ï¼å¦æéè¿ web.xml æå¨ spring boot ä¸­éè¿ filterregistrationbean æ³¨åè¿æ»¤å¨ï¼è¯·ç¡®ä¿é¤äº dispatchertype.request ä¹å¤è¿åæ¬ dispatchertype.async å dispatchertype.errorã\n\n\n# etag è¿æ»¤å¨\n\nshallowetagheaderfilter è¿æ»¤å¨éè¿ç¼å­åå¥ååºçåå®¹å¹¶ä»ä¸­è®¡ç® md5 åå¸æ¥åå»ºâæµâetagãä¸æ¬¡å®¢æ·ç«¯åéæ¶ï¼å®ä¼ååæ ·çäºæï¼ä½å®è¿ä¼å°è®¡ç®å¼ä¸ if-none-match è¯·æ±æ å¤´è¿è¡æ¯è¾ï¼å¦æä¸¤èç¸ç­ï¼åè¿å 304 (not_modified)ã\n\næ­¤ç­ç¥èçç½ç»å¸¦å®½ä½ä¸èç cpuï¼å ä¸ºå¿é¡»ä¸ºæ¯ä¸ªè¯·æ±è®¡ç®å®æ´ååºãåé¢æè¿°çæ§å¶å¨çº§å«çå¶ä»ç­ç¥å¯ä»¥é¿åè®¡ç®ã\n\næ­¤è¿æ»¤å¨æä¸ä¸ª writeweaketag åæ°ï¼è¯¥åæ°å°è¿æ»¤å¨éç½®ä¸ºåå¥ç±»ä¼¼äºä»¥ä¸åå®¹çå¼± etagï¼w"02a2d595e6ed9a0b24f027f2b63b134d6"ï¼å¦ rfc 7232 section 2.3 ä¸­æå®ä¹ï¼ã\n\nä¸ºäºæ¯æå¼æ­¥è¯·æ±ï¼è¿ä¸ªè¿æ»¤å¨å¿é¡»ç¨ dispatchertype.async æ å°ï¼è¿æ ·è¿æ»¤å¨æè½å»¶è¿å¹¶æåçæä¸ä¸ª etag å°æåæåä¸æ¬¡å¼æ­¥è°åº¦ãå¦æä½¿ç¨ spring framework ç abstractannotationconfigdispatcherservletinitializerï¼ææè¿æ»¤å¨é½ä¼èªå¨ä¸ºææè°åº¦ç±»åæ³¨åãä½æ¯ï¼å¦æéè¿ web.xml æå¨ spring boot ä¸­éè¿ filterregistrationbean æ³¨åè¿æ»¤å¨ï¼è¯·ç¡®ä¿åå« dispatchertype.asyncã\n\n\n# è·¨åè¿æ»¤å¨\n\nspring mvc éè¿æ§å¶å¨ä¸çæ³¨è§£ä¸º cors éç½®æä¾ç»ç²åº¦æ¯æãä½æ¯ï¼å½ä¸ spring security ä¸èµ·ä½¿ç¨æ¶ï¼å»ºè®®ä¾èµåç½®ç corsfilterï¼å®å¿é¡»å¨ spring security çè¿æ»¤å¨é¾ä¹åè®¢éã\n\n\n# åèèµæ\n\n * spring framework å®æ¹ææ¡£\n * spring framework å®æ¹ææ¡£ä¹ web',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring MVC ä¹è·¨å",frontmatter:{title:"Spring MVC ä¹è·¨å",date:"2023-02-16T20:33:26.000Z",categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","Web","CORS"],permalink:"/pages/1d2954/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/05.Spring%E8%B7%A8%E5%9F%9F.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/05.Springè·¨å.md",key:"v-3cee8b95",path:"/pages/1d2954/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:47},{level:2,title:"å¤ç",slug:"å¤ç",normalizedTitle:"å¤ç",charIndex:33},{level:2,title:"@CrossOrigin",slug:"crossorigin",normalizedTitle:"@crossorigin",charIndex:1053},{level:2,title:"å¨å±éç½®",slug:"å¨å±éç½®",normalizedTitle:"å¨å±éç½®",charIndex:2852},{level:3,title:"Java éç½®",slug:"java-éç½®",normalizedTitle:"java éç½®",charIndex:911},{level:3,title:"XML éç½®",slug:"xml-éç½®",normalizedTitle:"xml éç½®",charIndex:3818},{level:2,title:"CORS è¿æ»¤å¨",slug:"cors-è¿æ»¤å¨",normalizedTitle:"cors è¿æ»¤å¨",charIndex:4272},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:4801}],headersStr:"ç®ä» å¤ç @CrossOrigin å¨å±éç½® Java éç½® XML éç½® CORS è¿æ»¤å¨ åèèµæ",content:'# Spring MVC ä¹è·¨å\n\nSpring MVC æ¯æè·¨åå¤çï¼CORSï¼ã\n\n\n# ç®ä»\n\nåºäºå®å¨åå ï¼æµè§å¨ç¦æ­¢å¯¹å½åæºä¹å¤çèµæºè¿è¡ AJAX è°ç¨ãä¾å¦ï¼å¯ä»¥å¨ä¸ä¸ªéé¡¹å¡ä¸­ä½¿ç¨æ¨çé¶è¡å¸æ·ï¼èå¨å¦ä¸ä¸ªéé¡¹å¡ä¸­ä½¿ç¨ evil.comãæ¥èª evil.com çèæ¬ä¸åºè¯¥è½å¤ä½¿ç¨æ¨çå­æ®åæ¨çé¶è¡ API ååº AJAX è¯·æ±ââä¾å¦ä»æ¨çè´¦æ·ä¸­åæ¬¾ï¼\n\nè·¨åï¼CORSï¼æ¯ç± å¤§å¤æ°æµè§å¨ å®æ½ç W3C è§èï¼å¯è®©æ¨æå®åªç§è·¨åè¯·æ±æ¯ææï¼èä¸æ¯ä½¿ç¨åºäº IFRAME æ JSONP çä¸å¤ªå®å¨åä¸å¤ªå¼ºå¤§çè§£å³æ¹æ³ã\n\n\n# å¤ç\n\nCORS è§èåä¸ºé¢æ£è¯·æ±ãç®åè¯·æ±åå®éè¯·æ±ãè¦äºè§£ CORS çå·¥ä½åçï¼å¯ä»¥éè¯» Cross-Origin Resource Sharing (CORS) ç­ï¼æèæ¥çè§èäºè§£æ´å¤è¯¦ç»ä¿¡æ¯ã\n\nSpring MVC HandlerMapping å®ç°æä¾äºå¯¹ CORS çåç½®æ¯æãæåå°è¯·æ±æ å°å°å¤çç¨åºåï¼HandlerMapping å®ç°æ£æ¥ç»å®è¯·æ±åå¤çç¨åºç CORS éç½®å¹¶éåè¿ä¸æ­¥çæä½ãé¢æ£è¯·æ±è¢«ç´æ¥å¤çï¼èç®ååå®éç CORS è¯·æ±è¢«æ¦æªãéªè¯ï¼å¹¶è®¾ç½®äºæéç CORS ååºæ å¤´ã\n\nä¸ºäºå¯ç¨è·¨æºè¯·æ±ï¼å³å­å¨ Origin æ å¤´å¹¶ä¸ä¸è¯·æ±çä¸»æºä¸åï¼ï¼æ¨éè¦æä¸äºæç¡®å£°æç CORS éç½®ãå¦ææªæ¾å°å¹éç CORS éç½®ï¼é¢æ£è¯·æ±å°è¢«æç»ãæ²¡æ CORS æ å¤´æ·»å å°ç®ååå®é CORS è¯·æ±çååºä¸­ï¼å æ­¤æµè§å¨ä¼æç»å®ä»¬ã\n\næ¯ä¸ª HandlerMapping é½å¯ä»¥[éç½®](https://docs.spring.io/spring-framework/docs/6.0.4/javadoc-api/org/springframework/web/servlet/handler/AbstractHandlerMapping.html#setCorsConfigurations- java.util.Map-) åç¬ä½¿ç¨åºäº URL æ¨¡å¼ç CorsConfiguration æ å°ã å¨å¤§å¤æ°æåµä¸ï¼åºç¨ç¨åºä½¿ç¨ MVC Java éç½®æ XML å½åç©ºé´æ¥å£°ææ­¤ç±»æ å°ï¼è¿ä¼å¯¼è´å°åä¸ªå¨å±æ å°ä¼ éç»ææ HandlerMapping å®ä¾ã\n\nå¯ä»¥å° HandlerMapping çº§å«çå¨å± CORS éç½®ä¸æ´ç»ç²åº¦çå¤çç¨åºçº§å«ç CORS éç½®ç¸ç»åã ä¾å¦ï¼å¸¦æ³¨éçæ§å¶å¨å¯ä»¥ä½¿ç¨ç±»çº§ææ¹æ³çº§ç @CrossOrigin æ³¨éï¼å¶ä»å¤çç¨åºå¯ä»¥å®ç° CorsConfigurationSourceï¼ã\n\nThe rules for combining global and local configuration are generally additiveâââfor example, all global and all local origins. For those attributes where only a single value can be accepted, e.g. allowCredentials and maxAge, the local overrides the global value.\n\nç»åå¨å±åå±é¨éç½®çè§åéå¸¸æ¯éå çâ©ââä¾å¦ï¼ææå¨å±åææå±é¨èµ·æºã å¯¹äºé£äºåªè½æ¥ååä¸ªå¼çå±æ§ï¼ä¾å¦ allowCredentials å maxAgeï¼å±é¨è¦çå¨å±å¼ã\n\n\n# @CrossOrigin\n\n@CrossOrigin æ³¨è§£å¨å¸¦æ³¨è§£ç Controller æ¹æ³ä¸å¯ç¨è·¨æºè¯·æ±ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@RestController\n@RequestMapping("/account")\npublic class AccountController {\n\n    @CrossOrigin\n    @GetMapping("/{id}")\n    public Account retrieve(@PathVariable Long id) {\n        // ...\n    }\n\n    @DeleteMapping("/{id}")\n    public void remove(@PathVariable Long id) {\n        // ...\n    }\n}\n\n\né»è®¤ï¼@CrossOrigin åè®¸è®¿é®ï¼\n\n * æä»¥ origin\n * æä»¥ header\n * æä»¥ Controller æ¹æ³æ å°å°ç HTTP æ¹æ³\n\nallowCredentials é»è®¤æåµä¸ä¸å¯ç¨ï¼å ä¸ºå®å»ºç«äºä¸ä¸ªä¿¡ä»»çº§å«ï¼å¯ä»¥å¬å¼ææçç¨æ·ç¹å®ä¿¡æ¯ï¼ä¾å¦ cookie å CSRF ä»¤çï¼ï¼å¹¶ä¸åªåºå¨éå½çæåµä¸ä½¿ç¨ãå¯ç¨æ¶ï¼å¿é¡»å° allowOrigins è®¾ç½®ä¸ºä¸ä¸ªæå¤ä¸ªç¹å®åï¼ä½ä¸æ¯ç¹æ®å¼ "*"ï¼ï¼æè allowOriginPatterns å±æ§å¯ç¨äºå¹éä¸ç»å¨ææ¥æºã\n\nmaxAge åä½ä¸ºåé\n\n@CrossOrigin ä¹æ¯æç±»çº§å«ï¼å¹¶ä¸è¢«æææ¹ç»§æ¿ï¼å¦ä¸æç¤ºï¼\n\n@CrossOrigin(origins = "https://domain2.com", maxAge = 3600)\n@RestController\n@RequestMapping("/account")\npublic class AccountController {\n\n    @GetMapping("/{id}")\n    public Account retrieve(@PathVariable Long id) {\n        // ...\n    }\n\n    @DeleteMapping("/{id}")\n    public void remove(@PathVariable Long id) {\n        // ...\n    }\n}\n\n\nå¯ä»¥åæ¶å¨ç±»çº§å«åæ¹æ³çº§å«ä¸ä½¿ç¨ @CrossOrigin\n\n@CrossOrigin(maxAge = 3600)\n@RestController\n@RequestMapping("/account")\npublic class AccountController {\n\n    @CrossOrigin("https://domain2.com")\n    @GetMapping("/{id}")\n    public Account retrieve(@PathVariable Long id) {\n        // ...\n    }\n\n    @DeleteMapping("/{id}")\n    public void remove(@PathVariable Long id) {\n        // ...\n    }\n}\n\n\n\n# å¨å±éç½®\n\né¤äºç»ç²åº¦çæ§å¶å¨æ¹æ³çº§å«éç½®ä¹å¤ï¼æ¨å¯è½è¿æ³å®ä¹ä¸äºå¨å± CORS éç½®ãæ¨å¯ä»¥å¨ä»»ä½ HandlerMapping ä¸åç¬è®¾ç½®åºäº URL ç CorsConfiguration æ å°ãä½æ¯ï¼å¤§å¤æ°åºç¨ç¨åºä½¿ç¨ MVC Java éç½®æ MVC XML å½åç©ºé´æ¥æ§è¡æ­¤æä½ã\n\né»è®¤æåµä¸ï¼å¨å±éç½®å¯ç¨ä»¥ä¸åè½ï¼\n\n * æä»¥ origin\n * æä»¥ header\n * GETãHEAD å POST æ¹æ³\n\nallowCredentials é»è®¤æåµä¸ä¸å¯ç¨ï¼å ä¸ºå®å»ºç«äºä¸ä¸ªä¿¡ä»»çº§å«ï¼å¯ä»¥å¬å¼ææçç¨æ·ç¹å®ä¿¡æ¯ï¼ä¾å¦ cookie å CSRF ä»¤çï¼ï¼å¹¶ä¸åªåºå¨éå½çæåµä¸ä½¿ç¨ãå¯ç¨æ¶ï¼å¿é¡»å° allowOrigins è®¾ç½®ä¸ºä¸ä¸ªæå¤ä¸ªç¹å®åï¼ä½ä¸æ¯ç¹æ®å¼ "*"ï¼ï¼æè allowOriginPatterns å±æ§å¯ç¨äºå¹éä¸ç»å¨ææ¥æºã\n\nmaxAge åä½ä¸ºåé\n\n\n# Java éç½®\n\nè¦å¨ MVC Java éç½®ä¸­å¯ç¨ CORSï¼æ¨å¯ä»¥ä½¿ç¨ CorsRegistry åè°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n\n        registry.addMapping("/api/**")\n            .allowedOrigins("https://domain2.com")\n            .allowedMethods("PUT", "DELETE")\n            .allowedHeaders("header1", "header2", "header3")\n            .exposedHeaders("header1", "header2")\n            .allowCredentials(true).maxAge(3600);\n\n        // Add more mappings...\n    }\n}\n\n\n\n# XML éç½®\n\nè¦å¨ XML å½åç©ºé´ä¸­å¯ç¨ CORSï¼å¯ä»¥ä½¿ç¨ <mvc:cors> åç´ ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<mvc:cors>\n\n    <mvc:mapping path="/api/**"\n        allowed-origins="https://domain1.com, https://domain2.com"\n        allowed-methods="GET, PUT"\n        allowed-headers="header1, header2, header3"\n        exposed-headers="header1, header2" allow-credentials="true"\n        max-age="123" />\n\n    <mvc:mapping path="/resources/**"\n        allowed-origins="https://domain1.com" />\n\n</mvc:cors>\n\n\n\n# CORS è¿æ»¤å¨\n\nå¯ä»¥éè¿ Spring åç½®ç CorsFilter æ¯æ CORSã\n\nè¦éç½®è¿æ»¤å¨ï¼è¯·å° CorsConfigurationSource ä¼ éç»å®çæé å½æ°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nCorsConfiguration config = new CorsConfiguration();\n\n// Possibly...\n// config.applyPermitDefaultValues()\n\nconfig.setAllowCredentials(true);\nconfig.addAllowedOrigin("https://domain1.com");\nconfig.addAllowedHeader("*");\nconfig.addAllowedMethod("*");\n\nUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\nsource.registerCorsConfiguration("/**", config);\n\nCorsFilter filter = new CorsFilter(source);\n\n\n\n# åèèµæ\n\n * Spring Framework å®æ¹ææ¡£\n * Spring Framework å®æ¹ææ¡£ä¹ Web',normalizedContent:'# spring mvc ä¹è·¨å\n\nspring mvc æ¯æè·¨åå¤çï¼corsï¼ã\n\n\n# ç®ä»\n\nåºäºå®å¨åå ï¼æµè§å¨ç¦æ­¢å¯¹å½åæºä¹å¤çèµæºè¿è¡ ajax è°ç¨ãä¾å¦ï¼å¯ä»¥å¨ä¸ä¸ªéé¡¹å¡ä¸­ä½¿ç¨æ¨çé¶è¡å¸æ·ï¼èå¨å¦ä¸ä¸ªéé¡¹å¡ä¸­ä½¿ç¨ evil.comãæ¥èª evil.com çèæ¬ä¸åºè¯¥è½å¤ä½¿ç¨æ¨çå­æ®åæ¨çé¶è¡ api ååº ajax è¯·æ±ââä¾å¦ä»æ¨çè´¦æ·ä¸­åæ¬¾ï¼\n\nè·¨åï¼corsï¼æ¯ç± å¤§å¤æ°æµè§å¨ å®æ½ç w3c è§èï¼å¯è®©æ¨æå®åªç§è·¨åè¯·æ±æ¯ææï¼èä¸æ¯ä½¿ç¨åºäº iframe æ jsonp çä¸å¤ªå®å¨åä¸å¤ªå¼ºå¤§çè§£å³æ¹æ³ã\n\n\n# å¤ç\n\ncors è§èåä¸ºé¢æ£è¯·æ±ãç®åè¯·æ±åå®éè¯·æ±ãè¦äºè§£ cors çå·¥ä½åçï¼å¯ä»¥éè¯» cross-origin resource sharing (cors) ç­ï¼æèæ¥çè§èäºè§£æ´å¤è¯¦ç»ä¿¡æ¯ã\n\nspring mvc handlermapping å®ç°æä¾äºå¯¹ cors çåç½®æ¯æãæåå°è¯·æ±æ å°å°å¤çç¨åºåï¼handlermapping å®ç°æ£æ¥ç»å®è¯·æ±åå¤çç¨åºç cors éç½®å¹¶éåè¿ä¸æ­¥çæä½ãé¢æ£è¯·æ±è¢«ç´æ¥å¤çï¼èç®ååå®éç cors è¯·æ±è¢«æ¦æªãéªè¯ï¼å¹¶è®¾ç½®äºæéç cors ååºæ å¤´ã\n\nä¸ºäºå¯ç¨è·¨æºè¯·æ±ï¼å³å­å¨ origin æ å¤´å¹¶ä¸ä¸è¯·æ±çä¸»æºä¸åï¼ï¼æ¨éè¦æä¸äºæç¡®å£°æç cors éç½®ãå¦ææªæ¾å°å¹éç cors éç½®ï¼é¢æ£è¯·æ±å°è¢«æç»ãæ²¡æ cors æ å¤´æ·»å å°ç®ååå®é cors è¯·æ±çååºä¸­ï¼å æ­¤æµè§å¨ä¼æç»å®ä»¬ã\n\næ¯ä¸ª handlermapping é½å¯ä»¥[éç½®](https://docs.spring.io/spring-framework/docs/6.0.4/javadoc-api/org/springframework/web/servlet/handler/abstracthandlermapping.html#setcorsconfigurations- java.util.map-) åç¬ä½¿ç¨åºäº url æ¨¡å¼ç corsconfiguration æ å°ã å¨å¤§å¤æ°æåµä¸ï¼åºç¨ç¨åºä½¿ç¨ mvc java éç½®æ xml å½åç©ºé´æ¥å£°ææ­¤ç±»æ å°ï¼è¿ä¼å¯¼è´å°åä¸ªå¨å±æ å°ä¼ éç»ææ handlermapping å®ä¾ã\n\nå¯ä»¥å° handlermapping çº§å«çå¨å± cors éç½®ä¸æ´ç»ç²åº¦çå¤çç¨åºçº§å«ç cors éç½®ç¸ç»åã ä¾å¦ï¼å¸¦æ³¨éçæ§å¶å¨å¯ä»¥ä½¿ç¨ç±»çº§ææ¹æ³çº§ç @crossorigin æ³¨éï¼å¶ä»å¤çç¨åºå¯ä»¥å®ç° corsconfigurationsourceï¼ã\n\nthe rules for combining global and local configuration are generally additiveâââfor example, all global and all local origins. for those attributes where only a single value can be accepted, e.g. allowcredentials and maxage, the local overrides the global value.\n\nç»åå¨å±åå±é¨éç½®çè§åéå¸¸æ¯éå çâ©ââä¾å¦ï¼ææå¨å±åææå±é¨èµ·æºã å¯¹äºé£äºåªè½æ¥ååä¸ªå¼çå±æ§ï¼ä¾å¦ allowcredentials å maxageï¼å±é¨è¦çå¨å±å¼ã\n\n\n# @crossorigin\n\n@crossorigin æ³¨è§£å¨å¸¦æ³¨è§£ç controller æ¹æ³ä¸å¯ç¨è·¨æºè¯·æ±ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@restcontroller\n@requestmapping("/account")\npublic class accountcontroller {\n\n    @crossorigin\n    @getmapping("/{id}")\n    public account retrieve(@pathvariable long id) {\n        // ...\n    }\n\n    @deletemapping("/{id}")\n    public void remove(@pathvariable long id) {\n        // ...\n    }\n}\n\n\né»è®¤ï¼@crossorigin åè®¸è®¿é®ï¼\n\n * æä»¥ origin\n * æä»¥ header\n * æä»¥ controller æ¹æ³æ å°å°ç http æ¹æ³\n\nallowcredentials é»è®¤æåµä¸ä¸å¯ç¨ï¼å ä¸ºå®å»ºç«äºä¸ä¸ªä¿¡ä»»çº§å«ï¼å¯ä»¥å¬å¼ææçç¨æ·ç¹å®ä¿¡æ¯ï¼ä¾å¦ cookie å csrf ä»¤çï¼ï¼å¹¶ä¸åªåºå¨éå½çæåµä¸ä½¿ç¨ãå¯ç¨æ¶ï¼å¿é¡»å° alloworigins è®¾ç½®ä¸ºä¸ä¸ªæå¤ä¸ªç¹å®åï¼ä½ä¸æ¯ç¹æ®å¼ "*"ï¼ï¼æè alloworiginpatterns å±æ§å¯ç¨äºå¹éä¸ç»å¨ææ¥æºã\n\nmaxage åä½ä¸ºåé\n\n@crossorigin ä¹æ¯æç±»çº§å«ï¼å¹¶ä¸è¢«æææ¹ç»§æ¿ï¼å¦ä¸æç¤ºï¼\n\n@crossorigin(origins = "https://domain2.com", maxage = 3600)\n@restcontroller\n@requestmapping("/account")\npublic class accountcontroller {\n\n    @getmapping("/{id}")\n    public account retrieve(@pathvariable long id) {\n        // ...\n    }\n\n    @deletemapping("/{id}")\n    public void remove(@pathvariable long id) {\n        // ...\n    }\n}\n\n\nå¯ä»¥åæ¶å¨ç±»çº§å«åæ¹æ³çº§å«ä¸ä½¿ç¨ @crossorigin\n\n@crossorigin(maxage = 3600)\n@restcontroller\n@requestmapping("/account")\npublic class accountcontroller {\n\n    @crossorigin("https://domain2.com")\n    @getmapping("/{id}")\n    public account retrieve(@pathvariable long id) {\n        // ...\n    }\n\n    @deletemapping("/{id}")\n    public void remove(@pathvariable long id) {\n        // ...\n    }\n}\n\n\n\n# å¨å±éç½®\n\né¤äºç»ç²åº¦çæ§å¶å¨æ¹æ³çº§å«éç½®ä¹å¤ï¼æ¨å¯è½è¿æ³å®ä¹ä¸äºå¨å± cors éç½®ãæ¨å¯ä»¥å¨ä»»ä½ handlermapping ä¸åç¬è®¾ç½®åºäº url ç corsconfiguration æ å°ãä½æ¯ï¼å¤§å¤æ°åºç¨ç¨åºä½¿ç¨ mvc java éç½®æ mvc xml å½åç©ºé´æ¥æ§è¡æ­¤æä½ã\n\né»è®¤æåµä¸ï¼å¨å±éç½®å¯ç¨ä»¥ä¸åè½ï¼\n\n * æä»¥ origin\n * æä»¥ header\n * getãhead å post æ¹æ³\n\nallowcredentials é»è®¤æåµä¸ä¸å¯ç¨ï¼å ä¸ºå®å»ºç«äºä¸ä¸ªä¿¡ä»»çº§å«ï¼å¯ä»¥å¬å¼ææçç¨æ·ç¹å®ä¿¡æ¯ï¼ä¾å¦ cookie å csrf ä»¤çï¼ï¼å¹¶ä¸åªåºå¨éå½çæåµä¸ä½¿ç¨ãå¯ç¨æ¶ï¼å¿é¡»å° alloworigins è®¾ç½®ä¸ºä¸ä¸ªæå¤ä¸ªç¹å®åï¼ä½ä¸æ¯ç¹æ®å¼ "*"ï¼ï¼æè alloworiginpatterns å±æ§å¯ç¨äºå¹éä¸ç»å¨ææ¥æºã\n\nmaxage åä½ä¸ºåé\n\n\n# java éç½®\n\nè¦å¨ mvc java éç½®ä¸­å¯ç¨ corsï¼æ¨å¯ä»¥ä½¿ç¨ corsregistry åè°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@configuration\n@enablewebmvc\npublic class webconfig implements webmvcconfigurer {\n\n    @override\n    public void addcorsmappings(corsregistry registry) {\n\n        registry.addmapping("/api/**")\n            .allowedorigins("https://domain2.com")\n            .allowedmethods("put", "delete")\n            .allowedheaders("header1", "header2", "header3")\n            .exposedheaders("header1", "header2")\n            .allowcredentials(true).maxage(3600);\n\n        // add more mappings...\n    }\n}\n\n\n\n# xml éç½®\n\nè¦å¨ xml å½åç©ºé´ä¸­å¯ç¨ corsï¼å¯ä»¥ä½¿ç¨ <mvc:cors> åç´ ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<mvc:cors>\n\n    <mvc:mapping path="/api/**"\n        allowed-origins="https://domain1.com, https://domain2.com"\n        allowed-methods="get, put"\n        allowed-headers="header1, header2, header3"\n        exposed-headers="header1, header2" allow-credentials="true"\n        max-age="123" />\n\n    <mvc:mapping path="/resources/**"\n        allowed-origins="https://domain1.com" />\n\n</mvc:cors>\n\n\n\n# cors è¿æ»¤å¨\n\nå¯ä»¥éè¿ spring åç½®ç corsfilter æ¯æ corsã\n\nè¦éç½®è¿æ»¤å¨ï¼è¯·å° corsconfigurationsource ä¼ éç»å®çæé å½æ°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\ncorsconfiguration config = new corsconfiguration();\n\n// possibly...\n// config.applypermitdefaultvalues()\n\nconfig.setallowcredentials(true);\nconfig.addallowedorigin("https://domain1.com");\nconfig.addallowedheader("*");\nconfig.addallowedmethod("*");\n\nurlbasedcorsconfigurationsource source = new urlbasedcorsconfigurationsource();\nsource.registercorsconfiguration("/**", config);\n\ncorsfilter filter = new corsfilter(source);\n\n\n\n# åèèµæ\n\n * spring framework å®æ¹ææ¡£\n * spring framework å®æ¹ææ¡£ä¹ web',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring MVC ä¹è§å¾ææ¯",frontmatter:{title:"Spring MVC ä¹è§å¾ææ¯",date:"2023-02-17T11:21:25.000Z",categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","Web","View"],permalink:"/pages/251e31/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/06.Spring%E8%A7%86%E5%9B%BE.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/06.Springè§å¾.md",key:"v-63e74542",path:"/pages/251e31/",headers:[{level:2,title:"Thymeleaf",slug:"thymeleaf",normalizedTitle:"thymeleaf",charIndex:52},{level:2,title:"FreeMarker",slug:"freemarker",normalizedTitle:"freemarker",charIndex:495},{level:3,title:"è§å¾éç½®",slug:"è§å¾éç½®",normalizedTitle:"è§å¾éç½®",charIndex:613},{level:3,title:"FreeMarker éç½®",slug:"freemarker-éç½®",normalizedTitle:"freemarker éç½®",charIndex:630},{level:3,title:"è¡¨åå¤ç",slug:"è¡¨åå¤ç",normalizedTitle:"è¡¨åå¤ç",charIndex:2504},{level:4,title:"ç»å®å®",slug:"ç»å®å®",normalizedTitle:"ç»å®å®",charIndex:2664},{level:4,title:"ç®åç»å®",slug:"ç®åç»å®",normalizedTitle:"ç®åç»å®",charIndex:2910},{level:4,title:"è¾å¥å®",slug:"è¾å¥å®",normalizedTitle:"è¾å¥å®",charIndex:3964},{level:4,title:"HTML è½¬ä¹",slug:"html-è½¬ä¹",normalizedTitle:"html è½¬ä¹",charIndex:3812},{level:2,title:"Groovy",slug:"groovy",normalizedTitle:"groovy",charIndex:62},{level:3,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:91},{level:3,title:"ç¤ºä¾",slug:"ç¤ºä¾",normalizedTitle:"ç¤ºä¾",charIndex:621},{level:2,title:"èæ¬è§å¾",slug:"èæ¬è§å¾",normalizedTitle:"èæ¬è§å¾",charIndex:10626},{level:3,title:"è¦æ±",slug:"è¦æ±",normalizedTitle:"è¦æ±",charIndex:11001},{level:3,title:"èæ¬æ¨¡æ¿",slug:"èæ¬æ¨¡æ¿",normalizedTitle:"èæ¬æ¨¡æ¿",charIndex:11372},{level:2,title:"JSP å JSTL",slug:"jsp-å-jstl",normalizedTitle:"jsp å jstl",charIndex:14063},{level:2,title:"RSS and Atom",slug:"rss-and-atom",normalizedTitle:"rss and atom",charIndex:14171},{level:2,title:"PDF and Excel",slug:"pdf-and-excel",normalizedTitle:"pdf and excel",charIndex:15583},{level:3,title:"ææ¡£è§å¾ç®ä»",slug:"ææ¡£è§å¾ç®ä»",normalizedTitle:"ææ¡£è§å¾ç®ä»",charIndex:15650},{level:3,title:"PDF è§å¾",slug:"pdf-è§å¾",normalizedTitle:"pdf è§å¾",charIndex:15863},{level:3,title:"Excel è§å¾",slug:"excel-è§å¾",normalizedTitle:"excel è§å¾",charIndex:15794},{level:2,title:"Jackson",slug:"jackson",normalizedTitle:"jackson",charIndex:16755},{level:3,title:"åºäº Jackson ç JSON MVC è§å¾",slug:"åºäº-jackson-ç-json-mvc-è§å¾",normalizedTitle:"åºäº jackson ç json mvc è§å¾",charIndex:16798},{level:3,title:"åºäº Jackson ç XML è§å¾",slug:"åºäº-jackson-ç-xml-è§å¾",normalizedTitle:"åºäº jackson ç xml è§å¾",charIndex:17177},{level:2,title:"XML",slug:"xml",normalizedTitle:"xml",charIndex:1140},{level:2,title:"XSLT",slug:"xslt",normalizedTitle:"xslt",charIndex:17708},{level:3,title:"Beans",slug:"beans",normalizedTitle:"beans",charIndex:18073},{level:3,title:"Controller",slug:"controller",normalizedTitle:"controller",charIndex:12460},{level:3,title:"Transformation",slug:"transformation",normalizedTitle:"transformation",charIndex:19506},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:20560}],headersStr:"Thymeleaf FreeMarker è§å¾éç½® FreeMarker éç½® è¡¨åå¤ç ç»å®å® ç®åç»å® è¾å¥å® HTML è½¬ä¹ Groovy éç½® ç¤ºä¾ èæ¬è§å¾ è¦æ± èæ¬æ¨¡æ¿ JSP å JSTL RSS and Atom PDF and Excel ææ¡£è§å¾ç®ä» PDF è§å¾ Excel è§å¾ Jackson åºäº Jackson ç JSON MVC è§å¾ åºäº Jackson ç XML è§å¾ XML XSLT Beans Controller Transformation åèèµæ",content:'# Spring MVC ä¹è§å¾ææ¯\n\nSpring MVC ä¸­è§å¾ææ¯çä½¿ç¨æ¯å¯ææçãæ è®ºå³å®ä½¿ç¨ ThymeleafãGroovy ç­æ¨¡æ¿å¼æãJSP è¿æ¯å¶ä»ææ¯ï¼é½å¯ä»¥éè¿éç½®æ¥æ´æ¹ã\n\nSpring MVC çè§å¾ä½äºè¯¥åºç¨ç¨åºçåé¨ä¿¡ä»»è¾¹çåã è§å¾å¯ä»¥è®¿é®åºç¨ç¨åºä¸ä¸æçææ beanã å æ­¤ï¼ä¸å»ºè®®å¨æ¨¡æ¿å¯ç±å¤é¨æºç¼è¾çåºç¨ç¨åºä¸­ä½¿ç¨ Spring MVC çæ¨¡æ¿æ¯æï¼å ä¸ºè¿å¯è½ä¼äº§çå®å¨éæ£ã\n\n\n# Thymeleaf\n\nThymeleaf æ¯ä¸ä¸ªç°ä»£æå¡å¨ç«¯ Java æ¨¡æ¿å¼æï¼å®å¼ºè°èªç¶ç HTML æ¨¡æ¿ï¼å¯ä»¥éè¿åå»å¨æµè§å¨ä¸­é¢è§ï¼èæ éè¿è¡æå¡å¨ï¼è¿å¯¹äº UI æ¨¡æ¿çç¬ç«å·¥ä½ï¼ä¾å¦ï¼ç±è®¾è®¡å¸ï¼éå¸¸æå¸®å©ã\n\nThymeleaf ä¸ Spring MVC çéæç± Thymeleaf é¡¹ç®ç®¡çã éç½®æ¶åä¸äº bean å£°æï¼ä¾å¦ ServletContextTemplateResolverãSpringTemplateEngine å ThymeleafViewResolverã æå³è¯¦ç»ä¿¡æ¯ï¼è¯·åé Thymeleaf+Springã\n\n\n# FreeMarker\n\nApache FreeMarker æ¯ä¸ä¸ªæ¨¡æ¿å¼æï¼ç¨äºçæä» HTML å°çµå­é®ä»¶ç­ä»»ä½ç±»åçææ¬åå®¹ã Spring æ¡æ¶åç½®äº Spring MVC ä¸ FreeMarker æ¨¡æ¿ç»åä½¿ç¨çéæã\n\n\n# è§å¾éç½®\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½å° FreeMarker éç½®ä¸ºè§å¾ææ¯ï¼\n\n@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configureViewResolvers(ViewResolverRegistry registry) {\n        registry.freeMarker();\n    }\n\n    // Configure FreeMarker...\n\n    @Bean\n    public FreeMarkerConfigurer freeMarkerConfigurer() {\n        FreeMarkerConfigurer configurer = new FreeMarkerConfigurer();\n        configurer.setTemplateLoaderPath("/WEB-INF/freemarker");\n        return configurer;\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½å¨ XML ä¸­éç½®ç¸åçåå®¹ï¼\n\n<mvc:annotation-driven/>\n\n<mvc:view-resolvers>\n    <mvc:freemarker/>\n</mvc:view-resolvers>\n\n\x3c!-- Configure FreeMarker... --\x3e\n<mvc:freemarker-configurer>\n    <mvc:template-loader-path location="/WEB-INF/freemarker"/>\n</mvc:freemarker-configurer>\n\n\næèï¼æ¨ä¹å¯ä»¥å£°æ FreeMarkerConfigurer ä»¥å®å¨æ§å¶ææå±æ§ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">\n    <property name="templateLoaderPath" value="/WEB-INF/freemarker/"/>\n</bean>\n\n\næ¨çæ¨¡æ¿éè¦å­å¨å¨åé¢ç¤ºä¾ä¸­æç¤ºç FreeMarkerConfigurer æå®çç®å½ä¸­ãé´äºåé¢çéç½®ï¼å¦ææ¨çæ§å¶å¨è¿åè§å¾åç§° welcomeï¼è§£æå¨å°æ¥æ¾ /WEB-INF/freemarker/welcome.ftl æ¨¡æ¿ã\n\n\n# FreeMarker éç½®\n\nå¯ä»¥éè¿å¨ FreeMarkerConfigurer ä¸è®¾ç½®éå½ç bean å±æ§ï¼å° FreeMarker \'Settings\' å \'SharedVariables\' ç´æ¥ä¼ éç» FreeMarker Configuration å¯¹è±¡ï¼ç± Spring ç®¡çï¼ã freemarkerSettings å±æ§éè¦ä¸ä¸ª java.util.Properties å¯¹è±¡ï¼freemarkerVariables å±æ§éè¦ä¸ä¸ª java.util.Mapã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨ FreeMarkerConfigurerï¼\n\n<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">\n    <property name="templateLoaderPath" value="/WEB-INF/freemarker/"/>\n    <property name="freemarkerVariables">\n        <map>\n            <entry key="xml_escape" value-ref="fmXmlEscape"/>\n        </map>\n    </property>\n</bean>\n\n<bean id="fmXmlEscape" class="freemarker.template.utility.XmlEscape"/>\n\n\næå³åºç¨äº Configuration å¯¹è±¡çè®¾ç½®ååéçè¯¦ç»ä¿¡æ¯ï¼è¯·åé FreeMarker ææ¡£ã\n\n\n# è¡¨åå¤ç\n\nSpring æä¾äºä¸ä¸ªç¨äº JSP çæ è®°åºï¼å¶ä¸­åå«ä¸ä¸ª <spring:bind/> åç´ ã æ­¤åç´ ä¸»è¦è®©è¡¨åæ¾ç¤ºæ¥èªè¡¨åæ¯æå¯¹è±¡çå¼ï¼å¹¶æ¾ç¤ºæ¥èª Web æä¸å¡å±ä¸­çâéªè¯å¨âçéªè¯å¤±è´¥çç»æã Spring è¿æ¯æ FreeMarker ä¸­çç¸ååè½ï¼ä»¥åç¨äºçæè¡¨åè¾å¥åç´ çé¢å¤ä¾¿å©å®ã\n\n# ç»å®å®\n\nå¨ FreeMarker ç spring-webmvc.jar æä»¶ä¸­ç»´æ¤äºä¸ç»æ åå®ï¼å æ­¤å®ä»¬å§ç»å¯ç¨äºéå½éç½®çåºç¨ç¨åºã\n\nSpring æ¨¡æ¿åºä¸­å®ä¹çä¸äºå®è¢«è®¤ä¸ºæ¯åé¨çï¼ç§æçï¼ï¼ä½å®å®ä¹ä¸­ä¸å­å¨è¿æ ·çèå´ï¼è¿ä½¿å¾ææå®å¯¹è°ç¨ä»£ç åç¨æ·æ¨¡æ¿é½æ¯å¯è§çãä»¥ä¸é¨åä»å³æ³¨æ¨éè¦ä»æ¨¡æ¿ä¸­ç´æ¥è°ç¨çå®ãå¦ææ¨æ³ç´æ¥æ¥çå®ä»£ç ï¼è¯¥æä»¶åä¸º spring.ftl ï¼ä½äº org.springframework.web.servlet.view.freemarker åä¸­ã\n\n# ç®åç»å®\n\nå¨åºäºåå½ Spring MVC æ§å¶å¨è¡¨åè§å¾ç FreeMarker æ¨¡æ¿ç HTML è¡¨åä¸­ï¼æ¨å¯ä»¥ä½¿ç¨ç±»ä¼¼äºä¸ä¸ä¸ªç¤ºä¾çä»£ç æ¥ç»å®å°å­æ®µå¼ï¼å¹¶ä»¥ç±»ä¼¼äº JSP ç­ä»·ç©çæ¹å¼ä¸ºæ¯ä¸ªè¾å¥å­æ®µæ¾ç¤ºéè¯¯æ¶æ¯ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ª personForm è§å¾ï¼\n\n\x3c!-- FreeMarker macros have to be imported into a namespace.\n    We strongly recommend sticking to \'spring\'. --\x3e\n<#import "/spring.ftl" as spring/>\n<html>\n    ...\n    <form action="" method="POST">\n        Name:\n        <@spring.bind "personForm.name"/>\n        <input type="text"\n            name="${spring.status.expression}"\n            value="${spring.status.value?html}"/><br />\n        <#list spring.status.errorMessages as error> <b>${error}</b> <br /> </#list>\n        <br />\n        ...\n        <input type="submit" value="submit"/>\n    </form>\n    ...\n</html>\n\n\n<@spring.bind> éè¦ä¸ä¸ª \'path\' åæ°ï¼å®ç±å½ä»¤å¯¹è±¡çåç§°ï¼å®æ¯ \'command\'ï¼é¤éæ¨å¨æ§å¶å¨éç½®ä¸­æ´æ¹å®ï¼ç»æï¼å¨æ¨å¸æç»å®çå½ä»¤å¯¹è±¡åè·ä¸ä¸ªå¥ç¹åå­æ®µåç§°ã æ¨è¿å¯ä»¥ä½¿ç¨åµå¥å­æ®µï¼ä¾å¦ command.address.streetã bind å®éç¨ web.xml ä¸­ç ServletContext åæ° defaultHtmlEscape æå®çé»è®¤ HTML è½¬ä¹è¡ä¸ºã\n\nç§°ä¸º <@spring.bindEscaped> çå®çå¦ä¸ç§å½¢å¼éç¨ç¬¬äºä¸ªåæ°ï¼è¯¥åæ°æç¡®æå®æ¯å¦åºå¨ç¶æéè¯¯æ¶æ¯æå¼ä¸­ä½¿ç¨ HTML è½¬ä¹ã æ¨å¯ä»¥æ ¹æ®éè¦å°å¶è®¾ç½®ä¸º true æ false ã éå çè¡¨åå¤çå®ç®åäº HTML è½¬ä¹çä½¿ç¨ï¼æ¨åºè¯¥å°½å¯è½ä½¿ç¨è¿äºå®ã\n\n# è¾å¥å®\n\nFreeMarker çéå ä¾¿å©å®ç®åäºç»å®åè¡¨åçæï¼åæ¬éªè¯éè¯¯æ¾ç¤ºï¼ã æ°¸è¿ä¸éè¦ä½¿ç¨è¿äºå®æ¥çæè¡¨åè¾å¥å­æ®µï¼æ¨å¯ä»¥å°å®ä»¬ä¸ç®åç HTML æ··åæ­éï¼æèç´æ¥è°ç¨æä»¬ä¹åå¼ºè°ç Spring ç»å®å®ã\n\nä¸è¡¨ä¸­çå¯ç¨å®æ¾ç¤ºäº FreeMarker æ¨¡æ¿ (FTL) å®ä¹åæ¯ä¸ªéç¨çåæ°åè¡¨ï¼\n\nMACRO                                                          FTL DEFINITION\nmessage (output a string from a resource bundle based on the   <@spring.message code/>\ncode parameter)\nmessageText (output a string from a resource bundle based on   <@spring.messageText code, text/>\nthe code parameter, falling back to the value of the default\nparameter)\nurl (prefix a relative URL with the applicationâs context      <@spring.url relativeUrl/>\nroot)\nformInput (standard input field for gathering user input)      <@spring.formInput path, attributes, fieldType/>\nformHiddenInput (hidden input field for submitting non-user    <@spring.formHiddenInput path, attributes/>\ninput)\nformPasswordInput (standard input field for gathering          <@spring.formPasswordInput path, attributes/>\npasswords. Note that no value is ever populated in fields of\nthis type.)\nformTextarea (large text field for gathering long, freeform    <@spring.formTextarea path, attributes/>\ntext input)\nformSingleSelect (drop down box of options that let a single   <@spring.formSingleSelect path, options, attributes/>\nrequired value be selected)\nformMultiSelect (a list box of options that let the user       <@spring.formMultiSelect path, options, attributes/>\nselect 0 or more values)\nformRadioButtons (a set of radio buttons that let a single     <@spring.formRadioButtons path, options separator,\nselection be made from the available choices)                  attributes/>\nformCheckboxes (a set of checkboxes that let 0 or more         <@spring.formCheckboxes path, options, separator,\nvalues be selected)                                            attributes/>\nformCheckbox (a single checkbox)                               <@spring.formCheckbox path, attributes/>\nshowErrors (simplify display of validation errors for the      <@spring.showErrors separator, classOrStyle/>\nbound field)\n\nä¸è¿°ä»»ä½å®çåæ°å·æä¸è´çå«ä¹ï¼\n\n * path: è¦ç»å®å°çå­æ®µçåç§°ï¼ä¾å¦ï¼âcommand.nameâï¼\n * options: å¯å¨è¾å¥å­æ®µä¸­éæ©çææå¯ç¨å¼ç Mapãæ å°çé®è¡¨ç¤ºä»è¡¨ååä¼ å¹¶ç»å®å°å½ä»¤å¯¹è±¡çå¼ãéå¯¹é®å­å¨ç map å¯¹è±¡æ¯å¨è¡¨åä¸æ¾ç¤ºç»ç¨æ·çæ ç­¾ï¼å¯è½ä¸è¡¨ååä¼ çç¸åºå¼ä¸åãéå¸¸ï¼è¿æ ·çå°å¾ç±æ§å¶å¨æä¾ä½ä¸ºåèæ°æ®ãæ¨å¯ä»¥ä½¿ç¨ä»»ä½ Map å®ç°ï¼å·ä½åå³äºæéçè¡ä¸ºãå¯¹äºä¸¥æ ¼æåºçæ å°ï¼æ¨å¯ä»¥ä½¿ç¨å¸¦æåéçâæ¯è¾å¨âç SortedMapï¼ä¾å¦ TreeMapï¼ï¼å¯¹äºåºææå¥é¡ºåºè¿åå¼çä»»ææ å°ï¼ä½¿ç¨âLinkedHashMapâæâLinkedMapâ å¬å±æ¶èã\n * separator: å¨å¤ä¸ªéé¡¹å¯ç¨ä½ç¦»æ£åç´ ï¼åéæé®æå¤éæ¡ï¼çæåµä¸ï¼ç¨äºåéåè¡¨ä¸­æ¯ä¸ªéé¡¹çå­ç¬¦åºåï¼ä¾å¦ <br>ï¼ã\n * attributes: è¦åå«å¨ HTML æ è®°æ¬èº«ä¸­çä»»ææ è®°æææ¬çéå å­ç¬¦ä¸²ãè¯¥å­ç¬¦ä¸²æå­é¢ææç±å®åæ¾ãä¾å¦ï¼å¨ textarea å­æ®µä¸­ï¼æ¨å¯ä»¥æä¾å±æ§ï¼ä¾å¦ârows="5" cols="60"\'ï¼ï¼æèæ¨å¯ä»¥ä¼ éæ ·å¼ä¿¡æ¯ï¼ä¾å¦ \'style="border:1px solid silver"\'ã\n * classOrStyle: å¯¹äº showErrors å®ï¼åè£æ¯ä¸ªéè¯¯ç span åç´ ä½¿ç¨ç CSS ç±»çåç§°ãå¦ææªæä¾ä»»ä½ä¿¡æ¯ï¼æå¼ä¸ºç©ºï¼ï¼éè¯¯å°åå«å¨ <b></b> æ ç­¾ä¸­ã\n\nä»¥ä¸é¨åæ¦è¿°äºå®çç¤ºä¾ã\n\nè¾å¥å­æ®µ\n\nformInput å®éç¨ path åæ° (command.name) åä¸ä¸ªé¢å¤ç attributes åæ°ï¼å¨æ¥ä¸æ¥çç¤ºä¾ä¸­ä¸ºç©ºï¼ãè¯¥å®ä¸ææå¶ä»è¡¨åçæå®ä¸èµ·å¯¹è·¯å¾åæ°æ§è¡éå¼ Spring ç»å®ãç»å®å¨æ°ç»å®åçä¹åä¸ç´ææï¼å æ­¤ showErrors å®ä¸éè¦åæ¬¡ä¼ éè·¯å¾åæ°ââå®å¯¹ä¸æ¬¡åå»ºç»å®çå­æ®µè¿è¡æä½ã\n\nshowErrors å®æ¥åä¸ä¸ªåéç¬¦åæ°ï¼ç¨äºåéç»å®å­æ®µä¸çå¤ä¸ªéè¯¯çå­ç¬¦ï¼ï¼è¿æ¥åç¬¬äºä¸ªåæ°ââè¿æ¬¡æ¯ç±»åææ ·å¼å±æ§ãè¯·æ³¨æï¼FreeMarker å¯ä»¥ä¸º attributes åæ°æå®é»è®¤å¼ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨ formInput å showErrors å®ï¼\n\n<@spring.formInput "command.name"/>\n<@spring.showErrors "<br>"/>\n\n\nä¸ä¸ä¸ªç¤ºä¾æ¾ç¤ºè¡¨åçæ®µçè¾åºï¼çæåç§°å­æ®µå¹¶å¨è¡¨åæäº¤åæ¾ç¤ºéªè¯éè¯¯ï¼è¯¥å­æ®µä¸­æ²¡æä»»ä½å¼ãéªè¯éè¿ Spring çéªè¯æ¡æ¶è¿è¡ã\n\nçæç HTML ç±»ä¼¼äºä»¥ä¸ç¤ºä¾ï¼\n\nName:\n<input type="text" name="name" value="">\n<br>\n    <b>required</b>\n<br>\n<br>\n\n\nformTextarea å®çå·¥ä½æ¹å¼ä¸ formInput å®ç¸åï¼å¹¶ä¸æ¥åç¸åçåæ°åè¡¨ãéå¸¸ï¼ç¬¬äºä¸ªåæ° (attributes) ç¨äºä¼ éæ ·å¼ä¿¡æ¯æ textarea ç rows å cols å±æ§ã\n\néä¸­å­æ®µ\n\næ¨å¯ä»¥ä½¿ç¨åä¸ªéæ©å­æ®µå®å¨ HTML è¡¨åä¸­çæå¸¸è§ç UI å¼éæ©è¾å¥ï¼\n\n * formSingleSelect\n * formMultiSelect\n * formRadioButtons\n * formCheckboxes\n\nåä¸ªå®ä¸­çæ¯ä¸ä¸ªé½æ¥åä¸ä¸ªâMapâéé¡¹ï¼å¶ä¸­åå«è¡¨åå­æ®µçå¼åä¸è¯¥å¼å¯¹åºçæ ç­¾ãå¼åæ ç­¾å¯ä»¥ç¸åã\n\nä¸ä¸ä¸ªä¾å­æ¯ FTL ä¸­çåéæé®ãè¡¨åæ¯æå¯¹è±¡ä¸ºæ­¤å­æ®µæå®é»è®¤å¼âä¼¦æ¦âï¼å æ­¤æ ééªè¯ãæ¸²æè¡¨åæ¶ï¼æ´ä¸ªå¯ä¾éæ©çåå¸åè¡¨ä½ä¸ºåèæ°æ®æä¾å¨æ¨¡åä¸­ï¼åç§°ä¸º cityMapãä»¥ä¸æ¸åæ¾ç¤ºäºç¤ºä¾ï¼\n\n...\nTown:\n<@spring.formRadioButtons "command.address.town", cityMap, ""/><br><br>\n\n\nåé¢çæ¸ååç°ä¸è¡åéæé®ï¼ä¸ä¸ªç¨äº cityMap ä¸­çæ¯ä¸ªå¼ï¼å¹¶ä½¿ç¨åéç¬¦ ""ãæ²¡ææä¾é¢å¤çå±æ§ï¼ç¼ºå°å®çæåä¸ä¸ªåæ°ï¼ã cityMap å¯¹å°å¾ä¸­çæ¯ä¸ªé®å¼å¯¹ä½¿ç¨ç¸åç Stringãå°å¾çé®æ¯è¡¨åå®éä½ä¸º POST è¯·æ±åæ°æäº¤çåå®¹ãå°å¾å¼æ¯ç¨æ·çå°çæ ç­¾ãå¨åé¢çç¤ºä¾ä¸­ï¼ç»å®ä¸ä¸ªç¥ååå¸çåè¡¨åè¡¨åæ¯æå¯¹è±¡ä¸­çé»è®¤å¼ï¼HTML ç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\nTown:\n<input type="radio" name="address.town" value="London">London</input>\n<input type="radio" name="address.town" value="Paris" checked="checked">Paris</input>\n<input type="radio" name="address.town" value="New York">New York</input>\n\n\nå¦ææ¨çåºç¨ç¨åºå¸æéè¿åé¨ä»£ç å¤çåå¸ï¼ä¾å¦ï¼ï¼æ¨å¯ä»¥ä½¿ç¨åéçé®åå»ºä»£ç æ å°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nprotected Map<String, ?> referenceData(HttpServletRequest request) throws Exception {\n    Map<String, String> cityMap = new LinkedHashMap<>();\n    cityMap.put("LDN", "London");\n    cityMap.put("PRS", "Paris");\n    cityMap.put("NYC", "New York");\n\n    Map<String, Object> model = new HashMap<>();\n    model.put("cityMap", cityMap);\n    return model;\n}\n\n\nä»£ç ç°å¨çæè¾åºï¼å¶ä¸­æ çº¿çµå¼æ¯ç¸å³ä»£ç ï¼ä½ç¨æ·ä»ç¶çå°æ´ç¨æ·åå¥½çåå¸åç§°ï¼å¦ä¸æç¤ºï¼\n\nTown:\n<input type="radio" name="address.town" value="LDN">London</input>\n<input type="radio" name="address.town" value="PRS" checked="checked">Paris</input>\n<input type="radio" name="address.town" value="NYC">New York</input>\n\n\n# HTML è½¬ä¹\n\nåé¢æè¿°çè¡¨åå®çé»è®¤ä½¿ç¨å¯¼è´ HTML åç´ ç¬¦å HTML 4.01ï¼å¹¶ä¸ä½¿ç¨ web.xml æä»¶ä¸­å®ä¹ç HTML è½¬ä¹çé»è®¤å¼ï¼å¦ Spring çç»å®æ¯ææä½¿ç¨çé£æ ·ã è¦ä½¿åç´ ç¬¦å XHTML æè¦çé»è®¤ç HTML è½¬ä¹å¼ï¼æ¨å¯ä»¥å¨æ¨¡æ¿ä¸­æå®ä¸¤ä¸ªåéï¼æå¨æ¨¡åä¸­ï¼å®ä»¬å¯¹æ¨¡æ¿å¯è§ï¼ã å¨æ¨¡æ¿ä¸­æå®å®ä»¬çå¥½å¤æ¯å®ä»¬å¯ä»¥å¨ç¨åçæ¨¡æ¿å¤çä¸­æ´æ¹ä¸ºä¸åçå¼ï¼ä»¥ä¾¿ä¸ºè¡¨åä¸­çä¸åå­æ®µæä¾ä¸åçè¡ä¸ºã\n\nè¦ä¸ºæ¨çæ ç­¾åæ¢å° XHTML åè§æ§ï¼è¯·ä¸ºåä¸º xhtmlCompliant çæ¨¡åæä¸ä¸æåéæå® true å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<#-- for FreeMarker --\x3e\n<#assign xhtmlCompliant = true>\n\n\nå¤çæ­¤æä»¤åï¼Spring å®çæçä»»ä½åç´ ç°å¨é½ç¬¦å XHTMLã\n\nä»¥ç±»ä¼¼çæ¹å¼ï¼æ¨å¯ä»¥ä¸ºæ¯ä¸ªå­æ®µæå® HTML è½¬ä¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<#-- until this point, default HTML escaping is used --\x3e\n\n<#assign htmlEscape = true>\n<#-- next field will use HTML escaping --\x3e\n<@spring.formInput "command.name"/>\n\n<#assign htmlEscape = false in spring>\n<#-- all future fields will be bound with HTML escaping off --\x3e\n\n\n\n# Groovy\n\nGroovy æ è®°æ¨¡æ¿å¼æ ä¸»è¦ç¨äºçæç±»ä¼¼ XML çæ è®°ï¼XMLãXHTMLãHTML5 ç­ï¼ï¼ä½å¯ä»¥ä½¿ç¨å®æ¥çæä»»ä½åºäºææ¬çåå®¹ã Spring Framework å·æå° Spring MVC ä¸ Groovy æ è®°ç»åä½¿ç¨çåç½®éæã\n\n\n# éç½®\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½éç½® Groovy æ è®°æ¨¡æ¿å¼æï¼\n\n@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configureViewResolvers(ViewResolverRegistry registry) {\n        registry.groovy();\n    }\n\n    // Configure the Groovy Markup Template Engine...\n\n    @Bean\n    public GroovyMarkupConfigurer groovyMarkupConfigurer() {\n        GroovyMarkupConfigurer configurer = new GroovyMarkupConfigurer();\n        configurer.setResourceLoaderPath("/WEB-INF/");\n        return configurer;\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½å¨ XML ä¸­éç½®ç¸åçåå®¹ï¼\n\n<mvc:annotation-driven/>\n\n<mvc:view-resolvers>\n    <mvc:groovy/>\n</mvc:view-resolvers>\n\n\x3c!-- Configure the Groovy Markup Template Engine... --\x3e\n<mvc:groovy-configurer resource-loader-path="/WEB-INF/"/>\n\n\n\n# ç¤ºä¾\n\nä¸ä¼ ç»çæ¨¡æ¿å¼æä¸åï¼Groovy æ è®°ä¾èµäºä½¿ç¨æå»ºå¨è¯­æ³ç DSLãä»¥ä¸ç¤ºä¾æ¾ç¤ºäº HTML é¡µé¢çç¤ºä¾æ¨¡æ¿ï¼\n\nyieldUnescaped \'<!DOCTYPE html>\'\nhtml(lang:\'en\') {\n    head {\n        meta(\'http-equiv\':\'"Content-Type" content="text/html; charset=utf-8"\')\n        title(\'My page\')\n    }\n    body {\n        p(\'This is an example of HTML contents\')\n    }\n}\n\n\n\n# èæ¬è§å¾\n\nSpring æä¸ä¸ªåç½®çéæï¼å¯ä»¥å° Spring MVC ä¸ä»»ä½å¯ä»¥å¨ JSR-223 ä¹ä¸è¿è¡çæ¨¡æ¿åºä¸èµ·ä½¿ç¨ Java èæ¬å¼æã æä»¬å¨ä¸åçèæ¬å¼æä¸æµè¯äºä»¥ä¸æ¨¡æ¿åºï¼\n\nèæ¬åº                        èæ¬å¼æ\nHandlebars                 Nashorn\nMustache                   Nashorn\nReact                      Nashorn\nEJS                        Nashorn\nERB                        JRuby\nString templates           Jython\nKotlin Script templating   Kotlin\n\n\n# è¦æ±\n\néè¦å¨ç±»è·¯å¾ä¸­åå«èæ¬å¼æï¼å·ä½ç»èå èæ¬å¼æèå¼ï¼\n\n * The Nashorn Java 8+ æä¾äº JavaScript å¼æãå¼ºçå»ºè®®ä½¿ç¨å¯ç¨çææ°æ´æ°çæ¬ã\n * JRuby åºè¯¥ä½ä¸º Ruby æ¯æçä¾èµé¡¹æ·»å ã\n * Jython åºè¯¥ä½ä¸º Python æ¯æçä¾èµé¡¹æ·»å ã\n * org.jetbrains.kotlin:kotlin-script-util ä¾èµé¡¹ååå« org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngineFactory è¡ç META-INF/services/javax.script.ScriptEngineFactory æä»¶åºè¯¥è¢«æ·»å  Kotlin èæ¬æ¯æã æå³è¯¦ç»ä¿¡æ¯ï¼è¯·åéæ­¤ç¤ºä¾ã\n\næ¨éè¦æèæ¬æ¨¡æ¿åºã ä¸º JavaScript åå°è¿ä¸ç¹çä¸ç§æ¹æ³æ¯éè¿ WebJarsã\n\n\n# èæ¬æ¨¡æ¿\n\nå¯ä»¥å£°æä¸ä¸ª ScriptTemplateConfigurer æ¥æå®è¦ä½¿ç¨çèæ¬å¼æãè¦å è½½çèæ¬æä»¶ãè°ç¨ä»ä¹å½æ°æ¥æ¸²ææ¨¡æ¿ç­ç­ã ä»¥ä¸ç¤ºä¾ä½¿ç¨ Mustache æ¨¡æ¿å Nashorn JavaScript å¼æï¼\n\n@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configureViewResolvers(ViewResolverRegistry registry) {\n        registry.scriptTemplate();\n    }\n\n    @Bean\n    public ScriptTemplateConfigurer configurer() {\n        ScriptTemplateConfigurer configurer = new ScriptTemplateConfigurer();\n        configurer.setEngineName("nashorn");\n        configurer.setScripts("mustache.js");\n        configurer.setRenderObject("Mustache");\n        configurer.setRenderFunction("render");\n        return configurer;\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº XML ä¸­çç¸åéç½®ï¼\n\n<mvc:annotation-driven/>\n\n<mvc:view-resolvers>\n    <mvc:script-template/>\n</mvc:view-resolvers>\n\n<mvc:script-template-configurer engine-name="nashorn" render-object="Mustache" render-function="render">\n    <mvc:script location="mustache.js"/>\n</mvc:script-template-configurer>\n\n\nå¯¹äº Java å XML éç½®ï¼controller çèµ·æ¥æ²¡æä»ä¹ä¸åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Controller\npublic class SampleController {\n\n    @GetMapping("/sample")\n    public String test(Model model) {\n        model.addAttribute("title", "Sample title");\n        model.addAttribute("body", "Sample body");\n        return "template";\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº Mustache æ¨¡æ¿ï¼\n\n<html>\n  <head>\n    <title>{{title}}</title>\n  </head>\n  <body>\n    <p>{{body}}</p>\n  </body>\n</html>\n\n\nä½¿ç¨ä»¥ä¸åæ°è°ç¨æ¸²æå½æ°ï¼\n\n * String template: æ¨¡æ¿åå®¹\n * å°å¾æ¨¡åï¼è§å¾æ¨¡å\n * RenderingContext renderingContextï¼ RenderingContext åè®¸è®¿é®åºç¨ä¸ä¸æãè¯­è¨ç¯å¢ãæ¨¡æ¿å è½½å¨å URLï¼èª 5.0 èµ·ï¼\n\nå¦ææ¨çæ¨¡æ¿ææ¯éè¦ä¸äºèªå®ä¹ï¼æ¨å¯ä»¥æä¾ä¸ä¸ªå®ç°èªå®ä¹æ¸²æåè½çèæ¬ã ä¾å¦ï¼Handlerbars éè¦å¨ä½¿ç¨ä¹åç¼è¯æ¨¡æ¿ï¼å¹¶ä¸éè¦ä¸ä¸ª polyfill æ¥æ¨¡æä¸äºæµè§å¨å·¥å·ï¼ä½å¨æå¡å¨ç«¯èæ¬å¼æä¸­ä¸å¯ç¨ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configureViewResolvers(ViewResolverRegistry registry) {\n        registry.scriptTemplate();\n    }\n\n    @Bean\n    public ScriptTemplateConfigurer configurer() {\n        ScriptTemplateConfigurer configurer = new ScriptTemplateConfigurer();\n        configurer.setEngineName("nashorn");\n        configurer.setScripts("polyfill.js", "handlebars.js", "render.js");\n        configurer.setRenderFunction("render");\n        configurer.setSharedEngine(false);\n        return configurer;\n    }\n}\n\n\npolyfill.js åªå®ä¹äº Handlebars æ­£å¸¸è¿è¡æéç window å¯¹è±¡ï¼å¦ä¸ï¼\n\nvar window = {}\n\n\nè¿ä¸ªåºæ¬ç render.js å®ç°å¨ä½¿ç¨ä¹åç¼è¯æ¨¡æ¿ã çäº§å°±ç»ªçå®ç°è¿åºè¯¥å­å¨ä»»ä½éå¤ä½¿ç¨çç¼å­æ¨¡æ¿æé¢ç¼è¯æ¨¡æ¿ã æ¨å¯ä»¥å¨èæ¬ç«¯è¿æ ·åï¼å¹¶å¤çæ¨éè¦çä»»ä½å®å¶ââç®¡çæ¨¡æ¿å¼æéç½®ï¼ä¾å¦ï¼ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\nfunction render(template, model) {\n  var compiledTemplate = Handlebars.compile(template)\n  return compiledTemplate(model)\n}\n\n\næ¥ç Spring Framework ååæµè¯ï¼Java åèµæºï¼ä»¥è·åæ´å¤éç½®ç¤ºä¾ã\n\n\n# JSP å JSTL\n\nSpring Framework å·æå° Spring MVC ä¸ JSP å JSTL ç»åä½¿ç¨çåç½®éæã\n\n> æ´å¤åå®¹è¯¦è§ï¼Spring å®æ¹ææ¡£ä¹ JSP and JSTL\n\n\n# RSS and Atom\n\nAbstractAtomFeedView å AbstractRssFeedView é½ç»§æ¿èª AbstractFeedView åºç±»ï¼åå«ç¨äºæä¾ Atom å RSS Feed è§å¾ã å®ä»¬åºäº ROME é¡¹ç®ï¼ä½äº org.springframework.web.servlet.view.feed åä¸­ã\n\nAbstractAtomFeedView è¦æ±æ¨å®ç° buildFeedEntries() æ¹æ³å¹¶å¯éæ©è¦ç buildFeedMetadata() æ¹æ³ï¼é»è®¤å®ç°ä¸ºç©ºï¼ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\npublic class SampleContentAtomView extends AbstractAtomFeedView {\n\n    @Override\n    protected void buildFeedMetadata(Map<String, Object> model,\n            Feed feed, HttpServletRequest request) {\n        // implementation omitted\n    }\n\n    @Override\n    protected List<Entry> buildFeedEntries(Map<String, Object> model,\n            HttpServletRequest request, HttpServletResponse response) throws Exception {\n        // implementation omitted\n    }\n}\n\n\nç±»ä¼¼çè¦æ±éç¨äºå®ç° AbstractRssFeedViewï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class SampleContentRssView extends AbstractRssFeedView {\n\n    @Override\n    protected void buildFeedMetadata(Map<String, Object> model,\n            Channel feed, HttpServletRequest request) {\n        // implementation omitted\n    }\n\n    @Override\n    protected List<Item> buildFeedItems(Map<String, Object> model,\n            HttpServletRequest request, HttpServletResponse response) throws Exception {\n        // implementation omitted\n    }\n}\n\n\nbuildFeedItems() å buildFeedEntries() æ¹æ³ä¼ å¥ HTTP è¯·æ±ï¼ä»¥é²æ¨éè¦è®¿é® Localeã ä¼ å¥ HTTP ååºä»ç¨äºè®¾ç½® cookie æå¶ä» HTTP æ å¤´ã æ¹æ³è¿ååï¼æè¦ä¼èªå¨åå¥ååºå¯¹è±¡ã\n\næå³åå»º Atom è§å¾çç¤ºä¾ï¼è¯·åé Alef Arendsen ç Spring Team åå®¢ entryã\n\n\n# PDF and Excel\n\nSpring æä¾äºè¿å HTML ä»¥å¤çè¾åºçæ¹æ³ï¼åæ¬ PDF å Excel çµå­è¡¨æ ¼ã\n\n\n# ææ¡£è§å¾ç®ä»\n\nHTML é¡µé¢å¹¶ä¸æ»æ¯ç¨æ·æ¥çæ¨¡åè¾åºçæä½³æ¹å¼ï¼Spring ä½¿ä»æ¨¡åæ°æ®å¨æçæ PDF ææ¡£æ Excel çµå­è¡¨æ ¼åå¾ç®åã è¯¥ææ¡£æ¯è§å¾ï¼ä»æå¡å¨æµåºæ­£ç¡®çåå®¹ç±»åï¼ï¼å¸æï¼ä½¿å®¢æ·ç«¯ PC è½å¤è¿è¡ä»ä»¬ççµå­è¡¨æ ¼æ PDF æ¥çå¨åºç¨ç¨åºä½ä¸ºååºã\n\nä¸ºäºä½¿ç¨ Excel è§å¾ï¼æ¨éè¦å° Apache POI åºæ·»å å°ç±»è·¯å¾ä¸­ã å¯¹äº PDF çæï¼æ¨éè¦æ·»å ï¼æå¥½ï¼OpenPDF åºã\n\n\n# PDF è§å¾\n\nåè¯åè¡¨çç®å PDF è§å¾å¯ä»¥æ©å± org.springframework.web.servlet.view.document.AbstractPdfView å¹¶å®ç° buildPdfDocument() æ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class PdfWordList extends AbstractPdfView {\n\n    protected void buildPdfDocument(Map<String, Object> model, Document doc, PdfWriter writer,\n            HttpServletRequest request, HttpServletResponse response) throws Exception {\n\n        List<String> words = (List<String>) model.get("wordList");\n        for (String word : words) {\n            doc.add(new Paragraph(word));\n        }\n    }\n}\n\n\næ§å¶å¨å¯ä»¥ä»å¤é¨è§å¾å®ä¹ï¼æåç§°å¼ç¨å®ï¼æä½ä¸ºå¤çç¨åºæ¹æ³ç View å®ä¾è¿åæ­¤ç±»è§å¾ã\n\n\n# Excel è§å¾\n\nä» Spring Framework 4.2 å¼å§ï¼org.springframework.web.servlet.view.document.AbstractXlsView ä½ä¸º Excel è§å¾çåºç±»æä¾ã å®åºäº Apache POIï¼å·æä¸é¨çå­ç±»ï¼AbstractXlsxView å AbstractXlsxStreamingViewï¼ï¼åä»£äºè¿æ¶ç AbstractExcelView ç±»ã\n\nç¼ç¨æ¨¡åç±»ä¼¼äº AbstractPdfViewï¼ä»¥ buildExcelDocument() ä½ä¸ºæ ¸å¿æ¨¡æ¿æ¹æ³ï¼æ§å¶å¨è½å¤ä»å¤é¨å®ä¹ï¼æåç§°ï¼æä½ä¸ºå¤çç¨åºæ¹æ³ç View å®ä¾è¿åæ­¤ç±»è§å¾ã\n\n\n# Jackson\n\nSpring æä¾å¯¹ Jackson JSON åºçæ¯æã\n\n\n# åºäº Jackson ç JSON MVC è§å¾\n\nMappingJackson2JsonView ä½¿ç¨ Jackson åºç ObjectMapper å°ååºåå®¹æ¸²æä¸º JSONã é»è®¤æåµä¸ï¼æ¨¡åæ å°çå¨é¨åå®¹ï¼ç¹å®äºæ¡æ¶çç±»é¤å¤ï¼é½ç¼ç ä¸º JSONã å¯¹äºéè¦è¿æ»¤ map åå®¹çæåµï¼æ¨å¯ä»¥ä½¿ç¨ modelKeys å±æ§æå®ä¸ç»ç¹å®çæ¨¡åå±æ§è¿è¡ç¼ç ã æ¨è¿å¯ä»¥ä½¿ç¨ extractValueFromSingleKeyModel å±æ§ç´æ¥æåååºåååé®æ¨¡åä¸­çå¼ï¼èä¸æ¯ä½ä¸ºæ¨¡åå±æ§çæ å°ã\n\næ¨å¯ä»¥æ ¹æ®éè¦ä½¿ç¨ Jackson æä¾çæ³¨éèªå®ä¹ JSON æ å°ã å½æ¨éè¦è¿ä¸æ­¥æ§å¶æ¶ï¼æ¨å¯ä»¥éè¿ ObjectMapper å±æ§æ³¨å¥èªå®ä¹ ObjectMapperï¼éç¨äºéè¦ä¸ºç¹å®ç±»åæä¾èªå®ä¹ JSON åºååå¨åååºååå¨çæåµã\n\n\n# åºäº Jackson ç XML è§å¾\n\nMappingJackson2XmlView ä½¿ç¨ Jackson XML æ©å± XmlMapper å°ååºåå®¹æ¸²æä¸º XMLã å¦ææ¨¡ååå«å¤ä¸ªæ¡ç®ï¼æ¨åºè¯¥ä½¿ç¨ modelKey bean å±æ§æ¾å¼è®¾ç½®è¦åºååçå¯¹è±¡ã å¦ææ¨¡ååå«åä¸ªæ¡ç®ï¼å®ä¼èªå¨åºååã\n\næ¨å¯ä»¥æ ¹æ®éè¦ä½¿ç¨ JAXB æ Jackson æä¾çæ³¨éèªå®ä¹ XML æ å°ãå½æ¨éè¦è¿ä¸æ­¥æ§å¶æ¶ï¼æ¨å¯ä»¥éè¿ ObjectMapper å±æ§æ³¨å¥èªå®ä¹ XmlMapperï¼å¯¹äºéè¦ä¸ºç¹å®ç±»åæä¾åºååå¨åååºååå¨çèªå®ä¹ XML çæåµ\n\n\n# XML\n\nMarshallingView ä½¿ç¨ XML Marshallerï¼å¨ org.springframework.oxm åä¸­å®ä¹ï¼å°ååºåå®¹æ¸²æä¸º XMLã æ¨å¯ä»¥ä½¿ç¨ MarshallingView å®ä¾ç modelKey å±æ§æ¾å¼è®¾ç½®è¦ç¼ç»çå¯¹è±¡ã æèï¼è§å¾éåæææ¨¡åå±æ§å¹¶ç¼ç» Marshaller æ¯æçç¬¬ä¸ä¸ªç±»åã æå³ org.springframework.oxm åä¸­åè½çæ´å¤ä¿¡æ¯ï¼è¯·åé Marshalling XML using O/X Mappersã\n\n\n# XSLT\n\nXSLT æ¯ XML çä¸ç§è½¬æ¢è¯­è¨ï¼ä½ä¸º Web åºç¨ç¨åºä¸­çä¸ç§è§å¾ææ¯å¾åæ¬¢è¿ã å¦ææ¨çåºç¨ç¨åºèªç¶å°å¤ç XMLï¼æèå¦ææ¨çæ¨¡åå¯ä»¥å¾å®¹æå°è½¬æ¢ä¸º XMLï¼é£ä¹ XSLT ä½ä¸ºä¸ç§è§å¾ææ¯æ¯ä¸ä¸ªä¸éçéæ©ã ä»¥ä¸é¨åå±ç¤ºäºå¦ä½çæ XML ææ¡£ä½ä¸ºæ¨¡åæ°æ®ï¼å¹¶å¨ Spring Web MVC åºç¨ç¨åºä¸­ä½¿ç¨ XSLT å¯¹å¶è¿è¡è½¬æ¢ã\n\næ­¤ç¤ºä¾æ¯ä¸ä¸ªç®åç Spring åºç¨ç¨åºï¼å®å¨ Controller ä¸­åå»ºå³é®å­åè¡¨å¹¶å°å®ä»¬æ·»å å°æ¨¡åæ å°ä¸­ã è¿åæ å°ä»¥åæä»¬ç XSLT è§å¾çè§å¾åç§°ã æå³ Spring Web MVC ç Controller æ¥å£çè¯¦ç»ä¿¡æ¯ï¼è¯·åé Annotated Controllersã XSLT æ§å¶å¨å°åè¯åè¡¨è½¬æ¢ä¸ºåå¤è½¬æ¢çç®å XML ææ¡£ã\n\n\n# Beans\n\néç½®æ¯ä¸ä¸ªç®åç Spring Web åºç¨ç¨åºçæ åéç½®ï¼MVC éç½®å¿é¡»å®ä¹ä¸ä¸ª XsltViewResolver åå¸¸è§ MVC æ³¨ééç½®ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n@EnableWebMvc\n@ComponentScan\n@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Bean\n    public XsltViewResolver xsltViewResolver() {\n        XsltViewResolver viewResolver = new XsltViewResolver();\n        viewResolver.setPrefix("/WEB-INF/xsl/");\n        viewResolver.setSuffix(".xslt");\n        return viewResolver;\n    }\n}\n\n\n\n# Controller\n\næä»¬è¿éè¦ä¸ä¸ªæ§å¶å¨æ¥å°è£æä»¬çåè¯çæé»è¾ã\n\næ§å¶å¨é»è¾å°è£å¨ä¸ä¸ª @Controller ç±»ä¸­ï¼å¤çæ¹æ³å®ä¹å¦ä¸ï¼\n\n@Controller\npublic class XsltController {\n\n    @RequestMapping("/")\n    public String home(Model model) throws Exception {\n        Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();\n        Element root = document.createElement("wordList");\n\n        List<String> words = Arrays.asList("Hello", "Spring", "Framework");\n        for (String word : words) {\n            Element wordNode = document.createElement("word");\n            Text textNode = document.createTextNode(word);\n            wordNode.appendChild(textNode);\n            root.appendChild(wordNode);\n        }\n\n        model.addAttribute("wordList", root);\n        return "home";\n    }\n}\n\n\nå°ç®åä¸ºæ­¢ï¼æä»¬åªåå»ºäºä¸ä¸ª DOM ææ¡£å¹¶å°å¶æ·»å å°æ¨¡åæ å°ä¸­ãè¯·æ³¨æï¼æ¨è¿å¯ä»¥å° XML æä»¶ä½ä¸º Resource å è½½å¹¶ä½¿ç¨å®æ¥ä»£æ¿èªå®ä¹ DOM ææ¡£ã\n\næå¯ç¨çè½¯ä»¶åå¯ä»¥èªå¨ \'domify\' ä¸ä¸ªå¯¹è±¡å¾ï¼ä½æ¯å¨ Spring ä¸­ï¼æ¨å¯ä»¥å®å¨çµæ´»å°ä»¥æ¨éæ©çä»»ä½æ¹å¼ä»æ¨çæ¨¡ååå»º DOMãè¿å¯ä»¥é²æ­¢ XML çè½¬æ¢å¨æ¨¡åæ°æ®çç»æä¸­åæ¥å¤ªå¤§ä½ç¨ï¼è¿å¨ä½¿ç¨å·¥å·ç®¡ç DOMification è¿ç¨æ¶æ¯ä¸ç§å±é©ã\n\n\n# Transformation\n\næåï¼XsltViewResolver è§£æ âhomeâ XSLT æ¨¡æ¿æä»¶å¹¶å° DOM ææ¡£åå¹¶å°å¶ä¸­ä»¥çææä»¬çè§å¾ãå¦ XsltViewResolver éç½®æç¤ºï¼XSLT æ¨¡æ¿ä½äº WEB-INF/xsl ç®å½ä¸ç war æä»¶ä¸­ï¼å¹¶ä»¥ xslt æä»¶æ©å±åç»å°¾ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº XSLT è½¬æ¢ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n\n    <xsl:output method="html" omit-xml-declaration="yes"/>\n\n    <xsl:template match="/">\n        <html>\n            <head><title>Hello!</title></head>\n            <body>\n                <h1>My First Words</h1>\n                <ul>\n                    <xsl:apply-templates/>\n                </ul>\n            </body>\n        </html>\n    </xsl:template>\n\n    <xsl:template match="word">\n        <li><xsl:value-of select="."/></li>\n    </xsl:template>\n\n</xsl:stylesheet>\n\n\nåé¢çè½¬æ¢æ¸²æä¸ºä»¥ä¸ HTMLï¼\n\n<html>\n  <head>\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n    <title>Hello!</title>\n  </head>\n  <body>\n    <h1>My First Words</h1>\n    <ul>\n      <li>Hello</li>\n      <li>Spring</li>\n      <li>Framework</li>\n    </ul>\n  </body>\n</html>\n\n\n\n# åèèµæ\n\n * Spring Framework å®æ¹ææ¡£\n * Spring Framework å®æ¹ææ¡£ä¹ Web',normalizedContent:'# spring mvc ä¹è§å¾ææ¯\n\nspring mvc ä¸­è§å¾ææ¯çä½¿ç¨æ¯å¯ææçãæ è®ºå³å®ä½¿ç¨ thymeleafãgroovy ç­æ¨¡æ¿å¼æãjsp è¿æ¯å¶ä»ææ¯ï¼é½å¯ä»¥éè¿éç½®æ¥æ´æ¹ã\n\nspring mvc çè§å¾ä½äºè¯¥åºç¨ç¨åºçåé¨ä¿¡ä»»è¾¹çåã è§å¾å¯ä»¥è®¿é®åºç¨ç¨åºä¸ä¸æçææ beanã å æ­¤ï¼ä¸å»ºè®®å¨æ¨¡æ¿å¯ç±å¤é¨æºç¼è¾çåºç¨ç¨åºä¸­ä½¿ç¨ spring mvc çæ¨¡æ¿æ¯æï¼å ä¸ºè¿å¯è½ä¼äº§çå®å¨éæ£ã\n\n\n# thymeleaf\n\nthymeleaf æ¯ä¸ä¸ªç°ä»£æå¡å¨ç«¯ java æ¨¡æ¿å¼æï¼å®å¼ºè°èªç¶ç html æ¨¡æ¿ï¼å¯ä»¥éè¿åå»å¨æµè§å¨ä¸­é¢è§ï¼èæ éè¿è¡æå¡å¨ï¼è¿å¯¹äº ui æ¨¡æ¿çç¬ç«å·¥ä½ï¼ä¾å¦ï¼ç±è®¾è®¡å¸ï¼éå¸¸æå¸®å©ã\n\nthymeleaf ä¸ spring mvc çéæç± thymeleaf é¡¹ç®ç®¡çã éç½®æ¶åä¸äº bean å£°æï¼ä¾å¦ servletcontexttemplateresolverãspringtemplateengine å thymeleafviewresolverã æå³è¯¦ç»ä¿¡æ¯ï¼è¯·åé thymeleaf+springã\n\n\n# freemarker\n\napache freemarker æ¯ä¸ä¸ªæ¨¡æ¿å¼æï¼ç¨äºçæä» html å°çµå­é®ä»¶ç­ä»»ä½ç±»åçææ¬åå®¹ã spring æ¡æ¶åç½®äº spring mvc ä¸ freemarker æ¨¡æ¿ç»åä½¿ç¨çéæã\n\n\n# è§å¾éç½®\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½å° freemarker éç½®ä¸ºè§å¾ææ¯ï¼\n\n@configuration\n@enablewebmvc\npublic class webconfig implements webmvcconfigurer {\n\n    @override\n    public void configureviewresolvers(viewresolverregistry registry) {\n        registry.freemarker();\n    }\n\n    // configure freemarker...\n\n    @bean\n    public freemarkerconfigurer freemarkerconfigurer() {\n        freemarkerconfigurer configurer = new freemarkerconfigurer();\n        configurer.settemplateloaderpath("/web-inf/freemarker");\n        return configurer;\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½å¨ xml ä¸­éç½®ç¸åçåå®¹ï¼\n\n<mvc:annotation-driven/>\n\n<mvc:view-resolvers>\n    <mvc:freemarker/>\n</mvc:view-resolvers>\n\n\x3c!-- configure freemarker... --\x3e\n<mvc:freemarker-configurer>\n    <mvc:template-loader-path location="/web-inf/freemarker"/>\n</mvc:freemarker-configurer>\n\n\næèï¼æ¨ä¹å¯ä»¥å£°æ freemarkerconfigurer ä»¥å®å¨æ§å¶ææå±æ§ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="freemarkerconfig" class="org.springframework.web.servlet.view.freemarker.freemarkerconfigurer">\n    <property name="templateloaderpath" value="/web-inf/freemarker/"/>\n</bean>\n\n\næ¨çæ¨¡æ¿éè¦å­å¨å¨åé¢ç¤ºä¾ä¸­æç¤ºç freemarkerconfigurer æå®çç®å½ä¸­ãé´äºåé¢çéç½®ï¼å¦ææ¨çæ§å¶å¨è¿åè§å¾åç§° welcomeï¼è§£æå¨å°æ¥æ¾ /web-inf/freemarker/welcome.ftl æ¨¡æ¿ã\n\n\n# freemarker éç½®\n\nå¯ä»¥éè¿å¨ freemarkerconfigurer ä¸è®¾ç½®éå½ç bean å±æ§ï¼å° freemarker \'settings\' å \'sharedvariables\' ç´æ¥ä¼ éç» freemarker configuration å¯¹è±¡ï¼ç± spring ç®¡çï¼ã freemarkersettings å±æ§éè¦ä¸ä¸ª java.util.properties å¯¹è±¡ï¼freemarkervariables å±æ§éè¦ä¸ä¸ª java.util.mapã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨ freemarkerconfigurerï¼\n\n<bean id="freemarkerconfig" class="org.springframework.web.servlet.view.freemarker.freemarkerconfigurer">\n    <property name="templateloaderpath" value="/web-inf/freemarker/"/>\n    <property name="freemarkervariables">\n        <map>\n            <entry key="xml_escape" value-ref="fmxmlescape"/>\n        </map>\n    </property>\n</bean>\n\n<bean id="fmxmlescape" class="freemarker.template.utility.xmlescape"/>\n\n\næå³åºç¨äº configuration å¯¹è±¡çè®¾ç½®ååéçè¯¦ç»ä¿¡æ¯ï¼è¯·åé freemarker ææ¡£ã\n\n\n# è¡¨åå¤ç\n\nspring æä¾äºä¸ä¸ªç¨äº jsp çæ è®°åºï¼å¶ä¸­åå«ä¸ä¸ª <spring:bind/> åç´ ã æ­¤åç´ ä¸»è¦è®©è¡¨åæ¾ç¤ºæ¥èªè¡¨åæ¯æå¯¹è±¡çå¼ï¼å¹¶æ¾ç¤ºæ¥èª web æä¸å¡å±ä¸­çâéªè¯å¨âçéªè¯å¤±è´¥çç»æã spring è¿æ¯æ freemarker ä¸­çç¸ååè½ï¼ä»¥åç¨äºçæè¡¨åè¾å¥åç´ çé¢å¤ä¾¿å©å®ã\n\n# ç»å®å®\n\nå¨ freemarker ç spring-webmvc.jar æä»¶ä¸­ç»´æ¤äºä¸ç»æ åå®ï¼å æ­¤å®ä»¬å§ç»å¯ç¨äºéå½éç½®çåºç¨ç¨åºã\n\nspring æ¨¡æ¿åºä¸­å®ä¹çä¸äºå®è¢«è®¤ä¸ºæ¯åé¨çï¼ç§æçï¼ï¼ä½å®å®ä¹ä¸­ä¸å­å¨è¿æ ·çèå´ï¼è¿ä½¿å¾ææå®å¯¹è°ç¨ä»£ç åç¨æ·æ¨¡æ¿é½æ¯å¯è§çãä»¥ä¸é¨åä»å³æ³¨æ¨éè¦ä»æ¨¡æ¿ä¸­ç´æ¥è°ç¨çå®ãå¦ææ¨æ³ç´æ¥æ¥çå®ä»£ç ï¼è¯¥æä»¶åä¸º spring.ftl ï¼ä½äº org.springframework.web.servlet.view.freemarker åä¸­ã\n\n# ç®åç»å®\n\nå¨åºäºåå½ spring mvc æ§å¶å¨è¡¨åè§å¾ç freemarker æ¨¡æ¿ç html è¡¨åä¸­ï¼æ¨å¯ä»¥ä½¿ç¨ç±»ä¼¼äºä¸ä¸ä¸ªç¤ºä¾çä»£ç æ¥ç»å®å°å­æ®µå¼ï¼å¹¶ä»¥ç±»ä¼¼äº jsp ç­ä»·ç©çæ¹å¼ä¸ºæ¯ä¸ªè¾å¥å­æ®µæ¾ç¤ºéè¯¯æ¶æ¯ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºä¸ä¸ª personform è§å¾ï¼\n\n\x3c!-- freemarker macros have to be imported into a namespace.\n    we strongly recommend sticking to \'spring\'. --\x3e\n<#import "/spring.ftl" as spring/>\n<html>\n    ...\n    <form action="" method="post">\n        name:\n        <@spring.bind "personform.name"/>\n        <input type="text"\n            name="${spring.status.expression}"\n            value="${spring.status.value?html}"/><br />\n        <#list spring.status.errormessages as error> <b>${error}</b> <br /> </#list>\n        <br />\n        ...\n        <input type="submit" value="submit"/>\n    </form>\n    ...\n</html>\n\n\n<@spring.bind> éè¦ä¸ä¸ª \'path\' åæ°ï¼å®ç±å½ä»¤å¯¹è±¡çåç§°ï¼å®æ¯ \'command\'ï¼é¤éæ¨å¨æ§å¶å¨éç½®ä¸­æ´æ¹å®ï¼ç»æï¼å¨æ¨å¸æç»å®çå½ä»¤å¯¹è±¡åè·ä¸ä¸ªå¥ç¹åå­æ®µåç§°ã æ¨è¿å¯ä»¥ä½¿ç¨åµå¥å­æ®µï¼ä¾å¦ command.address.streetã bind å®éç¨ web.xml ä¸­ç servletcontext åæ° defaulthtmlescape æå®çé»è®¤ html è½¬ä¹è¡ä¸ºã\n\nç§°ä¸º <@spring.bindescaped> çå®çå¦ä¸ç§å½¢å¼éç¨ç¬¬äºä¸ªåæ°ï¼è¯¥åæ°æç¡®æå®æ¯å¦åºå¨ç¶æéè¯¯æ¶æ¯æå¼ä¸­ä½¿ç¨ html è½¬ä¹ã æ¨å¯ä»¥æ ¹æ®éè¦å°å¶è®¾ç½®ä¸º true æ false ã éå çè¡¨åå¤çå®ç®åäº html è½¬ä¹çä½¿ç¨ï¼æ¨åºè¯¥å°½å¯è½ä½¿ç¨è¿äºå®ã\n\n# è¾å¥å®\n\nfreemarker çéå ä¾¿å©å®ç®åäºç»å®åè¡¨åçæï¼åæ¬éªè¯éè¯¯æ¾ç¤ºï¼ã æ°¸è¿ä¸éè¦ä½¿ç¨è¿äºå®æ¥çæè¡¨åè¾å¥å­æ®µï¼æ¨å¯ä»¥å°å®ä»¬ä¸ç®åç html æ··åæ­éï¼æèç´æ¥è°ç¨æä»¬ä¹åå¼ºè°ç spring ç»å®å®ã\n\nä¸è¡¨ä¸­çå¯ç¨å®æ¾ç¤ºäº freemarker æ¨¡æ¿ (ftl) å®ä¹åæ¯ä¸ªéç¨çåæ°åè¡¨ï¼\n\nmacro                                                          ftl definition\nmessage (output a string from a resource bundle based on the   <@spring.message code/>\ncode parameter)\nmessagetext (output a string from a resource bundle based on   <@spring.messagetext code, text/>\nthe code parameter, falling back to the value of the default\nparameter)\nurl (prefix a relative url with the applicationâs context      <@spring.url relativeurl/>\nroot)\nforminput (standard input field for gathering user input)      <@spring.forminput path, attributes, fieldtype/>\nformhiddeninput (hidden input field for submitting non-user    <@spring.formhiddeninput path, attributes/>\ninput)\nformpasswordinput (standard input field for gathering          <@spring.formpasswordinput path, attributes/>\npasswords. note that no value is ever populated in fields of\nthis type.)\nformtextarea (large text field for gathering long, freeform    <@spring.formtextarea path, attributes/>\ntext input)\nformsingleselect (drop down box of options that let a single   <@spring.formsingleselect path, options, attributes/>\nrequired value be selected)\nformmultiselect (a list box of options that let the user       <@spring.formmultiselect path, options, attributes/>\nselect 0 or more values)\nformradiobuttons (a set of radio buttons that let a single     <@spring.formradiobuttons path, options separator,\nselection be made from the available choices)                  attributes/>\nformcheckboxes (a set of checkboxes that let 0 or more         <@spring.formcheckboxes path, options, separator,\nvalues be selected)                                            attributes/>\nformcheckbox (a single checkbox)                               <@spring.formcheckbox path, attributes/>\nshowerrors (simplify display of validation errors for the      <@spring.showerrors separator, classorstyle/>\nbound field)\n\nä¸è¿°ä»»ä½å®çåæ°å·æä¸è´çå«ä¹ï¼\n\n * path: è¦ç»å®å°çå­æ®µçåç§°ï¼ä¾å¦ï¼âcommand.nameâï¼\n * options: å¯å¨è¾å¥å­æ®µä¸­éæ©çææå¯ç¨å¼ç mapãæ å°çé®è¡¨ç¤ºä»è¡¨ååä¼ å¹¶ç»å®å°å½ä»¤å¯¹è±¡çå¼ãéå¯¹é®å­å¨ç map å¯¹è±¡æ¯å¨è¡¨åä¸æ¾ç¤ºç»ç¨æ·çæ ç­¾ï¼å¯è½ä¸è¡¨ååä¼ çç¸åºå¼ä¸åãéå¸¸ï¼è¿æ ·çå°å¾ç±æ§å¶å¨æä¾ä½ä¸ºåèæ°æ®ãæ¨å¯ä»¥ä½¿ç¨ä»»ä½ map å®ç°ï¼å·ä½åå³äºæéçè¡ä¸ºãå¯¹äºä¸¥æ ¼æåºçæ å°ï¼æ¨å¯ä»¥ä½¿ç¨å¸¦æåéçâæ¯è¾å¨âç sortedmapï¼ä¾å¦ treemapï¼ï¼å¯¹äºåºææå¥é¡ºåºè¿åå¼çä»»ææ å°ï¼ä½¿ç¨âlinkedhashmapâæâlinkedmapâ å¬å±æ¶èã\n * separator: å¨å¤ä¸ªéé¡¹å¯ç¨ä½ç¦»æ£åç´ ï¼åéæé®æå¤éæ¡ï¼çæåµä¸ï¼ç¨äºåéåè¡¨ä¸­æ¯ä¸ªéé¡¹çå­ç¬¦åºåï¼ä¾å¦ <br>ï¼ã\n * attributes: è¦åå«å¨ html æ è®°æ¬èº«ä¸­çä»»ææ è®°æææ¬çéå å­ç¬¦ä¸²ãè¯¥å­ç¬¦ä¸²æå­é¢ææç±å®åæ¾ãä¾å¦ï¼å¨ textarea å­æ®µä¸­ï¼æ¨å¯ä»¥æä¾å±æ§ï¼ä¾å¦ârows="5" cols="60"\'ï¼ï¼æèæ¨å¯ä»¥ä¼ éæ ·å¼ä¿¡æ¯ï¼ä¾å¦ \'style="border:1px solid silver"\'ã\n * classorstyle: å¯¹äº showerrors å®ï¼åè£æ¯ä¸ªéè¯¯ç span åç´ ä½¿ç¨ç css ç±»çåç§°ãå¦ææªæä¾ä»»ä½ä¿¡æ¯ï¼æå¼ä¸ºç©ºï¼ï¼éè¯¯å°åå«å¨ <b></b> æ ç­¾ä¸­ã\n\nä»¥ä¸é¨åæ¦è¿°äºå®çç¤ºä¾ã\n\nè¾å¥å­æ®µ\n\nforminput å®éç¨ path åæ° (command.name) åä¸ä¸ªé¢å¤ç attributes åæ°ï¼å¨æ¥ä¸æ¥çç¤ºä¾ä¸­ä¸ºç©ºï¼ãè¯¥å®ä¸ææå¶ä»è¡¨åçæå®ä¸èµ·å¯¹è·¯å¾åæ°æ§è¡éå¼ spring ç»å®ãç»å®å¨æ°ç»å®åçä¹åä¸ç´ææï¼å æ­¤ showerrors å®ä¸éè¦åæ¬¡ä¼ éè·¯å¾åæ°ââå®å¯¹ä¸æ¬¡åå»ºç»å®çå­æ®µè¿è¡æä½ã\n\nshowerrors å®æ¥åä¸ä¸ªåéç¬¦åæ°ï¼ç¨äºåéç»å®å­æ®µä¸çå¤ä¸ªéè¯¯çå­ç¬¦ï¼ï¼è¿æ¥åç¬¬äºä¸ªåæ°ââè¿æ¬¡æ¯ç±»åææ ·å¼å±æ§ãè¯·æ³¨æï¼freemarker å¯ä»¥ä¸º attributes åæ°æå®é»è®¤å¼ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨ forminput å showerrors å®ï¼\n\n<@spring.forminput "command.name"/>\n<@spring.showerrors "<br>"/>\n\n\nä¸ä¸ä¸ªç¤ºä¾æ¾ç¤ºè¡¨åçæ®µçè¾åºï¼çæåç§°å­æ®µå¹¶å¨è¡¨åæäº¤åæ¾ç¤ºéªè¯éè¯¯ï¼è¯¥å­æ®µä¸­æ²¡æä»»ä½å¼ãéªè¯éè¿ spring çéªè¯æ¡æ¶è¿è¡ã\n\nçæç html ç±»ä¼¼äºä»¥ä¸ç¤ºä¾ï¼\n\nname:\n<input type="text" name="name" value="">\n<br>\n    <b>required</b>\n<br>\n<br>\n\n\nformtextarea å®çå·¥ä½æ¹å¼ä¸ forminput å®ç¸åï¼å¹¶ä¸æ¥åç¸åçåæ°åè¡¨ãéå¸¸ï¼ç¬¬äºä¸ªåæ° (attributes) ç¨äºä¼ éæ ·å¼ä¿¡æ¯æ textarea ç rows å cols å±æ§ã\n\néä¸­å­æ®µ\n\næ¨å¯ä»¥ä½¿ç¨åä¸ªéæ©å­æ®µå®å¨ html è¡¨åä¸­çæå¸¸è§ç ui å¼éæ©è¾å¥ï¼\n\n * formsingleselect\n * formmultiselect\n * formradiobuttons\n * formcheckboxes\n\nåä¸ªå®ä¸­çæ¯ä¸ä¸ªé½æ¥åä¸ä¸ªâmapâéé¡¹ï¼å¶ä¸­åå«è¡¨åå­æ®µçå¼åä¸è¯¥å¼å¯¹åºçæ ç­¾ãå¼åæ ç­¾å¯ä»¥ç¸åã\n\nä¸ä¸ä¸ªä¾å­æ¯ ftl ä¸­çåéæé®ãè¡¨åæ¯æå¯¹è±¡ä¸ºæ­¤å­æ®µæå®é»è®¤å¼âä¼¦æ¦âï¼å æ­¤æ ééªè¯ãæ¸²æè¡¨åæ¶ï¼æ´ä¸ªå¯ä¾éæ©çåå¸åè¡¨ä½ä¸ºåèæ°æ®æä¾å¨æ¨¡åä¸­ï¼åç§°ä¸º citymapãä»¥ä¸æ¸åæ¾ç¤ºäºç¤ºä¾ï¼\n\n...\ntown:\n<@spring.formradiobuttons "command.address.town", citymap, ""/><br><br>\n\n\nåé¢çæ¸ååç°ä¸è¡åéæé®ï¼ä¸ä¸ªç¨äº citymap ä¸­çæ¯ä¸ªå¼ï¼å¹¶ä½¿ç¨åéç¬¦ ""ãæ²¡ææä¾é¢å¤çå±æ§ï¼ç¼ºå°å®çæåä¸ä¸ªåæ°ï¼ã citymap å¯¹å°å¾ä¸­çæ¯ä¸ªé®å¼å¯¹ä½¿ç¨ç¸åç stringãå°å¾çé®æ¯è¡¨åå®éä½ä¸º post è¯·æ±åæ°æäº¤çåå®¹ãå°å¾å¼æ¯ç¨æ·çå°çæ ç­¾ãå¨åé¢çç¤ºä¾ä¸­ï¼ç»å®ä¸ä¸ªç¥ååå¸çåè¡¨åè¡¨åæ¯æå¯¹è±¡ä¸­çé»è®¤å¼ï¼html ç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\ntown:\n<input type="radio" name="address.town" value="london">london</input>\n<input type="radio" name="address.town" value="paris" checked="checked">paris</input>\n<input type="radio" name="address.town" value="new york">new york</input>\n\n\nå¦ææ¨çåºç¨ç¨åºå¸æéè¿åé¨ä»£ç å¤çåå¸ï¼ä¾å¦ï¼ï¼æ¨å¯ä»¥ä½¿ç¨åéçé®åå»ºä»£ç æ å°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nprotected map<string, ?> referencedata(httpservletrequest request) throws exception {\n    map<string, string> citymap = new linkedhashmap<>();\n    citymap.put("ldn", "london");\n    citymap.put("prs", "paris");\n    citymap.put("nyc", "new york");\n\n    map<string, object> model = new hashmap<>();\n    model.put("citymap", citymap);\n    return model;\n}\n\n\nä»£ç ç°å¨çæè¾åºï¼å¶ä¸­æ çº¿çµå¼æ¯ç¸å³ä»£ç ï¼ä½ç¨æ·ä»ç¶çå°æ´ç¨æ·åå¥½çåå¸åç§°ï¼å¦ä¸æç¤ºï¼\n\ntown:\n<input type="radio" name="address.town" value="ldn">london</input>\n<input type="radio" name="address.town" value="prs" checked="checked">paris</input>\n<input type="radio" name="address.town" value="nyc">new york</input>\n\n\n# html è½¬ä¹\n\nåé¢æè¿°çè¡¨åå®çé»è®¤ä½¿ç¨å¯¼è´ html åç´ ç¬¦å html 4.01ï¼å¹¶ä¸ä½¿ç¨ web.xml æä»¶ä¸­å®ä¹ç html è½¬ä¹çé»è®¤å¼ï¼å¦ spring çç»å®æ¯ææä½¿ç¨çé£æ ·ã è¦ä½¿åç´ ç¬¦å xhtml æè¦çé»è®¤ç html è½¬ä¹å¼ï¼æ¨å¯ä»¥å¨æ¨¡æ¿ä¸­æå®ä¸¤ä¸ªåéï¼æå¨æ¨¡åä¸­ï¼å®ä»¬å¯¹æ¨¡æ¿å¯è§ï¼ã å¨æ¨¡æ¿ä¸­æå®å®ä»¬çå¥½å¤æ¯å®ä»¬å¯ä»¥å¨ç¨åçæ¨¡æ¿å¤çä¸­æ´æ¹ä¸ºä¸åçå¼ï¼ä»¥ä¾¿ä¸ºè¡¨åä¸­çä¸åå­æ®µæä¾ä¸åçè¡ä¸ºã\n\nè¦ä¸ºæ¨çæ ç­¾åæ¢å° xhtml åè§æ§ï¼è¯·ä¸ºåä¸º xhtmlcompliant çæ¨¡åæä¸ä¸æåéæå® true å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<#-- for freemarker --\x3e\n<#assign xhtmlcompliant = true>\n\n\nå¤çæ­¤æä»¤åï¼spring å®çæçä»»ä½åç´ ç°å¨é½ç¬¦å xhtmlã\n\nä»¥ç±»ä¼¼çæ¹å¼ï¼æ¨å¯ä»¥ä¸ºæ¯ä¸ªå­æ®µæå® html è½¬ä¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<#-- until this point, default html escaping is used --\x3e\n\n<#assign htmlescape = true>\n<#-- next field will use html escaping --\x3e\n<@spring.forminput "command.name"/>\n\n<#assign htmlescape = false in spring>\n<#-- all future fields will be bound with html escaping off --\x3e\n\n\n\n# groovy\n\ngroovy æ è®°æ¨¡æ¿å¼æ ä¸»è¦ç¨äºçæç±»ä¼¼ xml çæ è®°ï¼xmlãxhtmlãhtml5 ç­ï¼ï¼ä½å¯ä»¥ä½¿ç¨å®æ¥çæä»»ä½åºäºææ¬çåå®¹ã spring framework å·æå° spring mvc ä¸ groovy æ è®°ç»åä½¿ç¨çåç½®éæã\n\n\n# éç½®\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½éç½® groovy æ è®°æ¨¡æ¿å¼æï¼\n\n@configuration\n@enablewebmvc\npublic class webconfig implements webmvcconfigurer {\n\n    @override\n    public void configureviewresolvers(viewresolverregistry registry) {\n        registry.groovy();\n    }\n\n    // configure the groovy markup template engine...\n\n    @bean\n    public groovymarkupconfigurer groovymarkupconfigurer() {\n        groovymarkupconfigurer configurer = new groovymarkupconfigurer();\n        configurer.setresourceloaderpath("/web-inf/");\n        return configurer;\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½å¨ xml ä¸­éç½®ç¸åçåå®¹ï¼\n\n<mvc:annotation-driven/>\n\n<mvc:view-resolvers>\n    <mvc:groovy/>\n</mvc:view-resolvers>\n\n\x3c!-- configure the groovy markup template engine... --\x3e\n<mvc:groovy-configurer resource-loader-path="/web-inf/"/>\n\n\n\n# ç¤ºä¾\n\nä¸ä¼ ç»çæ¨¡æ¿å¼æä¸åï¼groovy æ è®°ä¾èµäºä½¿ç¨æå»ºå¨è¯­æ³ç dslãä»¥ä¸ç¤ºä¾æ¾ç¤ºäº html é¡µé¢çç¤ºä¾æ¨¡æ¿ï¼\n\nyieldunescaped \'<!doctype html>\'\nhtml(lang:\'en\') {\n    head {\n        meta(\'http-equiv\':\'"content-type" content="text/html; charset=utf-8"\')\n        title(\'my page\')\n    }\n    body {\n        p(\'this is an example of html contents\')\n    }\n}\n\n\n\n# èæ¬è§å¾\n\nspring æä¸ä¸ªåç½®çéæï¼å¯ä»¥å° spring mvc ä¸ä»»ä½å¯ä»¥å¨ jsr-223 ä¹ä¸è¿è¡çæ¨¡æ¿åºä¸èµ·ä½¿ç¨ java èæ¬å¼æã æä»¬å¨ä¸åçèæ¬å¼æä¸æµè¯äºä»¥ä¸æ¨¡æ¿åºï¼\n\nèæ¬åº                        èæ¬å¼æ\nhandlebars                 nashorn\nmustache                   nashorn\nreact                      nashorn\nejs                        nashorn\nerb                        jruby\nstring templates           jython\nkotlin script templating   kotlin\n\n\n# è¦æ±\n\néè¦å¨ç±»è·¯å¾ä¸­åå«èæ¬å¼æï¼å·ä½ç»èå èæ¬å¼æèå¼ï¼\n\n * the nashorn java 8+ æä¾äº javascript å¼æãå¼ºçå»ºè®®ä½¿ç¨å¯ç¨çææ°æ´æ°çæ¬ã\n * jruby åºè¯¥ä½ä¸º ruby æ¯æçä¾èµé¡¹æ·»å ã\n * jython åºè¯¥ä½ä¸º python æ¯æçä¾èµé¡¹æ·»å ã\n * org.jetbrains.kotlin:kotlin-script-util ä¾èµé¡¹ååå« org.jetbrains.kotlin.script.jsr223.kotlinjsr223jvmlocalscriptenginefactory è¡ç meta-inf/services/javax.script.scriptenginefactory æä»¶åºè¯¥è¢«æ·»å  kotlin èæ¬æ¯æã æå³è¯¦ç»ä¿¡æ¯ï¼è¯·åéæ­¤ç¤ºä¾ã\n\næ¨éè¦æèæ¬æ¨¡æ¿åºã ä¸º javascript åå°è¿ä¸ç¹çä¸ç§æ¹æ³æ¯éè¿ webjarsã\n\n\n# èæ¬æ¨¡æ¿\n\nå¯ä»¥å£°æä¸ä¸ª scripttemplateconfigurer æ¥æå®è¦ä½¿ç¨çèæ¬å¼æãè¦å è½½çèæ¬æä»¶ãè°ç¨ä»ä¹å½æ°æ¥æ¸²ææ¨¡æ¿ç­ç­ã ä»¥ä¸ç¤ºä¾ä½¿ç¨ mustache æ¨¡æ¿å nashorn javascript å¼æï¼\n\n@configuration\n@enablewebmvc\npublic class webconfig implements webmvcconfigurer {\n\n    @override\n    public void configureviewresolvers(viewresolverregistry registry) {\n        registry.scripttemplate();\n    }\n\n    @bean\n    public scripttemplateconfigurer configurer() {\n        scripttemplateconfigurer configurer = new scripttemplateconfigurer();\n        configurer.setenginename("nashorn");\n        configurer.setscripts("mustache.js");\n        configurer.setrenderobject("mustache");\n        configurer.setrenderfunction("render");\n        return configurer;\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº xml ä¸­çç¸åéç½®ï¼\n\n<mvc:annotation-driven/>\n\n<mvc:view-resolvers>\n    <mvc:script-template/>\n</mvc:view-resolvers>\n\n<mvc:script-template-configurer engine-name="nashorn" render-object="mustache" render-function="render">\n    <mvc:script location="mustache.js"/>\n</mvc:script-template-configurer>\n\n\nå¯¹äº java å xml éç½®ï¼controller çèµ·æ¥æ²¡æä»ä¹ä¸åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@controller\npublic class samplecontroller {\n\n    @getmapping("/sample")\n    public string test(model model) {\n        model.addattribute("title", "sample title");\n        model.addattribute("body", "sample body");\n        return "template";\n    }\n}\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº mustache æ¨¡æ¿ï¼\n\n<html>\n  <head>\n    <title>{{title}}</title>\n  </head>\n  <body>\n    <p>{{body}}</p>\n  </body>\n</html>\n\n\nä½¿ç¨ä»¥ä¸åæ°è°ç¨æ¸²æå½æ°ï¼\n\n * string template: æ¨¡æ¿åå®¹\n * å°å¾æ¨¡åï¼è§å¾æ¨¡å\n * renderingcontext renderingcontextï¼ renderingcontext åè®¸è®¿é®åºç¨ä¸ä¸æãè¯­è¨ç¯å¢ãæ¨¡æ¿å è½½å¨å urlï¼èª 5.0 èµ·ï¼\n\nå¦ææ¨çæ¨¡æ¿ææ¯éè¦ä¸äºèªå®ä¹ï¼æ¨å¯ä»¥æä¾ä¸ä¸ªå®ç°èªå®ä¹æ¸²æåè½çèæ¬ã ä¾å¦ï¼handlerbars éè¦å¨ä½¿ç¨ä¹åç¼è¯æ¨¡æ¿ï¼å¹¶ä¸éè¦ä¸ä¸ª polyfill æ¥æ¨¡æä¸äºæµè§å¨å·¥å·ï¼ä½å¨æå¡å¨ç«¯èæ¬å¼æä¸­ä¸å¯ç¨ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n@configuration\n@enablewebmvc\npublic class webconfig implements webmvcconfigurer {\n\n    @override\n    public void configureviewresolvers(viewresolverregistry registry) {\n        registry.scripttemplate();\n    }\n\n    @bean\n    public scripttemplateconfigurer configurer() {\n        scripttemplateconfigurer configurer = new scripttemplateconfigurer();\n        configurer.setenginename("nashorn");\n        configurer.setscripts("polyfill.js", "handlebars.js", "render.js");\n        configurer.setrenderfunction("render");\n        configurer.setsharedengine(false);\n        return configurer;\n    }\n}\n\n\npolyfill.js åªå®ä¹äº handlebars æ­£å¸¸è¿è¡æéç window å¯¹è±¡ï¼å¦ä¸ï¼\n\nvar window = {}\n\n\nè¿ä¸ªåºæ¬ç render.js å®ç°å¨ä½¿ç¨ä¹åç¼è¯æ¨¡æ¿ã çäº§å°±ç»ªçå®ç°è¿åºè¯¥å­å¨ä»»ä½éå¤ä½¿ç¨çç¼å­æ¨¡æ¿æé¢ç¼è¯æ¨¡æ¿ã æ¨å¯ä»¥å¨èæ¬ç«¯è¿æ ·åï¼å¹¶å¤çæ¨éè¦çä»»ä½å®å¶ââç®¡çæ¨¡æ¿å¼æéç½®ï¼ä¾å¦ï¼ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\nfunction render(template, model) {\n  var compiledtemplate = handlebars.compile(template)\n  return compiledtemplate(model)\n}\n\n\næ¥ç spring framework ååæµè¯ï¼java åèµæºï¼ä»¥è·åæ´å¤éç½®ç¤ºä¾ã\n\n\n# jsp å jstl\n\nspring framework å·æå° spring mvc ä¸ jsp å jstl ç»åä½¿ç¨çåç½®éæã\n\n> æ´å¤åå®¹è¯¦è§ï¼spring å®æ¹ææ¡£ä¹ jsp and jstl\n\n\n# rss and atom\n\nabstractatomfeedview å abstractrssfeedview é½ç»§æ¿èª abstractfeedview åºç±»ï¼åå«ç¨äºæä¾ atom å rss feed è§å¾ã å®ä»¬åºäº rome é¡¹ç®ï¼ä½äº org.springframework.web.servlet.view.feed åä¸­ã\n\nabstractatomfeedview è¦æ±æ¨å®ç° buildfeedentries() æ¹æ³å¹¶å¯éæ©è¦ç buildfeedmetadata() æ¹æ³ï¼é»è®¤å®ç°ä¸ºç©ºï¼ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\npublic class samplecontentatomview extends abstractatomfeedview {\n\n    @override\n    protected void buildfeedmetadata(map<string, object> model,\n            feed feed, httpservletrequest request) {\n        // implementation omitted\n    }\n\n    @override\n    protected list<entry> buildfeedentries(map<string, object> model,\n            httpservletrequest request, httpservletresponse response) throws exception {\n        // implementation omitted\n    }\n}\n\n\nç±»ä¼¼çè¦æ±éç¨äºå®ç° abstractrssfeedviewï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class samplecontentrssview extends abstractrssfeedview {\n\n    @override\n    protected void buildfeedmetadata(map<string, object> model,\n            channel feed, httpservletrequest request) {\n        // implementation omitted\n    }\n\n    @override\n    protected list<item> buildfeeditems(map<string, object> model,\n            httpservletrequest request, httpservletresponse response) throws exception {\n        // implementation omitted\n    }\n}\n\n\nbuildfeeditems() å buildfeedentries() æ¹æ³ä¼ å¥ http è¯·æ±ï¼ä»¥é²æ¨éè¦è®¿é® localeã ä¼ å¥ http ååºä»ç¨äºè®¾ç½® cookie æå¶ä» http æ å¤´ã æ¹æ³è¿ååï¼æè¦ä¼èªå¨åå¥ååºå¯¹è±¡ã\n\næå³åå»º atom è§å¾çç¤ºä¾ï¼è¯·åé alef arendsen ç spring team åå®¢ entryã\n\n\n# pdf and excel\n\nspring æä¾äºè¿å html ä»¥å¤çè¾åºçæ¹æ³ï¼åæ¬ pdf å excel çµå­è¡¨æ ¼ã\n\n\n# ææ¡£è§å¾ç®ä»\n\nhtml é¡µé¢å¹¶ä¸æ»æ¯ç¨æ·æ¥çæ¨¡åè¾åºçæä½³æ¹å¼ï¼spring ä½¿ä»æ¨¡åæ°æ®å¨æçæ pdf ææ¡£æ excel çµå­è¡¨æ ¼åå¾ç®åã è¯¥ææ¡£æ¯è§å¾ï¼ä»æå¡å¨æµåºæ­£ç¡®çåå®¹ç±»åï¼ï¼å¸æï¼ä½¿å®¢æ·ç«¯ pc è½å¤è¿è¡ä»ä»¬ççµå­è¡¨æ ¼æ pdf æ¥çå¨åºç¨ç¨åºä½ä¸ºååºã\n\nä¸ºäºä½¿ç¨ excel è§å¾ï¼æ¨éè¦å° apache poi åºæ·»å å°ç±»è·¯å¾ä¸­ã å¯¹äº pdf çæï¼æ¨éè¦æ·»å ï¼æå¥½ï¼openpdf åºã\n\n\n# pdf è§å¾\n\nåè¯åè¡¨çç®å pdf è§å¾å¯ä»¥æ©å± org.springframework.web.servlet.view.document.abstractpdfview å¹¶å®ç° buildpdfdocument() æ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class pdfwordlist extends abstractpdfview {\n\n    protected void buildpdfdocument(map<string, object> model, document doc, pdfwriter writer,\n            httpservletrequest request, httpservletresponse response) throws exception {\n\n        list<string> words = (list<string>) model.get("wordlist");\n        for (string word : words) {\n            doc.add(new paragraph(word));\n        }\n    }\n}\n\n\næ§å¶å¨å¯ä»¥ä»å¤é¨è§å¾å®ä¹ï¼æåç§°å¼ç¨å®ï¼æä½ä¸ºå¤çç¨åºæ¹æ³ç view å®ä¾è¿åæ­¤ç±»è§å¾ã\n\n\n# excel è§å¾\n\nä» spring framework 4.2 å¼å§ï¼org.springframework.web.servlet.view.document.abstractxlsview ä½ä¸º excel è§å¾çåºç±»æä¾ã å®åºäº apache poiï¼å·æä¸é¨çå­ç±»ï¼abstractxlsxview å abstractxlsxstreamingviewï¼ï¼åä»£äºè¿æ¶ç abstractexcelview ç±»ã\n\nç¼ç¨æ¨¡åç±»ä¼¼äº abstractpdfviewï¼ä»¥ buildexceldocument() ä½ä¸ºæ ¸å¿æ¨¡æ¿æ¹æ³ï¼æ§å¶å¨è½å¤ä»å¤é¨å®ä¹ï¼æåç§°ï¼æä½ä¸ºå¤çç¨åºæ¹æ³ç view å®ä¾è¿åæ­¤ç±»è§å¾ã\n\n\n# jackson\n\nspring æä¾å¯¹ jackson json åºçæ¯æã\n\n\n# åºäº jackson ç json mvc è§å¾\n\nmappingjackson2jsonview ä½¿ç¨ jackson åºç objectmapper å°ååºåå®¹æ¸²æä¸º jsonã é»è®¤æåµä¸ï¼æ¨¡åæ å°çå¨é¨åå®¹ï¼ç¹å®äºæ¡æ¶çç±»é¤å¤ï¼é½ç¼ç ä¸º jsonã å¯¹äºéè¦è¿æ»¤ map åå®¹çæåµï¼æ¨å¯ä»¥ä½¿ç¨ modelkeys å±æ§æå®ä¸ç»ç¹å®çæ¨¡åå±æ§è¿è¡ç¼ç ã æ¨è¿å¯ä»¥ä½¿ç¨ extractvaluefromsinglekeymodel å±æ§ç´æ¥æåååºåååé®æ¨¡åä¸­çå¼ï¼èä¸æ¯ä½ä¸ºæ¨¡åå±æ§çæ å°ã\n\næ¨å¯ä»¥æ ¹æ®éè¦ä½¿ç¨ jackson æä¾çæ³¨éèªå®ä¹ json æ å°ã å½æ¨éè¦è¿ä¸æ­¥æ§å¶æ¶ï¼æ¨å¯ä»¥éè¿ objectmapper å±æ§æ³¨å¥èªå®ä¹ objectmapperï¼éç¨äºéè¦ä¸ºç¹å®ç±»åæä¾èªå®ä¹ json åºååå¨åååºååå¨çæåµã\n\n\n# åºäº jackson ç xml è§å¾\n\nmappingjackson2xmlview ä½¿ç¨ jackson xml æ©å± xmlmapper å°ååºåå®¹æ¸²æä¸º xmlã å¦ææ¨¡ååå«å¤ä¸ªæ¡ç®ï¼æ¨åºè¯¥ä½¿ç¨ modelkey bean å±æ§æ¾å¼è®¾ç½®è¦åºååçå¯¹è±¡ã å¦ææ¨¡ååå«åä¸ªæ¡ç®ï¼å®ä¼èªå¨åºååã\n\næ¨å¯ä»¥æ ¹æ®éè¦ä½¿ç¨ jaxb æ jackson æä¾çæ³¨éèªå®ä¹ xml æ å°ãå½æ¨éè¦è¿ä¸æ­¥æ§å¶æ¶ï¼æ¨å¯ä»¥éè¿ objectmapper å±æ§æ³¨å¥èªå®ä¹ xmlmapperï¼å¯¹äºéè¦ä¸ºç¹å®ç±»åæä¾åºååå¨åååºååå¨çèªå®ä¹ xml çæåµ\n\n\n# xml\n\nmarshallingview ä½¿ç¨ xml marshallerï¼å¨ org.springframework.oxm åä¸­å®ä¹ï¼å°ååºåå®¹æ¸²æä¸º xmlã æ¨å¯ä»¥ä½¿ç¨ marshallingview å®ä¾ç modelkey å±æ§æ¾å¼è®¾ç½®è¦ç¼ç»çå¯¹è±¡ã æèï¼è§å¾éåæææ¨¡åå±æ§å¹¶ç¼ç» marshaller æ¯æçç¬¬ä¸ä¸ªç±»åã æå³ org.springframework.oxm åä¸­åè½çæ´å¤ä¿¡æ¯ï¼è¯·åé marshalling xml using o/x mappersã\n\n\n# xslt\n\nxslt æ¯ xml çä¸ç§è½¬æ¢è¯­è¨ï¼ä½ä¸º web åºç¨ç¨åºä¸­çä¸ç§è§å¾ææ¯å¾åæ¬¢è¿ã å¦ææ¨çåºç¨ç¨åºèªç¶å°å¤ç xmlï¼æèå¦ææ¨çæ¨¡åå¯ä»¥å¾å®¹æå°è½¬æ¢ä¸º xmlï¼é£ä¹ xslt ä½ä¸ºä¸ç§è§å¾ææ¯æ¯ä¸ä¸ªä¸éçéæ©ã ä»¥ä¸é¨åå±ç¤ºäºå¦ä½çæ xml ææ¡£ä½ä¸ºæ¨¡åæ°æ®ï¼å¹¶å¨ spring web mvc åºç¨ç¨åºä¸­ä½¿ç¨ xslt å¯¹å¶è¿è¡è½¬æ¢ã\n\næ­¤ç¤ºä¾æ¯ä¸ä¸ªç®åç spring åºç¨ç¨åºï¼å®å¨ controller ä¸­åå»ºå³é®å­åè¡¨å¹¶å°å®ä»¬æ·»å å°æ¨¡åæ å°ä¸­ã è¿åæ å°ä»¥åæä»¬ç xslt è§å¾çè§å¾åç§°ã æå³ spring web mvc ç controller æ¥å£çè¯¦ç»ä¿¡æ¯ï¼è¯·åé annotated controllersã xslt æ§å¶å¨å°åè¯åè¡¨è½¬æ¢ä¸ºåå¤è½¬æ¢çç®å xml ææ¡£ã\n\n\n# beans\n\néç½®æ¯ä¸ä¸ªç®åç spring web åºç¨ç¨åºçæ åéç½®ï¼mvc éç½®å¿é¡»å®ä¹ä¸ä¸ª xsltviewresolver åå¸¸è§ mvc æ³¨ééç½®ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n@enablewebmvc\n@componentscan\n@configuration\npublic class webconfig implements webmvcconfigurer {\n\n    @bean\n    public xsltviewresolver xsltviewresolver() {\n        xsltviewresolver viewresolver = new xsltviewresolver();\n        viewresolver.setprefix("/web-inf/xsl/");\n        viewresolver.setsuffix(".xslt");\n        return viewresolver;\n    }\n}\n\n\n\n# controller\n\næä»¬è¿éè¦ä¸ä¸ªæ§å¶å¨æ¥å°è£æä»¬çåè¯çæé»è¾ã\n\næ§å¶å¨é»è¾å°è£å¨ä¸ä¸ª @controller ç±»ä¸­ï¼å¤çæ¹æ³å®ä¹å¦ä¸ï¼\n\n@controller\npublic class xsltcontroller {\n\n    @requestmapping("/")\n    public string home(model model) throws exception {\n        document document = documentbuilderfactory.newinstance().newdocumentbuilder().newdocument();\n        element root = document.createelement("wordlist");\n\n        list<string> words = arrays.aslist("hello", "spring", "framework");\n        for (string word : words) {\n            element wordnode = document.createelement("word");\n            text textnode = document.createtextnode(word);\n            wordnode.appendchild(textnode);\n            root.appendchild(wordnode);\n        }\n\n        model.addattribute("wordlist", root);\n        return "home";\n    }\n}\n\n\nå°ç®åä¸ºæ­¢ï¼æä»¬åªåå»ºäºä¸ä¸ª dom ææ¡£å¹¶å°å¶æ·»å å°æ¨¡åæ å°ä¸­ãè¯·æ³¨æï¼æ¨è¿å¯ä»¥å° xml æä»¶ä½ä¸º resource å è½½å¹¶ä½¿ç¨å®æ¥ä»£æ¿èªå®ä¹ dom ææ¡£ã\n\næå¯ç¨çè½¯ä»¶åå¯ä»¥èªå¨ \'domify\' ä¸ä¸ªå¯¹è±¡å¾ï¼ä½æ¯å¨ spring ä¸­ï¼æ¨å¯ä»¥å®å¨çµæ´»å°ä»¥æ¨éæ©çä»»ä½æ¹å¼ä»æ¨çæ¨¡ååå»º domãè¿å¯ä»¥é²æ­¢ xml çè½¬æ¢å¨æ¨¡åæ°æ®çç»æä¸­åæ¥å¤ªå¤§ä½ç¨ï¼è¿å¨ä½¿ç¨å·¥å·ç®¡ç domification è¿ç¨æ¶æ¯ä¸ç§å±é©ã\n\n\n# transformation\n\næåï¼xsltviewresolver è§£æ âhomeâ xslt æ¨¡æ¿æä»¶å¹¶å° dom ææ¡£åå¹¶å°å¶ä¸­ä»¥çææä»¬çè§å¾ãå¦ xsltviewresolver éç½®æç¤ºï¼xslt æ¨¡æ¿ä½äº web-inf/xsl ç®å½ä¸ç war æä»¶ä¸­ï¼å¹¶ä»¥ xslt æä»¶æ©å±åç»å°¾ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäº xslt è½¬æ¢ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/xsl/transform">\n\n    <xsl:output method="html" omit-xml-declaration="yes"/>\n\n    <xsl:template match="/">\n        <html>\n            <head><title>hello!</title></head>\n            <body>\n                <h1>my first words</h1>\n                <ul>\n                    <xsl:apply-templates/>\n                </ul>\n            </body>\n        </html>\n    </xsl:template>\n\n    <xsl:template match="word">\n        <li><xsl:value-of select="."/></li>\n    </xsl:template>\n\n</xsl:stylesheet>\n\n\nåé¢çè½¬æ¢æ¸²æä¸ºä»¥ä¸ htmlï¼\n\n<html>\n  <head>\n    <meta http-equiv="content-type" content="text/html; charset=utf-8" />\n    <title>hello!</title>\n  </head>\n  <body>\n    <h1>my first words</h1>\n    <ul>\n      <li>hello</li>\n      <li>spring</li>\n      <li>framework</li>\n    </ul>\n  </body>\n</html>\n\n\n\n# åèèµæ\n\n * spring framework å®æ¹ææ¡£\n * spring framework å®æ¹ææ¡£ä¹ web',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring Web",frontmatter:{title:"Spring Web",date:"2020-02-26T23:48:06.000Z",categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","SpringBoot","Web"],permalink:"/pages/e2586a/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/README.md",key:"v-27e9310e",path:"/pages/e2586a/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:72},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:201},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:380}],headersStr:"ð åå®¹ ð èµæ ðª ä¼ é",content:"# Spring Web\n\n> ç« èä¸»è¦éå¯¹ï¼Spring å¨ web é¢åçåºç¨ãå¦ï¼Spring MVCãWebSocket ç­ã\n\n\n# ð åå®¹\n\n * SpringWeb ç»¼è¿°\n * SpringWeb åºç¨\n * DispatcherServlet\n * Spring è¿æ»¤å¨\n * Spring è·¨å\n * Spring è§å¾\n * SpringBoot ä¹åºç¨ EasyUI\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",normalizedContent:"# spring web\n\n> ç« èä¸»è¦éå¯¹ï¼spring å¨ web é¢åçåºç¨ãå¦ï¼spring mvcãwebsocket ç­ã\n\n\n# ð åå®¹\n\n * springweb ç»¼è¿°\n * springweb åºç¨\n * dispatcherservlet\n * spring è¿æ»¤å¨\n * spring è·¨å\n * spring è§å¾\n * springboot ä¹åºç¨ easyui\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹åºç¨ EasyUI",frontmatter:{title:"SpringBoot ä¹åºç¨ EasyUI",date:"2019-01-08T17:19:34.000Z",order:21,categories:["Java","æ¡æ¶","Spring","SpringWeb"],tags:["Java","æ¡æ¶","Spring","SpringBoot","Web"],permalink:"/pages/ad0516/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/03.SpringWeb/21.SpringBoot%E4%B9%8B%E5%BA%94%E7%94%A8EasyUI.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/21.SpringBootä¹åºç¨EasyUI.md",key:"v-3caac053",path:"/pages/ad0516/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:288},{level:3,title:"ä»ä¹æ¯ EasyUIï¼",slug:"ä»ä¹æ¯-easyui",normalizedTitle:"ä»ä¹æ¯ easyuiï¼",charIndex:295},{level:2,title:"Spring Boot æ´å EasyUI",slug:"spring-boot-æ´å-easyui",normalizedTitle:"spring boot æ´å easyui",charIndex:549},{level:3,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:575},{level:3,title:"å¼å¥ easyui",slug:"å¼å¥-easyui",normalizedTitle:"å¼å¥ easyui",charIndex:676},{level:2,title:"å®æ",slug:"å®æ",normalizedTitle:"å®æ",charIndex:1583},{level:3,title:"å¼å¥ maven ä¾èµ",slug:"å¼å¥-maven-ä¾èµ",normalizedTitle:"å¼å¥ maven ä¾èµ",charIndex:1590},{level:3,title:"ä½¿ç¨ JPA",slug:"ä½¿ç¨-jpa",normalizedTitle:"ä½¿ç¨ jpa",charIndex:2677},{level:3,title:"ä½¿ç¨ Web",slug:"ä½¿ç¨-web",normalizedTitle:"ä½¿ç¨ web",charIndex:3374},{level:3,title:"ä½¿ç¨ EasyUI",slug:"ä½¿ç¨-easyui",normalizedTitle:"ä½¿ç¨ easyui",charIndex:4980},{level:2,title:"å®æ´ç¤ºä¾",slug:"å®æ´ç¤ºä¾",normalizedTitle:"å®æ´ç¤ºä¾",charIndex:11229},{level:2,title:"å¼ç¨åå¼ç³",slug:"å¼ç¨åå¼ç³",normalizedTitle:"å¼ç¨åå¼ç³",charIndex:11340}],headersStr:"ç®ä» ä»ä¹æ¯ EasyUIï¼ Spring Boot æ´å EasyUI éç½® å¼å¥ easyui å®æ å¼å¥ maven ä¾èµ ä½¿ç¨ JPA ä½¿ç¨ Web ä½¿ç¨ EasyUI å®æ´ç¤ºä¾ å¼ç¨åå¼ç³",content:'# SpringBoot ä¹åºç¨ EasyUI\n\n> EasyUI æ¯ä¸ä¸ªç®åçç¨æ·çé¢ç»ä»¶çéåãç±äº EasyUI å·²ç»å°è£å¥½å¤§é¨å UI åºæ¬åè½ï¼è½å¸®ç¨æ·åå°å¤§éç js å css ä»£ç ãæä»¥ï¼EasyUI éå¸¸éåç¨äºå¼åç®åçç³»ç»æååç³»ç»ã\n> \n> æ¬æç¤ºä¾ä½¿ç¨ææ¯ç¹ï¼\n> \n>  * Spring Bootï¼ä¸»è¦ä½¿ç¨äº spring-boot-starter-webãspring-boot-starter-data-jpa\n>  * EasyUIï¼æéå è½½ï¼å¹¶æ²¡æå¼å¥ææç EasyUI ç¹æ§\n>  * æ°æ®åºï¼ä¸ºäºæµè¯æ¹ä¾¿ï¼ä½¿ç¨ H2\n\n\n\n\n# ç®ä»\n\n\n# ä»ä¹æ¯ EasyUIï¼\n\n * easyui æ¯åºäº jQueryãAngular.ãVue å React çç¨æ·çé¢ç»ä»¶çéåã\n * easyui æä¾äºæå»ºç°ä»£äº¤äºå¼ javascript åºç¨ç¨åºçåºæ¬åè½ã\n * ä½¿ç¨ easyuiï¼æ¨ä¸éè¦ç¼åè®¸å¤ javascript ä»£ç ï¼éå¸¸éè¿ç¼åä¸äº HTML æ è®°æ¥å®ä¹ç¨æ·çé¢ã\n * å®æ´ç HTML5 ç½é¡µæ¡æ¶ã\n * ä½¿ç¨ easyui å¼åä½ çäº§åæ¶å¯ä»¥å¤§éèçä½ çæ¶é´åè§æ¨¡ã\n * easyui ä½¿ç¨éå¸¸ç®åä½åè½éå¸¸å¼ºå¤§ã\n\n\n# Spring Boot æ´å EasyUI\n\n\n# éç½®\n\napplication.properties ä¿®æ¹ï¼\n\nspring.mvc.view.prefix = /views/\nspring.mvc.view.suffix = .html\n\n\n\n# å¼å¥ easyui\n\nEasyUI ä¸è½½å°åï¼http://www.jeasyui.cn/download.html\n\nå¨ src/main/resources/static ç®å½ä¸å¼å¥ easyuiã\n\nç¶åå¨ html ä¸­å¼ç¨ï¼\n\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="UTF-8" />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/bootstrap/easyui.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/icon.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/color.css"\n    />\n    <script type="text/javascript" src="../lib/easyui/jquery.min.js"><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/jquery.easyui.min.js"\n    ><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/locale/easyui-lang-zh_CN.js"\n    ><\/script>\n  </head>\n  <body>\n    \x3c!-- çç¥ --\x3e\n  </body>\n</html>\n\n\nå¼å¥ easyui åï¼éè¦ä½¿ç¨åªç§ç»ä»¶ï¼å¯ä»¥æ¥çç¸å³ææ¡£æ APIï¼ååç®åï¼æ­¤å¤ä¸ä¸ä¸èµè¿°ã\n\n\n# å®æ\n\n\n# å¼å¥ maven ä¾èµ\n\n  <dependencies>\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-data-jpa</artifactId>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-tomcat</artifactId>\n      <scope>provided</scope>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-test</artifactId>\n      <scope>test</scope>\n    </dependency>\n\n    <dependency>\n      <groupId>com.h2database</groupId>\n      <artifactId>h2</artifactId>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-devtools</artifactId>\n    </dependency>\n    <dependency>\n      <groupId>commons-collections</groupId>\n      <artifactId>commons-collections</artifactId>\n      <version>3.2.2</version>\n    </dependency>\n  </dependencies>\n\n\n\n# ä½¿ç¨ JPA\n\nä¸ºäºä½¿ç¨ JPA ææ¯è®¿é®æ°æ®ï¼æä»¬éè¦å®ä¹ Entity å Repository\n\nå®ä¹ä¸ä¸ª Entityï¼\n\n@Entity\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String firstName;\n    private String lastName;\n    private String phone;\n    private String email;\n\n    protected User() {}\n\n    public User(String firstName, String lastName, String phone, String email) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.phone = phone;\n        this.email = email;\n    }\n\n    // ç¥ getter/setter\n}\n\n\nå®ä¹ä¸ä¸ª Repositoryï¼\n\npublic interface UserRepository extends CrudRepository<User, Long> {\n\n    List<User> findByLastName(String lastName);\n}\n\n\n\n# ä½¿ç¨ Web\n\né¦é¡µ Controllerï¼å° web è¯·æ±å®åå°æå®é¡µé¢ï¼ä¸é¢çä¾å­å®åå° index.htmlï¼\n\n@Controller\npublic class IndexController {\n\n    @RequestMapping(value = {"", "/", "index"})\n    public String index() {\n        return "index";\n    }\n\n}\n\n\næ­¤å¤ï¼éè¦å®ä¹ä¸ä¸ª Controllerï¼æä¾åå°ç API æ¥å£\n\n@Controller\npublic class UserController {\n\n    @Autowired\n    private UserRepository customerRepository;\n\n    @RequestMapping(value = "/user", method = RequestMethod.GET)\n    public String user() {\n        return "user";\n    }\n\n    @ResponseBody\n    @RequestMapping(value = "/user/list")\n    public ResponseDTO<User> list() {\n        Iterable<User> all = customerRepository.findAll();\n        List<User> list = IteratorUtils.toList(all.iterator());\n        return new ResponseDTO<>(true, list.size(), list);\n    }\n\n    @ResponseBody\n    @RequestMapping(value = "/user/add")\n    public ResponseDTO<User> add(User user) {\n        User result = customerRepository.save(user);\n        List<User> list = new ArrayList<>();\n        list.add(result);\n        return new ResponseDTO<>(true, 1, list);\n    }\n\n    @ResponseBody\n    @RequestMapping(value = "/user/save")\n    public ResponseDTO<User> save(@RequestParam("id") Long id, User user) {\n        user.setId(id);\n        customerRepository.save(user);\n        List<User> list = new ArrayList<>();\n        list.add(user);\n        return new ResponseDTO<>(true, 1, list);\n    }\n\n    @ResponseBody\n    @RequestMapping(value = "/user/delete")\n    public ResponseDTO delete(@RequestParam("id") Long id) {\n        customerRepository.deleteById(id);\n        return new ResponseDTO<>(true, null, null);\n    }\n\n}\n\n\n\n# ä½¿ç¨ EasyUI\n\næ¥ä¸æ¥ï¼æä»¬è¦ä½¿ç¨åé¢å®ä¹çåå°æ¥å£ï¼ä»éè¦å¨ EasyUI API ä¸­æå® url å³å¯ã\n\nè¯·çæä¸é¢ç¤ºä¾ä¸­ç url å­æ®µï¼åå®éæ¥å£æ¯ä¸ä¸å¯¹åºçã\n\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Complex Layout - jQuery EasyUI Demo</title>\n    <meta charset="UTF-8" />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/bootstrap/easyui.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/icon.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/color.css"\n    />\n    <script type="text/javascript" src="../lib/easyui/jquery.min.js"><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/jquery.easyui.min.js"\n    ><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/locale/easyui-lang-zh_CN.js"\n    ><\/script>\n    <style type="text/css">\n      body {\n        font-family: microsoft yahei;\n      }\n    </style>\n  </head>\n  <body>\n    <div style="width:100%">\n      <h2>åºæ¬ç CRUD åºç¨</h2>\n      <p>æ°æ®æ¥æºäºåå°ç³»ç»</p>\n\n      <table\n        id="dg"\n        title="Custom List"\n        class="easyui-datagrid"\n        url="/user/list"\n        toolbar="#toolbar"\n        pagination="true"\n        rownumbers="true"\n        fitColumns="true"\n        singleSelect="true"\n      >\n        <thead>\n          <tr>\n            <th field="id" width="50">ID</th>\n            <th field="firstName" width="50">First Name</th>\n            <th field="lastName" width="50">Last Name</th>\n            <th field="phone" width="50">Phone</th>\n            <th field="email" width="50">Email</th>\n          </tr>\n        </thead>\n      </table>\n      <div id="toolbar">\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconCls="icon-add"\n          plain="true"\n          onclick="newUser()"\n          >æ·»å </a\n        >\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconCls="icon-edit"\n          plain="true"\n          onclick="editUser()"\n          >ä¿®æ¹</a\n        >\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconCls="icon-remove"\n          plain="true"\n          onclick="destroyUser()"\n          >å é¤</a\n        >\n      </div>\n\n      <div\n        id="dlg"\n        class="easyui-dialog"\n        style="width:400px"\n        data-options="closed:true,modal:true,border:\'thin\',buttons:\'#dlg-buttons\'"\n      >\n        <form\n          id="fm"\n          method="post"\n          novalidate\n          style="margin:0;padding:20px 50px"\n        >\n          <h3>User Information</h3>\n          <div style="margin-bottom:10px">\n            <input\n              name="firstName"\n              class="easyui-textbox"\n              required="true"\n              label="First Name:"\n              style="width:100%"\n            />\n          </div>\n          <div style="margin-bottom:10px">\n            <input\n              name="lastName"\n              class="easyui-textbox"\n              required="true"\n              label="Last Name:"\n              style="width:100%"\n            />\n          </div>\n          <div style="margin-bottom:10px">\n            <input\n              name="phone"\n              class="easyui-textbox"\n              required="true"\n              label="Phone:"\n              style="width:100%"\n            />\n          </div>\n          <div style="margin-bottom:10px">\n            <input\n              name="email"\n              class="easyui-textbox"\n              required="true"\n              validType="email"\n              label="Email:"\n              style="width:100%"\n            />\n          </div>\n        </form>\n      </div>\n      <div id="dlg-buttons">\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton c6"\n          iconCls="icon-ok"\n          onclick="saveUser()"\n          style="width:90px"\n          >Save</a\n        >\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconCls="icon-cancel"\n          onclick="javascript:$(\'#dlg\').dialog(\'close\')"\n          style="width:90px"\n          >Cancel</a\n        >\n      </div>\n    </div>\n\n    <script type="text/javascript">\n      var url\n\n      function newUser() {\n        $(\'#dlg\')\n          .dialog(\'open\')\n          .dialog(\'center\')\n          .dialog(\'setTitle\', \'New User\')\n        $(\'#fm\').form(\'clear\')\n        url = \'/user/add\'\n      }\n\n      function editUser() {\n        var row = $(\'#dg\').datagrid(\'getSelected\')\n        if (row) {\n          $(\'#dlg\')\n            .dialog(\'open\')\n            .dialog(\'center\')\n            .dialog(\'setTitle\', \'Edit User\')\n          $(\'#fm\').form(\'load\', row)\n          url = \'/user/save\'\n        }\n      }\n\n      function saveUser() {\n        $(\'#fm\').form(\'submit\', {\n          url: url,\n          onSubmit: function() {\n            return $(this).form(\'validate\')\n          },\n          success: function(result) {\n            var result = eval(\'(\' + result + \')\')\n            if (result.errorMsg) {\n              $.messager.show({\n                title: \'Error\',\n                msg: result.errorMsg\n              })\n            } else {\n              $(\'#dlg\').dialog(\'close\') // close the dialog\n              $(\'#dg\').datagrid(\'reload\') // reload the user data\n            }\n          }\n        })\n      }\n\n      function destroyUser() {\n        var row = $(\'#dg\').datagrid(\'getSelected\')\n        if (row) {\n          $.messager.confirm(\n            \'Confirm\',\n            \'Are you sure you want to destroy this user?\',\n            function(r) {\n              if (r) {\n                $.post(\n                  \'/user/delete\',\n                  { id: row.id },\n                  function(result) {\n                    if (result.success) {\n                      $(\'#dg\').datagrid(\'reload\') // reload the user data\n                    } else {\n                      $.messager.show({\n                        // show error message\n                        title: \'Error\',\n                        msg: result.errorMsg\n                      })\n                    }\n                  },\n                  \'json\'\n                )\n              }\n            }\n          )\n        }\n      }\n    <\/script>\n  </body>\n</html>\n\n\n\n# å®æ´ç¤ºä¾\n\nè¯·åè æºç \n\nè¿è¡æ¹å¼ï¼\n\nmvn clean package -DskipTests=true\njava -jar target/\n\n\nå¨æµè§å¨ä¸­è®¿é®ï¼http://localhost:8080/\n\n\n# å¼ç¨åå¼ç³\n\n * EasyUI å®ç½\n * EasyUI ä¸­æç½',normalizedContent:'# springboot ä¹åºç¨ easyui\n\n> easyui æ¯ä¸ä¸ªç®åçç¨æ·çé¢ç»ä»¶çéåãç±äº easyui å·²ç»å°è£å¥½å¤§é¨å ui åºæ¬åè½ï¼è½å¸®ç¨æ·åå°å¤§éç js å css ä»£ç ãæä»¥ï¼easyui éå¸¸éåç¨äºå¼åç®åçç³»ç»æååç³»ç»ã\n> \n> æ¬æç¤ºä¾ä½¿ç¨ææ¯ç¹ï¼\n> \n>  * spring bootï¼ä¸»è¦ä½¿ç¨äº spring-boot-starter-webãspring-boot-starter-data-jpa\n>  * easyuiï¼æéå è½½ï¼å¹¶æ²¡æå¼å¥ææç easyui ç¹æ§\n>  * æ°æ®åºï¼ä¸ºäºæµè¯æ¹ä¾¿ï¼ä½¿ç¨ h2\n\n\n\n\n# ç®ä»\n\n\n# ä»ä¹æ¯ easyuiï¼\n\n * easyui æ¯åºäº jqueryãangular.ãvue å react çç¨æ·çé¢ç»ä»¶çéåã\n * easyui æä¾äºæå»ºç°ä»£äº¤äºå¼ javascript åºç¨ç¨åºçåºæ¬åè½ã\n * ä½¿ç¨ easyuiï¼æ¨ä¸éè¦ç¼åè®¸å¤ javascript ä»£ç ï¼éå¸¸éè¿ç¼åä¸äº html æ è®°æ¥å®ä¹ç¨æ·çé¢ã\n * å®æ´ç html5 ç½é¡µæ¡æ¶ã\n * ä½¿ç¨ easyui å¼åä½ çäº§åæ¶å¯ä»¥å¤§éèçä½ çæ¶é´åè§æ¨¡ã\n * easyui ä½¿ç¨éå¸¸ç®åä½åè½éå¸¸å¼ºå¤§ã\n\n\n# spring boot æ´å easyui\n\n\n# éç½®\n\napplication.properties ä¿®æ¹ï¼\n\nspring.mvc.view.prefix = /views/\nspring.mvc.view.suffix = .html\n\n\n\n# å¼å¥ easyui\n\neasyui ä¸è½½å°åï¼http://www.jeasyui.cn/download.html\n\nå¨ src/main/resources/static ç®å½ä¸å¼å¥ easyuiã\n\nç¶åå¨ html ä¸­å¼ç¨ï¼\n\n<!doctype html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/bootstrap/easyui.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/icon.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/color.css"\n    />\n    <script type="text/javascript" src="../lib/easyui/jquery.min.js"><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/jquery.easyui.min.js"\n    ><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/locale/easyui-lang-zh_cn.js"\n    ><\/script>\n  </head>\n  <body>\n    \x3c!-- çç¥ --\x3e\n  </body>\n</html>\n\n\nå¼å¥ easyui åï¼éè¦ä½¿ç¨åªç§ç»ä»¶ï¼å¯ä»¥æ¥çç¸å³ææ¡£æ apiï¼ååç®åï¼æ­¤å¤ä¸ä¸ä¸èµè¿°ã\n\n\n# å®æ\n\n\n# å¼å¥ maven ä¾èµ\n\n  <dependencies>\n    <dependency>\n      <groupid>org.springframework.boot</groupid>\n      <artifactid>spring-boot-starter-web</artifactid>\n    </dependency>\n    <dependency>\n      <groupid>org.springframework.boot</groupid>\n      <artifactid>spring-boot-starter-data-jpa</artifactid>\n    </dependency>\n    <dependency>\n      <groupid>org.springframework.boot</groupid>\n      <artifactid>spring-boot-starter-tomcat</artifactid>\n      <scope>provided</scope>\n    </dependency>\n    <dependency>\n      <groupid>org.springframework.boot</groupid>\n      <artifactid>spring-boot-starter-test</artifactid>\n      <scope>test</scope>\n    </dependency>\n\n    <dependency>\n      <groupid>com.h2database</groupid>\n      <artifactid>h2</artifactid>\n    </dependency>\n    <dependency>\n      <groupid>org.springframework.boot</groupid>\n      <artifactid>spring-boot-devtools</artifactid>\n    </dependency>\n    <dependency>\n      <groupid>commons-collections</groupid>\n      <artifactid>commons-collections</artifactid>\n      <version>3.2.2</version>\n    </dependency>\n  </dependencies>\n\n\n\n# ä½¿ç¨ jpa\n\nä¸ºäºä½¿ç¨ jpa ææ¯è®¿é®æ°æ®ï¼æä»¬éè¦å®ä¹ entity å repository\n\nå®ä¹ä¸ä¸ª entityï¼\n\n@entity\npublic class user {\n\n    @id\n    @generatedvalue(strategy = generationtype.auto)\n    private long id;\n    private string firstname;\n    private string lastname;\n    private string phone;\n    private string email;\n\n    protected user() {}\n\n    public user(string firstname, string lastname, string phone, string email) {\n        this.firstname = firstname;\n        this.lastname = lastname;\n        this.phone = phone;\n        this.email = email;\n    }\n\n    // ç¥ getter/setter\n}\n\n\nå®ä¹ä¸ä¸ª repositoryï¼\n\npublic interface userrepository extends crudrepository<user, long> {\n\n    list<user> findbylastname(string lastname);\n}\n\n\n\n# ä½¿ç¨ web\n\né¦é¡µ controllerï¼å° web è¯·æ±å®åå°æå®é¡µé¢ï¼ä¸é¢çä¾å­å®åå° index.htmlï¼\n\n@controller\npublic class indexcontroller {\n\n    @requestmapping(value = {"", "/", "index"})\n    public string index() {\n        return "index";\n    }\n\n}\n\n\næ­¤å¤ï¼éè¦å®ä¹ä¸ä¸ª controllerï¼æä¾åå°ç api æ¥å£\n\n@controller\npublic class usercontroller {\n\n    @autowired\n    private userrepository customerrepository;\n\n    @requestmapping(value = "/user", method = requestmethod.get)\n    public string user() {\n        return "user";\n    }\n\n    @responsebody\n    @requestmapping(value = "/user/list")\n    public responsedto<user> list() {\n        iterable<user> all = customerrepository.findall();\n        list<user> list = iteratorutils.tolist(all.iterator());\n        return new responsedto<>(true, list.size(), list);\n    }\n\n    @responsebody\n    @requestmapping(value = "/user/add")\n    public responsedto<user> add(user user) {\n        user result = customerrepository.save(user);\n        list<user> list = new arraylist<>();\n        list.add(result);\n        return new responsedto<>(true, 1, list);\n    }\n\n    @responsebody\n    @requestmapping(value = "/user/save")\n    public responsedto<user> save(@requestparam("id") long id, user user) {\n        user.setid(id);\n        customerrepository.save(user);\n        list<user> list = new arraylist<>();\n        list.add(user);\n        return new responsedto<>(true, 1, list);\n    }\n\n    @responsebody\n    @requestmapping(value = "/user/delete")\n    public responsedto delete(@requestparam("id") long id) {\n        customerrepository.deletebyid(id);\n        return new responsedto<>(true, null, null);\n    }\n\n}\n\n\n\n# ä½¿ç¨ easyui\n\næ¥ä¸æ¥ï¼æä»¬è¦ä½¿ç¨åé¢å®ä¹çåå°æ¥å£ï¼ä»éè¦å¨ easyui api ä¸­æå® url å³å¯ã\n\nè¯·çæä¸é¢ç¤ºä¾ä¸­ç url å­æ®µï¼åå®éæ¥å£æ¯ä¸ä¸å¯¹åºçã\n\n<!doctype html>\n<html>\n  <head>\n    <title>complex layout - jquery easyui demo</title>\n    <meta charset="utf-8" />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/bootstrap/easyui.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/icon.css"\n    />\n    <link\n      rel="stylesheet"\n      type="text/css"\n      href="../lib/easyui/themes/color.css"\n    />\n    <script type="text/javascript" src="../lib/easyui/jquery.min.js"><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/jquery.easyui.min.js"\n    ><\/script>\n    <script\n      type="text/javascript"\n      src="../lib/easyui/locale/easyui-lang-zh_cn.js"\n    ><\/script>\n    <style type="text/css">\n      body {\n        font-family: microsoft yahei;\n      }\n    </style>\n  </head>\n  <body>\n    <div style="width:100%">\n      <h2>åºæ¬ç crud åºç¨</h2>\n      <p>æ°æ®æ¥æºäºåå°ç³»ç»</p>\n\n      <table\n        id="dg"\n        title="custom list"\n        class="easyui-datagrid"\n        url="/user/list"\n        toolbar="#toolbar"\n        pagination="true"\n        rownumbers="true"\n        fitcolumns="true"\n        singleselect="true"\n      >\n        <thead>\n          <tr>\n            <th field="id" width="50">id</th>\n            <th field="firstname" width="50">first name</th>\n            <th field="lastname" width="50">last name</th>\n            <th field="phone" width="50">phone</th>\n            <th field="email" width="50">email</th>\n          </tr>\n        </thead>\n      </table>\n      <div id="toolbar">\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconcls="icon-add"\n          plain="true"\n          onclick="newuser()"\n          >æ·»å </a\n        >\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconcls="icon-edit"\n          plain="true"\n          onclick="edituser()"\n          >ä¿®æ¹</a\n        >\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconcls="icon-remove"\n          plain="true"\n          onclick="destroyuser()"\n          >å é¤</a\n        >\n      </div>\n\n      <div\n        id="dlg"\n        class="easyui-dialog"\n        style="width:400px"\n        data-options="closed:true,modal:true,border:\'thin\',buttons:\'#dlg-buttons\'"\n      >\n        <form\n          id="fm"\n          method="post"\n          novalidate\n          style="margin:0;padding:20px 50px"\n        >\n          <h3>user information</h3>\n          <div style="margin-bottom:10px">\n            <input\n              name="firstname"\n              class="easyui-textbox"\n              required="true"\n              label="first name:"\n              style="width:100%"\n            />\n          </div>\n          <div style="margin-bottom:10px">\n            <input\n              name="lastname"\n              class="easyui-textbox"\n              required="true"\n              label="last name:"\n              style="width:100%"\n            />\n          </div>\n          <div style="margin-bottom:10px">\n            <input\n              name="phone"\n              class="easyui-textbox"\n              required="true"\n              label="phone:"\n              style="width:100%"\n            />\n          </div>\n          <div style="margin-bottom:10px">\n            <input\n              name="email"\n              class="easyui-textbox"\n              required="true"\n              validtype="email"\n              label="email:"\n              style="width:100%"\n            />\n          </div>\n        </form>\n      </div>\n      <div id="dlg-buttons">\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton c6"\n          iconcls="icon-ok"\n          onclick="saveuser()"\n          style="width:90px"\n          >save</a\n        >\n        <a\n          href="javascript:void(0)"\n          class="easyui-linkbutton"\n          iconcls="icon-cancel"\n          onclick="javascript:$(\'#dlg\').dialog(\'close\')"\n          style="width:90px"\n          >cancel</a\n        >\n      </div>\n    </div>\n\n    <script type="text/javascript">\n      var url\n\n      function newuser() {\n        $(\'#dlg\')\n          .dialog(\'open\')\n          .dialog(\'center\')\n          .dialog(\'settitle\', \'new user\')\n        $(\'#fm\').form(\'clear\')\n        url = \'/user/add\'\n      }\n\n      function edituser() {\n        var row = $(\'#dg\').datagrid(\'getselected\')\n        if (row) {\n          $(\'#dlg\')\n            .dialog(\'open\')\n            .dialog(\'center\')\n            .dialog(\'settitle\', \'edit user\')\n          $(\'#fm\').form(\'load\', row)\n          url = \'/user/save\'\n        }\n      }\n\n      function saveuser() {\n        $(\'#fm\').form(\'submit\', {\n          url: url,\n          onsubmit: function() {\n            return $(this).form(\'validate\')\n          },\n          success: function(result) {\n            var result = eval(\'(\' + result + \')\')\n            if (result.errormsg) {\n              $.messager.show({\n                title: \'error\',\n                msg: result.errormsg\n              })\n            } else {\n              $(\'#dlg\').dialog(\'close\') // close the dialog\n              $(\'#dg\').datagrid(\'reload\') // reload the user data\n            }\n          }\n        })\n      }\n\n      function destroyuser() {\n        var row = $(\'#dg\').datagrid(\'getselected\')\n        if (row) {\n          $.messager.confirm(\n            \'confirm\',\n            \'are you sure you want to destroy this user?\',\n            function(r) {\n              if (r) {\n                $.post(\n                  \'/user/delete\',\n                  { id: row.id },\n                  function(result) {\n                    if (result.success) {\n                      $(\'#dg\').datagrid(\'reload\') // reload the user data\n                    } else {\n                      $.messager.show({\n                        // show error message\n                        title: \'error\',\n                        msg: result.errormsg\n                      })\n                    }\n                  },\n                  \'json\'\n                )\n              }\n            }\n          )\n        }\n      }\n    <\/script>\n  </body>\n</html>\n\n\n\n# å®æ´ç¤ºä¾\n\nè¯·åè æºç \n\nè¿è¡æ¹å¼ï¼\n\nmvn clean package -dskiptests=true\njava -jar target/\n\n\nå¨æµè§å¨ä¸­è®¿é®ï¼http://localhost:8080/\n\n\n# å¼ç¨åå¼ç³\n\n * easyui å®ç½\n * easyui ä¸­æç½',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"spring-boot-async",frontmatter:{title:"spring-boot-async",date:"2019-11-18T14:55:01.000Z",order:1,categories:["Java","æ¡æ¶","Spring","SpringIO"],tags:["Java","æ¡æ¶","Spring","SpringBoot","å¼æ­¥"],permalink:"/pages/92add2/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/04.SpringIO/01.SpringBoot%E4%B9%8B%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/01.SpringBootä¹å¼æ­¥è¯·æ±.md",key:"v-515c830f",path:"/pages/92add2/",headers:[{level:2,title:"@EnableAsync æ³¨è§£",slug:"enableasync-æ³¨è§£",normalizedTitle:"@enableasync æ³¨è§£",charIndex:27},{level:2,title:"@Async æ³¨è§£",slug:"async-æ³¨è§£",normalizedTitle:"@async æ³¨è§£",charIndex:192},{level:3,title:"æ¯æçç¨æ³",slug:"æ¯æçç¨æ³",normalizedTitle:"æ¯æçç¨æ³",charIndex:206},{level:3,title:"ä¸æ¯æçç¨æ³",slug:"ä¸æ¯æçç¨æ³",normalizedTitle:"ä¸æ¯æçç¨æ³",charIndex:866},{level:2,title:"æç¡®æå®æ§è¡å¨",slug:"æç¡®æå®æ§è¡å¨",normalizedTitle:"æç¡®æå®æ§è¡å¨",charIndex:1355},{level:2,title:"ç®¡ç @Async çå¼å¸¸",slug:"ç®¡ç-async-çå¼å¸¸",normalizedTitle:"ç®¡ç @async çå¼å¸¸",charIndex:1800},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:2318},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2353}],headersStr:"@EnableAsync æ³¨è§£ @Async æ³¨è§£ æ¯æçç¨æ³ ä¸æ¯æçç¨æ³ æç¡®æå®æ§è¡å¨ ç®¡ç @Async çå¼å¸¸ ç¤ºä¾æºç  åèèµæ",content:'# SpringBoot æç¨ä¹å¤çå¼æ­¥è¯·æ±\n\n\n# @EnableAsync æ³¨è§£\n\nè¦ä½¿ç¨ @Asyncï¼é¦åéè¦ä½¿ç¨ @EnableAsync æ³¨è§£å¼å¯ Spring Boot ä¸­çå¼æ­¥ç¹æ§ã\n\n@Configuration\n@EnableAsync\npublic class AppConfig {\n}\n\n\næ´è¯¦ç»çéç½®è¯´æï¼å¯ä»¥åèï¼AsyncConfigurer\n\n\n# @Async æ³¨è§£\n\n\n# æ¯æçç¨æ³\n\nï¼1ï¼æ å¥åæ è¿åå¼æ¹æ³\n\næ¨å¯ä»¥ç¨ @Async æ³¨è§£ä¿®é¥°æ¹æ³ï¼è¿è¡¨æè¿ä¸ªæ¹æ³æ¯å¼æ­¥æ¹å¼è°ç¨ãæ¢å¥è¯è¯´ï¼ç¨åºå¨è°ç¨æ­¤æ¹æ³æ¶ä¼ç«å³è¿åï¼èæ¹æ³çå®éæ§è¡åçå¨å·²æäº¤ç» Spring TaskExecutor çä»»å¡ä¸­ãå¨æç®åçæåµä¸ï¼æ¨å¯ä»¥å°æ³¨è§£åºç¨äºè¿å void çæ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Async\nvoid doSomething() {\n    // this will be executed asynchronously\n}\n\n\nï¼2ï¼æå¥åæ è¿åå¼æ¹æ³\n\nä¸ä½¿ç¨ @Scheduled æ³¨éæ³¨éçæ¹æ³ä¸åï¼è¿äºæ¹æ³å¯ä»¥æå®åæ°ï¼å ä¸ºå®ä»¬å¨è¿è¡æ¶ç±è°ç¨èä»¥âæ­£å¸¸âæ¹å¼è°ç¨ï¼èä¸æ¯ç±å®¹å¨ç®¡ççè°åº¦ä»»å¡è°ç¨ãä¾å¦ï¼ä»¥ä¸ä»£ç æ¯ @Async æ³¨è§£çåæ³åºç¨ï¼\n\n@Async\nvoid doSomething(String s) {\n    // this will be executed asynchronously\n}\n\n\nï¼3ï¼æå¥åæè¿åå¼æ¹æ³\n\nçè³å¯ä»¥å¼æ­¥è°ç¨è¿åå¼çæ¹æ³ãä½æ¯ï¼è¿äºæ¹æ³éè¦å·æ Future ç±»åçè¿åå¼ãè¿ä»ç¶æä¾äºå¼æ­¥æ§è¡çå¥½å¤ï¼ä»¥ä¾¿è°ç¨èå¯ä»¥å¨è°ç¨ Future ä¸ç get() ä¹åæ§è¡å¶ä»ä»»å¡ãä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½å¨è¿åå¼çæ¹æ³ä¸ä½¿ç¨@Asyncï¼\n\n@Async\nFuture<String> returnSomething(int i) {\n    // this will be executed asynchronously\n}\n\n\n\n# ä¸æ¯æçç¨æ³\n\n@Async ä¸è½ä¸çå½å¨æåè°ä¸èµ·ä½¿ç¨ï¼ä¾å¦ @PostConstructã\n\nè¦å¼æ­¥åå§å Spring beanï¼å¿é¡»ä½¿ç¨åç¬çåå§å Spring beanï¼ç¶åå¨ç®æ ä¸è°ç¨ @Async å¸¦æ³¨éçæ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class SampleBeanImpl implements SampleBean {\n\n    @Async\n    void doSomething() {\n        // ...\n    }\n\n}\n\npublic class SampleBeanInitializer {\n\n    private final SampleBean bean;\n\n    public SampleBeanInitializer(SampleBean bean) {\n        this.bean = bean;\n    }\n\n    @PostConstruct\n    public void initialize() {\n        bean.doSomething();\n    }\n\n}\n\n\n\n# æç¡®æå®æ§è¡å¨\n\né»è®¤æåµä¸ï¼å¨æ¹æ³ä¸æå® @Async æ¶ï¼ä½¿ç¨çæ§è¡å¨æ¯å¨å¯ç¨å¼æ­¥æ¯ææ¶éç½®çæ§è¡å¨ï¼å³å¦æä½¿ç¨ XML æ AsyncConfigurer å®ç°ï¼å¦ææï¼ï¼åä¸º annotation-driven åç´ ãä½æ¯ï¼å¦æéè¦æç¤ºå¨æ§è¡ç»å®æ¹æ³æ¶åºä½¿ç¨é»è®¤å¼ä»¥å¤çæ§è¡å¨ï¼åå¯ä»¥ä½¿ç¨ @Async æ³¨è§£ç value å±æ§ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n@Async("otherExecutor")\nvoid doSomething(String s) {\n    // this will be executed asynchronously by "otherExecutor"\n}\n\n\nå¨è¿ç§æåµä¸ï¼âotherExecutorâå¯ä»¥æ¯ Spring å®¹å¨ä¸­ä»»ä½ Executor bean çåç§°ï¼ä¹å¯ä»¥æ¯ä¸ä»»ä½ Executor å³èçéå®ç¬¦çåç§°ï¼ä¾å¦ï¼ä½¿ç¨ <qualifier> åç´ æ Spring ç @Qualifier æ³¨éæå®ï¼ ï¼ã\n\n\n# ç®¡ç @Async çå¼å¸¸\n\nå½ @Async æ¹æ³çè¿åå¼ç±»åä¸º Future åæ¶ï¼å¾å®¹æç®¡çå¨æ¹æ³æ§è¡æé´æåºçå¼å¸¸ï¼å ä¸ºå¨è°ç¨ get ç»ææ¶ä¼æåºæ­¤å¼å¸¸ãä½æ¯ï¼å¯¹äºè¿åå¼ç±»åä¸º void åçæ¹æ³ï¼å¼å¸¸ä¸ä¼è¢«æè·ä¸æ æ³ä¼ è¾ãæ¨å¯ä»¥æä¾ AsyncUncaughtExceptionHandler æ¥å¤çæ­¤ç±»å¼å¸¸ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\npublic class MyAsyncUncaughtExceptionHandler implements AsyncUncaughtExceptionHandler {\n\n    @Override\n    public void handleUncaughtException(Throwable ex, Method method, Object... params) {\n        // handle exception\n    }\n}\n\n\né»è®¤æåµä¸ï¼ä»è®°å½å¼å¸¸ãæ¨å¯ä»¥ä½¿ç¨ AsyncConfigurer æ <taskï¼annotation-driven /> XML åç´ å®ä¹èªå®ä¹ AsyncUncaughtExceptionHandlerã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-async\n\n\n# åèèµæ\n\n * Spring Boot å®æ¹ææ¡£ä¹ boot-features-external-config\n * Spring Boot å®æ¹ææ¡£ä¹ scheduling-annotation-support',normalizedContent:'# springboot æç¨ä¹å¤çå¼æ­¥è¯·æ±\n\n\n# @enableasync æ³¨è§£\n\nè¦ä½¿ç¨ @asyncï¼é¦åéè¦ä½¿ç¨ @enableasync æ³¨è§£å¼å¯ spring boot ä¸­çå¼æ­¥ç¹æ§ã\n\n@configuration\n@enableasync\npublic class appconfig {\n}\n\n\næ´è¯¦ç»çéç½®è¯´æï¼å¯ä»¥åèï¼asyncconfigurer\n\n\n# @async æ³¨è§£\n\n\n# æ¯æçç¨æ³\n\nï¼1ï¼æ å¥åæ è¿åå¼æ¹æ³\n\næ¨å¯ä»¥ç¨ @async æ³¨è§£ä¿®é¥°æ¹æ³ï¼è¿è¡¨æè¿ä¸ªæ¹æ³æ¯å¼æ­¥æ¹å¼è°ç¨ãæ¢å¥è¯è¯´ï¼ç¨åºå¨è°ç¨æ­¤æ¹æ³æ¶ä¼ç«å³è¿åï¼èæ¹æ³çå®éæ§è¡åçå¨å·²æäº¤ç» spring taskexecutor çä»»å¡ä¸­ãå¨æç®åçæåµä¸ï¼æ¨å¯ä»¥å°æ³¨è§£åºç¨äºè¿å void çæ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@async\nvoid dosomething() {\n    // this will be executed asynchronously\n}\n\n\nï¼2ï¼æå¥åæ è¿åå¼æ¹æ³\n\nä¸ä½¿ç¨ @scheduled æ³¨éæ³¨éçæ¹æ³ä¸åï¼è¿äºæ¹æ³å¯ä»¥æå®åæ°ï¼å ä¸ºå®ä»¬å¨è¿è¡æ¶ç±è°ç¨èä»¥âæ­£å¸¸âæ¹å¼è°ç¨ï¼èä¸æ¯ç±å®¹å¨ç®¡ççè°åº¦ä»»å¡è°ç¨ãä¾å¦ï¼ä»¥ä¸ä»£ç æ¯ @async æ³¨è§£çåæ³åºç¨ï¼\n\n@async\nvoid dosomething(string s) {\n    // this will be executed asynchronously\n}\n\n\nï¼3ï¼æå¥åæè¿åå¼æ¹æ³\n\nçè³å¯ä»¥å¼æ­¥è°ç¨è¿åå¼çæ¹æ³ãä½æ¯ï¼è¿äºæ¹æ³éè¦å·æ future ç±»åçè¿åå¼ãè¿ä»ç¶æä¾äºå¼æ­¥æ§è¡çå¥½å¤ï¼ä»¥ä¾¿è°ç¨èå¯ä»¥å¨è°ç¨ future ä¸ç get() ä¹åæ§è¡å¶ä»ä»»å¡ãä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½å¨è¿åå¼çæ¹æ³ä¸ä½¿ç¨@asyncï¼\n\n@async\nfuture<string> returnsomething(int i) {\n    // this will be executed asynchronously\n}\n\n\n\n# ä¸æ¯æçç¨æ³\n\n@async ä¸è½ä¸çå½å¨æåè°ä¸èµ·ä½¿ç¨ï¼ä¾å¦ @postconstructã\n\nè¦å¼æ­¥åå§å spring beanï¼å¿é¡»ä½¿ç¨åç¬çåå§å spring beanï¼ç¶åå¨ç®æ ä¸è°ç¨ @async å¸¦æ³¨éçæ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class samplebeanimpl implements samplebean {\n\n    @async\n    void dosomething() {\n        // ...\n    }\n\n}\n\npublic class samplebeaninitializer {\n\n    private final samplebean bean;\n\n    public samplebeaninitializer(samplebean bean) {\n        this.bean = bean;\n    }\n\n    @postconstruct\n    public void initialize() {\n        bean.dosomething();\n    }\n\n}\n\n\n\n# æç¡®æå®æ§è¡å¨\n\né»è®¤æåµä¸ï¼å¨æ¹æ³ä¸æå® @async æ¶ï¼ä½¿ç¨çæ§è¡å¨æ¯å¨å¯ç¨å¼æ­¥æ¯ææ¶éç½®çæ§è¡å¨ï¼å³å¦æä½¿ç¨ xml æ asyncconfigurer å®ç°ï¼å¦ææï¼ï¼åä¸º annotation-driven åç´ ãä½æ¯ï¼å¦æéè¦æç¤ºå¨æ§è¡ç»å®æ¹æ³æ¶åºä½¿ç¨é»è®¤å¼ä»¥å¤çæ§è¡å¨ï¼åå¯ä»¥ä½¿ç¨ @async æ³¨è§£ç value å±æ§ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n@async("otherexecutor")\nvoid dosomething(string s) {\n    // this will be executed asynchronously by "otherexecutor"\n}\n\n\nå¨è¿ç§æåµä¸ï¼âotherexecutorâå¯ä»¥æ¯ spring å®¹å¨ä¸­ä»»ä½ executor bean çåç§°ï¼ä¹å¯ä»¥æ¯ä¸ä»»ä½ executor å³èçéå®ç¬¦çåç§°ï¼ä¾å¦ï¼ä½¿ç¨ <qualifier> åç´ æ spring ç @qualifier æ³¨éæå®ï¼ ï¼ã\n\n\n# ç®¡ç @async çå¼å¸¸\n\nå½ @async æ¹æ³çè¿åå¼ç±»åä¸º future åæ¶ï¼å¾å®¹æç®¡çå¨æ¹æ³æ§è¡æé´æåºçå¼å¸¸ï¼å ä¸ºå¨è°ç¨ get ç»ææ¶ä¼æåºæ­¤å¼å¸¸ãä½æ¯ï¼å¯¹äºè¿åå¼ç±»åä¸º void åçæ¹æ³ï¼å¼å¸¸ä¸ä¼è¢«æè·ä¸æ æ³ä¼ è¾ãæ¨å¯ä»¥æä¾ asyncuncaughtexceptionhandler æ¥å¤çæ­¤ç±»å¼å¸¸ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\npublic class myasyncuncaughtexceptionhandler implements asyncuncaughtexceptionhandler {\n\n    @override\n    public void handleuncaughtexception(throwable ex, method method, object... params) {\n        // handle exception\n    }\n}\n\n\né»è®¤æåµä¸ï¼ä»è®°å½å¼å¸¸ãæ¨å¯ä»¥ä½¿ç¨ asyncconfigurer æ <taskï¼annotation-driven /> xml åç´ å®ä¹èªå®ä¹ asyncuncaughtexceptionhandlerã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-async\n\n\n# åèèµæ\n\n * spring boot å®æ¹ææ¡£ä¹ boot-features-external-config\n * spring boot å®æ¹ææ¡£ä¹ scheduling-annotation-support',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹éæ Json",frontmatter:{title:"SpringBoot ä¹éæ Json",date:"2018-12-30T22:24:16.000Z",order:2,categories:["Java","æ¡æ¶","Spring","SpringIO"],tags:["Java","æ¡æ¶","Spring","SpringBoot","JSON"],permalink:"/pages/676725/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/04.SpringIO/02.SpringBoot%E4%B9%8BJson.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/02.SpringBootä¹Json.md",key:"v-2460a6bd",path:"/pages/676725/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:26},{level:3,title:"Spring Boot æ¯æç Json åº",slug:"spring-boot-æ¯æç-json-åº",normalizedTitle:"spring boot æ¯æç json åº",charIndex:33},{level:3,title:"Spring Web ä¸­çåºååãååºåå",slug:"spring-web-ä¸­çåºååãååºåå",normalizedTitle:"spring web ä¸­çåºååãååºåå",charIndex:523},{level:4,title:"@ResponseBody",slug:"responsebody",normalizedTitle:"@responsebody",charIndex:575},{level:4,title:"@RequestBody",slug:"requestbody",normalizedTitle:"@requestbody",charIndex:939},{level:4,title:"@RestController",slug:"restcontroller",normalizedTitle:"@restcontroller",charIndex:1306},{level:2,title:"æå®ç±»ç Json åºååãååºåå",slug:"æå®ç±»ç-json-åºååãååºåå",normalizedTitle:"æå®ç±»ç json åºååãååºåå",charIndex:1675},{level:2,title:"@JsonTest",slug:"jsontest",normalizedTitle:"@jsontest",charIndex:2609},{level:2,title:"Spring Boot ä¸­ç json éç½®",slug:"spring-boot-ä¸­ç-json-éç½®",normalizedTitle:"spring boot ä¸­ç json éç½®",charIndex:4531},{level:3,title:"Jackson éç½®",slug:"jackson-éç½®",normalizedTitle:"jackson éç½®",charIndex:4558},{level:3,title:"GSON éç½®",slug:"gson-éç½®",normalizedTitle:"gson éç½®",charIndex:6030},{level:2,title:"Spring Boot ä¸­ä½¿ç¨ Fastjson",slug:"spring-boot-ä¸­ä½¿ç¨-fastjson",normalizedTitle:"spring boot ä¸­ä½¿ç¨ fastjson",charIndex:7330},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:9154},{level:2,title:"å¼ç³åå¼ç¨",slug:"å¼ç³åå¼ç¨",normalizedTitle:"å¼ç³åå¼ç¨",charIndex:9172}],headersStr:"ç®ä» Spring Boot æ¯æç Json åº Spring Web ä¸­çåºååãååºåå @ResponseBody @RequestBody @RestController æå®ç±»ç Json åºååãååºåå @JsonTest Spring Boot ä¸­ç json éç½® Jackson éç½® GSON éç½® Spring Boot ä¸­ä½¿ç¨ Fastjson ç¤ºä¾æºç  å¼ç³åå¼ç¨",content:'# SpringBoot ä¹éæ Json\n\n\n# ç®ä»\n\n\n# Spring Boot æ¯æç Json åº\n\nSpring Boot æ¯æä¸ç§ Json åºï¼\n\n * Gson\n * Jackson\n * JSON-B\n\nJackson æ¯ Spring Boot å®æ¹æ¨èçé»è®¤åºã\n\nSpring Boot æä¾äº Jackson çèªå¨éç½®ï¼Jackson æ¯ spring-boot-starter-json çä¸é¨åãå½ Jackson å¨ç±»è·¯å¾ä¸æ¶ï¼ä¼èªå¨éç½® ObjectMapper beanã\n\nSpring Boot æä¾äº Gson çèªå¨éç½®ãå½ Gson å¨ classpath ä¸æ¶ï¼ä¼èªå¨éç½® Gson beanãæä¾äºå ä¸ª spring.gson.* éç½®å±æ§æ¥èªå®ä¹éç½®ãä¸ºäºè·å¾æ´å¤æ§å¶ï¼å¯ä»¥ä½¿ç¨ä¸ä¸ªæå¤ä¸ª GsonBuilderCustomizer beanã\n\nSpring Boot æä¾äº JSON-B çèªå¨éç½®ãå½ JSON-B API å¨ classpath ä¸æ¶ï¼å°èªå¨éç½® Jsonb beanãé¦éç JSON-B å®ç°æ¯ Apache Johnzonï¼å®æä¾äºä¾èµå³ç³»ç®¡çã\n\n\n# Spring Web ä¸­çåºååãååºåå\n\nä»¥ä¸æ³¨è§£é½æ¯ spring-web ä¸­æä¾çæ¯æã\n\n# @ResponseBody\n\n@Responsebody æ³¨è§£ç¨äºå° Controller çæ¹æ³è¿åçå¯¹è±¡ï¼éè¿éå½ç HttpMessageConverter è½¬æ¢ä¸ºæå®æ ¼å¼åï¼åå¥å° HTTP Response å¯¹è±¡ç body æ°æ®åºãä¸è¬å¨å¼æ­¥è·åæ°æ®æ¶ä½¿ç¨ãéå¸¸æ¯å¨ä½¿ç¨ @RequestMapping åï¼è¿åå¼éå¸¸è§£æä¸ºè·³è½¬è·¯å¾ï¼å ä¸ @Responsebody åè¿åç»æä¸ä¼è¢«è§£æä¸ºè·³è½¬è·¯å¾ï¼èæ¯ç´æ¥åå¥ HTTP ååºæ­£æä¸­ã\n\nç¤ºä¾ï¼\n\n@ResponseBody\n@RequestMapping(name = "/getInfo", method = RequestMethod.GET)\npublic InfoDTO getInfo() {\n\treturn new InfoDTO();\n}\n\n\n# @RequestBody\n\n@RequestBody æ³¨è§£ç¨äºè¯»å HTTP Request è¯·æ±ç body é¨åæ°æ®ï¼ä½¿ç¨ç³»ç»é»è®¤éç½®ç HttpMessageConverter è¿è¡è§£æï¼ç¶åæç¸åºçæ°æ®ç»å®å°è¦è¿åçå¯¹è±¡ä¸ï¼åæ HttpMessageConverter è¿åçå¯¹è±¡æ°æ®ç»å®å° controller ä¸­æ¹æ³çåæ°ä¸ã\n\nrequest ç body é¨åçæ°æ®ç¼ç æ ¼å¼ç± header é¨åç Content-Type æå®ã\n\nç¤ºä¾ï¼\n\n@RequestMapping(name = "/postInfo", method = RequestMethod.POST)\npublic void postInfo(@RequestBody InfoDTO infoDTO) {\n    // ...\n}\n\n\n# @RestController\n\nSpring 4 ä»¥åï¼\n\nå¦æéè¦è¿åå°æå®é¡µé¢ï¼åéè¦ç¨ @Controller éåè§å¾è§£æå¨ InternalResourceViewResolver ã\n\nå¦æéè¦è¿å JSONï¼XML æèªå®ä¹ mediaType åå®¹å°é¡µé¢ï¼åéè¦å¨å¯¹åºçæ¹æ³ä¸å ä¸ @ResponseBody æ³¨è§£ã\n\nSpring 4 ä»¥åï¼æ°å¢äº @RestController æ³¨è§£ï¼\n\nå®ç¸å½äº @Controller + @RequestBody ã\n\nå¦æä½¿ç¨ @RestController æ³¨è§£ Controllerï¼å Controller ä¸­çæ¹æ³æ æ³è¿å jsp é¡µé¢ï¼æè htmlï¼éç½®çè§å¾è§£æå¨ InternalResourceViewResolver å°ä¸èµ·ä½ç¨ï¼ç´æ¥è¿ååå®¹ã\n\n\n# æå®ç±»ç Json åºååãååºåå\n\nå¦æä½¿ç¨ Jackson åºåååååºåå JSON æ°æ®ï¼æ¨å¯è½éè¦ç¼åèªå·±ç JsonSerializer å JsonDeserializer ç±»ãèªå®ä¹åºååç¨åºéå¸¸éè¿æ¨¡åå Jackson æ³¨åï¼ä½ Spring Boot æä¾äºå¦ä¸ç§ @JsonComponent æ³¨éï¼å¯ä»¥æ´å®¹æå°ç´æ¥æ³¨å Spring Beansã\n\næ¨å¯ä»¥ç´æ¥å¨ JsonSerializer æ JsonDeserializer å®ç°ä¸ä½¿ç¨ @JsonComponent æ³¨éãæ¨è¿å¯ä»¥å¨åå«åºååç¨åº/ååºååç¨åºä½ä¸ºåé¨ç±»çç±»ä¸ä½¿ç¨å®ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nimport java.io.*;\nimport com.fasterxml.jackson.core.*;\nimport com.fasterxml.jackson.databind.*;\nimport org.springframework.boot.jackson.*;\n\n@JsonComponent\npublic class Example {\n\n\tpublic static class Serializer extends JsonSerializer<SomeObject> {\n\t\t// ...\n\t}\n\n\tpublic static class Deserializer extends JsonDeserializer<SomeObject> {\n\t\t// ...\n\t}\n\n}\n\n\nApplicationContext ä¸­çææ @JsonComponent bean é½ä¼èªå¨æ³¨åå° Jacksonãå ä¸º @JsonComponent æ¯ä½¿ç¨ @Component è¿è¡åæ³¨éçï¼æä»¥éå¸¸çç»ä»¶æ«æè§åéç¨ã\n\nSpring Boot è¿æä¾äº JsonObjectSerializer å JsonObjectDeserializer åºç±»ï¼å®ä»¬å¨åºååå¯¹è±¡æ¶æä¾äºæ å Jackson çæ¬çæç¨æ¿ä»£æ¹æ³ãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åé Javadoc ä¸­ç JsonObjectSerializer å JsonObjectDeserializerã\n\n\n# @JsonTest\n\nä½¿ç¨ @JsonTest å¯ä»¥å¾æ¹ä¾¿çå¨ Spring Boot ä¸­æµè¯åºååãååºååã\n\nä½¿ç¨ @JsonTest ç¸å½äºä½¿ç¨ä»¥ä¸èªå¨éç½®ï¼\n\norg.springframework.boot.autoconfigure.cache.CacheAutoConfiguration org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration org.springframework.boot.test.autoconfigure.json.JsonTestersAutoConfiguration\n\n\n@JsonTest ä½¿ç¨ç¤ºä¾ï¼\n\næ³è¯è¯å®æ´ç¤ºä¾ï¼å¯ä»¥åèï¼æºç \n\n@JsonTest\n@RunWith(SpringRunner.class)\npublic class SimpleJsonTest {\n\n    private final Logger log = LoggerFactory.getLogger(this.getClass());\n\n    @Autowired\n    private JacksonTester<InfoDTO> json;\n\n    @Test\n    public void testSerialize() throws Exception {\n        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");\n        InfoDTO infoDTO = new InfoDTO("JSONæµè¯åºç¨", "1.0.0", sdf.parse("2019-01-01 12:00:00"));\n        JsonContent<InfoDTO> jsonContent = json.write(infoDTO);\n        log.info("json content: {}", jsonContent.getJson());\n        // æèä½¿ç¨åºäºJSON pathçæ ¡éª\n        assertThat(jsonContent).hasJsonPathStringValue("@.appName");\n        assertThat(jsonContent).extractingJsonPathStringValue("@.appName").isEqualTo("JSONæµè¯åºç¨");\n        assertThat(jsonContent).hasJsonPathStringValue("@.version");\n        assertThat(jsonContent).extractingJsonPathStringValue("@.version").isEqualTo("1.0.0");\n        assertThat(jsonContent).hasJsonPathStringValue("@.date");\n        assertThat(jsonContent).extractingJsonPathStringValue("@.date").isEqualTo("2019-01-01 12:00:00");\n    }\n\n    @Test\n    public void testDeserialize() throws Exception {\n        String content = "{\\"appName\\":\\"JSONæµè¯åºç¨\\",\\"version\\":\\"1.0.0\\",\\"date\\":\\"2019-01-01\\"}";\n        InfoDTO actual = json.parseObject(content);\n        assertThat(actual.getAppName()).isEqualTo("JSONæµè¯åºç¨");\n        assertThat(actual.getVersion()).isEqualTo("1.0.0");\n    }\n}\n\n\n\n# Spring Boot ä¸­ç json éç½®\n\n\n# Jackson éç½®\n\nå½ Spring Boot ç json åºä¸º jackson æ¶ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸éç½®å±æ§ï¼å¯¹åº JacksonProperties ç±»ï¼ï¼\n\nspring.jackson.date-format= # Date format string or a fully-qualified date format class name. For instance, `yyyy-MM-dd HH:mm:ss`.\nspring.jackson.default-property-inclusion= # Controls the inclusion of properties during serialization. Configured with one of the values in Jackson\'s JsonInclude.Include enumeration.\nspring.jackson.deserialization.*= # Jackson on/off features that affect the way Java objects are deserialized.\nspring.jackson.generator.*= # Jackson on/off features for generators.\nspring.jackson.joda-date-time-format= # Joda date time format string. If not configured, "date-format" is used as a fallback if it is configured with a format string.\nspring.jackson.locale= # Locale used for formatting.\nspring.jackson.mapper.*= # Jackson general purpose on/off features.\nspring.jackson.parser.*= # Jackson on/off features for parsers.\nspring.jackson.property-naming-strategy= # One of the constants on Jackson\'s PropertyNamingStrategy. Can also be a fully-qualified class name of a PropertyNamingStrategy subclass.\nspring.jackson.serialization.*= # Jackson on/off features that affect the way Java objects are serialized.\nspring.jackson.time-zone= #  Time zone used when formatting dates. For instance, "America/Los_Angeles" or "GMT+10".\nspring.jackson.visibility.*= # Jackson visibility thresholds that can be used to limit which methods (and fields) are auto-detected.\n\n\n\n# GSON éç½®\n\nå½ Spring Boot ç json åºä¸º gson æ¶ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸éç½®å±æ§ï¼å¯¹åº GsonProperties ç±»ï¼ï¼\n\nspring.gson.date-format= # Format to use when serializing Date objects.\nspring.gson.disable-html-escaping= # Whether to disable the escaping of HTML characters such as \'<\', \'>\', etc.\nspring.gson.disable-inner-class-serialization= # Whether to exclude inner classes during serialization.\nspring.gson.enable-complex-map-key-serialization= # Whether to enable serialization of complex map keys (i.e. non-primitives).\nspring.gson.exclude-fields-without-expose-annotation= # Whether to exclude all fields from consideration for serialization or deserialization that do not have the "Expose" annotation.\nspring.gson.field-naming-policy= # Naming policy that should be applied to an object\'s field during serialization and deserialization.\nspring.gson.generate-non-executable-json= # Whether to generate non executable JSON by prefixing the output with some special text.\nspring.gson.lenient= # Whether to be lenient about parsing JSON that doesn\'t conform to RFC 4627.\nspring.gson.long-serialization-policy= # Serialization policy for Long and long types.\nspring.gson.pretty-printing= # Whether to output serialized JSON that fits in a page for pretty printing.\nspring.gson.serialize-nulls= # Whether to serialize null fields.\n\n\n\n# Spring Boot ä¸­ä½¿ç¨ Fastjson\n\nå½åå¾å¤ç Java ç¨åºåæ´åæ¬¢ä½¿ç¨é¿éç fastjson ä½ä¸º json libãé£ä¹ï¼å¦ä½å¨ Spring Boot ä¸­å°å¶æ¿æ¢é»è®¤ç jackson åºå¢ï¼\n\nä½ éè¦åå¦ä¸å¤çï¼\n\nï¼1ï¼å¼å¥ fastjson jar åï¼\n\n<dependency>\n\t<groupId>com.alibaba</groupId>\n\t<artifactId>fastjson</artifactId>\n\t<version>1.2.54</version>\n</dependency>\n\n\nï¼2ï¼å®ç° WebMvcConfigurer æ¥å£ï¼èªå®ä¹ configureMessageConverters æ¥å£ãå¦ä¸æç¤ºï¼\n\n@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer {\n\n    private final Logger log = LoggerFactory.getLogger(this.getClass());\n\n    /**\n     * èªå®ä¹æ¶æ¯è½¬æ¢å¨\n     * @param converters\n     */\n    @Override\n    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {\n        // æ¸é¤é»è®¤ Json è½¬æ¢å¨\n        converters.removeIf(converter -> converter instanceof MappingJackson2HttpMessageConverter);\n\n        // éç½® FastJson\n        FastJsonConfig config = new FastJsonConfig();\n        config.setSerializerFeatures(SerializerFeature.QuoteFieldNames, SerializerFeature.WriteEnumUsingToString,\n            SerializerFeature.WriteMapNullValue, SerializerFeature.WriteDateUseDateFormat,\n            SerializerFeature.DisableCircularReferenceDetect);\n\n        // æ·»å  FastJsonHttpMessageConverter\n        FastJsonHttpMessageConverter fastJsonHttpMessageConverter = new FastJsonHttpMessageConverter();\n        fastJsonHttpMessageConverter.setFastJsonConfig(config);\n        List<MediaType> fastMediaTypes = new ArrayList<>();\n        fastMediaTypes.add(MediaType.APPLICATION_JSON_UTF8);\n        fastJsonHttpMessageConverter.setSupportedMediaTypes(fastMediaTypes);\n        converters.add(fastJsonHttpMessageConverter);\n\n        // æ·»å  StringHttpMessageConverterï¼è§£å³ä¸­æä¹±ç é®é¢\n        StringHttpMessageConverter stringHttpMessageConverter = new StringHttpMessageConverter(Charset.forName("UTF-8"));\n        converters.add(stringHttpMessageConverter);\n    }\n\n    // ...\n}\n\n\n\n# ç¤ºä¾æºç \n\nå®æ´ç¤ºä¾ï¼æºç \n\n\n# å¼ç³åå¼ç¨\n\nå¼ç³\n\n * Spring Boot æç¨\n\nå¼ç¨\n\n * Spring Boot å®æ¹ææ¡£ä¹ boot-features-json',normalizedContent:'# springboot ä¹éæ json\n\n\n# ç®ä»\n\n\n# spring boot æ¯æç json åº\n\nspring boot æ¯æä¸ç§ json åºï¼\n\n * gson\n * jackson\n * json-b\n\njackson æ¯ spring boot å®æ¹æ¨èçé»è®¤åºã\n\nspring boot æä¾äº jackson çèªå¨éç½®ï¼jackson æ¯ spring-boot-starter-json çä¸é¨åãå½ jackson å¨ç±»è·¯å¾ä¸æ¶ï¼ä¼èªå¨éç½® objectmapper beanã\n\nspring boot æä¾äº gson çèªå¨éç½®ãå½ gson å¨ classpath ä¸æ¶ï¼ä¼èªå¨éç½® gson beanãæä¾äºå ä¸ª spring.gson.* éç½®å±æ§æ¥èªå®ä¹éç½®ãä¸ºäºè·å¾æ´å¤æ§å¶ï¼å¯ä»¥ä½¿ç¨ä¸ä¸ªæå¤ä¸ª gsonbuildercustomizer beanã\n\nspring boot æä¾äº json-b çèªå¨éç½®ãå½ json-b api å¨ classpath ä¸æ¶ï¼å°èªå¨éç½® jsonb beanãé¦éç json-b å®ç°æ¯ apache johnzonï¼å®æä¾äºä¾èµå³ç³»ç®¡çã\n\n\n# spring web ä¸­çåºååãååºåå\n\nä»¥ä¸æ³¨è§£é½æ¯ spring-web ä¸­æä¾çæ¯æã\n\n# @responsebody\n\n@responsebody æ³¨è§£ç¨äºå° controller çæ¹æ³è¿åçå¯¹è±¡ï¼éè¿éå½ç httpmessageconverter è½¬æ¢ä¸ºæå®æ ¼å¼åï¼åå¥å° http response å¯¹è±¡ç body æ°æ®åºãä¸è¬å¨å¼æ­¥è·åæ°æ®æ¶ä½¿ç¨ãéå¸¸æ¯å¨ä½¿ç¨ @requestmapping åï¼è¿åå¼éå¸¸è§£æä¸ºè·³è½¬è·¯å¾ï¼å ä¸ @responsebody åè¿åç»æä¸ä¼è¢«è§£æä¸ºè·³è½¬è·¯å¾ï¼èæ¯ç´æ¥åå¥ http ååºæ­£æä¸­ã\n\nç¤ºä¾ï¼\n\n@responsebody\n@requestmapping(name = "/getinfo", method = requestmethod.get)\npublic infodto getinfo() {\n\treturn new infodto();\n}\n\n\n# @requestbody\n\n@requestbody æ³¨è§£ç¨äºè¯»å http request è¯·æ±ç body é¨åæ°æ®ï¼ä½¿ç¨ç³»ç»é»è®¤éç½®ç httpmessageconverter è¿è¡è§£æï¼ç¶åæç¸åºçæ°æ®ç»å®å°è¦è¿åçå¯¹è±¡ä¸ï¼åæ httpmessageconverter è¿åçå¯¹è±¡æ°æ®ç»å®å° controller ä¸­æ¹æ³çåæ°ä¸ã\n\nrequest ç body é¨åçæ°æ®ç¼ç æ ¼å¼ç± header é¨åç content-type æå®ã\n\nç¤ºä¾ï¼\n\n@requestmapping(name = "/postinfo", method = requestmethod.post)\npublic void postinfo(@requestbody infodto infodto) {\n    // ...\n}\n\n\n# @restcontroller\n\nspring 4 ä»¥åï¼\n\nå¦æéè¦è¿åå°æå®é¡µé¢ï¼åéè¦ç¨ @controller éåè§å¾è§£æå¨ internalresourceviewresolver ã\n\nå¦æéè¦è¿å jsonï¼xml æèªå®ä¹ mediatype åå®¹å°é¡µé¢ï¼åéè¦å¨å¯¹åºçæ¹æ³ä¸å ä¸ @responsebody æ³¨è§£ã\n\nspring 4 ä»¥åï¼æ°å¢äº @restcontroller æ³¨è§£ï¼\n\nå®ç¸å½äº @controller + @requestbody ã\n\nå¦æä½¿ç¨ @restcontroller æ³¨è§£ controllerï¼å controller ä¸­çæ¹æ³æ æ³è¿å jsp é¡µé¢ï¼æè htmlï¼éç½®çè§å¾è§£æå¨ internalresourceviewresolver å°ä¸èµ·ä½ç¨ï¼ç´æ¥è¿ååå®¹ã\n\n\n# æå®ç±»ç json åºååãååºåå\n\nå¦æä½¿ç¨ jackson åºåååååºåå json æ°æ®ï¼æ¨å¯è½éè¦ç¼åèªå·±ç jsonserializer å jsondeserializer ç±»ãèªå®ä¹åºååç¨åºéå¸¸éè¿æ¨¡åå jackson æ³¨åï¼ä½ spring boot æä¾äºå¦ä¸ç§ @jsoncomponent æ³¨éï¼å¯ä»¥æ´å®¹æå°ç´æ¥æ³¨å spring beansã\n\næ¨å¯ä»¥ç´æ¥å¨ jsonserializer æ jsondeserializer å®ç°ä¸ä½¿ç¨ @jsoncomponent æ³¨éãæ¨è¿å¯ä»¥å¨åå«åºååç¨åº/ååºååç¨åºä½ä¸ºåé¨ç±»çç±»ä¸ä½¿ç¨å®ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nimport java.io.*;\nimport com.fasterxml.jackson.core.*;\nimport com.fasterxml.jackson.databind.*;\nimport org.springframework.boot.jackson.*;\n\n@jsoncomponent\npublic class example {\n\n\tpublic static class serializer extends jsonserializer<someobject> {\n\t\t// ...\n\t}\n\n\tpublic static class deserializer extends jsondeserializer<someobject> {\n\t\t// ...\n\t}\n\n}\n\n\napplicationcontext ä¸­çææ @jsoncomponent bean é½ä¼èªå¨æ³¨åå° jacksonãå ä¸º @jsoncomponent æ¯ä½¿ç¨ @component è¿è¡åæ³¨éçï¼æä»¥éå¸¸çç»ä»¶æ«æè§åéç¨ã\n\nspring boot è¿æä¾äº jsonobjectserializer å jsonobjectdeserializer åºç±»ï¼å®ä»¬å¨åºååå¯¹è±¡æ¶æä¾äºæ å jackson çæ¬çæç¨æ¿ä»£æ¹æ³ãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åé javadoc ä¸­ç jsonobjectserializer å jsonobjectdeserializerã\n\n\n# @jsontest\n\nä½¿ç¨ @jsontest å¯ä»¥å¾æ¹ä¾¿çå¨ spring boot ä¸­æµè¯åºååãååºååã\n\nä½¿ç¨ @jsontest ç¸å½äºä½¿ç¨ä»¥ä¸èªå¨éç½®ï¼\n\norg.springframework.boot.autoconfigure.cache.cacheautoconfiguration org.springframework.boot.autoconfigure.gson.gsonautoconfiguration org.springframework.boot.autoconfigure.jackson.jacksonautoconfiguration org.springframework.boot.autoconfigure.jsonb.jsonbautoconfiguration org.springframework.boot.test.autoconfigure.json.jsontestersautoconfiguration\n\n\n@jsontest ä½¿ç¨ç¤ºä¾ï¼\n\næ³è¯è¯å®æ´ç¤ºä¾ï¼å¯ä»¥åèï¼æºç \n\n@jsontest\n@runwith(springrunner.class)\npublic class simplejsontest {\n\n    private final logger log = loggerfactory.getlogger(this.getclass());\n\n    @autowired\n    private jacksontester<infodto> json;\n\n    @test\n    public void testserialize() throws exception {\n        simpledateformat sdf = new simpledateformat("yyyy-mm-dd hh:mm:ss");\n        infodto infodto = new infodto("jsonæµè¯åºç¨", "1.0.0", sdf.parse("2019-01-01 12:00:00"));\n        jsoncontent<infodto> jsoncontent = json.write(infodto);\n        log.info("json content: {}", jsoncontent.getjson());\n        // æèä½¿ç¨åºäºjson pathçæ ¡éª\n        assertthat(jsoncontent).hasjsonpathstringvalue("@.appname");\n        assertthat(jsoncontent).extractingjsonpathstringvalue("@.appname").isequalto("jsonæµè¯åºç¨");\n        assertthat(jsoncontent).hasjsonpathstringvalue("@.version");\n        assertthat(jsoncontent).extractingjsonpathstringvalue("@.version").isequalto("1.0.0");\n        assertthat(jsoncontent).hasjsonpathstringvalue("@.date");\n        assertthat(jsoncontent).extractingjsonpathstringvalue("@.date").isequalto("2019-01-01 12:00:00");\n    }\n\n    @test\n    public void testdeserialize() throws exception {\n        string content = "{\\"appname\\":\\"jsonæµè¯åºç¨\\",\\"version\\":\\"1.0.0\\",\\"date\\":\\"2019-01-01\\"}";\n        infodto actual = json.parseobject(content);\n        assertthat(actual.getappname()).isequalto("jsonæµè¯åºç¨");\n        assertthat(actual.getversion()).isequalto("1.0.0");\n    }\n}\n\n\n\n# spring boot ä¸­ç json éç½®\n\n\n# jackson éç½®\n\nå½ spring boot ç json åºä¸º jackson æ¶ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸éç½®å±æ§ï¼å¯¹åº jacksonproperties ç±»ï¼ï¼\n\nspring.jackson.date-format= # date format string or a fully-qualified date format class name. for instance, `yyyy-mm-dd hh:mm:ss`.\nspring.jackson.default-property-inclusion= # controls the inclusion of properties during serialization. configured with one of the values in jackson\'s jsoninclude.include enumeration.\nspring.jackson.deserialization.*= # jackson on/off features that affect the way java objects are deserialized.\nspring.jackson.generator.*= # jackson on/off features for generators.\nspring.jackson.joda-date-time-format= # joda date time format string. if not configured, "date-format" is used as a fallback if it is configured with a format string.\nspring.jackson.locale= # locale used for formatting.\nspring.jackson.mapper.*= # jackson general purpose on/off features.\nspring.jackson.parser.*= # jackson on/off features for parsers.\nspring.jackson.property-naming-strategy= # one of the constants on jackson\'s propertynamingstrategy. can also be a fully-qualified class name of a propertynamingstrategy subclass.\nspring.jackson.serialization.*= # jackson on/off features that affect the way java objects are serialized.\nspring.jackson.time-zone= #  time zone used when formatting dates. for instance, "america/los_angeles" or "gmt+10".\nspring.jackson.visibility.*= # jackson visibility thresholds that can be used to limit which methods (and fields) are auto-detected.\n\n\n\n# gson éç½®\n\nå½ spring boot ç json åºä¸º gson æ¶ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸éç½®å±æ§ï¼å¯¹åº gsonproperties ç±»ï¼ï¼\n\nspring.gson.date-format= # format to use when serializing date objects.\nspring.gson.disable-html-escaping= # whether to disable the escaping of html characters such as \'<\', \'>\', etc.\nspring.gson.disable-inner-class-serialization= # whether to exclude inner classes during serialization.\nspring.gson.enable-complex-map-key-serialization= # whether to enable serialization of complex map keys (i.e. non-primitives).\nspring.gson.exclude-fields-without-expose-annotation= # whether to exclude all fields from consideration for serialization or deserialization that do not have the "expose" annotation.\nspring.gson.field-naming-policy= # naming policy that should be applied to an object\'s field during serialization and deserialization.\nspring.gson.generate-non-executable-json= # whether to generate non executable json by prefixing the output with some special text.\nspring.gson.lenient= # whether to be lenient about parsing json that doesn\'t conform to rfc 4627.\nspring.gson.long-serialization-policy= # serialization policy for long and long types.\nspring.gson.pretty-printing= # whether to output serialized json that fits in a page for pretty printing.\nspring.gson.serialize-nulls= # whether to serialize null fields.\n\n\n\n# spring boot ä¸­ä½¿ç¨ fastjson\n\nå½åå¾å¤ç java ç¨åºåæ´åæ¬¢ä½¿ç¨é¿éç fastjson ä½ä¸º json libãé£ä¹ï¼å¦ä½å¨ spring boot ä¸­å°å¶æ¿æ¢é»è®¤ç jackson åºå¢ï¼\n\nä½ éè¦åå¦ä¸å¤çï¼\n\nï¼1ï¼å¼å¥ fastjson jar åï¼\n\n<dependency>\n\t<groupid>com.alibaba</groupid>\n\t<artifactid>fastjson</artifactid>\n\t<version>1.2.54</version>\n</dependency>\n\n\nï¼2ï¼å®ç° webmvcconfigurer æ¥å£ï¼èªå®ä¹ configuremessageconverters æ¥å£ãå¦ä¸æç¤ºï¼\n\n@configuration\npublic class webmvcconfig implements webmvcconfigurer {\n\n    private final logger log = loggerfactory.getlogger(this.getclass());\n\n    /**\n     * èªå®ä¹æ¶æ¯è½¬æ¢å¨\n     * @param converters\n     */\n    @override\n    public void configuremessageconverters(list<httpmessageconverter<?>> converters) {\n        // æ¸é¤é»è®¤ json è½¬æ¢å¨\n        converters.removeif(converter -> converter instanceof mappingjackson2httpmessageconverter);\n\n        // éç½® fastjson\n        fastjsonconfig config = new fastjsonconfig();\n        config.setserializerfeatures(serializerfeature.quotefieldnames, serializerfeature.writeenumusingtostring,\n            serializerfeature.writemapnullvalue, serializerfeature.writedateusedateformat,\n            serializerfeature.disablecircularreferencedetect);\n\n        // æ·»å  fastjsonhttpmessageconverter\n        fastjsonhttpmessageconverter fastjsonhttpmessageconverter = new fastjsonhttpmessageconverter();\n        fastjsonhttpmessageconverter.setfastjsonconfig(config);\n        list<mediatype> fastmediatypes = new arraylist<>();\n        fastmediatypes.add(mediatype.application_json_utf8);\n        fastjsonhttpmessageconverter.setsupportedmediatypes(fastmediatypes);\n        converters.add(fastjsonhttpmessageconverter);\n\n        // æ·»å  stringhttpmessageconverterï¼è§£å³ä¸­æä¹±ç é®é¢\n        stringhttpmessageconverter stringhttpmessageconverter = new stringhttpmessageconverter(charset.forname("utf-8"));\n        converters.add(stringhttpmessageconverter);\n    }\n\n    // ...\n}\n\n\n\n# ç¤ºä¾æºç \n\nå®æ´ç¤ºä¾ï¼æºç \n\n\n# å¼ç³åå¼ç¨\n\nå¼ç³\n\n * spring boot æç¨\n\nå¼ç¨\n\n * spring boot å®æ¹ææ¡£ä¹ boot-features-json',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹åéé®ä»¶",frontmatter:{title:"SpringBoot ä¹åéé®ä»¶",date:"2019-11-20T15:20:44.000Z",order:3,categories:["Java","æ¡æ¶","Spring","SpringIO"],tags:["Java","æ¡æ¶","Spring","SpringBoot","é®ä»¶"],permalink:"/pages/2586f1/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/04.SpringIO/03.SpringBoot%E4%B9%8B%E9%82%AE%E4%BB%B6.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/03.SpringBootä¹é®ä»¶.md",key:"v-72547bfe",path:"/pages/2586f1/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:23},{level:2,title:"API",slug:"api",normalizedTitle:"api",charIndex:304},{level:2,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:414},{level:2,title:"å®æ",slug:"å®æ",normalizedTitle:"å®æ",charIndex:1591},{level:3,title:"å¼å¥ä¾èµ",slug:"å¼å¥ä¾èµ",normalizedTitle:"å¼å¥ä¾èµ",charIndex:1598},{level:3,title:"éç½®é®ä»¶å±æ§",slug:"éç½®é®ä»¶å±æ§",normalizedTitle:"éç½®é®ä»¶å±æ§",charIndex:2200},{level:3,title:"Java ä»£ç ",slug:"java-ä»£ç ",normalizedTitle:"java ä»£ç ",charIndex:2882},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:6562},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:6596}],headersStr:"ç®ä» API éç½® å®æ å¼å¥ä¾èµ éç½®é®ä»¶å±æ§ Java ä»£ç  ç¤ºä¾æºç  åèèµæ",content:'# SpringBoot ä¹åéé®ä»¶\n\n\n# ç®ä»\n\nSpring Boot æ¶åé®ä»¶æç®ä¾¿æ¹å¼æ¯éè¿ spring-boot-starter-mailã\n\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-mail</artifactId>\n</dependency>\n\n\nspring-boot-starter-mail æ¬è´¨ä¸æ¯ä½¿ç¨ JavaMail(javax.mail)ãå¦ææ³å¯¹ JavaMail æè¿ä¸æ­¥äºè§£ï¼å¯ä»¥åèï¼ JavaMail ä½¿ç¨æå\n\n\n# API\n\nSpring Framework æä¾äºä¸ä¸ªä½¿ç¨ JavaMailSender æ¥å£åéçµå­é®ä»¶çç®åæ½è±¡ï¼è¿æ¯åéé®ä»¶çæ ¸å¿ APIã\n\nJavaMailSender æ¥å£æä¾ç API å¦ä¸ï¼\n\n\n\n\n# éç½®\n\nSpring Boot ä¸º JavaMailSender æä¾äºèªå¨éç½®ä»¥åå¯å¨å¨æ¨¡åã\n\nå¦æ spring.mail.host åç¸å³åºï¼ç± spring-boot-starter-mail å®ä¹ï¼å¯ç¨ï¼å Spring Boot ä¼åå»ºé»è®¤ JavaMailSenderï¼å¦æä¸å­å¨ï¼ãå¯ä»¥éè¿ spring.mail å½åç©ºé´ä¸­çéç½®é¡¹è¿ä¸æ­¥èªå®ä¹åä»¶äººã ç¹å«æ¯ï¼æäºé»è®¤è¶æ¶å¼æ¯æ éçï¼æ¨å¯è½å¸ææ´æ¹å®ä»¥é¿åçº¿ç¨è¢«æ ååºçé®ä»¶æå¡å¨é»å¡ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nspring.mail.properties.mail.smtp.connectiontimeout=5000\nspring.mail.properties.mail.smtp.timeout=3000\nspring.mail.properties.mail.smtp.writetimeout=5000\n\n\nä¹å¯ä»¥ä½¿ç¨ JNDI ä¸­çç°æä¼è¯éç½® JavaMailSenderï¼\n\nspring.mail.jndi-name=mail/Session\n\n\nä»¥ä¸ä¸º Spring Boot å³äº Mail çéç½®ï¼\n\næå³æ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åé MailPropertiesã\n\n# Email (MailProperties)\nspring.mail.default-encoding=UTF-8 # Default MimeMessage encoding.\nspring.mail.host= # SMTP server host. For instance, `smtp.example.com`.\nspring.mail.jndi-name= # Session JNDI name. When set, takes precedence over other Session settings.\nspring.mail.password= # Login password of the SMTP server.\nspring.mail.port= # SMTP server port.\nspring.mail.properties.*= # Additional JavaMail Session properties.\nspring.mail.protocol=smtp # Protocol used by the SMTP server.\nspring.mail.test-connection=false # Whether to test that the mail server is available on startup.\nspring.mail.username= # Login user of the SMTP server.\n\n\n\n# å®æ\n\n\n# å¼å¥ä¾èµ\n\n<dependencies>\n  <dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-mail</artifactId>\n  </dependency>\n  <dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-test</artifactId>\n    <scope>test</scope>\n  </dependency>\n\n  <dependency>\n    <groupId>org.projectlombok</groupId>\n    <artifactId>lombok</artifactId>\n  </dependency>\n  <dependency>\n    <groupId>com.github.dozermapper</groupId>\n    <artifactId>dozer-spring-boot-starter</artifactId>\n    <version>6.4.0</version>\n  </dependency>\n</dependencies>\n\n\n\n# éç½®é®ä»¶å±æ§\n\nå¨ src/main/resources ç®å½ä¸æ·»å  application-163.properties éç½®æä»¶ï¼åå®¹å¦ä¸ï¼\n\nspring.mail.host = smtp.163.com\nspring.mail.username = xxxxxx\nspring.mail.password = xxxxxx\nspring.mail.properties.mail.smtp.auth = true\nspring.mail.properties.mail.smtp.starttls.enable = true\nspring.mail.properties.mail.smtp.starttls.required = true\nspring.mail.default-encoding = UTF-8\n\nmail.domain = 163.com\nmail.from = ${spring.mail.username}@${mail.domain}\n\n\næ³¨ï¼éæ¿æ¢ææç spring.mail.usernameãspring.mail.passwordã\n\napplication-163.properties éç½®æä»¶è¡¨ç¤ºä½¿ç¨ 163 é®ç®±æ¶çéç½®ï¼ä¸ºäºä½¿ä¹çæï¼éè¦éè¿ spring.profiles.active = 163 æ¥æ¿æ´»å®ã\n\nå¨ src/main/resources ç®å½ä¸æ·»å  application.properties éç½®æä»¶ï¼åå®¹å¦ä¸ï¼\n\nspring.profiles.active = 163\n\n\n\n# Java ä»£ç \n\né¦åï¼éè¦è¯»åé¨åéç½®å±æ§ï¼æ¹æ³å¦ä¸ï¼\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.stereotype.Component;\nimport org.springframework.validation.annotation.Validated;\n\n@Validated\n@Component\n@ConfigurationProperties(prefix = "mail")\npublic class MailProperties {\n    private String domain;\n    private String from;\n\n    public String getDomain() {\n        return domain;\n    }\n\n    public void setDomain(String domain) {\n        this.domain = domain;\n    }\n\n    public String getFrom() {\n        return from;\n    }\n\n    public void setFrom(String from) {\n        this.from = from;\n    }\n}\n\n\næ¥çï¼å®ä¹ä¸ä¸ªé®ä»¶åæ°å®ä½ç±»ï¼ä½¿ç¨ lombok ç®åäº getterãsetterï¼ï¼\n\nimport lombok.Data;\nimport java.util.Date;\n\n@Data\npublic class MailDTO {\n    private String from;\n    private String replyTo;\n    private String[] to;\n    private String[] cc;\n    private String[] bcc;\n    private Date sentDate;\n    private String subject;\n    private String text;\n    private String[] filenames;\n}\n\n\næ¥çï¼å®ç°åéé®ä»¶çåè½æ¥å£ï¼\n\nimport com.github.dozermapper.core.Mapper;\nimport org.apache.commons.lang3.StringUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.mail.SimpleMailMessage;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.mail.javamail.MimeMessageHelper;\nimport org.springframework.stereotype.Service;\n\nimport javax.mail.MessagingException;\nimport javax.mail.internet.MimeBodyPart;\nimport javax.mail.internet.MimeMessage;\nimport javax.mail.internet.MimeMultipart;\nimport java.io.IOException;\n\n@Service\npublic class MailService {\n\n    private final Logger log = LoggerFactory.getLogger(this.getClass());\n\n    @Autowired\n    private MailProperties mailProperties;\n\n    @Autowired\n    private JavaMailSender javaMailSender;\n\n    @Autowired\n    private Mapper mapper;\n\n    public void sendSimpleMailMessage(MailDTO mailDTO) {\n        SimpleMailMessage simpleMailMessage = mapper.map(mailDTO, SimpleMailMessage.class);\n        if (StringUtils.isEmpty(mailDTO.getFrom())) {\n            mailDTO.setFrom(mailProperties.getFrom());\n        }\n        javaMailSender.send(simpleMailMessage);\n    }\n\n    public void sendMimeMessage(MailDTO mailDTO) {\n\n        MimeMessage mimeMessage = javaMailSender.createMimeMessage();\n        MimeMessageHelper messageHelper;\n        try {\n            messageHelper = new MimeMessageHelper(mimeMessage, true);\n\n            if (StringUtils.isEmpty(mailDTO.getFrom())) {\n                messageHelper.setFrom(mailProperties.getFrom());\n            }\n            messageHelper.setTo(mailDTO.getTo());\n            messageHelper.setSubject(mailDTO.getSubject());\n\n            mimeMessage = messageHelper.getMimeMessage();\n            MimeBodyPart mimeBodyPart = new MimeBodyPart();\n            mimeBodyPart.setContent(mailDTO.getText(), "text/html;charset=UTF-8");\n\n            // æè¿°æ°æ®å³ç³»\n            MimeMultipart mm = new MimeMultipart();\n            mm.setSubType("related");\n            mm.addBodyPart(mimeBodyPart);\n\n            // æ·»å é®ä»¶éä»¶\n            for (String filename : mailDTO.getFilenames()) {\n                MimeBodyPart attachPart = new MimeBodyPart();\n                try {\n                    attachPart.attachFile(filename);\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                mm.addBodyPart(attachPart);\n            }\n            mimeMessage.setContent(mm);\n            mimeMessage.saveChanges();\n\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        }\n\n        javaMailSender.send(mimeMessage);\n    }\n}\n\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-mail\n\n\n# åèèµæ\n\n * Spring Boot å®æ¹ææ¡£ä¹ Sending Email',normalizedContent:'# springboot ä¹åéé®ä»¶\n\n\n# ç®ä»\n\nspring boot æ¶åé®ä»¶æç®ä¾¿æ¹å¼æ¯éè¿ spring-boot-starter-mailã\n\n<dependency>\n  <groupid>org.springframework.boot</groupid>\n  <artifactid>spring-boot-starter-mail</artifactid>\n</dependency>\n\n\nspring-boot-starter-mail æ¬è´¨ä¸æ¯ä½¿ç¨ javamail(javax.mail)ãå¦ææ³å¯¹ javamail æè¿ä¸æ­¥äºè§£ï¼å¯ä»¥åèï¼ javamail ä½¿ç¨æå\n\n\n# api\n\nspring framework æä¾äºä¸ä¸ªä½¿ç¨ javamailsender æ¥å£åéçµå­é®ä»¶çç®åæ½è±¡ï¼è¿æ¯åéé®ä»¶çæ ¸å¿ apiã\n\njavamailsender æ¥å£æä¾ç api å¦ä¸ï¼\n\n\n\n\n# éç½®\n\nspring boot ä¸º javamailsender æä¾äºèªå¨éç½®ä»¥åå¯å¨å¨æ¨¡åã\n\nå¦æ spring.mail.host åç¸å³åºï¼ç± spring-boot-starter-mail å®ä¹ï¼å¯ç¨ï¼å spring boot ä¼åå»ºé»è®¤ javamailsenderï¼å¦æä¸å­å¨ï¼ãå¯ä»¥éè¿ spring.mail å½åç©ºé´ä¸­çéç½®é¡¹è¿ä¸æ­¥èªå®ä¹åä»¶äººã ç¹å«æ¯ï¼æäºé»è®¤è¶æ¶å¼æ¯æ éçï¼æ¨å¯è½å¸ææ´æ¹å®ä»¥é¿åçº¿ç¨è¢«æ ååºçé®ä»¶æå¡å¨é»å¡ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nspring.mail.properties.mail.smtp.connectiontimeout=5000\nspring.mail.properties.mail.smtp.timeout=3000\nspring.mail.properties.mail.smtp.writetimeout=5000\n\n\nä¹å¯ä»¥ä½¿ç¨ jndi ä¸­çç°æä¼è¯éç½® javamailsenderï¼\n\nspring.mail.jndi-name=mail/session\n\n\nä»¥ä¸ä¸º spring boot å³äº mail çéç½®ï¼\n\næå³æ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åé mailpropertiesã\n\n# email (mailproperties)\nspring.mail.default-encoding=utf-8 # default mimemessage encoding.\nspring.mail.host= # smtp server host. for instance, `smtp.example.com`.\nspring.mail.jndi-name= # session jndi name. when set, takes precedence over other session settings.\nspring.mail.password= # login password of the smtp server.\nspring.mail.port= # smtp server port.\nspring.mail.properties.*= # additional javamail session properties.\nspring.mail.protocol=smtp # protocol used by the smtp server.\nspring.mail.test-connection=false # whether to test that the mail server is available on startup.\nspring.mail.username= # login user of the smtp server.\n\n\n\n# å®æ\n\n\n# å¼å¥ä¾èµ\n\n<dependencies>\n  <dependency>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-mail</artifactid>\n  </dependency>\n  <dependency>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-test</artifactid>\n    <scope>test</scope>\n  </dependency>\n\n  <dependency>\n    <groupid>org.projectlombok</groupid>\n    <artifactid>lombok</artifactid>\n  </dependency>\n  <dependency>\n    <groupid>com.github.dozermapper</groupid>\n    <artifactid>dozer-spring-boot-starter</artifactid>\n    <version>6.4.0</version>\n  </dependency>\n</dependencies>\n\n\n\n# éç½®é®ä»¶å±æ§\n\nå¨ src/main/resources ç®å½ä¸æ·»å  application-163.properties éç½®æä»¶ï¼åå®¹å¦ä¸ï¼\n\nspring.mail.host = smtp.163.com\nspring.mail.username = xxxxxx\nspring.mail.password = xxxxxx\nspring.mail.properties.mail.smtp.auth = true\nspring.mail.properties.mail.smtp.starttls.enable = true\nspring.mail.properties.mail.smtp.starttls.required = true\nspring.mail.default-encoding = utf-8\n\nmail.domain = 163.com\nmail.from = ${spring.mail.username}@${mail.domain}\n\n\næ³¨ï¼éæ¿æ¢ææç spring.mail.usernameãspring.mail.passwordã\n\napplication-163.properties éç½®æä»¶è¡¨ç¤ºä½¿ç¨ 163 é®ç®±æ¶çéç½®ï¼ä¸ºäºä½¿ä¹çæï¼éè¦éè¿ spring.profiles.active = 163 æ¥æ¿æ´»å®ã\n\nå¨ src/main/resources ç®å½ä¸æ·»å  application.properties éç½®æä»¶ï¼åå®¹å¦ä¸ï¼\n\nspring.profiles.active = 163\n\n\n\n# java ä»£ç \n\né¦åï¼éè¦è¯»åé¨åéç½®å±æ§ï¼æ¹æ³å¦ä¸ï¼\n\nimport org.springframework.boot.context.properties.configurationproperties;\nimport org.springframework.stereotype.component;\nimport org.springframework.validation.annotation.validated;\n\n@validated\n@component\n@configurationproperties(prefix = "mail")\npublic class mailproperties {\n    private string domain;\n    private string from;\n\n    public string getdomain() {\n        return domain;\n    }\n\n    public void setdomain(string domain) {\n        this.domain = domain;\n    }\n\n    public string getfrom() {\n        return from;\n    }\n\n    public void setfrom(string from) {\n        this.from = from;\n    }\n}\n\n\næ¥çï¼å®ä¹ä¸ä¸ªé®ä»¶åæ°å®ä½ç±»ï¼ä½¿ç¨ lombok ç®åäº getterãsetterï¼ï¼\n\nimport lombok.data;\nimport java.util.date;\n\n@data\npublic class maildto {\n    private string from;\n    private string replyto;\n    private string[] to;\n    private string[] cc;\n    private string[] bcc;\n    private date sentdate;\n    private string subject;\n    private string text;\n    private string[] filenames;\n}\n\n\næ¥çï¼å®ç°åéé®ä»¶çåè½æ¥å£ï¼\n\nimport com.github.dozermapper.core.mapper;\nimport org.apache.commons.lang3.stringutils;\nimport org.slf4j.logger;\nimport org.slf4j.loggerfactory;\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.mail.simplemailmessage;\nimport org.springframework.mail.javamail.javamailsender;\nimport org.springframework.mail.javamail.mimemessagehelper;\nimport org.springframework.stereotype.service;\n\nimport javax.mail.messagingexception;\nimport javax.mail.internet.mimebodypart;\nimport javax.mail.internet.mimemessage;\nimport javax.mail.internet.mimemultipart;\nimport java.io.ioexception;\n\n@service\npublic class mailservice {\n\n    private final logger log = loggerfactory.getlogger(this.getclass());\n\n    @autowired\n    private mailproperties mailproperties;\n\n    @autowired\n    private javamailsender javamailsender;\n\n    @autowired\n    private mapper mapper;\n\n    public void sendsimplemailmessage(maildto maildto) {\n        simplemailmessage simplemailmessage = mapper.map(maildto, simplemailmessage.class);\n        if (stringutils.isempty(maildto.getfrom())) {\n            maildto.setfrom(mailproperties.getfrom());\n        }\n        javamailsender.send(simplemailmessage);\n    }\n\n    public void sendmimemessage(maildto maildto) {\n\n        mimemessage mimemessage = javamailsender.createmimemessage();\n        mimemessagehelper messagehelper;\n        try {\n            messagehelper = new mimemessagehelper(mimemessage, true);\n\n            if (stringutils.isempty(maildto.getfrom())) {\n                messagehelper.setfrom(mailproperties.getfrom());\n            }\n            messagehelper.setto(maildto.getto());\n            messagehelper.setsubject(maildto.getsubject());\n\n            mimemessage = messagehelper.getmimemessage();\n            mimebodypart mimebodypart = new mimebodypart();\n            mimebodypart.setcontent(maildto.gettext(), "text/html;charset=utf-8");\n\n            // æè¿°æ°æ®å³ç³»\n            mimemultipart mm = new mimemultipart();\n            mm.setsubtype("related");\n            mm.addbodypart(mimebodypart);\n\n            // æ·»å é®ä»¶éä»¶\n            for (string filename : maildto.getfilenames()) {\n                mimebodypart attachpart = new mimebodypart();\n                try {\n                    attachpart.attachfile(filename);\n                } catch (ioexception e) {\n                    e.printstacktrace();\n                }\n                mm.addbodypart(attachpart);\n            }\n            mimemessage.setcontent(mm);\n            mimemessage.savechanges();\n\n        } catch (messagingexception e) {\n            e.printstacktrace();\n        }\n\n        javamailsender.send(mimemessage);\n    }\n}\n\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-mail\n\n\n# åèèµæ\n\n * spring boot å®æ¹ææ¡£ä¹ sending email',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Springéæç¼å­",frontmatter:{title:"Springéæç¼å­",date:"2017-11-08T16:53:27.000Z",order:1,categories:["Java","æ¡æ¶","Spring","Springéæ"],tags:["Java","æ¡æ¶","Spring","éæ","ç¼å­"],permalink:"/pages/a311cb/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/05.Spring%E9%9B%86%E6%88%90/01.Spring%E9%9B%86%E6%88%90%E7%BC%93%E5%AD%98.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/01.Springéæç¼å­.md",key:"v-3a1ac617",path:"/pages/a311cb/",headers:[{level:2,title:"ç¼å­æ¥å£",slug:"ç¼å­æ¥å£",normalizedTitle:"ç¼å­æ¥å£",charIndex:64},{level:3,title:"å¼å¯æ³¨è§£",slug:"å¼å¯æ³¨è§£",normalizedTitle:"å¼å¯æ³¨è§£",charIndex:108},{level:3,title:"ç¼å­æ³¨è§£ä½¿ç¨",slug:"ç¼å­æ³¨è§£ä½¿ç¨",normalizedTitle:"ç¼å­æ³¨è§£ä½¿ç¨",charIndex:398},{level:4,title:"@Cacheable",slug:"cacheable",normalizedTitle:"@cacheable",charIndex:515},{level:4,title:"@CachePut",slug:"cacheput",normalizedTitle:"@cacheput",charIndex:682},{level:4,title:"@CacheEvict",slug:"cacheevict",normalizedTitle:"@cacheevict",charIndex:767},{level:4,title:"@Caching",slug:"caching",normalizedTitle:"@caching",charIndex:1641},{level:4,title:"@CacheConfig",slug:"cacheconfig",normalizedTitle:"@cacheconfig",charIndex:1871},{level:2,title:"ç¼å­å­å¨",slug:"ç¼å­å­å¨",normalizedTitle:"ç¼å­å­å¨",charIndex:2094},{level:3,title:"ä½¿ç¨ ConcurrentHashMap ä½ä¸ºç¼å­",slug:"ä½¿ç¨-concurrenthashmap-ä½ä¸ºç¼å­",normalizedTitle:"ä½¿ç¨ concurrenthashmap ä½ä¸ºç¼å­",charIndex:2197},{level:3,title:"ä½¿ç¨ Ehcache ä½ä¸ºç¼å­",slug:"ä½¿ç¨-ehcache-ä½ä¸ºç¼å­",normalizedTitle:"ä½¿ç¨ ehcache ä½ä¸ºç¼å­",charIndex:3676},{level:3,title:"ä½¿ç¨ Caffeine ä½ä¸ºç¼å­",slug:"ä½¿ç¨-caffeine-ä½ä¸ºç¼å­",normalizedTitle:"ä½¿ç¨ caffeine ä½ä¸ºç¼å­",charIndex:5072},{level:2,title:"ç¤ºä¾ä»£ç ",slug:"ç¤ºä¾ä»£ç ",normalizedTitle:"ç¤ºä¾ä»£ç ",charIndex:6197},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:6250}],headersStr:"ç¼å­æ¥å£ å¼å¯æ³¨è§£ ç¼å­æ³¨è§£ä½¿ç¨ @Cacheable @CachePut @CacheEvict @Caching @CacheConfig ç¼å­å­å¨ ä½¿ç¨ ConcurrentHashMap ä½ä¸ºç¼å­ ä½¿ç¨ Ehcache ä½ä¸ºç¼å­ ä½¿ç¨ Caffeine ä½ä¸ºç¼å­ ç¤ºä¾ä»£ç  åèèµæ",content:'# Spring éæç¼å­ä¸­é´ä»¶\n\n> Spring ä¸­æä¾äºç¼å­åè½çæ½è±¡ï¼åè®¸ä½ å¨åºå±çµæ´»çæ¿æ¢ç¼å­å®ç°ï¼èå¯¹ä¸å±æ´é²ç¸åçç¼å­æ¥å£ã\n\n\n# ç¼å­æ¥å£\n\nSpring çç¼å­ API ä»¥æ³¨è§£æ¹å¼æä¾ã\n\n\n# å¼å¯æ³¨è§£\n\nSpring ä¸ºç¼å­åè½æä¾äºæ³¨è§£åè½ï¼ä½æ¯ä½ å¿é¡»å¯å¨æ³¨è§£ã ä½ æä¸¤ä¸ªéæ©ï¼ (1) å¨ xml ä¸­å£°æ åä¸ä¸è spring-ehcache.xml ä¸­çåæ³ä¸æ ·ï¼ä½¿ç¨<cache:annotation-driven/>\n\n<cache:annotation-driven cache-manager="cacheManager"/>\n\n\n(2) ä½¿ç¨æ è®°æ³¨è§£ ä½ ä¹å¯ä»¥éè¿å¯¹ä¸ä¸ªç±»è¿è¡æ³¨è§£ä¿®é¥°çæ¹å¼å¨è¿ä¸ªç±»ä¸­ä½¿ç¨ç¼å­æ³¨è§£ã èä¾å¦ä¸ï¼\n\n@Configuration\n@EnableCaching\npublic class AppConfig {\n}\n\n\n\n# ç¼å­æ³¨è§£ä½¿ç¨\n\nSpring å¯¹ç¼å­çæ¯æç±»ä¼¼äºå¯¹äºå¡çæ¯æã é¦åä½¿ç¨æ³¨è§£æ è®°æ¹æ³ï¼ç¸å½äºå®ä¹äºåç¹ï¼ç¶åä½¿ç¨ Aop ææ¯å¨è¿ä¸ªæ¹æ³çè°ç¨åãè°ç¨åè·åæ¹æ³çå¥ååè¿åå¼ï¼è¿èå®ç°äºç¼å­çé»è¾ã ä¸é¢ä¸ä¸ªæ³¨è§£é½æ¯æ¹æ³çº§å«ï¼\n\n# @Cacheable\n\nè¡¨ææä¿®é¥°çæ¹æ³æ¯å¯ä»¥ç¼å­çï¼å½ç¬¬ä¸æ¬¡è°ç¨è¿ä¸ªæ¹æ³æ¶ï¼å®çç»æä¼è¢«ç¼å­ä¸æ¥ï¼å¨ç¼å­çæææ¶é´åï¼ä»¥åè®¿é®è¿ä¸ªæ¹æ³é½ç´æ¥è¿åç¼å­ç»æï¼ä¸åæ§è¡æ¹æ³ä¸­çä»£ç æ®µã è¿ä¸ªæ³¨è§£å¯ä»¥ç¨conditionå±æ§æ¥è®¾ç½®æ¡ä»¶ï¼å¦æä¸æ»¡è¶³æ¡ä»¶ï¼å°±ä¸ä½¿ç¨ç¼å­è½åï¼ç´æ¥æ§è¡æ¹æ³ã å¯ä»¥ä½¿ç¨keyå±æ§æ¥æå® key ççæè§åã\n\n# @CachePut\n\nä¸@Cacheableä¸åï¼@CachePutä¸ä»ä¼ç¼å­æ¹æ³çç»æï¼è¿ä¼æ§è¡æ¹æ³çä»£ç æ®µã å®æ¯æçå±æ§åç¨æ³é½ä¸@Cacheableä¸è´ã\n\n# @CacheEvict\n\nä¸@Cacheableåè½ç¸åï¼@CacheEvictè¡¨ææä¿®é¥°çæ¹æ³æ¯ç¨æ¥å é¤å¤±æææ ç¨çç¼å­æ°æ®ã ä¸é¢æ¯@Cacheableã@CacheEvictå@CachePutåºæ¬ä½¿ç¨æ¹æ³çä¸ä¸ªéä¸­å±ç¤ºï¼\n\n@Service\npublic class UserService {\n    // @Cacheableå¯ä»¥è®¾ç½®å¤ä¸ªç¼å­ï¼å½¢å¼å¦ï¼@Cacheable({"books", "isbns"})\n    @Cacheable(value={"users"}, key="#user.id")\n    public User findUser(User user) {\n        return findUserInDB(user.getId());\n    }\n\n    @Cacheable(value = "users", condition = "#user.getId() <= 2")\n    public User findUserInLimit(User user) {\n        return findUserInDB(user.getId());\n    }\n\n    @CachePut(value = "users", key = "#user.getId()")\n    public void updateUser(User user) {\n        updateUserInDB(user);\n    }\n\n    @CacheEvict(value = "users")\n    public void removeUser(User user) {\n        removeUserInDB(user.getId());\n    }\n\n    @CacheEvict(value = "users", allEntries = true)\n    public void clear() {\n        removeAllInDB();\n    }\n}\n\n\n# @Caching\n\nå¦æéè¦ä½¿ç¨åä¸ä¸ªç¼å­æ³¨è§£ï¼@Cacheableã@CacheEvictæ@CachePutï¼å¤æ¬¡ä¿®é¥°ä¸ä¸ªæ¹æ³ï¼å°±éè¦ç¨å°@Cachingã\n\n@Caching(evict = { @CacheEvict("primary"), @CacheEvict(cacheNames="secondary", key="#p0") })\npublic Book importBooks(String deposit, Date date)\n\n\n# @CacheConfig\n\nä¸åé¢çç¼å­æ³¨è§£ä¸åï¼è¿æ¯ä¸ä¸ªç±»çº§å«çæ³¨è§£ã å¦æç±»çæææä½é½æ¯ç¼å­æä½ï¼ä½ å¯ä»¥ä½¿ç¨@CacheConfigæ¥æå®ç±»ï¼çå»ä¸äºéç½®ã\n\n@CacheConfig("books")\npublic class BookRepositoryImpl implements BookRepository {\n\t@Cacheable\n\tpublic Book findBook(ISBN isbn) {...}\n}\n\n\n\n# ç¼å­å­å¨\n\nSpring åè®¸éè¿éç½®æ¹å¼æ¥å¥å¤ç§ä¸åçç¼å­å­å¨ãç¨æ·å¯ä»¥æ ¹æ®å®ééè¦éæ©ã\n\nä¸åçç¼å­å­å¨ï¼å·æä¸åçæ§è½åç¹æ§ï¼å¦ææ³äºè§£å·ä½åçï¼å¯ä»¥åèï¼å¨é¢çè§£ç¼å­åçãè¿éä¸åèµè¿°ã\n\n\n# ä½¿ç¨ ConcurrentHashMap ä½ä¸ºç¼å­\n\nåèéç½®ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:cache="http://www.springframework.org/schema/cache" xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n         http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\n         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">\n\n  <description>ä½¿ç¨ ConcurrentHashMap ä½ä¸º Spring ç¼å­</description>\n\n  \x3c!--éç½®åèï¼https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#cache-store-configuration--\x3e\n\n  <context:component-scan base-package="io.github.dunwu.spring.cache"/>\n\n  <bean id="simpleCacheManager" class="org.springframework.cache.support.SimpleCacheManager">\n    <property name="caches">\n      <set>\n        <bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" p:name="default"/>\n        <bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" p:name="users"/>\n      </set>\n    </property>\n  </bean>\n\n  <cache:annotation-driven cache-manager="simpleCacheManager"/>\n</beans>\n\n\n\n# ä½¿ç¨ Ehcache ä½ä¸ºç¼å­\n\nåèéç½®ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:cache="http://www.springframework.org/schema/cache"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n         http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\n         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">\n\n  <description>ä½¿ç¨ EhCache ä½ä¸º Spring ç¼å­</description>\n\n  \x3c!--éç½®åèï¼https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#cache-store-configuration--\x3e\n\n  <context:component-scan base-package="io.github.dunwu.spring.cache"/>\n\n  <bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">\n    <property name="configLocation" value="classpath:ehcache/ehcache.xml"/>\n  </bean>\n\n  <bean id="ehcacheCacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager">\n    <property name="cacheManager" ref="ehcache"/>\n  </bean>\n\n  <cache:annotation-driven cache-manager="ehcacheCacheManager"/>\n</beans>\n\n\nehcache.xml ä¸­çéç½®åå®¹å®å¨ç¬¦å Ehcache çå®æ¹éç½®æ åã\n\n\n# ä½¿ç¨ Caffeine ä½ä¸ºç¼å­\n\nåèéç½®ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:cache="http://www.springframework.org/schema/cache"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n         http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\n         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">\n\n  <description>ä½¿ç¨ Caffeine ä½ä¸º Spring ç¼å­</description>\n\n  \x3c!--éç½®åèï¼https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#cache-store-configuration--\x3e\n\n  <context:component-scan base-package="io.github.dunwu.spring.cache"/>\n\n  <bean id="caffeineCacheManager" class="org.springframework.cache.caffeine.CaffeineCacheManager"/>\n\n  <cache:annotation-driven cache-manager="caffeineCacheManager"/>\n</beans>\n\n\n\n# ç¤ºä¾ä»£ç \n\næçç¤ºä¾ä»£ç å°åï¼spring-tutorial-integration-cache\n\n\n# åèèµæ\n\n * Spring å®æ¹ææ¡£ä¹ç¼å­æ½è±¡\n * æ³¨éé©±å¨ç Spring cache ç¼å­ä»ç»',normalizedContent:'# spring éæç¼å­ä¸­é´ä»¶\n\n> spring ä¸­æä¾äºç¼å­åè½çæ½è±¡ï¼åè®¸ä½ å¨åºå±çµæ´»çæ¿æ¢ç¼å­å®ç°ï¼èå¯¹ä¸å±æ´é²ç¸åçç¼å­æ¥å£ã\n\n\n# ç¼å­æ¥å£\n\nspring çç¼å­ api ä»¥æ³¨è§£æ¹å¼æä¾ã\n\n\n# å¼å¯æ³¨è§£\n\nspring ä¸ºç¼å­åè½æä¾äºæ³¨è§£åè½ï¼ä½æ¯ä½ å¿é¡»å¯å¨æ³¨è§£ã ä½ æä¸¤ä¸ªéæ©ï¼ (1) å¨ xml ä¸­å£°æ åä¸ä¸è spring-ehcache.xml ä¸­çåæ³ä¸æ ·ï¼ä½¿ç¨<cache:annotation-driven/>\n\n<cache:annotation-driven cache-manager="cachemanager"/>\n\n\n(2) ä½¿ç¨æ è®°æ³¨è§£ ä½ ä¹å¯ä»¥éè¿å¯¹ä¸ä¸ªç±»è¿è¡æ³¨è§£ä¿®é¥°çæ¹å¼å¨è¿ä¸ªç±»ä¸­ä½¿ç¨ç¼å­æ³¨è§£ã èä¾å¦ä¸ï¼\n\n@configuration\n@enablecaching\npublic class appconfig {\n}\n\n\n\n# ç¼å­æ³¨è§£ä½¿ç¨\n\nspring å¯¹ç¼å­çæ¯æç±»ä¼¼äºå¯¹äºå¡çæ¯æã é¦åä½¿ç¨æ³¨è§£æ è®°æ¹æ³ï¼ç¸å½äºå®ä¹äºåç¹ï¼ç¶åä½¿ç¨ aop ææ¯å¨è¿ä¸ªæ¹æ³çè°ç¨åãè°ç¨åè·åæ¹æ³çå¥ååè¿åå¼ï¼è¿èå®ç°äºç¼å­çé»è¾ã ä¸é¢ä¸ä¸ªæ³¨è§£é½æ¯æ¹æ³çº§å«ï¼\n\n# @cacheable\n\nè¡¨ææä¿®é¥°çæ¹æ³æ¯å¯ä»¥ç¼å­çï¼å½ç¬¬ä¸æ¬¡è°ç¨è¿ä¸ªæ¹æ³æ¶ï¼å®çç»æä¼è¢«ç¼å­ä¸æ¥ï¼å¨ç¼å­çæææ¶é´åï¼ä»¥åè®¿é®è¿ä¸ªæ¹æ³é½ç´æ¥è¿åç¼å­ç»æï¼ä¸åæ§è¡æ¹æ³ä¸­çä»£ç æ®µã è¿ä¸ªæ³¨è§£å¯ä»¥ç¨conditionå±æ§æ¥è®¾ç½®æ¡ä»¶ï¼å¦æä¸æ»¡è¶³æ¡ä»¶ï¼å°±ä¸ä½¿ç¨ç¼å­è½åï¼ç´æ¥æ§è¡æ¹æ³ã å¯ä»¥ä½¿ç¨keyå±æ§æ¥æå® key ççæè§åã\n\n# @cacheput\n\nä¸@cacheableä¸åï¼@cacheputä¸ä»ä¼ç¼å­æ¹æ³çç»æï¼è¿ä¼æ§è¡æ¹æ³çä»£ç æ®µã å®æ¯æçå±æ§åç¨æ³é½ä¸@cacheableä¸è´ã\n\n# @cacheevict\n\nä¸@cacheableåè½ç¸åï¼@cacheevictè¡¨ææä¿®é¥°çæ¹æ³æ¯ç¨æ¥å é¤å¤±æææ ç¨çç¼å­æ°æ®ã ä¸é¢æ¯@cacheableã@cacheevictå@cacheputåºæ¬ä½¿ç¨æ¹æ³çä¸ä¸ªéä¸­å±ç¤ºï¼\n\n@service\npublic class userservice {\n    // @cacheableå¯ä»¥è®¾ç½®å¤ä¸ªç¼å­ï¼å½¢å¼å¦ï¼@cacheable({"books", "isbns"})\n    @cacheable(value={"users"}, key="#user.id")\n    public user finduser(user user) {\n        return finduserindb(user.getid());\n    }\n\n    @cacheable(value = "users", condition = "#user.getid() <= 2")\n    public user finduserinlimit(user user) {\n        return finduserindb(user.getid());\n    }\n\n    @cacheput(value = "users", key = "#user.getid()")\n    public void updateuser(user user) {\n        updateuserindb(user);\n    }\n\n    @cacheevict(value = "users")\n    public void removeuser(user user) {\n        removeuserindb(user.getid());\n    }\n\n    @cacheevict(value = "users", allentries = true)\n    public void clear() {\n        removeallindb();\n    }\n}\n\n\n# @caching\n\nå¦æéè¦ä½¿ç¨åä¸ä¸ªç¼å­æ³¨è§£ï¼@cacheableã@cacheevictæ@cacheputï¼å¤æ¬¡ä¿®é¥°ä¸ä¸ªæ¹æ³ï¼å°±éè¦ç¨å°@cachingã\n\n@caching(evict = { @cacheevict("primary"), @cacheevict(cachenames="secondary", key="#p0") })\npublic book importbooks(string deposit, date date)\n\n\n# @cacheconfig\n\nä¸åé¢çç¼å­æ³¨è§£ä¸åï¼è¿æ¯ä¸ä¸ªç±»çº§å«çæ³¨è§£ã å¦æç±»çæææä½é½æ¯ç¼å­æä½ï¼ä½ å¯ä»¥ä½¿ç¨@cacheconfigæ¥æå®ç±»ï¼çå»ä¸äºéç½®ã\n\n@cacheconfig("books")\npublic class bookrepositoryimpl implements bookrepository {\n\t@cacheable\n\tpublic book findbook(isbn isbn) {...}\n}\n\n\n\n# ç¼å­å­å¨\n\nspring åè®¸éè¿éç½®æ¹å¼æ¥å¥å¤ç§ä¸åçç¼å­å­å¨ãç¨æ·å¯ä»¥æ ¹æ®å®ééè¦éæ©ã\n\nä¸åçç¼å­å­å¨ï¼å·æä¸åçæ§è½åç¹æ§ï¼å¦ææ³äºè§£å·ä½åçï¼å¯ä»¥åèï¼å¨é¢çè§£ç¼å­åçãè¿éä¸åèµè¿°ã\n\n\n# ä½¿ç¨ concurrenthashmap ä½ä¸ºç¼å­\n\nåèéç½®ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:cache="http://www.springframework.org/schema/cache" xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n         http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\n         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">\n\n  <description>ä½¿ç¨ concurrenthashmap ä½ä¸º spring ç¼å­</description>\n\n  \x3c!--éç½®åèï¼https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#cache-store-configuration--\x3e\n\n  <context:component-scan base-package="io.github.dunwu.spring.cache"/>\n\n  <bean id="simplecachemanager" class="org.springframework.cache.support.simplecachemanager">\n    <property name="caches">\n      <set>\n        <bean class="org.springframework.cache.concurrent.concurrentmapcachefactorybean" p:name="default"/>\n        <bean class="org.springframework.cache.concurrent.concurrentmapcachefactorybean" p:name="users"/>\n      </set>\n    </property>\n  </bean>\n\n  <cache:annotation-driven cache-manager="simplecachemanager"/>\n</beans>\n\n\n\n# ä½¿ç¨ ehcache ä½ä¸ºç¼å­\n\nåèéç½®ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:cache="http://www.springframework.org/schema/cache"\n       xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n         http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\n         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">\n\n  <description>ä½¿ç¨ ehcache ä½ä¸º spring ç¼å­</description>\n\n  \x3c!--éç½®åèï¼https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#cache-store-configuration--\x3e\n\n  <context:component-scan base-package="io.github.dunwu.spring.cache"/>\n\n  <bean id="ehcache" class="org.springframework.cache.ehcache.ehcachemanagerfactorybean">\n    <property name="configlocation" value="classpath:ehcache/ehcache.xml"/>\n  </bean>\n\n  <bean id="ehcachecachemanager" class="org.springframework.cache.ehcache.ehcachecachemanager">\n    <property name="cachemanager" ref="ehcache"/>\n  </bean>\n\n  <cache:annotation-driven cache-manager="ehcachecachemanager"/>\n</beans>\n\n\nehcache.xml ä¸­çéç½®åå®¹å®å¨ç¬¦å ehcache çå®æ¹éç½®æ åã\n\n\n# ä½¿ç¨ caffeine ä½ä¸ºç¼å­\n\nåèéç½®ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:cache="http://www.springframework.org/schema/cache"\n       xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n         http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\n         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">\n\n  <description>ä½¿ç¨ caffeine ä½ä¸º spring ç¼å­</description>\n\n  \x3c!--éç½®åèï¼https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#cache-store-configuration--\x3e\n\n  <context:component-scan base-package="io.github.dunwu.spring.cache"/>\n\n  <bean id="caffeinecachemanager" class="org.springframework.cache.caffeine.caffeinecachemanager"/>\n\n  <cache:annotation-driven cache-manager="caffeinecachemanager"/>\n</beans>\n\n\n\n# ç¤ºä¾ä»£ç \n\næçç¤ºä¾ä»£ç å°åï¼spring-tutorial-integration-cache\n\n\n# åèèµæ\n\n * spring å®æ¹ææ¡£ä¹ç¼å­æ½è±¡\n * æ³¨éé©±å¨ç spring cache ç¼å­ä»ç»',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring IO",frontmatter:{title:"Spring IO",date:"2022-09-18T11:34:00.000Z",categories:["Java","æ¡æ¶","Spring","SpringIO"],tags:["Java","æ¡æ¶","Spring","SpringBoot","IO"],permalink:"/pages/56581b/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/04.SpringIO/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/README.md",key:"v-30e174be",path:"/pages/56581b/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:16},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:86},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:265}],headersStr:"ð åå®¹ ð èµæ ðª ä¼ é",content:"# Spring IO\n\n\n# ð åå®¹\n\n * SpringBoot ä¹å¼æ­¥è¯·æ±\n * SpringBoot ä¹ Json\n * SpringBoot ä¹é®ä»¶\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",normalizedContent:"# spring io\n\n\n# ð åå®¹\n\n * springboot ä¹å¼æ­¥è¯·æ±\n * springboot ä¹ json\n * springboot ä¹é®ä»¶\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring éæ",frontmatter:{title:"Spring éæ",date:"2020-02-26T23:47:47.000Z",categories:["Java","æ¡æ¶","Spring","Springéæ"],tags:["Java","æ¡æ¶","Spring","SpringBoot","éæ"],permalink:"/pages/d6025b/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/05.Spring%E9%9B%86%E6%88%90/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/README.md",key:"v-9761e2fa",path:"/pages/d6025b/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:74},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:142},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:321}],headersStr:"ð åå®¹ ð èµæ ðª ä¼ é",content:"# Spring éæ\n\n> ç« èä¸»è¦éå¯¹ï¼Spring ä¸ç¬¬ä¸æ¹æ¡æ¶ãåºéæãå¦ï¼CacheãSchedulingãJMSãJMX ç­ã\n\n\n# ð åå®¹\n\n * Spring éæç¼å­ä¸­é´ä»¶\n * Spring éæå®æ¶ä»»å¡ä¸­é´ä»¶\n * Spring éæ Dubbo\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",normalizedContent:"# spring éæ\n\n> ç« èä¸»è¦éå¯¹ï¼spring ä¸ç¬¬ä¸æ¹æ¡æ¶ãåºéæãå¦ï¼cacheãschedulingãjmsãjmx ç­ã\n\n\n# ð åå®¹\n\n * spring éæç¼å­ä¸­é´ä»¶\n * spring éæå®æ¶ä»»å¡ä¸­é´ä»¶\n * spring éæ dubbo\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring éæè°åº¦å¨",frontmatter:{title:"Spring éæè°åº¦å¨",date:"2017-11-08T16:53:27.000Z",order:2,categories:["Java","æ¡æ¶","Spring","Springéæ"],tags:["Java","æ¡æ¶","Spring","éæ","è°åº¦å¨"],permalink:"/pages/a187f0/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/05.Spring%E9%9B%86%E6%88%90/02.Spring%E9%9B%86%E6%88%90%E8%B0%83%E5%BA%A6%E5%99%A8.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/02.Springéæè°åº¦å¨.md",key:"v-94543dd8",path:"/pages/a187f0/",headers:[{level:2,title:"æ¦è¿°",slug:"æ¦è¿°",normalizedTitle:"æ¦è¿°",charIndex:19},{level:2,title:"å®æ¶è§¦åè°åº¦ä»»å¡",slug:"å®æ¶è§¦åè°åº¦ä»»å¡",normalizedTitle:"å®æ¶è§¦åè°åº¦ä»»å¡",charIndex:140},{level:3,title:"TaskScheduler æ¥å£",slug:"taskscheduler-æ¥å£",normalizedTitle:"taskscheduler æ¥å£",charIndex:153},{level:4,title:"Trigger æ¥å£",slug:"trigger-æ¥å£",normalizedTitle:"trigger æ¥å£",charIndex:1106},{level:4,title:"å®æ´èä¾",slug:"å®æ´èä¾",normalizedTitle:"å®æ´èä¾",charIndex:1368},{level:3,title:"@Scheduler çä½¿ç¨æ¹æ³",slug:"scheduler-çä½¿ç¨æ¹æ³",normalizedTitle:"@scheduler çä½¿ç¨æ¹æ³",charIndex:3844},{level:4,title:"å¯å¨æ³¨è§£",slug:"å¯å¨æ³¨è§£",normalizedTitle:"å¯å¨æ³¨è§£",charIndex:3912},{level:4,title:"@Scheduler å®ä¹è§¦åæ¡ä»¶",slug:"scheduler-å®ä¹è§¦åæ¡ä»¶",normalizedTitle:"@scheduler å®ä¹è§¦åæ¡ä»¶",charIndex:4853},{level:4,title:"å®æ´èä¾",slug:"å®æ´èä¾-2",normalizedTitle:"å®æ´èä¾",charIndex:1368},{level:2,title:"åè",slug:"åè",normalizedTitle:"åè",charIndex:10462}],headersStr:"æ¦è¿° å®æ¶è§¦åè°åº¦ä»»å¡ TaskScheduler æ¥å£ Trigger æ¥å£ å®æ´èä¾ @Scheduler çä½¿ç¨æ¹æ³ å¯å¨æ³¨è§£ @Scheduler å®ä¹è§¦åæ¡ä»¶ å®æ´èä¾ åè",content:'# Spring éæè°åº¦å¨\n\n\n# æ¦è¿°\n\nå¦ææ³å¨ Spring ä¸­ä½¿ç¨ä»»å¡è°åº¦åè½ï¼é¤äºéæè°åº¦æ¡æ¶ Quartz è¿ç§æ¹å¼ï¼ä¹å¯ä»¥ä½¿ç¨ Spring èªå·±çè°åº¦ä»»å¡æ¡æ¶ã ä½¿ç¨ Spring çè°åº¦æ¡æ¶ï¼ä¼ç¹æ¯ï¼æ¯ææ³¨è§£@Schedulerï¼å¯ä»¥çå»å¤§éçéç½®ã\n\n\n# å®æ¶è§¦åè°åº¦ä»»å¡\n\n\n# TaskScheduler æ¥å£\n\nSpring3 å¼å¥äºTaskScheduleræ¥å£ï¼è¿ä¸ªæ¥å£å®ä¹äºè°åº¦ä»»å¡çæ½è±¡æ¹æ³ã TaskScheduler æ¥å£çå£°æï¼\n\npublic interface TaskScheduler {\n\n    ScheduledFuture schedule(Runnable task, Trigger trigger);\n\n    ScheduledFuture schedule(Runnable task, Date startTime);\n\n    ScheduledFuture scheduleAtFixedRate(Runnable task, Date startTime, long period);\n\n    ScheduledFuture scheduleAtFixedRate(Runnable task, long period);\n\n    ScheduledFuture scheduleWithFixedDelay(Runnable task, Date startTime, long delay);\n\n    ScheduledFuture scheduleWithFixedDelay(Runnable task, long delay);\n\n}\n\n\nä»ä»¥ä¸æ¹æ³å¯ä»¥çåº TaskScheduler æä¸¤ç±»éè¦åæ°ï¼\n\n * ä¸ä¸ªæ¯è¦è°åº¦çæ¹æ³ï¼å³ä¸ä¸ªå®ç°äº Runnable æ¥å£ççº¿ç¨ç±»ç run()æ¹æ³ï¼\n * å¦ä¸ä¸ªå°±æ¯è§¦åæ¡ä»¶ã\n\nTaskScheduler æ¥å£çå®ç°ç±» å®æä¸ä¸ªå®ç°ç±»ï¼DefaultManagedTaskSchedulerãThreadPoolTaskSchedulerãTimerManagerTaskSchedulerã DefaultManagedTaskSchedulerï¼åºäº JNDI çè°åº¦å¨ã TimerManagerTaskSchedulerï¼æç®¡commonj.timers.TimerManagerå®ä¾çè°åº¦å¨ã ThreadPoolTaskSchedulerï¼æä¾çº¿ç¨æ± ç®¡ççè°åº¦å¨ï¼å®ä¹å®ç°äºTaskExecutoræ¥å£ï¼ä»èä½¿çåä¸çå®ä¾å¯ä»¥å°½å¯è½å¿«å°å¼æ­¥æ§è¡ã\n\n# Trigger æ¥å£\n\nTrigger æ¥å£æ½è±¡äºè§¦åæ¡ä»¶çæ¹æ³ã Trigger æ¥å£çå£°æï¼\n\npublic interface Trigger {\n    Date nextExecutionTime(TriggerContext triggerContext);\n}\n\n\nTrigger æ¥å£çå®ç°ç±» CronTriggerï¼å®ç°äº cron è§åçè§¦åå¨ç±»ï¼å Quartz ç cron è§åç¸åï¼ã PeriodicTriggerï¼å®ç°äºä¸ä¸ªå¨ææ§è§åçè§¦åå¨ç±»ï¼ä¾å¦ï¼å®ä¹è§¦åèµ·å§æ¶é´ãé´éæ¶é´ç­ï¼ã\n\n# å®æ´èä¾\n\nå®ç°ä¸ä¸ªè°åº¦ä»»å¡çåè½æä»¥ä¸å ä¸ªå³é®ç¹ï¼ (1) å®ä¹è°åº¦å¨ å¨ spring-bean.xml ä¸­è¿è¡éç½® ä½¿ç¨task:scheduleræ ç­¾å®ä¹ä¸ä¸ªå¤§å°ä¸º 10 ççº¿ç¨æ± è°åº¦å¨ï¼spring ä¼å®ä¾åä¸ä¸ªThreadPoolTaskSchedulerã\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:mvc="http://www.springframework.org/schema/mvc"\n       xmlns:task="http://www.springframework.org/schema/task"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/mvc\n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n       http://www.springframework.org/schema/task\n       http://www.springframework.org/schema/task/spring-task-3.1.xsd">\n  <mvc:annotation-driven/>\n  <task:scheduler id="myScheduler" pool-size="10"/>\n</beans>\n\n\næ³¨ï¼ä¸è¦å¿è®°å¼å¥ xsdï¼\n\nhttp://www.springframework.org/schema/task\nhttp://www.springframework.org/schema/task/spring-task-3.1.xsd\n\n\n(2) å®ä¹è°åº¦ä»»å¡ å®ä¹å®ç°Runnableæ¥å£ççº¿ç¨ç±»ã\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class DemoTask implements Runnable {\n    final Logger logger = LoggerFactory.getLogger(this.getClass());\n\n    @Override\n    public void run() {\n        logger.info("call DemoTask.run");\n    }\n}\n\n\n(3) è£éè°åº¦å¨ï¼å¹¶æ§è¡è°åº¦ä»»å¡ å¨ä¸ä¸ªControllerç±»ä¸­ç¨@Autowiredæ³¨è§£è£éTaskSchedulerã ç¶åè°å¨ TaskScheduler å¯¹è±¡ç schedule æ¹æ³å¯å¨è°åº¦å¨ï¼å°±å¯ä»¥æ§è¡è°åº¦ä»»å¡äºã\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.scheduling.TaskScheduler;\nimport org.springframework.scheduling.support.CronTrigger;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\n\n@Controller\n@RequestMapping("/scheduler")\npublic class SchedulerController {\n    @Autowired\n    TaskScheduler scheduler;\n\n    @RequestMapping(value = "/start", method = RequestMethod.POST)\n    public void start() {\n        scheduler.schedule(new DemoTask(), new CronTrigger("0/5 * * * * *"));\n    }\n}\n\n\nè®¿é®/scheduler/start æ¥å£ï¼å¯å¨è°åº¦å¨ï¼å¯ä»¥çå°å¦ä¸æ¥å¿åå®¹ï¼\n\n13:53:15.010 myScheduler-1 o.zp.notes.spring.scheduler.DemoTask.run - call DemoTask.run\n13:53:20.003 myScheduler-1 o.zp.notes.spring.scheduler.DemoTask.run - call DemoTask.run\n13:53:25.004 myScheduler-2 o.zp.notes.spring.scheduler.DemoTask.run - call DemoTask.run\n13:53:30.005 myScheduler-1 o.zp.notes.spring.scheduler.DemoTask.run - call DemoTask.run\n\n\n\n# @Scheduler çä½¿ç¨æ¹æ³\n\nSpring çè°åº¦å¨ä¸ä¸ªå¾å¤§çäº®ç¹å¨äº@Scheduleræ³¨è§£ï¼è¿å¯ä»¥çå»å¾å¤ç¹ççéç½®ã\n\n# å¯å¨æ³¨è§£\n\nä½¿ç¨@Scheduler æ³¨è§£åè¦ä½¿ç¨<task:annotation-driven>å¯å¨æ³¨è§£å¼å³ã ä¾ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:mvc="http://www.springframework.org/schema/mvc"\n       xmlns:task="http://www.springframework.org/schema/task"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/mvc\n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n       http://www.springframework.org/schema/task\n       http://www.springframework.org/schema/task/spring-task-3.1.xsd">\n  <mvc:annotation-driven/>\n  <task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>\n  <task:executor id="myExecutor" pool-size="5"/>\n  <task:scheduler id="myScheduler" pool-size="10"/>\n</beans>\n\n\n# @Scheduler å®ä¹è§¦åæ¡ä»¶\n\nä¾ï¼ä½¿ç¨fixedDelayæå®è§¦åæ¡ä»¶ä¸ºæ¯ 5000 æ¯«ç§æ§è¡ä¸æ¬¡ãæ³¨æï¼å¿é¡»å¨ä¸ä¸æ¬¡è°åº¦æååç 5000 ç§æè½æ§è¡ã\n\n@Scheduled(fixedDelay=5000)\npublic void doSomething() {\n    // something that should execute periodically\n}\n\n\nä¾ï¼ä½¿ç¨fixedRateæå®è§¦åæ¡ä»¶ä¸ºæ¯ 5000 æ¯«ç§æ§è¡ä¸æ¬¡ãæ³¨æï¼æ è®ºä¸ä¸æ¬¡è°åº¦æ¯å¦æåï¼5000 ç§åå¿ç¶æ§è¡ã\n\n@Scheduled(fixedRate=5000)\npublic void doSomething() {\n    // something that should execute periodically\n}\n\n\nä¾ï¼ä½¿ç¨initialDelayæå®æ¹æ³å¨åå§å 1000 æ¯«ç§åæå¼å§è°åº¦ã\n\n@Scheduled(initialDelay=1000, fixedRate=5000)\npublic void doSomething() {\n    // something that should execute periodically\n}\n\n\nä¾ï¼ä½¿ç¨cronè¡¨è¾¾å¼æå®è§¦åæ¡ä»¶ä¸ºæ¯ 5000 æ¯«ç§æ§è¡ä¸æ¬¡ãcron è§åå Quartz ä¸­ç cron è§åä¸è´ã\n\n@Scheduled(cron="*/5 * * * * MON-FRI")\npublic void doSomething() {\n    // something that should execute on weekdays only\n}\n\n\n# å®æ´èä¾\n\n(1) å¯å¨æ³¨è§£å¼å³ï¼å¹¶å®ä¹è°åº¦å¨åæ§è¡å¨\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:mvc="http://www.springframework.org/schema/mvc"\n       xmlns:task="http://www.springframework.org/schema/task"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/mvc\n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n       http://www.springframework.org/schema/task\n       http://www.springframework.org/schema/task/spring-task-3.1.xsd">\n\n  <mvc:annotation-driven/>\n  <task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>\n  <task:executor id="myExecutor" pool-size="5"/>\n  <task:scheduler id="myScheduler" pool-size="10"/>\n</beans>\n\n\n(2) ä½¿ç¨@Scheduler æ³¨è§£æ¥ä¿®é¥°ä¸ä¸ªè¦è°åº¦çæ¹æ³ ä¸é¢çä¾å­å±ç¤ºäº@Scheduler æ³¨è§£å®ä¹è§¦åæ¡ä»¶çä¸åæ¹å¼ã\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.scheduling.annotation.Scheduled;\nimport org.springframework.stereotype.Component;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\n/**\n * @description ä½¿ç¨@Scheduleræ³¨è§£è°åº¦ä»»å¡èä¾\n * @author Vicotr Zhang\n * @date 2016å¹´8æ31æ¥\n */\n@Component\npublic class ScheduledMgr {\n    private final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");\n\n    final Logger logger = LoggerFactory.getLogger(this.getClass());\n\n    /**\n     * æé å½æ°ä¸­æå°åå§åæ¶é´\n     */\n    public ScheduledMgr() {\n        logger.info("Current time: {}", dateFormat.format(new Date()));\n    }\n\n    /**\n     * fixedDelayå±æ§å®ä¹è°åº¦é´éæ¶é´ãè°åº¦éè¦ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡å®æã\n     */\n    @Scheduled(fixedDelay = 5000)\n    public void testFixedDelay() throws Exception {\n        Thread.sleep(6000);\n        logger.info("Current time: {}", dateFormat.format(new Date()));\n    }\n\n    /**\n     * fixedRateå±æ§å®ä¹è°åº¦é´éæ¶é´ãè°åº¦ä¸ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡å®æã\n     */\n    @Scheduled(fixedRate = 5000)\n    public void testFixedRate() throws Exception {\n        Thread.sleep(6000);\n        logger.info("Current time: {}", dateFormat.format(new Date()));\n    }\n\n    /**\n     * initialDelayå±æ§å®ä¹åå§ååçå¯å¨å»¶è¿æ¶é´\n     */\n    @Scheduled(initialDelay = 1000, fixedRate = 5000)\n    public void testInitialDelay() throws Exception {\n        Thread.sleep(6000);\n        logger.info("Current time: {}", dateFormat.format(new Date()));\n    }\n\n    /**\n     * cronå±æ§æ¯æä½¿ç¨cronè¡¨è¾¾å¼å®ä¹è§¦åæ¡ä»¶\n     */\n    @Scheduled(cron = "0/5 * * * * ?")\n    public void testCron() throws Exception {\n        Thread.sleep(6000);\n        logger.info("Current time: {}", dateFormat.format(new Date()));\n    }\n}\n\n\næå»æè®¾ç½®è§¦åæ¹å¼çé´éé½æ¯ 5sï¼ä¸æ¹æ³ä¸­åæ Thread.sleep(6000);è¯­å¥ãä»èç¡®ä¿æ¹æ³å¨ä¸ä¸æ¬¡è°åº¦è§¦åæ¶é´ç¹åæ æ³å®ææ§è¡ï¼æ¥çä¸çåç§æ¹å¼çè¡¨ç°å§ã å¯å¨ spring é¡¹ç®åï¼spring ä¼æ«æ@Componentæ³¨è§£ï¼ç¶ååå§å ScheduledMgrã æ¥çï¼spring ä¼æ«æ@Scheduleræ³¨è§£ï¼åå§åè°åº¦å¨ãè°åº¦å¨å¨è§¦åæ¡ä»¶å¹éçæåµä¸å¼å§å·¥ä½ï¼è¾åºæ¥å¿ã æªåé¨åæå°æ¥å¿æ¥è¿è¡åæã\n\n10:58:46.479 localhost-startStop-1 o.z.n.s.scheduler.ScheduledTasks.<init> - Current time: 2016-08-31 10:58:46\n10:58:52.523 myScheduler-1 o.z.n.s.scheduler.ScheduledTasks.testFixedRate - Current time: 2016-08-31 10:58:52\n10:58:52.523 myScheduler-3 o.z.n.s.scheduler.ScheduledTasks.testFixedDelay - Current time: 2016-08-31 10:58:52\n10:58:53.524 myScheduler-2 o.z.n.s.scheduler.ScheduledTasks.testInitialDelay - Current time: 2016-08-31 10:58:53\n10:58:55.993 myScheduler-4 o.z.n.s.scheduler.ScheduledTasks.testCron - Current time: 2016-08-31 10:58:55\n10:58:58.507 myScheduler-1 o.z.n.s.scheduler.ScheduledTasks.testFixedRate - Current time: 2016-08-31 10:58:58\n10:58:59.525 myScheduler-5 o.z.n.s.scheduler.ScheduledTasks.testInitialDelay - Current time: 2016-08-31 10:58:59\n10:59:03.536 myScheduler-3 o.z.n.s.scheduler.ScheduledTasks.testFixedDelay - Current time: 2016-08-31 10:59:03\n10:59:04.527 myScheduler-1 o.z.n.s.scheduler.ScheduledTasks.testFixedRate - Current time: 2016-08-31 10:59:04\n10:59:05.527 myScheduler-4 o.z.n.s.scheduler.ScheduledTasks.testInitialDelay - Current time: 2016-08-31 10:59:05\n10:59:06.032 myScheduler-2 o.z.n.s.scheduler.ScheduledTasks.testCron - Current time: 2016-08-31 10:59:06\n10:59:10.534 myScheduler-9 o.z.n.s.scheduler.ScheduledTasks.testFixedRate - Current time: 2016-08-31 10:59:10\n10:59:11.527 myScheduler-10 o.z.n.s.scheduler.ScheduledTasks.testInitialDelay - Current time: 2016-08-31 10:59:11\n10:59:14.524 myScheduler-4 o.z.n.s.scheduler.ScheduledTasks.testFixedDelay - Current time: 2016-08-31 10:59:14\n10:59:15.987 myScheduler-6 o.z.n.s.scheduler.ScheduledTasks.testCron - Current time: 2016-08-31 10:59:15\n\n\næé æ¹æ³æå°ä¸æ¬¡ï¼æ¶é´ç¹å¨ 10:58:46ã testFixedRate æå°åæ¬¡ï¼æ¯æ¬¡é´é 6 ç§ãè¯´æï¼fixedRate ä¸ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡å®æï¼å¨é´éæ¶é´è¾¾å°æ¶ç«å³æ§è¡ã testFixedDelay æå°ä¸æ¬¡ï¼æ¯æ¬¡é´éå¤§äº 6 ç§ï¼ä¸æ¶é´ä¸åºå®ãè¯´æï¼fixedDelay ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡æååï¼å¼å§è®¡ç®é´éæ¶é´ï¼åæ§è¡ã testInitialDelay ç¬¬ä¸æ¬¡è°åº¦æ¶é´åæé æ¹æ³è°åº¦æ¶é´ç¸é 7 ç§ãè¯´æï¼initialDelay å¨åå§ååç­å¾æå®çå»¶è¿æ¶é´æå¼å§è°åº¦ã testCron æå°ä¸æ¬¡ï¼æ¶é´é´éå¹¶é 5 ç§æ 6 ç§ï¼æ¾ç¶ï¼cron ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡æååï¼å¼å§è®¡ç®é´éæ¶é´ï¼åæ§è¡ã æ­¤å¤ï¼å¯ä»¥ä»æ¥å¿ä¸­çåºï¼æå°æ¥å¿ççº¿ç¨æå¤åªæ 10 ä¸ªï¼è¯´æ 2.1 ä¸­çè°åº¦å¨çº¿ç¨æ± éç½®çæã\n\n\n# åè\n\nSpring Framework å®æ¹ææ¡£',normalizedContent:'# spring éæè°åº¦å¨\n\n\n# æ¦è¿°\n\nå¦ææ³å¨ spring ä¸­ä½¿ç¨ä»»å¡è°åº¦åè½ï¼é¤äºéæè°åº¦æ¡æ¶ quartz è¿ç§æ¹å¼ï¼ä¹å¯ä»¥ä½¿ç¨ spring èªå·±çè°åº¦ä»»å¡æ¡æ¶ã ä½¿ç¨ spring çè°åº¦æ¡æ¶ï¼ä¼ç¹æ¯ï¼æ¯ææ³¨è§£@schedulerï¼å¯ä»¥çå»å¤§éçéç½®ã\n\n\n# å®æ¶è§¦åè°åº¦ä»»å¡\n\n\n# taskscheduler æ¥å£\n\nspring3 å¼å¥äºtaskscheduleræ¥å£ï¼è¿ä¸ªæ¥å£å®ä¹äºè°åº¦ä»»å¡çæ½è±¡æ¹æ³ã taskscheduler æ¥å£çå£°æï¼\n\npublic interface taskscheduler {\n\n    scheduledfuture schedule(runnable task, trigger trigger);\n\n    scheduledfuture schedule(runnable task, date starttime);\n\n    scheduledfuture scheduleatfixedrate(runnable task, date starttime, long period);\n\n    scheduledfuture scheduleatfixedrate(runnable task, long period);\n\n    scheduledfuture schedulewithfixeddelay(runnable task, date starttime, long delay);\n\n    scheduledfuture schedulewithfixeddelay(runnable task, long delay);\n\n}\n\n\nä»ä»¥ä¸æ¹æ³å¯ä»¥çåº taskscheduler æä¸¤ç±»éè¦åæ°ï¼\n\n * ä¸ä¸ªæ¯è¦è°åº¦çæ¹æ³ï¼å³ä¸ä¸ªå®ç°äº runnable æ¥å£ççº¿ç¨ç±»ç run()æ¹æ³ï¼\n * å¦ä¸ä¸ªå°±æ¯è§¦åæ¡ä»¶ã\n\ntaskscheduler æ¥å£çå®ç°ç±» å®æä¸ä¸ªå®ç°ç±»ï¼defaultmanagedtaskschedulerãthreadpooltaskschedulerãtimermanagertaskschedulerã defaultmanagedtaskschedulerï¼åºäº jndi çè°åº¦å¨ã timermanagertaskschedulerï¼æç®¡commonj.timers.timermanagerå®ä¾çè°åº¦å¨ã threadpooltaskschedulerï¼æä¾çº¿ç¨æ± ç®¡ççè°åº¦å¨ï¼å®ä¹å®ç°äºtaskexecutoræ¥å£ï¼ä»èä½¿çåä¸çå®ä¾å¯ä»¥å°½å¯è½å¿«å°å¼æ­¥æ§è¡ã\n\n# trigger æ¥å£\n\ntrigger æ¥å£æ½è±¡äºè§¦åæ¡ä»¶çæ¹æ³ã trigger æ¥å£çå£°æï¼\n\npublic interface trigger {\n    date nextexecutiontime(triggercontext triggercontext);\n}\n\n\ntrigger æ¥å£çå®ç°ç±» crontriggerï¼å®ç°äº cron è§åçè§¦åå¨ç±»ï¼å quartz ç cron è§åç¸åï¼ã periodictriggerï¼å®ç°äºä¸ä¸ªå¨ææ§è§åçè§¦åå¨ç±»ï¼ä¾å¦ï¼å®ä¹è§¦åèµ·å§æ¶é´ãé´éæ¶é´ç­ï¼ã\n\n# å®æ´èä¾\n\nå®ç°ä¸ä¸ªè°åº¦ä»»å¡çåè½æä»¥ä¸å ä¸ªå³é®ç¹ï¼ (1) å®ä¹è°åº¦å¨ å¨ spring-bean.xml ä¸­è¿è¡éç½® ä½¿ç¨task:scheduleræ ç­¾å®ä¹ä¸ä¸ªå¤§å°ä¸º 10 ççº¿ç¨æ± è°åº¦å¨ï¼spring ä¼å®ä¾åä¸ä¸ªthreadpooltaskschedulerã\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xmlns:mvc="http://www.springframework.org/schema/mvc"\n       xmlns:task="http://www.springframework.org/schema/task"\n       xsi:schemalocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/mvc\n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n       http://www.springframework.org/schema/task\n       http://www.springframework.org/schema/task/spring-task-3.1.xsd">\n  <mvc:annotation-driven/>\n  <task:scheduler id="myscheduler" pool-size="10"/>\n</beans>\n\n\næ³¨ï¼ä¸è¦å¿è®°å¼å¥ xsdï¼\n\nhttp://www.springframework.org/schema/task\nhttp://www.springframework.org/schema/task/spring-task-3.1.xsd\n\n\n(2) å®ä¹è°åº¦ä»»å¡ å®ä¹å®ç°runnableæ¥å£ççº¿ç¨ç±»ã\n\nimport org.slf4j.logger;\nimport org.slf4j.loggerfactory;\n\npublic class demotask implements runnable {\n    final logger logger = loggerfactory.getlogger(this.getclass());\n\n    @override\n    public void run() {\n        logger.info("call demotask.run");\n    }\n}\n\n\n(3) è£éè°åº¦å¨ï¼å¹¶æ§è¡è°åº¦ä»»å¡ å¨ä¸ä¸ªcontrollerç±»ä¸­ç¨@autowiredæ³¨è§£è£étaskschedulerã ç¶åè°å¨ taskscheduler å¯¹è±¡ç schedule æ¹æ³å¯å¨è°åº¦å¨ï¼å°±å¯ä»¥æ§è¡è°åº¦ä»»å¡äºã\n\nimport org.springframework.beans.factory.annotation.autowired;\nimport org.springframework.scheduling.taskscheduler;\nimport org.springframework.scheduling.support.crontrigger;\nimport org.springframework.stereotype.controller;\nimport org.springframework.web.bind.annotation.requestmapping;\nimport org.springframework.web.bind.annotation.requestmethod;\n\n@controller\n@requestmapping("/scheduler")\npublic class schedulercontroller {\n    @autowired\n    taskscheduler scheduler;\n\n    @requestmapping(value = "/start", method = requestmethod.post)\n    public void start() {\n        scheduler.schedule(new demotask(), new crontrigger("0/5 * * * * *"));\n    }\n}\n\n\nè®¿é®/scheduler/start æ¥å£ï¼å¯å¨è°åº¦å¨ï¼å¯ä»¥çå°å¦ä¸æ¥å¿åå®¹ï¼\n\n13:53:15.010 myscheduler-1 o.zp.notes.spring.scheduler.demotask.run - call demotask.run\n13:53:20.003 myscheduler-1 o.zp.notes.spring.scheduler.demotask.run - call demotask.run\n13:53:25.004 myscheduler-2 o.zp.notes.spring.scheduler.demotask.run - call demotask.run\n13:53:30.005 myscheduler-1 o.zp.notes.spring.scheduler.demotask.run - call demotask.run\n\n\n\n# @scheduler çä½¿ç¨æ¹æ³\n\nspring çè°åº¦å¨ä¸ä¸ªå¾å¤§çäº®ç¹å¨äº@scheduleræ³¨è§£ï¼è¿å¯ä»¥çå»å¾å¤ç¹ççéç½®ã\n\n# å¯å¨æ³¨è§£\n\nä½¿ç¨@scheduler æ³¨è§£åè¦ä½¿ç¨<task:annotation-driven>å¯å¨æ³¨è§£å¼å³ã ä¾ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xmlns:mvc="http://www.springframework.org/schema/mvc"\n       xmlns:task="http://www.springframework.org/schema/task"\n       xsi:schemalocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/mvc\n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n       http://www.springframework.org/schema/task\n       http://www.springframework.org/schema/task/spring-task-3.1.xsd">\n  <mvc:annotation-driven/>\n  <task:annotation-driven executor="myexecutor" scheduler="myscheduler"/>\n  <task:executor id="myexecutor" pool-size="5"/>\n  <task:scheduler id="myscheduler" pool-size="10"/>\n</beans>\n\n\n# @scheduler å®ä¹è§¦åæ¡ä»¶\n\nä¾ï¼ä½¿ç¨fixeddelayæå®è§¦åæ¡ä»¶ä¸ºæ¯ 5000 æ¯«ç§æ§è¡ä¸æ¬¡ãæ³¨æï¼å¿é¡»å¨ä¸ä¸æ¬¡è°åº¦æååç 5000 ç§æè½æ§è¡ã\n\n@scheduled(fixeddelay=5000)\npublic void dosomething() {\n    // something that should execute periodically\n}\n\n\nä¾ï¼ä½¿ç¨fixedrateæå®è§¦åæ¡ä»¶ä¸ºæ¯ 5000 æ¯«ç§æ§è¡ä¸æ¬¡ãæ³¨æï¼æ è®ºä¸ä¸æ¬¡è°åº¦æ¯å¦æåï¼5000 ç§åå¿ç¶æ§è¡ã\n\n@scheduled(fixedrate=5000)\npublic void dosomething() {\n    // something that should execute periodically\n}\n\n\nä¾ï¼ä½¿ç¨initialdelayæå®æ¹æ³å¨åå§å 1000 æ¯«ç§åæå¼å§è°åº¦ã\n\n@scheduled(initialdelay=1000, fixedrate=5000)\npublic void dosomething() {\n    // something that should execute periodically\n}\n\n\nä¾ï¼ä½¿ç¨cronè¡¨è¾¾å¼æå®è§¦åæ¡ä»¶ä¸ºæ¯ 5000 æ¯«ç§æ§è¡ä¸æ¬¡ãcron è§åå quartz ä¸­ç cron è§åä¸è´ã\n\n@scheduled(cron="*/5 * * * * mon-fri")\npublic void dosomething() {\n    // something that should execute on weekdays only\n}\n\n\n# å®æ´èä¾\n\n(1) å¯å¨æ³¨è§£å¼å³ï¼å¹¶å®ä¹è°åº¦å¨åæ§è¡å¨\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n       xmlns:mvc="http://www.springframework.org/schema/mvc"\n       xmlns:task="http://www.springframework.org/schema/task"\n       xsi:schemalocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n       http://www.springframework.org/schema/mvc\n       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n       http://www.springframework.org/schema/task\n       http://www.springframework.org/schema/task/spring-task-3.1.xsd">\n\n  <mvc:annotation-driven/>\n  <task:annotation-driven executor="myexecutor" scheduler="myscheduler"/>\n  <task:executor id="myexecutor" pool-size="5"/>\n  <task:scheduler id="myscheduler" pool-size="10"/>\n</beans>\n\n\n(2) ä½¿ç¨@scheduler æ³¨è§£æ¥ä¿®é¥°ä¸ä¸ªè¦è°åº¦çæ¹æ³ ä¸é¢çä¾å­å±ç¤ºäº@scheduler æ³¨è§£å®ä¹è§¦åæ¡ä»¶çä¸åæ¹å¼ã\n\nimport org.slf4j.logger;\nimport org.slf4j.loggerfactory;\nimport org.springframework.scheduling.annotation.scheduled;\nimport org.springframework.stereotype.component;\n\nimport java.text.simpledateformat;\nimport java.util.date;\n\n/**\n * @description ä½¿ç¨@scheduleræ³¨è§£è°åº¦ä»»å¡èä¾\n * @author vicotr zhang\n * @date 2016å¹´8æ31æ¥\n */\n@component\npublic class scheduledmgr {\n    private final simpledateformat dateformat = new simpledateformat("yyyy-mm-dd hh:mm:ss");\n\n    final logger logger = loggerfactory.getlogger(this.getclass());\n\n    /**\n     * æé å½æ°ä¸­æå°åå§åæ¶é´\n     */\n    public scheduledmgr() {\n        logger.info("current time: {}", dateformat.format(new date()));\n    }\n\n    /**\n     * fixeddelayå±æ§å®ä¹è°åº¦é´éæ¶é´ãè°åº¦éè¦ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡å®æã\n     */\n    @scheduled(fixeddelay = 5000)\n    public void testfixeddelay() throws exception {\n        thread.sleep(6000);\n        logger.info("current time: {}", dateformat.format(new date()));\n    }\n\n    /**\n     * fixedrateå±æ§å®ä¹è°åº¦é´éæ¶é´ãè°åº¦ä¸ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡å®æã\n     */\n    @scheduled(fixedrate = 5000)\n    public void testfixedrate() throws exception {\n        thread.sleep(6000);\n        logger.info("current time: {}", dateformat.format(new date()));\n    }\n\n    /**\n     * initialdelayå±æ§å®ä¹åå§ååçå¯å¨å»¶è¿æ¶é´\n     */\n    @scheduled(initialdelay = 1000, fixedrate = 5000)\n    public void testinitialdelay() throws exception {\n        thread.sleep(6000);\n        logger.info("current time: {}", dateformat.format(new date()));\n    }\n\n    /**\n     * cronå±æ§æ¯æä½¿ç¨cronè¡¨è¾¾å¼å®ä¹è§¦åæ¡ä»¶\n     */\n    @scheduled(cron = "0/5 * * * * ?")\n    public void testcron() throws exception {\n        thread.sleep(6000);\n        logger.info("current time: {}", dateformat.format(new date()));\n    }\n}\n\n\næå»æè®¾ç½®è§¦åæ¹å¼çé´éé½æ¯ 5sï¼ä¸æ¹æ³ä¸­åæ thread.sleep(6000);è¯­å¥ãä»èç¡®ä¿æ¹æ³å¨ä¸ä¸æ¬¡è°åº¦è§¦åæ¶é´ç¹åæ æ³å®ææ§è¡ï¼æ¥çä¸çåç§æ¹å¼çè¡¨ç°å§ã å¯å¨ spring é¡¹ç®åï¼spring ä¼æ«æ@componentæ³¨è§£ï¼ç¶ååå§å scheduledmgrã æ¥çï¼spring ä¼æ«æ@scheduleræ³¨è§£ï¼åå§åè°åº¦å¨ãè°åº¦å¨å¨è§¦åæ¡ä»¶å¹éçæåµä¸å¼å§å·¥ä½ï¼è¾åºæ¥å¿ã æªåé¨åæå°æ¥å¿æ¥è¿è¡åæã\n\n10:58:46.479 localhost-startstop-1 o.z.n.s.scheduler.scheduledtasks.<init> - current time: 2016-08-31 10:58:46\n10:58:52.523 myscheduler-1 o.z.n.s.scheduler.scheduledtasks.testfixedrate - current time: 2016-08-31 10:58:52\n10:58:52.523 myscheduler-3 o.z.n.s.scheduler.scheduledtasks.testfixeddelay - current time: 2016-08-31 10:58:52\n10:58:53.524 myscheduler-2 o.z.n.s.scheduler.scheduledtasks.testinitialdelay - current time: 2016-08-31 10:58:53\n10:58:55.993 myscheduler-4 o.z.n.s.scheduler.scheduledtasks.testcron - current time: 2016-08-31 10:58:55\n10:58:58.507 myscheduler-1 o.z.n.s.scheduler.scheduledtasks.testfixedrate - current time: 2016-08-31 10:58:58\n10:58:59.525 myscheduler-5 o.z.n.s.scheduler.scheduledtasks.testinitialdelay - current time: 2016-08-31 10:58:59\n10:59:03.536 myscheduler-3 o.z.n.s.scheduler.scheduledtasks.testfixeddelay - current time: 2016-08-31 10:59:03\n10:59:04.527 myscheduler-1 o.z.n.s.scheduler.scheduledtasks.testfixedrate - current time: 2016-08-31 10:59:04\n10:59:05.527 myscheduler-4 o.z.n.s.scheduler.scheduledtasks.testinitialdelay - current time: 2016-08-31 10:59:05\n10:59:06.032 myscheduler-2 o.z.n.s.scheduler.scheduledtasks.testcron - current time: 2016-08-31 10:59:06\n10:59:10.534 myscheduler-9 o.z.n.s.scheduler.scheduledtasks.testfixedrate - current time: 2016-08-31 10:59:10\n10:59:11.527 myscheduler-10 o.z.n.s.scheduler.scheduledtasks.testinitialdelay - current time: 2016-08-31 10:59:11\n10:59:14.524 myscheduler-4 o.z.n.s.scheduler.scheduledtasks.testfixeddelay - current time: 2016-08-31 10:59:14\n10:59:15.987 myscheduler-6 o.z.n.s.scheduler.scheduledtasks.testcron - current time: 2016-08-31 10:59:15\n\n\næé æ¹æ³æå°ä¸æ¬¡ï¼æ¶é´ç¹å¨ 10:58:46ã testfixedrate æå°åæ¬¡ï¼æ¯æ¬¡é´é 6 ç§ãè¯´æï¼fixedrate ä¸ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡å®æï¼å¨é´éæ¶é´è¾¾å°æ¶ç«å³æ§è¡ã testfixeddelay æå°ä¸æ¬¡ï¼æ¯æ¬¡é´éå¤§äº 6 ç§ï¼ä¸æ¶é´ä¸åºå®ãè¯´æï¼fixeddelay ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡æååï¼å¼å§è®¡ç®é´éæ¶é´ï¼åæ§è¡ã testinitialdelay ç¬¬ä¸æ¬¡è°åº¦æ¶é´åæé æ¹æ³è°åº¦æ¶é´ç¸é 7 ç§ãè¯´æï¼initialdelay å¨åå§ååç­å¾æå®çå»¶è¿æ¶é´æå¼å§è°åº¦ã testcron æå°ä¸æ¬¡ï¼æ¶é´é´éå¹¶é 5 ç§æ 6 ç§ï¼æ¾ç¶ï¼cron ç­å¾ä¸ä¸æ¬¡è°åº¦æ§è¡æååï¼å¼å§è®¡ç®é´éæ¶é´ï¼åæ§è¡ã æ­¤å¤ï¼å¯ä»¥ä»æ¥å¿ä¸­çåºï¼æå°æ¥å¿ççº¿ç¨æå¤åªæ 10 ä¸ªï¼è¯´æ 2.1 ä¸­çè°åº¦å¨çº¿ç¨æ± éç½®çæã\n\n\n# åè\n\nspring framework å®æ¹ææ¡£',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringéæDubbo",frontmatter:{title:"SpringéæDubbo",date:"2017-10-27T17:30:41.000Z",order:3,categories:["Java","æ¡æ¶","Spring","Springéæ"],tags:["Java","æ¡æ¶","Spring","éæ","Dubbo"],permalink:"/pages/274fd7/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/05.Spring%E9%9B%86%E6%88%90/03.Spring%E9%9B%86%E6%88%90Dubbo.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/03.SpringéæDubbo.md",key:"v-6078057e",path:"/pages/274fd7/",headers:[{level:2,title:"ZooKeeper",slug:"zookeeper",normalizedTitle:"zookeeper",charIndex:22},{level:2,title:"Dubbo",slug:"dubbo",normalizedTitle:"dubbo",charIndex:12},{level:2,title:"æå¡æä¾è",slug:"æå¡æä¾è",normalizedTitle:"æå¡æä¾è",charIndex:1347},{level:3,title:"å®ä¹æå¡æ¥å£",slug:"å®ä¹æå¡æ¥å£",normalizedTitle:"å®ä¹æå¡æ¥å£",charIndex:1377},{level:3,title:"å¨æå¡æä¾æ¹å®ç°æ¥å£",slug:"å¨æå¡æä¾æ¹å®ç°æ¥å£",normalizedTitle:"å¨æå¡æä¾æ¹å®ç°æ¥å£",charIndex:1511},{level:3,title:"ç¨ Spring éç½®å£°ææ´é²æå¡",slug:"ç¨-spring-éç½®å£°ææ´é²æå¡",normalizedTitle:"ç¨ spring éç½®å£°ææ´é²æå¡",charIndex:1775},{level:3,title:"å è½½ Spring éç½®",slug:"å è½½-spring-éç½®",normalizedTitle:"å è½½ spring éç½®",charIndex:2841},{level:2,title:"æå¡æ¶è´¹è",slug:"æå¡æ¶è´¹è",normalizedTitle:"æå¡æ¶è´¹è",charIndex:3263},{level:3,title:"éè¿ Spring éç½®å¼ç¨è¿ç¨æå¡",slug:"éè¿-spring-éç½®å¼ç¨è¿ç¨æå¡",normalizedTitle:"éè¿ spring éç½®å¼ç¨è¿ç¨æå¡",charIndex:3293},{level:3,title:"å è½½ Spring éç½®ï¼å¹¶è°ç¨è¿ç¨æå¡",slug:"å è½½-spring-éç½®-å¹¶è°ç¨è¿ç¨æå¡",normalizedTitle:"å è½½ spring éç½®ï¼å¹¶è°ç¨è¿ç¨æå¡",charIndex:4213},{level:2,title:"FAQ",slug:"faq",normalizedTitle:"faq",charIndex:4919},{level:2,title:"èµæ",slug:"èµæ",normalizedTitle:"èµæ",charIndex:4970}],headersStr:"ZooKeeper Dubbo æå¡æä¾è å®ä¹æå¡æ¥å£ å¨æå¡æä¾æ¹å®ç°æ¥å£ ç¨ Spring éç½®å£°ææ´é²æå¡ å è½½ Spring éç½® æå¡æ¶è´¹è éè¿ Spring éç½®å¼ç¨è¿ç¨æå¡ å è½½ Spring éç½®ï¼å¹¶è°ç¨è¿ç¨æå¡ FAQ èµæ",content:'# Spring éæ Dubbo\n\n\n# ZooKeeper\n\nZooKeeper å¯ä»¥ä½ä¸º Dubbo çæ³¨åä¸­å¿ã\n\nDubbo æªå¯¹ Zookeeper æå¡å¨ç«¯åä»»ä½ä¾µå¥ä¿®æ¹ï¼åªéå®è£åçç Zookeeper æå¡å¨å³å¯ï¼æææ³¨åä¸­å¿é»è¾ééé½å¨è°ç¨ Zookeeper å®¢æ·ç«¯æ¶å®æã\n\nå®è£\n\nå¨ ZooKeeper åå¸ä¸­å¿ éæ©éè¦ççæ¬ï¼ä¸è½½åè§£åå°æ¬å°ã\n\néç½®\n\nvi conf/zoo.cfg\n\n\n\nå¦æä¸éè¦éç¾¤ï¼zoo.cfg çåå®¹å¦ä¸ 2ï¼\n\ntickTime=2000\ninitLimit=10\nsyncLimit=5\ndataDir=/home/dubbo/zookeeper-3.3.3/data\nclientPort=2181\n\n\nå¦æéè¦éç¾¤ï¼zoo.cfg çåå®¹å¦ä¸ 3ï¼\n\ntickTime=2000\ninitLimit=10\nsyncLimit=5\ndataDir=/home/dubbo/zookeeper-3.3.3/data\nclientPort=2181\nserver.1=10.20.153.10:2555:3555\nserver.2=10.20.153.11:2555:3555\n\n\n\nå¹¶å¨ data ç®å½ 4 ä¸æ¾ç½® myid æä»¶ï¼\n\nmkdir data\nvi myid\n\n\n\nmyid ææèªå·±ç idï¼å¯¹åºä¸é¢ zoo.cfg ä¸­ server. åçæ°å­ï¼ç¬¬ä¸å°çåå®¹ä¸º 1ï¼ç¬¬äºå°çåå®¹ä¸º 2ï¼åå®¹å¦ä¸ï¼\n\n1\n\n\n\nå¯å¨\n\nLinux ä¸æ§è¡ bin/zkServer.sh ï¼Windows bin/zkServer.cmd å¯å¨ ZooKeeper ã\n\nå½ä»¤è¡\n\ntelnet 127.0.0.1 2181\ndump\n\n\næè:\n\necho dump | nc 127.0.0.1 2181\n\n\nç¨æ³:\n\ndubbo.registry.address=zookeeper://10.20.153.10:2181?backup=10.20.153.11:2181\n\n\n\næè:\n\n<dubbo:registry protocol="zookeeper" address="10.20.153.10:2181,10.20.153.11:2181" />\n\n\n\n>  1. Zookeeper æ¯ Apache Hadoop çå­é¡¹ç®ï¼å¼ºåº¦ç¸å¯¹è¾å¥½ï¼å»ºè®®çäº§ç¯å¢ä½¿ç¨è¯¥æ³¨åä¸­å¿\n>  2. å¶ä¸­ data ç®å½éæ¹æä½ çå®è¾åºç®å½\n>  3. å¶ä¸­ data ç®å½å server å°åéæ¹æä½ çå®é¨ç½²æºå¨çä¿¡æ¯\n>  4. ä¸é¢ zoo.cfg ä¸­ç dataDir\n>  5. http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html\n\n\n# Dubbo\n\nDubbo éç¨å¨ Spring éç½®æ¹å¼ï¼éæåæ¥å¥åºç¨ï¼å¯¹åºç¨æ²¡æä»»ä½ API ä¾µå¥ï¼åªéç¨ Spring å è½½ Dubbo çéç½®å³å¯ï¼Dubbo åºäº Spring ç Schema æ©å±è¿è¡å è½½ã\n\nå¦æä¸æ³ä½¿ç¨ Spring éç½®ï¼å¯ä»¥éè¿ API çæ¹å¼ è¿è¡è°ç¨ã\n\n\n# æå¡æä¾è\n\nå®æ´å®è£æ­¥éª¤ï¼è¯·åè§ï¼ç¤ºä¾æä¾èå®è£\n\n\n# å®ä¹æå¡æ¥å£\n\nDemoService.java 1ï¼\n\npackage com.alibaba.dubbo.demo;\n\npublic interface DemoService {\n    String sayHello(String name);\n}\n\n\n\n# å¨æå¡æä¾æ¹å®ç°æ¥å£\n\nDemoServiceImpl.java 2ï¼\n\npackage com.alibaba.dubbo.demo.provider;\n\nimport com.alibaba.dubbo.demo.DemoService;\n\npublic class DemoServiceImpl implements DemoService {\n    public String sayHello(String name) {\n        return "Hello " + name;\n    }\n}\n\n\n\n# ç¨ Spring éç½®å£°ææ´é²æå¡\n\nprovider.xmlï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd">\n\n    \x3c!-- æä¾æ¹åºç¨ä¿¡æ¯ï¼ç¨äºè®¡ç®ä¾èµå³ç³» --\x3e\n    <dubbo:application name="hello-world-app"  />\n\n    \x3c!-- ä½¿ç¨multicastå¹¿æ­æ³¨åä¸­å¿æ´é²æå¡å°å --\x3e\n    <dubbo:registry address="multicast://224.5.6.7:1234" />\n\n    \x3c!-- ç¨dubboåè®®å¨20880ç«¯å£æ´é²æå¡ --\x3e\n    <dubbo:protocol name="dubbo" port="20880" />\n\n    \x3c!-- å£°æéè¦æ´é²çæå¡æ¥å£ --\x3e\n    <dubbo:service interface="com.alibaba.dubbo.demo.DemoService" ref="demoService" />\n\n    \x3c!-- åæ¬å°beanä¸æ ·å®ç°æå¡ --\x3e\n    <bean id="demoService" class="com.alibaba.dubbo.demo.provider.DemoServiceImpl" />\n</beans>\n\n\nå¦ææ³¨åä¸­å¿ä½¿ç¨ ZooKeeperï¼å¯ä»¥å° dubbo:registry æ¹ä¸º zookeeper://127.0.0.1:2181\n\n\n# å è½½ Spring éç½®\n\nProvider.javaï¼\n\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Provider {\n    public static void main(String[] args) throws Exception {\n        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"http://10.20.160.198/wiki/display/dubbo/provider.xml"});\n        context.start();\n        System.in.read(); // æä»»æé®éåº\n    }\n}\n\n\n\n# æå¡æ¶è´¹è\n\nå®æ´å®è£æ­¥éª¤ï¼è¯·åè§ï¼ç¤ºä¾æ¶è´¹èå®è£\n\n\n# éè¿ Spring éç½®å¼ç¨è¿ç¨æå¡\n\nconsumer.xmlï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd">\n\n    \x3c!-- æ¶è´¹æ¹åºç¨åï¼ç¨äºè®¡ç®ä¾èµå³ç³»ï¼ä¸æ¯å¹éæ¡ä»¶ï¼ä¸è¦ä¸æä¾æ¹ä¸æ · --\x3e\n    <dubbo:application name="consumer-of-helloworld-app"  />\n\n    \x3c!-- ä½¿ç¨multicastå¹¿æ­æ³¨åä¸­å¿æ´é²åç°æå¡å°å --\x3e\n    <dubbo:registry address="multicast://224.5.6.7:1234" />\n\n    \x3c!-- çæè¿ç¨æå¡ä»£çï¼å¯ä»¥åæ¬å°beanä¸æ ·ä½¿ç¨demoService --\x3e\n    <dubbo:reference id="demoService" interface="com.alibaba.dubbo.demo.DemoService" />\n</beans>\n\n\nå¦ææ³¨åä¸­å¿ä½¿ç¨ ZooKeeperï¼å¯ä»¥å° dubbo:registry æ¹ä¸º zookeeper://127.0.0.1:2181\n\n\n# å è½½ Spring éç½®ï¼å¹¶è°ç¨è¿ç¨æå¡\n\nConsumer.java 3ï¼\n\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport com.alibaba.dubbo.demo.DemoService;\n\npublic class Consumer {\n    public static void main(String[] args) throws Exception {\n        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"http://10.20.160.198/wiki/display/dubbo/consumer.xml"});\n        context.start();\n        DemoService demoService = (DemoService)context.getBean("demoService"); // è·åè¿ç¨æå¡ä»£ç\n        String hello = demoService.sayHello("world"); // æ§è¡è¿ç¨æ¹æ³\n        System.out.println( hello ); // æ¾ç¤ºè°ç¨ç»æ\n    }\n}\n\n\n>  1. è¯¥æ¥å£éåç¬æåï¼å¨æå¡æä¾æ¹åæ¶è´¹æ¹å±äº«\n>  2. å¯¹æå¡æ¶è´¹æ¹éèå®ç°\n>  3. ä¹å¯ä»¥ä½¿ç¨ IoC æ³¨å¥\n\n\n# FAQ\n\nå»ºè®®ä½¿ç¨ dubbo-2.3.3 ä»¥ä¸çæ¬ç zookeeper æ³¨åä¸­å¿å®¢æ·ç«¯ã\n\n\n# èµæ\n\nDubbo\n\nGithub | ç¨æ·æå | å¼åæå | ç®¡çåæå\n\nZooKeeper\n\nå®ç½ | å®æ¹ææ¡£',normalizedContent:'# spring éæ dubbo\n\n\n# zookeeper\n\nzookeeper å¯ä»¥ä½ä¸º dubbo çæ³¨åä¸­å¿ã\n\ndubbo æªå¯¹ zookeeper æå¡å¨ç«¯åä»»ä½ä¾µå¥ä¿®æ¹ï¼åªéå®è£åçç zookeeper æå¡å¨å³å¯ï¼æææ³¨åä¸­å¿é»è¾ééé½å¨è°ç¨ zookeeper å®¢æ·ç«¯æ¶å®æã\n\nå®è£\n\nå¨ zookeeper åå¸ä¸­å¿ éæ©éè¦ççæ¬ï¼ä¸è½½åè§£åå°æ¬å°ã\n\néç½®\n\nvi conf/zoo.cfg\n\n\n\nå¦æä¸éè¦éç¾¤ï¼zoo.cfg çåå®¹å¦ä¸ 2ï¼\n\nticktime=2000\ninitlimit=10\nsynclimit=5\ndatadir=/home/dubbo/zookeeper-3.3.3/data\nclientport=2181\n\n\nå¦æéè¦éç¾¤ï¼zoo.cfg çåå®¹å¦ä¸ 3ï¼\n\nticktime=2000\ninitlimit=10\nsynclimit=5\ndatadir=/home/dubbo/zookeeper-3.3.3/data\nclientport=2181\nserver.1=10.20.153.10:2555:3555\nserver.2=10.20.153.11:2555:3555\n\n\n\nå¹¶å¨ data ç®å½ 4 ä¸æ¾ç½® myid æä»¶ï¼\n\nmkdir data\nvi myid\n\n\n\nmyid ææèªå·±ç idï¼å¯¹åºä¸é¢ zoo.cfg ä¸­ server. åçæ°å­ï¼ç¬¬ä¸å°çåå®¹ä¸º 1ï¼ç¬¬äºå°çåå®¹ä¸º 2ï¼åå®¹å¦ä¸ï¼\n\n1\n\n\n\nå¯å¨\n\nlinux ä¸æ§è¡ bin/zkserver.sh ï¼windows bin/zkserver.cmd å¯å¨ zookeeper ã\n\nå½ä»¤è¡\n\ntelnet 127.0.0.1 2181\ndump\n\n\næè:\n\necho dump | nc 127.0.0.1 2181\n\n\nç¨æ³:\n\ndubbo.registry.address=zookeeper://10.20.153.10:2181?backup=10.20.153.11:2181\n\n\n\næè:\n\n<dubbo:registry protocol="zookeeper" address="10.20.153.10:2181,10.20.153.11:2181" />\n\n\n\n>  1. zookeeper æ¯ apache hadoop çå­é¡¹ç®ï¼å¼ºåº¦ç¸å¯¹è¾å¥½ï¼å»ºè®®çäº§ç¯å¢ä½¿ç¨è¯¥æ³¨åä¸­å¿\n>  2. å¶ä¸­ data ç®å½éæ¹æä½ çå®è¾åºç®å½\n>  3. å¶ä¸­ data ç®å½å server å°åéæ¹æä½ çå®é¨ç½²æºå¨çä¿¡æ¯\n>  4. ä¸é¢ zoo.cfg ä¸­ç datadir\n>  5. http://zookeeper.apache.org/doc/r3.3.3/zookeeperadmin.html\n\n\n# dubbo\n\ndubbo éç¨å¨ spring éç½®æ¹å¼ï¼éæåæ¥å¥åºç¨ï¼å¯¹åºç¨æ²¡æä»»ä½ api ä¾µå¥ï¼åªéç¨ spring å è½½ dubbo çéç½®å³å¯ï¼dubbo åºäº spring ç schema æ©å±è¿è¡å è½½ã\n\nå¦æä¸æ³ä½¿ç¨ spring éç½®ï¼å¯ä»¥éè¿ api çæ¹å¼ è¿è¡è°ç¨ã\n\n\n# æå¡æä¾è\n\nå®æ´å®è£æ­¥éª¤ï¼è¯·åè§ï¼ç¤ºä¾æä¾èå®è£\n\n\n# å®ä¹æå¡æ¥å£\n\ndemoservice.java 1ï¼\n\npackage com.alibaba.dubbo.demo;\n\npublic interface demoservice {\n    string sayhello(string name);\n}\n\n\n\n# å¨æå¡æä¾æ¹å®ç°æ¥å£\n\ndemoserviceimpl.java 2ï¼\n\npackage com.alibaba.dubbo.demo.provider;\n\nimport com.alibaba.dubbo.demo.demoservice;\n\npublic class demoserviceimpl implements demoservice {\n    public string sayhello(string name) {\n        return "hello " + name;\n    }\n}\n\n\n\n# ç¨ spring éç½®å£°ææ´é²æå¡\n\nprovider.xmlï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"\n    xsi:schemalocation="http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd">\n\n    \x3c!-- æä¾æ¹åºç¨ä¿¡æ¯ï¼ç¨äºè®¡ç®ä¾èµå³ç³» --\x3e\n    <dubbo:application name="hello-world-app"  />\n\n    \x3c!-- ä½¿ç¨multicastå¹¿æ­æ³¨åä¸­å¿æ´é²æå¡å°å --\x3e\n    <dubbo:registry address="multicast://224.5.6.7:1234" />\n\n    \x3c!-- ç¨dubboåè®®å¨20880ç«¯å£æ´é²æå¡ --\x3e\n    <dubbo:protocol name="dubbo" port="20880" />\n\n    \x3c!-- å£°æéè¦æ´é²çæå¡æ¥å£ --\x3e\n    <dubbo:service interface="com.alibaba.dubbo.demo.demoservice" ref="demoservice" />\n\n    \x3c!-- åæ¬å°beanä¸æ ·å®ç°æå¡ --\x3e\n    <bean id="demoservice" class="com.alibaba.dubbo.demo.provider.demoserviceimpl" />\n</beans>\n\n\nå¦ææ³¨åä¸­å¿ä½¿ç¨ zookeeperï¼å¯ä»¥å° dubbo:registry æ¹ä¸º zookeeper://127.0.0.1:2181\n\n\n# å è½½ spring éç½®\n\nprovider.javaï¼\n\nimport org.springframework.context.support.classpathxmlapplicationcontext;\n\npublic class provider {\n    public static void main(string[] args) throws exception {\n        classpathxmlapplicationcontext context = new classpathxmlapplicationcontext(new string[] {"http://10.20.160.198/wiki/display/dubbo/provider.xml"});\n        context.start();\n        system.in.read(); // æä»»æé®éåº\n    }\n}\n\n\n\n# æå¡æ¶è´¹è\n\nå®æ´å®è£æ­¥éª¤ï¼è¯·åè§ï¼ç¤ºä¾æ¶è´¹èå®è£\n\n\n# éè¿ spring éç½®å¼ç¨è¿ç¨æå¡\n\nconsumer.xmlï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"\n    xsi:schemalocation="http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd">\n\n    \x3c!-- æ¶è´¹æ¹åºç¨åï¼ç¨äºè®¡ç®ä¾èµå³ç³»ï¼ä¸æ¯å¹éæ¡ä»¶ï¼ä¸è¦ä¸æä¾æ¹ä¸æ · --\x3e\n    <dubbo:application name="consumer-of-helloworld-app"  />\n\n    \x3c!-- ä½¿ç¨multicastå¹¿æ­æ³¨åä¸­å¿æ´é²åç°æå¡å°å --\x3e\n    <dubbo:registry address="multicast://224.5.6.7:1234" />\n\n    \x3c!-- çæè¿ç¨æå¡ä»£çï¼å¯ä»¥åæ¬å°beanä¸æ ·ä½¿ç¨demoservice --\x3e\n    <dubbo:reference id="demoservice" interface="com.alibaba.dubbo.demo.demoservice" />\n</beans>\n\n\nå¦ææ³¨åä¸­å¿ä½¿ç¨ zookeeperï¼å¯ä»¥å° dubbo:registry æ¹ä¸º zookeeper://127.0.0.1:2181\n\n\n# å è½½ spring éç½®ï¼å¹¶è°ç¨è¿ç¨æå¡\n\nconsumer.java 3ï¼\n\nimport org.springframework.context.support.classpathxmlapplicationcontext;\nimport com.alibaba.dubbo.demo.demoservice;\n\npublic class consumer {\n    public static void main(string[] args) throws exception {\n        classpathxmlapplicationcontext context = new classpathxmlapplicationcontext(new string[] {"http://10.20.160.198/wiki/display/dubbo/consumer.xml"});\n        context.start();\n        demoservice demoservice = (demoservice)context.getbean("demoservice"); // è·åè¿ç¨æå¡ä»£ç\n        string hello = demoservice.sayhello("world"); // æ§è¡è¿ç¨æ¹æ³\n        system.out.println( hello ); // æ¾ç¤ºè°ç¨ç»æ\n    }\n}\n\n\n>  1. è¯¥æ¥å£éåç¬æåï¼å¨æå¡æä¾æ¹åæ¶è´¹æ¹å±äº«\n>  2. å¯¹æå¡æ¶è´¹æ¹éèå®ç°\n>  3. ä¹å¯ä»¥ä½¿ç¨ ioc æ³¨å¥\n\n\n# faq\n\nå»ºè®®ä½¿ç¨ dubbo-2.3.3 ä»¥ä¸çæ¬ç zookeeper æ³¨åä¸­å¿å®¢æ·ç«¯ã\n\n\n# èµæ\n\ndubbo\n\ngithub | ç¨æ·æå | å¼åæå | ç®¡çåæå\n\nzookeeper\n\nå®ç½ | å®æ¹ææ¡£',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹å®å¨å¿«éå¥é¨",frontmatter:{title:"SpringBoot ä¹å®å¨å¿«éå¥é¨",date:"2021-05-13T18:21:56.000Z",order:1,categories:["Java","æ¡æ¶","Spring","Springå®å¨"],tags:["Java","æ¡æ¶","Spring","SpringBoot","å®å¨"],permalink:"/pages/568352/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/10.Spring%E5%AE%89%E5%85%A8/01.SpringBoot%E4%B9%8B%E5%AE%89%E5%85%A8%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/10.Springå®å¨/01.SpringBootä¹å®å¨å¿«éå¥é¨.md",key:"v-a6563758",path:"/pages/568352/",headers:[{level:2,title:"QuickStart",slug:"quickstart",normalizedTitle:"quickstart",charIndex:25}],headersStr:"QuickStart",content:"# SpringBoot ä¹å®å¨å¿«éå¥é¨\n\n\n# QuickStart\n\nï¼1ï¼æ·»å ä¾èµ\n\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-security</artifactId>\n\t\t</dependency>\n\n\nï¼2ï¼æ·»å éç½®\n\nspring.security.user.name = root\nspring.security.user.password = root\nspring.security.user.roles = USER\n\n\nï¼3ï¼å¯å¨åºç¨åï¼è®¿é®ä»»æè·¯å¾ï¼é½ä¼åºç°ä»¥ä¸é¡µé¢ï¼æç¤ºä½ åæ§è¡ç»å½æä½ãè¾å¥éç½®çç¨æ·åãå¯ç ï¼root/rootï¼å³å¯è®¿é®åºç¨é¡µé¢ã\n\n",normalizedContent:"# springboot ä¹å®å¨å¿«éå¥é¨\n\n\n# quickstart\n\nï¼1ï¼æ·»å ä¾èµ\n\n\t\t<dependency>\n\t\t\t<groupid>org.springframework.boot</groupid>\n\t\t\t<artifactid>spring-boot-starter-web</artifactid>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupid>org.springframework.boot</groupid>\n\t\t\t<artifactid>spring-boot-starter-security</artifactid>\n\t\t</dependency>\n\n\nï¼2ï¼æ·»å éç½®\n\nspring.security.user.name = root\nspring.security.user.password = root\nspring.security.user.roles = user\n\n\nï¼3ï¼å¯å¨åºç¨åï¼è®¿é®ä»»æè·¯å¾ï¼é½ä¼åºç°ä»¥ä¸é¡µé¢ï¼æç¤ºä½ åæ§è¡ç»å½æä½ãè¾å¥éç½®çç¨æ·åãå¯ç ï¼root/rootï¼å³å¯è®¿é®åºç¨é¡µé¢ã\n\n",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring 4 åçº§è¸©é·æå",frontmatter:{title:"Spring 4 åçº§è¸©é·æå",date:"2017-12-15T15:10:32.000Z",order:1,categories:["Java","æ¡æ¶","Spring","Springå¶ä»"],tags:["Java","æ¡æ¶","Spring"],permalink:"/pages/752c6a/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/99.Spring%E5%85%B6%E4%BB%96/01.Spring4%E5%8D%87%E7%BA%A7.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/01.Spring4åçº§.md",key:"v-2541fab0",path:"/pages/752c6a/",headers:[{level:2,title:"åè¨",slug:"åè¨",normalizedTitle:"åè¨",charIndex:22},{level:2,title:"ä¸ºä»ä¹åçº§ spring4",slug:"ä¸ºä»ä¹åçº§-spring4",normalizedTitle:"ä¸ºä»ä¹åçº§ spring4",charIndex:186},{level:2,title:"spring 4 éè¦æ°ç¹æ§",slug:"spring-4-éè¦æ°ç¹æ§",normalizedTitle:"spring 4 éè¦æ°ç¹æ§",charIndex:471},{level:2,title:"åçº§ spring 4 æ­¥éª¤",slug:"åçº§-spring-4-æ­¥éª¤",normalizedTitle:"åçº§ spring 4 æ­¥éª¤",charIndex:873},{level:3,title:"ä¿®æ¹ spring çæ¬",slug:"ä¿®æ¹-spring-çæ¬",normalizedTitle:"ä¿®æ¹ spring çæ¬",charIndex:1090},{level:3,title:"ä¿®æ¹ spring xml æä»¶ç xsd",slug:"ä¿®æ¹-spring-xml-æä»¶ç-xsd",normalizedTitle:"ä¿®æ¹ spring xml æä»¶ç xsd",charIndex:1435},{level:3,title:"ä¿®æ¹ spring xml æä»¶",slug:"ä¿®æ¹-spring-xml-æä»¶",normalizedTitle:"ä¿®æ¹ spring xml æä»¶",charIndex:1435},{level:4,title:"ref local",slug:"ref-local",normalizedTitle:"ref local",charIndex:3727},{level:3,title:"å å¥ spring support",slug:"å å¥-spring-support",normalizedTitle:"å å¥ spring support",charIndex:4390},{level:3,title:"æ´æ¢ spring-mvc jackson",slug:"æ´æ¢-spring-mvc-jackson",normalizedTitle:"æ´æ¢ spring-mvc jackson",charIndex:4653},{level:3,title:"è§£å³ ibatis å¼å®¹é®é¢",slug:"è§£å³-ibatis-å¼å®¹é®é¢",normalizedTitle:"è§£å³ ibatis å¼å®¹é®é¢",charIndex:5669},{level:3,title:"åçº§ Dubbo",slug:"åçº§-dubbo",normalizedTitle:"åçº§ dubbo",charIndex:6055},{level:3,title:"åçº§ Jedis",slug:"åçº§-jedis",normalizedTitle:"åçº§ jedis",charIndex:6767},{level:2,title:"èµæ",slug:"èµæ",normalizedTitle:"èµæ",charIndex:8114}],headersStr:"åè¨ ä¸ºä»ä¹åçº§ spring4 spring 4 éè¦æ°ç¹æ§ åçº§ spring 4 æ­¥éª¤ ä¿®æ¹ spring çæ¬ ä¿®æ¹ spring xml æä»¶ç xsd ä¿®æ¹ spring xml æä»¶ ref local å å¥ spring support æ´æ¢ spring-mvc jackson è§£å³ ibatis å¼å®¹é®é¢ åçº§ Dubbo åçº§ Jedis èµæ",content:'# Spring 4 åçº§è¸©é·æå\n\n\n# åè¨\n\næè¿ï¼ä¸ç´å¨ä¸ºå¬å¸èé¡¹ç®åæ ¸å¿åºåçº§å·¥ä½ãæ¬æ¥åªæ¯æ³åçº§ä¸ä¸ JDK8 ï¼å´å ä¸ºå¼å®¹æ§é®é¢èä¸å¾ä¸åçº§ä¸äºå¶ä»çåºï¼èå¶ä»åºæ¬èº«ä¾èµçä¸äºåºå¯è½ä¹è¦åæ­¥åçº§ãè¿æ¯ä¸ç³»åè¿éé®é¢ï¼ä½ å¾é¾ä¸ä¸è¯å«ï¼å¾å¾åªæå¨ç¼è¯æ¶ãè¿è¡æ¶æè½åç°é®é¢ã\n\næ»ä¹ï¼è¿æ¯ä¸ªè´¹å²çæ´»åã\n\næ¬æå°ç»ä¸ä¸åçº§ Spring4 çè¿éé®é¢ã\n\n\n# ä¸ºä»ä¹åçº§ spring4\n\nåçº§ Spring4 çåå æ¯ï¼Spring 4 ä»¥åççæ¬ä¸å¼å®¹ JDK8ãå½ä½ çé¡¹ç®åæ¶ä½¿ç¨ Spring3 å JDK8ï¼å¦æä»£ç ä¸­æä½¿ç¨ JDK8 å­èç æ Lambada è¡¨è¾¾å¼ï¼é£ä¹ä¼åºé®é¢ã\n\nä¹è®¸ä½ ä¼é®ï¼ä¸ºä»ä¹ä¸ä½¿ç¨ææ°ç Spring 5 å¢ï¼å ä¸ºä½ä¸ºä¼ä¸è½¯ä»¶ï¼ä¸è¬æ´å¾åä½¿ç¨ç¨³å®ççæ¬ï¼bug å°ï¼ï¼èä¸æ¯ææ°ççæ¬ï¼å°¤å¶æ¯ä¸äºæ ¸å¿åºã\n\næ´å¤ç»èå¯ä»¥åèï¼\n\nhttps://spring.io/blog/2013/05/21/spring-framework-4-0-m1-3-2-3-available/\n\n\n# spring 4 éè¦æ°ç¹æ§\n\nSpring 4 ç¸æ¯ Spring 3ï¼å¼å¥è®¸å¤æ°ç¹æ§ï¼è¿éåä¸¾å æ¡è¾ä¸ºéè¦çï¼\n\n 1. æ¯æ JDK8 ï¼è¿ä¸ªæ¯æä¸»è¦çï¼ã\n 2. Groovy Bean Definition DSL é£æ ¼éç½®ã\n 3. æ¯æ WebSocketãSockJSãSTOMP æ¶æ¯\n 4. ç§»é¤ Deprecated ååæ¹æ³\n 5. ä¸äºåè½å å¼ºï¼å¦ï¼æ ¸å¿å®¹å¨ãWebãTest ç­ç­ï¼ä¸ä¸ä¸åä¸¾ã\n\næ´å¤ Spring 4 æ°ç¹æ§å¯ä»¥åèï¼\n\nhttps://docs.spring.io/spring/docs/4.3.14.BUILD-SNAPSHOT/spring-framework-reference/htmlsingle/#spring-whats-new\n\nhttp://jinnianshilongnian.iteye.com/blog/1995111\n\n\n# åçº§ spring 4 æ­¥éª¤\n\näºè§£äºåé¢åå®¹ï¼æä»¬ç¥éäºåçº§ Spring 4 å¸¦æ¥çå¥½å¤ãç°å¨å¼å§çåçæªçåçº§äºã\n\nä¸è¦ä»¥ä¸ºåçº§ä¸ä¸ Spring 4ï¼ä»ä»æ¯æ¹ä¸ä¸çæ¬å·ï¼é£ä¹ç®åï¼ç»èå¤å¤çå¢ã\n\nä¸é¢ï¼ç»åæå¨å¬å¸é¡¹ç®åçº§ Spring4 æ¶éå°çä¸ç³»ååï¼å¸æè½å¸®å©åä½å°èµ°å¼¯è·¯ã\n\n> æ³¨\n> \n> ä¸æåå®¹åºäºåè®¾ä½ çé¡¹ç®æ¯ç¨ maven ç®¡çè¿ä¸åæãå¦æä¸æ»¡è¶³è¿ä¸åæï¼é£ä¹è¿ç¯æç« å¯¹ä½ æ²¡ä»ä¹å¤ªå¤§å¸®å©ã\n\n\n# ä¿®æ¹ spring çæ¬\n\nç¬¬ä¸æ­¥ï¼å½ç¶æ¯ä¿®æ¹ pom.xml ä¸­ç spring çæ¬ã\n\n3.x.x.RELEASE > 4.x.x.RELEASE\n\nå®ä¾ï¼åçº§ spring-core\n\nå¶å® spring åºçåçº§ä¹å¦æ­¤ï¼\n\n<properties>\n  <spring.version>4.3.13.RELEASE</spring.version>\n</properties>\n<dependency>\n  <groupId>org.springframework</groupId>\n  <artifactId>spring-core</artifactId>\n  <version>${spring.version}</version>\n</dependency>\n\n\n\n# ä¿®æ¹ spring xml æä»¶ç xsd\n\nç¨è¿ spring çé½ç¥éï¼spring éå¸¸ä¾èµäºå¤§éç xml éç½®ã\n\nspring ç xml è§£æå¨å¨è§£æ xml æ¶ï¼éè¦è¯»å xml schemaï¼schema å®ä¹äº xml çå½åç©ºé´ãå®çå¥½å¤å¨äºå¯ä»¥é¿åå½åå²çªï¼æç¹å Java ä¸­ç packageã\n\nå®ä¾ï¼ä¸ä¸ª spring xml ç schema\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util" xmlns:context="http://www.springframework.org/schema/context"\n\txmlns:mvc="http://www.springframework.org/schema/mvc"\n\txsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n\t\thttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n\t\thttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd\n\t\thttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">\n\n\n> è¯´æ\n> \n>  * xmlns="http://www.springframework.org/schema/beans" å£°æ xml æä»¶é»è®¤çå½åç©ºé´ï¼è¡¨ç¤ºæªä½¿ç¨å¶ä»å½åç©ºé´çæææ ç­¾çé»è®¤å½åç©ºé´ã\n> \n>  * xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" å£°æ XML Schema å®ä¾ï¼å£°æåå°±å¯ä»¥ä½¿ç¨ schemaLocation å±æ§äºã\n> \n>  * xmlns:mvc="http://www.springframework.org/schema/mvc" å£°æåç¼ä¸º mvc çå½åç©ºé´ï¼åé¢ç URL ç¨äºæ ç¤ºå½åç©ºé´çå°åä¸ä¼è¢«è§£æå¨ç¨äºæ¥æ¾ä¿¡æ¯ãå¶æä¸çä½ç¨æ¯èµäºå½åç©ºé´ä¸ä¸ªæä¸çåç§°ãå½å½åç©ºé´è¢«å®ä¹å¨åç´ çå¼å§æ ç­¾ä¸­æ¶ï¼ææå¸¦æç¸ååç¼çå­åç´ é½ä¼ä¸åä¸ä¸ªå½åç©ºé´ç¸å³èã å¶å®çç±»ä¼¼ xmlns:context ãxmlns:jdbc ç­ç­åæ ·å¦æ­¤ã\n> \n>  * xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n>    ..."\n>    \n>    \n>    è¿ä¸ªä»å½åå¯ä»¥çåºä¸ªå¤§æ¦ï¼æå® schema ä½ç½®è¿ä¸ªå±æ§å¿é¡»ç»åå½åç©ºé´ä½¿ç¨ãè¿ä¸ªå±æ§æä¸¤ä¸ªå¼ï¼ç¬¬ä¸ä¸ªå¼è¡¨ç¤ºéè¦ä½¿ç¨çå½åç©ºé´ãç¬¬äºä¸ªå¼è¡¨ç¤ºä¾å½åç©ºé´ä½¿ç¨ç xml schema çä½ç½®ã\n\nä¸é¢ç¤ºä¾ä¸­ç xsd çæ¬æ¯ 3.1.xsd ï¼è¡¨ç¤º spring ç xml è§£æå¨ä¼å°å¶è§ä¸º 3.1 çæ¬ç xml æä»¶æ¥å¤çã\n\nç°å¨ï¼æä»¬ä½¿ç¨äº Spring 4ï¼3.1.xsd çæ¬æ¾ç¶å°±ä¸æ­£ç¡®äºï¼æä»¬å¯ä»¥æ ¹æ®èªå·±å¼å¥ç Spring 4 çå­çæ¬å·å°å¶æ¹ä¸º 4.x.xsd ã\n\nä½æ¯ï¼è¿æä¸ç§æ´å¥½çåæ³ï¼æè¿ä¸ªæå® xsd çæ¬çå³é®å­å¹²æï¼ç±»ä¼¼è¿æ ·ï¼http://www.springframework.org/schema/tx/spring-tx.xsd ã\n\nè¿ä¹åçåå å¦ä¸ï¼\n\n * Spring é»è®¤å¨å¯å¨æ¶è¦å è½½ xsd æä»¶æ¥éªè¯ xml æä»¶ã\n * å¦ææ²¡ææä¾ schemaLocationï¼é£ä¹ spring ç xml è§£æå¨ä¼ä» namespace ç uri éå è½½ xsd æä»¶ã\n * schemaLocation æä¾äºä¸ä¸ª xml namespace å°å¯¹åºç xsd æä»¶çä¸ä¸ªæ å°ã\n * å¦æä¸æå® spring xsd ççæ¬å·ï¼spring åçå°±æ¯å½åæ¬å° jar éç xsd æä»¶ï¼åå°äºåç§é£é©ï¼æ¯å¦ xsd ä¸å®é spring jar çæ¬ä¸ä¸è´ï¼ã\n\næ´å¤è¯¦ç»åå®¹å¯ä»¥åèè¿ç¯æç« ï¼ä¸ºä»ä¹å¨ Spring çéç½®éï¼æå¥½ä¸è¦éç½® xsd æä»¶ççæ¬å·\n\n\n# ä¿®æ¹ spring xml æä»¶\n\nspring 4 å¯¹ xml åäºä¸äºæ¹å¨ãè¿éè¯´ä¸ä¸ªæå¸¸ç¨çæ¹å¨ï¼\n\n# ref local\n\nspring ä¸åæ¯æ ref åç´ ç local å±æ§ï¼å¦æä½ çé¡¹ç®ä¸­ä½¿ç¨äºï¼éè¦æ¹ä¸º beanã\n\nshi\n\nspring 4 ä»¥åï¼\n\n<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n  <property name="dataSource">\n    <ref local="dataSource" />\n  </property>\n</bean>\n\n\nspring 4 ä»¥åï¼\n\n<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n  <property name="dataSource">\n    <ref bean="dataSource" />\n  </property>\n</bean>\n\n\nå¦æä¸æ¹å¯å¨ä¼æ¥éï¼\n\nCaused by: org.xml.sax.SAXParseException: cvc-complex-type.3.2.2: Attribute \'local\' is not allowed to appear in element \'ref\'.\n\n\nå½ç¶ï¼å¯è½è¿æä¸äºå¶ä»éç½®æ¹å¨ï¼è¿ä¸ªåªè½è¯´åµæ¥å°æ¡æ°´æ¥åæ©ï¼éå°äºåå»æ¥å®æ¹ææ¡£å§ã\n\n\n# å å¥ spring support\n\nspring 3 ä¸­å¾å¤çæ©å±åå®¹ä¸éè¦å¼å¥ support ãä½æ¯ spring 4 ä¸­åç¦»çæ´å½»åºäºï¼å¦æä¸åç¦»ï¼ä¼æå¾å¤ClassNotFound ã\n\n<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-context-support</artifactId>\n    <version>4.2.3.RELEASE</version>\n</dependency>\n\n\n\n# æ´æ¢ spring-mvc jackson\n\nspring mvc ä¸­å¦æè¿åç»æä¸º json éè¦ä¾èµ jackson ç jar åï¼ä½æ¯ä»åçº§å°äº 2, ä»¥åæ¯ codehaus.jacksonï¼ç°å¨æ¢æäº fasterxml.jackson\n\n<dependency>\n    <groupId>com.fasterxml.jackson.core</groupId>\n    <artifactId>jackson-core</artifactId>\n    <version>2.7.0</version>\n</dependency>\n<dependency>\n    <groupId>com.fasterxml.jackson.core</groupId>\n    <artifactId>jackson-databind</artifactId>\n    <version>2.7.0</version>\n</dependency>\n\n\nåæ¶ä¿®æ¹ spring mvc çéç½®æä»¶ï¼\n\n<bean\n\tclass="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">\n\t<property name="messageConverters">\n\t\t<list>\n\t\t\t <ref bean="stringHttpMessageConverter" />\n\t\t\t<bean\n\t\t\t\tclass="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">\n\t\t\t</bean>\n\t\t</list>\n\t</property>\n</bean>\n\n<bean id="stringHttpMessageConverter"\n\tclass="org.springframework.http.converter.StringHttpMessageConverter">\n\t<property name="supportedMediaTypes">\n\t\t<list>\n\t\t\t<value>text/plain;charset=UTF-8</value>\n\t\t</list>\n\t</property>\n</bean>\n\n\n\n# è§£å³ ibatis å¼å®¹é®é¢\n\né®é¢\n\nå¦æä½ çé¡¹ç®ä¸­ä½¿ç¨äº ibatis (mybatis çåèº«)è¿ä¸ª orm æ¡æ¶ï¼å½ spring3 åçº§ spring4 åï¼ä¼åºç°å¼å®¹æ§é®é¢ï¼ç¼è¯é½ä¸è½éè¿ã\n\nè¿æ¯å ä¸º Spring4 å®æ¹å·²ç»ä¸åæ¯æ ibatisã\n\nè§£å³æ¹æ¡\n\næ·»å å¼å®¹æ§ jar å\n\n<dependency>\n    <groupId>org.mybatis</groupId>\n    <artifactId>mybatis-2-spring</artifactId>\n    <version>1.0.1</version>\n</dependency>\n\n\næ´å¤åå®¹å¯åèï¼https://stackoverflow.com/questions/32353286/no-support-for-ibatis-in-spring4-2-0\n\n\n# åçº§ Dubbo\n\næä»¬çé¡¹ç®ä¸­ä½¿ç¨äº soa æ¡æ¶ Dubbo ãç±äº Dubbo æ¯èçæ¬çï¼å·ä½æ¥è¯´æ¯ï¼2013 å¹´ç 2.4.10ï¼ï¼èèçæ¬ä¸­ä½¿ç¨ç spirng çæ¬ä¸º 2.xï¼æå¼å®¹æ§é®é¢ã\n\nDubbo é¡¹ç®ä»ä»å¹´å¼å§æ¢å¤ç»´æ¤äºï¼é¦åæä¸äºè½åçåºåçº§å°è¾æ°çæ¬ï¼æ¯å¦ jdk8ï¼spring4 ç­ï¼å¹¶ä¿®å¤äºä¸äº bugãæä»¥ï¼æä»¬å¯ä»¥éè¿åçº§ä¸ä¸ Dubbo çæ¬æ¥è§£å³é®é¢ã\n\n<dependency>\n  <groupId>com.alibaba</groupId>\n  <artifactId>dubbo</artifactId>\n  <version>2.5.8</version>\n  <exclusions>\n    <exclusion>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-context</artifactId>\n    </exclusion>\n    <exclusion>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-web</artifactId>\n    </exclusion>\n    <exclusion>\n      <groupId>org.javassist</groupId>\n      <artifactId>javassist</artifactId>\n    </exclusion>\n  </exclusions>\n</dependency>\n\n\n\n# åçº§ Jedis\n\nåçº§ Dubbo ä¸ºå½åææ°ç 2.5.8 çæ¬åï¼è¿è¡æ¶æ¥éï¼\n\n * JedisPoolConfig éç½®éè¯¯\n\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.pool2.impl.GenericObjectPoolConfig\n\n\nç±äºé¡¹ç®ä¸­ä½¿ç¨äº redisï¼çæ¬ä¸º 2.0.0 ï¼è¿ä¸ªé®é¢æ¯ç±äº jedis éè¦åçº§ï¼\n\n<dependency>\n  <groupId>redis.clients</groupId>\n  <artifactId>jedis</artifactId>\n  <version>2.9.0</version>\n</dependency>\n\n\njedis 2.4.1 ä»¥ä¸çæ¬ç JedisPoolConfig å·²ç»æ²¡æäºmaxActive å maxWait å±æ§ã\n\nä¿®æ¹æ¹æ³å¦ä¸ï¼\n\nmaxActive > maxTotal\n\nmaxWait > maxWaitMillis\n\n<bean id="jedisPoolConfig" class="redis.clients.jedis.JedisPoolConfig">\n  <property name="maxTotal" value="200" />\n  <property name="maxIdle" value="10" />\n  <property name="maxWaitMillis" value="1000" />\n  <property name="testOnBorrow" value="true" />\n</bean>\n\n\nJedisPool éç½®éè¯¯\n\nInvalidURIException: Cannot open Redis connection due invalid URI\n\n\nåæ¥çéç½®å¦ä¸ï¼\n\n<bean id="jedisPool" class="redis.clients.jedis.JedisPool" destroy-method="destroy" depends-on="jedisPoolConfig">\n  <constructor-arg ref="jedisPoolConfig" />\n  <constructor-arg type="java.lang.String" value="${redis.host}" />\n  <constructor-arg type="int" value="${redis.port}" />\n</bean>\n\n\næ¥çæºç å¯ä»¥åç°ï¼åå§å JedisPool æ¶æªæå®ç»ææ¹æ³åæ°çç±»åï¼å¯¼è´ host å­ç¬¦ä¸²å¼è¢«è§ä¸º URI ç±»åï¼å½ç¶ç±»åä¸å¹éã\n\nè§£å³æ¹æ³æ¯ä¿®æ¹ä¸é¢ç host éç½®ï¼ä¸ºï¼<constructor-arg type="java.lang.String" value="${redis.host}" />\n\n----------------------------------------\n\nè³æ­¤ï¼spring 4 åçº§ç»æãåé¢å¦æéå°å¶ä»åçº§é®é¢åè¡¥åã\n\n\n# èµæ\n\n * https://spring.io/blog/2013/05/21/spring-framework-4-0-m1-3-2-3-available/\n * https://docs.spring.io/spring/docs/4.3.14.BUILD-SNAPSHOT/spring-framework-reference/htmlsingle/#spring-whats-new\n * Spring 3.x åçº§å° Spring 4.x æ³¨æäºé¡¹åæ­¥éª¤ï¼éè¯¯è§£å³æ¹æ³\n * http://jinnianshilongnian.iteye.com/blog/1995111\n * ä¸ºä»ä¹å¨ Spring çéç½®éï¼æå¥½ä¸è¦éç½® xsd æä»¶ççæ¬å·\n * https://stackoverflow.com/questions/32353286/no-support-for-ibatis-in-spring4-2-0',normalizedContent:'# spring 4 åçº§è¸©é·æå\n\n\n# åè¨\n\næè¿ï¼ä¸ç´å¨ä¸ºå¬å¸èé¡¹ç®åæ ¸å¿åºåçº§å·¥ä½ãæ¬æ¥åªæ¯æ³åçº§ä¸ä¸ jdk8 ï¼å´å ä¸ºå¼å®¹æ§é®é¢èä¸å¾ä¸åçº§ä¸äºå¶ä»çåºï¼èå¶ä»åºæ¬èº«ä¾èµçä¸äºåºå¯è½ä¹è¦åæ­¥åçº§ãè¿æ¯ä¸ç³»åè¿éé®é¢ï¼ä½ å¾é¾ä¸ä¸è¯å«ï¼å¾å¾åªæå¨ç¼è¯æ¶ãè¿è¡æ¶æè½åç°é®é¢ã\n\næ»ä¹ï¼è¿æ¯ä¸ªè´¹å²çæ´»åã\n\næ¬æå°ç»ä¸ä¸åçº§ spring4 çè¿éé®é¢ã\n\n\n# ä¸ºä»ä¹åçº§ spring4\n\nåçº§ spring4 çåå æ¯ï¼spring 4 ä»¥åççæ¬ä¸å¼å®¹ jdk8ãå½ä½ çé¡¹ç®åæ¶ä½¿ç¨ spring3 å jdk8ï¼å¦æä»£ç ä¸­æä½¿ç¨ jdk8 å­èç æ lambada è¡¨è¾¾å¼ï¼é£ä¹ä¼åºé®é¢ã\n\nä¹è®¸ä½ ä¼é®ï¼ä¸ºä»ä¹ä¸ä½¿ç¨ææ°ç spring 5 å¢ï¼å ä¸ºä½ä¸ºä¼ä¸è½¯ä»¶ï¼ä¸è¬æ´å¾åä½¿ç¨ç¨³å®ççæ¬ï¼bug å°ï¼ï¼èä¸æ¯ææ°ççæ¬ï¼å°¤å¶æ¯ä¸äºæ ¸å¿åºã\n\næ´å¤ç»èå¯ä»¥åèï¼\n\nhttps://spring.io/blog/2013/05/21/spring-framework-4-0-m1-3-2-3-available/\n\n\n# spring 4 éè¦æ°ç¹æ§\n\nspring 4 ç¸æ¯ spring 3ï¼å¼å¥è®¸å¤æ°ç¹æ§ï¼è¿éåä¸¾å æ¡è¾ä¸ºéè¦çï¼\n\n 1. æ¯æ jdk8 ï¼è¿ä¸ªæ¯æä¸»è¦çï¼ã\n 2. groovy bean definition dsl é£æ ¼éç½®ã\n 3. æ¯æ websocketãsockjsãstomp æ¶æ¯\n 4. ç§»é¤ deprecated ååæ¹æ³\n 5. ä¸äºåè½å å¼ºï¼å¦ï¼æ ¸å¿å®¹å¨ãwebãtest ç­ç­ï¼ä¸ä¸ä¸åä¸¾ã\n\næ´å¤ spring 4 æ°ç¹æ§å¯ä»¥åèï¼\n\nhttps://docs.spring.io/spring/docs/4.3.14.build-snapshot/spring-framework-reference/htmlsingle/#spring-whats-new\n\nhttp://jinnianshilongnian.iteye.com/blog/1995111\n\n\n# åçº§ spring 4 æ­¥éª¤\n\näºè§£äºåé¢åå®¹ï¼æä»¬ç¥éäºåçº§ spring 4 å¸¦æ¥çå¥½å¤ãç°å¨å¼å§çåçæªçåçº§äºã\n\nä¸è¦ä»¥ä¸ºåçº§ä¸ä¸ spring 4ï¼ä»ä»æ¯æ¹ä¸ä¸çæ¬å·ï¼é£ä¹ç®åï¼ç»èå¤å¤çå¢ã\n\nä¸é¢ï¼ç»åæå¨å¬å¸é¡¹ç®åçº§ spring4 æ¶éå°çä¸ç³»ååï¼å¸æè½å¸®å©åä½å°èµ°å¼¯è·¯ã\n\n> æ³¨\n> \n> ä¸æåå®¹åºäºåè®¾ä½ çé¡¹ç®æ¯ç¨ maven ç®¡çè¿ä¸åæãå¦æä¸æ»¡è¶³è¿ä¸åæï¼é£ä¹è¿ç¯æç« å¯¹ä½ æ²¡ä»ä¹å¤ªå¤§å¸®å©ã\n\n\n# ä¿®æ¹ spring çæ¬\n\nç¬¬ä¸æ­¥ï¼å½ç¶æ¯ä¿®æ¹ pom.xml ä¸­ç spring çæ¬ã\n\n3.x.x.release > 4.x.x.release\n\nå®ä¾ï¼åçº§ spring-core\n\nå¶å® spring åºçåçº§ä¹å¦æ­¤ï¼\n\n<properties>\n  <spring.version>4.3.13.release</spring.version>\n</properties>\n<dependency>\n  <groupid>org.springframework</groupid>\n  <artifactid>spring-core</artifactid>\n  <version>${spring.version}</version>\n</dependency>\n\n\n\n# ä¿®æ¹ spring xml æä»¶ç xsd\n\nç¨è¿ spring çé½ç¥éï¼spring éå¸¸ä¾èµäºå¤§éç xml éç½®ã\n\nspring ç xml è§£æå¨å¨è§£æ xml æ¶ï¼éè¦è¯»å xml schemaï¼schema å®ä¹äº xml çå½åç©ºé´ãå®çå¥½å¤å¨äºå¯ä»¥é¿åå½åå²çªï¼æç¹å java ä¸­ç packageã\n\nå®ä¾ï¼ä¸ä¸ª spring xml ç schema\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/xmlschema-instance" xmlns:util="http://www.springframework.org/schema/util" xmlns:context="http://www.springframework.org/schema/context"\n\txmlns:mvc="http://www.springframework.org/schema/mvc"\n\txsi:schemalocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n\t\thttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\n\t\thttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd\n\t\thttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">\n\n\n> è¯´æ\n> \n>  * xmlns="http://www.springframework.org/schema/beans" å£°æ xml æä»¶é»è®¤çå½åç©ºé´ï¼è¡¨ç¤ºæªä½¿ç¨å¶ä»å½åç©ºé´çæææ ç­¾çé»è®¤å½åç©ºé´ã\n> \n>  * xmlns:xsi="http://www.w3.org/2001/xmlschema-instance" å£°æ xml schema å®ä¾ï¼å£°æåå°±å¯ä»¥ä½¿ç¨ schemalocation å±æ§äºã\n> \n>  * xmlns:mvc="http://www.springframework.org/schema/mvc" å£°æåç¼ä¸º mvc çå½åç©ºé´ï¼åé¢ç url ç¨äºæ ç¤ºå½åç©ºé´çå°åä¸ä¼è¢«è§£æå¨ç¨äºæ¥æ¾ä¿¡æ¯ãå¶æä¸çä½ç¨æ¯èµäºå½åç©ºé´ä¸ä¸ªæä¸çåç§°ãå½å½åç©ºé´è¢«å®ä¹å¨åç´ çå¼å§æ ç­¾ä¸­æ¶ï¼ææå¸¦æç¸ååç¼çå­åç´ é½ä¼ä¸åä¸ä¸ªå½åç©ºé´ç¸å³èã å¶å®çç±»ä¼¼ xmlns:context ãxmlns:jdbc ç­ç­åæ ·å¦æ­¤ã\n> \n>  * xsi:schemalocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n>    ..."\n>    \n>    \n>    è¿ä¸ªä»å½åå¯ä»¥çåºä¸ªå¤§æ¦ï¼æå® schema ä½ç½®è¿ä¸ªå±æ§å¿é¡»ç»åå½åç©ºé´ä½¿ç¨ãè¿ä¸ªå±æ§æä¸¤ä¸ªå¼ï¼ç¬¬ä¸ä¸ªå¼è¡¨ç¤ºéè¦ä½¿ç¨çå½åç©ºé´ãç¬¬äºä¸ªå¼è¡¨ç¤ºä¾å½åç©ºé´ä½¿ç¨ç xml schema çä½ç½®ã\n\nä¸é¢ç¤ºä¾ä¸­ç xsd çæ¬æ¯ 3.1.xsd ï¼è¡¨ç¤º spring ç xml è§£æå¨ä¼å°å¶è§ä¸º 3.1 çæ¬ç xml æä»¶æ¥å¤çã\n\nç°å¨ï¼æä»¬ä½¿ç¨äº spring 4ï¼3.1.xsd çæ¬æ¾ç¶å°±ä¸æ­£ç¡®äºï¼æä»¬å¯ä»¥æ ¹æ®èªå·±å¼å¥ç spring 4 çå­çæ¬å·å°å¶æ¹ä¸º 4.x.xsd ã\n\nä½æ¯ï¼è¿æä¸ç§æ´å¥½çåæ³ï¼æè¿ä¸ªæå® xsd çæ¬çå³é®å­å¹²æï¼ç±»ä¼¼è¿æ ·ï¼http://www.springframework.org/schema/tx/spring-tx.xsd ã\n\nè¿ä¹åçåå å¦ä¸ï¼\n\n * spring é»è®¤å¨å¯å¨æ¶è¦å è½½ xsd æä»¶æ¥éªè¯ xml æä»¶ã\n * å¦ææ²¡ææä¾ schemalocationï¼é£ä¹ spring ç xml è§£æå¨ä¼ä» namespace ç uri éå è½½ xsd æä»¶ã\n * schemalocation æä¾äºä¸ä¸ª xml namespace å°å¯¹åºç xsd æä»¶çä¸ä¸ªæ å°ã\n * å¦æä¸æå® spring xsd ççæ¬å·ï¼spring åçå°±æ¯å½åæ¬å° jar éç xsd æä»¶ï¼åå°äºåç§é£é©ï¼æ¯å¦ xsd ä¸å®é spring jar çæ¬ä¸ä¸è´ï¼ã\n\næ´å¤è¯¦ç»åå®¹å¯ä»¥åèè¿ç¯æç« ï¼ä¸ºä»ä¹å¨ spring çéç½®éï¼æå¥½ä¸è¦éç½® xsd æä»¶ççæ¬å·\n\n\n# ä¿®æ¹ spring xml æä»¶\n\nspring 4 å¯¹ xml åäºä¸äºæ¹å¨ãè¿éè¯´ä¸ä¸ªæå¸¸ç¨çæ¹å¨ï¼\n\n# ref local\n\nspring ä¸åæ¯æ ref åç´ ç local å±æ§ï¼å¦æä½ çé¡¹ç®ä¸­ä½¿ç¨äºï¼éè¦æ¹ä¸º beanã\n\nshi\n\nspring 4 ä»¥åï¼\n\n<bean id="transactionmanager" class="org.springframework.jdbc.datasource.datasourcetransactionmanager">\n  <property name="datasource">\n    <ref local="datasource" />\n  </property>\n</bean>\n\n\nspring 4 ä»¥åï¼\n\n<bean id="transactionmanager" class="org.springframework.jdbc.datasource.datasourcetransactionmanager">\n  <property name="datasource">\n    <ref bean="datasource" />\n  </property>\n</bean>\n\n\nå¦æä¸æ¹å¯å¨ä¼æ¥éï¼\n\ncaused by: org.xml.sax.saxparseexception: cvc-complex-type.3.2.2: attribute \'local\' is not allowed to appear in element \'ref\'.\n\n\nå½ç¶ï¼å¯è½è¿æä¸äºå¶ä»éç½®æ¹å¨ï¼è¿ä¸ªåªè½è¯´åµæ¥å°æ¡æ°´æ¥åæ©ï¼éå°äºåå»æ¥å®æ¹ææ¡£å§ã\n\n\n# å å¥ spring support\n\nspring 3 ä¸­å¾å¤çæ©å±åå®¹ä¸éè¦å¼å¥ support ãä½æ¯ spring 4 ä¸­åç¦»çæ´å½»åºäºï¼å¦æä¸åç¦»ï¼ä¼æå¾å¤classnotfound ã\n\n<dependency>\n    <groupid>org.springframework</groupid>\n    <artifactid>spring-context-support</artifactid>\n    <version>4.2.3.release</version>\n</dependency>\n\n\n\n# æ´æ¢ spring-mvc jackson\n\nspring mvc ä¸­å¦æè¿åç»æä¸º json éè¦ä¾èµ jackson ç jar åï¼ä½æ¯ä»åçº§å°äº 2, ä»¥åæ¯ codehaus.jacksonï¼ç°å¨æ¢æäº fasterxml.jackson\n\n<dependency>\n    <groupid>com.fasterxml.jackson.core</groupid>\n    <artifactid>jackson-core</artifactid>\n    <version>2.7.0</version>\n</dependency>\n<dependency>\n    <groupid>com.fasterxml.jackson.core</groupid>\n    <artifactid>jackson-databind</artifactid>\n    <version>2.7.0</version>\n</dependency>\n\n\nåæ¶ä¿®æ¹ spring mvc çéç½®æä»¶ï¼\n\n<bean\n\tclass="org.springframework.web.servlet.mvc.annotation.annotationmethodhandleradapter">\n\t<property name="messageconverters">\n\t\t<list>\n\t\t\t <ref bean="stringhttpmessageconverter" />\n\t\t\t<bean\n\t\t\t\tclass="org.springframework.http.converter.json.mappingjackson2httpmessageconverter">\n\t\t\t</bean>\n\t\t</list>\n\t</property>\n</bean>\n\n<bean id="stringhttpmessageconverter"\n\tclass="org.springframework.http.converter.stringhttpmessageconverter">\n\t<property name="supportedmediatypes">\n\t\t<list>\n\t\t\t<value>text/plain;charset=utf-8</value>\n\t\t</list>\n\t</property>\n</bean>\n\n\n\n# è§£å³ ibatis å¼å®¹é®é¢\n\né®é¢\n\nå¦æä½ çé¡¹ç®ä¸­ä½¿ç¨äº ibatis (mybatis çåèº«)è¿ä¸ª orm æ¡æ¶ï¼å½ spring3 åçº§ spring4 åï¼ä¼åºç°å¼å®¹æ§é®é¢ï¼ç¼è¯é½ä¸è½éè¿ã\n\nè¿æ¯å ä¸º spring4 å®æ¹å·²ç»ä¸åæ¯æ ibatisã\n\nè§£å³æ¹æ¡\n\næ·»å å¼å®¹æ§ jar å\n\n<dependency>\n    <groupid>org.mybatis</groupid>\n    <artifactid>mybatis-2-spring</artifactid>\n    <version>1.0.1</version>\n</dependency>\n\n\næ´å¤åå®¹å¯åèï¼https://stackoverflow.com/questions/32353286/no-support-for-ibatis-in-spring4-2-0\n\n\n# åçº§ dubbo\n\næä»¬çé¡¹ç®ä¸­ä½¿ç¨äº soa æ¡æ¶ dubbo ãç±äº dubbo æ¯èçæ¬çï¼å·ä½æ¥è¯´æ¯ï¼2013 å¹´ç 2.4.10ï¼ï¼èèçæ¬ä¸­ä½¿ç¨ç spirng çæ¬ä¸º 2.xï¼æå¼å®¹æ§é®é¢ã\n\ndubbo é¡¹ç®ä»ä»å¹´å¼å§æ¢å¤ç»´æ¤äºï¼é¦åæä¸äºè½åçåºåçº§å°è¾æ°çæ¬ï¼æ¯å¦ jdk8ï¼spring4 ç­ï¼å¹¶ä¿®å¤äºä¸äº bugãæä»¥ï¼æä»¬å¯ä»¥éè¿åçº§ä¸ä¸ dubbo çæ¬æ¥è§£å³é®é¢ã\n\n<dependency>\n  <groupid>com.alibaba</groupid>\n  <artifactid>dubbo</artifactid>\n  <version>2.5.8</version>\n  <exclusions>\n    <exclusion>\n      <groupid>org.springframework</groupid>\n      <artifactid>spring-context</artifactid>\n    </exclusion>\n    <exclusion>\n      <groupid>org.springframework</groupid>\n      <artifactid>spring-web</artifactid>\n    </exclusion>\n    <exclusion>\n      <groupid>org.javassist</groupid>\n      <artifactid>javassist</artifactid>\n    </exclusion>\n  </exclusions>\n</dependency>\n\n\n\n# åçº§ jedis\n\nåçº§ dubbo ä¸ºå½åææ°ç 2.5.8 çæ¬åï¼è¿è¡æ¶æ¥éï¼\n\n * jedispoolconfig éç½®éè¯¯\n\ncaused by: java.lang.classnotfoundexception: org.apache.commons.pool2.impl.genericobjectpoolconfig\n\n\nç±äºé¡¹ç®ä¸­ä½¿ç¨äº redisï¼çæ¬ä¸º 2.0.0 ï¼è¿ä¸ªé®é¢æ¯ç±äº jedis éè¦åçº§ï¼\n\n<dependency>\n  <groupid>redis.clients</groupid>\n  <artifactid>jedis</artifactid>\n  <version>2.9.0</version>\n</dependency>\n\n\njedis 2.4.1 ä»¥ä¸çæ¬ç jedispoolconfig å·²ç»æ²¡æäºmaxactive å maxwait å±æ§ã\n\nä¿®æ¹æ¹æ³å¦ä¸ï¼\n\nmaxactive > maxtotal\n\nmaxwait > maxwaitmillis\n\n<bean id="jedispoolconfig" class="redis.clients.jedis.jedispoolconfig">\n  <property name="maxtotal" value="200" />\n  <property name="maxidle" value="10" />\n  <property name="maxwaitmillis" value="1000" />\n  <property name="testonborrow" value="true" />\n</bean>\n\n\njedispool éç½®éè¯¯\n\ninvaliduriexception: cannot open redis connection due invalid uri\n\n\nåæ¥çéç½®å¦ä¸ï¼\n\n<bean id="jedispool" class="redis.clients.jedis.jedispool" destroy-method="destroy" depends-on="jedispoolconfig">\n  <constructor-arg ref="jedispoolconfig" />\n  <constructor-arg type="java.lang.string" value="${redis.host}" />\n  <constructor-arg type="int" value="${redis.port}" />\n</bean>\n\n\næ¥çæºç å¯ä»¥åç°ï¼åå§å jedispool æ¶æªæå®ç»ææ¹æ³åæ°çç±»åï¼å¯¼è´ host å­ç¬¦ä¸²å¼è¢«è§ä¸º uri ç±»åï¼å½ç¶ç±»åä¸å¹éã\n\nè§£å³æ¹æ³æ¯ä¿®æ¹ä¸é¢ç host éç½®ï¼ä¸ºï¼<constructor-arg type="java.lang.string" value="${redis.host}" />\n\n----------------------------------------\n\nè³æ­¤ï¼spring 4 åçº§ç»æãåé¢å¦æéå°å¶ä»åçº§é®é¢åè¡¥åã\n\n\n# èµæ\n\n * https://spring.io/blog/2013/05/21/spring-framework-4-0-m1-3-2-3-available/\n * https://docs.spring.io/spring/docs/4.3.14.build-snapshot/spring-framework-reference/htmlsingle/#spring-whats-new\n * spring 3.x åçº§å° spring 4.x æ³¨æäºé¡¹åæ­¥éª¤ï¼éè¯¯è§£å³æ¹æ³\n * http://jinnianshilongnian.iteye.com/blog/1995111\n * ä¸ºä»ä¹å¨ spring çéç½®éï¼æå¥½ä¸è¦éç½® xsd æä»¶ççæ¬å·\n * https://stackoverflow.com/questions/32353286/no-support-for-ibatis-in-spring4-2-0',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot Actuator å¿«éå¥é¨",frontmatter:{title:"SpringBoot Actuator å¿«éå¥é¨",date:"2022-06-14T20:51:22.000Z",order:22,categories:["Java","æ¡æ¶","Spring","Springå¶ä»"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/c013cc/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/99.Spring%E5%85%B6%E4%BB%96/22.SpringBoot%E4%B9%8BActuator.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/22.SpringBootä¹Actuator.md",key:"v-033e2880",path:"/pages/c013cc/",headers:[{level:2,title:"ç«¯ç¹ï¼Endpointï¼",slug:"ç«¯ç¹-endpoint",normalizedTitle:"ç«¯ç¹ï¼endpointï¼",charIndex:450},{level:3,title:"å¯ç¨ç«¯ç¹",slug:"å¯ç¨ç«¯ç¹",normalizedTitle:"å¯ç¨ç«¯ç¹",charIndex:718},{level:3,title:"æ´é²ç«¯ç¹",slug:"æ´é²ç«¯ç¹",normalizedTitle:"æ´é²ç«¯ç¹",charIndex:1051},{level:3,title:"å®å¨",slug:"å®å¨",normalizedTitle:"å®å¨",charIndex:2328},{level:3,title:"éç½®ç«¯ç¹",slug:"éç½®ç«¯ç¹",normalizedTitle:"éç½®ç«¯ç¹",charIndex:755},{level:3,title:"Actuator Web ç«¯ç¹çè¶åªä½",slug:"actuator-web-ç«¯ç¹çè¶åªä½",normalizedTitle:"actuator web ç«¯ç¹çè¶åªä½",charIndex:4222},{level:3,title:"è·¨åæ¯æ",slug:"è·¨åæ¯æ",normalizedTitle:"è·¨åæ¯æ",charIndex:4548},{level:3,title:"èªå®ä¹ç«¯ç¹",slug:"èªå®ä¹ç«¯ç¹",normalizedTitle:"èªå®ä¹ç«¯ç¹",charIndex:540},{level:2,title:"éè¿ HTTP è¿è¡çæ§åç®¡ç",slug:"éè¿-http-è¿è¡çæ§åç®¡ç",normalizedTitle:"éè¿ http è¿è¡çæ§åç®¡ç",charIndex:5542},{level:3,title:"èªå®ä¹ç®¡çç«¯ç¹è·¯å¾",slug:"èªå®ä¹ç®¡çç«¯ç¹è·¯å¾",normalizedTitle:"èªå®ä¹ç®¡çç«¯ç¹è·¯å¾",charIndex:5562},{level:3,title:"èªå®ä¹ç®¡çæå¡å¨ç«¯å£",slug:"èªå®ä¹ç®¡çæå¡å¨ç«¯å£",normalizedTitle:"èªå®ä¹ç®¡çæå¡å¨ç«¯å£",charIndex:5916},{level:3,title:"éç½® SSL",slug:"éç½®-ssl",normalizedTitle:"éç½® ssl",charIndex:5961},{level:3,title:"èªå®ä¹ç®¡çæå¡å¨å°å",slug:"èªå®ä¹ç®¡çæå¡å¨å°å",normalizedTitle:"èªå®ä¹ç®¡çæå¡å¨å°å",charIndex:6584},{level:3,title:"ç¦ç¨ HTTP ç«¯ç¹",slug:"ç¦ç¨-http-ç«¯ç¹",normalizedTitle:"ç¦ç¨ http ç«¯ç¹",charIndex:6665},{level:2,title:"éè¿ JMX è¿è¡çæ§åç®¡ç",slug:"éè¿-jmx-è¿è¡çæ§åç®¡ç",normalizedTitle:"éè¿ jmx è¿è¡çæ§åç®¡ç",charIndex:6867},{level:3,title:"å®å¶å MBean Names",slug:"å®å¶å-mbean-names",normalizedTitle:"å®å¶å mbean names",charIndex:7393},{level:3,title:"ç¦ç¨ JMX ç«¯ç¹",slug:"ç¦ç¨-jmx-ç«¯ç¹",normalizedTitle:"ç¦ç¨ jmx ç«¯ç¹",charIndex:7714},{level:3,title:"å° Jolokia ç¨äºåºäº HTTP ç JMX",slug:"å°-jolokia-ç¨äºåºäº-http-ç-jmx",normalizedTitle:"å° jolokia ç¨äºåºäº http ç jmx",charIndex:7795},{level:2,title:"æ¥å¿",slug:"æ¥å¿",normalizedTitle:"æ¥å¿",charIndex:8133},{level:2,title:"ææ ",slug:"ææ ",normalizedTitle:"ææ ",charIndex:8274},{level:2,title:"å®¡è®¡",slug:"å®¡è®¡",normalizedTitle:"å®¡è®¡",charIndex:8281},{level:2,title:"HTTP è¿½è¸ª",slug:"http-è¿½è¸ª",normalizedTitle:"http è¿½è¸ª",charIndex:8814},{level:2,title:"å¤ççæ§",slug:"å¤ççæ§",normalizedTitle:"å¤ççæ§",charIndex:9090},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:9328}],headersStr:"ç«¯ç¹ï¼Endpointï¼ å¯ç¨ç«¯ç¹ æ´é²ç«¯ç¹ å®å¨ éç½®ç«¯ç¹ Actuator Web ç«¯ç¹çè¶åªä½ è·¨åæ¯æ èªå®ä¹ç«¯ç¹ éè¿ HTTP è¿è¡çæ§åç®¡ç èªå®ä¹ç®¡çç«¯ç¹è·¯å¾ èªå®ä¹ç®¡çæå¡å¨ç«¯å£ éç½® SSL èªå®ä¹ç®¡çæå¡å¨å°å ç¦ç¨ HTTP ç«¯ç¹ éè¿ JMX è¿è¡çæ§åç®¡ç å®å¶å MBean Names ç¦ç¨ JMX ç«¯ç¹ å° Jolokia ç¨äºåºäº HTTP ç JMX æ¥å¿ ææ  å®¡è®¡ HTTP è¿½è¸ª å¤ççæ§ åèèµæ",content:'# SpringBoot Actuator å¿«éå¥é¨\n\nspring-boot-actuator æ¨¡åæä¾äº Spring Boot çææçäº§å°±ç»ªåè½ãå¯ç¨è¿äºåè½çæ¨èæ¹æ³æ¯æ·»å  spring-boot-starter-actuator ä¾èµã\n\nå¦ææ¯ Maven é¡¹ç®ï¼æ·»å ä»¥ä¸ä¾èµï¼\n\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-actuator</artifactId>\n    </dependency>\n</dependencies>\n\n\nå¦ææ¯ Gradle é¡¹ç®ï¼æ·»å ä»¥ä¸å£°æï¼\n\ndependencies {\n    implementation \'org.springframework.boot:spring-boot-starter-actuator\'\n}\n\n\n\n# ç«¯ç¹ï¼Endpointï¼\n\nActuator Endpoint ä½¿ Spring Boot ç¨æ·å¯ä»¥çæ§åºç¨ï¼å¹¶ååºç¨è¿è¡äº¤äºãSpring Boot åç½®äºè®¸å¤ ç«¯ç¹ï¼å¹¶åè®¸ç¨æ·èªå®ä¹ç«¯ç¹ãä¾å¦ï¼health ç«¯ç¹æä¾åºæ¬çåºç¨å¥åº·ä¿¡æ¯ã\n\nç¨æ·å¯ä»¥å¯ç¨æç¦ç¨æ¯ä¸ªåç¬çç«¯ç¹å¹¶éè¿ HTTP æ JMX æ´é²å®ä»¬ï¼ä½¿å®ä»¬å¯è¿ç¨è®¿é®ï¼ãå½ç«¯ç¹è¢«å¯ç¨åå¬å¼æ¶ï¼å®è¢«è®¤ä¸ºæ¯å¯ç¨çãåç½®ç«¯ç¹ä»å¨å¯ç¨æ¶æä¼èªå¨éç½®ãå¤§å¤æ°åºç¨ç¨åºéæ©éè¿ HTTP å¬å¼ãä¾å¦ï¼é»è®¤æåµä¸ï¼health ç«¯ç¹æ å°å° /actuator/healthã\n\n\n# å¯ç¨ç«¯ç¹\n\né»è®¤æåµä¸ï¼é¤äº shutdown ä¹å¤çææç«¯ç¹é½å·²å¯ç¨ãè¦éç½®ç«¯ç¹çå¯ç¨ï¼è¯·ä½¿ç¨ management.endpoint.<id>.enabled å±æ§ãä»¥ä¸ç¤ºä¾å¯ç¨ shutdown ç«¯ç¹ï¼\n\nmanagement.endpoint.shutdown.enabled=true\n\n\nå¦ææ¨å¸æç«¯ç¹æ¯æç¡®æå®æå¯ç¨ï¼è¯·å° management.endpoints.enabled-by-default å±æ§è®¾ç½®ä¸º false å¹¶æ ¹æ®éè¦æç¡®æå®å¯ç¨çç«¯ç¹ï¼ä»¥ä¸ä¸ºç¤ºä¾ï¼\n\nmanagement.endpoints.enabled-by-default=false\nmanagement.endpoint.info.enabled=true\n\n\n\n# æ´é²ç«¯ç¹\n\nç±äºç«¯ç¹å¯è½åå«ææä¿¡æ¯ï¼æ¨åºè¯¥ä»ç»èèä½æ¶æ´é²å®ä»¬ãä¸è¡¨æ¾ç¤ºäºåç½®ç«¯ç¹çé»è®¤æåï¼\n\nID                 JMX   WEB\nauditevents        Yes   No\nbeans              Yes   No\ncaches             Yes   No\nconditions         Yes   No\nconfigprops        Yes   No\nenv                Yes   No\nflyway             Yes   No\nhealth             Yes   Yes\nheapdump           N/A   No\nhttptrace          Yes   No\ninfo               Yes   No\nintegrationgraph   Yes   No\njolokia            N/A   No\nlogfile            N/A   No\nloggers            Yes   No\nliquibase          Yes   No\nmetrics            Yes   No\nmappings           Yes   No\nprometheus         N/A   No\nquartz             Yes   No\nscheduledtasks     Yes   No\nsessions           Yes   No\nshutdown           Yes   No\nstartup            Yes   No\nthreaddump         Yes   No\n\nè¦æ´æ¹æ´é²çç«¯ç¹ï¼è¯·ä½¿ç¨ä»¥ä¸ç¹å®äºææ¯çåå«åæé¤å±æ§ï¼\n\nPROPERTY                                    DEFAULT\nmanagement.endpoints.jmx.exposure.exclude   \nmanagement.endpoints.jmx.exposure.include   *\nmanagement.endpoints.web.exposure.exclude   \nmanagement.endpoints.web.exposure.include   health\n\ninclude å±æ§ååºäºæ´é²çç«¯ç¹ç IDã exclude å±æ§ååºäºä¸åºæ´é²çç«¯ç¹ç IDã exclude å±æ§ä¼åäº include å±æ§ãæ¨å¯ä»¥ä½¿ç¨ç«¯ç¹ ID åè¡¨éç½®åå«åæé¤å±æ§ã\n\nä¾å¦ï¼ä»æ´é² health å info ç«¯ç¹ï¼å¶ä»ç«¯ç¹é½ä¸éè¿ JMX æ´é²ï¼å¯ä»¥æå¦ä¸éç½®ï¼\n\nmanagement.endpoints.jmx.exposure.include=health,info\n\n\næ³¨æï¼* å¯ç¨äºéæ©ææç«¯ç¹ã\n\n\n# å®å¨\n\nåºäºå®å¨èèï¼åªæ /health ç«¯ç¹ä¼éè¿ HTTP æ¹å¼æ´é²ãç¨æ·å¯ä»¥éè¿ management.endpoints.web.exposure.include å³å®åªäºç«¯ç¹å¯ä»¥éè¿ HTTP æ¹å¼æ´é²ã\n\nå¦æ Spring Security å¨ç±»è·¯å¾ä¸å¹¶ä¸ä¸å­å¨å¶ä» WebSecurityConfigurerAdapter æ SecurityFilterChain beanï¼åé¤ /health ä¹å¤çææ actuator é½ç± Spring Boot èªå¨å¯ç¨å®å¨æ§å¶ãå¦æç¨æ·èªå®ä¹äº WebSecurityConfigurerAdapter æ SecurityFilterChain beanï¼Spring Boot ä¸åå¯ç¨å®å¨æ§å¶ï¼ç±ç¨æ·èªè¡æ§å¶è®¿é®è§åã\n\nå¦ææ¨å¸æä¸º HTTP ç«¯ç¹å®ä¹å®å¨æ§å¶ï¼ä¾å¦ï¼åªåè®¸å·æç¹å®è§è²çç¨æ·è®¿é®å®ä»¬ï¼ï¼Spring Boot æä¾äºä¸äºæ¹ä¾¿ç RequestMatcher å¯¹è±¡ï¼æ¨å¯ä»¥å°å®ä»¬ä¸ Spring Security ç»åä½¿ç¨ã\n\nä¸é¢æ¯ä¸ä¸ªå¸åç Spring Security éç½®ç¤ºä¾ï¼\n\n@Configuration(proxyBeanMethods = false)\npublic class MySecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.requestMatcher(EndpointRequest.toAnyEndpoint())\n                .authorizeRequests((requests) -> requests.anyRequest().hasRole("ENDPOINT_ADMIN"));\n        http.httpBasic();\n        return http.build();\n    }\n\n}\n\n\nåé¢çç¤ºä¾ä½¿ç¨ EndpointRequest.toAnyEndpoint() å°è¯·æ±å¹éå°ä»»ä½ç«¯ç¹ï¼ç¶åç¡®ä¿ææç«¯ç¹é½å·æ ENDPOINT_ADMIN è§è²ã EndpointRequest ä¸è¿æä¾äºå¶ä»å ç§å¹éå¨æ¹æ³ã\n\nå¦æå¸ææ éèº«ä»½éªè¯å³å¯è®¿é®æææ§è¡å¨ç«¯ç¹ãå¯ä»¥éè¿æ´æ¹ management.endpoints.web.exposure.include å±æ§æ¥åå°è¿ä¸ç¹ï¼å¦ä¸æç¤ºï¼\n\nmanagement.endpoints.web.exposure.include=*\n\n\næ­¤å¤ï¼å¦æå­å¨ Spring Securityï¼æ¨å°éè¦æ·»å èªå®ä¹å®å¨éç½®ï¼ä»¥åè®¸æªç»èº«ä»½éªè¯çè®¿é®ç«¯ç¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@Configuration(proxyBeanMethods = false)\npublic class MySecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.requestMatcher(EndpointRequest.toAnyEndpoint())\n                .authorizeRequests((requests) -> requests.anyRequest().permitAll());\n        return http.build();\n    }\n\n}\n\n\nç±äº Spring Boot ä¾èµäº Spring Security çé»è®¤è®¾ç½®ï¼å æ­¤ CSRF ä¿æ¤é»è®¤å¼å¯ãè¿æå³çå¨ä½¿ç¨é»è®¤å®å¨éç½®æ¶ï¼éè¦ POSTï¼å³é­åè®°å½å¨ç«¯ç¹ï¼ãPUT æ DELETE çæ§è¡å¨ç«¯ç¹ä¼æ¶å° 403ï¼ç¦æ­¢ï¼éè¯¯ã\n\n> å»ºè®®ä»å¨åå»ºéæµè§å¨å®¢æ·ç«¯ä½¿ç¨çæå¡æ¶å®å¨ç¦ç¨ CSRF ä¿æ¤ã\n\n\n# éç½®ç«¯ç¹\n\nç«¯ç¹ä¼èªå¨ç¼å­å¯¹ä¸å¸¦ä»»ä½åæ°çè¯»æä½çååºæ°æ®ãè¦éç½®ç«¯ç¹ç¼å­ååºçæ¶é´éï¼è¯·ä½¿ç¨å¶ cache.time-to-live å±æ§ãä»¥ä¸ç¤ºä¾å° bean ç«¯ç¹ç¼å­ççå­æ¶é´è®¾ç½®ä¸º 10 ç§ï¼\n\nmanagement.endpoint.beans.cache.time-to-live=10s\n\n\n\n# Actuator Web ç«¯ç¹çè¶åªä½\n\nSpring Boot Actuator ä¸­åç½®äºä¸ä¸ªâåç°é¡µé¢âç«¯ç¹ï¼å¶ä¸­åå«äºææç«¯ç¹çé¾æ¥ãé»è®¤æåµä¸ï¼âåç°é¡µé¢âå¨ /actuator ä¸å¯ç¨ã\n\nè¦ç¦ç¨âåç°é¡µé¢âï¼è¯·å°ä»¥ä¸å±æ§æ·»å å°æ¨çåºç¨ç¨åºå±æ§ä¸­ï¼\n\nmanagement.endpoints.web.discovery.enabled=false\n\n\néç½®èªå®ä¹ç®¡çä¸ä¸æè·¯å¾åï¼âåç°é¡µé¢âä¼èªå¨ä» /actuator ç§»å¨å°åºç¨ç®¡çä¸ä¸æçæ ¹ç®å½ãä¾å¦ï¼å¦æç®¡çä¸ä¸æè·¯å¾æ¯ /managementï¼ååç°é¡µé¢å¯ä» /management è·å¾ãå½ç®¡çä¸ä¸æè·¯å¾è®¾ç½®ä¸º / æ¶ï¼åç°é¡µé¢è¢«ç¦ç¨ä»¥é²æ­¢ä¸å¶ä»æ å°åçå²çªçå¯è½æ§ã\n\n\n# è·¨åæ¯æ\n\nCORS æ¯ä¸ç§ W3C è§èï¼å¯è®©ç¨æ·ä»¥çµæ´»çæ¹å¼æå®ææåªç§è·¨åè¯·æ±ãå¦æä½¿ç¨ Spring MVC æ Spring WebFluxï¼åå¯ä»¥éç½® Actuator ç Web ç«¯ç¹ä»¥æ¯ææ­¤ç±»åºæ¯ã\n\nCORS æ¯æé»è®¤æ¯ç¦ç¨çï¼åªæå¨è®¾ç½® management.endpoints.web.cors.allowed-origins å±æ§åæä¼å¯ç¨ãä»¥ä¸éç½®åè®¸æ¥èª example.com åç GET å POST è°ç¨ï¼\n\nmanagement.endpoints.web.cors.allowed-origins=https://example.com\nmanagement.endpoints.web.cors.allowed-methods=GET,POST\n\n\n\n# èªå®ä¹ç«¯ç¹\n\nå¦ææ·»å å¸¦æ @Endpoint æ³¨éç @Beanï¼åä»»ä½å¸¦æ @ReadOperationã@WriteOperation æ @DeleteOperation æ³¨éçæ¹æ³é½ä¼èªå¨éè¿ JMX å¬å¼ï¼å¹¶ä¸å¨ Web åºç¨ç¨åºä¸­ï¼ä¹å¯ä»¥éè¿ HTTP å¬å¼ãå¯ä»¥ä½¿ç¨ JerseyãSpring MVC æ Spring WebFlux éè¿ HTTP å¬å¼ç«¯ç¹ãå¦æ Jersey å Spring MVC é½å¯ç¨ï¼åä½¿ç¨ Spring MVCã\n\nä»¥ä¸ç¤ºä¾å¬å¼äºä¸ä¸ªè¿åèªå®ä¹å¯¹è±¡çè¯»åæä½ï¼\n\n@ReadOperation\npublic CustomData getData() {\n    return new CustomData("test", 5);\n}\n\n\næ¨è¿å¯ä»¥ä½¿ç¨ @JmxEndpoint æ @WebEndpoint ç¼åç¹å®ææ¯çç«¯ç¹ãè¿äºç«¯ç¹ä»éäºåèªçææ¯ãä¾å¦ï¼@WebEndpoint ä»éè¿ HTTP èä¸æ¯éè¿ JMX å¬å¼ã\n\næ¨å¯ä»¥ä½¿ç¨ @EndpointWebExtension å @EndpointJmxExtension ç¼åç¹å®ææ¯çæ©å±ãè¿äºæ³¨éè®©æ¨å¯ä»¥æä¾ç¹å®ææ¯çæä½æ¥æ©åç°æç«¯ç¹ã\n\næåï¼å¦ææ¨éè¦è®¿é® Web æ¡æ¶çåè½ï¼æ¨å¯ä»¥å®ç° servlet æ Spring @Controller å @RestController ç«¯ç¹ï¼ä½ä»£ä»·æ¯å®ä»¬æ æ³éè¿ JMX æä½¿ç¨ä¸åç Web æ¡æ¶è·å¾ã\n\n\n# éè¿ HTTP è¿è¡çæ§åç®¡ç\n\n\n# èªå®ä¹ç®¡çç«¯ç¹è·¯å¾\n\nå¦ææ¯ Web åºç¨ï¼Spring Boot Actuator ä¼èªå¨å°ææå¯ç¨çç«¯ç¹éè¿ HTTP æ¹å¼æ´é²ãé»è®¤çº¦å®æ¯ä½¿ç¨åç¼ä¸º /actuator çç«¯ç¹ç id ä½ä¸º URL è·¯å¾ãä¾å¦ï¼å¥åº·è¢«æ´é²ä¸º /actuator/healthã\n\nææ¶ï¼èªå®ä¹ç®¡çç«¯ç¹çåç¼å¾æç¨ãä¾å¦ï¼æ¨çåºç¨ç¨åºå¯è½å·²ç»å° /actuator ç¨äºå¶ä»ç®çãæ¨å¯ä»¥ä½¿ç¨ management.endpoints.web.base-path å±æ§æ´æ¹ç®¡çç«¯ç¹çåç¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nmanagement.endpoints.web.base-path=/manage\n\n\nè¯¥ç¤ºä¾å°ç«¯ç¹ä» /actuator/{id} æ´æ¹ä¸º /manage/{id}ï¼ä¾å¦ï¼/manage/infoï¼ã\n\n\n# èªå®ä¹ç®¡çæå¡å¨ç«¯å£\n\nmanagement.server.port=8081\n\n\n\n# éç½® SSL\n\nå½éç½®ä¸ºä½¿ç¨èªå®ä¹ç«¯å£æ¶ï¼è¿å¯ä»¥ä½¿ç¨åç§ management.server.ssl.* å±æ§ä¸ºç®¡çæå¡å¨éç½®èªå·±ç SSLãä¾å¦ï¼è¿æ ·åå¯ä»¥è®©ç®¡çæå¡å¨å¨ä¸»åºç¨ç¨åºä½¿ç¨ HTTPS æ¶éè¿ HTTP å¯ç¨ï¼å¦ä»¥ä¸å±æ§è®¾ç½®æç¤ºï¼\n\nserver.port=8443\nserver.ssl.enabled=true\nserver.ssl.key-store=classpath:store.jks\nserver.ssl.key-password=secret\nmanagement.server.port=8080\nmanagement.server.ssl.enabled=false\n\n\næèï¼ä¸»æå¡å¨åç®¡çæå¡å¨é½å¯ä»¥ä½¿ç¨ SSLï¼ä½ä½¿ç¨ä¸åçå¯é¥å­å¨ï¼å¦ä¸æç¤ºï¼\n\nserver.port=8443\nserver.ssl.enabled=true\nserver.ssl.key-store=classpath:main.jks\nserver.ssl.key-password=secret\nmanagement.server.port=8080\nmanagement.server.ssl.enabled=true\nmanagement.server.ssl.key-store=classpath:management.jks\nmanagement.server.ssl.key-password=secret\n\n\n\n# èªå®ä¹ç®¡çæå¡å¨å°å\n\nmanagement.server.port=8081\nmanagement.server.address=127.0.0.1\n\n\n\n# ç¦ç¨ HTTP ç«¯ç¹\n\nå¦ææ¨ä¸æ³éè¿ HTTP æ¹å¼æ´é²ç«¯ç¹ï¼å¯ä»¥å°ç®¡çç«¯å£è®¾ç½®ä¸º -1ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nmanagement.server.port=-1\n\n\nä¹å¯ä»¥éè¿ä½¿ç¨ management.endpoints.web.exposure.exclude å±æ§æ¥å®ç°è¿ä¸ç¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nmanagement.endpoints.web.exposure.exclude=*\n\n\n\n# éè¿ JMX è¿è¡çæ§åç®¡ç\n\nJava ç®¡çæ©å± (JMX) æä¾äºä¸ç§æ åæºå¶æ¥çè§åç®¡çåºç¨ç¨åºãé»è®¤æåµä¸ï¼æ­¤åè½æªå¯ç¨ãæ¨å¯ä»¥éè¿å° spring.jmx.enabled éç½®å±æ§è®¾ç½®ä¸º true æ¥æå¼å®ã Spring Boot å°æåéç MBeanServer æ´é²ä¸º ID ä¸º mbeanServer ç beanãä½¿ç¨ Spring JMX æ³¨éï¼@ManagedResourceã@ManagedAttribute æ @ManagedOperationï¼æ³¨éçä»»ä½ bean é½ä¼æ´é²ç»å®ã\n\nå¦ææ¨çå¹³å°æä¾æ å MBeanServerï¼å Spring Boot ä¼ä½¿ç¨è¯¥æ åå¹¶å¨å¿è¦æ¶é»è®¤ä½¿ç¨ VM MBeanServerãå¦æä¸åé½å¤±è´¥äºï¼ååå»ºä¸ä¸ªæ°ç MBeanServerã\n\næå³æ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åé JmxAutoConfiguration ç±»ã\n\né»è®¤æåµä¸ï¼Spring Boot è¿å°ç®¡çç«¯ç¹å¬å¼ä¸º org.springframework.boot åä¸ç JMX MBeanãè¦å®å¨æ§å¶ JMX åä¸­çç«¯ç¹æ³¨åï¼è¯·èèæ³¨åæ¨èªå·±ç EndpointObjectNameFactory å®ç°ã\n\n\n# å®å¶å MBean Names\n\nMBean çåç§°éå¸¸ç±ç«¯ç¹ç id çæãä¾å¦ï¼å¥åº·ç«¯ç¹å¬å¼ä¸º org.springframework.boot:type=Endpoint,name=Healthã\n\nå¦ææ¨çåºç¨ç¨åºåå«å¤ä¸ª Spring ApplicationContextï¼æ¨å¯è½ä¼åç°åç§°å²çªãè¦è§£å³æ­¤é®é¢ï¼æ¨å¯ä»¥å° spring.jmx.unique-names å±æ§è®¾ç½®ä¸º trueï¼ä»¥ä¾¿ MBean åç§°å§ç»æ¯å¯ä¸çã\n\nå¦æéè¦å®å¶ï¼è·¨åæå¦ä¸éç½®ï¼\n\nspring.jmx.unique-names=true\nmanagement.endpoints.jmx.domain=com.example.myapp\n\n\n\n# ç¦ç¨ JMX ç«¯ç¹\n\næ³ç¦ç¨ JMX ç«¯ç¹ï¼å¯ä»¥æå¦ä¸éç½®ï¼\n\nmanagement.endpoints.jmx.exposure.exclude=*\n\n\n\n# å° Jolokia ç¨äºåºäº HTTP ç JMX\n\nJolokia æ¯ä¸ä¸ª JMX-HTTP çæ¡¥æ¥å·¥å·ï¼å®æä¾äºå¦ä¸ç§è®¿é® JMX bean çæ¹æ³ãè¦ä½¿ç¨ Jolokiaï¼éè¦åæ·»å ä¾èµï¼\n\n<dependency>\n    <groupId>org.jolokia</groupId>\n    <artifactId>jolokia-core</artifactId>\n</dependency\n\n\nç¶åï¼æ¨å¯ä»¥éè¿å° jolokia æ * æ·»å å° Management.Endpoints.web.exposure.include å±æ§æ¥æ´é² Jolokia ç«¯ç¹ãç¶åï¼æ¨å¯ä»¥å¨ç®¡ç HTTP æå¡å¨ä¸ä½¿ç¨ /actuator/jolokia è®¿é®å®ã\n\n\n# æ¥å¿\n\nSpring Boot Actuator æ¯ææ¥çåéç½®åºç¨æ¥å¿çº§å«ã\n\næ¥å¿çº§å«çå¯éå¼å¦ä¸ï¼\n\n * TRACE\n * DEBUG\n * INFO\n * WARN\n * ERROR\n * FATAL\n * OFF\n * null\n\nnull è¡¨ç¤ºæ²¡ææ¾å¼éç½®ã\n\n\n# ææ \n\n\n# å®¡è®¡\n\nSpring Boot Actuator æ¯æç®åçå®¡è®¡åè½ãå¦æåºç¨ä¸­å¯ç¨äº Spring Securityï¼Spring Boot Actuator å°±ä¼åå¸å®å¨äºä»¶ï¼å¦ï¼âèº«ä»½éªè¯æåâãâå¤±è´¥âåâè®¿é®è¢«æç»âå¼å¸¸ï¼ã\n\nå¯ä»¥éè¿å¨åºç¨çéç½®ä¸­æä¾ AuditEventRepository ç±»åç bean æ¥å¯ç¨å®¡è®¡ãä¸ºæ¹ä¾¿èµ·è§ï¼Spring Boot æä¾äºä¸ä¸ª InMemoryAuditEventRepositoryã InMemoryAuditEventRepository çåè½æéï¼å»ºè®®ä»å°å¶ç¨äºå¼åç¯å¢ã\n\nå¦æè¦èªå®ä¹å®å¨äºä»¶ï¼å¯ä»¥æä¾ AbstractAuthenticationAuditListener å AbstractAuthorizationAuditListener å®ç°ã\n\næ­¤å¤ï¼è¿å¯ä»¥å°å®¡è®¡æå¡ç¨äºä¸å¡æ´»å¨ãä¸ºæ­¤ï¼è¦ä¹å° AuditEventRepository bean æ³¨å¥ç»ä»¶å¹¶ç´æ¥ä½¿ç¨å®ï¼è¦ä¹ä½¿ç¨ Spring ApplicationEventPublisher åå¸ AuditApplicationEventï¼éè¿å®ç° ApplicationEventPublisherAwareï¼ã\n\n\n# HTTP è¿½è¸ª\n\nç¨æ·å¯ä»¥éè¿å¨åºç¨ä¸­æä¾ HttpTraceRepository ç±»åç bean æ¥å¯ç¨ HTTP è·è¸ªãSpring Boot æä¾äºåç½®ç InMemoryHttpTraceRepositoryï¼å®å¯ä»¥å­å¨æè¿ 100 æ¬¡ï¼é»è®¤ï¼è¯·æ±-ååºçè¿½è¸ªæ°æ®ãä¸å¶ä» HTTP è¿½è¸ªè§£å³æ¹æ¡ç¸æ¯ï¼InMemoryHttpTraceRepository æ¯è¾åéï¼å»ºè®®ä»ç¨äºå¼åç¯å¢ãå¯¹äºçäº§ç¯å¢ï¼å»ºè®®ä½¿ç¨ Zipkin æ Spring Cloud Sleuthã\n\næèï¼å¯ä»¥èªå®ä¹ HttpTraceRepositoryã\n\n\n# å¤ççæ§\n\nå¨ spring-boot æ¨¡åä¸­ï¼æ¨å¯ä»¥æ¾å°ä¸¤ä¸ªç±»æ¥åå»ºå¯¹è¿ç¨çæ§æç¨çæä»¶ï¼\n\n * ApplicationPidFileWriter åå»ºä¸ä¸ªåå«åºç¨ç¨åº PID çæä»¶ï¼é»è®¤æåµä¸ï¼å¨åºç¨ç¨åºç®å½ä¸­ï¼æä»¶åä¸º application.pidï¼ã\n * WebServerPortFileWriter åå»ºä¸ä¸ªæä»¶ï¼æå¤ä¸ªæä»¶ï¼ï¼å¶ä¸­åå«æ­£å¨è¿è¡ç Web æå¡å¨çç«¯å£ï¼é»è®¤æåµä¸ï¼å¨åºç¨ç¨åºç®å½ä¸­ï¼æä»¶åä¸º application.portï¼ã\n\n\n# åèèµæ\n\n * Spring Boot å®æ¹ææ¡£ä¹ Production-ready Features',normalizedContent:'# springboot actuator å¿«éå¥é¨\n\nspring-boot-actuator æ¨¡åæä¾äº spring boot çææçäº§å°±ç»ªåè½ãå¯ç¨è¿äºåè½çæ¨èæ¹æ³æ¯æ·»å  spring-boot-starter-actuator ä¾èµã\n\nå¦ææ¯ maven é¡¹ç®ï¼æ·»å ä»¥ä¸ä¾èµï¼\n\n<dependencies>\n    <dependency>\n        <groupid>org.springframework.boot</groupid>\n        <artifactid>spring-boot-starter-actuator</artifactid>\n    </dependency>\n</dependencies>\n\n\nå¦ææ¯ gradle é¡¹ç®ï¼æ·»å ä»¥ä¸å£°æï¼\n\ndependencies {\n    implementation \'org.springframework.boot:spring-boot-starter-actuator\'\n}\n\n\n\n# ç«¯ç¹ï¼endpointï¼\n\nactuator endpoint ä½¿ spring boot ç¨æ·å¯ä»¥çæ§åºç¨ï¼å¹¶ååºç¨è¿è¡äº¤äºãspring boot åç½®äºè®¸å¤ ç«¯ç¹ï¼å¹¶åè®¸ç¨æ·èªå®ä¹ç«¯ç¹ãä¾å¦ï¼health ç«¯ç¹æä¾åºæ¬çåºç¨å¥åº·ä¿¡æ¯ã\n\nç¨æ·å¯ä»¥å¯ç¨æç¦ç¨æ¯ä¸ªåç¬çç«¯ç¹å¹¶éè¿ http æ jmx æ´é²å®ä»¬ï¼ä½¿å®ä»¬å¯è¿ç¨è®¿é®ï¼ãå½ç«¯ç¹è¢«å¯ç¨åå¬å¼æ¶ï¼å®è¢«è®¤ä¸ºæ¯å¯ç¨çãåç½®ç«¯ç¹ä»å¨å¯ç¨æ¶æä¼èªå¨éç½®ãå¤§å¤æ°åºç¨ç¨åºéæ©éè¿ http å¬å¼ãä¾å¦ï¼é»è®¤æåµä¸ï¼health ç«¯ç¹æ å°å° /actuator/healthã\n\n\n# å¯ç¨ç«¯ç¹\n\né»è®¤æåµä¸ï¼é¤äº shutdown ä¹å¤çææç«¯ç¹é½å·²å¯ç¨ãè¦éç½®ç«¯ç¹çå¯ç¨ï¼è¯·ä½¿ç¨ management.endpoint.<id>.enabled å±æ§ãä»¥ä¸ç¤ºä¾å¯ç¨ shutdown ç«¯ç¹ï¼\n\nmanagement.endpoint.shutdown.enabled=true\n\n\nå¦ææ¨å¸æç«¯ç¹æ¯æç¡®æå®æå¯ç¨ï¼è¯·å° management.endpoints.enabled-by-default å±æ§è®¾ç½®ä¸º false å¹¶æ ¹æ®éè¦æç¡®æå®å¯ç¨çç«¯ç¹ï¼ä»¥ä¸ä¸ºç¤ºä¾ï¼\n\nmanagement.endpoints.enabled-by-default=false\nmanagement.endpoint.info.enabled=true\n\n\n\n# æ´é²ç«¯ç¹\n\nç±äºç«¯ç¹å¯è½åå«ææä¿¡æ¯ï¼æ¨åºè¯¥ä»ç»èèä½æ¶æ´é²å®ä»¬ãä¸è¡¨æ¾ç¤ºäºåç½®ç«¯ç¹çé»è®¤æåï¼\n\nid                 jmx   web\nauditevents        yes   no\nbeans              yes   no\ncaches             yes   no\nconditions         yes   no\nconfigprops        yes   no\nenv                yes   no\nflyway             yes   no\nhealth             yes   yes\nheapdump           n/a   no\nhttptrace          yes   no\ninfo               yes   no\nintegrationgraph   yes   no\njolokia            n/a   no\nlogfile            n/a   no\nloggers            yes   no\nliquibase          yes   no\nmetrics            yes   no\nmappings           yes   no\nprometheus         n/a   no\nquartz             yes   no\nscheduledtasks     yes   no\nsessions           yes   no\nshutdown           yes   no\nstartup            yes   no\nthreaddump         yes   no\n\nè¦æ´æ¹æ´é²çç«¯ç¹ï¼è¯·ä½¿ç¨ä»¥ä¸ç¹å®äºææ¯çåå«åæé¤å±æ§ï¼\n\nproperty                                    default\nmanagement.endpoints.jmx.exposure.exclude   \nmanagement.endpoints.jmx.exposure.include   *\nmanagement.endpoints.web.exposure.exclude   \nmanagement.endpoints.web.exposure.include   health\n\ninclude å±æ§ååºäºæ´é²çç«¯ç¹ç idã exclude å±æ§ååºäºä¸åºæ´é²çç«¯ç¹ç idã exclude å±æ§ä¼åäº include å±æ§ãæ¨å¯ä»¥ä½¿ç¨ç«¯ç¹ id åè¡¨éç½®åå«åæé¤å±æ§ã\n\nä¾å¦ï¼ä»æ´é² health å info ç«¯ç¹ï¼å¶ä»ç«¯ç¹é½ä¸éè¿ jmx æ´é²ï¼å¯ä»¥æå¦ä¸éç½®ï¼\n\nmanagement.endpoints.jmx.exposure.include=health,info\n\n\næ³¨æï¼* å¯ç¨äºéæ©ææç«¯ç¹ã\n\n\n# å®å¨\n\nåºäºå®å¨èèï¼åªæ /health ç«¯ç¹ä¼éè¿ http æ¹å¼æ´é²ãç¨æ·å¯ä»¥éè¿ management.endpoints.web.exposure.include å³å®åªäºç«¯ç¹å¯ä»¥éè¿ http æ¹å¼æ´é²ã\n\nå¦æ spring security å¨ç±»è·¯å¾ä¸å¹¶ä¸ä¸å­å¨å¶ä» websecurityconfigureradapter æ securityfilterchain beanï¼åé¤ /health ä¹å¤çææ actuator é½ç± spring boot èªå¨å¯ç¨å®å¨æ§å¶ãå¦æç¨æ·èªå®ä¹äº websecurityconfigureradapter æ securityfilterchain beanï¼spring boot ä¸åå¯ç¨å®å¨æ§å¶ï¼ç±ç¨æ·èªè¡æ§å¶è®¿é®è§åã\n\nå¦ææ¨å¸æä¸º http ç«¯ç¹å®ä¹å®å¨æ§å¶ï¼ä¾å¦ï¼åªåè®¸å·æç¹å®è§è²çç¨æ·è®¿é®å®ä»¬ï¼ï¼spring boot æä¾äºä¸äºæ¹ä¾¿ç requestmatcher å¯¹è±¡ï¼æ¨å¯ä»¥å°å®ä»¬ä¸ spring security ç»åä½¿ç¨ã\n\nä¸é¢æ¯ä¸ä¸ªå¸åç spring security éç½®ç¤ºä¾ï¼\n\n@configuration(proxybeanmethods = false)\npublic class mysecurityconfiguration {\n\n    @bean\n    public securityfilterchain securityfilterchain(httpsecurity http) throws exception {\n        http.requestmatcher(endpointrequest.toanyendpoint())\n                .authorizerequests((requests) -> requests.anyrequest().hasrole("endpoint_admin"));\n        http.httpbasic();\n        return http.build();\n    }\n\n}\n\n\nåé¢çç¤ºä¾ä½¿ç¨ endpointrequest.toanyendpoint() å°è¯·æ±å¹éå°ä»»ä½ç«¯ç¹ï¼ç¶åç¡®ä¿ææç«¯ç¹é½å·æ endpoint_admin è§è²ã endpointrequest ä¸è¿æä¾äºå¶ä»å ç§å¹éå¨æ¹æ³ã\n\nå¦æå¸ææ éèº«ä»½éªè¯å³å¯è®¿é®æææ§è¡å¨ç«¯ç¹ãå¯ä»¥éè¿æ´æ¹ management.endpoints.web.exposure.include å±æ§æ¥åå°è¿ä¸ç¹ï¼å¦ä¸æç¤ºï¼\n\nmanagement.endpoints.web.exposure.include=*\n\n\næ­¤å¤ï¼å¦æå­å¨ spring securityï¼æ¨å°éè¦æ·»å èªå®ä¹å®å¨éç½®ï¼ä»¥åè®¸æªç»èº«ä»½éªè¯çè®¿é®ç«¯ç¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n@configuration(proxybeanmethods = false)\npublic class mysecurityconfiguration {\n\n    @bean\n    public securityfilterchain securityfilterchain(httpsecurity http) throws exception {\n        http.requestmatcher(endpointrequest.toanyendpoint())\n                .authorizerequests((requests) -> requests.anyrequest().permitall());\n        return http.build();\n    }\n\n}\n\n\nç±äº spring boot ä¾èµäº spring security çé»è®¤è®¾ç½®ï¼å æ­¤ csrf ä¿æ¤é»è®¤å¼å¯ãè¿æå³çå¨ä½¿ç¨é»è®¤å®å¨éç½®æ¶ï¼éè¦ postï¼å³é­åè®°å½å¨ç«¯ç¹ï¼ãput æ delete çæ§è¡å¨ç«¯ç¹ä¼æ¶å° 403ï¼ç¦æ­¢ï¼éè¯¯ã\n\n> å»ºè®®ä»å¨åå»ºéæµè§å¨å®¢æ·ç«¯ä½¿ç¨çæå¡æ¶å®å¨ç¦ç¨ csrf ä¿æ¤ã\n\n\n# éç½®ç«¯ç¹\n\nç«¯ç¹ä¼èªå¨ç¼å­å¯¹ä¸å¸¦ä»»ä½åæ°çè¯»æä½çååºæ°æ®ãè¦éç½®ç«¯ç¹ç¼å­ååºçæ¶é´éï¼è¯·ä½¿ç¨å¶ cache.time-to-live å±æ§ãä»¥ä¸ç¤ºä¾å° bean ç«¯ç¹ç¼å­ççå­æ¶é´è®¾ç½®ä¸º 10 ç§ï¼\n\nmanagement.endpoint.beans.cache.time-to-live=10s\n\n\n\n# actuator web ç«¯ç¹çè¶åªä½\n\nspring boot actuator ä¸­åç½®äºä¸ä¸ªâåç°é¡µé¢âç«¯ç¹ï¼å¶ä¸­åå«äºææç«¯ç¹çé¾æ¥ãé»è®¤æåµä¸ï¼âåç°é¡µé¢âå¨ /actuator ä¸å¯ç¨ã\n\nè¦ç¦ç¨âåç°é¡µé¢âï¼è¯·å°ä»¥ä¸å±æ§æ·»å å°æ¨çåºç¨ç¨åºå±æ§ä¸­ï¼\n\nmanagement.endpoints.web.discovery.enabled=false\n\n\néç½®èªå®ä¹ç®¡çä¸ä¸æè·¯å¾åï¼âåç°é¡µé¢âä¼èªå¨ä» /actuator ç§»å¨å°åºç¨ç®¡çä¸ä¸æçæ ¹ç®å½ãä¾å¦ï¼å¦æç®¡çä¸ä¸æè·¯å¾æ¯ /managementï¼ååç°é¡µé¢å¯ä» /management è·å¾ãå½ç®¡çä¸ä¸æè·¯å¾è®¾ç½®ä¸º / æ¶ï¼åç°é¡µé¢è¢«ç¦ç¨ä»¥é²æ­¢ä¸å¶ä»æ å°åçå²çªçå¯è½æ§ã\n\n\n# è·¨åæ¯æ\n\ncors æ¯ä¸ç§ w3c è§èï¼å¯è®©ç¨æ·ä»¥çµæ´»çæ¹å¼æå®ææåªç§è·¨åè¯·æ±ãå¦æä½¿ç¨ spring mvc æ spring webfluxï¼åå¯ä»¥éç½® actuator ç web ç«¯ç¹ä»¥æ¯ææ­¤ç±»åºæ¯ã\n\ncors æ¯æé»è®¤æ¯ç¦ç¨çï¼åªæå¨è®¾ç½® management.endpoints.web.cors.allowed-origins å±æ§åæä¼å¯ç¨ãä»¥ä¸éç½®åè®¸æ¥èª example.com åç get å post è°ç¨ï¼\n\nmanagement.endpoints.web.cors.allowed-origins=https://example.com\nmanagement.endpoints.web.cors.allowed-methods=get,post\n\n\n\n# èªå®ä¹ç«¯ç¹\n\nå¦ææ·»å å¸¦æ @endpoint æ³¨éç @beanï¼åä»»ä½å¸¦æ @readoperationã@writeoperation æ @deleteoperation æ³¨éçæ¹æ³é½ä¼èªå¨éè¿ jmx å¬å¼ï¼å¹¶ä¸å¨ web åºç¨ç¨åºä¸­ï¼ä¹å¯ä»¥éè¿ http å¬å¼ãå¯ä»¥ä½¿ç¨ jerseyãspring mvc æ spring webflux éè¿ http å¬å¼ç«¯ç¹ãå¦æ jersey å spring mvc é½å¯ç¨ï¼åä½¿ç¨ spring mvcã\n\nä»¥ä¸ç¤ºä¾å¬å¼äºä¸ä¸ªè¿åèªå®ä¹å¯¹è±¡çè¯»åæä½ï¼\n\n@readoperation\npublic customdata getdata() {\n    return new customdata("test", 5);\n}\n\n\næ¨è¿å¯ä»¥ä½¿ç¨ @jmxendpoint æ @webendpoint ç¼åç¹å®ææ¯çç«¯ç¹ãè¿äºç«¯ç¹ä»éäºåèªçææ¯ãä¾å¦ï¼@webendpoint ä»éè¿ http èä¸æ¯éè¿ jmx å¬å¼ã\n\næ¨å¯ä»¥ä½¿ç¨ @endpointwebextension å @endpointjmxextension ç¼åç¹å®ææ¯çæ©å±ãè¿äºæ³¨éè®©æ¨å¯ä»¥æä¾ç¹å®ææ¯çæä½æ¥æ©åç°æç«¯ç¹ã\n\næåï¼å¦ææ¨éè¦è®¿é® web æ¡æ¶çåè½ï¼æ¨å¯ä»¥å®ç° servlet æ spring @controller å @restcontroller ç«¯ç¹ï¼ä½ä»£ä»·æ¯å®ä»¬æ æ³éè¿ jmx æä½¿ç¨ä¸åç web æ¡æ¶è·å¾ã\n\n\n# éè¿ http è¿è¡çæ§åç®¡ç\n\n\n# èªå®ä¹ç®¡çç«¯ç¹è·¯å¾\n\nå¦ææ¯ web åºç¨ï¼spring boot actuator ä¼èªå¨å°ææå¯ç¨çç«¯ç¹éè¿ http æ¹å¼æ´é²ãé»è®¤çº¦å®æ¯ä½¿ç¨åç¼ä¸º /actuator çç«¯ç¹ç id ä½ä¸º url è·¯å¾ãä¾å¦ï¼å¥åº·è¢«æ´é²ä¸º /actuator/healthã\n\nææ¶ï¼èªå®ä¹ç®¡çç«¯ç¹çåç¼å¾æç¨ãä¾å¦ï¼æ¨çåºç¨ç¨åºå¯è½å·²ç»å° /actuator ç¨äºå¶ä»ç®çãæ¨å¯ä»¥ä½¿ç¨ management.endpoints.web.base-path å±æ§æ´æ¹ç®¡çç«¯ç¹çåç¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nmanagement.endpoints.web.base-path=/manage\n\n\nè¯¥ç¤ºä¾å°ç«¯ç¹ä» /actuator/{id} æ´æ¹ä¸º /manage/{id}ï¼ä¾å¦ï¼/manage/infoï¼ã\n\n\n# èªå®ä¹ç®¡çæå¡å¨ç«¯å£\n\nmanagement.server.port=8081\n\n\n\n# éç½® ssl\n\nå½éç½®ä¸ºä½¿ç¨èªå®ä¹ç«¯å£æ¶ï¼è¿å¯ä»¥ä½¿ç¨åç§ management.server.ssl.* å±æ§ä¸ºç®¡çæå¡å¨éç½®èªå·±ç sslãä¾å¦ï¼è¿æ ·åå¯ä»¥è®©ç®¡çæå¡å¨å¨ä¸»åºç¨ç¨åºä½¿ç¨ https æ¶éè¿ http å¯ç¨ï¼å¦ä»¥ä¸å±æ§è®¾ç½®æç¤ºï¼\n\nserver.port=8443\nserver.ssl.enabled=true\nserver.ssl.key-store=classpath:store.jks\nserver.ssl.key-password=secret\nmanagement.server.port=8080\nmanagement.server.ssl.enabled=false\n\n\næèï¼ä¸»æå¡å¨åç®¡çæå¡å¨é½å¯ä»¥ä½¿ç¨ sslï¼ä½ä½¿ç¨ä¸åçå¯é¥å­å¨ï¼å¦ä¸æç¤ºï¼\n\nserver.port=8443\nserver.ssl.enabled=true\nserver.ssl.key-store=classpath:main.jks\nserver.ssl.key-password=secret\nmanagement.server.port=8080\nmanagement.server.ssl.enabled=true\nmanagement.server.ssl.key-store=classpath:management.jks\nmanagement.server.ssl.key-password=secret\n\n\n\n# èªå®ä¹ç®¡çæå¡å¨å°å\n\nmanagement.server.port=8081\nmanagement.server.address=127.0.0.1\n\n\n\n# ç¦ç¨ http ç«¯ç¹\n\nå¦ææ¨ä¸æ³éè¿ http æ¹å¼æ´é²ç«¯ç¹ï¼å¯ä»¥å°ç®¡çç«¯å£è®¾ç½®ä¸º -1ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nmanagement.server.port=-1\n\n\nä¹å¯ä»¥éè¿ä½¿ç¨ management.endpoints.web.exposure.exclude å±æ§æ¥å®ç°è¿ä¸ç¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nmanagement.endpoints.web.exposure.exclude=*\n\n\n\n# éè¿ jmx è¿è¡çæ§åç®¡ç\n\njava ç®¡çæ©å± (jmx) æä¾äºä¸ç§æ åæºå¶æ¥çè§åç®¡çåºç¨ç¨åºãé»è®¤æåµä¸ï¼æ­¤åè½æªå¯ç¨ãæ¨å¯ä»¥éè¿å° spring.jmx.enabled éç½®å±æ§è®¾ç½®ä¸º true æ¥æå¼å®ã spring boot å°æåéç mbeanserver æ´é²ä¸º id ä¸º mbeanserver ç beanãä½¿ç¨ spring jmx æ³¨éï¼@managedresourceã@managedattribute æ @managedoperationï¼æ³¨éçä»»ä½ bean é½ä¼æ´é²ç»å®ã\n\nå¦ææ¨çå¹³å°æä¾æ å mbeanserverï¼å spring boot ä¼ä½¿ç¨è¯¥æ åå¹¶å¨å¿è¦æ¶é»è®¤ä½¿ç¨ vm mbeanserverãå¦æä¸åé½å¤±è´¥äºï¼ååå»ºä¸ä¸ªæ°ç mbeanserverã\n\næå³æ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åé jmxautoconfiguration ç±»ã\n\né»è®¤æåµä¸ï¼spring boot è¿å°ç®¡çç«¯ç¹å¬å¼ä¸º org.springframework.boot åä¸ç jmx mbeanãè¦å®å¨æ§å¶ jmx åä¸­çç«¯ç¹æ³¨åï¼è¯·èèæ³¨åæ¨èªå·±ç endpointobjectnamefactory å®ç°ã\n\n\n# å®å¶å mbean names\n\nmbean çåç§°éå¸¸ç±ç«¯ç¹ç id çæãä¾å¦ï¼å¥åº·ç«¯ç¹å¬å¼ä¸º org.springframework.boot:type=endpoint,name=healthã\n\nå¦ææ¨çåºç¨ç¨åºåå«å¤ä¸ª spring applicationcontextï¼æ¨å¯è½ä¼åç°åç§°å²çªãè¦è§£å³æ­¤é®é¢ï¼æ¨å¯ä»¥å° spring.jmx.unique-names å±æ§è®¾ç½®ä¸º trueï¼ä»¥ä¾¿ mbean åç§°å§ç»æ¯å¯ä¸çã\n\nå¦æéè¦å®å¶ï¼è·¨åæå¦ä¸éç½®ï¼\n\nspring.jmx.unique-names=true\nmanagement.endpoints.jmx.domain=com.example.myapp\n\n\n\n# ç¦ç¨ jmx ç«¯ç¹\n\næ³ç¦ç¨ jmx ç«¯ç¹ï¼å¯ä»¥æå¦ä¸éç½®ï¼\n\nmanagement.endpoints.jmx.exposure.exclude=*\n\n\n\n# å° jolokia ç¨äºåºäº http ç jmx\n\njolokia æ¯ä¸ä¸ª jmx-http çæ¡¥æ¥å·¥å·ï¼å®æä¾äºå¦ä¸ç§è®¿é® jmx bean çæ¹æ³ãè¦ä½¿ç¨ jolokiaï¼éè¦åæ·»å ä¾èµï¼\n\n<dependency>\n    <groupid>org.jolokia</groupid>\n    <artifactid>jolokia-core</artifactid>\n</dependency\n\n\nç¶åï¼æ¨å¯ä»¥éè¿å° jolokia æ * æ·»å å° management.endpoints.web.exposure.include å±æ§æ¥æ´é² jolokia ç«¯ç¹ãç¶åï¼æ¨å¯ä»¥å¨ç®¡ç http æå¡å¨ä¸ä½¿ç¨ /actuator/jolokia è®¿é®å®ã\n\n\n# æ¥å¿\n\nspring boot actuator æ¯ææ¥çåéç½®åºç¨æ¥å¿çº§å«ã\n\næ¥å¿çº§å«çå¯éå¼å¦ä¸ï¼\n\n * trace\n * debug\n * info\n * warn\n * error\n * fatal\n * off\n * null\n\nnull è¡¨ç¤ºæ²¡ææ¾å¼éç½®ã\n\n\n# ææ \n\n\n# å®¡è®¡\n\nspring boot actuator æ¯æç®åçå®¡è®¡åè½ãå¦æåºç¨ä¸­å¯ç¨äº spring securityï¼spring boot actuator å°±ä¼åå¸å®å¨äºä»¶ï¼å¦ï¼âèº«ä»½éªè¯æåâãâå¤±è´¥âåâè®¿é®è¢«æç»âå¼å¸¸ï¼ã\n\nå¯ä»¥éè¿å¨åºç¨çéç½®ä¸­æä¾ auditeventrepository ç±»åç bean æ¥å¯ç¨å®¡è®¡ãä¸ºæ¹ä¾¿èµ·è§ï¼spring boot æä¾äºä¸ä¸ª inmemoryauditeventrepositoryã inmemoryauditeventrepository çåè½æéï¼å»ºè®®ä»å°å¶ç¨äºå¼åç¯å¢ã\n\nå¦æè¦èªå®ä¹å®å¨äºä»¶ï¼å¯ä»¥æä¾ abstractauthenticationauditlistener å abstractauthorizationauditlistener å®ç°ã\n\næ­¤å¤ï¼è¿å¯ä»¥å°å®¡è®¡æå¡ç¨äºä¸å¡æ´»å¨ãä¸ºæ­¤ï¼è¦ä¹å° auditeventrepository bean æ³¨å¥ç»ä»¶å¹¶ç´æ¥ä½¿ç¨å®ï¼è¦ä¹ä½¿ç¨ spring applicationeventpublisher åå¸ auditapplicationeventï¼éè¿å®ç° applicationeventpublisherawareï¼ã\n\n\n# http è¿½è¸ª\n\nç¨æ·å¯ä»¥éè¿å¨åºç¨ä¸­æä¾ httptracerepository ç±»åç bean æ¥å¯ç¨ http è·è¸ªãspring boot æä¾äºåç½®ç inmemoryhttptracerepositoryï¼å®å¯ä»¥å­å¨æè¿ 100 æ¬¡ï¼é»è®¤ï¼è¯·æ±-ååºçè¿½è¸ªæ°æ®ãä¸å¶ä» http è¿½è¸ªè§£å³æ¹æ¡ç¸æ¯ï¼inmemoryhttptracerepository æ¯è¾åéï¼å»ºè®®ä»ç¨äºå¼åç¯å¢ãå¯¹äºçäº§ç¯å¢ï¼å»ºè®®ä½¿ç¨ zipkin æ spring cloud sleuthã\n\næèï¼å¯ä»¥èªå®ä¹ httptracerepositoryã\n\n\n# å¤ççæ§\n\nå¨ spring-boot æ¨¡åä¸­ï¼æ¨å¯ä»¥æ¾å°ä¸¤ä¸ªç±»æ¥åå»ºå¯¹è¿ç¨çæ§æç¨çæä»¶ï¼\n\n * applicationpidfilewriter åå»ºä¸ä¸ªåå«åºç¨ç¨åº pid çæä»¶ï¼é»è®¤æåµä¸ï¼å¨åºç¨ç¨åºç®å½ä¸­ï¼æä»¶åä¸º application.pidï¼ã\n * webserverportfilewriter åå»ºä¸ä¸ªæä»¶ï¼æå¤ä¸ªæä»¶ï¼ï¼å¶ä¸­åå«æ­£å¨è¿è¡ç web æå¡å¨çç«¯å£ï¼é»è®¤æåµä¸ï¼å¨åºç¨ç¨åºç®å½ä¸­ï¼æä»¶åä¸º application.portï¼ã\n\n\n# åèèµæ\n\n * spring boot å®æ¹ææ¡£ä¹ production-ready features',charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SpringBoot ä¹ banner å®å¶",frontmatter:{title:"SpringBoot ä¹ banner å®å¶",date:"2018-12-21T23:22:44.000Z",order:21,categories:["Java","æ¡æ¶","Spring","Springå¶ä»"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/bac2ce/"},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/99.Spring%E5%85%B6%E4%BB%96/21.SpringBoot%E4%B9%8Bbanner.html",relativePath:"01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/21.SpringBootä¹banner.md",key:"v-65fa0e1c",path:"/pages/bac2ce/",headers:[{level:2,title:"ç®ä»",slug:"ç®ä»",normalizedTitle:"ç®ä»",charIndex:29},{level:2,title:"åé",slug:"åé",normalizedTitle:"åé",charIndex:632},{level:2,title:"éç½®",slug:"éç½®",normalizedTitle:"éç½®",charIndex:2202},{level:2,title:"ç¼ç¨",slug:"ç¼ç¨",normalizedTitle:"ç¼ç¨",charIndex:2849},{level:2,title:"ç¤ºä¾æºç ",slug:"ç¤ºä¾æºç ",normalizedTitle:"ç¤ºä¾æºç ",charIndex:3070},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:3106}],headersStr:"ç®ä» åé éç½® ç¼ç¨ ç¤ºä¾æºç  åèèµæ",content:"# SpringBoot ä¹ banner å®å¶\n\n\n# ç®ä»\n\nSpring Boot å¯å¨æ¶é»è®¤ä¼æ¾ç¤ºä»¥ä¸ LOGOï¼\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.1.1.RELEASE)\n\n\nå®éä¸ï¼Spring Boot æ¯æèªå®ä¹ logo çåè½ã\n\nè®©æä»¬æ¥ççå¦ä½å®ç°çã\n\nåªè¦ä½ å¨ resources ç®å½ä¸æ¾ç½®åä¸º banner.txtãbanner.gif ãbanner.jpg æ banner.png çæä»¶ï¼Spring Boot ä¼èªå¨å è½½ï¼å°å¶ä½ä¸ºå¯å¨æ¶æå°ç logoã\n\n * å¯¹äºææ¬æä»¶ï¼Spring Boot ä¼å°å¶ç´æ¥è¾åºã\n * å¯¹äºå¾åæä»¶ï¼ banner.gif ãbanner.jpg æ banner.png ï¼ï¼Spring Boot ä¼å°å¾åè½¬ä¸º ASCII å­ç¬¦ï¼ç¶åè¾åºã\n\n\n# åé\n\nbanner.txt æä»¶ä¸­è¿å¯ä»¥ä½¿ç¨åéæ¥è®¾ç½®å­ä½ãé¢è²ãçæ¬å·ã\n\nåé                                                            æè¿°\n${application.version}                                        MANIFEST.MF ä¸­å®ä¹ççæ¬ãå¦ï¼1.0\n${application.formatted-version}                              MANIFEST.MF ä¸­å®ä¹ççæ¬ï¼å¹¶æ·»å ä¸ä¸ª v åç¼ãå¦ï¼v1.0\n${spring-boot.version}                                        Spring Boot çæ¬ãå¦ï¼2.1.1.RELEASE.\n${spring-boot.formatted-version}                              Spring Boot çæ¬ï¼å¹¶æ·»å ä¸ä¸ª v åç¼ãå¦ï¼v2.1.1.RELEASE\n${Ansi.NAME} (or ${AnsiColor.NAME}, ${AnsiBackground.NAME},   ANSI é¢è²ãå­ä½ãæ´å¤ç»èï¼åèï¼AnsiPropertySourceã\n${AnsiStyle.NAME})\n${application.title}                                          MANIFEST.MF ä¸­å®ä¹çåºç¨åã\n\nç¤ºä¾ï¼\n\nå¨ Spring Boot é¡¹ç®ä¸­ç resources ç®å½ä¸æ·»å ä¸ä¸ªåä¸º banner.txt çæä»¶ï¼åå®¹å¦ä¸ï¼\n\n${AnsiColor.BRIGHT_YELLOW}${AnsiStyle.BOLD}\n ________  ___  ___  ________   ___       __   ___  ___\n|\\   ___ \\|\\  \\|\\  \\|\\   ___  \\|\\  \\     |\\  \\|\\  \\|\\  \\\n\\ \\  \\_|\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\    \\ \\  \\ \\  \\\\\\  \\\n \\ \\  \\ \\\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\  __\\ \\  \\ \\  \\\\\\  \\\n  \\ \\  \\_\\\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\|\\__\\_\\  \\ \\  \\\\\\  \\\n   \\ \\_______\\ \\_______\\ \\__\\\\ \\__\\ \\____________\\ \\_______\\\n    \\|_______|\\|_______|\\|__| \\|__|\\|____________|\\|_______|\n${AnsiBackground.WHITE}${AnsiColor.RED}${AnsiStyle.UNDERLINE}\n:: Spring Boot ::             (v${spring-boot.version})\n:: Spring Boot Tutorial ::    (v1.0.0)\n\n\n> æ³¨ï¼${} è®¾ç½®å­ä½é¢è²çåéä¹é´ä¸è½æ¢è¡æç©ºæ ¼åéï¼å¦åä¼å¯¼è´é¤æåä¸ä¸ªåéå¤ï¼é½ä¸çæã\n\nå¯å¨åºç¨åï¼æ§å¶å°å°æå°å¦ä¸ logoï¼\n\næ¨èä¸¤ä¸ªçæå­ç¬¦ç»çç½ç«ï¼å¯ä»¥å°çæçå­ç¬¦ä¸²æ¾å¥è¿ä¸ªbanner.txt æä»¶ï¼\n\n * http://www.network-science.de/ascii/\n * http://patorjk.com/software/taag/\n\n\n# éç½®\n\napplication.properties ä¸­ä¸ Banner ç¸å³çéç½®ï¼\n\n# banner æ¨¡å¼ãæä¸ç§æ¨¡å¼ï¼console/log/off\n# console æå°å°æ§å¶å°ï¼éè¿ System.outï¼\n# log - æå°å°æ¥å¿ä¸­\n# off - å³é­æå°\nspring.main.banner-mode = off\n# banner æä»¶ç¼ç \nspring.banner.charset = UTF-8\n# banner ææ¬æä»¶è·¯å¾\nspring.banner.location = classpath:banner.txt\n# banner å¾åæä»¶è·¯å¾ï¼å¯ä»¥éæ© png,jpg,gif æä»¶ï¼\nspring.banner.image.location = classpath:banner.gif\nused).\n# å¾å banner çå®½åº¦ï¼å­ç¬¦æ°ï¼\nspring.banner.image.width = 76\n# å¾å banner çé«åº¦ï¼å­ç¬¦æ°ï¼\nspring.banner.image.height =\n# å¾å banner çå·¦è¾¹çï¼å­ç¬¦æ°ï¼\nspring.banner.image.margin = 2\n# æ¯å¦å°å¾åè½¬ä¸ºé»è²æ§å¶å°ä¸»é¢\nspring.banner.image.invert = false\n\n\nå½ç¶ï¼ä½ ä¹å¯ä»¥å¨ YAML æä»¶ä¸­éç½®ï¼ä¾å¦ï¼\n\nspring:\n  main:\n    banner-mode: off\n\n\n\n# ç¼ç¨\n\né»è®¤ï¼Spring Boot ä¼æ³¨åä¸ä¸ª SpringBootBanner çåä¾ Beanï¼ç¨æ¥è´è´£æå° Bannerã\n\nå¦ææ³å®å¨ä¸ªäººå®å¶ Bannerï¼å¯ä»¥è¿ä¹åï¼åå®ç° org.springframework.boot.Banner#printBanner æ¥å£æ¥èªå·±å®å¶ Bannerãå¨å°è¿ä¸ª Banner éè¿ SpringApplication.setBanner(â¦) æ¹æ³æ³¨å¥ Spring Bootã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-banner\n\n\n# åèèµæ\n\n * Spring Boot å®æ¹ææ¡£ä¹ Customizing the Banner",normalizedContent:"# springboot ä¹ banner å®å¶\n\n\n# ç®ä»\n\nspring boot å¯å¨æ¶é»è®¤ä¼æ¾ç¤ºä»¥ä¸ logoï¼\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: spring boot ::        (v2.1.1.release)\n\n\nå®éä¸ï¼spring boot æ¯æèªå®ä¹ logo çåè½ã\n\nè®©æä»¬æ¥ççå¦ä½å®ç°çã\n\nåªè¦ä½ å¨ resources ç®å½ä¸æ¾ç½®åä¸º banner.txtãbanner.gif ãbanner.jpg æ banner.png çæä»¶ï¼spring boot ä¼èªå¨å è½½ï¼å°å¶ä½ä¸ºå¯å¨æ¶æå°ç logoã\n\n * å¯¹äºææ¬æä»¶ï¼spring boot ä¼å°å¶ç´æ¥è¾åºã\n * å¯¹äºå¾åæä»¶ï¼ banner.gif ãbanner.jpg æ banner.png ï¼ï¼spring boot ä¼å°å¾åè½¬ä¸º ascii å­ç¬¦ï¼ç¶åè¾åºã\n\n\n# åé\n\nbanner.txt æä»¶ä¸­è¿å¯ä»¥ä½¿ç¨åéæ¥è®¾ç½®å­ä½ãé¢è²ãçæ¬å·ã\n\nåé                                                            æè¿°\n${application.version}                                        manifest.mf ä¸­å®ä¹ççæ¬ãå¦ï¼1.0\n${application.formatted-version}                              manifest.mf ä¸­å®ä¹ççæ¬ï¼å¹¶æ·»å ä¸ä¸ª v åç¼ãå¦ï¼v1.0\n${spring-boot.version}                                        spring boot çæ¬ãå¦ï¼2.1.1.release.\n${spring-boot.formatted-version}                              spring boot çæ¬ï¼å¹¶æ·»å ä¸ä¸ª v åç¼ãå¦ï¼v2.1.1.release\n${ansi.name} (or ${ansicolor.name}, ${ansibackground.name},   ansi é¢è²ãå­ä½ãæ´å¤ç»èï¼åèï¼ansipropertysourceã\n${ansistyle.name})\n${application.title}                                          manifest.mf ä¸­å®ä¹çåºç¨åã\n\nç¤ºä¾ï¼\n\nå¨ spring boot é¡¹ç®ä¸­ç resources ç®å½ä¸æ·»å ä¸ä¸ªåä¸º banner.txt çæä»¶ï¼åå®¹å¦ä¸ï¼\n\n${ansicolor.bright_yellow}${ansistyle.bold}\n ________  ___  ___  ________   ___       __   ___  ___\n|\\   ___ \\|\\  \\|\\  \\|\\   ___  \\|\\  \\     |\\  \\|\\  \\|\\  \\\n\\ \\  \\_|\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\    \\ \\  \\ \\  \\\\\\  \\\n \\ \\  \\ \\\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\  __\\ \\  \\ \\  \\\\\\  \\\n  \\ \\  \\_\\\\ \\ \\  \\\\\\  \\ \\  \\\\ \\  \\ \\  \\|\\__\\_\\  \\ \\  \\\\\\  \\\n   \\ \\_______\\ \\_______\\ \\__\\\\ \\__\\ \\____________\\ \\_______\\\n    \\|_______|\\|_______|\\|__| \\|__|\\|____________|\\|_______|\n${ansibackground.white}${ansicolor.red}${ansistyle.underline}\n:: spring boot ::             (v${spring-boot.version})\n:: spring boot tutorial ::    (v1.0.0)\n\n\n> æ³¨ï¼${} è®¾ç½®å­ä½é¢è²çåéä¹é´ä¸è½æ¢è¡æç©ºæ ¼åéï¼å¦åä¼å¯¼è´é¤æåä¸ä¸ªåéå¤ï¼é½ä¸çæã\n\nå¯å¨åºç¨åï¼æ§å¶å°å°æå°å¦ä¸ logoï¼\n\næ¨èä¸¤ä¸ªçæå­ç¬¦ç»çç½ç«ï¼å¯ä»¥å°çæçå­ç¬¦ä¸²æ¾å¥è¿ä¸ªbanner.txt æä»¶ï¼\n\n * http://www.network-science.de/ascii/\n * http://patorjk.com/software/taag/\n\n\n# éç½®\n\napplication.properties ä¸­ä¸ banner ç¸å³çéç½®ï¼\n\n# banner æ¨¡å¼ãæä¸ç§æ¨¡å¼ï¼console/log/off\n# console æå°å°æ§å¶å°ï¼éè¿ system.outï¼\n# log - æå°å°æ¥å¿ä¸­\n# off - å³é­æå°\nspring.main.banner-mode = off\n# banner æä»¶ç¼ç \nspring.banner.charset = utf-8\n# banner ææ¬æä»¶è·¯å¾\nspring.banner.location = classpath:banner.txt\n# banner å¾åæä»¶è·¯å¾ï¼å¯ä»¥éæ© png,jpg,gif æä»¶ï¼\nspring.banner.image.location = classpath:banner.gif\nused).\n# å¾å banner çå®½åº¦ï¼å­ç¬¦æ°ï¼\nspring.banner.image.width = 76\n# å¾å banner çé«åº¦ï¼å­ç¬¦æ°ï¼\nspring.banner.image.height =\n# å¾å banner çå·¦è¾¹çï¼å­ç¬¦æ°ï¼\nspring.banner.image.margin = 2\n# æ¯å¦å°å¾åè½¬ä¸ºé»è²æ§å¶å°ä¸»é¢\nspring.banner.image.invert = false\n\n\nå½ç¶ï¼ä½ ä¹å¯ä»¥å¨ yaml æä»¶ä¸­éç½®ï¼ä¾å¦ï¼\n\nspring:\n  main:\n    banner-mode: off\n\n\n\n# ç¼ç¨\n\né»è®¤ï¼spring boot ä¼æ³¨åä¸ä¸ª springbootbanner çåä¾ beanï¼ç¨æ¥è´è´£æå° bannerã\n\nå¦ææ³å®å¨ä¸ªäººå®å¶ bannerï¼å¯ä»¥è¿ä¹åï¼åå®ç° org.springframework.boot.banner#printbanner æ¥å£æ¥èªå·±å®å¶ bannerãå¨å°è¿ä¸ª banner éè¿ springapplication.setbanner(â¦) æ¹æ³æ³¨å¥ spring bootã\n\n\n# ç¤ºä¾æºç \n\n> ç¤ºä¾æºç ï¼spring-boot-banner\n\n\n# åèèµæ\n\n * spring boot å®æ¹ææ¡£ä¹ customizing the banner",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Spring å¶ä»",frontmatter:{title:"Spring å¶ä»",date:"2020-02-26T23:48:06.000Z",categories:["Java","æ¡æ¶","Spring","Springå¶ä»"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/6bb8c1/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/99.Spring%E5%85%B6%E4%BB%96/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/README.md",key:"v-1a8a1886",path:"/pages/6bb8c1/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:16},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:89},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:268}],headersStr:"ð åå®¹ ð èµæ ðª ä¼ é",content:"# Spring å¶ä»\n\n\n# ð åå®¹\n\n * Spring4 åçº§\n * SpringBoot ä¹ banner\n * SpringBoot ä¹ Actuator\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Github\n * ä¹¦ç±\n   * ãSpring In Actionã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",normalizedContent:"# spring å¶ä»\n\n\n# ð åå®¹\n\n * spring4 åçº§\n * springboot ä¹ banner\n * springboot ä¹ actuator\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring framework å®æ¹ææ¡£\n   * spring github\n * ä¹¦ç±\n   * ãspring in actionã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾ ð¯ æçåå®¢ â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"SPRING-TUTORIAL",frontmatter:{title:"SPRING-TUTORIAL",date:"2022-06-14T09:37:30.000Z",categories:["Java","æ¡æ¶","Spring"],tags:["Java","æ¡æ¶","Spring","SpringBoot"],permalink:"/pages/a1a3d3/",hidden:!0,index:!1},regularPath:"/01.Java/13.%E6%A1%86%E6%9E%B6/01.Spring/",relativePath:"01.Java/13.æ¡æ¶/01.Spring/README.md",key:"v-07a8e71a",path:"/pages/a1a3d3/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:149},{level:3,title:"ç»¼å",slug:"ç»¼å",normalizedTitle:"ç»¼å",charIndex:159},{level:3,title:"æ ¸å¿",slug:"æ ¸å¿",normalizedTitle:"æ ¸å¿",charIndex:231},{level:3,title:"æ°æ®",slug:"æ°æ®",normalizedTitle:"æ°æ®",charIndex:365},{level:3,title:"Web",slug:"web",normalizedTitle:"web",charIndex:765},{level:3,title:"IO",slug:"io",normalizedTitle:"io",charIndex:816},{level:3,title:"éæ",slug:"éæ",normalizedTitle:"éæ",charIndex:683},{level:3,title:"å¶ä»",slug:"å¶ä»",normalizedTitle:"å¶ä»",charIndex:948},{level:2,title:"ð» ç¤ºä¾",slug:"ð»-ç¤ºä¾",normalizedTitle:"ð» ç¤ºä¾",charIndex:1018},{level:3,title:"æ ¸å¿ç¯ç¤ºä¾",slug:"æ ¸å¿ç¯ç¤ºä¾",normalizedTitle:"æ ¸å¿ç¯ç¤ºä¾",charIndex:1028},{level:3,title:"æ°æ®ç¯ç¤ºä¾",slug:"æ°æ®ç¯ç¤ºä¾",normalizedTitle:"æ°æ®ç¯ç¤ºä¾",charIndex:1650},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:3026},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:3228}],headersStr:"ð åå®¹ ç»¼å æ ¸å¿ æ°æ® Web IO éæ å¶ä» ð» ç¤ºä¾ æ ¸å¿ç¯ç¤ºä¾ æ°æ®ç¯ç¤ºä¾ ð èµæ ðª ä¼ é",content:"# SPRING-TUTORIAL\n\n\n\n> ð spring-tutorial æ¯ä¸ä¸ª Spring & Spring Boot æç¨ã\n> \n>  * ð é¡¹ç®åæ­¥ç»´æ¤ï¼Github | Gitee\n>  * ð çµå­ä¹¦éè¯»ï¼Github Pages | Gitee Pages\n\n\n# ð åå®¹\n\n\n# ç»¼å\n\n * Spring æ¦è¿°\n * SpringBoot ç¥è¯å¾è°±\n * SpringBoot åºæ¬åç\n * Spring é¢è¯\n\n\n# æ ¸å¿\n\n * Spring Bean\n * Spring IoC\n * Spring ä¾èµæ¥æ¾\n * Spring ä¾èµæ³¨å¥\n * Spring IoC ä¾èµæ¥æº\n * Spring Bean ä½ç¨å\n * Spring Bean çå½å¨æ\n * Spring éç½®åæ°æ®\n * Spring AOP\n * Spring èµæºç®¡ç\n * Spring æ ¡éª\n * Spring æ°æ®ç»å®\n * Spring ç±»åè½¬æ¢\n * Spring EL è¡¨è¾¾å¼\n * Spring äºä»¶\n * Spring å½éå\n * Spring æ³åå¤ç\n * Spring æ³¨è§£\n * Spring Environment æ½è±¡\n * SpringBoot æç¨ä¹å¿«éå¥é¨\n * SpringBoot ä¹å±æ§å è½½\n * SpringBoot ä¹ Profile\n\n\n# æ°æ®\n\n * Spring ä¹æ°æ®æº\n * Spring ä¹ JDBC\n * Spring ä¹äºå¡\n * Spring ä¹ JPA\n * Spring éæ Mybatis\n * Spring è®¿é® Redis\n * Spring è®¿é® MongoDB\n * Spring è®¿é® Elasticsearch\n\n\n# Web\n\n * Spring WebMvc\n * SpringBoot ä¹åºç¨ EasyUI\n\n\n# IO\n\n * SpringBoot ä¹å¼æ­¥è¯·æ±\n * SpringBoot ä¹ Json\n * SpringBoot ä¹é®ä»¶\n\n\n# éæ\n\n * Spring éæç¼å­ä¸­é´ä»¶\n * Spring éæå®æ¶ä»»å¡ä¸­é´ä»¶\n * Spring éæ Dubbo\n\n\n# å¶ä»\n\n * Spring4 åçº§\n * SpringBoot ä¹ banner\n * SpringBoot ä¹ Actuator\n\n\n# ð» ç¤ºä¾\n\n\n# æ ¸å¿ç¯ç¤ºä¾\n\n * spring-core-actuator - Spring åºç¨çæ§ç¤ºä¾ã\n * spring-core-aop - Spring AOP ç¼ç¨ç¤ºä¾ã\n * spring-core-async - Spring ä½¿ç¨å¼æ­¥æ¥å£ç¤ºä¾ã\n * spring-core-banner - Spring å®å¶å¯å¨æ¶çè¾åº Logoã\n * spring-core-bean - Spring ç®¡ç JavaBean çå½å¨æç¤ºä¾ã\n * spring-core-conversion - Spring æ°æ®è½¬æ¢ç¤ºä¾ã\n * spring-core-data-binding - Spring æ°æ®ç»å®ç¤ºä¾ã\n * spring-core-ioc - Spring IOC ç¤ºä¾ã\n * spring-core-profile - å¨ Spring ä¸­æ ¹æ® profile å¨ä¸åçç¯å¢ä¸æ§è¡ä¸åçè¡ä¸ºã\n * spring-core-property - å¨æ¹ä½çæ¼ç¤º Spring å è½½å±æ§çæ¹å¼ï¼è®°è½½ properties å yaml ä¸¤ç§æä»¶ï¼éè¿ @Valueã@ConfigurationPropertiesãEnvironment è¯»åå±æ§ã\n * spring-core-resource - Spring èµæºå è½½ç¤ºä¾ã\n * spring-core-validation - Spring æ°æ®æ ¡éªç¤ºä¾ã\n\n\n# æ°æ®ç¯ç¤ºä¾\n\n * JDBC\n   * spring-data-jdbc-basics - Spring Boot ä»¥ JDBC æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ JdbcTemplate æ§è¡åºæ¬ç CRUD æä½ã\n   * spring-data-jdbc-druid - SpringBoot ä½¿ç¨ Druid ä½ä¸ºæ°æ®åºè¿æ¥æ± ã\n   * spring-data-jdbc-multi-datasource - SpringBoot è¿æ¥å¤æ°æ®æºç¤ºä¾ã\n   * spring-data-jdbc-xml - Spring ä»¥ JDBC æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ JdbcTemplate æ§è¡åºæ¬ç CRUD æä½ã\n * ORM\n   * spring-data-orm-jpa - SpringBoot ä½¿ç¨ JPA ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis - Spring ä½¿ç¨ MyBatis ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-mapper - SpringBoot ä½¿ç¨ MyBatis + Mapper + PageHelper ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-multi-datasource - SpringBoot è¿æ¥å¤æ°æ®æºï¼å¹¶ä½¿ç¨ MyBatis Plus ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-plus - SpringBoot ä½¿ç¨ MyBatis Plus ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n * Nosql\n   * spring-data-nosql-basics - Spring è®¿é®åç§ NoSQL çç¤ºä¾ã\n   * spring-data-nosql-mongodb - SpringBoot è®¿é® MongoDB çç¤ºä¾ã\n   * spring-data-nosql-redis - SpringBoot è®¿é® Redis åèç¹ãéç¾¤çç¤ºä¾ã\n   * spring-data-nosql-elasticsearch - SpringBoot è®¿é® Elasticsearch çç¤ºä¾ã\n   * spring-data-nosql-hdfs - SpringBoot è®¿é® HDFS çç¤ºä¾ã\n * Cache\n   * spring-data-cache-basics - SpringBoot é»è®¤ç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-j2cache - SpringBoot ä½¿ç¨ j2cache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-jetcache - SpringBoot ä½¿ç¨ jetcache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n * ä¸­é´ä»¶\n   * spring-data-middleware-flyway - Spring ä½¿ç¨çæ¬ç®¡çä¸­é´ä»¶ Flyway ç¤ºä¾ã\n   * spring-data-middleware-sharding - Spring ä½¿ç¨ååºåè¡¨ä¸­é´ä»¶ç¤ºä¾ã\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Github\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Boot å®æ¹ææ¡£\n * ä¹¦ç±\n   * ã Spring å®æï¼ç¬¬ 5 çï¼ã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾",normalizedContent:"# spring-tutorial\n\n\n\n> ð spring-tutorial æ¯ä¸ä¸ª spring & spring boot æç¨ã\n> \n>  * ð é¡¹ç®åæ­¥ç»´æ¤ï¼github | gitee\n>  * ð çµå­ä¹¦éè¯»ï¼github pages | gitee pages\n\n\n# ð åå®¹\n\n\n# ç»¼å\n\n * spring æ¦è¿°\n * springboot ç¥è¯å¾è°±\n * springboot åºæ¬åç\n * spring é¢è¯\n\n\n# æ ¸å¿\n\n * spring bean\n * spring ioc\n * spring ä¾èµæ¥æ¾\n * spring ä¾èµæ³¨å¥\n * spring ioc ä¾èµæ¥æº\n * spring bean ä½ç¨å\n * spring bean çå½å¨æ\n * spring éç½®åæ°æ®\n * spring aop\n * spring èµæºç®¡ç\n * spring æ ¡éª\n * spring æ°æ®ç»å®\n * spring ç±»åè½¬æ¢\n * spring el è¡¨è¾¾å¼\n * spring äºä»¶\n * spring å½éå\n * spring æ³åå¤ç\n * spring æ³¨è§£\n * spring environment æ½è±¡\n * springboot æç¨ä¹å¿«éå¥é¨\n * springboot ä¹å±æ§å è½½\n * springboot ä¹ profile\n\n\n# æ°æ®\n\n * spring ä¹æ°æ®æº\n * spring ä¹ jdbc\n * spring ä¹äºå¡\n * spring ä¹ jpa\n * spring éæ mybatis\n * spring è®¿é® redis\n * spring è®¿é® mongodb\n * spring è®¿é® elasticsearch\n\n\n# web\n\n * spring webmvc\n * springboot ä¹åºç¨ easyui\n\n\n# io\n\n * springboot ä¹å¼æ­¥è¯·æ±\n * springboot ä¹ json\n * springboot ä¹é®ä»¶\n\n\n# éæ\n\n * spring éæç¼å­ä¸­é´ä»¶\n * spring éæå®æ¶ä»»å¡ä¸­é´ä»¶\n * spring éæ dubbo\n\n\n# å¶ä»\n\n * spring4 åçº§\n * springboot ä¹ banner\n * springboot ä¹ actuator\n\n\n# ð» ç¤ºä¾\n\n\n# æ ¸å¿ç¯ç¤ºä¾\n\n * spring-core-actuator - spring åºç¨çæ§ç¤ºä¾ã\n * spring-core-aop - spring aop ç¼ç¨ç¤ºä¾ã\n * spring-core-async - spring ä½¿ç¨å¼æ­¥æ¥å£ç¤ºä¾ã\n * spring-core-banner - spring å®å¶å¯å¨æ¶çè¾åº logoã\n * spring-core-bean - spring ç®¡ç javabean çå½å¨æç¤ºä¾ã\n * spring-core-conversion - spring æ°æ®è½¬æ¢ç¤ºä¾ã\n * spring-core-data-binding - spring æ°æ®ç»å®ç¤ºä¾ã\n * spring-core-ioc - spring ioc ç¤ºä¾ã\n * spring-core-profile - å¨ spring ä¸­æ ¹æ® profile å¨ä¸åçç¯å¢ä¸æ§è¡ä¸åçè¡ä¸ºã\n * spring-core-property - å¨æ¹ä½çæ¼ç¤º spring å è½½å±æ§çæ¹å¼ï¼è®°è½½ properties å yaml ä¸¤ç§æä»¶ï¼éè¿ @valueã@configurationpropertiesãenvironment è¯»åå±æ§ã\n * spring-core-resource - spring èµæºå è½½ç¤ºä¾ã\n * spring-core-validation - spring æ°æ®æ ¡éªç¤ºä¾ã\n\n\n# æ°æ®ç¯ç¤ºä¾\n\n * jdbc\n   * spring-data-jdbc-basics - spring boot ä»¥ jdbc æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ jdbctemplate æ§è¡åºæ¬ç crud æä½ã\n   * spring-data-jdbc-druid - springboot ä½¿ç¨ druid ä½ä¸ºæ°æ®åºè¿æ¥æ± ã\n   * spring-data-jdbc-multi-datasource - springboot è¿æ¥å¤æ°æ®æºç¤ºä¾ã\n   * spring-data-jdbc-xml - spring ä»¥ jdbc æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ jdbctemplate æ§è¡åºæ¬ç crud æä½ã\n * orm\n   * spring-data-orm-jpa - springboot ä½¿ç¨ jpa ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis - spring ä½¿ç¨ mybatis ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-mapper - springboot ä½¿ç¨ mybatis + mapper + pagehelper ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-multi-datasource - springboot è¿æ¥å¤æ°æ®æºï¼å¹¶ä½¿ç¨ mybatis plus ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-plus - springboot ä½¿ç¨ mybatis plus ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n * nosql\n   * spring-data-nosql-basics - spring è®¿é®åç§ nosql çç¤ºä¾ã\n   * spring-data-nosql-mongodb - springboot è®¿é® mongodb çç¤ºä¾ã\n   * spring-data-nosql-redis - springboot è®¿é® redis åèç¹ãéç¾¤çç¤ºä¾ã\n   * spring-data-nosql-elasticsearch - springboot è®¿é® elasticsearch çç¤ºä¾ã\n   * spring-data-nosql-hdfs - springboot è®¿é® hdfs çç¤ºä¾ã\n * cache\n   * spring-data-cache-basics - springboot é»è®¤ç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-j2cache - springboot ä½¿ç¨ j2cache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-jetcache - springboot ä½¿ç¨ jetcache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n * ä¸­é´ä»¶\n   * spring-data-middleware-flyway - spring ä½¿ç¨çæ¬ç®¡çä¸­é´ä»¶ flyway ç¤ºä¾ã\n   * spring-data-middleware-sharding - spring ä½¿ç¨ååºåè¡¨ä¸­é´ä»¶ç¤ºä¾ã\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring github\n   * spring framework å®æ¹ææ¡£\n   * spring boot å®æ¹ææ¡£\n * ä¹¦ç±\n   * ã spring å®æï¼ç¬¬ 5 çï¼ã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"åç±»",frontmatter:{categoriesPage:!0,title:"åç±»",permalink:"/categories/",article:!1},regularPath:"/@pages/categoriesPage.html",relativePath:"@pages/categoriesPage.md",key:"v-7765fe32",path:"/categories/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"å½æ¡£",frontmatter:{archivesPage:!0,title:"å½æ¡£",permalink:"/archives/",article:!1},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-3d0b52f2",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"æ ç­¾",frontmatter:{tagsPage:!0,title:"æ ç­¾",permalink:"/tags/",article:!1},regularPath:"/@pages/tagsPage.html",relativePath:"@pages/tagsPage.md",key:"v-3b93de07",path:"/tags/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3},{title:"Home",frontmatter:{home:!0,heroImage:"img/bg.gif",heroText:"SPRING-TUTORIAL",tagline:"ð spring-tutorial æ¯ä¸ä¸ª Spring & Spring Boot æç¨ã",bannerBg:"none",postList:"none",footer:"CC-BY-SA-4.0 Licensed | Copyright Â© 2018-Now Dunwu"},regularPath:"/",relativePath:"README.md",key:"v-fe19e418",path:"/",headers:[{level:2,title:"ð åå®¹",slug:"ð-åå®¹",normalizedTitle:"ð åå®¹",charIndex:128},{level:3,title:"ç»¼å",slug:"ç»¼å",normalizedTitle:"ç»¼å",charIndex:138},{level:3,title:"æ ¸å¿",slug:"æ ¸å¿",normalizedTitle:"æ ¸å¿",charIndex:210},{level:3,title:"æ°æ®",slug:"æ°æ®",normalizedTitle:"æ°æ®",charIndex:344},{level:3,title:"Web",slug:"web",normalizedTitle:"web",charIndex:744},{level:3,title:"IO",slug:"io",normalizedTitle:"io",charIndex:871},{level:3,title:"éæ",slug:"éæ",normalizedTitle:"éæ",charIndex:662},{level:3,title:"å¶ä»",slug:"å¶ä»",normalizedTitle:"å¶ä»",charIndex:1003},{level:2,title:"ð» ç¤ºä¾",slug:"ð»-ç¤ºä¾",normalizedTitle:"ð» ç¤ºä¾",charIndex:1073},{level:3,title:"æ ¸å¿ç¯ç¤ºä¾",slug:"æ ¸å¿ç¯ç¤ºä¾",normalizedTitle:"æ ¸å¿ç¯ç¤ºä¾",charIndex:1083},{level:3,title:"æ°æ®ç¯ç¤ºä¾",slug:"æ°æ®ç¯ç¤ºä¾",normalizedTitle:"æ°æ®ç¯ç¤ºä¾",charIndex:1705},{level:2,title:"ð èµæ",slug:"ð-èµæ",normalizedTitle:"ð èµæ",charIndex:3081},{level:2,title:"ðª ä¼ é",slug:"ðª-ä¼ é",normalizedTitle:"ðª ä¼ é",charIndex:3283}],headersStr:"ð åå®¹ ç»¼å æ ¸å¿ æ°æ® Web IO éæ å¶ä» ð» ç¤ºä¾ æ ¸å¿ç¯ç¤ºä¾ æ°æ®ç¯ç¤ºä¾ ð èµæ ðª ä¼ é",content:"> ð spring-tutorial æ¯ä¸ä¸ª Spring & Spring Boot æç¨ã\n> \n>  * ð é¡¹ç®åæ­¥ç»´æ¤ï¼Github | Gitee\n>  * ð çµå­ä¹¦éè¯»ï¼Github Pages | Gitee Pages\n\n\n# ð åå®¹\n\n\n# ç»¼å\n\n * Spring æ¦è¿°\n * SpringBoot ç¥è¯å¾è°±\n * SpringBoot åºæ¬åç\n * Spring é¢è¯\n\n\n# æ ¸å¿\n\n * Spring Bean\n * Spring IoC\n * Spring ä¾èµæ¥æ¾\n * Spring ä¾èµæ³¨å¥\n * Spring IoC ä¾èµæ¥æº\n * Spring Bean ä½ç¨å\n * Spring Bean çå½å¨æ\n * Spring éç½®åæ°æ®\n * Spring AOP\n * Spring èµæºç®¡ç\n * Spring æ ¡éª\n * Spring æ°æ®ç»å®\n * Spring ç±»åè½¬æ¢\n * Spring EL è¡¨è¾¾å¼\n * Spring äºä»¶\n * Spring å½éå\n * Spring æ³åå¤ç\n * Spring æ³¨è§£\n * Spring Environment æ½è±¡\n * SpringBoot æç¨ä¹å¿«éå¥é¨\n * SpringBoot ä¹å±æ§å è½½\n * SpringBoot ä¹ Profile\n\n\n# æ°æ®\n\n * Spring ä¹æ°æ®æº\n * Spring ä¹ JDBC\n * Spring ä¹äºå¡\n * Spring ä¹ JPA\n * Spring éæ Mybatis\n * Spring è®¿é® Redis\n * Spring è®¿é® MongoDB\n * Spring è®¿é® Elasticsearch\n\n\n# Web\n\n * SpringWeb ç»¼è¿°\n * SpringWeb åºç¨\n * DispatcherServlet\n * Spring è¿æ»¤å¨\n * Spring è·¨å\n * Spring è§å¾\n * SpringBoot ä¹åºç¨ EasyUI\n\n\n# IO\n\n * SpringBoot ä¹å¼æ­¥è¯·æ±\n * SpringBoot ä¹ Json\n * SpringBoot ä¹é®ä»¶\n\n\n# éæ\n\n * Spring éæç¼å­ä¸­é´ä»¶\n * Spring éæå®æ¶ä»»å¡ä¸­é´ä»¶\n * Spring éæ Dubbo\n\n\n# å¶ä»\n\n * Spring4 åçº§\n * SpringBoot ä¹ banner\n * SpringBoot ä¹ Actuator\n\n\n# ð» ç¤ºä¾\n\n\n# æ ¸å¿ç¯ç¤ºä¾\n\n * spring-core-actuator - Spring åºç¨çæ§ç¤ºä¾ã\n * spring-core-aop - Spring AOP ç¼ç¨ç¤ºä¾ã\n * spring-core-async - Spring ä½¿ç¨å¼æ­¥æ¥å£ç¤ºä¾ã\n * spring-core-banner - Spring å®å¶å¯å¨æ¶çè¾åº Logoã\n * spring-core-bean - Spring ç®¡ç JavaBean çå½å¨æç¤ºä¾ã\n * spring-core-conversion - Spring æ°æ®è½¬æ¢ç¤ºä¾ã\n * spring-core-data-binding - Spring æ°æ®ç»å®ç¤ºä¾ã\n * spring-core-ioc - Spring IOC ç¤ºä¾ã\n * spring-core-profile - å¨ Spring ä¸­æ ¹æ® profile å¨ä¸åçç¯å¢ä¸æ§è¡ä¸åçè¡ä¸ºã\n * spring-core-property - å¨æ¹ä½çæ¼ç¤º Spring å è½½å±æ§çæ¹å¼ï¼è®°è½½ properties å yaml ä¸¤ç§æä»¶ï¼éè¿ @Valueã@ConfigurationPropertiesãEnvironment è¯»åå±æ§ã\n * spring-core-resource - Spring èµæºå è½½ç¤ºä¾ã\n * spring-core-validation - Spring æ°æ®æ ¡éªç¤ºä¾ã\n\n\n# æ°æ®ç¯ç¤ºä¾\n\n * JDBC\n   * spring-data-jdbc-basics - Spring Boot ä»¥ JDBC æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ JdbcTemplate æ§è¡åºæ¬ç CRUD æä½ã\n   * spring-data-jdbc-druid - SpringBoot ä½¿ç¨ Druid ä½ä¸ºæ°æ®åºè¿æ¥æ± ã\n   * spring-data-jdbc-multi-datasource - SpringBoot è¿æ¥å¤æ°æ®æºç¤ºä¾ã\n   * spring-data-jdbc-xml - Spring ä»¥ JDBC æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ JdbcTemplate æ§è¡åºæ¬ç CRUD æä½ã\n * ORM\n   * spring-data-orm-jpa - SpringBoot ä½¿ç¨ JPA ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis - Spring ä½¿ç¨ MyBatis ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-mapper - SpringBoot ä½¿ç¨ MyBatis + Mapper + PageHelper ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-multi-datasource - SpringBoot è¿æ¥å¤æ°æ®æºï¼å¹¶ä½¿ç¨ MyBatis Plus ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-plus - SpringBoot ä½¿ç¨ MyBatis Plus ä½ä¸º ORM æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n * Nosql\n   * spring-data-nosql-basics - Spring è®¿é®åç§ NoSQL çç¤ºä¾ã\n   * spring-data-nosql-mongodb - SpringBoot è®¿é® MongoDB çç¤ºä¾ã\n   * spring-data-nosql-redis - SpringBoot è®¿é® Redis åèç¹ãéç¾¤çç¤ºä¾ã\n   * spring-data-nosql-elasticsearch - SpringBoot è®¿é® Elasticsearch çç¤ºä¾ã\n   * spring-data-nosql-hdfs - SpringBoot è®¿é® HDFS çç¤ºä¾ã\n * Cache\n   * spring-data-cache-basics - SpringBoot é»è®¤ç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-j2cache - SpringBoot ä½¿ç¨ j2cache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-jetcache - SpringBoot ä½¿ç¨ jetcache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n * ä¸­é´ä»¶\n   * spring-data-middleware-flyway - Spring ä½¿ç¨çæ¬ç®¡çä¸­é´ä»¶ Flyway ç¤ºä¾ã\n   * spring-data-middleware-sharding - Spring ä½¿ç¨ååºåè¡¨ä¸­é´ä»¶ç¤ºä¾ã\n\n\n# ð èµæ\n\n * å®æ¹\n   * Spring å®ç½\n   * Spring Github\n   * Spring Framework å®æ¹ææ¡£\n   * Spring Boot å®æ¹ææ¡£\n * ä¹¦ç±\n   * ã Spring å®æï¼ç¬¬ 5 çï¼ã\n * æç¨\n   * ãå°é©¬å¥è®² Spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ Spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç IT ç¥è¯å¾è°± â¾ ð¯ éæçåå®¢ â¾",normalizedContent:"> ð spring-tutorial æ¯ä¸ä¸ª spring & spring boot æç¨ã\n> \n>  * ð é¡¹ç®åæ­¥ç»´æ¤ï¼github | gitee\n>  * ð çµå­ä¹¦éè¯»ï¼github pages | gitee pages\n\n\n# ð åå®¹\n\n\n# ç»¼å\n\n * spring æ¦è¿°\n * springboot ç¥è¯å¾è°±\n * springboot åºæ¬åç\n * spring é¢è¯\n\n\n# æ ¸å¿\n\n * spring bean\n * spring ioc\n * spring ä¾èµæ¥æ¾\n * spring ä¾èµæ³¨å¥\n * spring ioc ä¾èµæ¥æº\n * spring bean ä½ç¨å\n * spring bean çå½å¨æ\n * spring éç½®åæ°æ®\n * spring aop\n * spring èµæºç®¡ç\n * spring æ ¡éª\n * spring æ°æ®ç»å®\n * spring ç±»åè½¬æ¢\n * spring el è¡¨è¾¾å¼\n * spring äºä»¶\n * spring å½éå\n * spring æ³åå¤ç\n * spring æ³¨è§£\n * spring environment æ½è±¡\n * springboot æç¨ä¹å¿«éå¥é¨\n * springboot ä¹å±æ§å è½½\n * springboot ä¹ profile\n\n\n# æ°æ®\n\n * spring ä¹æ°æ®æº\n * spring ä¹ jdbc\n * spring ä¹äºå¡\n * spring ä¹ jpa\n * spring éæ mybatis\n * spring è®¿é® redis\n * spring è®¿é® mongodb\n * spring è®¿é® elasticsearch\n\n\n# web\n\n * springweb ç»¼è¿°\n * springweb åºç¨\n * dispatcherservlet\n * spring è¿æ»¤å¨\n * spring è·¨å\n * spring è§å¾\n * springboot ä¹åºç¨ easyui\n\n\n# io\n\n * springboot ä¹å¼æ­¥è¯·æ±\n * springboot ä¹ json\n * springboot ä¹é®ä»¶\n\n\n# éæ\n\n * spring éæç¼å­ä¸­é´ä»¶\n * spring éæå®æ¶ä»»å¡ä¸­é´ä»¶\n * spring éæ dubbo\n\n\n# å¶ä»\n\n * spring4 åçº§\n * springboot ä¹ banner\n * springboot ä¹ actuator\n\n\n# ð» ç¤ºä¾\n\n\n# æ ¸å¿ç¯ç¤ºä¾\n\n * spring-core-actuator - spring åºç¨çæ§ç¤ºä¾ã\n * spring-core-aop - spring aop ç¼ç¨ç¤ºä¾ã\n * spring-core-async - spring ä½¿ç¨å¼æ­¥æ¥å£ç¤ºä¾ã\n * spring-core-banner - spring å®å¶å¯å¨æ¶çè¾åº logoã\n * spring-core-bean - spring ç®¡ç javabean çå½å¨æç¤ºä¾ã\n * spring-core-conversion - spring æ°æ®è½¬æ¢ç¤ºä¾ã\n * spring-core-data-binding - spring æ°æ®ç»å®ç¤ºä¾ã\n * spring-core-ioc - spring ioc ç¤ºä¾ã\n * spring-core-profile - å¨ spring ä¸­æ ¹æ® profile å¨ä¸åçç¯å¢ä¸æ§è¡ä¸åçè¡ä¸ºã\n * spring-core-property - å¨æ¹ä½çæ¼ç¤º spring å è½½å±æ§çæ¹å¼ï¼è®°è½½ properties å yaml ä¸¤ç§æä»¶ï¼éè¿ @valueã@configurationpropertiesãenvironment è¯»åå±æ§ã\n * spring-core-resource - spring èµæºå è½½ç¤ºä¾ã\n * spring-core-validation - spring æ°æ®æ ¡éªç¤ºä¾ã\n\n\n# æ°æ®ç¯ç¤ºä¾\n\n * jdbc\n   * spring-data-jdbc-basics - spring boot ä»¥ jdbc æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ jdbctemplate æ§è¡åºæ¬ç crud æä½ã\n   * spring-data-jdbc-druid - springboot ä½¿ç¨ druid ä½ä¸ºæ°æ®åºè¿æ¥æ± ã\n   * spring-data-jdbc-multi-datasource - springboot è¿æ¥å¤æ°æ®æºç¤ºä¾ã\n   * spring-data-jdbc-xml - spring ä»¥ jdbc æ¹å¼è®¿é®å³ç³»åæ°æ®åºï¼éè¿ jdbctemplate æ§è¡åºæ¬ç crud æä½ã\n * orm\n   * spring-data-orm-jpa - springboot ä½¿ç¨ jpa ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis - spring ä½¿ç¨ mybatis ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-mapper - springboot ä½¿ç¨ mybatis + mapper + pagehelper ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-multi-datasource - springboot è¿æ¥å¤æ°æ®æºï¼å¹¶ä½¿ç¨ mybatis plus ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n   * spring-data-orm-mybatis-plus - springboot ä½¿ç¨ mybatis plus ä½ä¸º orm æ¡æ¶è®¿é®æ°æ®åºç¤ºä¾ã\n * nosql\n   * spring-data-nosql-basics - spring è®¿é®åç§ nosql çç¤ºä¾ã\n   * spring-data-nosql-mongodb - springboot è®¿é® mongodb çç¤ºä¾ã\n   * spring-data-nosql-redis - springboot è®¿é® redis åèç¹ãéç¾¤çç¤ºä¾ã\n   * spring-data-nosql-elasticsearch - springboot è®¿é® elasticsearch çç¤ºä¾ã\n   * spring-data-nosql-hdfs - springboot è®¿é® hdfs çç¤ºä¾ã\n * cache\n   * spring-data-cache-basics - springboot é»è®¤ç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-j2cache - springboot ä½¿ç¨ j2cache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n   * spring-data-cache-jetcache - springboot ä½¿ç¨ jetcache ä½ä¸ºç¼å­æ¡æ¶çç¤ºä¾ã\n * ä¸­é´ä»¶\n   * spring-data-middleware-flyway - spring ä½¿ç¨çæ¬ç®¡çä¸­é´ä»¶ flyway ç¤ºä¾ã\n   * spring-data-middleware-sharding - spring ä½¿ç¨ååºåè¡¨ä¸­é´ä»¶ç¤ºä¾ã\n\n\n# ð èµæ\n\n * å®æ¹\n   * spring å®ç½\n   * spring github\n   * spring framework å®æ¹ææ¡£\n   * spring boot å®æ¹ææ¡£\n * ä¹¦ç±\n   * ã spring å®æï¼ç¬¬ 5 çï¼ã\n * æç¨\n   * ãå°é©¬å¥è®² spring æ ¸å¿ç¼ç¨ææ³ã\n   * geekbang-lessons\n   * è·æå­¦ spring3\n\n\n# ðª ä¼ é\n\nâ¾ ð§ éæç it ç¥è¯å¾è°± â¾ ð¯ éæçåå®¢ â¾",charsets:{cjk:!0},lastUpdated:"2024/04/24, 07:33:33",lastUpdatedTimestamp:1713915213e3}],themeConfig:{nav:[{text:"ç»¼åç¯",link:"/01.Java/13.æ¡æ¶/01.Spring/00.Springç»¼å/"},{text:"æ ¸å¿ç¯",link:"/01.Java/13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/"},{text:"æ°æ®ç¯",link:"/01.Java/13.æ¡æ¶/01.Spring/02.Springæ°æ®/"},{text:"Webç¯",link:"/01.Java/13.æ¡æ¶/01.Spring/03.SpringWeb/"},{text:"IOç¯",link:"/01.Java/13.æ¡æ¶/01.Spring/04.SpringIO/"},{text:"éæç¯",link:"/01.Java/13.æ¡æ¶/01.Spring/05.Springéæ/"},{text:"å¶ä»",link:"/01.Java/13.æ¡æ¶/01.Spring/99.Springå¶ä»/"}],sidebarDepth:2,logo:"https://raw.githubusercontent.com/dunwu/images/master/common/dunwu-logo.png",repo:"dunwu/spring-tutorial",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",docsDir:"docs",editLinks:!0,editLinkText:"ð å¸®å©æ¹åæ­¤é¡µé¢ï¼",sidebar:{"/01.Java/":[{title:"æ¡æ¶",collapsable:!0,children:[{title:"Spring",collapsable:!0,children:[{title:"Springç»¼å",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/00.Springç»¼å/01.Springæ¦è¿°.md","Spring Framework ç»¼è¿°","/pages/9d3091/"],["13.æ¡æ¶/01.Spring/00.Springç»¼å/21.SpringBootç¥è¯å¾è°±.md","SpringBoot ç¥è¯å¾è°±","/pages/430f53/"],["13.æ¡æ¶/01.Spring/00.Springç»¼å/22.SpringBootåºæ¬åç.md","SpringBoot åºæ¬åç","/pages/dbf521/"],["13.æ¡æ¶/01.Spring/00.Springç»¼å/99.Springé¢è¯.md","Spring é¢è¯","/pages/db33b0/"]]},{title:"Springæ ¸å¿",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/01.SpringBean.md","Spring Bean","/pages/68097d/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/02.SpringIoC.md","Spring IoC","/pages/915530/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/03.Springä¾èµæ¥æ¾.md","Spring ä¾èµæ¥æ¾","/pages/9a6f6b/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/04.Springä¾èµæ³¨å¥.md","Spring ä¾èµæ³¨å¥","/pages/f61a1c/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/05.SpringIoCä¾èµæ¥æº.md","Spring IoC ä¾èµæ¥æº","/pages/a5f257/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/06.SpringBeanä½ç¨å.md","Spring Bean ä½ç¨å","/pages/8289f5/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/07.SpringBeançå½å¨æ.md","Spring Bean çå½å¨æ","/pages/4ab176/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/08.Springéç½®åæ°æ®.md","Spring éç½®åæ°æ®","/pages/55f315/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/09.Springåºç¨ä¸ä¸æçå½å¨æ.md","Spring åºç¨ä¸ä¸æçå½å¨æ","/pages/ad472e/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/10.SpringAop.md","Spring AOP","/pages/53aedb/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/20.Springèµæºç®¡ç.md","Spring èµæºç®¡ç","/pages/a1549f/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/21.Springæ ¡éª.md","Spring æ ¡éª","/pages/fe6aad/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/22.Springæ°æ®ç»å®.md","Spring æ°æ®ç»å®","/pages/267b4c/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/23.Springç±»åè½¬æ¢.md","Spring ç±»åè½¬æ¢","/pages/6662dc/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/24.SpringEL.md","Spring EL è¡¨è¾¾å¼","/pages/1f743f/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/25.Springäºä»¶.md","Spring äºä»¶","/pages/cca414/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/26.Springå½éå.md","Spring å½éå","/pages/b5b8ad/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/27.Springæ³åå¤ç.md","Spring æ³åå¤ç","/pages/175cbd/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/28.Springæ³¨è§£.md","Spring æ³¨è§£","/pages/b6556f/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/29.SpringEnvironmentæ½è±¡.md","Spring Environment æ½è±¡","/pages/03d838/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/31.SpringBootä¹å¿«éå¥é¨.md","SpringBoot ä¹å¿«éå¥é¨","/pages/950e4d/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/32.SpringBootä¹å±æ§å è½½.md","SpringBoot ä¹å±æ§å è½½è¯¦è§£","/pages/0fb992/"],["13.æ¡æ¶/01.Spring/01.Springæ ¸å¿/33.SpringBootä¹Profile.md","SpringBoot ä¹ Profile","/pages/cb598e/"]]},{title:"Springæ°æ®",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/02.Springæ°æ®/01.Springä¹æ°æ®æº.md","Spring ä¹æ°æ®æº","/pages/1b774c/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/02.Springä¹JDBC.md","Spring ä¹ JDBC","/pages/cf19fd/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/03.Springä¹äºå¡.md","Spring ä¹äºå¡","/pages/128c54/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/04.Springä¹JPA.md","Spring ä¹ JPA","/pages/a03d7b/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/10.SpringéæMybatis.md","Spring éæ Mybatis","/pages/88219e/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/20.SpringDataç»¼å.md","Spring Data ç»¼å","/pages/191cdb/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/21.Springè®¿é®Redis.md","Spring è®¿é® Redis","/pages/65e4a2/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/22.Springè®¿é®MongoDB.md","Spring è®¿é® MongoDB","/pages/db2a41/"],["13.æ¡æ¶/01.Spring/02.Springæ°æ®/23.Springè®¿é®Elasticsearch.md","Spring è®¿é® Elasticsearch","/pages/fac14c/"]]},{title:"SpringWeb",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/03.SpringWeb/01.SpringWebç»¼è¿°.md","Spring Web ç»¼è¿°","/pages/65351b/"],["13.æ¡æ¶/01.Spring/03.SpringWeb/02.SpringWebåºç¨.md","Spring Web åºç¨","/pages/5d002f/"],["13.æ¡æ¶/01.Spring/03.SpringWeb/03.DispatcherServlet.md","Spring MVC ä¹ DispatcherServlet","/pages/20287b/"],["13.æ¡æ¶/01.Spring/03.SpringWeb/04.Springè¿æ»¤å¨.md","Spring MVC ä¹è¿æ»¤å¨","/pages/4a164d/"],["13.æ¡æ¶/01.Spring/03.SpringWeb/05.Springè·¨å.md","Spring MVC ä¹è·¨å","/pages/1d2954/"],["13.æ¡æ¶/01.Spring/03.SpringWeb/06.Springè§å¾.md","Spring MVC ä¹è§å¾ææ¯","/pages/251e31/"],["13.æ¡æ¶/01.Spring/03.SpringWeb/21.SpringBootä¹åºç¨EasyUI.md","SpringBoot ä¹åºç¨ EasyUI","/pages/ad0516/"]]},{title:"SpringIO",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/04.SpringIO/01.SpringBootä¹å¼æ­¥è¯·æ±.md","spring-boot-async","/pages/92add2/"],["13.æ¡æ¶/01.Spring/04.SpringIO/02.SpringBootä¹Json.md","SpringBoot ä¹éæ Json","/pages/676725/"],["13.æ¡æ¶/01.Spring/04.SpringIO/03.SpringBootä¹é®ä»¶.md","SpringBoot ä¹åéé®ä»¶","/pages/2586f1/"]]},{title:"Springéæ",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/05.Springéæ/01.Springéæç¼å­.md","Springéæç¼å­","/pages/a311cb/"],["13.æ¡æ¶/01.Spring/05.Springéæ/02.Springéæè°åº¦å¨.md","Spring éæè°åº¦å¨","/pages/a187f0/"],["13.æ¡æ¶/01.Spring/05.Springéæ/03.SpringéæDubbo.md","SpringéæDubbo","/pages/274fd7/"]]},{title:"Springå®å¨",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/10.Springå®å¨/01.SpringBootä¹å®å¨å¿«éå¥é¨.md","SpringBoot ä¹å®å¨å¿«éå¥é¨","/pages/568352/"]]},{title:"Springå¶ä»",collapsable:!0,children:[["13.æ¡æ¶/01.Spring/99.Springå¶ä»/01.Spring4åçº§.md","Spring 4 åçº§è¸©é·æå","/pages/752c6a/"],["13.æ¡æ¶/01.Spring/99.Springå¶ä»/21.SpringBootä¹banner.md","SpringBoot ä¹ banner å®å¶","/pages/bac2ce/"],["13.æ¡æ¶/01.Spring/99.Springå¶ä»/22.SpringBootä¹Actuator.md","SpringBoot Actuator å¿«éå¥é¨","/pages/c013cc/"]]}]}]}],catalogue:{}},sidebarOpen:!0,updateBar:{showToArticle:!0},category:!0,tag:!0,archive:!0,author:{name:"dunwu",href:"https://github.com/dunwu"},social:{icons:[{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:forbreak@163.com"},{iconClass:"icon-github",title:"GitHub",link:"https://github.com/dunwu"}]},footer:{createYear:2019,copyrightInfo:"éæï¼dunwuï¼ | CC-BY-SA-4.0"},htmlModules:{windowRB:'\n    <div class="wwads-cn wwads-vertical windowRB" data-id="261" style="max-width:160px;\n    min-width: auto;min-height:auto;"></div>\n    <style>\n      .windowRB{ padding: 0;}\n      .windowRB .wwads-img{margin-top: 10px;}\n      .windowRB .wwads-content{margin: 0 10px 40px 10px;}\n      .custom-html-window-rb .close-but{\n        display: none;\n      }\n    </style>\n  '}}};var Sl=t(95),kl=t(96),jl=t(11);var Cl={computed:{$filterPosts(){return this.$site.pages.filter(n=>{const{frontmatter:{pageComponent:e,article:t,home:r}}=n;return!(e||!1===t||!0===r)})},$sortPosts(){return(n=this.$filterPosts).sort((n,e)=>{const t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(jl.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(jl.a)(n,e)}),n;var n},$sortPostsByDate(){return(n=this.$filterPosts).sort((n,e)=>Object(jl.a)(n,e)),n;var n},$groupPosts(){return function(n){const e={},t={};for(let r=0,a=n.length;r<a;r++){const{frontmatter:{categories:a,tags:i}}=n[r];"array"===Object(jl.n)(a)&&a.forEach(t=>{t&&(e[t]||(e[t]=[]),e[t].push(n[r]))}),"array"===Object(jl.n)(i)&&i.forEach(e=>{e&&(t[e]||(t[e]=[]),t[e].push(n[r]))})}return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags(){return function(n){const e=[],t=[];for(let t in n.categories)e.push({key:t,length:n.categories[t].length});for(let e in n.tags)t.push({key:e,length:n.tags[e].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Wt.component(Sl.default),Wt.component(kl.default);function Tl(n){return n.toString().padStart(2,"0")}t(245);Wt.component("Badge",()=>Promise.all([t.e(0),t.e(3)]).then(t.bind(null,408))),Wt.component("CodeBlock",()=>Promise.resolve().then(t.bind(null,95))),Wt.component("CodeGroup",()=>Promise.resolve().then(t.bind(null,96)));t(246);var Al=t(94),Bl=t.n(Al),Il=t(25);let El,Pl;var _l;"valine"===(_l="gitalk")?t.e(72).then(t.t.bind(null,338,7)).then(n=>Pl=n.default):"gitalk"===_l&&Promise.all([t.e(0),t.e(71)]).then(t.t.bind(null,339,7)).then(()=>t.e(70).then(t.t.bind(null,340,7))).then(n=>El=n.default);function Ml(n,e){const t={};return Reflect.ownKeys(n).forEach(r=>{if("string"==typeof n[r])try{t[r]=Bl.a.render(n[r],e)}catch(e){console.warn(`Comment config option error at key named "${r}"`),console.warn("More info: "+e.message),t[r]=n[r]}else t[r]=n[r]}),t}console.log(`How to use "gitalk" in ${Il.name}@v${Il.version}:`,Il.homepage);const Rl={gitalk:{render(n,e){const t=document.createElement("div");t.id=e;document.querySelector("main.page").appendChild(t);new El(Ml({clientID:"01d530004cf00567e0ee",clientSecret:"7dd472f49b47521f80838d810b568c8084b7f1fa",repo:"spring-tutorial",owner:"dunwu",admin:["dunwu"],pagerDirection:"last",id:"<%- (frontmatter.permalink || frontmatter.to.path).slice(-16) %>",title:"ãè¯è®ºã<%- frontmatter.title %>",labels:["Gitalk","Comment"],body:"é¡µé¢ï¼<%- window.location.origin + (frontmatter.to.path || window.location.pathname) %>"},{frontmatter:n})).render(e)},clear(n){const e=document.querySelector("#"+n);return e&&e.remove(),!0}},valine:{render(n,e){const t=document.createElement("div");t.id=e;document.querySelector("main.page").appendChild(t),new Pl({...Ml({clientID:"01d530004cf00567e0ee",clientSecret:"7dd472f49b47521f80838d810b568c8084b7f1fa",repo:"spring-tutorial",owner:"dunwu",admin:["dunwu"],pagerDirection:"last",id:"<%- (frontmatter.permalink || frontmatter.to.path).slice(-16) %>",title:"ãè¯è®ºã<%- frontmatter.title %>",labels:["Gitalk","Comment"],body:"é¡µé¢ï¼<%- window.location.origin + (frontmatter.to.path || window.location.pathname) %>"},{frontmatter:n}),el:"#"+e})},clear(n){const e=document.querySelector("#"+n);return e&&e.remove(),!0}}},Dl="vuepress-plugin-comment";let zl=null;function Ol(n){return Rl.gitalk.clear(Dl)}function Ll(n){return!1!==n.comment&&!1!==n.comments}function Jl(n){clearTimeout(zl);if(document.querySelector("main.page"))return Rl.gitalk.render(n,Dl);zl=setTimeout(()=>Jl(n),200)}var ql={mounted(){zl=setTimeout(()=>{const n={to:{},from:{},...this.$frontmatter};Ol()&&Ll(n)&&Jl(n)},1e3),this.$router.afterEach((n,e)=>{if(n&&e&&n.path===e.path)return;const t={to:n,from:e,...this.$frontmatter};Ol()&&Ll(t)&&Jl(t)})}},Fl=Object(vl.a)(ql,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null).exports,Ul=[({Vue:n,options:e,router:t,siteData:r,isServer:a})=>{a||t.afterEach(()=>{var n;n=function(){setTimeout((function(){void 0===window._AdBlockInit&&function(){const n=document.getElementsByClassName("wwads-cn"),e=document.querySelector(".wwads-content");n[0]&&!e&&(n[0].innerHTML="<style>.wwads-horizontal,.wwads-vertical{background-color:#f4f8fa;padding:5px;min-height:120px;margin-top:20px;box-sizing:border-box;border-radius:3px;font-family:sans-serif;display:flex;min-width:150px;position:relative;overflow:hidden;}.wwads-horizontal{flex-wrap:wrap;justify-content:center}.wwads-vertical{flex-direction:column;align-items:center;padding-bottom:32px}.wwads-horizontal a,.wwads-vertical a{text-decoration:none}.wwads-horizontal .wwads-img,.wwads-vertical .wwads-img{margin:5px}.wwads-horizontal .wwads-content,.wwads-vertical .wwads-content{margin:5px}.wwads-horizontal .wwads-content{flex:130px}.wwads-vertical .wwads-content{margin-top:10px}.wwads-horizontal .wwads-text,.wwads-content .wwads-text{font-size:14px;line-height:1.4;color:#0e1011;-webkit-font-smoothing:antialiased}.wwads-horizontal .wwads-poweredby,.wwads-vertical .wwads-poweredby{display:block;font-size:11px;color:#a6b7bf;margin-top:1em}.wwads-vertical .wwads-poweredby{position:absolute;left:10px;bottom:10px}.wwads-horizontal .wwads-poweredby span,.wwads-vertical .wwads-poweredby span{transition:all 0.2s ease-in-out;margin-left:-1em}.wwads-horizontal .wwads-poweredby span:first-child,.wwads-vertical .wwads-poweredby span:first-child{opacity:0}.wwads-horizontal:hover .wwads-poweredby span,.wwads-vertical:hover .wwads-poweredby span{opacity:1;margin-left:0}.wwads-horizontal .wwads-hide,.wwads-vertical .wwads-hide{position:absolute;right:-23px;bottom:-23px;width:46px;height:46px;border-radius:23px;transition:all 0.3s ease-in-out;cursor:pointer;}.wwads-horizontal .wwads-hide:hover,.wwads-vertical .wwads-hide:hover{background:rgb(0 0 0 /0.05)}.wwads-horizontal .wwads-hide svg,.wwads-vertical .wwads-hide svg{position:absolute;left:10px;top:10px;fill:#a6b7bf}.wwads-horizontal .wwads-hide:hover svg,.wwads-vertical .wwads-hide:hover svg{fill:#3E4546}</style><a href='https://wwads.cn/page/whitelist-wwads' class='wwads-img' target='_blank' rel='nofollow'><img src='https://fastly.jsdelivr.net/gh/xugaoyi/image_store@master/blog/wwads.2a3pidhlh4ys.webp' width='130'></a><div class='wwads-content'><a href='https://wwads.cn/page/whitelist-wwads' class='wwads-text' target='_blank' rel='nofollow'>ä¸ºäºæ¬ç«çé¿æè¿è¥ï¼è¯·å°æä»¬çç½ç«å å¥å¹¿åæ¦æªå¨çç½ååï¼æè°¢æ¨çæ¯æï¼<span style='color: #11a8cd'>å¦ä½æ·»å ç½åå?</span></a><a href='https://wwads.cn/page/end-user-privacy' class='wwads-poweredby' title='ä¸ç»´å¹¿å ï½ è®©å¹¿åæ´ä¼éï¼ä¸æç¨' target='_blank'><span>å¹¿å</span></a></div><a class='wwads-hide' onclick='parentNode.remove()' title='éèå¹¿å'><svg xmlns='http://www.w3.org/2000/svg' width='6' height='7'><path d='M.879.672L3 2.793 5.121.672a.5.5 0 11.707.707L3.708 3.5l2.12 2.121a.5.5 0 11-.707.707l-2.12-2.12-2.122 2.12a.5.5 0 11-.707-.707l2.121-2.12L.172 1.378A.5.5 0 01.879.672z'></path></svg></a>")}()}),3e3)},"complete"===document.readyState||"interactive"===document.readyState?setTimeout(n,1):document.addEventListener("DOMContentLoaded",n),setTimeout(()=>{const n=document.querySelector(".page-wwads");if(!n)return;const e=n.querySelector(".wwads-hide");e&&(e.onclick=()=>{n.style.display="none"}),"none"===n.style.display&&(n.style.display="flex")},900)})},({Vue:n,options:e,router:t,siteData:r})=>{r.pages.map(n=>{const{frontmatter:{date:e,author:t}}=n;"string"==typeof e&&"Z"===e.charAt(e.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return`${n.getUTCFullYear()}-${Tl(n.getUTCMonth()+1)}-${Tl(n.getUTCDate())} ${Tl(n.getUTCHours())}:${Tl(n.getUTCMinutes())}:${Tl(n.getUTCSeconds())}`}(e)),t?n.author=t:r.themeConfig.author&&(n.author=r.themeConfig.author)}),n.mixin(Cl)},{},({Vue:n})=>{n.mixin({computed:{$dataBlock(){return this.$options.__data__block__}}})},{},{},()=>{"undefined"!=typeof window&&function(n,e,t){function r(n){var t=e.createElement("div");t.className="heart",a.push({el:t,x:n.clientX-5,y:n.clientY-5,scale:1,alpha:1,color:"#11a8cd"}),e.body.appendChild(t)}var a=[];n.requestAnimationFrame=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(n){setTimeout(n,1e3/60)},function(n){var t=e.createElement("style");t.type="text/css";try{t.appendChild(e.createTextNode(n))}catch(e){t.styleSheet.cssText=n}e.getElementsByTagName("head")[0].appendChild(t)}(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),function(){var e="function"==typeof n.onclick&&n.onclick;n.onclick=function(n){let t=!0;n.path&&n.path.forEach(n=>{1===n.nodeType&&"string"==typeof n.className&&n.className.indexOf("theme-vdoing-content")>-1&&(t=!1)}),t&&(e&&e(),r(n))}}(),function n(){for(var t=0;t<a.length;t++)a[t].alpha<=0?(e.body.removeChild(a[t].el),a.splice(t,1)):(a[t].y--,a[t].scale+=.004,a[t].alpha-=.013,a[t].el.style.cssText="left:"+a[t].x+"px;top:"+a[t].y+"px;opacity:"+a[t].alpha+";transform:scale("+a[t].scale+","+a[t].scale+") rotate(45deg);background:"+a[t].color+";z-index:99999");requestAnimationFrame(n)}()}(window,document)},({Vue:n})=>{n.component("Comment",Fl)}],Nl=["Comment"];class Hl extends class{constructor(){this.store=new Wt({data:{state:{}}})}$get(n){return this.store.state[n]}$set(n,e){Wt.set(this.store.state,n,e)}$emit(...n){this.store.$emit(...n)}$on(...n){this.store.$on(...n)}}{}Object.assign(Hl.prototype,{getPageAsyncComponent:ss,getLayoutAsyncComponent:ls,getAsyncComponent:ps,getVueComponent:cs});var Vl={install(n){const e=new Hl;n.$vuepress=e,n.prototype.$vuepress=e}};function $l(n,e){const t=e.toLowerCase();return n.options.routes.some(n=>n.path.toLowerCase()===t)}var Wl={props:{pageKey:String,slotKey:{type:String,default:"default"}},render(n){const e=this.pageKey||this.$parent.$page.key;return gs("pageKey",e),Wt.component(e)||Wt.component(e,ss(e)),Wt.component(e)?n(e):n("")}},Xl={functional:!0,props:{slotKey:String,required:!0},render:(n,{props:e,slots:t})=>n("div",{class:["content__"+e.slotKey]},t()[e.slotKey])},Gl={computed:{openInNewWindowTitle(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Ql=(t(251),t(252),Object(vl.a)(Gl,(function(){var n=this._self._c;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports),Yl={functional:!0,render(n,{parent:e,children:t}){if(e._isMounted)return t;e.$once("hook:mounted",()=>{e.$forceUpdate()})}};Wt.config.productionTip=!1,Wt.use(Vo),Wt.use(Vl),Wt.mixin(function(n,e,t=Wt){!function(n){n.locales&&Object.keys(n.locales).forEach(e=>{n.locales[e].path=e});Object.freeze(n)}(e),t.$vuepress.$set("siteData",e);const r=new(n(t.$vuepress.$get("siteData"))),a=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(r)),i={};return Object.keys(a).reduce((n,e)=>(e.startsWith("$")&&(n[e]=a[e].get),n),i),{computed:i}}(n=>class{setPage(n){this.__page=n}get $site(){return n}get $themeConfig(){return this.$site.themeConfig}get $frontmatter(){return this.$page.frontmatter}get $localeConfig(){const{locales:n={}}=this.$site;let e,t;for(const r in n)"/"===r?t=n[r]:0===this.$page.path.indexOf(r)&&(e=n[r]);return e||t||{}}get $siteTitle(){return this.$localeConfig.title||this.$site.title||""}get $canonicalUrl(){const{canonicalUrl:n}=this.$page.frontmatter;return"string"==typeof n&&n}get $title(){const n=this.$page,{metaTitle:e}=this.$page.frontmatter;if("string"==typeof e)return e;const t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}get $description(){const n=function(n){if(n){const e=n.filter(n=>"description"===n.name)[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}get $lang(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}get $localePath(){return this.$localeConfig.path||"/"}get $themeLocaleConfig(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}get $page(){return this.__page?this.__page:function(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}},wl)),Wt.component("Content",Wl),Wt.component("ContentSlotsDistributor",Xl),Wt.component("OutboundLink",Ql),Wt.component("ClientOnly",Yl),Wt.component("Layout",ls("Layout")),Wt.component("NotFound",ls("NotFound")),Wt.prototype.$withBase=function(n){const e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.9",hash:"060d197"},async function(n){const e="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:wl.routerBase||wl.base,t=new Vo({base:e,mode:"history",fallback:!1,routes:xl,scrollBehavior:(n,e,t)=>t||(n.hash?!Wt.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})});!function(n){n.beforeEach((e,t,r)=>{if($l(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){const t=e.path.replace(/\/$/,"")+".html";$l(n,t)?r(t):r()}else r();else{const t=e.path+"/",a=e.path+".html";$l(n,a)?r(a):$l(n,t)?r(t):r()}})}(t);const r={};try{await Promise.all(Ul.filter(n=>"function"==typeof n).map(e=>e({Vue:Wt,options:r,router:t,siteData:wl,isServer:n})))}catch(n){console.error(n)}return{app:new Wt(Object.assign(r,{router:t,render:n=>n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},Nl.map(e=>n(e)))])})),router:t}}(!1).then(({app:n,router:e})=>{e.onReady(()=>{n.$mount("#app")})})}]);